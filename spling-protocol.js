(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.spling=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){module.exports=require("@spling-labs/spling-protocol")},{"@spling-labs/spling-protocol":105}],2:[function(require,module,exports){function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}module.exports=_assertThisInitialized,module.exports.__esModule=true,module.exports["default"]=module.exports},{}],3:[function(require,module,exports){function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}module.exports=_asyncToGenerator,module.exports.__esModule=true,module.exports["default"]=module.exports},{}],4:[function(require,module,exports){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}module.exports=_classCallCheck,module.exports.__esModule=true,module.exports["default"]=module.exports},{}],5:[function(require,module,exports){var toPropertyKey=require("./toPropertyKey.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}module.exports=_createClass,module.exports.__esModule=true,module.exports["default"]=module.exports},{"./toPropertyKey.js":13}],6:[function(require,module,exports){function _getPrototypeOf(o){module.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},module.exports.__esModule=true,module.exports["default"]=module.exports;return _getPrototypeOf(o)}module.exports=_getPrototypeOf,module.exports.__esModule=true,module.exports["default"]=module.exports},{}],7:[function(require,module,exports){var setPrototypeOf=require("./setPrototypeOf.js");function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)setPrototypeOf(subClass,superClass)}module.exports=_inherits,module.exports.__esModule=true,module.exports["default"]=module.exports},{"./setPrototypeOf.js":11}],8:[function(require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=_interopRequireDefault,module.exports.__esModule=true,module.exports["default"]=module.exports},{}],9:[function(require,module,exports){var _typeof=require("./typeof.js")["default"];var assertThisInitialized=require("./assertThisInitialized.js");function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return assertThisInitialized(self)}module.exports=_possibleConstructorReturn,module.exports.__esModule=true,module.exports["default"]=module.exports},{"./assertThisInitialized.js":2,"./typeof.js":14}],10:[function(require,module,exports){var _typeof=require("./typeof.js")["default"];function _regeneratorRuntime(){"use strict";module.exports=_regeneratorRuntime=function _regeneratorRuntime(){return exports},module.exports.__esModule=true,module.exports["default"]=module.exports;var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,function(){return this});var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg)})})}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject)},function(err){invoke("throw",err,resolve,reject)}):PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result)},function(error){return invoke("throw",error,resolve,reject)})}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject)})}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(undefined===method)return context.delegate=null,"throw"===methodName&&delegate.iterator["return"]&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:undefined,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,function(){return this}),define(Gp,"toString",function(){return"[object Generator]"}),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel}},exports}module.exports=_regeneratorRuntime,module.exports.__esModule=true,module.exports["default"]=module.exports},{"./typeof.js":14}],11:[function(require,module,exports){function _setPrototypeOf(o,p){module.exports=_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o},module.exports.__esModule=true,module.exports["default"]=module.exports;return _setPrototypeOf(o,p)}module.exports=_setPrototypeOf,module.exports.__esModule=true,module.exports["default"]=module.exports},{}],12:[function(require,module,exports){var _typeof=require("./typeof.js")["default"];function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}module.exports=_toPrimitive,module.exports.__esModule=true,module.exports["default"]=module.exports},{"./typeof.js":14}],13:[function(require,module,exports){var _typeof=require("./typeof.js")["default"];var toPrimitive=require("./toPrimitive.js");function _toPropertyKey(arg){var key=toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key)}module.exports=_toPropertyKey,module.exports.__esModule=true,module.exports["default"]=module.exports},{"./toPrimitive.js":12,"./typeof.js":14}],14:[function(require,module,exports){function _typeof(obj){"@babel/helpers - typeof";return module.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},module.exports.__esModule=true,module.exports["default"]=module.exports,_typeof(obj)}module.exports=_typeof,module.exports.__esModule=true,module.exports["default"]=module.exports},{}],15:[function(require,module,exports){var runtime=require("../helpers/regeneratorRuntime")();module.exports=runtime;try{regeneratorRuntime=runtime}catch(accidentalStrictMode){if(typeof globalThis==="object"){globalThis.regeneratorRuntime=runtime}else{Function("r","regeneratorRuntime = r")(runtime)}}},{"../helpers/regeneratorRuntime":10}],16:[function(require,module,exports){(function(global,Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AnchorProvider=exports.AnchorError=exports.AccountClient=exports.ACCOUNT_DISCRIMINATOR_SIZE=void 0;Object.defineProperty(exports,"BN",{enumerable:true,get:function(){return _bn.default}});exports.SystemCoder=exports.StateClient=exports.ProgramErrorStack=exports.ProgramError=exports.Program=exports.Native=exports.MethodsBuilderFactory=exports.LangErrorMessage=exports.LangErrorCode=exports.IdlError=exports.EventParser=exports.EventManager=exports.BorshStateCoder=exports.BorshInstructionCoder=exports.BorshEventCoder=exports.BorshCoder=exports.BorshAccountsCoder=void 0;exports.eventDiscriminator=eventDiscriminator;exports.getProvider=getProvider;exports.parseIdlErrors=parseIdlErrors;exports.setProvider=setProvider;exports.splitArgsAndCtx=splitArgsAndCtx;exports.stateDiscriminator=stateDiscriminator;exports.toInstruction=toInstruction;exports.translateAddress=translateAddress;exports.translateError=translateError;exports.utils=void 0;exports.validateAccounts=validateAccounts;exports.web3=void 0;var _buffer=require("buffer");var web3_js=_interopRequireWildcard(require("@solana/web3.js"));exports.web3=web3_js;var _bn=_interopRequireDefault(require("bn.js"));var _bs=_interopRequireDefault(require("bs58"));var base64$1=_interopRequireWildcard(require("base64-js"));var _camelcase=_interopRequireDefault(require("camelcase"));var _jsSha=require("js-sha256");var borsh=_interopRequireWildcard(require("@coral-xyz/borsh"));var _pako=require("pako");var _eventemitter=_interopRequireDefault(require("eventemitter3"));var assert$1=_interopRequireWildcard(require("assert"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function chunks(array,size){return Array.apply(0,new Array(Math.ceil(array.length/size))).map((_,index)=>array.slice(index*size,(index+1)*size))}function encode$3(data){return data.reduce((str,byte)=>str+byte.toString(16).padStart(2,"0"),"0x")}function decode$3(data){if(data.indexOf("0x")===0){data=data.substr(2)}if(data.length%2===1){data="0"+data}let key=data.match(/.{2}/g);if(key===null){return _buffer.Buffer.from([])}return _buffer.Buffer.from(key.map(byte=>parseInt(byte,16)))}var hex=Object.freeze({__proto__:null,encode:encode$3,decode:decode$3});function decode$2(array){const decoder=new TextDecoder("utf-8");return decoder.decode(array)}function encode$2(input){const encoder=new TextEncoder;return encoder.encode(input)}var utf8=Object.freeze({__proto__:null,decode:decode$2,encode:encode$2});function encode$1(data){return _bs.default.encode(data)}function decode$1(data){return _bs.default.decode(data)}var bs58=Object.freeze({__proto__:null,encode:encode$1,decode:decode$1});function encode(data){return base64$1.fromByteArray(data)}function decode(data){return _buffer.Buffer.from(base64$1.toByteArray(data))}var base64=Object.freeze({__proto__:null,encode:encode,decode:decode});var index$1=Object.freeze({__proto__:null,hex:hex,utf8:utf8,bs58:bs58,base64:base64});function parseIdlErrors(idl){const errors=new Map;if(idl.errors){idl.errors.forEach(e=>{var _a;let msg=(_a=e.msg)!==null&&_a!==void 0?_a:e.name;errors.set(e.code,msg)})}return errors}function toInstruction(idlIx,...args){if(idlIx.args.length!=args.length){throw new Error("Invalid argument length")}const ix={};let idx=0;idlIx.args.forEach(ixArg=>{ix[ixArg.name]=args[idx];idx+=1});return ix}function validateAccounts(ixAccounts,accounts={}){ixAccounts.forEach(acc=>{if("accounts"in acc){validateAccounts(acc.accounts,accounts[acc.name])}else{if(accounts[acc.name]===undefined){throw new Error(`Invalid arguments: ${acc.name} not provided.`)}}})}function translateAddress(address){return address instanceof web3_js.PublicKey?address:new web3_js.PublicKey(address)}class StructError extends TypeError{constructor(failure,failures){let cached;const{message,...rest}=failure;const{path}=failure;const msg=path.length===0?message:"At path: "+path.join(".")+" -- "+message;super(msg);this.value=void 0;this.key=void 0;this.type=void 0;this.refinement=void 0;this.path=void 0;this.branch=void 0;this.failures=void 0;Object.assign(this,rest);this.name=this.constructor.name;this.failures=()=>{var _cached;return(_cached=cached)!=null?_cached:cached=[failure,...failures()]}}}function isIterable(x){return isObject(x)&&typeof x[Symbol.iterator]==="function"}function isObject(x){return typeof x==="object"&&x!=null}function print(value){return typeof value==="string"?JSON.stringify(value):""+value}function shiftIterator(input){const{done,value}=input.next();return done?undefined:value}function toFailure(result,context,struct,value){if(result===true){return}else if(result===false){result={}}else if(typeof result==="string"){result={message:result}}const{path,branch}=context;const{type}=struct;const{refinement,message="Expected a value of type `"+type+"`"+(refinement?" with refinement `"+refinement+"`":"")+", but received: `"+print(value)+"`"}=result;return{value:value,type:type,refinement:refinement,key:path[path.length-1],path:path,branch:branch,...result,message:message}}function*toFailures(result,context,struct,value){if(!isIterable(result)){result=[result]}for(const r of result){const failure=toFailure(r,context,struct,value);if(failure){yield failure}}}function*run(value,struct,options){if(options===void 0){options={}}const{path=[],branch=[value],coerce=false,mask=false}=options;const ctx={path:path,branch:branch};if(coerce){value=struct.coercer(value,ctx);if(mask&&struct.type!=="type"&&isObject(struct.schema)&&isObject(value)&&!Array.isArray(value)){for(const key in value){if(struct.schema[key]===undefined){delete value[key]}}}}let valid=true;for(const failure of struct.validator(value,ctx)){valid=false;yield[failure,undefined]}for(let[k,v,s]of struct.entries(value,ctx)){const ts=run(v,s,{path:k===undefined?path:[...path,k],branch:k===undefined?branch:[...branch,v],coerce:coerce,mask:mask});for(const t of ts){if(t[0]){valid=false;yield[t[0],undefined]}else if(coerce){v=t[1];if(k===undefined){value=v}else if(value instanceof Map){value.set(k,v)}else if(value instanceof Set){value.add(v)}else if(isObject(value)){value[k]=v}}}}if(valid){for(const failure of struct.refiner(value,ctx)){valid=false;yield[failure,undefined]}}if(valid){yield[undefined,value]}}class Struct{constructor(props){this.TYPE=void 0;this.type=void 0;this.schema=void 0;this.coercer=void 0;this.validator=void 0;this.refiner=void 0;this.entries=void 0;const{type,schema,validator,refiner,coercer=value=>value,entries=function*(){}}=props;this.type=type;this.schema=schema;this.entries=entries;this.coercer=coercer;if(validator){this.validator=(value,context)=>{const result=validator(value,context);return toFailures(result,context,this,value)}}else{this.validator=()=>[]}if(refiner){this.refiner=(value,context)=>{const result=refiner(value,context);return toFailures(result,context,this,value)}}else{this.refiner=()=>[]}}assert(value){return assert(value,this)}create(value){return create(value,this)}is(value){return is(value,this)}mask(value){return mask(value,this)}validate(value,options){if(options===void 0){options={}}return validate(value,this,options)}}function assert(value,struct){const result=validate(value,struct);if(result[0]){throw result[0]}}function create(value,struct){const result=validate(value,struct,{coerce:true});if(result[0]){throw result[0]}else{return result[1]}}function mask(value,struct){const result=validate(value,struct,{coerce:true,mask:true});if(result[0]){throw result[0]}else{return result[1]}}function is(value,struct){const result=validate(value,struct);return!result[0]}function validate(value,struct,options){if(options===void 0){options={}}const tuples=run(value,struct,options);const tuple=shiftIterator(tuples);if(tuple[0]){const error=new StructError(tuple[0],function*(){for(const t of tuples){if(t[0]){yield t[0]}}});return[error,undefined]}else{const v=tuple[1];return[undefined,v]}}function define(name,validator){return new Struct({type:name,schema:null,validator:validator})}function any(){return define("any",()=>true)}function array(Element){return new Struct({type:"array",schema:Element,*entries(value){if(Element&&Array.isArray(value)){for(const[i,v]of value.entries()){yield[i,v,Element]}}},coercer(value){return Array.isArray(value)?value.slice():value},validator(value){return Array.isArray(value)||"Expected an array value, but received: "+print(value)}})}function boolean(){return define("boolean",value=>{return typeof value==="boolean"})}function literal(constant){const description=print(constant);const t=typeof constant;return new Struct({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?constant:null,validator(value){return value===constant||"Expected the literal `"+description+"`, but received: "+print(value)}})}function nullable(struct){return new Struct({...struct,validator:(value,ctx)=>value===null||struct.validator(value,ctx),refiner:(value,ctx)=>value===null||struct.refiner(value,ctx)})}function number(){return define("number",value=>{return typeof value==="number"&&!isNaN(value)||"Expected a number, but received: "+print(value)})}function optional(struct){return new Struct({...struct,validator:(value,ctx)=>value===undefined||struct.validator(value,ctx),refiner:(value,ctx)=>value===undefined||struct.refiner(value,ctx)})}function string(){return define("string",value=>{return typeof value==="string"||"Expected a string, but received: "+print(value)})}function type(schema){const keys=Object.keys(schema);return new Struct({type:"type",schema:schema,*entries(value){if(isObject(value)){for(const k of keys){yield[k,value[k],schema[k]]}}},validator(value){return isObject(value)||"Expected an object, but received: "+print(value)}})}function union$1(Structs){const description=Structs.map(s=>s.type).join(" | ");return new Struct({type:"union",schema:null,coercer(value,ctx){const firstMatch=Structs.find(s=>{const[e]=s.validate(value,{coerce:true});return!e})||unknown();return firstMatch.coercer(value,ctx)},validator(value,ctx){const failures=[];for(const S of Structs){const[...tuples]=run(value,S,ctx);const[first]=tuples;if(!first[0]){return[]}else{for(const[failure]of tuples){if(failure){failures.push(failure)}}}}return["Expected the value to satisfy a union of `"+description+"`, but received: "+print(value),...failures]}})}function unknown(){return define("unknown",()=>true)}function coerce(struct,condition,coercer){return new Struct({...struct,coercer:(value,ctx)=>{return is(value,condition)?struct.coercer(coercer(value,ctx),ctx):struct.coercer(value,ctx)}})}async function invoke(programId,accounts,data,provider){programId=translateAddress(programId);if(!provider){provider=getProvider()}const tx=new web3_js.Transaction;tx.add(new web3_js.TransactionInstruction({programId:programId,keys:accounts!==null&&accounts!==void 0?accounts:[],data:data}));if(provider.sendAndConfirm===undefined){throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.")}return await provider.sendAndConfirm(tx,[])}const GET_MULTIPLE_ACCOUNTS_LIMIT=99;async function getMultipleAccounts(connection,publicKeys,commitment){const results=await getMultipleAccountsAndContext(connection,publicKeys,commitment);return results.map(result=>{return result?{publicKey:result.publicKey,account:result.account}:null})}async function getMultipleAccountsAndContext(connection,publicKeys,commitment){if(publicKeys.length<=GET_MULTIPLE_ACCOUNTS_LIMIT){return await getMultipleAccountsAndContextCore(connection,publicKeys,commitment)}else{const batches=chunks(publicKeys,GET_MULTIPLE_ACCOUNTS_LIMIT);const results=await Promise.all(batches.map(batch=>getMultipleAccountsAndContextCore(connection,batch,commitment)));return results.flat()}}async function getMultipleAccountsAndContextCore(connection,publicKeys,commitmentOverride){const commitment=commitmentOverride!==null&&commitmentOverride!==void 0?commitmentOverride:connection.commitment;const{value:accountInfos,context}=await connection.getMultipleAccountsInfoAndContext(publicKeys,commitment);const accounts=accountInfos.map((account,idx)=>{if(account===null){return null}return{publicKey:publicKeys[idx],account:account,context:context}});return accounts}async function simulateTransaction(connection,transaction,signers,commitment,includeAccounts){if(signers&&signers.length>0){transaction.sign(...signers)}const message=transaction._compile();const signData=message.serialize();const wireTransaction=transaction._serialize(signData);const encodedTransaction=wireTransaction.toString("base64");const config={encoding:"base64",commitment:commitment!==null&&commitment!==void 0?commitment:connection.commitment};if(includeAccounts){const addresses=(Array.isArray(includeAccounts)?includeAccounts:message.nonProgramIds()).map(key=>key.toBase58());config["accounts"]={encoding:"base64",addresses:addresses}}if(signers){config.sigVerify=true}const args=[encodedTransaction,config];const unsafeRes=await connection._rpcRequest("simulateTransaction",args);const res=create(unsafeRes,SimulatedTransactionResponseStruct);if("error"in res){let logs;if("data"in res.error){logs=res.error.data.logs;if(logs&&Array.isArray(logs)){const traceIndent="\n    ";const logTrace=traceIndent+logs.join(traceIndent);console.error(res.error.message,logTrace)}}throw new web3_js.SendTransactionError("failed to simulate transaction: "+res.error.message,logs)}return res.result}function jsonRpcResult(schema){return coerce(createRpcResult(schema),UnknownRpcResult,value=>{if("error"in value){return value}else{return{...value,result:create(value.result,schema)}}})}const UnknownRpcResult=createRpcResult(unknown());function createRpcResult(result){return union$1([type({jsonrpc:literal("2.0"),id:string(),result:result}),type({jsonrpc:literal("2.0"),id:string(),error:type({code:unknown(),message:string(),data:optional(any())})})])}function jsonRpcResultAndContext(value){return jsonRpcResult(type({context:type({slot:number()}),value:value}))}const SimulatedTransactionResponseStruct=jsonRpcResultAndContext(type({err:nullable(union$1([type({}),string()])),logs:nullable(array(string())),accounts:optional(nullable(array(nullable(type({executable:boolean(),owner:string(),lamports:number(),data:array(string()),rentEpoch:optional(number())}))))),unitsConsumed:optional(number())}));var rpc=Object.freeze({__proto__:null,invoke:invoke,getMultipleAccounts:getMultipleAccounts,getMultipleAccountsAndContext:getMultipleAccountsAndContext,simulateTransaction:simulateTransaction});class AnchorProvider{constructor(connection,wallet,opts){this.connection=connection;this.wallet=wallet;this.opts=opts;this.publicKey=wallet===null||wallet===void 0?void 0:wallet.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(url,opts){{throw new Error(`Provider local is not available on browser.`)}}static env(){{throw new Error(`Provider env is not available on browser.`)}}async sendAndConfirm(tx,signers,opts){var _a;if(opts===undefined){opts=this.opts}tx.feePayer=tx.feePayer||this.wallet.publicKey;tx.recentBlockhash=(await this.connection.getLatestBlockhash(opts.preflightCommitment)).blockhash;tx=await this.wallet.signTransaction(tx);(signers!==null&&signers!==void 0?signers:[]).forEach(kp=>{tx.partialSign(kp)});const rawTx=tx.serialize();try{return await sendAndConfirmRawTransaction(this.connection,rawTx,opts)}catch(err){if(err instanceof ConfirmError){const failedTx=await this.connection.getTransaction(encode$1(tx.signature),{commitment:"confirmed"});if(!failedTx){throw err}else{const logs=(_a=failedTx.meta)===null||_a===void 0?void 0:_a.logMessages;throw!logs?err:new web3_js.SendTransactionError(err.message,logs)}}else{throw err}}}async sendAll(txWithSigners,opts){var _a;if(opts===undefined){opts=this.opts}const blockhash=await this.connection.getLatestBlockhash(opts.preflightCommitment);let txs=txWithSigners.map(r=>{var _a;let tx=r.tx;let signers=(_a=r.signers)!==null&&_a!==void 0?_a:[];tx.feePayer=tx.feePayer||this.wallet.publicKey;tx.recentBlockhash=blockhash.blockhash;signers.forEach(kp=>{tx.partialSign(kp)});return tx});const signedTxs=await this.wallet.signAllTransactions(txs);const sigs=[];for(let k=0;k<txs.length;k+=1){const tx=signedTxs[k];const rawTx=tx.serialize();try{sigs.push(await sendAndConfirmRawTransaction(this.connection,rawTx,opts))}catch(err){if(err instanceof ConfirmError){const failedTx=await this.connection.getTransaction(encode$1(tx.signature),{commitment:"confirmed"});if(!failedTx){throw err}else{const logs=(_a=failedTx.meta)===null||_a===void 0?void 0:_a.logMessages;throw!logs?err:new web3_js.SendTransactionError(err.message,logs)}}else{throw err}}}return sigs}async simulate(tx,signers,commitment,includeAccounts){tx.feePayer=tx.feePayer||this.wallet.publicKey;tx.recentBlockhash=(await this.connection.getLatestBlockhash(commitment!==null&&commitment!==void 0?commitment:this.connection.commitment)).blockhash;tx=await this.wallet.signTransaction(tx);const result=await simulateTransaction(this.connection,tx,signers,commitment,includeAccounts);if(result.value.err){throw new SimulateError(result.value)}return result.value}}exports.AnchorProvider=AnchorProvider;class SimulateError extends Error{constructor(simulationResponse,message){super(message);this.simulationResponse=simulationResponse}}async function sendAndConfirmRawTransaction(connection,rawTransaction,options){const sendOptions=options&&{skipPreflight:options.skipPreflight,preflightCommitment:options.preflightCommitment||options.commitment};const signature=await connection.sendRawTransaction(rawTransaction,sendOptions);const status=(await connection.confirmTransaction(signature,options&&options.commitment)).value;if(status.err){throw new ConfirmError(`Raw transaction ${signature} failed (${JSON.stringify(status)})`)}return signature}class ConfirmError extends Error{constructor(message){super(message)}}function setProvider(provider){_provider=provider}function getProvider(){if(_provider===null){return AnchorProvider.local()}return _provider}let _provider=null;const _AVAILABLE_FEATURES=new Set(["anchor-deprecated-state","debug-logs"]);const _FEATURES=new Map;function set(key){if(!_AVAILABLE_FEATURES.has(key)){throw new Error("Invalid feature")}_FEATURES.set(key,true)}function isSet(key){return _FEATURES.get(key)!==undefined}var features=Object.freeze({__proto__:null,set:set,isSet:isSet});class IdlError extends Error{constructor(message){super(message);this.name="IdlError"}}exports.IdlError=IdlError;class ProgramErrorStack{constructor(stack){this.stack=stack}static parse(logs){var _a;const programKeyRegex=/^Program (\w*) invoke/;const successRegex=/^Program \w* success/;const programStack=[];for(let i=0;i<logs.length;i++){if(successRegex.exec(logs[i])){programStack.pop();continue}const programKey=(_a=programKeyRegex.exec(logs[i]))===null||_a===void 0?void 0:_a[1];if(!programKey){continue}programStack.push(new web3_js.PublicKey(programKey))}return new ProgramErrorStack(programStack)}}exports.ProgramErrorStack=ProgramErrorStack;class AnchorError extends Error{constructor(errorCode,errorMessage,errorLogs,logs,origin,comparedValues){super(errorLogs.join("\n").replace("Program log: ",""));this.errorLogs=errorLogs;this.logs=logs;this.error={errorCode:errorCode,errorMessage:errorMessage,comparedValues:comparedValues,origin:origin};this._programErrorStack=ProgramErrorStack.parse(logs)}static parse(logs){if(!logs){return null}const anchorErrorLogIndex=logs.findIndex(log=>log.startsWith("Program log: AnchorError"));if(anchorErrorLogIndex===-1){return null}const anchorErrorLog=logs[anchorErrorLogIndex];const errorLogs=[anchorErrorLog];let comparedValues;if(anchorErrorLogIndex+1<logs.length){if(logs[anchorErrorLogIndex+1]==="Program log: Left:"){const pubkeyRegex=/^Program log: (.*)$/;const leftPubkey=pubkeyRegex.exec(logs[anchorErrorLogIndex+2])[1];const rightPubkey=pubkeyRegex.exec(logs[anchorErrorLogIndex+4])[1];comparedValues=[new web3_js.PublicKey(leftPubkey),new web3_js.PublicKey(rightPubkey)];errorLogs.push(...logs.slice(anchorErrorLogIndex+1,anchorErrorLogIndex+5))}else if(logs[anchorErrorLogIndex+1].startsWith("Program log: Left:")){const valueRegex=/^Program log: (Left|Right): (.*)$/;const leftValue=valueRegex.exec(logs[anchorErrorLogIndex+1])[2];const rightValue=valueRegex.exec(logs[anchorErrorLogIndex+2])[2];errorLogs.push(...logs.slice(anchorErrorLogIndex+1,anchorErrorLogIndex+3));comparedValues=[leftValue,rightValue]}}const regexNoInfo=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./;const noInfoAnchorErrorLog=regexNoInfo.exec(anchorErrorLog);const regexFileLine=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./;const fileLineAnchorErrorLog=regexFileLine.exec(anchorErrorLog);const regexAccountName=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./;const accountNameAnchorErrorLog=regexAccountName.exec(anchorErrorLog);if(noInfoAnchorErrorLog){const[errorCodeString,errorNumber,errorMessage]=noInfoAnchorErrorLog.slice(1,4);const errorCode={code:errorCodeString,number:parseInt(errorNumber)};return new AnchorError(errorCode,errorMessage,errorLogs,logs,undefined,comparedValues)}else if(fileLineAnchorErrorLog){const[file,line,errorCodeString,errorNumber,errorMessage]=fileLineAnchorErrorLog.slice(1,6);const errorCode={code:errorCodeString,number:parseInt(errorNumber)};const fileLine={file:file,line:parseInt(line)};return new AnchorError(errorCode,errorMessage,errorLogs,logs,fileLine,comparedValues)}else if(accountNameAnchorErrorLog){const[accountName,errorCodeString,errorNumber,errorMessage]=accountNameAnchorErrorLog.slice(1,5);const origin=accountName;const errorCode={code:errorCodeString,number:parseInt(errorNumber)};return new AnchorError(errorCode,errorMessage,errorLogs,logs,origin,comparedValues)}else{return null}}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}exports.AnchorError=AnchorError;class ProgramError extends Error{constructor(code,msg,logs){super();this.code=code;this.msg=msg;this.logs=logs;if(logs){this._programErrorStack=ProgramErrorStack.parse(logs)}}static parse(err,idlErrors){const errString=err.toString();let unparsedErrorCode;if(errString.includes("custom program error:")){let components=errString.split("custom program error: ");if(components.length!==2){return null}else{unparsedErrorCode=components[1]}}else{const matches=errString.match(/"Custom":([0-9]+)}/g);if(!matches||matches.length>1){return null}unparsedErrorCode=matches[0].match(/([0-9]+)/g)[0]}let errorCode;try{errorCode=parseInt(unparsedErrorCode)}catch(parseErr){return null}let errorMsg=idlErrors.get(errorCode);if(errorMsg!==undefined){return new ProgramError(errorCode,errorMsg,err.logs)}errorMsg=LangErrorMessage.get(errorCode);if(errorMsg!==undefined){return new ProgramError(errorCode,errorMsg,err.logs)}return null}get program(){var _a;return(_a=this._programErrorStack)===null||_a===void 0?void 0:_a.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var _a;return(_a=this._programErrorStack)===null||_a===void 0?void 0:_a.stack}toString(){return this.msg}}exports.ProgramError=ProgramError;function translateError(err,idlErrors){if(isSet("debug-logs")){console.log("Translating error:",err)}const anchorError=AnchorError.parse(err.logs);if(anchorError){return anchorError}const programError=ProgramError.parse(err,idlErrors);if(programError){return programError}if(err.logs){const handler={get:function(target,prop){if(prop==="programErrorStack"){return target.programErrorStack.stack}else if(prop==="program"){return target.programErrorStack.stack[err.programErrorStack.stack.length-1]}else{return Reflect.get(...arguments)}}};err.programErrorStack=ProgramErrorStack.parse(err.logs);return new Proxy(err,handler)}return err}const LangErrorCode={InstructionMissing:100,InstructionFallbackNotFound:101,InstructionDidNotDeserialize:102,InstructionDidNotSerialize:103,IdlInstructionStub:1e3,IdlInstructionInvalidProgram:1001,ConstraintMut:2e3,ConstraintHasOne:2001,ConstraintSigner:2002,ConstraintRaw:2003,ConstraintOwner:2004,ConstraintRentExempt:2005,ConstraintSeeds:2006,ConstraintExecutable:2007,ConstraintState:2008,ConstraintAssociated:2009,ConstraintAssociatedInit:2010,ConstraintClose:2011,ConstraintAddress:2012,ConstraintZero:2013,ConstraintTokenMint:2014,ConstraintTokenOwner:2015,ConstraintMintMintAuthority:2016,ConstraintMintFreezeAuthority:2017,ConstraintMintDecimals:2018,ConstraintSpace:2019,ConstraintAccountIsNone:2020,RequireViolated:2500,RequireEqViolated:2501,RequireKeysEqViolated:2502,RequireNeqViolated:2503,RequireKeysNeqViolated:2504,RequireGtViolated:2505,RequireGteViolated:2506,AccountDiscriminatorAlreadySet:3e3,AccountDiscriminatorNotFound:3001,AccountDiscriminatorMismatch:3002,AccountDidNotDeserialize:3003,AccountDidNotSerialize:3004,AccountNotEnoughKeys:3005,AccountNotMutable:3006,AccountOwnedByWrongProgram:3007,InvalidProgramId:3008,InvalidProgramExecutable:3009,AccountNotSigner:3010,AccountNotSystemOwned:3011,AccountNotInitialized:3012,AccountNotProgramData:3013,AccountNotAssociatedTokenAccount:3014,AccountSysvarMismatch:3015,AccountReallocExceedsLimit:3016,AccountDuplicateReallocs:3017,StateInvalidAddress:4e3,DeclaredProgramIdMismatch:4100,Deprecated:5e3};exports.LangErrorCode=LangErrorCode;const LangErrorMessage=new Map([[LangErrorCode.InstructionMissing,"8 byte instruction identifier not provided"],[LangErrorCode.InstructionFallbackNotFound,"Fallback functions are not supported"],[LangErrorCode.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[LangErrorCode.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[LangErrorCode.IdlInstructionStub,"The program was compiled without idl instructions"],[LangErrorCode.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[LangErrorCode.ConstraintMut,"A mut constraint was violated"],[LangErrorCode.ConstraintHasOne,"A has one constraint was violated"],[LangErrorCode.ConstraintSigner,"A signer constraint was violated"],[LangErrorCode.ConstraintRaw,"A raw constraint was violated"],[LangErrorCode.ConstraintOwner,"An owner constraint was violated"],[LangErrorCode.ConstraintRentExempt,"A rent exemption constraint was violated"],[LangErrorCode.ConstraintSeeds,"A seeds constraint was violated"],[LangErrorCode.ConstraintExecutable,"An executable constraint was violated"],[LangErrorCode.ConstraintState,"A state constraint was violated"],[LangErrorCode.ConstraintAssociated,"An associated constraint was violated"],[LangErrorCode.ConstraintAssociatedInit,"An associated init constraint was violated"],[LangErrorCode.ConstraintClose,"A close constraint was violated"],[LangErrorCode.ConstraintAddress,"An address constraint was violated"],[LangErrorCode.ConstraintZero,"Expected zero account discriminant"],[LangErrorCode.ConstraintTokenMint,"A token mint constraint was violated"],[LangErrorCode.ConstraintTokenOwner,"A token owner constraint was violated"],[LangErrorCode.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[LangErrorCode.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[LangErrorCode.ConstraintMintDecimals,"A mint decimals constraint was violated"],[LangErrorCode.ConstraintSpace,"A space constraint was violated"],[LangErrorCode.ConstraintAccountIsNone,"A required account for the constraint is None"],[LangErrorCode.RequireViolated,"A require expression was violated"],[LangErrorCode.RequireEqViolated,"A require_eq expression was violated"],[LangErrorCode.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[LangErrorCode.RequireNeqViolated,"A require_neq expression was violated"],[LangErrorCode.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[LangErrorCode.RequireGtViolated,"A require_gt expression was violated"],[LangErrorCode.RequireGteViolated,"A require_gte expression was violated"],[LangErrorCode.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[LangErrorCode.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[LangErrorCode.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[LangErrorCode.AccountDidNotDeserialize,"Failed to deserialize the account"],[LangErrorCode.AccountDidNotSerialize,"Failed to serialize the account"],[LangErrorCode.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[LangErrorCode.AccountNotMutable,"The given account is not mutable"],[LangErrorCode.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[LangErrorCode.InvalidProgramId,"Program ID was not as expected"],[LangErrorCode.InvalidProgramExecutable,"Program account is not executable"],[LangErrorCode.AccountNotSigner,"The given account did not sign"],[LangErrorCode.AccountNotSystemOwned,"The given account is not owned by the system program"],[LangErrorCode.AccountNotInitialized,"The program expected this account to be already initialized"],[LangErrorCode.AccountNotProgramData,"The given account is not a program data account"],[LangErrorCode.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[LangErrorCode.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[LangErrorCode.AccountReallocExceedsLimit,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[LangErrorCode.AccountDuplicateReallocs,"The account was duplicated for more than one reallocation"],[LangErrorCode.StateInvalidAddress,"The given state account does not have the correct address"],[LangErrorCode.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[LangErrorCode.Deprecated,"The API being used is deprecated and should no longer be used"]]);exports.LangErrorMessage=LangErrorMessage;var __assign$1=function(){__assign$1=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign$1.apply(this,arguments)};var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};function lowerCase(str){return str.toLowerCase()}var DEFAULT_SPLIT_REGEXP=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g];var DEFAULT_STRIP_REGEXP=/[^A-Z0-9]+/gi;function noCase(input,options){if(options===void 0){options={}}var _a=options.splitRegexp,splitRegexp=_a===void 0?DEFAULT_SPLIT_REGEXP:_a,_b=options.stripRegexp,stripRegexp=_b===void 0?DEFAULT_STRIP_REGEXP:_b,_c=options.transform,transform=_c===void 0?lowerCase:_c,_d=options.delimiter,delimiter=_d===void 0?" ":_d;var result=replace(replace(input,splitRegexp,"$1\0$2"),stripRegexp,"\0");var start=0;var end=result.length;while(result.charAt(start)==="\0")start++;while(result.charAt(end-1)==="\0")end--;return result.slice(start,end).split("\0").map(transform).join(delimiter)}function replace(input,re,value){if(re instanceof RegExp)return input.replace(re,value);return re.reduce(function(input,re){return input.replace(re,value)},input)}function dotCase(input,options){if(options===void 0){options={}}return noCase(input,__assign({delimiter:"."},options))}function snakeCase(input,options){if(options===void 0){options={}}return dotCase(input,__assign$1({delimiter:"_"},options))}class IdlCoder{static fieldLayout(field,types){const fieldName=field.name!==undefined?(0,_camelcase.default)(field.name):undefined;switch(field.type){case"bool":{return borsh.bool(fieldName)}case"u8":{return borsh.u8(fieldName)}case"i8":{return borsh.i8(fieldName)}case"u16":{return borsh.u16(fieldName)}case"i16":{return borsh.i16(fieldName)}case"u32":{return borsh.u32(fieldName)}case"i32":{return borsh.i32(fieldName)}case"f32":{return borsh.f32(fieldName)}case"u64":{return borsh.u64(fieldName)}case"i64":{return borsh.i64(fieldName)}case"f64":{return borsh.f64(fieldName)}case"u128":{return borsh.u128(fieldName)}case"i128":{return borsh.i128(fieldName)}case"u256":{return borsh.u256(fieldName)}case"i256":{return borsh.i256(fieldName)}case"bytes":{return borsh.vecU8(fieldName)}case"string":{return borsh.str(fieldName)}case"publicKey":{return borsh.publicKey(fieldName)}default:{if("vec"in field.type){return borsh.vec(IdlCoder.fieldLayout({name:undefined,type:field.type.vec},types),fieldName)}else if("option"in field.type){return borsh.option(IdlCoder.fieldLayout({name:undefined,type:field.type.option},types),fieldName)}else if("defined"in field.type){const defined=field.type.defined;if(types===undefined){throw new IdlError("User defined types not provided")}const filtered=types.filter(t=>t.name===defined);if(filtered.length!==1){throw new IdlError(`Type not found: ${JSON.stringify(field)}`)}return IdlCoder.typeDefLayout(filtered[0],types,fieldName)}else if("array"in field.type){let arrayTy=field.type.array[0];let arrayLen=field.type.array[1];let innerLayout=IdlCoder.fieldLayout({name:undefined,type:arrayTy},types);return borsh.array(innerLayout,arrayLen,fieldName)}else{throw new Error(`Not yet implemented: ${field}`)}}}}static typeDefLayout(typeDef,types=[],name){if(typeDef.type.kind==="struct"){const fieldLayouts=typeDef.type.fields.map(field=>{const x=IdlCoder.fieldLayout(field,types);return x});return borsh.struct(fieldLayouts,name)}else if(typeDef.type.kind==="enum"){let variants=typeDef.type.variants.map(variant=>{const name=(0,_camelcase.default)(variant.name);if(variant.fields===undefined){return borsh.struct([],name)}const fieldLayouts=variant.fields.map((f,i)=>{if(!f.hasOwnProperty("name")){return IdlCoder.fieldLayout({type:f,name:i.toString()},types)}return IdlCoder.fieldLayout(f,types)});return borsh.struct(fieldLayouts,name)});if(name!==undefined){return borsh.rustEnum(variants).replicate(name)}return borsh.rustEnum(variants,name)}else{throw new Error(`Unknown type kint: ${typeDef}`)}}}const SIGHASH_STATE_NAMESPACE="state";const SIGHASH_GLOBAL_NAMESPACE="global";class BorshInstructionCoder{constructor(idl){this.idl=idl;this.ixLayout=BorshInstructionCoder.parseIxLayout(idl);const sighashLayouts=new Map;idl.instructions.forEach(ix=>{const sh=sighash(SIGHASH_GLOBAL_NAMESPACE,ix.name);sighashLayouts.set(_bs.default.encode(sh),{layout:this.ixLayout.get(ix.name),name:ix.name})});if(idl.state){idl.state.methods.map(ix=>{const sh=sighash(SIGHASH_STATE_NAMESPACE,ix.name);sighashLayouts.set(_bs.default.encode(sh),{layout:this.ixLayout.get(ix.name),name:ix.name})})}this.sighashLayouts=sighashLayouts}encode(ixName,ix){return this._encode(SIGHASH_GLOBAL_NAMESPACE,ixName,ix)}encodeState(ixName,ix){return this._encode(SIGHASH_STATE_NAMESPACE,ixName,ix)}_encode(nameSpace,ixName,ix){const buffer=_buffer.Buffer.alloc(1e3);const methodName=(0,_camelcase.default)(ixName);const layout=this.ixLayout.get(methodName);if(!layout){throw new Error(`Unknown method: ${methodName}`)}const len=layout.encode(ix,buffer);const data=buffer.slice(0,len);return _buffer.Buffer.concat([sighash(nameSpace,ixName),data])}static parseIxLayout(idl){const stateMethods=idl.state?idl.state.methods:[];const ixLayouts=stateMethods.map(m=>{let fieldLayouts=m.args.map(arg=>{var _a,_b;return IdlCoder.fieldLayout(arg,Array.from([...(_a=idl.accounts)!==null&&_a!==void 0?_a:[],...(_b=idl.types)!==null&&_b!==void 0?_b:[]]))});const name=(0,_camelcase.default)(m.name);return[name,borsh.struct(fieldLayouts,name)]}).concat(idl.instructions.map(ix=>{let fieldLayouts=ix.args.map(arg=>{var _a,_b;return IdlCoder.fieldLayout(arg,Array.from([...(_a=idl.accounts)!==null&&_a!==void 0?_a:[],...(_b=idl.types)!==null&&_b!==void 0?_b:[]]))});const name=(0,_camelcase.default)(ix.name);return[name,borsh.struct(fieldLayouts,name)]}));return new Map(ixLayouts)}decode(ix,encoding="hex"){if(typeof ix==="string"){ix=encoding==="hex"?_buffer.Buffer.from(ix,"hex"):_bs.default.decode(ix)}let sighash=_bs.default.encode(ix.slice(0,8));let data=ix.slice(8);const decoder=this.sighashLayouts.get(sighash);if(!decoder){return null}return{data:decoder.layout.decode(data),name:decoder.name}}format(ix,accountMetas){return InstructionFormatter.format(ix,accountMetas,this.idl)}}exports.BorshInstructionCoder=BorshInstructionCoder;class InstructionFormatter{static format(ix,accountMetas,idl){const idlIx=idl.instructions.filter(i=>ix.name===i.name)[0];if(idlIx===undefined){console.error("Invalid instruction given");return null}const args=idlIx.args.map(idlField=>{return{name:idlField.name,type:InstructionFormatter.formatIdlType(idlField.type),data:InstructionFormatter.formatIdlData(idlField,ix.data[idlField.name],idl.types)}});const flatIdlAccounts=InstructionFormatter.flattenIdlAccounts(idlIx.accounts);const accounts=accountMetas.map((meta,idx)=>{if(idx<flatIdlAccounts.length){return{name:flatIdlAccounts[idx].name,...meta}}else{return{name:undefined,...meta}}});return{args:args,accounts:accounts}}static formatIdlType(idlType){if(typeof idlType==="string"){return idlType}if("vec"in idlType){return`Vec<${this.formatIdlType(idlType.vec)}>`}if("option"in idlType){return`Option<${this.formatIdlType(idlType.option)}>`}if("defined"in idlType){return idlType.defined}if("array"in idlType){return`Array<${idlType.array[0]}; ${idlType.array[1]}>`}throw new Error(`Unknown IDL type: ${idlType}`)}static formatIdlData(idlField,data,types){if(typeof idlField.type==="string"){return data.toString()}if(idlField.type.hasOwnProperty("vec")){return"["+data.map(d=>this.formatIdlData({name:"",type:idlField.type.vec},d)).join(", ")+"]"}if(idlField.type.hasOwnProperty("option")){return data===null?"null":this.formatIdlData({name:"",type:idlField.type.option},data,types)}if(idlField.type.hasOwnProperty("defined")){if(types===undefined){throw new Error("User defined types not provided")}const filtered=types.filter(t=>t.name===idlField.type.defined);if(filtered.length!==1){throw new Error(`Type not found: ${idlField.type.defined}`)}return InstructionFormatter.formatIdlDataDefined(filtered[0],data,types)}return"unknown"}static formatIdlDataDefined(typeDef,data,types){if(typeDef.type.kind==="struct"){const struct=typeDef.type;const fields=Object.keys(data).map(k=>{const f=struct.fields.filter(f=>f.name===k)[0];if(f===undefined){throw new Error("Unable to find type")}return k+": "+InstructionFormatter.formatIdlData(f,data[k],types)}).join(", ");return"{ "+fields+" }"}else{if(typeDef.type.variants.length===0){return"{}"}if(typeDef.type.variants[0].name){const variants=typeDef.type.variants;const variant=Object.keys(data)[0];const enumType=data[variant];const namedFields=Object.keys(enumType).map(f=>{var _a;const fieldData=enumType[f];const idlField=(_a=variants[variant])===null||_a===void 0?void 0:_a.filter(v=>v.name===f)[0];if(idlField===undefined){throw new Error("Unable to find variant")}return f+": "+InstructionFormatter.formatIdlData(idlField,fieldData,types)}).join(", ");const variantName=(0,_camelcase.default)(variant,{pascalCase:true});if(namedFields.length===0){return variantName}return`${variantName} { ${namedFields} }`}else{return"Tuple formatting not yet implemented"}}}static flattenIdlAccounts(accounts,prefix){return accounts.map(account=>{const accName=sentenceCase(account.name);if(account.hasOwnProperty("accounts")){const newPrefix=prefix?`${prefix} > ${accName}`:accName;return InstructionFormatter.flattenIdlAccounts(account.accounts,newPrefix)}else{return{...account,name:prefix?`${prefix} > ${accName}`:accName}}}).flat()}}function sentenceCase(field){const result=field.replace(/([A-Z])/g," $1");return result.charAt(0).toUpperCase()+result.slice(1)}function sighash(nameSpace,ixName){let name=snakeCase(ixName);let preimage=`${nameSpace}:${name}`;return _buffer.Buffer.from(_jsSha.sha256.digest(preimage)).slice(0,8)}function accountSize(idl,idlAccount){if(idlAccount.type.kind==="enum"){let variantSizes=idlAccount.type.variants.map(variant=>{if(variant.fields===undefined){return 0}return variant.fields.map(f=>{if(!(typeof f==="object"&&"name"in f)){throw new Error("Tuple enum variants not yet implemented.")}return typeSize(idl,f.type)}).reduce((a,b)=>a+b)});return Math.max(...variantSizes)+1}if(idlAccount.type.fields===undefined){return 0}return idlAccount.type.fields.map(f=>typeSize(idl,f.type)).reduce((a,b)=>a+b,0)}function typeSize(idl,ty){var _a,_b;switch(ty){case"bool":return 1;case"u8":return 1;case"i8":return 1;case"i16":return 2;case"u16":return 2;case"u32":return 4;case"i32":return 4;case"f32":return 4;case"u64":return 8;case"i64":return 8;case"f64":return 8;case"u128":return 16;case"i128":return 16;case"u256":return 32;case"i256":return 32;case"bytes":return 1;case"string":return 1;case"publicKey":return 32;default:if("vec"in ty){return 1}if("option"in ty){return 1+typeSize(idl,ty.option)}if("coption"in ty){return 4+typeSize(idl,ty.coption)}if("defined"in ty){const filtered=(_b=(_a=idl.types)===null||_a===void 0?void 0:_a.filter(t=>t.name===ty.defined))!==null&&_b!==void 0?_b:[];if(filtered.length!==1){throw new IdlError(`Type not found: ${JSON.stringify(ty)}`)}let typeDef=filtered[0];return accountSize(idl,typeDef)}if("array"in ty){let arrayTy=ty.array[0];let arraySize=ty.array[1];return typeSize(idl,arrayTy)*arraySize}throw new Error(`Invalid type ${JSON.stringify(ty)}`)}}const ACCOUNT_DISCRIMINATOR_SIZE=8;exports.ACCOUNT_DISCRIMINATOR_SIZE=ACCOUNT_DISCRIMINATOR_SIZE;class BorshAccountsCoder{constructor(idl){if(idl.accounts===undefined){this.accountLayouts=new Map;return}const layouts=idl.accounts.map(acc=>{return[acc.name,IdlCoder.typeDefLayout(acc,idl.types)]});this.accountLayouts=new Map(layouts);this.idl=idl}async encode(accountName,account){const buffer=_buffer.Buffer.alloc(1e3);const layout=this.accountLayouts.get(accountName);if(!layout){throw new Error(`Unknown account: ${accountName}`)}const len=layout.encode(account,buffer);let accountData=buffer.slice(0,len);let discriminator=BorshAccountsCoder.accountDiscriminator(accountName);return _buffer.Buffer.concat([discriminator,accountData])}decode(accountName,data){const discriminator=BorshAccountsCoder.accountDiscriminator(accountName);if(discriminator.compare(data.slice(0,8))){throw new Error("Invalid account discriminator")}return this.decodeUnchecked(accountName,data)}decodeAny(data){const accountDescriminator=data.slice(0,8);const accountName=Array.from(this.accountLayouts.keys()).find(key=>BorshAccountsCoder.accountDiscriminator(key).equals(accountDescriminator));if(!accountName){throw new Error("Account descriminator not found")}return this.decodeUnchecked(accountName,data)}decodeUnchecked(accountName,ix){const data=ix.slice(ACCOUNT_DISCRIMINATOR_SIZE);const layout=this.accountLayouts.get(accountName);if(!layout){throw new Error(`Unknown account: ${accountName}`)}return layout.decode(data)}memcmp(accountName,appendData){const discriminator=BorshAccountsCoder.accountDiscriminator(accountName);return{offset:0,bytes:_bs.default.encode(appendData?_buffer.Buffer.concat([discriminator,appendData]):discriminator)}}size(idlAccount){var _a;return ACCOUNT_DISCRIMINATOR_SIZE+((_a=accountSize(this.idl,idlAccount))!==null&&_a!==void 0?_a:0)}static accountDiscriminator(name){return _buffer.Buffer.from(_jsSha.sha256.digest(`account:${(0,_camelcase.default)(name,{pascalCase:true,preserveConsecutiveUppercase:true})}`)).slice(0,ACCOUNT_DISCRIMINATOR_SIZE)}}exports.BorshAccountsCoder=BorshAccountsCoder;class BorshEventCoder{constructor(idl){if(idl.events===undefined){this.layouts=new Map;return}const layouts=idl.events.map(event=>{let eventTypeDef={name:event.name,type:{kind:"struct",fields:event.fields.map(f=>{return{name:f.name,type:f.type}})}};return[event.name,IdlCoder.typeDefLayout(eventTypeDef,idl.types)]});this.layouts=new Map(layouts);this.discriminators=new Map(idl.events===undefined?[]:idl.events.map(e=>[base64$1.fromByteArray(eventDiscriminator(e.name)),e.name]))}decode(log){let logArr;try{logArr=_buffer.Buffer.from(base64$1.toByteArray(log))}catch(e){return null}const disc=base64$1.fromByteArray(logArr.slice(0,8));const eventName=this.discriminators.get(disc);if(eventName===undefined){return null}const layout=this.layouts.get(eventName);if(!layout){throw new Error(`Unknown event: ${eventName}`)}const data=layout.decode(logArr.slice(8));return{data:data,name:eventName}}}exports.BorshEventCoder=BorshEventCoder;function eventDiscriminator(name){return _buffer.Buffer.from(_jsSha.sha256.digest(`event:${name}`)).slice(0,8)}class BorshStateCoder{constructor(idl){if(idl.state===undefined){throw new Error("Idl state not defined.")}this.layout=IdlCoder.typeDefLayout(idl.state.struct,idl.types)}async encode(name,account){const buffer=_buffer.Buffer.alloc(1e3);const len=this.layout.encode(account,buffer);const disc=await stateDiscriminator(name);const accData=buffer.slice(0,len);return _buffer.Buffer.concat([disc,accData])}decode(ix){const data=ix.slice(8);return this.layout.decode(data)}}exports.BorshStateCoder=BorshStateCoder;async function stateDiscriminator(name){let ns=isSet("anchor-deprecated-state")?"account":"state";return _buffer.Buffer.from(_jsSha.sha256.digest(`${ns}:${name}`)).slice(0,8)}class BorshTypesCoder{constructor(idl){if(idl.types===undefined){this.typeLayouts=new Map;return}const layouts=idl.types.map(acc=>{return[acc.name,IdlCoder.typeDefLayout(acc,idl.types)]});this.typeLayouts=new Map(layouts);this.idl=idl}encode(typeName,type){const buffer=_buffer.Buffer.alloc(1e3);const layout=this.typeLayouts.get(typeName);if(!layout){throw new Error(`Unknown type: ${typeName}`)}const len=layout.encode(type,buffer);return buffer.slice(0,len)}decode(typeName,typeData){const layout=this.typeLayouts.get(typeName);if(!layout){throw new Error(`Unknown type: ${typeName}`)}return layout.decode(typeData)}}class BorshCoder{constructor(idl){this.instruction=new BorshInstructionCoder(idl);this.accounts=new BorshAccountsCoder(idl);this.events=new BorshEventCoder(idl);if(idl.state){this.state=new BorshStateCoder(idl)}this.types=new BorshTypesCoder(idl)}}exports.BorshCoder=BorshCoder;var commonjsGlobal=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function getDefaultExportFromCjs(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x["default"]:x}class Layout{constructor(span,property){if(!Number.isInteger(span)){throw new TypeError("span must be an integer")}this.span=span;this.property=property}makeDestinationObject(){return{}}decode(b,offset){throw new Error("Layout is abstract")}encode(src,b,offset){throw new Error("Layout is abstract")}getSpan(b,offset){if(0>this.span){throw new RangeError("indeterminate span")}return this.span}replicate(property){const rv=Object.create(this.constructor.prototype);Object.assign(rv,this);rv.property=property;return rv}fromArray(values){return undefined}}var Layout_2=Layout;function nameWithProperty(name,lo){if(lo.property){return name+"["+lo.property+"]"}return name}class ExternalLayout extends Layout{isCount(){throw new Error("ExternalLayout is abstract")}}class OffsetLayout extends ExternalLayout{constructor(layout,offset,property){if(!(layout instanceof Layout)){throw new TypeError("layout must be a Layout")}if(undefined===offset){offset=0}else if(!Number.isInteger(offset)){throw new TypeError("offset must be integer or undefined")}super(layout.span,property||layout.property);this.layout=layout;this.offset=offset}isCount(){return this.layout instanceof UInt||this.layout instanceof UIntBE}decode(b,offset){if(undefined===offset){offset=0}return this.layout.decode(b,offset+this.offset)}encode(src,b,offset){if(undefined===offset){offset=0}return this.layout.encode(src,b,offset+this.offset)}}class UInt extends Layout{constructor(span,property){super(span,property);if(6<this.span){throw new RangeError("span must not exceed 6 bytes")}}decode(b,offset){if(undefined===offset){offset=0}return b.readUIntLE(offset,this.span)}encode(src,b,offset){if(undefined===offset){offset=0}b.writeUIntLE(src,offset,this.span);return this.span}}class UIntBE extends Layout{constructor(span,property){super(span,property);if(6<this.span){throw new RangeError("span must not exceed 6 bytes")}}decode(b,offset){if(undefined===offset){offset=0}return b.readUIntBE(offset,this.span)}encode(src,b,offset){if(undefined===offset){offset=0}b.writeUIntBE(src,offset,this.span);return this.span}}const V2E32=Math.pow(2,32);function divmodInt64(src){const hi32=Math.floor(src/V2E32);const lo32=src-hi32*V2E32;return{hi32:hi32,lo32:lo32}}function roundedInt64(hi32,lo32){return hi32*V2E32+lo32}class NearUInt64 extends Layout{constructor(property){super(8,property)}decode(b,offset){if(undefined===offset){offset=0}const lo32=b.readUInt32LE(offset);const hi32=b.readUInt32LE(offset+4);return roundedInt64(hi32,lo32)}encode(src,b,offset){if(undefined===offset){offset=0}const split=divmodInt64(src);b.writeUInt32LE(split.lo32,offset);b.writeUInt32LE(split.hi32,offset+4);return 8}}class NearInt64 extends Layout{constructor(property){super(8,property)}decode(b,offset){if(undefined===offset){offset=0}const lo32=b.readUInt32LE(offset);const hi32=b.readInt32LE(offset+4);return roundedInt64(hi32,lo32)}encode(src,b,offset){if(undefined===offset){offset=0}const split=divmodInt64(src);b.writeUInt32LE(split.lo32,offset);b.writeInt32LE(split.hi32,offset+4);return 8}}class Structure extends Layout{constructor(fields,property,decodePrefixes){if(!(Array.isArray(fields)&&fields.reduce((acc,v)=>acc&&v instanceof Layout,true))){throw new TypeError("fields must be array of Layout instances")}if("boolean"===typeof property&&undefined===decodePrefixes){decodePrefixes=property;property=undefined}for(const fd of fields){if(0>fd.span&&undefined===fd.property){throw new Error("fields cannot contain unnamed variable-length layout")}}let span=-1;try{span=fields.reduce((span,fd)=>span+fd.getSpan(),0)}catch(e){}super(span,property);this.fields=fields;this.decodePrefixes=!!decodePrefixes}getSpan(b,offset){if(0<=this.span){return this.span}if(undefined===offset){offset=0}let span=0;try{span=this.fields.reduce((span,fd)=>{const fsp=fd.getSpan(b,offset);offset+=fsp;return span+fsp},0)}catch(e){throw new RangeError("indeterminate span")}return span}decode(b,offset){if(undefined===offset){offset=0}const dest=this.makeDestinationObject();for(const fd of this.fields){if(undefined!==fd.property){dest[fd.property]=fd.decode(b,offset)}offset+=fd.getSpan(b,offset);if(this.decodePrefixes&&b.length===offset){break}}return dest}encode(src,b,offset){if(undefined===offset){offset=0}const firstOffset=offset;let lastOffset=0;let lastWrote=0;for(const fd of this.fields){let span=fd.span;lastWrote=0<span?span:0;if(undefined!==fd.property){const fv=src[fd.property];if(undefined!==fv){lastWrote=fd.encode(fv,b,offset);if(0>span){span=fd.getSpan(b,offset)}}}lastOffset=offset;offset+=span}return lastOffset+lastWrote-firstOffset}fromArray(values){const dest=this.makeDestinationObject();for(const fd of this.fields){if(undefined!==fd.property&&0<values.length){dest[fd.property]=values.shift()}}return dest}layoutFor(property){if("string"!==typeof property){throw new TypeError("property must be string")}for(const fd of this.fields){if(fd.property===property){return fd}}}offsetOf(property){if("string"!==typeof property){throw new TypeError("property must be string")}let offset=0;for(const fd of this.fields){if(fd.property===property){return offset}if(0>fd.span){offset=-1}else if(0<=offset){offset+=fd.span}}}}class UnionDiscriminator{constructor(property){this.property=property}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class UnionLayoutDiscriminator extends UnionDiscriminator{constructor(layout,property){if(!(layout instanceof ExternalLayout&&layout.isCount())){throw new TypeError("layout must be an unsigned integer ExternalLayout")}super(property||layout.property||"variant");this.layout=layout}decode(b,offset){return this.layout.decode(b,offset)}encode(src,b,offset){return this.layout.encode(src,b,offset)}}class Union extends Layout{constructor(discr,defaultLayout,property){const upv=discr instanceof UInt||discr instanceof UIntBE;if(upv){discr=new UnionLayoutDiscriminator(new OffsetLayout(discr))}else if(discr instanceof ExternalLayout&&discr.isCount()){discr=new UnionLayoutDiscriminator(discr)}else if(!(discr instanceof UnionDiscriminator)){throw new TypeError("discr must be a UnionDiscriminator "+"or an unsigned integer layout")}if(undefined===defaultLayout){defaultLayout=null}if(!(null===defaultLayout||defaultLayout instanceof Layout)){throw new TypeError("defaultLayout must be null or a Layout")}if(null!==defaultLayout){if(0>defaultLayout.span){throw new Error("defaultLayout must have constant span")}if(undefined===defaultLayout.property){defaultLayout=defaultLayout.replicate("content")}}let span=-1;if(defaultLayout){span=defaultLayout.span;if(0<=span&&upv){span+=discr.layout.span}}super(span,property);this.discriminator=discr;this.usesPrefixDiscriminator=upv;this.defaultLayout=defaultLayout;this.registry={};let boundGetSourceVariant=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(src){return boundGetSourceVariant(src)};this.configGetSourceVariant=function(gsv){boundGetSourceVariant=gsv.bind(this)}}getSpan(b,offset){if(0<=this.span){return this.span}if(undefined===offset){offset=0}const vlo=this.getVariant(b,offset);if(!vlo){throw new Error("unable to determine span for unrecognized variant")}return vlo.getSpan(b,offset)}defaultGetSourceVariant(src){if(src.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&src.hasOwnProperty(this.defaultLayout.property)){return undefined}const vlo=this.registry[src[this.discriminator.property]];if(vlo&&(!vlo.layout||src.hasOwnProperty(vlo.property))){return vlo}}else{for(const tag in this.registry){const vlo=this.registry[tag];if(src.hasOwnProperty(vlo.property)){return vlo}}}throw new Error("unable to infer src variant")}decode(b,offset){if(undefined===offset){offset=0}let dest;const dlo=this.discriminator;const discr=dlo.decode(b,offset);let clo=this.registry[discr];if(undefined===clo){let contentOffset=0;clo=this.defaultLayout;if(this.usesPrefixDiscriminator){contentOffset=dlo.layout.span}dest=this.makeDestinationObject();dest[dlo.property]=discr;dest[clo.property]=this.defaultLayout.decode(b,offset+contentOffset)}else{dest=clo.decode(b,offset)}return dest}encode(src,b,offset){if(undefined===offset){offset=0}const vlo=this.getSourceVariant(src);if(undefined===vlo){const dlo=this.discriminator;const clo=this.defaultLayout;let contentOffset=0;if(this.usesPrefixDiscriminator){contentOffset=dlo.layout.span}dlo.encode(src[dlo.property],b,offset);return contentOffset+clo.encode(src[clo.property],b,offset+contentOffset)}return vlo.encode(src,b,offset)}addVariant(variant,layout,property){const rv=new VariantLayout(this,variant,layout,property);this.registry[variant]=rv;return rv}getVariant(vb,offset){let variant=vb;if(Buffer.isBuffer(vb)){if(undefined===offset){offset=0}variant=this.discriminator.decode(vb,offset)}return this.registry[variant]}}class VariantLayout extends Layout{constructor(union,variant,layout,property){if(!(union instanceof Union)){throw new TypeError("union must be a Union")}if(!Number.isInteger(variant)||0>variant){throw new TypeError("variant must be a (non-negative) integer")}if("string"===typeof layout&&undefined===property){property=layout;layout=null}if(layout){if(!(layout instanceof Layout)){throw new TypeError("layout must be a Layout")}if(null!==union.defaultLayout&&0<=layout.span&&layout.span>union.defaultLayout.span){throw new Error("variant span exceeds span of containing union")}if("string"!==typeof property){throw new TypeError("variant must have a String property")}}let span=union.span;if(0>union.span){span=layout?layout.span:0;if(0<=span&&union.usesPrefixDiscriminator){span+=union.discriminator.layout.span}}super(span,property);this.union=union;this.variant=variant;this.layout=layout||null}getSpan(b,offset){if(0<=this.span){return this.span}if(undefined===offset){offset=0}let contentOffset=0;if(this.union.usesPrefixDiscriminator){contentOffset=this.union.discriminator.layout.span}return contentOffset+this.layout.getSpan(b,offset+contentOffset)}decode(b,offset){const dest=this.makeDestinationObject();if(undefined===offset){offset=0}if(this!==this.union.getVariant(b,offset)){throw new Error("variant mismatch")}let contentOffset=0;if(this.union.usesPrefixDiscriminator){contentOffset=this.union.discriminator.layout.span}if(this.layout){dest[this.property]=this.layout.decode(b,offset+contentOffset)}else if(this.property){dest[this.property]=true}else if(this.union.usesPrefixDiscriminator){dest[this.union.discriminator.property]=this.variant}return dest}encode(src,b,offset){if(undefined===offset){offset=0}let contentOffset=0;if(this.union.usesPrefixDiscriminator){contentOffset=this.union.discriminator.layout.span}if(this.layout&&!src.hasOwnProperty(this.property)){throw new TypeError("variant lacks property "+this.property)}this.union.discriminator.encode(this.variant,b,offset);let span=contentOffset;if(this.layout){this.layout.encode(src[this.property],b,offset+contentOffset);span+=this.layout.getSpan(b,offset+contentOffset);if(0<=this.union.span&&span>this.union.span){throw new Error("encoded variant overruns containing union")}}return span}fromArray(values){if(this.layout){return this.layout.fromArray(values)}}}class Blob$1 extends Layout{constructor(length,property){if(!(length instanceof ExternalLayout&&length.isCount()||Number.isInteger(length)&&0<=length)){throw new TypeError("length must be positive integer "+"or an unsigned integer ExternalLayout")}let span=-1;if(!(length instanceof ExternalLayout)){span=length}super(span,property);this.length=length}getSpan(b,offset){let span=this.span;if(0>span){span=this.length.decode(b,offset)}return span}decode(b,offset){if(undefined===offset){offset=0}let span=this.span;if(0>span){span=this.length.decode(b,offset)}return b.slice(offset,offset+span)}encode(src,b,offset){let span=this.length;if(this.length instanceof ExternalLayout){span=src.length}if(!(Buffer.isBuffer(src)&&span===src.length)){throw new TypeError(nameWithProperty("Blob.encode",this)+" requires (length "+span+") Buffer as src")}if(offset+span>b.length){throw new RangeError("encoding overruns Buffer")}b.write(src.toString("hex"),offset,span,"hex");if(this.length instanceof ExternalLayout){this.length.encode(span,b,offset)}return span}}var offset=(layout,offset,property)=>new OffsetLayout(layout,offset,property);var u8=property=>new UInt(1,property);var u32=property=>new UInt(4,property);var nu64=property=>new NearUInt64(property);var ns64=property=>new NearInt64(property);var struct=(fields,property,decodePrefixes)=>new Structure(fields,property,decodePrefixes);var union=(discr,defaultLayout,property)=>new Union(discr,defaultLayout,property);var blob=(length,property)=>new Blob$1(length,property);class SystemInstructionCoder{constructor(_){}encode(ixName,ix){switch((0,_camelcase.default)(ixName)){case"createAccount":{return encodeCreateAccount(ix)}case"assign":{return encodeAssign(ix)}case"transfer":{return encodeTransfer(ix)}case"createAccountWithSeed":{return encodeCreateAccountWithSeed(ix)}case"advanceNonceAccount":{return encodeAdvanceNonceAccount(ix)}case"withdrawNonceAccount":{return encodeWithdrawNonceAccount(ix)}case"initializeNonceAccount":{return encodeInitializeNonceAccount(ix)}case"authorizeNonceAccount":{return encodeAuthorizeNonceAccount(ix)}case"allocate":{return encodeAllocate(ix)}case"allocateWithSeed":{return encodeAllocateWithSeed(ix)}case"assignWithSeed":{return encodeAssignWithSeed(ix)}case"transferWithSeed":{return encodeTransferWithSeed(ix)}default:{throw new Error(`Invalid instruction: ${ixName}`)}}}encodeState(_ixName,_ix){throw new Error("System does not have state")}}class RustStringLayout extends Layout_2{constructor(property){super(-1,property);this.property=property;this.layout=struct([u32("length"),u32("lengthPadding"),blob(offset(u32(),-8),"chars")],this.property)}encode(src,b,offset=0){if(src===null||src===undefined){return this.layout.span}const data={chars:Buffer.from(src,"utf8")};return this.layout.encode(data,b,offset)}decode(b,offset=0){const data=this.layout.decode(b,offset);return data["chars"].toString()}getSpan(b,offset=0){return u32().span+u32().span+new _bn.default(new Uint8Array(b).slice(offset,offset+4),10,"le").toNumber()}}function rustStringLayout(property){return new RustStringLayout(property)}function publicKey$2(property){return blob(32,property)}function encodeCreateAccount({lamports,space,owner}){return encodeData({createAccount:{lamports:lamports,space:space,owner:owner.toBuffer()}})}function encodeAssign({owner}){return encodeData({assign:{owner:owner.toBuffer()}})}function encodeTransfer({lamports}){return encodeData({transfer:{lamports:lamports}})}function encodeCreateAccountWithSeed({base,seed,lamports,space,owner}){return encodeData({createAccountWithSeed:{base:base.toBuffer(),seed:seed,lamports:lamports,space:space,owner:owner.toBuffer()}},LAYOUT.getVariant(3).span+seed.length)}function encodeInitializeNonceAccount({authorized}){return encodeData({initializeNonceAccount:{authorized:authorized.toBuffer()}})}function encodeAdvanceNonceAccount({authorized}){return encodeData({advanceNonceAccount:{authorized:authorized.toBuffer()}})}function encodeWithdrawNonceAccount({lamports}){return encodeData({withdrawNonceAccount:{lamports:lamports}})}function encodeAuthorizeNonceAccount({authorized}){return encodeData({authorizeNonceAccount:{authorized:authorized.toBuffer()}})}function encodeAllocate({space}){return encodeData({allocate:{space:space}})}function encodeAllocateWithSeed({base,seed,space,owner}){return encodeData({allocateWithSeed:{base:base.toBuffer(),seed:seed,space:space,owner:owner.toBuffer()}},LAYOUT.getVariant(9).span+seed.length)}function encodeAssignWithSeed({base,seed,owner}){return encodeData({assignWithSeed:{base:base.toBuffer(),seed:seed,owner:owner.toBuffer()}},LAYOUT.getVariant(10).span+seed.length)}function encodeTransferWithSeed({lamports,seed,owner}){return encodeData({transferWithSeed:{lamports:lamports,seed:seed,owner:owner.toBuffer()}},LAYOUT.getVariant(11).span+seed.length)}const LAYOUT=union(u32("instruction"));LAYOUT.addVariant(0,struct([ns64("lamports"),ns64("space"),publicKey$2("owner")]),"createAccount");LAYOUT.addVariant(1,struct([publicKey$2("owner")]),"assign");LAYOUT.addVariant(2,struct([ns64("lamports")]),"transfer");LAYOUT.addVariant(3,struct([publicKey$2("base"),rustStringLayout("seed"),ns64("lamports"),ns64("space"),publicKey$2("owner")]),"createAccountWithSeed");LAYOUT.addVariant(4,struct([publicKey$2("authorized")]),"advanceNonceAccount");LAYOUT.addVariant(5,struct([ns64("lamports")]),"withdrawNonceAccount");LAYOUT.addVariant(6,struct([publicKey$2("authorized")]),"initializeNonceAccount");LAYOUT.addVariant(7,struct([publicKey$2("authorized")]),"authorizeNonceAccount");LAYOUT.addVariant(8,struct([ns64("space")]),"allocate");LAYOUT.addVariant(9,struct([publicKey$2("base"),rustStringLayout("seed"),ns64("space"),publicKey$2("owner")]),"allocateWithSeed");LAYOUT.addVariant(10,struct([publicKey$2("base"),rustStringLayout("seed"),publicKey$2("owner")]),"assignWithSeed");LAYOUT.addVariant(11,struct([ns64("lamports"),rustStringLayout("seed"),publicKey$2("owner")]),"transferWithSeed");function encodeData(instruction,maxSpan){const b=Buffer.alloc(maxSpan!==null&&maxSpan!==void 0?maxSpan:instructionMaxSpan);const span=LAYOUT.encode(instruction,b);if(maxSpan===undefined){return b.slice(0,span)}return b}const instructionMaxSpan=Math.max(...Object.values(LAYOUT.registry).map(r=>r.span));class SystemStateCoder{constructor(_idl){}encode(_name,_account){throw new Error("System does not have state")}decode(_ix){throw new Error("System does not have state")}}class SystemAccountsCoder{constructor(idl){this.idl=idl}async encode(accountName,account){switch(accountName){case"nonce":{const buffer=Buffer.alloc(web3_js.NONCE_ACCOUNT_LENGTH);const len=NONCE_ACCOUNT_LAYOUT.encode(account,buffer);return buffer.slice(0,len)}default:{throw new Error(`Invalid account name: ${accountName}`)}}}decode(accountName,ix){return this.decodeUnchecked(accountName,ix)}decodeUnchecked(accountName,ix){switch(accountName){case"nonce":{return decodeNonceAccount(ix)}default:{throw new Error(`Invalid account name: ${accountName}`)}}}memcmp(accountName,_appendData){switch(accountName){case"nonce":{return{dataSize:web3_js.NONCE_ACCOUNT_LENGTH}}default:{throw new Error(`Invalid account name: ${accountName}`)}}}size(idlAccount){var _a;return(_a=accountSize(this.idl,idlAccount))!==null&&_a!==void 0?_a:0}}function decodeNonceAccount(ix){return NONCE_ACCOUNT_LAYOUT.decode(ix)}class WrappedLayout$1 extends Layout_2{constructor(layout,decoder,encoder,property){super(layout.span,property);this.layout=layout;this.decoder=decoder;this.encoder=encoder}decode(b,offset){return this.decoder(this.layout.decode(b,offset))}encode(src,b,offset){return this.layout.encode(this.encoder(src),b,offset)}getSpan(b,offset){return this.layout.getSpan(b,offset)}}function publicKey$1(property){return new WrappedLayout$1(blob(32),b=>new web3_js.PublicKey(b),key=>key.toBuffer(),property)}const NONCE_ACCOUNT_LAYOUT=struct([u32("version"),u32("state"),publicKey$1("authorizedPubkey"),publicKey$1("nonce"),struct([nu64("lamportsPerSignature")],"feeCalculator")]);class SystemEventsCoder{constructor(_idl){}decode(_log){throw new Error("System program does not have events")}}class SystemTypesCoder{constructor(_idl){}encode(_name,_type){throw new Error("System does not have user-defined types")}decode(_name,_typeData){throw new Error("System does not have user-defined types")}}class SystemCoder{constructor(idl){this.instruction=new SystemInstructionCoder(idl);this.accounts=new SystemAccountsCoder(idl);this.events=new SystemEventsCoder(idl);this.state=new SystemStateCoder(idl);this.types=new SystemTypesCoder(idl)}}exports.SystemCoder=SystemCoder;function hash(data){return(0,_jsSha.sha256)(data)}var sha256=Object.freeze({__proto__:null,hash:hash});function createWithSeedSync(fromPublicKey,seed,programId){const buffer=_buffer.Buffer.concat([fromPublicKey.toBuffer(),_buffer.Buffer.from(seed),programId.toBuffer()]);const hash=_jsSha.sha256.digest(buffer);return new web3_js.PublicKey(_buffer.Buffer.from(hash))}function createProgramAddressSync(seeds,programId){const MAX_SEED_LENGTH=32;let buffer=_buffer.Buffer.alloc(0);seeds.forEach(function(seed){if(seed.length>MAX_SEED_LENGTH){throw new TypeError(`Max seed length exceeded`)}buffer=_buffer.Buffer.concat([buffer,toBuffer(seed)])});buffer=_buffer.Buffer.concat([buffer,programId.toBuffer(),_buffer.Buffer.from("ProgramDerivedAddress")]);let hash=(0,_jsSha.sha256)(new Uint8Array(buffer));let publicKeyBytes=new _bn.default(hash,16).toArray(undefined,32);if(web3_js.PublicKey.isOnCurve(new Uint8Array(publicKeyBytes))){throw new Error(`Invalid seeds, address must fall off the curve`)}return new web3_js.PublicKey(publicKeyBytes)}function findProgramAddressSync(seeds,programId){let nonce=255;let address;while(nonce!=0){try{const seedsWithNonce=seeds.concat(_buffer.Buffer.from([nonce]));address=createProgramAddressSync(seedsWithNonce,programId)}catch(err){if(err instanceof TypeError){throw err}nonce--;continue}return[address,nonce]}throw new Error(`Unable to find a viable program address nonce`)}const toBuffer=arr=>{if(arr instanceof _buffer.Buffer){return arr}else if(arr instanceof Uint8Array){return _buffer.Buffer.from(arr.buffer,arr.byteOffset,arr.byteLength)}else{return _buffer.Buffer.from(arr)}};async function associated(programId,...args){let seeds=[_buffer.Buffer.from([97,110,99,104,111,114])];args.forEach(arg=>{seeds.push(arg instanceof _buffer.Buffer?arg:translateAddress(arg).toBuffer())});const[assoc]=await web3_js.PublicKey.findProgramAddress(seeds,translateAddress(programId));return assoc}var pubkey=Object.freeze({__proto__:null,createWithSeedSync:createWithSeedSync,createProgramAddressSync:createProgramAddressSync,findProgramAddressSync:findProgramAddressSync,associated:associated});const TOKEN_PROGRAM_ID=new web3_js.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");const ASSOCIATED_PROGRAM_ID=new web3_js.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");async function associatedAddress({mint,owner}){return(await web3_js.PublicKey.findProgramAddress([owner.toBuffer(),TOKEN_PROGRAM_ID.toBuffer(),mint.toBuffer()],ASSOCIATED_PROGRAM_ID))[0]}var token=Object.freeze({__proto__:null,TOKEN_PROGRAM_ID:TOKEN_PROGRAM_ID,ASSOCIATED_PROGRAM_ID:ASSOCIATED_PROGRAM_ID,associatedAddress:associatedAddress});var browserPonyfill={exports:{}};(function(module,exports){var global=typeof self!=="undefined"?self:commonjsGlobal;var __self__=function(){function F(){this.fetch=false;this.DOMException=global.DOMException}F.prototype=global;return new F}();(function(self){(function(exports){var support={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};function isDataView(obj){return obj&&DataView.prototype.isPrototypeOf(obj)}if(support.arrayBuffer){var viewClasses=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];var isArrayBufferView=ArrayBuffer.isView||function(obj){return obj&&viewClasses.indexOf(Object.prototype.toString.call(obj))>-1}}function normalizeName(name){if(typeof name!=="string"){name=String(name)}if(/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(name)){throw new TypeError("Invalid character in header field name")}return name.toLowerCase()}function normalizeValue(value){if(typeof value!=="string"){value=String(value)}return value}function iteratorFor(items){var iterator={next:function(){var value=items.shift();return{done:value===undefined,value:value}}};if(support.iterable){iterator[Symbol.iterator]=function(){return iterator}}return iterator}function Headers(headers){this.map={};if(headers instanceof Headers){headers.forEach(function(value,name){this.append(name,value)},this)}else if(Array.isArray(headers)){headers.forEach(function(header){this.append(header[0],header[1])},this)}else if(headers){Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}}Headers.prototype.append=function(name,value){name=normalizeName(name);value=normalizeValue(value);var oldValue=this.map[name];this.map[name]=oldValue?oldValue+", "+value:value};Headers.prototype["delete"]=function(name){delete this.map[normalizeName(name)]};Headers.prototype.get=function(name){name=normalizeName(name);return this.has(name)?this.map[name]:null};Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))};Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=normalizeValue(value)};Headers.prototype.forEach=function(callback,thisArg){for(var name in this.map){if(this.map.hasOwnProperty(name)){callback.call(thisArg,this.map[name],name,this)}}};Headers.prototype.keys=function(){var items=[];this.forEach(function(value,name){items.push(name)});return iteratorFor(items)};Headers.prototype.values=function(){var items=[];this.forEach(function(value){items.push(value)});return iteratorFor(items)};Headers.prototype.entries=function(){var items=[];this.forEach(function(value,name){items.push([name,value])});return iteratorFor(items)};if(support.iterable){Headers.prototype[Symbol.iterator]=Headers.prototype.entries}function consumed(body){if(body.bodyUsed){return Promise.reject(new TypeError("Already read"))}body.bodyUsed=true}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)};reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader;var promise=fileReaderReady(reader);reader.readAsArrayBuffer(blob);return promise}function readBlobAsText(blob){var reader=new FileReader;var promise=fileReaderReady(reader);reader.readAsText(blob);return promise}function readArrayBufferAsText(buf){var view=new Uint8Array(buf);var chars=new Array(view.length);for(var i=0;i<view.length;i++){chars[i]=String.fromCharCode(view[i])}return chars.join("")}function bufferClone(buf){if(buf.slice){return buf.slice(0)}else{var view=new Uint8Array(buf.byteLength);view.set(new Uint8Array(buf));return view.buffer}}function Body(){this.bodyUsed=false;this._initBody=function(body){this._bodyInit=body;if(!body){this._bodyText=""}else if(typeof body==="string"){this._bodyText=body}else if(support.blob&&Blob.prototype.isPrototypeOf(body)){this._bodyBlob=body}else if(support.formData&&FormData.prototype.isPrototypeOf(body)){this._bodyFormData=body}else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)){this._bodyText=body.toString()}else if(support.arrayBuffer&&support.blob&&isDataView(body)){this._bodyArrayBuffer=bufferClone(body.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else if(support.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(body)||isArrayBufferView(body))){this._bodyArrayBuffer=bufferClone(body)}else{this._bodyText=body=Object.prototype.toString.call(body)}if(!this.headers.get("content-type")){if(typeof body==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};if(support.blob){this.blob=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){return consumed(this)||Promise.resolve(this._bodyArrayBuffer)}else{return this.blob().then(readBlobAsArrayBuffer)}}}this.text=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return readBlobAsText(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}};if(support.formData){this.formData=function(){return this.text().then(decode)}}this.json=function(){return this.text().then(JSON.parse)};return this}var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}function Request(input,options){options=options||{};var body=options.body;if(input instanceof Request){if(input.bodyUsed){throw new TypeError("Already read")}this.url=input.url;this.credentials=input.credentials;if(!options.headers){this.headers=new Headers(input.headers)}this.method=input.method;this.mode=input.mode;this.signal=input.signal;if(!body&&input._bodyInit!=null){body=input._bodyInit;input.bodyUsed=true}}else{this.url=String(input)}this.credentials=options.credentials||this.credentials||"same-origin";if(options.headers||!this.headers){this.headers=new Headers(options.headers)}this.method=normalizeMethod(options.method||this.method||"GET");this.mode=options.mode||this.mode||null;this.signal=options.signal||this.signal;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&body){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(body)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})};function decode(body){var form=new FormData;body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("=");var name=split.shift().replace(/\+/g," ");var value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}});return form}function parseHeaders(rawHeaders){var headers=new Headers;var preProcessedHeaders=rawHeaders.replace(/\r?\n[\t ]+/g," ");preProcessedHeaders.split(/\r?\n/).forEach(function(line){var parts=line.split(":");var key=parts.shift().trim();if(key){var value=parts.join(":").trim();headers.append(key,value)}});return headers}Body.call(Request.prototype);function Response(bodyInit,options){if(!options){options={}}this.type="default";this.status=options.status===undefined?200:options.status;this.ok=this.status>=200&&this.status<300;this.statusText="statusText"in options?options.statusText:"OK";this.headers=new Headers(options.headers);this.url=options.url||"";this._initBody(bodyInit)}Body.call(Response.prototype);Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})};Response.error=function(){var response=new Response(null,{status:0,statusText:""});response.type="error";return response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(redirectStatuses.indexOf(status)===-1){throw new RangeError("Invalid status code")}return new Response(null,{status:status,headers:{location:url}})};exports.DOMException=self.DOMException;try{new exports.DOMException}catch(err){exports.DOMException=function(message,name){this.message=message;this.name=name;var error=Error(message);this.stack=error.stack};exports.DOMException.prototype=Object.create(Error.prototype);exports.DOMException.prototype.constructor=exports.DOMException}function fetch(input,init){return new Promise(function(resolve,reject){var request=new Request(input,init);if(request.signal&&request.signal.aborted){return reject(new exports.DOMException("Aborted","AbortError"))}var xhr=new XMLHttpRequest;function abortXhr(){xhr.abort()}xhr.onload=function(){var options={status:xhr.status,statusText:xhr.statusText,headers:parseHeaders(xhr.getAllResponseHeaders()||"")};options.url="responseURL"in xhr?xhr.responseURL:options.headers.get("X-Request-URL");var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))};xhr.onerror=function(){reject(new TypeError("Network request failed"))};xhr.ontimeout=function(){reject(new TypeError("Network request failed"))};xhr.onabort=function(){reject(new exports.DOMException("Aborted","AbortError"))};xhr.open(request.method,request.url,true);if(request.credentials==="include"){xhr.withCredentials=true}else if(request.credentials==="omit"){xhr.withCredentials=false}if("responseType"in xhr&&support.blob){xhr.responseType="blob"}request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)});if(request.signal){request.signal.addEventListener("abort",abortXhr);xhr.onreadystatechange=function(){if(xhr.readyState===4){request.signal.removeEventListener("abort",abortXhr)}}}xhr.send(typeof request._bodyInit==="undefined"?null:request._bodyInit)})}fetch.polyfill=true;if(!self.fetch){self.fetch=fetch;self.Headers=Headers;self.Request=Request;self.Response=Response}exports.Headers=Headers;exports.Request=Request;exports.Response=Response;exports.fetch=fetch;Object.defineProperty(exports,"__esModule",{value:true});return exports})({})})(__self__);__self__.fetch.ponyfill=true;delete __self__.fetch.polyfill;var ctx=__self__;exports=ctx.fetch;exports.default=ctx.fetch;exports.fetch=ctx.fetch;exports.Headers=ctx.Headers;exports.Request=ctx.Request;exports.Response=ctx.Response;module.exports=exports})(browserPonyfill,browserPonyfill.exports);var fetch=getDefaultExportFromCjs(browserPonyfill.exports);async function verifiedBuild(connection,programId,limit=5){const url=`https://api.apr.dev/api/v0/program/${programId.toString()}/latest?limit=${limit}`;const[programData,latestBuildsResp]=await Promise.all([fetchData(connection,programId),fetch(url)]);const latestBuilds=(await latestBuildsResp.json()).filter(b=>!b.aborted&&b.state==="Built"&&b.verified==="Verified");if(latestBuilds.length===0){return null}const build=latestBuilds[0];if(programData.slot.toNumber()!==build.verified_slot){return null}return build}async function fetchData(connection,programId){const accountInfo=await connection.getAccountInfo(programId);if(accountInfo===null){throw new Error("program account not found")}const{program}=decodeUpgradeableLoaderState(accountInfo.data);const programdataAccountInfo=await connection.getAccountInfo(program.programdataAddress);if(programdataAccountInfo===null){throw new Error("program data account not found")}const{programData}=decodeUpgradeableLoaderState(programdataAccountInfo.data);return programData}const UPGRADEABLE_LOADER_STATE_LAYOUT=borsh.rustEnum([borsh.struct([],"uninitialized"),borsh.struct([borsh.option(borsh.publicKey(),"authorityAddress")],"buffer"),borsh.struct([borsh.publicKey("programdataAddress")],"program"),borsh.struct([borsh.u64("slot"),borsh.option(borsh.publicKey(),"upgradeAuthorityAddress")],"programData")],undefined,borsh.u32());function decodeUpgradeableLoaderState(data){return UPGRADEABLE_LOADER_STATE_LAYOUT.decode(data)}var registry=Object.freeze({__proto__:null,verifiedBuild:verifiedBuild,fetchData:fetchData,decodeUpgradeableLoaderState:decodeUpgradeableLoaderState});var index=Object.freeze({__proto__:null,sha256:sha256,rpc:rpc,publicKey:pubkey,bytes:index$1,token:token,features:features,registry:registry});exports.utils=index;function isIdlAccounts(accountItem){return"accounts"in accountItem}async function idlAddress(programId){const base=(await web3_js.PublicKey.findProgramAddress([],programId))[0];return await web3_js.PublicKey.createWithSeed(base,seed(),programId)}function seed(){return"anchor:idl"}const IDL_ACCOUNT_LAYOUT=borsh.struct([borsh.publicKey("authority"),borsh.vecU8("data")]);function decodeIdlAccount(data){return IDL_ACCOUNT_LAYOUT.decode(data)}function splitArgsAndCtx(idlIx,args){var _a,_b;let options={};const inputLen=idlIx.args?idlIx.args.length:0;if(args.length>inputLen){if(args.length!==inputLen+1){throw new Error(`provided too many arguments ${args} to instruction ${idlIx===null||idlIx===void 0?void 0:idlIx.name} expecting: ${(_b=(_a=idlIx.args)===null||_a===void 0?void 0:_a.map(a=>a.name))!==null&&_b!==void 0?_b:[]}`)}options=args.pop()}return[args,options]}class InstructionNamespaceFactory{static build(idlIx,encodeFn,programId){if(idlIx.name==="_inner"){throw new IdlError("the _inner name is reserved")}const ix=(...args)=>{const[ixArgs,ctx]=splitArgsAndCtx(idlIx,[...args]);validateAccounts(idlIx.accounts,ctx.accounts);validateInstruction(idlIx,...args);const keys=ix.accounts(ctx.accounts);if(ctx.remainingAccounts!==undefined){keys.push(...ctx.remainingAccounts)}if(isSet("debug-logs")){console.log("Outgoing account metas:",keys)}return new web3_js.TransactionInstruction({keys:keys,programId:programId,data:encodeFn(idlIx.name,toInstruction(idlIx,...ixArgs))})};ix["accounts"]=accs=>{return InstructionNamespaceFactory.accountsArray(accs,idlIx.accounts,programId,idlIx.name)};return ix}static accountsArray(ctx,accounts,programId,ixName){if(!ctx){return[]}return accounts.map(acc=>{const nestedAccounts="accounts"in acc?acc.accounts:undefined;if(nestedAccounts!==undefined){const rpcAccs=ctx[acc.name];return InstructionNamespaceFactory.accountsArray(rpcAccs,acc.accounts,programId,ixName).flat()}else{const account=acc;let pubkey;try{pubkey=translateAddress(ctx[acc.name])}catch(err){throw new Error(`Wrong input type for account "${acc.name}" in the instruction accounts object${ixName!==undefined?' for instruction "'+ixName+'"':""}. Expected PublicKey or string.`)}const optional=account.isOptional&&pubkey.equals(programId);const isWritable=account.isMut&&!optional;const isSigner=account.isSigner&&!optional;return{pubkey:pubkey,isWritable:isWritable,isSigner:isSigner}}}).flat()}}function validateInstruction(ix,...args){}class RpcFactory{static build(idlIx,txFn,idlErrors,provider){const rpc=async(...args)=>{var _a;const tx=txFn(...args);const[,ctx]=splitArgsAndCtx(idlIx,[...args]);if(provider.sendAndConfirm===undefined){throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.")}try{return await provider.sendAndConfirm(tx,(_a=ctx.signers)!==null&&_a!==void 0?_a:[],ctx.options)}catch(err){throw translateError(err,idlErrors)}};return rpc}}class TransactionFactory{static build(idlIx,ixFn){const txFn=(...args)=>{var _a,_b,_c;const[,ctx]=splitArgsAndCtx(idlIx,[...args]);const tx=new web3_js.Transaction;if(ctx.preInstructions&&ctx.instructions){throw new Error("instructions is deprecated, use preInstructions")}(_a=ctx.preInstructions)===null||_a===void 0?void 0:_a.forEach(ix=>tx.add(ix));(_b=ctx.instructions)===null||_b===void 0?void 0:_b.forEach(ix=>tx.add(ix));tx.add(ixFn(...args));(_c=ctx.postInstructions)===null||_c===void 0?void 0:_c.forEach(ix=>tx.add(ix));return tx};return txFn}}class StateFactory{static build(idl,coder,programId,provider){if(idl.state===undefined){return undefined}return new StateClient(idl,programId,provider,coder)}}class StateClient{get programId(){return this._programId}constructor(idl,programId,provider=getProvider(),coder=new BorshCoder(idl)){this.provider=provider;this.coder=coder;this._idl=idl;this._programId=programId;this._address=programStateAddress(programId);this._sub=null;const[instruction,transaction,rpc]=(()=>{var _a;let instruction={};let transaction={};let rpc={};(_a=idl.state)===null||_a===void 0?void 0:_a.methods.forEach(m=>{const ixItem=InstructionNamespaceFactory.build(m,(ixName,ix)=>coder.instruction.encodeState(ixName,ix),programId);ixItem["accounts"]=accounts=>{const keys=stateInstructionKeys(programId,provider,m,accounts);return keys.concat(InstructionNamespaceFactory.accountsArray(accounts,m.accounts,programId,m.name))};const txItem=TransactionFactory.build(m,ixItem);const rpcItem=RpcFactory.build(m,txItem,parseIdlErrors(idl),provider);const name=(0,_camelcase.default)(m.name);instruction[name]=ixItem;transaction[name]=txItem;rpc[name]=rpcItem});return[instruction,transaction,rpc]})();this.instruction=instruction;this.transaction=transaction;this.rpc=rpc}async fetch(){const addr=this.address();const accountInfo=await this.provider.connection.getAccountInfo(addr);if(accountInfo===null){throw new Error(`Account does not exist ${addr.toString()}`)}const state=this._idl.state;if(!state){throw new Error("State is not specified in IDL.")}const expectedDiscriminator=await stateDiscriminator(state.struct.name);if(expectedDiscriminator.compare(accountInfo.data.slice(0,8))){throw new Error("Invalid account discriminator")}return this.coder.state.decode(accountInfo.data)}address(){return this._address}subscribe(commitment){if(this._sub!==null){return this._sub.ee}const ee=new _eventemitter.default;const listener=this.provider.connection.onAccountChange(this.address(),acc=>{const account=this.coder.state.decode(acc.data);ee.emit("change",account)},commitment);this._sub={ee:ee,listener:listener};return ee}unsubscribe(){if(this._sub!==null){this.provider.connection.removeAccountChangeListener(this._sub.listener).then(async()=>{this._sub=null}).catch(console.error)}}}exports.StateClient=StateClient;function programStateAddress(programId){let[registrySigner]=findProgramAddressSync([],programId);return createWithSeedSync(registrySigner,"unversioned",programId)}function stateInstructionKeys(programId,provider,m,accounts){if(m.name==="new"){const[programSigner]=findProgramAddressSync([],programId);if(provider.wallet===undefined){throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.")}return[{pubkey:provider.wallet.publicKey,isWritable:false,isSigner:true},{pubkey:programStateAddress(programId),isWritable:true,isSigner:false},{pubkey:programSigner,isWritable:false,isSigner:false},{pubkey:web3_js.SystemProgram.programId,isWritable:false,isSigner:false},{pubkey:programId,isWritable:false,isSigner:false}]}else{validateAccounts(m.accounts,accounts);return[{pubkey:programStateAddress(programId),isWritable:true,isSigner:false}]}}class AccountFactory{static build(idl,coder,programId,provider){var _a;const accountFns={};(_a=idl.accounts)===null||_a===void 0?void 0:_a.forEach(idlAccount=>{const name=(0,_camelcase.default)(idlAccount.name);accountFns[name]=new AccountClient(idl,idlAccount,programId,provider,coder)});return accountFns}}class AccountClient{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}constructor(idl,idlAccount,programId,provider,coder){this._idlAccount=idlAccount;this._programId=programId;this._provider=provider!==null&&provider!==void 0?provider:getProvider();this._coder=coder!==null&&coder!==void 0?coder:new BorshCoder(idl);this._size=this._coder.accounts.size(idlAccount)}async fetchNullable(address,commitment){const{data}=await this.fetchNullableAndContext(address,commitment);return data}async fetchNullableAndContext(address,commitment){const accountInfo=await this.getAccountInfoAndContext(address,commitment);const{value,context}=accountInfo;return{data:value&&value.data.length!==0?this._coder.accounts.decode(this._idlAccount.name,value.data):null,context:context}}async fetch(address,commitment){const{data}=await this.fetchNullableAndContext(address,commitment);if(data===null){throw new Error(`Account does not exist or has no data ${address.toString()}`)}return data}async fetchAndContext(address,commitment){const{data,context}=await this.fetchNullableAndContext(address,commitment);if(data===null){throw new Error(`Account does not exist ${address.toString()}`)}return{data:data,context:context}}async fetchMultiple(addresses,commitment){const accounts=await this.fetchMultipleAndContext(addresses,commitment);return accounts.map(account=>account?account.data:null)}async fetchMultipleAndContext(addresses,commitment){const accounts=await getMultipleAccountsAndContext(this._provider.connection,addresses.map(address=>translateAddress(address)),commitment);return accounts.map(result=>{if(result==null){return null}const{account,context}=result;return{data:this._coder.accounts.decode(this._idlAccount.name,account.data),context:context}})}async all(filters){const filter=this.coder.accounts.memcmp(this._idlAccount.name,filters instanceof Buffer?filters:undefined);const coderFilters=[];if((filter===null||filter===void 0?void 0:filter.offset)!=undefined&&(filter===null||filter===void 0?void 0:filter.bytes)!=undefined){coderFilters.push({memcmp:{offset:filter.offset,bytes:filter.bytes}})}if((filter===null||filter===void 0?void 0:filter.dataSize)!=undefined){coderFilters.push({dataSize:filter.dataSize})}let resp=await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...coderFilters,...Array.isArray(filters)?filters:[]]});return resp.map(({pubkey,account})=>{return{publicKey:pubkey,account:this._coder.accounts.decode(this._idlAccount.name,account.data)}})}subscribe(address,commitment){const sub=subscriptions.get(address.toString());if(sub){return sub.ee}const ee=new _eventemitter.default;address=translateAddress(address);const listener=this._provider.connection.onAccountChange(address,acc=>{const account=this._coder.accounts.decode(this._idlAccount.name,acc.data);ee.emit("change",account)},commitment);subscriptions.set(address.toString(),{ee:ee,listener:listener});return ee}async unsubscribe(address){let sub=subscriptions.get(address.toString());if(!sub){console.warn("Address is not subscribed");return}if(subscriptions){await this._provider.connection.removeAccountChangeListener(sub.listener).then(()=>{subscriptions.delete(address.toString())}).catch(console.error)}}async createInstruction(signer,sizeOverride){const size=this.size;if(this._provider.publicKey===undefined){throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.")}return web3_js.SystemProgram.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:signer.publicKey,space:sizeOverride!==null&&sizeOverride!==void 0?sizeOverride:size,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(sizeOverride!==null&&sizeOverride!==void 0?sizeOverride:size),programId:this._programId})}async associated(...args){const addr=await this.associatedAddress(...args);return await this.fetch(addr)}async associatedAddress(...args){return await associated(this._programId,...args)}async getAccountInfo(address,commitment){return await this._provider.connection.getAccountInfo(translateAddress(address),commitment)}async getAccountInfoAndContext(address,commitment){return await this._provider.connection.getAccountInfoAndContext(translateAddress(address),commitment)}}exports.AccountClient=AccountClient;const subscriptions=new Map;const PROGRAM_LOG="Program log: ";const PROGRAM_DATA="Program data: ";const PROGRAM_LOG_START_INDEX=PROGRAM_LOG.length;const PROGRAM_DATA_START_INDEX=PROGRAM_DATA.length;class EventManager{constructor(programId,provider,coder){this._programId=programId;this._provider=provider;this._eventParser=new EventParser(programId,coder);this._eventCallbacks=new Map;this._eventListeners=new Map;this._listenerIdCount=0}addEventListener(eventName,callback){var _a;let listener=this._listenerIdCount;this._listenerIdCount+=1;if(!this._eventListeners.has(eventName)){this._eventListeners.set(eventName,[])}this._eventListeners.set(eventName,((_a=this._eventListeners.get(eventName))!==null&&_a!==void 0?_a:[]).concat(listener));this._eventCallbacks.set(listener,[eventName,callback]);if(this._onLogsSubscriptionId!==undefined){return listener}this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(logs,ctx)=>{if(logs.err){return}for(const event of this._eventParser.parseLogs(logs.logs)){const allListeners=this._eventListeners.get(event.name);if(allListeners){allListeners.forEach(listener=>{const listenerCb=this._eventCallbacks.get(listener);if(listenerCb){const[,callback]=listenerCb;callback(event.data,ctx.slot,logs.signature)}})}}});return listener}async removeEventListener(listener){const callback=this._eventCallbacks.get(listener);if(!callback){throw new Error(`Event listener ${listener} doesn't exist!`)}const[eventName]=callback;let listeners=this._eventListeners.get(eventName);if(!listeners){throw new Error(`Event listeners don't exist for ${eventName}!`)}this._eventCallbacks.delete(listener);listeners=listeners.filter(l=>l!==listener);this._eventListeners.set(eventName,listeners);if(listeners.length===0){this._eventListeners.delete(eventName)}if(this._eventCallbacks.size==0){assert$1.ok(this._eventListeners.size===0);if(this._onLogsSubscriptionId!==undefined){await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId);this._onLogsSubscriptionId=undefined}}}}exports.EventManager=EventManager;class EventParser{constructor(programId,coder){this.coder=coder;this.programId=programId}*parseLogs(logs,errorOnDecodeFailure=false){const logScanner=new LogScanner(logs);const execution=new ExecutionContext;let log=logScanner.next();while(log!==null){let[event,newProgram,didPop]=this.handleLog(execution,log,errorOnDecodeFailure);if(event){yield event}if(newProgram){execution.push(newProgram)}if(didPop){execution.pop()}log=logScanner.next()}}handleLog(execution,log,errorOnDecodeFailure){if(execution.stack.length>0&&execution.program()===this.programId.toString()){return this.handleProgramLog(log,errorOnDecodeFailure)}else{return[null,...this.handleSystemLog(log)]}}handleProgramLog(log,errorOnDecodeFailure){if(log.startsWith(PROGRAM_LOG)||log.startsWith(PROGRAM_DATA)){const logStr=log.startsWith(PROGRAM_LOG)?log.slice(PROGRAM_LOG_START_INDEX):log.slice(PROGRAM_DATA_START_INDEX);const event=this.coder.events.decode(logStr);if(errorOnDecodeFailure&&event===null){throw new Error(`Unable to decode event ${logStr}`)}return[event,null,false]}else{return[null,...this.handleSystemLog(log)]}}handleSystemLog(log){const logStart=log.split(":")[0];if(logStart.match(/^Program (.*) success/g)!==null){return[null,true]}else if(logStart.startsWith(`Program ${this.programId.toString()} invoke`)){return[this.programId.toString(),false]}else if(logStart.includes("invoke")){return["cpi",false]}else{return[null,false]}}}exports.EventParser=EventParser;class ExecutionContext{constructor(){this.stack=[]}program(){assert$1.ok(this.stack.length>0);return this.stack[this.stack.length-1]}push(newProgram){this.stack.push(newProgram)}pop(){assert$1.ok(this.stack.length>0);this.stack.pop()}}class LogScanner{constructor(logs){this.logs=logs}next(){if(this.logs.length===0){return null}let l=this.logs[0];this.logs=this.logs.slice(1);return l}}class SimulateFactory{static build(idlIx,txFn,idlErrors,provider,coder,programId,idl){const simulate=async(...args)=>{var _a;const tx=txFn(...args);const[,ctx]=splitArgsAndCtx(idlIx,[...args]);let resp=undefined;if(provider.simulate===undefined){throw new Error("This function requires 'Provider.simulate' to be implemented.")}try{resp=await provider.simulate(tx,ctx.signers,(_a=ctx.options)===null||_a===void 0?void 0:_a.commitment)}catch(err){throw translateError(err,idlErrors)}if(resp===undefined){throw new Error("Unable to simulate transaction")}const logs=resp.logs;if(!logs){throw new Error("Simulated logs not found")}const events=[];if(idl.events){let parser=new EventParser(programId,coder);for(const event of parser.parseLogs(logs)){events.push(event)}}return{events:events,raw:logs}};return simulate}}function uint64(property){return new WrappedLayout(blob(8),b=>u64.fromBuffer(b),n=>n.toBuffer(),property)}function publicKey(property){return new WrappedLayout(blob(32),b=>new web3_js.PublicKey(b),key=>key.toBuffer(),property)}function coption(layout,property){return new COptionLayout(layout,property)}class WrappedLayout extends Layout_2{constructor(layout,decoder,encoder,property){super(layout.span,property);this.layout=layout;this.decoder=decoder;this.encoder=encoder}decode(b,offset){return this.decoder(this.layout.decode(b,offset))}encode(src,b,offset){return this.layout.encode(this.encoder(src),b,offset)}getSpan(b,offset){return this.layout.getSpan(b,offset)}}class COptionLayout extends Layout_2{constructor(layout,property){super(-1,property);this.layout=layout;this.discriminator=u32()}encode(src,b,offset=0){if(src===null||src===undefined){return this.layout.span+this.discriminator.encode(0,b,offset)}this.discriminator.encode(1,b,offset);return this.layout.encode(src,b,offset+4)+4}decode(b,offset=0){const discriminator=this.discriminator.decode(b,offset);if(discriminator===0){return null}else if(discriminator===1){return this.layout.decode(b,offset+4)}throw new Error("Invalid coption "+this.layout.property)}getSpan(b,offset=0){return this.layout.getSpan(b,offset+4)+4}}class u64 extends _bn.default{toBuffer(){const a=super.toArray().reverse();const b=Buffer.from(a);if(b.length===8){return b}if(b.length>=8){throw new Error("u64 too large")}const zeroPad=Buffer.alloc(8);b.copy(zeroPad);return zeroPad}static fromBuffer(buffer){if(buffer.length!==8){throw new Error(`Invalid buffer length: ${buffer.length}`)}return new u64([...buffer].reverse().map(i=>`00${i.toString(16)}`.slice(-2)).join(""),16)}}const TOKEN_ACCOUNT_LAYOUT=struct([publicKey("mint"),publicKey("owner"),uint64("amount"),coption(publicKey(),"delegate"),(p=>{const U=union(u8("discriminator"),null,p);U.addVariant(0,struct([]),"uninitialized");U.addVariant(1,struct([]),"initialized");U.addVariant(2,struct([]),"frozen");return U})("state"),coption(uint64(),"isNative"),uint64("delegatedAmount"),coption(publicKey(),"closeAuthority")]);function decodeTokenAccount(b){return TOKEN_ACCOUNT_LAYOUT.decode(b)}class AccountsResolver{constructor(_args,_accounts,_provider,_programId,_idlIx,_accountNamespace,_idlTypes,_customResolver){this._accounts=_accounts;this._provider=_provider;this._programId=_programId;this._idlIx=_idlIx;this._idlTypes=_idlTypes;this._customResolver=_customResolver;this._args=_args;this._accountStore=new AccountStore(_provider,_accountNamespace,this._programId)}args(_args){this._args=_args}async resolve(){await this.resolveConst(this._idlIx.accounts);while(await this.resolvePdas(this._idlIx.accounts)+await this.resolveRelations(this._idlIx.accounts)+await this.resolveCustom()>0){}}async resolveCustom(){if(this._customResolver){const{accounts,resolved}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});this._accounts=accounts;return resolved}return 0}resolveOptionalsHelper(partialAccounts,accountItems){const nestedAccountsGeneric={};for(const accountItem of accountItems){const accountName=accountItem.name;const partialAccount=partialAccounts[accountName];if(partialAccount===undefined)continue;if(isPartialAccounts(partialAccount)){if(isIdlAccounts(accountItem)){nestedAccountsGeneric[accountName]=this.resolveOptionalsHelper(partialAccount,accountItem["accounts"])}else{nestedAccountsGeneric[accountName]=flattenPartialAccounts(partialAccount,true)}}else{if(partialAccount!==null){nestedAccountsGeneric[accountName]=translateAddress(partialAccount)}else if(accountItem["isOptional"]){nestedAccountsGeneric[accountName]=this._programId}}}return nestedAccountsGeneric}resolveOptionals(accounts){Object.assign(this._accounts,this.resolveOptionalsHelper(accounts,this._idlIx.accounts))}get(path){const ret=path.reduce((acc,subPath)=>acc&&acc[subPath],this._accounts);if(ret&&ret.toBase58){return ret}}set(path,value){let curr=this._accounts;path.forEach((p,idx)=>{const isLast=idx==path.length-1;if(isLast){curr[p]=value}curr[p]=curr[p]||{};curr=curr[p]})}async resolveConst(accounts,path=[]){for(let k=0;k<accounts.length;k+=1){const accountDescOrAccounts=accounts[k];const subAccounts=accountDescOrAccounts.accounts;if(subAccounts){await this.resolveConst(subAccounts,[...path,(0,_camelcase.default)(accountDescOrAccounts.name)])}const accountDesc=accountDescOrAccounts;const accountDescName=(0,_camelcase.default)(accountDescOrAccounts.name);if(accountDesc.isSigner&&!this.get([...path,accountDescName])){if(this._provider.wallet===undefined){throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.")}this.set([...path,accountDescName],this._provider.wallet.publicKey)}if(Reflect.has(AccountsResolver.CONST_ACCOUNTS,accountDescName)&&!this.get([...path,accountDescName])){this.set([...path,accountDescName],AccountsResolver.CONST_ACCOUNTS[accountDescName])}}}async resolvePdas(accounts,path=[]){let found=0;for(let k=0;k<accounts.length;k+=1){const accountDesc=accounts[k];const subAccounts=accountDesc.accounts;if(subAccounts){found+=await this.resolvePdas(subAccounts,[...path,(0,_camelcase.default)(accountDesc.name)])}const accountDescCasted=accountDesc;const accountDescName=(0,_camelcase.default)(accountDesc.name);if(accountDescCasted.pda&&accountDescCasted.pda.seeds.length>0&&!this.get([...path,accountDescName])){if(Boolean(await this.autoPopulatePda(accountDescCasted,path))){found+=1}}}return found}async resolveRelations(accounts,path=[]){let found=0;for(let k=0;k<accounts.length;k+=1){const accountDesc=accounts[k];const subAccounts=accountDesc.accounts;if(subAccounts){found+=await this.resolveRelations(subAccounts,[...path,(0,_camelcase.default)(accountDesc.name)])}const relations=accountDesc.relations||[];const accountDescName=(0,_camelcase.default)(accountDesc.name);const newPath=[...path,accountDescName];const accountKey=this.get(newPath);if(accountKey){const matching=relations.filter(rel=>!this.get([...path,(0,_camelcase.default)(rel)]));found+=matching.length;if(matching.length>0){const account=await this._accountStore.fetchAccount({publicKey:accountKey});await Promise.all(matching.map(async rel=>{const relName=(0,_camelcase.default)(rel);this.set([...path,relName],account[relName]);return account[relName]}))}}}return found}async autoPopulatePda(accountDesc,path=[]){if(!accountDesc.pda||!accountDesc.pda.seeds)throw new Error("Must have seeds");const seeds=await Promise.all(accountDesc.pda.seeds.map(seedDesc=>this.toBuffer(seedDesc,path)));if(seeds.some(seed=>typeof seed=="undefined")){return}const programId=await this.parseProgramId(accountDesc,path);if(!programId){return}const[pubkey]=await web3_js.PublicKey.findProgramAddress(seeds,programId);this.set([...path,(0,_camelcase.default)(accountDesc.name)],pubkey)}async parseProgramId(accountDesc,path=[]){var _a;if(!((_a=accountDesc.pda)===null||_a===void 0?void 0:_a.programId)){return this._programId}switch(accountDesc.pda.programId.kind){case"const":return new web3_js.PublicKey(this.toBufferConst(accountDesc.pda.programId.value));case"arg":return this.argValue(accountDesc.pda.programId);case"account":return await this.accountValue(accountDesc.pda.programId,path);default:throw new Error(`Unexpected program seed kind: ${accountDesc.pda.programId.kind}`)}}async toBuffer(seedDesc,path=[]){switch(seedDesc.kind){case"const":return this.toBufferConst(seedDesc);case"arg":return await this.toBufferArg(seedDesc);case"account":return await this.toBufferAccount(seedDesc,path);default:throw new Error(`Unexpected seed kind: ${seedDesc.kind}`)}}getType(type,path=[]){if(path.length>0&&type.defined){const subType=this._idlTypes.find(t=>t.name===type.defined);if(!subType){throw new Error(`Cannot find type ${type.defined}`)}const structType=subType.type;const field=structType.fields.find(field=>field.name===path[0]);return this.getType(field.type,path.slice(1))}return type}toBufferConst(seedDesc){return this.toBufferValue(this.getType(seedDesc.type,(seedDesc.path||"").split(".").slice(1)),seedDesc.value)}async toBufferArg(seedDesc){const argValue=this.argValue(seedDesc);if(typeof argValue==="undefined"){return}return this.toBufferValue(this.getType(seedDesc.type,(seedDesc.path||"").split(".").slice(1)),argValue)}argValue(seedDesc){const split=seedDesc.path.split(".");const seedArgName=(0,_camelcase.default)(split[0]);const idlArgPosition=this._idlIx.args.findIndex(argDesc=>argDesc.name===seedArgName);if(idlArgPosition===-1){throw new Error(`Unable to find argument for seed: ${seedArgName}`)}return split.slice(1).reduce((curr,path)=>(curr||{})[path],this._args[idlArgPosition])}async toBufferAccount(seedDesc,path=[]){const accountValue=await this.accountValue(seedDesc,path);if(!accountValue){return}return this.toBufferValue(seedDesc.type,accountValue)}async accountValue(seedDesc,path=[]){const pathComponents=seedDesc.path.split(".");const fieldName=pathComponents[0];const fieldPubkey=this.get([...path,(0,_camelcase.default)(fieldName)]);if(fieldPubkey===null){throw new Error(`fieldPubkey is null`)}if(pathComponents.length===1){return fieldPubkey}const account=await this._accountStore.fetchAccount({publicKey:fieldPubkey,name:seedDesc.account});const fieldValue=this.parseAccountValue(account,pathComponents.slice(1));return fieldValue}parseAccountValue(account,path){let accountField;while(path.length>0){accountField=account[(0,_camelcase.default)(path[0])];path=path.slice(1)}return accountField}toBufferValue(type,value){switch(type){case"u8":return Buffer.from([value]);case"u16":let b=Buffer.alloc(2);b.writeUInt16LE(value);return b;case"u32":let buf=Buffer.alloc(4);buf.writeUInt32LE(value);return buf;case"u64":let bU64=Buffer.alloc(8);bU64.writeBigUInt64LE(BigInt(value));return bU64;case"string":return Buffer.from(encode$2(value));case"publicKey":return value.toBuffer();default:if(type.array){return Buffer.from(value)}throw new Error(`Unexpected seed type: ${type}`)}}}AccountsResolver.CONST_ACCOUNTS={associatedTokenProgram:ASSOCIATED_PROGRAM_ID,rent:web3_js.SYSVAR_RENT_PUBKEY,systemProgram:web3_js.SystemProgram.programId,tokenProgram:TOKEN_PROGRAM_ID,clock:web3_js.SYSVAR_CLOCK_PUBKEY};class AccountStore{constructor(_provider,_accounts,_programId){this._provider=_provider;this._programId=_programId;this._cache=new Map;this._idls={};this._idls[_programId.toBase58()]=_accounts}async ensureIdl(programId){if(!this._idls[programId.toBase58()]){const idl=await Program.fetchIdl(programId,this._provider);if(idl){const program=new Program(idl,programId,this._provider);this._idls[programId.toBase58()]=program.account}}return this._idls[programId.toBase58()]}async fetchAccount({publicKey,name,programId=this._programId}){const address=publicKey.toString();if(!this._cache.has(address)){if(name==="TokenAccount"){const accountInfo=await this._provider.connection.getAccountInfo(publicKey);if(accountInfo===null){throw new Error(`invalid account info for ${address}`)}const data=decodeTokenAccount(accountInfo.data);this._cache.set(address,data)}else if(name){const accounts=await this.ensureIdl(programId);if(accounts){const accountFetcher=accounts[(0,_camelcase.default)(name)];if(accountFetcher){const account=await accountFetcher.fetch(publicKey);this._cache.set(address,account)}}}else{const account=await this._provider.connection.getAccountInfo(publicKey);if(account===null){throw new Error(`invalid account info for ${address}`)}const data=account.data;const accounts=await this.ensureIdl(account.owner);if(accounts){const firstAccountLayout=Object.values(accounts)[0];if(!firstAccountLayout){throw new Error("No accounts for this program")}const result=firstAccountLayout.coder.accounts.decodeAny(data);this._cache.set(address,result)}}}return this._cache.get(address)}}class MethodsBuilderFactory{static build(provider,programId,idlIx,ixFn,txFn,rpcFn,simulateFn,viewFn,accountNamespace,idlTypes,customResolver){return(...args)=>new MethodsBuilder(args,ixFn,txFn,rpcFn,simulateFn,viewFn,provider,programId,idlIx,accountNamespace,idlTypes,customResolver)}}exports.MethodsBuilderFactory=MethodsBuilderFactory;function isPartialAccounts(partialAccount){return typeof partialAccount==="object"&&partialAccount!==null&&!("_bn"in partialAccount)}function flattenPartialAccounts(partialAccounts,throwOnNull){const toReturn={};for(const accountName in partialAccounts){const account=partialAccounts[accountName];if(account===null){if(throwOnNull)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!");continue}toReturn[accountName]=isPartialAccounts(account)?flattenPartialAccounts(account,true):translateAddress(account)}return toReturn}class MethodsBuilder{constructor(_args,_ixFn,_txFn,_rpcFn,_simulateFn,_viewFn,_provider,_programId,_idlIx,_accountNamespace,_idlTypes,_customResolver){this._ixFn=_ixFn;this._txFn=_txFn;this._rpcFn=_rpcFn;this._simulateFn=_simulateFn;this._viewFn=_viewFn;this._programId=_programId;this._accounts={};this._remainingAccounts=[];this._signers=[];this._preInstructions=[];this._postInstructions=[];this._autoResolveAccounts=true;this._args=_args;this._accountsResolver=new AccountsResolver(_args,this._accounts,_provider,_programId,_idlIx,_accountNamespace,_idlTypes,_customResolver)}args(_args){this._args=_args;this._accountsResolver.args(_args)}async pubkeys(){if(this._autoResolveAccounts){await this._accountsResolver.resolve()}return this._accounts}accounts(accounts){this._autoResolveAccounts=true;this._accountsResolver.resolveOptionals(accounts);return this}accountsStrict(accounts){this._autoResolveAccounts=false;this._accountsResolver.resolveOptionals(accounts);return this}signers(signers){this._signers=this._signers.concat(signers);return this}remainingAccounts(accounts){this._remainingAccounts=this._remainingAccounts.concat(accounts);return this}preInstructions(ixs){this._preInstructions=this._preInstructions.concat(ixs);return this}postInstructions(ixs){this._postInstructions=this._postInstructions.concat(ixs);return this}async rpc(options){if(this._autoResolveAccounts){await this._accountsResolver.resolve()}return this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:options})}async rpcAndKeys(options){const pubkeys=await this.pubkeys();return{pubkeys:pubkeys,signature:await this.rpc(options)}}async view(options){if(this._autoResolveAccounts){await this._accountsResolver.resolve()}if(!this._viewFn){throw new Error("Method does not support views")}return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:options})}async simulate(options){if(this._autoResolveAccounts){await this._accountsResolver.resolve()}return this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:options})}async instruction(){if(this._autoResolveAccounts){await this._accountsResolver.resolve()}return this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async prepare(){return{instruction:await this.instruction(),pubkeys:await this.pubkeys(),signers:await this._signers}}async transaction(){if(this._autoResolveAccounts){await this._accountsResolver.resolve()}return this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class ViewFactory{static build(programId,idlIx,simulateFn,idl){const isMut=idlIx.accounts.find(a=>a.isMut);const hasReturn=!!idlIx.returns;if(isMut||!hasReturn)return;const view=async(...args)=>{var _a,_b;let simulationResult=await simulateFn(...args);const returnPrefix=`Program return: ${programId} `;let returnLog=simulationResult.raw.find(l=>l.startsWith(returnPrefix));if(!returnLog){throw new Error("View expected return log")}let returnData=decode(returnLog.slice(returnPrefix.length));let returnType=idlIx.returns;if(!returnType){throw new Error("View expected return type")}const coder=IdlCoder.fieldLayout({type:returnType},Array.from([...(_a=idl.accounts)!==null&&_a!==void 0?_a:[],...(_b=idl.types)!==null&&_b!==void 0?_b:[]]));return coder.decode(returnData)};return view}}class NamespaceFactory{static build(idl,coder,programId,provider,getCustomResolver){const rpc={};const instruction={};const transaction={};const simulate={};const methods={};const view={};const idlErrors=parseIdlErrors(idl);const account=idl.accounts?AccountFactory.build(idl,coder,programId,provider):{};const state=StateFactory.build(idl,coder,programId,provider);idl.instructions.forEach(idlIx=>{const ixItem=InstructionNamespaceFactory.build(idlIx,(ixName,ix)=>coder.instruction.encode(ixName,ix),programId);const txItem=TransactionFactory.build(idlIx,ixItem);const rpcItem=RpcFactory.build(idlIx,txItem,idlErrors,provider);const simulateItem=SimulateFactory.build(idlIx,txItem,idlErrors,provider,coder,programId,idl);const viewItem=ViewFactory.build(programId,idlIx,simulateItem,idl);const methodItem=MethodsBuilderFactory.build(provider,programId,idlIx,ixItem,txItem,rpcItem,simulateItem,viewItem,account,idl.types||[],getCustomResolver&&getCustomResolver(idlIx));const name=(0,_camelcase.default)(idlIx.name);instruction[name]=ixItem;transaction[name]=txItem;rpc[name]=rpcItem;simulate[name]=simulateItem;methods[name]=methodItem;if(viewItem){view[name]=viewItem}});return[rpc,instruction,transaction,account,simulate,methods,state,view]}}class Program{get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}constructor(idl,programId,provider,coder,getCustomResolver){programId=translateAddress(programId);if(!provider){provider=getProvider()}this._idl=idl;this._provider=provider;this._programId=programId;this._coder=coder!==null&&coder!==void 0?coder:new BorshCoder(idl);this._events=new EventManager(this._programId,provider,this._coder);const[rpc,instruction,transaction,account,simulate,methods,state,views]=NamespaceFactory.build(idl,this._coder,programId,provider,getCustomResolver!==null&&getCustomResolver!==void 0?getCustomResolver:()=>undefined);this.rpc=rpc;this.instruction=instruction;this.transaction=transaction;this.account=account;this.simulate=simulate;this.methods=methods;this.state=state;this.views=views}static async at(address,provider){const programId=translateAddress(address);const idl=await Program.fetchIdl(programId,provider);if(!idl){throw new Error(`IDL not found for program: ${address.toString()}`)}return new Program(idl,programId,provider)}static async fetchIdl(address,provider){provider=provider!==null&&provider!==void 0?provider:getProvider();const programId=translateAddress(address);const idlAddr=await idlAddress(programId);const accountInfo=await provider.connection.getAccountInfo(idlAddr);if(!accountInfo){return null}let idlAccount=decodeIdlAccount(accountInfo.data.slice(8));const inflatedIdl=(0,_pako.inflate)(idlAccount.data);return JSON.parse(decode$2(inflatedIdl))}addEventListener(eventName,callback){return this._events.addEventListener(eventName,callback)}async removeEventListener(listener){return await this._events.removeEventListener(listener)}}exports.Program=Program;const SYSTEM_PROGRAM_ID=new web3_js.PublicKey("11111111111111111111111111111111");function program(provider){return new Program(IDL,SYSTEM_PROGRAM_ID,provider,coder())}function coder(){return new SystemCoder(IDL)}const IDL={version:"0.1.0",name:"system_program",instructions:[{name:"createAccount",accounts:[{name:"from",isMut:true,isSigner:true},{name:"to",isMut:true,isSigner:true}],args:[{name:"lamports",type:"u64"},{name:"space",type:"u64"},{name:"owner",type:"publicKey"}]},{name:"assign",accounts:[{name:"pubkey",isMut:true,isSigner:true}],args:[{name:"owner",type:"publicKey"}]},{name:"transfer",accounts:[{name:"from",isMut:true,isSigner:true},{name:"to",isMut:true,isSigner:false}],args:[{name:"lamports",type:"u64"}]},{name:"createAccountWithSeed",accounts:[{name:"from",isMut:true,isSigner:true},{name:"to",isMut:true,isSigner:false},{name:"base",isMut:false,isSigner:true}],args:[{name:"base",type:"publicKey"},{name:"seed",type:"string"},{name:"lamports",type:"u64"},{name:"space",type:"u64"},{name:"owner",type:"publicKey"}]},{name:"advanceNonceAccount",accounts:[{name:"nonce",isMut:true,isSigner:false},{name:"recentBlockhashes",isMut:false,isSigner:false},{name:"authorized",isMut:false,isSigner:true}],args:[{name:"authorized",type:"publicKey"}]},{name:"withdrawNonceAccount",accounts:[{name:"nonce",isMut:true,isSigner:false},{name:"to",isMut:true,isSigner:false},{name:"recentBlockhashes",isMut:false,isSigner:false},{name:"rent",isMut:false,isSigner:false},{name:"authorized",isMut:false,isSigner:true}],args:[{name:"lamports",type:"u64"}]},{name:"initializeNonceAccount",accounts:[{name:"nonce",isMut:true,isSigner:true},{name:"recentBlockhashes",isMut:false,isSigner:false},{name:"rent",isMut:false,isSigner:false}],args:[{name:"authorized",type:"publicKey"}]},{name:"authorizeNonceAccount",accounts:[{name:"nonce",isMut:true,isSigner:false},{name:"authorized",isMut:false,isSigner:true}],args:[{name:"authorized",type:"publicKey"}]},{name:"allocate",accounts:[{name:"pubkey",isMut:true,isSigner:true}],args:[{name:"space",type:"u64"}]},{name:"allocateWithSeed",accounts:[{name:"account",isMut:true,isSigner:false},{name:"base",isMut:false,isSigner:true}],args:[{name:"base",type:"publicKey"},{name:"seed",type:"string"},{name:"space",type:"u64"},{name:"owner",type:"publicKey"}]},{name:"assignWithSeed",accounts:[{name:"account",isMut:true,isSigner:false},{name:"base",isMut:false,isSigner:true}],args:[{name:"base",type:"publicKey"},{name:"seed",type:"string"},{name:"owner",type:"publicKey"}]},{name:"transferWithSeed",accounts:[{name:"from",isMut:true,isSigner:false},{name:"base",isMut:false,isSigner:true},{name:"to",isMut:true,isSigner:false}],args:[{name:"lamports",type:"u64"},{name:"seed",type:"string"},{name:"owner",type:"publicKey"}]}],accounts:[{name:"nonce",type:{kind:"struct",fields:[{name:"version",type:"u32"},{name:"state",type:"u32"},{name:"authorizedPubkey",type:"publicKey"},{name:"nonce",type:"publicKey"},{name:"feeCalculator",type:{defined:"FeeCalculator"}}]}}],types:[{name:"FeeCalculator",type:{kind:"struct",fields:[{name:"lamportsPerSignature",type:"u64"}]}}]};class Native{static system(provider){return program(provider)}}exports.Native=Native}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer)},{"@coral-xyz/borsh":25,"@solana/web3.js":99,assert:181,"base64-js":218,"bn.js":221,bs58:24,buffer:269,camelcase:274,eventemitter3:313,"js-sha256":499,pako:507}],17:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});exports.decode=exports.encode=void 0;const buffer_1=require("buffer");const base64=__importStar(require("base64-js"));function encode(data){return base64.fromByteArray(data)}exports.encode=encode;function decode(data){return buffer_1.Buffer.from(base64.toByteArray(data))}exports.decode=decode},{"base64-js":218,buffer:269}],18:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.decode=exports.encode=void 0;const bs58_1=__importDefault(require("bs58"));function encode(data){return bs58_1.default.encode(data)}exports.encode=encode;function decode(data){return bs58_1.default.decode(data)}exports.decode=decode},{bs58:24}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.decode=exports.encode=void 0;const buffer_1=require("buffer");function encode(data){return data.reduce((str,byte)=>str+byte.toString(16).padStart(2,"0"),"0x")}exports.encode=encode;function decode(data){if(data.indexOf("0x")===0){data=data.substr(2)}if(data.length%2===1){data="0"+data}let key=data.match(/.{2}/g);if(key===null){return buffer_1.Buffer.from([])}return buffer_1.Buffer.from(key.map(byte=>parseInt(byte,16)))}exports.decode=decode},{buffer:269}],20:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});exports.base64=exports.bs58=exports.utf8=exports.hex=void 0;exports.hex=__importStar(require("./hex.js"));exports.utf8=__importStar(require("./utf8.js"));exports.bs58=__importStar(require("./bs58.js"));exports.base64=__importStar(require("./base64.js"))},{"./base64.js":17,"./bs58.js":18,"./hex.js":19,"./utf8.js":21}],21:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.encode=exports.decode=void 0;const common_1=require("../common");function decode(array){const decoder=common_1.isBrowser?new TextDecoder("utf-8"):new(require("util").TextDecoder)("utf-8");return decoder.decode(array)}exports.decode=decode;function encode(input){const encoder=common_1.isBrowser?new TextEncoder:new(require("util").TextEncoder)("utf-8");return encoder.encode(input)}exports.encode=encode},{"../common":22,util:819}],22:[function(require,module,exports){(function(process){(function(){"use strict";var _a;Object.defineProperty(exports,"__esModule",{value:true});exports.chunks=exports.isBrowser=void 0;exports.isBrowser=process.env.ANCHOR_BROWSER||typeof window!=="undefined"&&!((_a=window.process)===null||_a===void 0?void 0:_a.hasOwnProperty("type"));function chunks(array,size){return Array.apply(0,new Array(Math.ceil(array.length/size))).map((_,index)=>array.slice(index*size,(index+1)*size))}exports.chunks=chunks}).call(this)}).call(this,require("_process"))},{_process:519}],23:[function(require,module,exports){"use strict";var _Buffer=require("safe-buffer").Buffer;function base(ALPHABET){if(ALPHABET.length>=255){throw new TypeError("Alphabet too long")}var BASE_MAP=new Uint8Array(256);for(var j=0;j<BASE_MAP.length;j++){BASE_MAP[j]=255}for(var i=0;i<ALPHABET.length;i++){var x=ALPHABET.charAt(i);var xc=x.charCodeAt(0);if(BASE_MAP[xc]!==255){throw new TypeError(x+" is ambiguous")}BASE_MAP[xc]=i}var BASE=ALPHABET.length;var LEADER=ALPHABET.charAt(0);var FACTOR=Math.log(BASE)/Math.log(256);var iFACTOR=Math.log(256)/Math.log(BASE);function encode(source){if(Array.isArray(source)||source instanceof Uint8Array){source=_Buffer.from(source)}if(!_Buffer.isBuffer(source)){throw new TypeError("Expected Buffer")}if(source.length===0){return""}var zeroes=0;var length=0;var pbegin=0;var pend=source.length;while(pbegin!==pend&&source[pbegin]===0){pbegin++;zeroes++}var size=(pend-pbegin)*iFACTOR+1>>>0;var b58=new Uint8Array(size);while(pbegin!==pend){var carry=source[pbegin];var i=0;for(var it1=size-1;(carry!==0||i<length)&&it1!==-1;it1--,i++){carry+=256*b58[it1]>>>0;b58[it1]=carry%BASE>>>0;carry=carry/BASE>>>0}if(carry!==0){throw new Error("Non-zero carry")}length=i;pbegin++}var it2=size-length;while(it2!==size&&b58[it2]===0){it2++}var str=LEADER.repeat(zeroes);for(;it2<size;++it2){str+=ALPHABET.charAt(b58[it2])}return str}function decodeUnsafe(source){if(typeof source!=="string"){throw new TypeError("Expected String")}if(source.length===0){return _Buffer.alloc(0)}var psz=0;var zeroes=0;var length=0;while(source[psz]===LEADER){zeroes++;psz++}var size=(source.length-psz)*FACTOR+1>>>0;var b256=new Uint8Array(size);while(source[psz]){var carry=BASE_MAP[source.charCodeAt(psz)];if(carry===255){return}var i=0;for(var it3=size-1;(carry!==0||i<length)&&it3!==-1;it3--,i++){carry+=BASE*b256[it3]>>>0;b256[it3]=carry%256>>>0;carry=carry/256>>>0}if(carry!==0){throw new Error("Non-zero carry")}length=i;psz++}var it4=size-length;while(it4!==size&&b256[it4]===0){it4++}var vch=_Buffer.allocUnsafe(zeroes+(size-it4));vch.fill(0,0,zeroes);var j=zeroes;while(it4!==size){vch[j++]=b256[it4++]}return vch}function decode(string){var buffer=decodeUnsafe(string);if(buffer){return buffer}throw new Error("Non-base"+BASE+" character")}return{encode:encode,decodeUnsafe:decodeUnsafe,decode:decode}}module.exports=base},{"safe-buffer":787}],24:[function(require,module,exports){var basex=require("base-x");var ALPHABET="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";module.exports=basex(ALPHABET)},{"base-x":23}],25:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.map=exports.array=exports.rustEnum=exports.str=exports.vecU8=exports.tagged=exports.vec=exports.bool=exports.option=exports.publicKey=exports.i256=exports.u256=exports.i128=exports.u128=exports.i64=exports.u64=exports.struct=exports.f64=exports.f32=exports.i32=exports.u32=exports.i16=exports.u16=exports.i8=exports.u8=void 0;const buffer_layout_1=require("buffer-layout");const web3_js_1=require("@solana/web3.js");const bn_js_1=__importDefault(require("bn.js"));var buffer_layout_2=require("buffer-layout");Object.defineProperty(exports,"u8",{enumerable:true,get:function(){return buffer_layout_2.u8}});Object.defineProperty(exports,"i8",{enumerable:true,get:function(){return buffer_layout_2.s8}});Object.defineProperty(exports,"u16",{enumerable:true,get:function(){return buffer_layout_2.u16}});Object.defineProperty(exports,"i16",{enumerable:true,get:function(){return buffer_layout_2.s16}});Object.defineProperty(exports,"u32",{enumerable:true,get:function(){return buffer_layout_2.u32}});Object.defineProperty(exports,"i32",{enumerable:true,get:function(){return buffer_layout_2.s32}});Object.defineProperty(exports,"f32",{enumerable:true,get:function(){return buffer_layout_2.f32}});Object.defineProperty(exports,"f64",{enumerable:true,get:function(){return buffer_layout_2.f64}});Object.defineProperty(exports,"struct",{enumerable:true,get:function(){return buffer_layout_2.struct}});class BNLayout extends buffer_layout_1.Layout{constructor(span,signed,property){super(span,property);this.blob=(0,buffer_layout_1.blob)(span);this.signed=signed}decode(b,offset=0){const num=new bn_js_1.default(this.blob.decode(b,offset),10,"le");if(this.signed){return num.fromTwos(this.span*8).clone()}return num}encode(src,b,offset=0){if(this.signed){src=src.toTwos(this.span*8)}return this.blob.encode(src.toArrayLike(Buffer,"le",this.span),b,offset)}}function u64(property){return new BNLayout(8,false,property)}exports.u64=u64;function i64(property){return new BNLayout(8,true,property)}exports.i64=i64;function u128(property){return new BNLayout(16,false,property)}exports.u128=u128;function i128(property){return new BNLayout(16,true,property)}exports.i128=i128;function u256(property){return new BNLayout(32,false,property)}exports.u256=u256;function i256(property){return new BNLayout(32,true,property)}exports.i256=i256;class WrappedLayout extends buffer_layout_1.Layout{constructor(layout,decoder,encoder,property){super(layout.span,property);this.layout=layout;this.decoder=decoder;this.encoder=encoder}decode(b,offset){return this.decoder(this.layout.decode(b,offset))}encode(src,b,offset){return this.layout.encode(this.encoder(src),b,offset)}getSpan(b,offset){return this.layout.getSpan(b,offset)}}function publicKey(property){return new WrappedLayout((0,buffer_layout_1.blob)(32),b=>new web3_js_1.PublicKey(b),key=>key.toBuffer(),property)}exports.publicKey=publicKey;class OptionLayout extends buffer_layout_1.Layout{constructor(layout,property){super(-1,property);this.layout=layout;this.discriminator=(0,buffer_layout_1.u8)()}encode(src,b,offset=0){if(src===null||src===undefined){return this.discriminator.encode(0,b,offset)}this.discriminator.encode(1,b,offset);return this.layout.encode(src,b,offset+1)+1}decode(b,offset=0){const discriminator=this.discriminator.decode(b,offset);if(discriminator===0){return null}else if(discriminator===1){return this.layout.decode(b,offset+1)}throw new Error("Invalid option "+this.property)}getSpan(b,offset=0){const discriminator=this.discriminator.decode(b,offset);if(discriminator===0){return 1}else if(discriminator===1){return this.layout.getSpan(b,offset+1)+1}throw new Error("Invalid option "+this.property)}}function option(layout,property){return new OptionLayout(layout,property)}exports.option=option;function bool(property){return new WrappedLayout((0,buffer_layout_1.u8)(),decodeBool,encodeBool,property)}exports.bool=bool;function decodeBool(value){if(value===0){return false}else if(value===1){return true}throw new Error("Invalid bool: "+value)}function encodeBool(value){return value?1:0}function vec(elementLayout,property){const length=(0,buffer_layout_1.u32)("length");const layout=(0,buffer_layout_1.struct)([length,(0,buffer_layout_1.seq)(elementLayout,(0,buffer_layout_1.offset)(length,-length.span),"values")]);return new WrappedLayout(layout,({values})=>values,values=>({values:values}),property)}exports.vec=vec;function tagged(tag,layout,property){const wrappedLayout=(0,buffer_layout_1.struct)([u64("tag"),layout.replicate("data")]);function decodeTag({tag:receivedTag,data}){if(!receivedTag.eq(tag)){throw new Error("Invalid tag, expected: "+tag.toString("hex")+", got: "+receivedTag.toString("hex"))}return data}return new WrappedLayout(wrappedLayout,decodeTag,data=>({tag:tag,data:data}),property)}exports.tagged=tagged;function vecU8(property){const length=(0,buffer_layout_1.u32)("length");const layout=(0,buffer_layout_1.struct)([length,(0,buffer_layout_1.blob)((0,buffer_layout_1.offset)(length,-length.span),"data")]);return new WrappedLayout(layout,({data})=>data,data=>({data:data}),property)}exports.vecU8=vecU8;function str(property){return new WrappedLayout(vecU8(),data=>data.toString("utf-8"),s=>Buffer.from(s,"utf-8"),property)}exports.str=str;function rustEnum(variants,property,discriminant){const unionLayout=(0,buffer_layout_1.union)(discriminant!==null&&discriminant!==void 0?discriminant:(0,buffer_layout_1.u8)(),property);variants.forEach((variant,index)=>unionLayout.addVariant(index,variant,variant.property));return unionLayout}exports.rustEnum=rustEnum;function array(elementLayout,length,property){const layout=(0,buffer_layout_1.struct)([(0,buffer_layout_1.seq)(elementLayout,length,"values")]);return new WrappedLayout(layout,({values})=>values,values=>({values:values}),property)}exports.array=array;class MapEntryLayout extends buffer_layout_1.Layout{constructor(keyLayout,valueLayout,property){super(keyLayout.span+valueLayout.span,property);this.keyLayout=keyLayout;this.valueLayout=valueLayout}decode(b,offset){offset=offset||0;const key=this.keyLayout.decode(b,offset);const value=this.valueLayout.decode(b,offset+this.keyLayout.getSpan(b,offset));return[key,value]}encode(src,b,offset){offset=offset||0;const keyBytes=this.keyLayout.encode(src[0],b,offset);const valueBytes=this.valueLayout.encode(src[1],b,offset+keyBytes);return keyBytes+valueBytes}getSpan(b,offset){return this.keyLayout.getSpan(b,offset)+this.valueLayout.getSpan(b,offset)}}function map(keyLayout,valueLayout,property){const length=(0,buffer_layout_1.u32)("length");const layout=(0,buffer_layout_1.struct)([length,(0,buffer_layout_1.seq)(new MapEntryLayout(keyLayout,valueLayout),(0,buffer_layout_1.offset)(length,-length.span),"values")]);return new WrappedLayout(layout,({values})=>new Map(values),values=>({values:Array.from(values.entries())}),property)}exports.map=map}).call(this)}).call(this,require("buffer").Buffer)},{"@solana/web3.js":99,"bn.js":221,buffer:269,"buffer-layout":270}],26:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.utils=exports.curve25519=exports.getSharedSecret=exports.sync=exports.verify=exports.sign=exports.getPublicKey=exports.Signature=exports.Point=exports.RistrettoPoint=exports.ExtendedPoint=exports.CURVE=void 0;const nodeCrypto=require("crypto");const _0n=BigInt(0);const _1n=BigInt(1);const _2n=BigInt(2);const _8n=BigInt(8);const CU_O=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989");const CURVE=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:CU_O,n:CU_O,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});exports.CURVE=CURVE;const POW_2_256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");const SQRT_D=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const SQRT_AD_MINUS_ONE=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");const INVSQRT_A_MINUS_D=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");const ONE_MINUS_D_SQ=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");const D_MINUS_ONE_SQ=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class ExtendedPoint{constructor(x,y,z,t){this.x=x;this.y=y;this.z=z;this.t=t}static fromAffine(p){if(!(p instanceof Point)){throw new TypeError("ExtendedPoint#fromAffine: expected Point")}if(p.equals(Point.ZERO))return ExtendedPoint.ZERO;return new ExtendedPoint(p.x,p.y,_1n,mod(p.x*p.y))}static toAffineBatch(points){const toInv=invertBatch(points.map(p=>p.z));return points.map((p,i)=>p.toAffine(toInv[i]))}static normalizeZ(points){return this.toAffineBatch(points).map(this.fromAffine)}equals(other){assertExtPoint(other);const{x:X1,y:Y1,z:Z1}=this;const{x:X2,y:Y2,z:Z2}=other;const X1Z2=mod(X1*Z2);const X2Z1=mod(X2*Z1);const Y1Z2=mod(Y1*Z2);const Y2Z1=mod(Y2*Z1);return X1Z2===X2Z1&&Y1Z2===Y2Z1}negate(){return new ExtendedPoint(mod(-this.x),this.y,this.z,mod(-this.t))}double(){const{x:X1,y:Y1,z:Z1}=this;const{a}=CURVE;const A=mod(X1*X1);const B=mod(Y1*Y1);const C=mod(_2n*mod(Z1*Z1));const D=mod(a*A);const x1y1=X1+Y1;const E=mod(mod(x1y1*x1y1)-A-B);const G=D+B;const F=G-C;const H=D-B;const X3=mod(E*F);const Y3=mod(G*H);const T3=mod(E*H);const Z3=mod(F*G);return new ExtendedPoint(X3,Y3,Z3,T3)}add(other){assertExtPoint(other);const{x:X1,y:Y1,z:Z1,t:T1}=this;const{x:X2,y:Y2,z:Z2,t:T2}=other;const A=mod((Y1-X1)*(Y2+X2));const B=mod((Y1+X1)*(Y2-X2));const F=mod(B-A);if(F===_0n)return this.double();const C=mod(Z1*_2n*T2);const D=mod(T1*_2n*Z2);const E=D+C;const G=B+A;const H=D-C;const X3=mod(E*F);const Y3=mod(G*H);const T3=mod(E*H);const Z3=mod(F*G);return new ExtendedPoint(X3,Y3,Z3,T3)}subtract(other){return this.add(other.negate())}precomputeWindow(W){const windows=1+256/W;const points=[];let p=this;let base=p;for(let window=0;window<windows;window++){base=p;points.push(base);for(let i=1;i<2**(W-1);i++){base=base.add(p);points.push(base)}p=base.double()}return points}wNAF(n,affinePoint){if(!affinePoint&&this.equals(ExtendedPoint.BASE))affinePoint=Point.BASE;const W=affinePoint&&affinePoint._WINDOW_SIZE||1;if(256%W){throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2")}let precomputes=affinePoint&&pointPrecomputes.get(affinePoint);if(!precomputes){precomputes=this.precomputeWindow(W);if(affinePoint&&W!==1){precomputes=ExtendedPoint.normalizeZ(precomputes);pointPrecomputes.set(affinePoint,precomputes)}}let p=ExtendedPoint.ZERO;let f=ExtendedPoint.BASE;const windows=1+256/W;const windowSize=2**(W-1);const mask=BigInt(2**W-1);const maxNumber=2**W;const shiftBy=BigInt(W);for(let window=0;window<windows;window++){const offset=window*windowSize;let wbits=Number(n&mask);n>>=shiftBy;if(wbits>windowSize){wbits-=maxNumber;n+=_1n}const offset1=offset;const offset2=offset+Math.abs(wbits)-1;const cond1=window%2!==0;const cond2=wbits<0;if(wbits===0){f=f.add(constTimeNegate(cond1,precomputes[offset1]))}else{p=p.add(constTimeNegate(cond2,precomputes[offset2]))}}return ExtendedPoint.normalizeZ([p,f])[0]}multiply(scalar,affinePoint){return this.wNAF(normalizeScalar(scalar,CURVE.l),affinePoint)}multiplyUnsafe(scalar){let n=normalizeScalar(scalar,CURVE.l,false);const G=ExtendedPoint.BASE;const P0=ExtendedPoint.ZERO;if(n===_0n)return P0;if(this.equals(P0)||n===_1n)return this;if(this.equals(G))return this.wNAF(n);let p=P0;let d=this;while(n>_0n){if(n&_1n)p=p.add(d);d=d.double();n>>=_1n}return p}isSmallOrder(){return this.multiplyUnsafe(CURVE.h).equals(ExtendedPoint.ZERO)}isTorsionFree(){let p=this.multiplyUnsafe(CURVE.l/_2n).double();if(CURVE.l%_2n)p=p.add(this);return p.equals(ExtendedPoint.ZERO)}toAffine(invZ){const{x,y,z}=this;const is0=this.equals(ExtendedPoint.ZERO);if(invZ==null)invZ=is0?_8n:invert(z);const ax=mod(x*invZ);const ay=mod(y*invZ);const zz=mod(z*invZ);if(is0)return Point.ZERO;if(zz!==_1n)throw new Error("invZ was invalid");return new Point(ax,ay)}fromRistrettoBytes(){legacyRist()}toRistrettoBytes(){legacyRist()}fromRistrettoHash(){legacyRist()}}exports.ExtendedPoint=ExtendedPoint;ExtendedPoint.BASE=new ExtendedPoint(CURVE.Gx,CURVE.Gy,_1n,mod(CURVE.Gx*CURVE.Gy));ExtendedPoint.ZERO=new ExtendedPoint(_0n,_1n,_1n,_0n);function constTimeNegate(condition,item){const neg=item.negate();return condition?neg:item}function assertExtPoint(other){if(!(other instanceof ExtendedPoint))throw new TypeError("ExtendedPoint expected")}function assertRstPoint(other){if(!(other instanceof RistrettoPoint))throw new TypeError("RistrettoPoint expected")}function legacyRist(){throw new Error("Legacy method: switch to RistrettoPoint")}class RistrettoPoint{constructor(ep){this.ep=ep}static calcElligatorRistrettoMap(r0){const{d}=CURVE;const r=mod(SQRT_M1*r0*r0);const Ns=mod((r+_1n)*ONE_MINUS_D_SQ);let c=BigInt(-1);const D=mod((c-d*r)*mod(r+d));let{isValid:Ns_D_is_sq,value:s}=uvRatio(Ns,D);let s_=mod(s*r0);if(!edIsNegative(s_))s_=mod(-s_);if(!Ns_D_is_sq)s=s_;if(!Ns_D_is_sq)c=r;const Nt=mod(c*(r-_1n)*D_MINUS_ONE_SQ-D);const s2=s*s;const W0=mod((s+s)*D);const W1=mod(Nt*SQRT_AD_MINUS_ONE);const W2=mod(_1n-s2);const W3=mod(_1n+s2);return new ExtendedPoint(mod(W0*W3),mod(W2*W1),mod(W1*W3),mod(W0*W2))}static hashToCurve(hex){hex=ensureBytes(hex,64);const r1=bytes255ToNumberLE(hex.slice(0,32));const R1=this.calcElligatorRistrettoMap(r1);const r2=bytes255ToNumberLE(hex.slice(32,64));const R2=this.calcElligatorRistrettoMap(r2);return new RistrettoPoint(R1.add(R2))}static fromHex(hex){hex=ensureBytes(hex,32);const{a,d}=CURVE;const emsg="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint";const s=bytes255ToNumberLE(hex);if(!equalBytes(numberTo32BytesLE(s),hex)||edIsNegative(s))throw new Error(emsg);const s2=mod(s*s);const u1=mod(_1n+a*s2);const u2=mod(_1n-a*s2);const u1_2=mod(u1*u1);const u2_2=mod(u2*u2);const v=mod(a*d*u1_2-u2_2);const{isValid,value:I}=invertSqrt(mod(v*u2_2));const Dx=mod(I*u2);const Dy=mod(I*Dx*v);let x=mod((s+s)*Dx);if(edIsNegative(x))x=mod(-x);const y=mod(u1*Dy);const t=mod(x*y);if(!isValid||edIsNegative(t)||y===_0n)throw new Error(emsg);return new RistrettoPoint(new ExtendedPoint(x,y,_1n,t))}toRawBytes(){let{x,y,z,t}=this.ep;const u1=mod(mod(z+y)*mod(z-y));const u2=mod(x*y);const u2sq=mod(u2*u2);const{value:invsqrt}=invertSqrt(mod(u1*u2sq));const D1=mod(invsqrt*u1);const D2=mod(invsqrt*u2);const zInv=mod(D1*D2*t);let D;if(edIsNegative(t*zInv)){let _x=mod(y*SQRT_M1);let _y=mod(x*SQRT_M1);x=_x;y=_y;D=mod(D1*INVSQRT_A_MINUS_D)}else{D=D2}if(edIsNegative(x*zInv))y=mod(-y);let s=mod((z-y)*D);if(edIsNegative(s))s=mod(-s);return numberTo32BytesLE(s)}toHex(){return bytesToHex(this.toRawBytes())}toString(){return this.toHex()}equals(other){assertRstPoint(other);const a=this.ep;const b=other.ep;const one=mod(a.x*b.y)===mod(a.y*b.x);const two=mod(a.y*b.y)===mod(a.x*b.x);return one||two}add(other){assertRstPoint(other);return new RistrettoPoint(this.ep.add(other.ep))}subtract(other){assertRstPoint(other);return new RistrettoPoint(this.ep.subtract(other.ep))}multiply(scalar){return new RistrettoPoint(this.ep.multiply(scalar))}multiplyUnsafe(scalar){return new RistrettoPoint(this.ep.multiplyUnsafe(scalar))}}exports.RistrettoPoint=RistrettoPoint;RistrettoPoint.BASE=new RistrettoPoint(ExtendedPoint.BASE);RistrettoPoint.ZERO=new RistrettoPoint(ExtendedPoint.ZERO);const pointPrecomputes=new WeakMap;class Point{constructor(x,y){this.x=x;this.y=y}_setWindowSize(windowSize){this._WINDOW_SIZE=windowSize;pointPrecomputes.delete(this)}static fromHex(hex,strict=true){const{d,P}=CURVE;hex=ensureBytes(hex,32);const normed=hex.slice();normed[31]=hex[31]&~128;const y=bytesToNumberLE(normed);if(strict&&y>=P)throw new Error("Expected 0 < hex < P");if(!strict&&y>=POW_2_256)throw new Error("Expected 0 < hex < 2**256");const y2=mod(y*y);const u=mod(y2-_1n);const v=mod(d*y2+_1n);let{isValid,value:x}=uvRatio(u,v);if(!isValid)throw new Error("Point.fromHex: invalid y coordinate");const isXOdd=(x&_1n)===_1n;const isLastByteOdd=(hex[31]&128)!==0;if(isLastByteOdd!==isXOdd){x=mod(-x)}return new Point(x,y)}static async fromPrivateKey(privateKey){return(await getExtendedPublicKey(privateKey)).point}toRawBytes(){const bytes=numberTo32BytesLE(this.y);bytes[31]|=this.x&_1n?128:0;return bytes}toHex(){return bytesToHex(this.toRawBytes())}toX25519(){const{y}=this;const u=mod((_1n+y)*invert(_1n-y));return numberTo32BytesLE(u)}isTorsionFree(){return ExtendedPoint.fromAffine(this).isTorsionFree()}equals(other){return this.x===other.x&&this.y===other.y}negate(){return new Point(mod(-this.x),this.y)}add(other){return ExtendedPoint.fromAffine(this).add(ExtendedPoint.fromAffine(other)).toAffine()}subtract(other){return this.add(other.negate())}multiply(scalar){return ExtendedPoint.fromAffine(this).multiply(scalar,this).toAffine()}}exports.Point=Point;Point.BASE=new Point(CURVE.Gx,CURVE.Gy);Point.ZERO=new Point(_0n,_1n);class Signature{constructor(r,s){this.r=r;this.s=s;this.assertValidity()}static fromHex(hex){const bytes=ensureBytes(hex,64);const r=Point.fromHex(bytes.slice(0,32),false);const s=bytesToNumberLE(bytes.slice(32,64));return new Signature(r,s)}assertValidity(){const{r,s}=this;if(!(r instanceof Point))throw new Error("Expected Point instance");normalizeScalar(s,CURVE.l,false);return this}toRawBytes(){const u8=new Uint8Array(64);u8.set(this.r.toRawBytes());u8.set(numberTo32BytesLE(this.s),32);return u8}toHex(){return bytesToHex(this.toRawBytes())}}exports.Signature=Signature;function concatBytes(...arrays){if(!arrays.every(a=>a instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(arrays.length===1)return arrays[0];const length=arrays.reduce((a,arr)=>a+arr.length,0);const result=new Uint8Array(length);for(let i=0,pad=0;i<arrays.length;i++){const arr=arrays[i];result.set(arr,pad);pad+=arr.length}return result}const hexes=Array.from({length:256},(v,i)=>i.toString(16).padStart(2,"0"));function bytesToHex(uint8a){if(!(uint8a instanceof Uint8Array))throw new Error("Uint8Array expected");let hex="";for(let i=0;i<uint8a.length;i++){hex+=hexes[uint8a[i]]}return hex}function hexToBytes(hex){if(typeof hex!=="string"){throw new TypeError("hexToBytes: expected string, got "+typeof hex)}if(hex.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const array=new Uint8Array(hex.length/2);for(let i=0;i<array.length;i++){const j=i*2;const hexByte=hex.slice(j,j+2);const byte=Number.parseInt(hexByte,16);if(Number.isNaN(byte)||byte<0)throw new Error("Invalid byte sequence");array[i]=byte}return array}function numberTo32BytesBE(num){const length=32;const hex=num.toString(16).padStart(length*2,"0");return hexToBytes(hex)}function numberTo32BytesLE(num){return numberTo32BytesBE(num).reverse()}function edIsNegative(num){return(mod(num)&_1n)===_1n}function bytesToNumberLE(uint8a){if(!(uint8a instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+bytesToHex(Uint8Array.from(uint8a).reverse()))}const MAX_255B=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function bytes255ToNumberLE(bytes){return mod(bytesToNumberLE(bytes)&MAX_255B)}function mod(a,b=CURVE.P){const res=a%b;return res>=_0n?res:b+res}function invert(number,modulo=CURVE.P){if(number===_0n||modulo<=_0n){throw new Error(`invert: expected positive integers, got n=${number} mod=${modulo}`)}let a=mod(number,modulo);let b=modulo;let x=_0n,y=_1n,u=_1n,v=_0n;while(a!==_0n){const q=b/a;const r=b%a;const m=x-u*q;const n=y-v*q;b=a,a=r,x=u,y=v,u=m,v=n}const gcd=b;if(gcd!==_1n)throw new Error("invert: does not exist");return mod(x,modulo)}function invertBatch(nums,p=CURVE.P){const tmp=new Array(nums.length);const lastMultiplied=nums.reduce((acc,num,i)=>{if(num===_0n)return acc;tmp[i]=acc;return mod(acc*num,p)},_1n);const inverted=invert(lastMultiplied,p);nums.reduceRight((acc,num,i)=>{if(num===_0n)return acc;tmp[i]=mod(acc*tmp[i],p);return mod(acc*num,p)},inverted);return tmp}function pow2(x,power){const{P}=CURVE;let res=x;while(power-- >_0n){res*=res;res%=P}return res}function pow_2_252_3(x){const{P}=CURVE;const _5n=BigInt(5);const _10n=BigInt(10);const _20n=BigInt(20);const _40n=BigInt(40);const _80n=BigInt(80);const x2=x*x%P;const b2=x2*x%P;const b4=pow2(b2,_2n)*b2%P;const b5=pow2(b4,_1n)*x%P;const b10=pow2(b5,_5n)*b5%P;const b20=pow2(b10,_10n)*b10%P;const b40=pow2(b20,_20n)*b20%P;const b80=pow2(b40,_40n)*b40%P;const b160=pow2(b80,_80n)*b80%P;const b240=pow2(b160,_80n)*b80%P;const b250=pow2(b240,_10n)*b10%P;const pow_p_5_8=pow2(b250,_2n)*x%P;return{pow_p_5_8:pow_p_5_8,b2:b2}}function uvRatio(u,v){const v3=mod(v*v*v);const v7=mod(v3*v3*v);const pow=pow_2_252_3(u*v7).pow_p_5_8;let x=mod(u*v3*pow);const vx2=mod(v*x*x);const root1=x;const root2=mod(x*SQRT_M1);const useRoot1=vx2===u;const useRoot2=vx2===mod(-u);const noRoot=vx2===mod(-u*SQRT_M1);if(useRoot1)x=root1;if(useRoot2||noRoot)x=root2;if(edIsNegative(x))x=mod(-x);return{isValid:useRoot1||useRoot2,value:x}}function invertSqrt(number){return uvRatio(_1n,number)}function modlLE(hash){return mod(bytesToNumberLE(hash),CURVE.l)}function equalBytes(b1,b2){if(b1.length!==b2.length){return false}for(let i=0;i<b1.length;i++){if(b1[i]!==b2[i]){return false}}return true}function ensureBytes(hex,expectedLength){const bytes=hex instanceof Uint8Array?Uint8Array.from(hex):hexToBytes(hex);if(typeof expectedLength==="number"&&bytes.length!==expectedLength)throw new Error(`Expected ${expectedLength} bytes`);return bytes}function normalizeScalar(num,max,strict=true){if(!max)throw new TypeError("Specify max value");if(typeof num==="number"&&Number.isSafeInteger(num))num=BigInt(num);if(typeof num==="bigint"&&num<max){if(strict){if(_0n<num)return num}else{if(_0n<=num)return num}}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function adjustBytes25519(bytes){bytes[0]&=248;bytes[31]&=127;bytes[31]|=64;return bytes}function decodeScalar25519(n){return bytesToNumberLE(adjustBytes25519(ensureBytes(n,32)))}function checkPrivateKey(key){key=typeof key==="bigint"||typeof key==="number"?numberTo32BytesBE(normalizeScalar(key,POW_2_256)):ensureBytes(key);if(key.length!==32)throw new Error(`Expected 32 bytes`);return key}function getKeyFromHash(hashed){const head=adjustBytes25519(hashed.slice(0,32));const prefix=hashed.slice(32,64);const scalar=modlLE(head);const point=Point.BASE.multiply(scalar);const pointBytes=point.toRawBytes();return{head:head,prefix:prefix,scalar:scalar,point:point,pointBytes:pointBytes}}let _sha512Sync;function sha512s(...m){if(typeof _sha512Sync!=="function")throw new Error("utils.sha512Sync must be set to use sync methods");return _sha512Sync(...m)}async function getExtendedPublicKey(key){return getKeyFromHash(await exports.utils.sha512(checkPrivateKey(key)))}function getExtendedPublicKeySync(key){return getKeyFromHash(sha512s(checkPrivateKey(key)))}async function getPublicKey(privateKey){return(await getExtendedPublicKey(privateKey)).pointBytes}exports.getPublicKey=getPublicKey;function getPublicKeySync(privateKey){return getExtendedPublicKeySync(privateKey).pointBytes}async function sign(message,privateKey){message=ensureBytes(message);const{prefix,scalar,pointBytes}=await getExtendedPublicKey(privateKey);const r=modlLE(await exports.utils.sha512(prefix,message));const R=Point.BASE.multiply(r);const k=modlLE(await exports.utils.sha512(R.toRawBytes(),pointBytes,message));const s=mod(r+k*scalar,CURVE.l);return new Signature(R,s).toRawBytes()}exports.sign=sign;function signSync(message,privateKey){message=ensureBytes(message);const{prefix,scalar,pointBytes}=getExtendedPublicKeySync(privateKey);const r=modlLE(sha512s(prefix,message));const R=Point.BASE.multiply(r);const k=modlLE(sha512s(R.toRawBytes(),pointBytes,message));const s=mod(r+k*scalar,CURVE.l);return new Signature(R,s).toRawBytes()}function prepareVerification(sig,message,publicKey){message=ensureBytes(message);if(!(publicKey instanceof Point))publicKey=Point.fromHex(publicKey,false);const{r,s}=sig instanceof Signature?sig.assertValidity():Signature.fromHex(sig);const SB=ExtendedPoint.BASE.multiplyUnsafe(s);return{r:r,s:s,SB:SB,pub:publicKey,msg:message}}function finishVerification(publicKey,r,SB,hashed){const k=modlLE(hashed);const kA=ExtendedPoint.fromAffine(publicKey).multiplyUnsafe(k);const RkA=ExtendedPoint.fromAffine(r).add(kA);return RkA.subtract(SB).multiplyUnsafe(CURVE.h).equals(ExtendedPoint.ZERO)}async function verify(sig,message,publicKey){const{r,SB,msg,pub}=prepareVerification(sig,message,publicKey);const hashed=await exports.utils.sha512(r.toRawBytes(),pub.toRawBytes(),msg);return finishVerification(pub,r,SB,hashed)}exports.verify=verify;function verifySync(sig,message,publicKey){const{r,SB,msg,pub}=prepareVerification(sig,message,publicKey);const hashed=sha512s(r.toRawBytes(),pub.toRawBytes(),msg);return finishVerification(pub,r,SB,hashed)}exports.sync={getExtendedPublicKey:getExtendedPublicKeySync,getPublicKey:getPublicKeySync,sign:signSync,verify:verifySync};async function getSharedSecret(privateKey,publicKey){const{head}=await getExtendedPublicKey(privateKey);const u=Point.fromHex(publicKey).toX25519();return exports.curve25519.scalarMult(head,u)}exports.getSharedSecret=getSharedSecret;Point.BASE._setWindowSize(8);function cswap(swap,x_2,x_3){const dummy=mod(swap*(x_2-x_3));x_2=mod(x_2-dummy);x_3=mod(x_3+dummy);return[x_2,x_3]}function montgomeryLadder(pointU,scalar){const{P}=CURVE;const u=normalizeScalar(pointU,P);const k=normalizeScalar(scalar,P);const a24=BigInt(121665);const x_1=u;let x_2=_1n;let z_2=_0n;let x_3=u;let z_3=_1n;let swap=_0n;let sw;for(let t=BigInt(255-1);t>=_0n;t--){const k_t=k>>t&_1n;swap^=k_t;sw=cswap(swap,x_2,x_3);x_2=sw[0];x_3=sw[1];sw=cswap(swap,z_2,z_3);z_2=sw[0];z_3=sw[1];swap=k_t;const A=x_2+z_2;const AA=mod(A*A);const B=x_2-z_2;const BB=mod(B*B);const E=AA-BB;const C=x_3+z_3;const D=x_3-z_3;const DA=mod(D*A);const CB=mod(C*B);const dacb=DA+CB;const da_cb=DA-CB;x_3=mod(dacb*dacb);z_3=mod(x_1*mod(da_cb*da_cb));x_2=mod(AA*BB);z_2=mod(E*(AA+mod(a24*E)))}sw=cswap(swap,x_2,x_3);x_2=sw[0];x_3=sw[1];sw=cswap(swap,z_2,z_3);z_2=sw[0];z_3=sw[1];const{pow_p_5_8,b2}=pow_2_252_3(z_2);const xp2=mod(pow2(pow_p_5_8,BigInt(3))*b2);return mod(x_2*xp2)}function encodeUCoordinate(u){return numberTo32BytesLE(mod(u,CURVE.P))}function decodeUCoordinate(uEnc){const u=ensureBytes(uEnc,32);u[31]&=127;return bytesToNumberLE(u)}exports.curve25519={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(privateKey,publicKey){const u=decodeUCoordinate(publicKey);const p=decodeScalar25519(privateKey);const pu=montgomeryLadder(u,p);if(pu===_0n)throw new Error("Invalid private or public key received");return encodeUCoordinate(pu)},scalarMultBase(privateKey){return exports.curve25519.scalarMult(privateKey,exports.curve25519.BASE_POINT_U)}};const crypto={node:nodeCrypto,web:typeof self==="object"&&"crypto"in self?self.crypto:undefined};exports.utils={bytesToHex:bytesToHex,hexToBytes:hexToBytes,concatBytes:concatBytes,getExtendedPublicKey:getExtendedPublicKey,mod:mod,invert:invert,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:hash=>{hash=ensureBytes(hash);if(hash.length<40||hash.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return mod(bytesToNumberLE(hash),CURVE.l-_1n)+_1n},randomBytes:(bytesLength=32)=>{if(crypto.web){return crypto.web.getRandomValues(new Uint8Array(bytesLength))}else if(crypto.node){const{randomBytes}=crypto.node;return new Uint8Array(randomBytes(bytesLength).buffer)}else{throw new Error("The environment doesn't have randomBytes function")}},randomPrivateKey:()=>{return exports.utils.randomBytes(32)},sha512:async(...messages)=>{const message=concatBytes(...messages);if(crypto.web){const buffer=await crypto.web.subtle.digest("SHA-512",message.buffer);return new Uint8Array(buffer)}else if(crypto.node){return Uint8Array.from(crypto.node.createHash("sha512").update(message).digest())}else{throw new Error("The environment doesn't have sha512 function")}},precompute(windowSize=8,point=Point.BASE){const cached=point.equals(Point.BASE)?point:new Point(point.x,point.y);cached._setWindowSize(windowSize);cached.multiply(_2n);return cached},sha512Sync:undefined};Object.defineProperties(exports.utils,{sha512Sync:{configurable:false,get(){return _sha512Sync},set(val){if(!_sha512Sync)_sha512Sync=val}}})},{crypto:226}],27:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.output=exports.exists=exports.hash=exports.bytes=exports.bool=exports.number=void 0;function number(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}exports.number=number;function bool(b){if(typeof b!=="boolean")throw new Error(`Expected boolean, not ${b}`)}exports.bool=bool;function bytes(b,...lengths){if(!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(lengths.length>0&&!lengths.includes(b.length))throw new TypeError(`Expected Uint8Array of length ${lengths}, not of length=${b.length}`)}exports.bytes=bytes;function hash(hash){if(typeof hash!=="function"||typeof hash.create!=="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number(hash.outputLen);number(hash.blockLen)}exports.hash=hash;function exists(instance,checkFinished=true){if(instance.destroyed)throw new Error("Hash instance has been destroyed");if(checkFinished&&instance.finished)throw new Error("Hash#digest() has already been called")}exports.exists=exists;function output(out,instance){bytes(out);const min=instance.outputLen;if(out.length<min){throw new Error(`digestInto() expects output buffer of length at least ${min}`)}}exports.output=output;const assert={number:number,bool:bool,bytes:bytes,hash:hash,exists:exists,output:output};exports.default=assert},{}],28:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SHA2=void 0;const _assert_js_1=require("./_assert.js");const utils_js_1=require("./utils.js");function setBigUint64(view,byteOffset,value,isLE){if(typeof view.setBigUint64==="function")return view.setBigUint64(byteOffset,value,isLE);const _32n=BigInt(32);const _u32_max=BigInt(4294967295);const wh=Number(value>>_32n&_u32_max);const wl=Number(value&_u32_max);const h=isLE?4:0;const l=isLE?0:4;view.setUint32(byteOffset+h,wh,isLE);view.setUint32(byteOffset+l,wl,isLE)}class SHA2 extends utils_js_1.Hash{constructor(blockLen,outputLen,padOffset,isLE){super();this.blockLen=blockLen;this.outputLen=outputLen;this.padOffset=padOffset;this.isLE=isLE;this.finished=false;this.length=0;this.pos=0;this.destroyed=false;this.buffer=new Uint8Array(blockLen);this.view=(0,utils_js_1.createView)(this.buffer)}update(data){_assert_js_1.default.exists(this);const{view,buffer,blockLen}=this;data=(0,utils_js_1.toBytes)(data);const len=data.length;for(let pos=0;pos<len;){const take=Math.min(blockLen-this.pos,len-pos);if(take===blockLen){const dataView=(0,utils_js_1.createView)(data);for(;blockLen<=len-pos;pos+=blockLen)this.process(dataView,pos);continue}buffer.set(data.subarray(pos,pos+take),this.pos);this.pos+=take;pos+=take;if(this.pos===blockLen){this.process(view,0);this.pos=0}}this.length+=data.length;this.roundClean();return this}digestInto(out){_assert_js_1.default.exists(this);_assert_js_1.default.output(out,this);this.finished=true;const{buffer,view,blockLen,isLE}=this;let{pos}=this;buffer[pos++]=128;this.buffer.subarray(pos).fill(0);if(this.padOffset>blockLen-pos){this.process(view,0);pos=0}for(let i=pos;i<blockLen;i++)buffer[i]=0;setBigUint64(view,blockLen-8,BigInt(this.length*8),isLE);this.process(view,0);const oview=(0,utils_js_1.createView)(out);const len=this.outputLen;if(len%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const outLen=len/4;const state=this.get();if(outLen>state.length)throw new Error("_sha2: outputLen bigger than state");for(let i=0;i<outLen;i++)oview.setUint32(4*i,state[i],isLE)}digest(){const{buffer,outputLen}=this;this.digestInto(buffer);const res=buffer.slice(0,outputLen);this.destroy();return res}_cloneInto(to){to||(to=new this.constructor);to.set(...this.get());const{blockLen,buffer,length,finished,destroyed,pos}=this;to.length=length;to.pos=pos;to.finished=finished;to.destroyed=destroyed;if(length%blockLen)to.buffer.set(buffer);return to}}exports.SHA2=SHA2},{"./_assert.js":27,"./utils.js":35}],29:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.add=exports.toBig=exports.split=exports.fromBig=void 0;const U32_MASK64=BigInt(2**32-1);const _32n=BigInt(32);function fromBig(n,le=false){if(le)return{h:Number(n&U32_MASK64),l:Number(n>>_32n&U32_MASK64)};return{h:Number(n>>_32n&U32_MASK64)|0,l:Number(n&U32_MASK64)|0}}exports.fromBig=fromBig;function split(lst,le=false){let Ah=new Uint32Array(lst.length);let Al=new Uint32Array(lst.length);for(let i=0;i<lst.length;i++){const{h,l}=fromBig(lst[i],le);[Ah[i],Al[i]]=[h,l]}return[Ah,Al]}exports.split=split;const toBig=(h,l)=>BigInt(h>>>0)<<_32n|BigInt(l>>>0);exports.toBig=toBig;const shrSH=(h,l,s)=>h>>>s;const shrSL=(h,l,s)=>h<<32-s|l>>>s;const rotrSH=(h,l,s)=>h>>>s|l<<32-s;const rotrSL=(h,l,s)=>h<<32-s|l>>>s;const rotrBH=(h,l,s)=>h<<64-s|l>>>s-32;const rotrBL=(h,l,s)=>h>>>s-32|l<<64-s;const rotr32H=(h,l)=>l;const rotr32L=(h,l)=>h;const rotlSH=(h,l,s)=>h<<s|l>>>32-s;const rotlSL=(h,l,s)=>l<<s|h>>>32-s;const rotlBH=(h,l,s)=>l<<s-32|h>>>64-s;const rotlBL=(h,l,s)=>h<<s-32|l>>>64-s;function add(Ah,Al,Bh,Bl){const l=(Al>>>0)+(Bl>>>0);return{h:Ah+Bh+(l/2**32|0)|0,l:l|0}}exports.add=add;const add3L=(Al,Bl,Cl)=>(Al>>>0)+(Bl>>>0)+(Cl>>>0);const add3H=(low,Ah,Bh,Ch)=>Ah+Bh+Ch+(low/2**32|0)|0;const add4L=(Al,Bl,Cl,Dl)=>(Al>>>0)+(Bl>>>0)+(Cl>>>0)+(Dl>>>0);const add4H=(low,Ah,Bh,Ch,Dh)=>Ah+Bh+Ch+Dh+(low/2**32|0)|0;const add5L=(Al,Bl,Cl,Dl,El)=>(Al>>>0)+(Bl>>>0)+(Cl>>>0)+(Dl>>>0)+(El>>>0);const add5H=(low,Ah,Bh,Ch,Dh,Eh)=>Ah+Bh+Ch+Dh+Eh+(low/2**32|0)|0;const u64={fromBig:fromBig,split:split,toBig:exports.toBig,shrSH:shrSH,shrSL:shrSL,rotrSH:rotrSH,rotrSL:rotrSL,rotrBH:rotrBH,rotrBL:rotrBL,rotr32H:rotr32H,rotr32L:rotr32L,rotlSH:rotlSH,rotlSL:rotlSL,rotlBH:rotlBH,rotlBL:rotlBL,add:add,add3L:add3L,add3H:add3H,add4L:add4L,add4H:add4H,add5H:add5H,add5L:add5L};exports.default=u64},{}],30:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.crypto=void 0;exports.crypto=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:undefined},{}],31:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hmac=void 0;const _assert_js_1=require("./_assert.js");const utils_js_1=require("./utils.js");class HMAC extends utils_js_1.Hash{constructor(hash,_key){super();this.finished=false;this.destroyed=false;_assert_js_1.default.hash(hash);const key=(0,utils_js_1.toBytes)(_key);this.iHash=hash.create();if(typeof this.iHash.update!=="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const blockLen=this.blockLen;const pad=new Uint8Array(blockLen);pad.set(key.length>blockLen?hash.create().update(key).digest():key);for(let i=0;i<pad.length;i++)pad[i]^=54;this.iHash.update(pad);this.oHash=hash.create();for(let i=0;i<pad.length;i++)pad[i]^=54^92;this.oHash.update(pad);pad.fill(0)}update(buf){_assert_js_1.default.exists(this);this.iHash.update(buf);return this}digestInto(out){_assert_js_1.default.exists(this);_assert_js_1.default.bytes(out,this.outputLen);this.finished=true;this.iHash.digestInto(out);this.oHash.update(out);this.oHash.digestInto(out);this.destroy()}digest(){const out=new Uint8Array(this.oHash.outputLen);this.digestInto(out);return out}_cloneInto(to){to||(to=Object.create(Object.getPrototypeOf(this),{}));const{oHash,iHash,finished,destroyed,blockLen,outputLen}=this;to=to;to.finished=finished;to.destroyed=destroyed;to.blockLen=blockLen;to.outputLen=outputLen;to.oHash=oHash._cloneInto(to.oHash);to.iHash=iHash._cloneInto(to.iHash);return to}destroy(){this.destroyed=true;this.oHash.destroy();this.iHash.destroy()}}const hmac=(hash,key,message)=>new HMAC(hash,key).update(message).digest();exports.hmac=hmac;exports.hmac.create=(hash,key)=>new HMAC(hash,key)},{"./_assert.js":27,"./utils.js":35}],32:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sha224=exports.sha256=void 0;const _sha2_js_1=require("./_sha2.js");const utils_js_1=require("./utils.js");const Chi=(a,b,c)=>a&b^~a&c;const Maj=(a,b,c)=>a&b^a&c^b&c;const SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);const IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);const SHA256_W=new Uint32Array(64);class SHA256 extends _sha2_js_1.SHA2{constructor(){super(64,32,8,false);this.A=IV[0]|0;this.B=IV[1]|0;this.C=IV[2]|0;this.D=IV[3]|0;this.E=IV[4]|0;this.F=IV[5]|0;this.G=IV[6]|0;this.H=IV[7]|0}get(){const{A,B,C,D,E,F,G,H}=this;return[A,B,C,D,E,F,G,H]}set(A,B,C,D,E,F,G,H){this.A=A|0;this.B=B|0;this.C=C|0;this.D=D|0;this.E=E|0;this.F=F|0;this.G=G|0;this.H=H|0}process(view,offset){for(let i=0;i<16;i++,offset+=4)SHA256_W[i]=view.getUint32(offset,false);for(let i=16;i<64;i++){const W15=SHA256_W[i-15];const W2=SHA256_W[i-2];const s0=(0,utils_js_1.rotr)(W15,7)^(0,utils_js_1.rotr)(W15,18)^W15>>>3;const s1=(0,utils_js_1.rotr)(W2,17)^(0,utils_js_1.rotr)(W2,19)^W2>>>10;SHA256_W[i]=s1+SHA256_W[i-7]+s0+SHA256_W[i-16]|0}let{A,B,C,D,E,F,G,H}=this;for(let i=0;i<64;i++){const sigma1=(0,utils_js_1.rotr)(E,6)^(0,utils_js_1.rotr)(E,11)^(0,utils_js_1.rotr)(E,25);const T1=H+sigma1+Chi(E,F,G)+SHA256_K[i]+SHA256_W[i]|0;const sigma0=(0,utils_js_1.rotr)(A,2)^(0,utils_js_1.rotr)(A,13)^(0,utils_js_1.rotr)(A,22);const T2=sigma0+Maj(A,B,C)|0;H=G;G=F;F=E;E=D+T1|0;D=C;C=B;B=A;A=T1+T2|0}A=A+this.A|0;B=B+this.B|0;C=C+this.C|0;D=D+this.D|0;E=E+this.E|0;F=F+this.F|0;G=G+this.G|0;H=H+this.H|0;this.set(A,B,C,D,E,F,G,H)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0);this.buffer.fill(0)}}class SHA224 extends SHA256{constructor(){super();this.A=3238371032|0;this.B=914150663|0;this.C=812702999|0;this.D=4144912697|0;this.E=4290775857|0;this.F=1750603025|0;this.G=1694076839|0;this.H=3204075428|0;this.outputLen=28}}exports.sha256=(0,utils_js_1.wrapConstructor)(()=>new SHA256);exports.sha224=(0,utils_js_1.wrapConstructor)(()=>new SHA224)},{"./_sha2.js":28,"./utils.js":35}],33:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shake256=exports.shake128=exports.keccak_512=exports.keccak_384=exports.keccak_256=exports.keccak_224=exports.sha3_512=exports.sha3_384=exports.sha3_256=exports.sha3_224=exports.Keccak=exports.keccakP=void 0;const _assert_js_1=require("./_assert.js");const _u64_js_1=require("./_u64.js");const utils_js_1=require("./utils.js");const[SHA3_PI,SHA3_ROTL,_SHA3_IOTA]=[[],[],[]];const _0n=BigInt(0);const _1n=BigInt(1);const _2n=BigInt(2);const _7n=BigInt(7);const _256n=BigInt(256);const _0x71n=BigInt(113);for(let round=0,R=_1n,x=1,y=0;round<24;round++){[x,y]=[y,(2*x+3*y)%5];SHA3_PI.push(2*(5*y+x));SHA3_ROTL.push((round+1)*(round+2)/2%64);let t=_0n;for(let j=0;j<7;j++){R=(R<<_1n^(R>>_7n)*_0x71n)%_256n;if(R&_2n)t^=_1n<<(_1n<<BigInt(j))-_1n}_SHA3_IOTA.push(t)}const[SHA3_IOTA_H,SHA3_IOTA_L]=_u64_js_1.default.split(_SHA3_IOTA,true);const rotlH=(h,l,s)=>s>32?_u64_js_1.default.rotlBH(h,l,s):_u64_js_1.default.rotlSH(h,l,s);const rotlL=(h,l,s)=>s>32?_u64_js_1.default.rotlBL(h,l,s):_u64_js_1.default.rotlSL(h,l,s);function keccakP(s,rounds=24){const B=new Uint32Array(5*2);for(let round=24-rounds;round<24;round++){for(let x=0;x<10;x++)B[x]=s[x]^s[x+10]^s[x+20]^s[x+30]^s[x+40];for(let x=0;x<10;x+=2){const idx1=(x+8)%10;const idx0=(x+2)%10;const B0=B[idx0];const B1=B[idx0+1];const Th=rotlH(B0,B1,1)^B[idx1];const Tl=rotlL(B0,B1,1)^B[idx1+1];for(let y=0;y<50;y+=10){s[x+y]^=Th;s[x+y+1]^=Tl}}let curH=s[2];let curL=s[3];for(let t=0;t<24;t++){const shift=SHA3_ROTL[t];const Th=rotlH(curH,curL,shift);const Tl=rotlL(curH,curL,shift);const PI=SHA3_PI[t];curH=s[PI];curL=s[PI+1];s[PI]=Th;s[PI+1]=Tl}for(let y=0;y<50;y+=10){for(let x=0;x<10;x++)B[x]=s[y+x];for(let x=0;x<10;x++)s[y+x]^=~B[(x+2)%10]&B[(x+4)%10]}s[0]^=SHA3_IOTA_H[round];s[1]^=SHA3_IOTA_L[round]}B.fill(0)}exports.keccakP=keccakP;class Keccak extends utils_js_1.Hash{constructor(blockLen,suffix,outputLen,enableXOF=false,rounds=24){super();this.blockLen=blockLen;this.suffix=suffix;this.outputLen=outputLen;this.enableXOF=enableXOF;this.rounds=rounds;this.pos=0;this.posOut=0;this.finished=false;this.destroyed=false;_assert_js_1.default.number(outputLen);if(0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200);this.state32=(0,utils_js_1.u32)(this.state)}keccak(){keccakP(this.state32,this.rounds);this.posOut=0;this.pos=0}update(data){_assert_js_1.default.exists(this);const{blockLen,state}=this;data=(0,utils_js_1.toBytes)(data);const len=data.length;for(let pos=0;pos<len;){const take=Math.min(blockLen-this.pos,len-pos);for(let i=0;i<take;i++)state[this.pos++]^=data[pos++];if(this.pos===blockLen)this.keccak()}return this}finish(){if(this.finished)return;this.finished=true;const{state,suffix,pos,blockLen}=this;state[pos]^=suffix;if((suffix&128)!==0&&pos===blockLen-1)this.keccak();state[blockLen-1]^=128;this.keccak()}writeInto(out){_assert_js_1.default.exists(this,false);_assert_js_1.default.bytes(out);this.finish();const bufferOut=this.state;const{blockLen}=this;for(let pos=0,len=out.length;pos<len;){if(this.posOut>=blockLen)this.keccak();const take=Math.min(blockLen-this.posOut,len-pos);out.set(bufferOut.subarray(this.posOut,this.posOut+take),pos);this.posOut+=take;pos+=take}return out}xofInto(out){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(out)}xof(bytes){_assert_js_1.default.number(bytes);return this.xofInto(new Uint8Array(bytes))}digestInto(out){_assert_js_1.default.output(out,this);if(this.finished)throw new Error("digest() was already called");this.writeInto(out);this.destroy();return out}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=true;this.state.fill(0)}_cloneInto(to){const{blockLen,suffix,outputLen,rounds,enableXOF}=this;to||(to=new Keccak(blockLen,suffix,outputLen,enableXOF,rounds));to.state32.set(this.state32);to.pos=this.pos;to.posOut=this.posOut;to.finished=this.finished;to.rounds=rounds;to.suffix=suffix;to.outputLen=outputLen;to.enableXOF=enableXOF;to.destroyed=this.destroyed;return to}}exports.Keccak=Keccak;const gen=(suffix,blockLen,outputLen)=>(0,utils_js_1.wrapConstructor)(()=>new Keccak(blockLen,suffix,outputLen));exports.sha3_224=gen(6,144,224/8);exports.sha3_256=gen(6,136,256/8);exports.sha3_384=gen(6,104,384/8);exports.sha3_512=gen(6,72,512/8);exports.keccak_224=gen(1,144,224/8);exports.keccak_256=gen(1,136,256/8);exports.keccak_384=gen(1,104,384/8);exports.keccak_512=gen(1,72,512/8);const genShake=(suffix,blockLen,outputLen)=>(0,utils_js_1.wrapConstructorWithOpts)((opts={})=>new Keccak(blockLen,suffix,opts.dkLen===undefined?outputLen:opts.dkLen,true));exports.shake128=genShake(31,168,128/8);exports.shake256=genShake(31,136,256/8)},{"./_assert.js":27,"./_u64.js":29,"./utils.js":35}],34:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sha384=exports.sha512_256=exports.sha512_224=exports.sha512=exports.SHA512=void 0;const _sha2_js_1=require("./_sha2.js");const _u64_js_1=require("./_u64.js");const utils_js_1=require("./utils.js");const[SHA512_Kh,SHA512_Kl]=_u64_js_1.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n)));const SHA512_W_H=new Uint32Array(80);const SHA512_W_L=new Uint32Array(80);class SHA512 extends _sha2_js_1.SHA2{constructor(){super(128,64,16,false);this.Ah=1779033703|0;this.Al=4089235720|0;this.Bh=3144134277|0;this.Bl=2227873595|0;this.Ch=1013904242|0;this.Cl=4271175723|0;this.Dh=2773480762|0;this.Dl=1595750129|0;this.Eh=1359893119|0;this.El=2917565137|0;this.Fh=2600822924|0;this.Fl=725511199|0;this.Gh=528734635|0;this.Gl=4215389547|0;this.Hh=1541459225|0;this.Hl=327033209|0}get(){const{Ah,Al,Bh,Bl,Ch,Cl,Dh,Dl,Eh,El,Fh,Fl,Gh,Gl,Hh,Hl}=this;return[Ah,Al,Bh,Bl,Ch,Cl,Dh,Dl,Eh,El,Fh,Fl,Gh,Gl,Hh,Hl]}set(Ah,Al,Bh,Bl,Ch,Cl,Dh,Dl,Eh,El,Fh,Fl,Gh,Gl,Hh,Hl){this.Ah=Ah|0;this.Al=Al|0;this.Bh=Bh|0;this.Bl=Bl|0;this.Ch=Ch|0;this.Cl=Cl|0;this.Dh=Dh|0;this.Dl=Dl|0;this.Eh=Eh|0;this.El=El|0;this.Fh=Fh|0;this.Fl=Fl|0;this.Gh=Gh|0;this.Gl=Gl|0;this.Hh=Hh|0;this.Hl=Hl|0}process(view,offset){for(let i=0;i<16;i++,offset+=4){SHA512_W_H[i]=view.getUint32(offset);SHA512_W_L[i]=view.getUint32(offset+=4)}for(let i=16;i<80;i++){const W15h=SHA512_W_H[i-15]|0;const W15l=SHA512_W_L[i-15]|0;const s0h=_u64_js_1.default.rotrSH(W15h,W15l,1)^_u64_js_1.default.rotrSH(W15h,W15l,8)^_u64_js_1.default.shrSH(W15h,W15l,7);const s0l=_u64_js_1.default.rotrSL(W15h,W15l,1)^_u64_js_1.default.rotrSL(W15h,W15l,8)^_u64_js_1.default.shrSL(W15h,W15l,7);const W2h=SHA512_W_H[i-2]|0;const W2l=SHA512_W_L[i-2]|0;const s1h=_u64_js_1.default.rotrSH(W2h,W2l,19)^_u64_js_1.default.rotrBH(W2h,W2l,61)^_u64_js_1.default.shrSH(W2h,W2l,6);const s1l=_u64_js_1.default.rotrSL(W2h,W2l,19)^_u64_js_1.default.rotrBL(W2h,W2l,61)^_u64_js_1.default.shrSL(W2h,W2l,6);const SUMl=_u64_js_1.default.add4L(s0l,s1l,SHA512_W_L[i-7],SHA512_W_L[i-16]);const SUMh=_u64_js_1.default.add4H(SUMl,s0h,s1h,SHA512_W_H[i-7],SHA512_W_H[i-16]);SHA512_W_H[i]=SUMh|0;SHA512_W_L[i]=SUMl|0}let{Ah,Al,Bh,Bl,Ch,Cl,Dh,Dl,Eh,El,Fh,Fl,Gh,Gl,Hh,Hl}=this;for(let i=0;i<80;i++){const sigma1h=_u64_js_1.default.rotrSH(Eh,El,14)^_u64_js_1.default.rotrSH(Eh,El,18)^_u64_js_1.default.rotrBH(Eh,El,41);const sigma1l=_u64_js_1.default.rotrSL(Eh,El,14)^_u64_js_1.default.rotrSL(Eh,El,18)^_u64_js_1.default.rotrBL(Eh,El,41);const CHIh=Eh&Fh^~Eh&Gh;const CHIl=El&Fl^~El&Gl;const T1ll=_u64_js_1.default.add5L(Hl,sigma1l,CHIl,SHA512_Kl[i],SHA512_W_L[i]);const T1h=_u64_js_1.default.add5H(T1ll,Hh,sigma1h,CHIh,SHA512_Kh[i],SHA512_W_H[i]);const T1l=T1ll|0;const sigma0h=_u64_js_1.default.rotrSH(Ah,Al,28)^_u64_js_1.default.rotrBH(Ah,Al,34)^_u64_js_1.default.rotrBH(Ah,Al,39);const sigma0l=_u64_js_1.default.rotrSL(Ah,Al,28)^_u64_js_1.default.rotrBL(Ah,Al,34)^_u64_js_1.default.rotrBL(Ah,Al,39);const MAJh=Ah&Bh^Ah&Ch^Bh&Ch;const MAJl=Al&Bl^Al&Cl^Bl&Cl;Hh=Gh|0;Hl=Gl|0;Gh=Fh|0;Gl=Fl|0;Fh=Eh|0;Fl=El|0;({h:Eh,l:El}=_u64_js_1.default.add(Dh|0,Dl|0,T1h|0,T1l|0));Dh=Ch|0;Dl=Cl|0;Ch=Bh|0;Cl=Bl|0;Bh=Ah|0;Bl=Al|0;const All=_u64_js_1.default.add3L(T1l,sigma0l,MAJl);Ah=_u64_js_1.default.add3H(All,T1h,sigma0h,MAJh);Al=All|0}({h:Ah,l:Al}=_u64_js_1.default.add(this.Ah|0,this.Al|0,Ah|0,Al|0));({h:Bh,l:Bl}=_u64_js_1.default.add(this.Bh|0,this.Bl|0,Bh|0,Bl|0));({h:Ch,l:Cl}=_u64_js_1.default.add(this.Ch|0,this.Cl|0,Ch|0,Cl|0));({h:Dh,l:Dl}=_u64_js_1.default.add(this.Dh|0,this.Dl|0,Dh|0,Dl|0));({h:Eh,l:El}=_u64_js_1.default.add(this.Eh|0,this.El|0,Eh|0,El|0));({h:Fh,l:Fl}=_u64_js_1.default.add(this.Fh|0,this.Fl|0,Fh|0,Fl|0));({h:Gh,l:Gl}=_u64_js_1.default.add(this.Gh|0,this.Gl|0,Gh|0,Gl|0));({h:Hh,l:Hl}=_u64_js_1.default.add(this.Hh|0,this.Hl|0,Hh|0,Hl|0));this.set(Ah,Al,Bh,Bl,Ch,Cl,Dh,Dl,Eh,El,Fh,Fl,Gh,Gl,Hh,Hl)}roundClean(){SHA512_W_H.fill(0);SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0);this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}exports.SHA512=SHA512;class SHA512_224 extends SHA512{constructor(){super();this.Ah=2352822216|0;this.Al=424955298|0;this.Bh=1944164710|0;this.Bl=2312950998|0;this.Ch=502970286|0;this.Cl=855612546|0;this.Dh=1738396948|0;this.Dl=1479516111|0;this.Eh=258812777|0;this.El=2077511080|0;this.Fh=2011393907|0;this.Fl=79989058|0;this.Gh=1067287976|0;this.Gl=1780299464|0;this.Hh=286451373|0;this.Hl=2446758561|0;this.outputLen=28}}class SHA512_256 extends SHA512{constructor(){super();this.Ah=573645204|0;this.Al=4230739756|0;this.Bh=2673172387|0;this.Bl=3360449730|0;this.Ch=596883563|0;this.Cl=1867755857|0;this.Dh=2520282905|0;this.Dl=1497426621|0;this.Eh=2519219938|0;this.El=2827943907|0;this.Fh=3193839141|0;this.Fl=1401305490|0;this.Gh=721525244|0;this.Gl=746961066|0;this.Hh=246885852|0;this.Hl=2177182882|0;this.outputLen=32}}class SHA384 extends SHA512{constructor(){super();this.Ah=3418070365|0;this.Al=3238371032|0;this.Bh=1654270250|0;this.Bl=914150663|0;this.Ch=2438529370|0;this.Cl=812702999|0;this.Dh=355462360|0;this.Dl=4144912697|0;this.Eh=1731405415|0;this.El=4290775857|0;this.Fh=2394180231|0;this.Fl=1750603025|0;this.Gh=3675008525|0;this.Gl=1694076839|0;this.Hh=1203062813|0;this.Hl=3204075428|0;this.outputLen=48}}exports.sha512=(0,utils_js_1.wrapConstructor)(()=>new SHA512);exports.sha512_224=(0,utils_js_1.wrapConstructor)(()=>new SHA512_224);exports.sha512_256=(0,utils_js_1.wrapConstructor)(()=>new SHA512_256);exports.sha384=(0,utils_js_1.wrapConstructor)(()=>new SHA384)},{"./_sha2.js":28,"./_u64.js":29,"./utils.js":35}],35:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.randomBytes=exports.wrapConstructorWithOpts=exports.wrapConstructor=exports.checkOpts=exports.Hash=exports.concatBytes=exports.toBytes=exports.utf8ToBytes=exports.asyncLoop=exports.nextTick=exports.hexToBytes=exports.bytesToHex=exports.isLE=exports.rotr=exports.createView=exports.u32=exports.u8=void 0;const crypto_1=require("@noble/hashes/crypto");const u8=arr=>new Uint8Array(arr.buffer,arr.byteOffset,arr.byteLength);exports.u8=u8;const u32=arr=>new Uint32Array(arr.buffer,arr.byteOffset,Math.floor(arr.byteLength/4));exports.u32=u32;const createView=arr=>new DataView(arr.buffer,arr.byteOffset,arr.byteLength);exports.createView=createView;const rotr=(word,shift)=>word<<32-shift|word>>>shift;exports.rotr=rotr;exports.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!exports.isLE)throw new Error("Non little-endian hardware is not supported");const hexes=Array.from({length:256},(v,i)=>i.toString(16).padStart(2,"0"));function bytesToHex(uint8a){if(!(uint8a instanceof Uint8Array))throw new Error("Uint8Array expected");let hex="";for(let i=0;i<uint8a.length;i++){hex+=hexes[uint8a[i]]}return hex}exports.bytesToHex=bytesToHex;function hexToBytes(hex){if(typeof hex!=="string"){throw new TypeError("hexToBytes: expected string, got "+typeof hex)}if(hex.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const array=new Uint8Array(hex.length/2);for(let i=0;i<array.length;i++){const j=i*2;const hexByte=hex.slice(j,j+2);const byte=Number.parseInt(hexByte,16);if(Number.isNaN(byte)||byte<0)throw new Error("Invalid byte sequence");array[i]=byte}return array}exports.hexToBytes=hexToBytes;const nextTick=async()=>{};exports.nextTick=nextTick;async function asyncLoop(iters,tick,cb){let ts=Date.now();for(let i=0;i<iters;i++){cb(i);const diff=Date.now()-ts;if(diff>=0&&diff<tick)continue;await(0,exports.nextTick)();ts+=diff}}exports.asyncLoop=asyncLoop;function utf8ToBytes(str){if(typeof str!=="string"){throw new TypeError(`utf8ToBytes expected string, got ${typeof str}`)}return(new TextEncoder).encode(str)}exports.utf8ToBytes=utf8ToBytes;function toBytes(data){if(typeof data==="string")data=utf8ToBytes(data);if(!(data instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof data})`);return data}exports.toBytes=toBytes;function concatBytes(...arrays){if(!arrays.every(a=>a instanceof Uint8Array))throw new Error("Uint8Array list expected");if(arrays.length===1)return arrays[0];const length=arrays.reduce((a,arr)=>a+arr.length,0);const result=new Uint8Array(length);for(let i=0,pad=0;i<arrays.length;i++){const arr=arrays[i];result.set(arr,pad);pad+=arr.length}return result}exports.concatBytes=concatBytes;class Hash{clone(){return this._cloneInto()}}exports.Hash=Hash;const isPlainObject=obj=>Object.prototype.toString.call(obj)==="[object Object]"&&obj.constructor===Object;function checkOpts(defaults,opts){if(opts!==undefined&&(typeof opts!=="object"||!isPlainObject(opts)))throw new TypeError("Options should be object or undefined");const merged=Object.assign(defaults,opts);return merged}exports.checkOpts=checkOpts;function wrapConstructor(hashConstructor){const hashC=message=>hashConstructor().update(toBytes(message)).digest();const tmp=hashConstructor();hashC.outputLen=tmp.outputLen;hashC.blockLen=tmp.blockLen;hashC.create=()=>hashConstructor();return hashC}exports.wrapConstructor=wrapConstructor;function wrapConstructorWithOpts(hashCons){const hashC=(msg,opts)=>hashCons(opts).update(toBytes(msg)).digest();const tmp=hashCons({});hashC.outputLen=tmp.outputLen;hashC.blockLen=tmp.blockLen;hashC.create=opts=>hashCons(opts);return hashC}exports.wrapConstructorWithOpts=wrapConstructorWithOpts;function randomBytes(bytesLength=32){if(crypto_1.crypto&&typeof crypto_1.crypto.getRandomValues==="function"){return crypto_1.crypto.getRandomValues(new Uint8Array(bytesLength))}throw new Error("crypto.getRandomValues must be defined")}exports.randomBytes=randomBytes},{"@noble/hashes/crypto":30}],36:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.utils=exports.schnorr=exports.verify=exports.signSync=exports.sign=exports.getSharedSecret=exports.recoverPublicKey=exports.getPublicKey=exports.Signature=exports.Point=exports.CURVE=void 0;const nodeCrypto=require("crypto");const _0n=BigInt(0);const _1n=BigInt(1);const _2n=BigInt(2);const _3n=BigInt(3);const _8n=BigInt(8);const CURVE=Object.freeze({a:_0n,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:_1n,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});exports.CURVE=CURVE;const divNearest=(a,b)=>(a+b/_2n)/b;const endo={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(k){const{n}=CURVE;const a1=BigInt("0x3086d221a7d46bcde86c90e49284eb15");const b1=-_1n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3");const a2=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8");const b2=a1;const POW_2_128=BigInt("0x100000000000000000000000000000000");const c1=divNearest(b2*k,n);const c2=divNearest(-b1*k,n);let k1=mod(k-c1*a1-c2*a2,n);let k2=mod(-c1*b1-c2*b2,n);const k1neg=k1>POW_2_128;const k2neg=k2>POW_2_128;if(k1neg)k1=n-k1;if(k2neg)k2=n-k2;if(k1>POW_2_128||k2>POW_2_128){throw new Error("splitScalarEndo: Endomorphism failed, k="+k)}return{k1neg:k1neg,k1:k1,k2neg:k2neg,k2:k2}}};const fieldLen=32;const groupLen=32;const hashLen=32;const compressedLen=fieldLen+1;const uncompressedLen=2*fieldLen+1;function weierstrass(x){const{a,b}=CURVE;const x2=mod(x*x);const x3=mod(x2*x);return mod(x3+a*x+b)}const USE_ENDOMORPHISM=CURVE.a===_0n;class ShaError extends Error{constructor(message){super(message)}}function assertJacPoint(other){if(!(other instanceof JacobianPoint))throw new TypeError("JacobianPoint expected")}class JacobianPoint{constructor(x,y,z){this.x=x;this.y=y;this.z=z}static fromAffine(p){if(!(p instanceof Point)){throw new TypeError("JacobianPoint#fromAffine: expected Point")}if(p.equals(Point.ZERO))return JacobianPoint.ZERO;return new JacobianPoint(p.x,p.y,_1n)}static toAffineBatch(points){const toInv=invertBatch(points.map(p=>p.z));return points.map((p,i)=>p.toAffine(toInv[i]))}static normalizeZ(points){return JacobianPoint.toAffineBatch(points).map(JacobianPoint.fromAffine)}equals(other){assertJacPoint(other);const{x:X1,y:Y1,z:Z1}=this;const{x:X2,y:Y2,z:Z2}=other;const Z1Z1=mod(Z1*Z1);const Z2Z2=mod(Z2*Z2);const U1=mod(X1*Z2Z2);const U2=mod(X2*Z1Z1);const S1=mod(mod(Y1*Z2)*Z2Z2);const S2=mod(mod(Y2*Z1)*Z1Z1);return U1===U2&&S1===S2}negate(){return new JacobianPoint(this.x,mod(-this.y),this.z)}double(){const{x:X1,y:Y1,z:Z1}=this;const A=mod(X1*X1);const B=mod(Y1*Y1);const C=mod(B*B);const x1b=X1+B;const D=mod(_2n*(mod(x1b*x1b)-A-C));const E=mod(_3n*A);const F=mod(E*E);const X3=mod(F-_2n*D);const Y3=mod(E*(D-X3)-_8n*C);const Z3=mod(_2n*Y1*Z1);return new JacobianPoint(X3,Y3,Z3)}add(other){assertJacPoint(other);const{x:X1,y:Y1,z:Z1}=this;const{x:X2,y:Y2,z:Z2}=other;if(X2===_0n||Y2===_0n)return this;if(X1===_0n||Y1===_0n)return other;const Z1Z1=mod(Z1*Z1);const Z2Z2=mod(Z2*Z2);const U1=mod(X1*Z2Z2);const U2=mod(X2*Z1Z1);const S1=mod(mod(Y1*Z2)*Z2Z2);const S2=mod(mod(Y2*Z1)*Z1Z1);const H=mod(U2-U1);const r=mod(S2-S1);if(H===_0n){if(r===_0n){return this.double()}else{return JacobianPoint.ZERO}}const HH=mod(H*H);const HHH=mod(H*HH);const V=mod(U1*HH);const X3=mod(r*r-HHH-_2n*V);const Y3=mod(r*(V-X3)-S1*HHH);const Z3=mod(Z1*Z2*H);return new JacobianPoint(X3,Y3,Z3)}subtract(other){return this.add(other.negate())}multiplyUnsafe(scalar){const P0=JacobianPoint.ZERO;if(typeof scalar==="bigint"&&scalar===_0n)return P0;let n=normalizeScalar(scalar);if(n===_1n)return this;if(!USE_ENDOMORPHISM){let p=P0;let d=this;while(n>_0n){if(n&_1n)p=p.add(d);d=d.double();n>>=_1n}return p}let{k1neg,k1,k2neg,k2}=endo.splitScalar(n);let k1p=P0;let k2p=P0;let d=this;while(k1>_0n||k2>_0n){if(k1&_1n)k1p=k1p.add(d);if(k2&_1n)k2p=k2p.add(d);d=d.double();k1>>=_1n;k2>>=_1n}if(k1neg)k1p=k1p.negate();if(k2neg)k2p=k2p.negate();k2p=new JacobianPoint(mod(k2p.x*endo.beta),k2p.y,k2p.z);return k1p.add(k2p)}precomputeWindow(W){const windows=USE_ENDOMORPHISM?128/W+1:256/W+1;const points=[];let p=this;let base=p;for(let window=0;window<windows;window++){base=p;points.push(base);for(let i=1;i<2**(W-1);i++){base=base.add(p);points.push(base)}p=base.double()}return points}wNAF(n,affinePoint){if(!affinePoint&&this.equals(JacobianPoint.BASE))affinePoint=Point.BASE;const W=affinePoint&&affinePoint._WINDOW_SIZE||1;if(256%W){throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2")}let precomputes=affinePoint&&pointPrecomputes.get(affinePoint);if(!precomputes){precomputes=this.precomputeWindow(W);if(affinePoint&&W!==1){precomputes=JacobianPoint.normalizeZ(precomputes);pointPrecomputes.set(affinePoint,precomputes)}}let p=JacobianPoint.ZERO;let f=JacobianPoint.BASE;const windows=1+(USE_ENDOMORPHISM?128/W:256/W);const windowSize=2**(W-1);const mask=BigInt(2**W-1);const maxNumber=2**W;const shiftBy=BigInt(W);for(let window=0;window<windows;window++){const offset=window*windowSize;let wbits=Number(n&mask);n>>=shiftBy;if(wbits>windowSize){wbits-=maxNumber;n+=_1n}const offset1=offset;const offset2=offset+Math.abs(wbits)-1;const cond1=window%2!==0;const cond2=wbits<0;if(wbits===0){f=f.add(constTimeNegate(cond1,precomputes[offset1]))}else{p=p.add(constTimeNegate(cond2,precomputes[offset2]))}}return{p:p,f:f}}multiply(scalar,affinePoint){let n=normalizeScalar(scalar);let point;let fake;if(USE_ENDOMORPHISM){const{k1neg,k1,k2neg,k2}=endo.splitScalar(n);let{p:k1p,f:f1p}=this.wNAF(k1,affinePoint);let{p:k2p,f:f2p}=this.wNAF(k2,affinePoint);k1p=constTimeNegate(k1neg,k1p);k2p=constTimeNegate(k2neg,k2p);k2p=new JacobianPoint(mod(k2p.x*endo.beta),k2p.y,k2p.z);point=k1p.add(k2p);fake=f1p.add(f2p)}else{const{p,f}=this.wNAF(n,affinePoint);point=p;fake=f}return JacobianPoint.normalizeZ([point,fake])[0]}toAffine(invZ){const{x,y,z}=this;const is0=this.equals(JacobianPoint.ZERO);if(invZ==null)invZ=is0?_8n:invert(z);const iz1=invZ;const iz2=mod(iz1*iz1);const iz3=mod(iz2*iz1);const ax=mod(x*iz2);const ay=mod(y*iz3);const zz=mod(z*iz1);if(is0)return Point.ZERO;if(zz!==_1n)throw new Error("invZ was invalid");return new Point(ax,ay)}}JacobianPoint.BASE=new JacobianPoint(CURVE.Gx,CURVE.Gy,_1n);JacobianPoint.ZERO=new JacobianPoint(_0n,_1n,_0n);function constTimeNegate(condition,item){const neg=item.negate();return condition?neg:item}const pointPrecomputes=new WeakMap;class Point{constructor(x,y){this.x=x;this.y=y}_setWindowSize(windowSize){this._WINDOW_SIZE=windowSize;pointPrecomputes.delete(this)}hasEvenY(){return this.y%_2n===_0n}static fromCompressedHex(bytes){const isShort=bytes.length===32;const x=bytesToNumber(isShort?bytes:bytes.subarray(1));if(!isValidFieldElement(x))throw new Error("Point is not on curve");const y2=weierstrass(x);let y=sqrtMod(y2);const isYOdd=(y&_1n)===_1n;if(isShort){if(isYOdd)y=mod(-y)}else{const isFirstByteOdd=(bytes[0]&1)===1;if(isFirstByteOdd!==isYOdd)y=mod(-y)}const point=new Point(x,y);point.assertValidity();return point}static fromUncompressedHex(bytes){const x=bytesToNumber(bytes.subarray(1,fieldLen+1));const y=bytesToNumber(bytes.subarray(fieldLen+1,fieldLen*2+1));const point=new Point(x,y);point.assertValidity();return point}static fromHex(hex){const bytes=ensureBytes(hex);const len=bytes.length;const header=bytes[0];if(len===fieldLen)return this.fromCompressedHex(bytes);if(len===compressedLen&&(header===2||header===3)){return this.fromCompressedHex(bytes)}if(len===uncompressedLen&&header===4)return this.fromUncompressedHex(bytes);throw new Error(`Point.fromHex: received invalid point. Expected 32-${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes, not ${len}`)}static fromPrivateKey(privateKey){return Point.BASE.multiply(normalizePrivateKey(privateKey))}static fromSignature(msgHash,signature,recovery){const{r,s}=normalizeSignature(signature);if(![0,1,2,3].includes(recovery))throw new Error("Cannot recover: invalid recovery bit");const h=truncateHash(ensureBytes(msgHash));const{n}=CURVE;const radj=recovery===2||recovery===3?r+n:r;const rinv=invert(radj,n);const u1=mod(-h*rinv,n);const u2=mod(s*rinv,n);const prefix=recovery&1?"03":"02";const R=Point.fromHex(prefix+numTo32bStr(radj));const Q=Point.BASE.multiplyAndAddUnsafe(R,u1,u2);if(!Q)throw new Error("Cannot recover signature: point at infinify");Q.assertValidity();return Q}toRawBytes(isCompressed=false){return hexToBytes(this.toHex(isCompressed))}toHex(isCompressed=false){const x=numTo32bStr(this.x);if(isCompressed){const prefix=this.hasEvenY()?"02":"03";return`${prefix}${x}`}else{return`04${x}${numTo32bStr(this.y)}`}}toHexX(){return this.toHex(true).slice(2)}toRawX(){return this.toRawBytes(true).slice(1)}assertValidity(){const msg="Point is not on elliptic curve";const{x,y}=this;if(!isValidFieldElement(x)||!isValidFieldElement(y))throw new Error(msg);const left=mod(y*y);const right=weierstrass(x);if(mod(left-right)!==_0n)throw new Error(msg)}equals(other){return this.x===other.x&&this.y===other.y}negate(){return new Point(this.x,mod(-this.y))}double(){return JacobianPoint.fromAffine(this).double().toAffine()}add(other){return JacobianPoint.fromAffine(this).add(JacobianPoint.fromAffine(other)).toAffine()}subtract(other){return this.add(other.negate())}multiply(scalar){return JacobianPoint.fromAffine(this).multiply(scalar,this).toAffine()}multiplyAndAddUnsafe(Q,a,b){const P=JacobianPoint.fromAffine(this);const aP=a===_0n||a===_1n||this!==Point.BASE?P.multiplyUnsafe(a):P.multiply(a);const bQ=JacobianPoint.fromAffine(Q).multiplyUnsafe(b);const sum=aP.add(bQ);return sum.equals(JacobianPoint.ZERO)?undefined:sum.toAffine()}}exports.Point=Point;Point.BASE=new Point(CURVE.Gx,CURVE.Gy);Point.ZERO=new Point(_0n,_0n);function sliceDER(s){return Number.parseInt(s[0],16)>=8?"00"+s:s}function parseDERInt(data){if(data.length<2||data[0]!==2){throw new Error(`Invalid signature integer tag: ${bytesToHex(data)}`)}const len=data[1];const res=data.subarray(2,len+2);if(!len||res.length!==len){throw new Error(`Invalid signature integer: wrong length`)}if(res[0]===0&&res[1]<=127){throw new Error("Invalid signature integer: trailing length")}return{data:bytesToNumber(res),left:data.subarray(len+2)}}function parseDERSignature(data){if(data.length<2||data[0]!=48){throw new Error(`Invalid signature tag: ${bytesToHex(data)}`)}if(data[1]!==data.length-2){throw new Error("Invalid signature: incorrect length")}const{data:r,left:sBytes}=parseDERInt(data.subarray(2));const{data:s,left:rBytesLeft}=parseDERInt(sBytes);if(rBytesLeft.length){throw new Error(`Invalid signature: left bytes after parsing: ${bytesToHex(rBytesLeft)}`)}return{r:r,s:s}}class Signature{constructor(r,s){this.r=r;this.s=s;this.assertValidity()}static fromCompact(hex){const arr=hex instanceof Uint8Array;const name="Signature.fromCompact";if(typeof hex!=="string"&&!arr)throw new TypeError(`${name}: Expected string or Uint8Array`);const str=arr?bytesToHex(hex):hex;if(str.length!==128)throw new Error(`${name}: Expected 64-byte hex`);return new Signature(hexToNumber(str.slice(0,64)),hexToNumber(str.slice(64,128)))}static fromDER(hex){const arr=hex instanceof Uint8Array;if(typeof hex!=="string"&&!arr)throw new TypeError(`Signature.fromDER: Expected string or Uint8Array`);const{r,s}=parseDERSignature(arr?hex:hexToBytes(hex));return new Signature(r,s)}static fromHex(hex){return this.fromDER(hex)}assertValidity(){const{r,s}=this;if(!isWithinCurveOrder(r))throw new Error("Invalid Signature: r must be 0 < r < n");if(!isWithinCurveOrder(s))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const HALF=CURVE.n>>_1n;return this.s>HALF}normalizeS(){return this.hasHighS()?new Signature(this.r,mod(-this.s,CURVE.n)):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){const sHex=sliceDER(numberToHexUnpadded(this.s));const rHex=sliceDER(numberToHexUnpadded(this.r));const sHexL=sHex.length/2;const rHexL=rHex.length/2;const sLen=numberToHexUnpadded(sHexL);const rLen=numberToHexUnpadded(rHexL);const length=numberToHexUnpadded(rHexL+sHexL+4);return`30${length}02${rLen}${rHex}02${sLen}${sHex}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return numTo32bStr(this.r)+numTo32bStr(this.s)}}exports.Signature=Signature;function concatBytes(...arrays){if(!arrays.every(b=>b instanceof Uint8Array))throw new Error("Uint8Array list expected");if(arrays.length===1)return arrays[0];const length=arrays.reduce((a,arr)=>a+arr.length,0);const result=new Uint8Array(length);for(let i=0,pad=0;i<arrays.length;i++){const arr=arrays[i];result.set(arr,pad);pad+=arr.length}return result}const hexes=Array.from({length:256},(v,i)=>i.toString(16).padStart(2,"0"));function bytesToHex(uint8a){if(!(uint8a instanceof Uint8Array))throw new Error("Expected Uint8Array");let hex="";for(let i=0;i<uint8a.length;i++){hex+=hexes[uint8a[i]]}return hex}const POW_2_256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function numTo32bStr(num){if(typeof num!=="bigint")throw new Error("Expected bigint");if(!(_0n<=num&&num<POW_2_256))throw new Error("Expected number 0 <= n < 2^256");return num.toString(16).padStart(64,"0")}function numTo32b(num){const b=hexToBytes(numTo32bStr(num));if(b.length!==32)throw new Error("Error: expected 32 bytes");return b}function numberToHexUnpadded(num){const hex=num.toString(16);return hex.length&1?`0${hex}`:hex}function hexToNumber(hex){if(typeof hex!=="string"){throw new TypeError("hexToNumber: expected string, got "+typeof hex)}return BigInt(`0x${hex}`)}function hexToBytes(hex){if(typeof hex!=="string"){throw new TypeError("hexToBytes: expected string, got "+typeof hex)}if(hex.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+hex.length);const array=new Uint8Array(hex.length/2);for(let i=0;i<array.length;i++){const j=i*2;const hexByte=hex.slice(j,j+2);const byte=Number.parseInt(hexByte,16);if(Number.isNaN(byte)||byte<0)throw new Error("Invalid byte sequence");array[i]=byte}return array}function bytesToNumber(bytes){return hexToNumber(bytesToHex(bytes))}function ensureBytes(hex){return hex instanceof Uint8Array?Uint8Array.from(hex):hexToBytes(hex)}function normalizeScalar(num){if(typeof num==="number"&&Number.isSafeInteger(num)&&num>0)return BigInt(num);if(typeof num==="bigint"&&isWithinCurveOrder(num))return num;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function mod(a,b=CURVE.P){const result=a%b;return result>=_0n?result:b+result}function pow2(x,power){const{P}=CURVE;let res=x;while(power-- >_0n){res*=res;res%=P}return res}function sqrtMod(x){const{P}=CURVE;const _6n=BigInt(6);const _11n=BigInt(11);const _22n=BigInt(22);const _23n=BigInt(23);const _44n=BigInt(44);const _88n=BigInt(88);const b2=x*x*x%P;const b3=b2*b2*x%P;const b6=pow2(b3,_3n)*b3%P;const b9=pow2(b6,_3n)*b3%P;const b11=pow2(b9,_2n)*b2%P;const b22=pow2(b11,_11n)*b11%P;const b44=pow2(b22,_22n)*b22%P;const b88=pow2(b44,_44n)*b44%P;const b176=pow2(b88,_88n)*b88%P;const b220=pow2(b176,_44n)*b44%P;const b223=pow2(b220,_3n)*b3%P;const t1=pow2(b223,_23n)*b22%P;const t2=pow2(t1,_6n)*b2%P;const rt=pow2(t2,_2n);const xc=rt*rt%P;if(xc!==x)throw new Error("Cannot find square root");return rt}function invert(number,modulo=CURVE.P){if(number===_0n||modulo<=_0n){throw new Error(`invert: expected positive integers, got n=${number} mod=${modulo}`)}let a=mod(number,modulo);let b=modulo;let x=_0n,y=_1n,u=_1n,v=_0n;while(a!==_0n){const q=b/a;const r=b%a;const m=x-u*q;const n=y-v*q;b=a,a=r,x=u,y=v,u=m,v=n}const gcd=b;if(gcd!==_1n)throw new Error("invert: does not exist");return mod(x,modulo)}function invertBatch(nums,p=CURVE.P){const scratch=new Array(nums.length);const lastMultiplied=nums.reduce((acc,num,i)=>{if(num===_0n)return acc;scratch[i]=acc;return mod(acc*num,p)},_1n);const inverted=invert(lastMultiplied,p);nums.reduceRight((acc,num,i)=>{if(num===_0n)return acc;scratch[i]=mod(acc*scratch[i],p);return mod(acc*num,p)},inverted);return scratch}function bits2int_2(bytes){const delta=bytes.length*8-groupLen*8;const num=bytesToNumber(bytes);return delta>0?num>>BigInt(delta):num}function truncateHash(hash,truncateOnly=false){const h=bits2int_2(hash);if(truncateOnly)return h;const{n}=CURVE;return h>=n?h-n:h}let _sha256Sync;let _hmacSha256Sync;class HmacDrbg{constructor(hashLen,qByteLen){this.hashLen=hashLen;this.qByteLen=qByteLen;if(typeof hashLen!=="number"||hashLen<2)throw new Error("hashLen must be a number");if(typeof qByteLen!=="number"||qByteLen<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(hashLen).fill(1);this.k=new Uint8Array(hashLen).fill(0);this.counter=0}hmac(...values){return exports.utils.hmacSha256(this.k,...values)}hmacSync(...values){return _hmacSha256Sync(this.k,...values)}checkSync(){if(typeof _hmacSha256Sync!=="function")throw new ShaError("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(seed=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),seed);this.v=await this.hmac(this.v);if(seed.length===0)return;this.k=await this.hmac(this.v,Uint8Array.from([1]),seed);this.v=await this.hmac(this.v)}reseedSync(seed=new Uint8Array){this.checkSync();this.k=this.hmacSync(this.v,Uint8Array.from([0]),seed);this.v=this.hmacSync(this.v);if(seed.length===0)return;this.k=this.hmacSync(this.v,Uint8Array.from([1]),seed);this.v=this.hmacSync(this.v)}async generate(){this.incr();let len=0;const out=[];while(len<this.qByteLen){this.v=await this.hmac(this.v);const sl=this.v.slice();out.push(sl);len+=this.v.length}return concatBytes(...out)}generateSync(){this.checkSync();this.incr();let len=0;const out=[];while(len<this.qByteLen){this.v=this.hmacSync(this.v);const sl=this.v.slice();out.push(sl);len+=this.v.length}return concatBytes(...out)}}function isWithinCurveOrder(num){return _0n<num&&num<CURVE.n}function isValidFieldElement(num){return _0n<num&&num<CURVE.P}function kmdToSig(kBytes,m,d,lowS=true){const{n}=CURVE;const k=truncateHash(kBytes,true);if(!isWithinCurveOrder(k))return;const kinv=invert(k,n);const q=Point.BASE.multiply(k);const r=mod(q.x,n);if(r===_0n)return;const s=mod(kinv*mod(m+d*r,n),n);if(s===_0n)return;let sig=new Signature(r,s);let recovery=(q.x===sig.r?0:2)|Number(q.y&_1n);if(lowS&&sig.hasHighS()){sig=sig.normalizeS();recovery^=1}return{sig:sig,recovery:recovery}}function normalizePrivateKey(key){let num;if(typeof key==="bigint"){num=key}else if(typeof key==="number"&&Number.isSafeInteger(key)&&key>0){num=BigInt(key)}else if(typeof key==="string"){if(key.length!==2*groupLen)throw new Error("Expected 32 bytes of private key");num=hexToNumber(key)}else if(key instanceof Uint8Array){if(key.length!==groupLen)throw new Error("Expected 32 bytes of private key");num=bytesToNumber(key)}else{throw new TypeError("Expected valid private key")}if(!isWithinCurveOrder(num))throw new Error("Expected private key: 0 < key < n");return num}function normalizePublicKey(publicKey){if(publicKey instanceof Point){publicKey.assertValidity();return publicKey}else{return Point.fromHex(publicKey)}}function normalizeSignature(signature){if(signature instanceof Signature){signature.assertValidity();return signature}try{return Signature.fromDER(signature)}catch(error){return Signature.fromCompact(signature)}}function getPublicKey(privateKey,isCompressed=false){return Point.fromPrivateKey(privateKey).toRawBytes(isCompressed)}exports.getPublicKey=getPublicKey;function recoverPublicKey(msgHash,signature,recovery,isCompressed=false){return Point.fromSignature(msgHash,signature,recovery).toRawBytes(isCompressed)}exports.recoverPublicKey=recoverPublicKey;function isProbPub(item){const arr=item instanceof Uint8Array;const str=typeof item==="string";const len=(arr||str)&&item.length;if(arr)return len===compressedLen||len===uncompressedLen;if(str)return len===compressedLen*2||len===uncompressedLen*2;if(item instanceof Point)return true;return false}function getSharedSecret(privateA,publicB,isCompressed=false){if(isProbPub(privateA))throw new TypeError("getSharedSecret: first arg must be private key");if(!isProbPub(publicB))throw new TypeError("getSharedSecret: second arg must be public key");const b=normalizePublicKey(publicB);b.assertValidity();return b.multiply(normalizePrivateKey(privateA)).toRawBytes(isCompressed)}exports.getSharedSecret=getSharedSecret;function bits2int(bytes){const slice=bytes.length>fieldLen?bytes.slice(0,fieldLen):bytes;return bytesToNumber(slice)}function bits2octets(bytes){const z1=bits2int(bytes);const z2=mod(z1,CURVE.n);return int2octets(z2<_0n?z1:z2)}function int2octets(num){return numTo32b(num)}function initSigArgs(msgHash,privateKey,extraEntropy){if(msgHash==null)throw new Error(`sign: expected valid message hash, not "${msgHash}"`);const h1=ensureBytes(msgHash);const d=normalizePrivateKey(privateKey);const seedArgs=[int2octets(d),bits2octets(h1)];if(extraEntropy!=null){if(extraEntropy===true)extraEntropy=exports.utils.randomBytes(fieldLen);const e=ensureBytes(extraEntropy);if(e.length!==fieldLen)throw new Error(`sign: Expected ${fieldLen} bytes of extra data`);seedArgs.push(e)}const seed=concatBytes(...seedArgs);const m=bits2int(h1);return{seed:seed,m:m,d:d}}function finalizeSig(recSig,opts){const{sig,recovery}=recSig;const{der,recovered}=Object.assign({canonical:true,der:true},opts);const hashed=der?sig.toDERRawBytes():sig.toCompactRawBytes();return recovered?[hashed,recovery]:hashed}async function sign(msgHash,privKey,opts={}){const{seed,m,d}=initSigArgs(msgHash,privKey,opts.extraEntropy);const drbg=new HmacDrbg(hashLen,groupLen);await drbg.reseed(seed);let sig;while(!(sig=kmdToSig(await drbg.generate(),m,d,opts.canonical)))await drbg.reseed();return finalizeSig(sig,opts)}exports.sign=sign;function signSync(msgHash,privKey,opts={}){const{seed,m,d}=initSigArgs(msgHash,privKey,opts.extraEntropy);const drbg=new HmacDrbg(hashLen,groupLen);drbg.reseedSync(seed);let sig;while(!(sig=kmdToSig(drbg.generateSync(),m,d,opts.canonical)))drbg.reseedSync();return finalizeSig(sig,opts)}exports.signSync=signSync;const vopts={strict:true};function verify(signature,msgHash,publicKey,opts=vopts){let sig;try{sig=normalizeSignature(signature);msgHash=ensureBytes(msgHash)}catch(error){return false}const{r,s}=sig;if(opts.strict&&sig.hasHighS())return false;const h=truncateHash(msgHash);let P;try{P=normalizePublicKey(publicKey)}catch(error){return false}const{n}=CURVE;const sinv=invert(s,n);const u1=mod(h*sinv,n);const u2=mod(r*sinv,n);const R=Point.BASE.multiplyAndAddUnsafe(P,u1,u2);if(!R)return false;const v=mod(R.x,n);return v===r}exports.verify=verify;function schnorrChallengeFinalize(ch){return mod(bytesToNumber(ch),CURVE.n)}class SchnorrSignature{constructor(r,s){this.r=r;this.s=s;this.assertValidity()}static fromHex(hex){const bytes=ensureBytes(hex);if(bytes.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${bytes.length}`);const r=bytesToNumber(bytes.subarray(0,32));const s=bytesToNumber(bytes.subarray(32,64));return new SchnorrSignature(r,s)}assertValidity(){const{r,s}=this;if(!isValidFieldElement(r)||!isWithinCurveOrder(s))throw new Error("Invalid signature")}toHex(){return numTo32bStr(this.r)+numTo32bStr(this.s)}toRawBytes(){return hexToBytes(this.toHex())}}function schnorrGetPublicKey(privateKey){return Point.fromPrivateKey(privateKey).toRawX()}class InternalSchnorrSignature{constructor(message,privateKey,auxRand=exports.utils.randomBytes()){if(message==null)throw new TypeError(`sign: Expected valid message, not "${message}"`);this.m=ensureBytes(message);const{x,scalar}=this.getScalar(normalizePrivateKey(privateKey));this.px=x;this.d=scalar;this.rand=ensureBytes(auxRand);if(this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(priv){const point=Point.fromPrivateKey(priv);const scalar=point.hasEvenY()?priv:CURVE.n-priv;return{point:point,scalar:scalar,x:point.toRawX()}}initNonce(d,t0h){return numTo32b(d^bytesToNumber(t0h))}finalizeNonce(k0h){const k0=mod(bytesToNumber(k0h),CURVE.n);if(k0===_0n)throw new Error("sign: Creation of signature failed. k is zero");const{point:R,x:rx,scalar:k}=this.getScalar(k0);return{R:R,rx:rx,k:k}}finalizeSig(R,k,e,d){return new SchnorrSignature(R.x,mod(k+e*d,CURVE.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){const{m,d,px,rand}=this;const tag=exports.utils.taggedHash;const t=this.initNonce(d,await tag(TAGS.aux,rand));const{R,rx,k}=this.finalizeNonce(await tag(TAGS.nonce,t,px,m));const e=schnorrChallengeFinalize(await tag(TAGS.challenge,rx,px,m));const sig=this.finalizeSig(R,k,e,d);if(!await schnorrVerify(sig,m,px))this.error();return sig}calcSync(){const{m,d,px,rand}=this;const tag=exports.utils.taggedHashSync;const t=this.initNonce(d,tag(TAGS.aux,rand));const{R,rx,k}=this.finalizeNonce(tag(TAGS.nonce,t,px,m));const e=schnorrChallengeFinalize(tag(TAGS.challenge,rx,px,m));const sig=this.finalizeSig(R,k,e,d);if(!schnorrVerifySync(sig,m,px))this.error();return sig}}async function schnorrSign(msg,privKey,auxRand){return new InternalSchnorrSignature(msg,privKey,auxRand).calc()}function schnorrSignSync(msg,privKey,auxRand){return new InternalSchnorrSignature(msg,privKey,auxRand).calcSync()}function initSchnorrVerify(signature,message,publicKey){const raw=signature instanceof SchnorrSignature;const sig=raw?signature:SchnorrSignature.fromHex(signature);if(raw)sig.assertValidity();return{...sig,m:ensureBytes(message),P:normalizePublicKey(publicKey)}}function finalizeSchnorrVerify(r,P,s,e){const R=Point.BASE.multiplyAndAddUnsafe(P,normalizePrivateKey(s),mod(-e,CURVE.n));if(!R||!R.hasEvenY()||R.x!==r)return false;return true}async function schnorrVerify(signature,message,publicKey){try{const{r,s,m,P}=initSchnorrVerify(signature,message,publicKey);const e=schnorrChallengeFinalize(await exports.utils.taggedHash(TAGS.challenge,numTo32b(r),P.toRawX(),m));return finalizeSchnorrVerify(r,P,s,e)}catch(error){return false}}function schnorrVerifySync(signature,message,publicKey){try{const{r,s,m,P}=initSchnorrVerify(signature,message,publicKey);const e=schnorrChallengeFinalize(exports.utils.taggedHashSync(TAGS.challenge,numTo32b(r),P.toRawX(),m));return finalizeSchnorrVerify(r,P,s,e)}catch(error){if(error instanceof ShaError)throw error;return false}}exports.schnorr={Signature:SchnorrSignature,getPublicKey:schnorrGetPublicKey,sign:schnorrSign,verify:schnorrVerify,signSync:schnorrSignSync,verifySync:schnorrVerifySync};Point.BASE._setWindowSize(8);const crypto={node:nodeCrypto,web:typeof self==="object"&&"crypto"in self?self.crypto:undefined};const TAGS={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"};const TAGGED_HASH_PREFIXES={};exports.utils={bytesToHex:bytesToHex,hexToBytes:hexToBytes,concatBytes:concatBytes,mod:mod,invert:invert,isValidPrivateKey(privateKey){try{normalizePrivateKey(privateKey);return true}catch(error){return false}},_bigintTo32Bytes:numTo32b,_normalizePrivateKey:normalizePrivateKey,hashToPrivateKey:hash=>{hash=ensureBytes(hash);const minLen=groupLen+8;if(hash.length<minLen||hash.length>1024){throw new Error(`Expected valid bytes of private key as per FIPS 186`)}const num=mod(bytesToNumber(hash),CURVE.n-_1n)+_1n;return numTo32b(num)},randomBytes:(bytesLength=32)=>{if(crypto.web){return crypto.web.getRandomValues(new Uint8Array(bytesLength))}else if(crypto.node){const{randomBytes}=crypto.node;return Uint8Array.from(randomBytes(bytesLength))}else{throw new Error("The environment doesn't have randomBytes function")}},randomPrivateKey:()=>exports.utils.hashToPrivateKey(exports.utils.randomBytes(groupLen+8)),precompute(windowSize=8,point=Point.BASE){const cached=point===Point.BASE?point:new Point(point.x,point.y);cached._setWindowSize(windowSize);cached.multiply(_3n);return cached},sha256:async(...messages)=>{if(crypto.web){const buffer=await crypto.web.subtle.digest("SHA-256",concatBytes(...messages));return new Uint8Array(buffer)}else if(crypto.node){const{createHash}=crypto.node;const hash=createHash("sha256");messages.forEach(m=>hash.update(m));return Uint8Array.from(hash.digest())}else{throw new Error("The environment doesn't have sha256 function")}},hmacSha256:async(key,...messages)=>{if(crypto.web){const ckey=await crypto.web.subtle.importKey("raw",key,{name:"HMAC",hash:{name:"SHA-256"}},false,["sign"]);const message=concatBytes(...messages);const buffer=await crypto.web.subtle.sign("HMAC",ckey,message);return new Uint8Array(buffer)}else if(crypto.node){const{createHmac}=crypto.node;const hash=createHmac("sha256",key);messages.forEach(m=>hash.update(m));return Uint8Array.from(hash.digest())}else{throw new Error("The environment doesn't have hmac-sha256 function")}},sha256Sync:undefined,hmacSha256Sync:undefined,taggedHash:async(tag,...messages)=>{let tagP=TAGGED_HASH_PREFIXES[tag];if(tagP===undefined){const tagH=await exports.utils.sha256(Uint8Array.from(tag,c=>c.charCodeAt(0)));tagP=concatBytes(tagH,tagH);TAGGED_HASH_PREFIXES[tag]=tagP}return exports.utils.sha256(tagP,...messages)},taggedHashSync:(tag,...messages)=>{if(typeof _sha256Sync!=="function")throw new ShaError("sha256Sync is undefined, you need to set it");let tagP=TAGGED_HASH_PREFIXES[tag];if(tagP===undefined){const tagH=_sha256Sync(Uint8Array.from(tag,c=>c.charCodeAt(0)));tagP=concatBytes(tagH,tagH);TAGGED_HASH_PREFIXES[tag]=tagP}return _sha256Sync(tagP,...messages)},_JacobianPoint:JacobianPoint};Object.defineProperties(exports.utils,{sha256Sync:{configurable:false,get(){return _sha256Sync},set(val){if(!_sha256Sync)_sha256Sync=val}},hmacSha256Sync:{configurable:false,get(){return _hmacSha256Sync},set(val){if(!_hmacSha256Sync)_hmacSha256Sync=val}}})},{crypto:226}],37:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.encodeDecode=void 0;const encodeDecode=layout=>{const decode=layout.decode.bind(layout);const encode=layout.encode.bind(layout);return{decode:decode,encode:encode}};exports.encodeDecode=encodeDecode},{}],38:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.u64be=exports.u64=exports.u256be=exports.u256=exports.u192be=exports.u192=exports.u128be=exports.u128=exports.bigIntBE=exports.bigInt=void 0;var _bufferLayout=require("@solana/buffer-layout");var _bigintBuffer=require("bigint-buffer");var _base=require("./base.mjs");const bigInt=length=>property=>{const layout=(0,_bufferLayout.blob)(length,property);const{encode,decode}=(0,_base.encodeDecode)(layout);const bigIntLayout=layout;bigIntLayout.decode=(buffer,offset)=>{const src=decode(buffer,offset);return(0,_bigintBuffer.toBigIntLE)(Buffer.from(src))};bigIntLayout.encode=(bigInt,buffer,offset)=>{const src=(0,_bigintBuffer.toBufferLE)(bigInt,length);return encode(src,buffer,offset)};return bigIntLayout};exports.bigInt=bigInt;const bigIntBE=length=>property=>{const layout=(0,_bufferLayout.blob)(length,property);const{encode,decode}=(0,_base.encodeDecode)(layout);const bigIntLayout=layout;bigIntLayout.decode=(buffer,offset)=>{const src=decode(buffer,offset);return(0,_bigintBuffer.toBigIntBE)(Buffer.from(src))};bigIntLayout.encode=(bigInt,buffer,offset)=>{const src=(0,_bigintBuffer.toBufferBE)(bigInt,length);return encode(src,buffer,offset)};return bigIntLayout};exports.bigIntBE=bigIntBE;const u64=bigInt(8);exports.u64=u64;const u64be=bigIntBE(8);exports.u64be=u64be;const u128=bigInt(16);exports.u128=u128;const u128be=bigIntBE(16);exports.u128be=u128be;const u192=bigInt(24);exports.u192=u192;const u192be=bigIntBE(24);exports.u192be=u192be;const u256=bigInt(32);exports.u256=u256;const u256be=bigIntBE(32);exports.u256be=u256be}).call(this)}).call(this,require("buffer").Buffer)},{"./base.mjs":37,"@solana/buffer-layout":43,"bigint-buffer":219,buffer:269}],39:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.decimal=exports.WAD=void 0;var _bignumber=_interopRequireDefault(require("bignumber.js"));var _base=require("./base.mjs");var _bigint=require("./bigint.mjs");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const WAD=new _bignumber.default("1e+18");exports.WAD=WAD;const decimal=property=>{const layout=(0,_bigint.u128)(property);const{encode,decode}=(0,_base.encodeDecode)(layout);const decimalLayout=layout;decimalLayout.decode=(buffer,offset)=>{const src=decode(buffer,offset).toString();return new _bignumber.default(src).div(WAD)};decimalLayout.encode=(decimal,buffer,offset)=>{const src=BigInt(decimal.times(WAD).integerValue().toString());return encode(src,buffer,offset)};return decimalLayout};exports.decimal=decimal},{"./base.mjs":37,"./bigint.mjs":38,"bignumber.js":220}],40:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _base=require("./base.mjs");Object.keys(_base).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_base[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _base[key]}})});var _bigint=require("./bigint.mjs");Object.keys(_bigint).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_bigint[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _bigint[key]}})});var _decimal=require("./decimal.mjs");Object.keys(_decimal).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_decimal[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _decimal[key]}})});var _native=require("./native.mjs");Object.keys(_native).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_native[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _native[key]}})});var _web=require("./web3.mjs");Object.keys(_web).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_web[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _web[key]}})})},{"./base.mjs":37,"./bigint.mjs":38,"./decimal.mjs":39,"./native.mjs":41,"./web3.mjs":42}],41:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bool=void 0;var _bufferLayout=require("@solana/buffer-layout");var _base=require("./base.mjs");const bool=property=>{const layout=(0,_bufferLayout.u8)(property);const{encode,decode}=(0,_base.encodeDecode)(layout);const boolLayout=layout;boolLayout.decode=(buffer,offset)=>{const src=decode(buffer,offset);return!!src};boolLayout.encode=(bool,buffer,offset)=>{const src=Number(bool);return encode(src,buffer,offset)};return boolLayout};exports.bool=bool},{"./base.mjs":37,"@solana/buffer-layout":43}],42:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.publicKey=void 0;var _bufferLayout=require("@solana/buffer-layout");var _web=require("@solana/web3.js");var _base=require("./base.mjs");const publicKey=property=>{const layout=(0,_bufferLayout.blob)(32,property);const{encode,decode}=(0,_base.encodeDecode)(layout);const publicKeyLayout=layout;publicKeyLayout.decode=(buffer,offset)=>{const src=decode(buffer,offset);return new _web.PublicKey(src)};publicKeyLayout.encode=(publicKey,buffer,offset)=>{const src=publicKey.toBuffer();return encode(src,buffer,offset)};return publicKeyLayout};exports.publicKey=publicKey},{"./base.mjs":37,"@solana/buffer-layout":43,"@solana/web3.js":99}],43:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.s16=exports.s8=exports.nu64be=exports.u48be=exports.u40be=exports.u32be=exports.u24be=exports.u16be=exports.nu64=exports.u48=exports.u40=exports.u32=exports.u24=exports.u16=exports.u8=exports.offset=exports.greedy=exports.Constant=exports.UTF8=exports.CString=exports.Blob=exports.Boolean=exports.BitField=exports.BitStructure=exports.VariantLayout=exports.Union=exports.UnionLayoutDiscriminator=exports.UnionDiscriminator=exports.Structure=exports.Sequence=exports.DoubleBE=exports.Double=exports.FloatBE=exports.Float=exports.NearInt64BE=exports.NearInt64=exports.NearUInt64BE=exports.NearUInt64=exports.IntBE=exports.Int=exports.UIntBE=exports.UInt=exports.OffsetLayout=exports.GreedyCount=exports.ExternalLayout=exports.bindConstructorLayout=exports.nameWithProperty=exports.Layout=exports.uint8ArrayToBuffer=exports.checkUint8Array=void 0;exports.constant=exports.utf8=exports.cstr=exports.blob=exports.unionLayoutDiscriminator=exports.union=exports.seq=exports.bits=exports.struct=exports.f64be=exports.f64=exports.f32be=exports.f32=exports.ns64be=exports.s48be=exports.s40be=exports.s32be=exports.s24be=exports.s16be=exports.ns64=exports.s48=exports.s40=exports.s32=exports.s24=void 0;const buffer_1=require("buffer");function checkUint8Array(b){if(!(b instanceof Uint8Array)){throw new TypeError("b must be a Uint8Array")}}exports.checkUint8Array=checkUint8Array;function uint8ArrayToBuffer(b){checkUint8Array(b);return buffer_1.Buffer.from(b.buffer,b.byteOffset,b.length)}exports.uint8ArrayToBuffer=uint8ArrayToBuffer;class Layout{constructor(span,property){if(!Number.isInteger(span)){throw new TypeError("span must be an integer")}this.span=span;this.property=property}makeDestinationObject(){return{}}getSpan(b,offset){if(0>this.span){throw new RangeError("indeterminate span")}return this.span}replicate(property){const rv=Object.create(this.constructor.prototype);Object.assign(rv,this);rv.property=property;return rv}fromArray(values){return undefined}}exports.Layout=Layout;function nameWithProperty(name,lo){if(lo.property){return name+"["+lo.property+"]"}return name}exports.nameWithProperty=nameWithProperty;function bindConstructorLayout(Class,layout){if("function"!==typeof Class){throw new TypeError("Class must be constructor")}if(Object.prototype.hasOwnProperty.call(Class,"layout_")){throw new Error("Class is already bound to a layout")}if(!(layout&&layout instanceof Layout)){throw new TypeError("layout must be a Layout")}if(Object.prototype.hasOwnProperty.call(layout,"boundConstructor_")){throw new Error("layout is already bound to a constructor")}Class.layout_=layout;layout.boundConstructor_=Class;layout.makeDestinationObject=()=>new Class;Object.defineProperty(Class.prototype,"encode",{value(b,offset){return layout.encode(this,b,offset)},writable:true});Object.defineProperty(Class,"decode",{value(b,offset){return layout.decode(b,offset)},writable:true})}exports.bindConstructorLayout=bindConstructorLayout;class ExternalLayout extends Layout{isCount(){throw new Error("ExternalLayout is abstract")}}exports.ExternalLayout=ExternalLayout;class GreedyCount extends ExternalLayout{constructor(elementSpan=1,property){if(!Number.isInteger(elementSpan)||0>=elementSpan){throw new TypeError("elementSpan must be a (positive) integer")}super(-1,property);this.elementSpan=elementSpan}isCount(){return true}decode(b,offset=0){checkUint8Array(b);const rem=b.length-offset;return Math.floor(rem/this.elementSpan)}encode(src,b,offset){return 0}}exports.GreedyCount=GreedyCount;class OffsetLayout extends ExternalLayout{constructor(layout,offset=0,property){if(!(layout instanceof Layout)){throw new TypeError("layout must be a Layout")}if(!Number.isInteger(offset)){throw new TypeError("offset must be integer or undefined")}super(layout.span,property||layout.property);this.layout=layout;this.offset=offset}isCount(){return this.layout instanceof UInt||this.layout instanceof UIntBE}decode(b,offset=0){return this.layout.decode(b,offset+this.offset)}encode(src,b,offset=0){return this.layout.encode(src,b,offset+this.offset)}}exports.OffsetLayout=OffsetLayout;class UInt extends Layout{constructor(span,property){super(span,property);if(6<this.span){throw new RangeError("span must not exceed 6 bytes")}}decode(b,offset=0){return uint8ArrayToBuffer(b).readUIntLE(offset,this.span)}encode(src,b,offset=0){uint8ArrayToBuffer(b).writeUIntLE(src,offset,this.span);return this.span}}exports.UInt=UInt;class UIntBE extends Layout{constructor(span,property){super(span,property);if(6<this.span){throw new RangeError("span must not exceed 6 bytes")}}decode(b,offset=0){return uint8ArrayToBuffer(b).readUIntBE(offset,this.span)}encode(src,b,offset=0){uint8ArrayToBuffer(b).writeUIntBE(src,offset,this.span);return this.span}}exports.UIntBE=UIntBE;class Int extends Layout{constructor(span,property){super(span,property);if(6<this.span){throw new RangeError("span must not exceed 6 bytes")}}decode(b,offset=0){return uint8ArrayToBuffer(b).readIntLE(offset,this.span)}encode(src,b,offset=0){uint8ArrayToBuffer(b).writeIntLE(src,offset,this.span);return this.span}}exports.Int=Int;class IntBE extends Layout{constructor(span,property){super(span,property);if(6<this.span){throw new RangeError("span must not exceed 6 bytes")}}decode(b,offset=0){return uint8ArrayToBuffer(b).readIntBE(offset,this.span)}encode(src,b,offset=0){uint8ArrayToBuffer(b).writeIntBE(src,offset,this.span);return this.span}}exports.IntBE=IntBE;const V2E32=Math.pow(2,32);function divmodInt64(src){const hi32=Math.floor(src/V2E32);const lo32=src-hi32*V2E32;return{hi32:hi32,lo32:lo32}}function roundedInt64(hi32,lo32){return hi32*V2E32+lo32}class NearUInt64 extends Layout{constructor(property){super(8,property)}decode(b,offset=0){const buffer=uint8ArrayToBuffer(b);const lo32=buffer.readUInt32LE(offset);const hi32=buffer.readUInt32LE(offset+4);return roundedInt64(hi32,lo32)}encode(src,b,offset=0){const split=divmodInt64(src);const buffer=uint8ArrayToBuffer(b);buffer.writeUInt32LE(split.lo32,offset);buffer.writeUInt32LE(split.hi32,offset+4);return 8}}exports.NearUInt64=NearUInt64;class NearUInt64BE extends Layout{constructor(property){super(8,property)}decode(b,offset=0){const buffer=uint8ArrayToBuffer(b);const hi32=buffer.readUInt32BE(offset);const lo32=buffer.readUInt32BE(offset+4);return roundedInt64(hi32,lo32)}encode(src,b,offset=0){const split=divmodInt64(src);const buffer=uint8ArrayToBuffer(b);buffer.writeUInt32BE(split.hi32,offset);buffer.writeUInt32BE(split.lo32,offset+4);return 8}}exports.NearUInt64BE=NearUInt64BE;class NearInt64 extends Layout{constructor(property){super(8,property)}decode(b,offset=0){const buffer=uint8ArrayToBuffer(b);const lo32=buffer.readUInt32LE(offset);const hi32=buffer.readInt32LE(offset+4);return roundedInt64(hi32,lo32)}encode(src,b,offset=0){const split=divmodInt64(src);const buffer=uint8ArrayToBuffer(b);buffer.writeUInt32LE(split.lo32,offset);buffer.writeInt32LE(split.hi32,offset+4);return 8}}exports.NearInt64=NearInt64;class NearInt64BE extends Layout{constructor(property){super(8,property)}decode(b,offset=0){const buffer=uint8ArrayToBuffer(b);const hi32=buffer.readInt32BE(offset);const lo32=buffer.readUInt32BE(offset+4);return roundedInt64(hi32,lo32)}encode(src,b,offset=0){const split=divmodInt64(src);const buffer=uint8ArrayToBuffer(b);buffer.writeInt32BE(split.hi32,offset);buffer.writeUInt32BE(split.lo32,offset+4);return 8}}exports.NearInt64BE=NearInt64BE;class Float extends Layout{constructor(property){super(4,property)}decode(b,offset=0){return uint8ArrayToBuffer(b).readFloatLE(offset)}encode(src,b,offset=0){uint8ArrayToBuffer(b).writeFloatLE(src,offset);return 4}}exports.Float=Float;class FloatBE extends Layout{constructor(property){super(4,property)}decode(b,offset=0){return uint8ArrayToBuffer(b).readFloatBE(offset)}encode(src,b,offset=0){uint8ArrayToBuffer(b).writeFloatBE(src,offset);return 4}}exports.FloatBE=FloatBE;class Double extends Layout{constructor(property){super(8,property)}decode(b,offset=0){return uint8ArrayToBuffer(b).readDoubleLE(offset)}encode(src,b,offset=0){uint8ArrayToBuffer(b).writeDoubleLE(src,offset);return 8}}exports.Double=Double;class DoubleBE extends Layout{constructor(property){super(8,property)}decode(b,offset=0){return uint8ArrayToBuffer(b).readDoubleBE(offset)}encode(src,b,offset=0){uint8ArrayToBuffer(b).writeDoubleBE(src,offset);return 8}}exports.DoubleBE=DoubleBE;class Sequence extends Layout{constructor(elementLayout,count,property){if(!(elementLayout instanceof Layout)){throw new TypeError("elementLayout must be a Layout")}if(!(count instanceof ExternalLayout&&count.isCount()||Number.isInteger(count)&&0<=count)){throw new TypeError("count must be non-negative integer "+"or an unsigned integer ExternalLayout")}let span=-1;if(!(count instanceof ExternalLayout)&&0<elementLayout.span){span=count*elementLayout.span}super(span,property);this.elementLayout=elementLayout;this.count=count}getSpan(b,offset=0){if(0<=this.span){return this.span}let span=0;let count=this.count;if(count instanceof ExternalLayout){count=count.decode(b,offset)}if(0<this.elementLayout.span){span=count*this.elementLayout.span}else{let idx=0;while(idx<count){span+=this.elementLayout.getSpan(b,offset+span);++idx}}return span}decode(b,offset=0){const rv=[];let i=0;let count=this.count;if(count instanceof ExternalLayout){count=count.decode(b,offset)}while(i<count){rv.push(this.elementLayout.decode(b,offset));offset+=this.elementLayout.getSpan(b,offset);i+=1}return rv}encode(src,b,offset=0){const elo=this.elementLayout;const span=src.reduce((span,v)=>{return span+elo.encode(v,b,offset+span)},0);if(this.count instanceof ExternalLayout){this.count.encode(src.length,b,offset)}return span}}exports.Sequence=Sequence;class Structure extends Layout{constructor(fields,property,decodePrefixes){if(!(Array.isArray(fields)&&fields.reduce((acc,v)=>acc&&v instanceof Layout,true))){throw new TypeError("fields must be array of Layout instances")}if("boolean"===typeof property&&undefined===decodePrefixes){decodePrefixes=property;property=undefined}for(const fd of fields){if(0>fd.span&&undefined===fd.property){throw new Error("fields cannot contain unnamed variable-length layout")}}let span=-1;try{span=fields.reduce((span,fd)=>span+fd.getSpan(),0)}catch(e){}super(span,property);this.fields=fields;this.decodePrefixes=!!decodePrefixes}getSpan(b,offset=0){if(0<=this.span){return this.span}let span=0;try{span=this.fields.reduce((span,fd)=>{const fsp=fd.getSpan(b,offset);offset+=fsp;return span+fsp},0)}catch(e){throw new RangeError("indeterminate span")}return span}decode(b,offset=0){checkUint8Array(b);const dest=this.makeDestinationObject();for(const fd of this.fields){if(undefined!==fd.property){dest[fd.property]=fd.decode(b,offset)}offset+=fd.getSpan(b,offset);if(this.decodePrefixes&&b.length===offset){break}}return dest}encode(src,b,offset=0){const firstOffset=offset;let lastOffset=0;let lastWrote=0;for(const fd of this.fields){let span=fd.span;lastWrote=0<span?span:0;if(undefined!==fd.property){const fv=src[fd.property];if(undefined!==fv){lastWrote=fd.encode(fv,b,offset);if(0>span){span=fd.getSpan(b,offset)}}}lastOffset=offset;offset+=span}return lastOffset+lastWrote-firstOffset}fromArray(values){const dest=this.makeDestinationObject();for(const fd of this.fields){if(undefined!==fd.property&&0<values.length){dest[fd.property]=values.shift()}}return dest}layoutFor(property){if("string"!==typeof property){throw new TypeError("property must be string")}for(const fd of this.fields){if(fd.property===property){return fd}}return undefined}offsetOf(property){if("string"!==typeof property){throw new TypeError("property must be string")}let offset=0;for(const fd of this.fields){if(fd.property===property){return offset}if(0>fd.span){offset=-1}else if(0<=offset){offset+=fd.span}}return undefined}}exports.Structure=Structure;class UnionDiscriminator{constructor(property){this.property=property}decode(b,offset){throw new Error("UnionDiscriminator is abstract")}encode(src,b,offset){throw new Error("UnionDiscriminator is abstract")}}exports.UnionDiscriminator=UnionDiscriminator;class UnionLayoutDiscriminator extends UnionDiscriminator{constructor(layout,property){if(!(layout instanceof ExternalLayout&&layout.isCount())){throw new TypeError("layout must be an unsigned integer ExternalLayout")}super(property||layout.property||"variant");this.layout=layout}decode(b,offset){return this.layout.decode(b,offset)}encode(src,b,offset){return this.layout.encode(src,b,offset)}}exports.UnionLayoutDiscriminator=UnionLayoutDiscriminator;class Union extends Layout{constructor(discr,defaultLayout,property){let discriminator;if(discr instanceof UInt||discr instanceof UIntBE){discriminator=new UnionLayoutDiscriminator(new OffsetLayout(discr))}else if(discr instanceof ExternalLayout&&discr.isCount()){discriminator=new UnionLayoutDiscriminator(discr)}else if(!(discr instanceof UnionDiscriminator)){throw new TypeError("discr must be a UnionDiscriminator "+"or an unsigned integer layout")}else{discriminator=discr}if(undefined===defaultLayout){defaultLayout=null}if(!(null===defaultLayout||defaultLayout instanceof Layout)){throw new TypeError("defaultLayout must be null or a Layout")}if(null!==defaultLayout){if(0>defaultLayout.span){throw new Error("defaultLayout must have constant span")}if(undefined===defaultLayout.property){defaultLayout=defaultLayout.replicate("content")}}let span=-1;if(defaultLayout){span=defaultLayout.span;if(0<=span&&(discr instanceof UInt||discr instanceof UIntBE)){span+=discriminator.layout.span}}super(span,property);this.discriminator=discriminator;this.usesPrefixDiscriminator=discr instanceof UInt||discr instanceof UIntBE;this.defaultLayout=defaultLayout;this.registry={};let boundGetSourceVariant=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(src){return boundGetSourceVariant(src)};this.configGetSourceVariant=function(gsv){boundGetSourceVariant=gsv.bind(this)}}getSpan(b,offset=0){if(0<=this.span){return this.span}const vlo=this.getVariant(b,offset);if(!vlo){throw new Error("unable to determine span for unrecognized variant")}return vlo.getSpan(b,offset)}defaultGetSourceVariant(src){if(Object.prototype.hasOwnProperty.call(src,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(src,this.defaultLayout.property)){return undefined}const vlo=this.registry[src[this.discriminator.property]];if(vlo&&(!vlo.layout||vlo.property&&Object.prototype.hasOwnProperty.call(src,vlo.property))){return vlo}}else{for(const tag in this.registry){const vlo=this.registry[tag];if(vlo.property&&Object.prototype.hasOwnProperty.call(src,vlo.property)){return vlo}}}throw new Error("unable to infer src variant")}decode(b,offset=0){let dest;const dlo=this.discriminator;const discr=dlo.decode(b,offset);const clo=this.registry[discr];if(undefined===clo){const defaultLayout=this.defaultLayout;let contentOffset=0;if(this.usesPrefixDiscriminator){contentOffset=dlo.layout.span}dest=this.makeDestinationObject();dest[dlo.property]=discr;dest[defaultLayout.property]=defaultLayout.decode(b,offset+contentOffset)}else{dest=clo.decode(b,offset)}return dest}encode(src,b,offset=0){const vlo=this.getSourceVariant(src);if(undefined===vlo){const dlo=this.discriminator;const clo=this.defaultLayout;let contentOffset=0;if(this.usesPrefixDiscriminator){contentOffset=dlo.layout.span}dlo.encode(src[dlo.property],b,offset);return contentOffset+clo.encode(src[clo.property],b,offset+contentOffset)}return vlo.encode(src,b,offset)}addVariant(variant,layout,property){const rv=new VariantLayout(this,variant,layout,property);this.registry[variant]=rv;return rv}getVariant(vb,offset=0){let variant;if(vb instanceof Uint8Array){variant=this.discriminator.decode(vb,offset)}else{variant=vb}return this.registry[variant]}}exports.Union=Union;class VariantLayout extends Layout{constructor(union,variant,layout,property){if(!(union instanceof Union)){throw new TypeError("union must be a Union")}if(!Number.isInteger(variant)||0>variant){throw new TypeError("variant must be a (non-negative) integer")}if("string"===typeof layout&&undefined===property){property=layout;layout=null}if(layout){if(!(layout instanceof Layout)){throw new TypeError("layout must be a Layout")}if(null!==union.defaultLayout&&0<=layout.span&&layout.span>union.defaultLayout.span){throw new Error("variant span exceeds span of containing union")}if("string"!==typeof property){throw new TypeError("variant must have a String property")}}let span=union.span;if(0>union.span){span=layout?layout.span:0;if(0<=span&&union.usesPrefixDiscriminator){span+=union.discriminator.layout.span}}super(span,property);this.union=union;this.variant=variant;this.layout=layout||null}getSpan(b,offset=0){if(0<=this.span){return this.span}let contentOffset=0;if(this.union.usesPrefixDiscriminator){contentOffset=this.union.discriminator.layout.span}let span=0;if(this.layout){span=this.layout.getSpan(b,offset+contentOffset)}return contentOffset+span}decode(b,offset=0){const dest=this.makeDestinationObject();if(this!==this.union.getVariant(b,offset)){throw new Error("variant mismatch")}let contentOffset=0;if(this.union.usesPrefixDiscriminator){contentOffset=this.union.discriminator.layout.span}if(this.layout){dest[this.property]=this.layout.decode(b,offset+contentOffset)}else if(this.property){dest[this.property]=true}else if(this.union.usesPrefixDiscriminator){dest[this.union.discriminator.property]=this.variant}return dest}encode(src,b,offset=0){let contentOffset=0;if(this.union.usesPrefixDiscriminator){contentOffset=this.union.discriminator.layout.span}if(this.layout&&!Object.prototype.hasOwnProperty.call(src,this.property)){throw new TypeError("variant lacks property "+this.property)}this.union.discriminator.encode(this.variant,b,offset);let span=contentOffset;if(this.layout){this.layout.encode(src[this.property],b,offset+contentOffset);span+=this.layout.getSpan(b,offset+contentOffset);if(0<=this.union.span&&span>this.union.span){throw new Error("encoded variant overruns containing union")}}return span}fromArray(values){if(this.layout){return this.layout.fromArray(values)}return undefined}}exports.VariantLayout=VariantLayout;function fixBitwiseResult(v){if(0>v){v+=4294967296}return v}class BitStructure extends Layout{constructor(word,msb,property){if(!(word instanceof UInt||word instanceof UIntBE)){throw new TypeError("word must be a UInt or UIntBE layout")}if("string"===typeof msb&&undefined===property){property=msb;msb=false}if(4<word.span){throw new RangeError("word cannot exceed 32 bits")}super(word.span,property);this.word=word;this.msb=!!msb;this.fields=[];let value=0;this._packedSetValue=function(v){value=fixBitwiseResult(v);return this};this._packedGetValue=function(){return value}}decode(b,offset=0){const dest=this.makeDestinationObject();const value=this.word.decode(b,offset);this._packedSetValue(value);for(const fd of this.fields){if(undefined!==fd.property){dest[fd.property]=fd.decode(b)}}return dest}encode(src,b,offset=0){const value=this.word.decode(b,offset);this._packedSetValue(value);for(const fd of this.fields){if(undefined!==fd.property){const fv=src[fd.property];if(undefined!==fv){fd.encode(fv)}}}return this.word.encode(this._packedGetValue(),b,offset)}addField(bits,property){const bf=new BitField(this,bits,property);this.fields.push(bf);return bf}addBoolean(property){const bf=new Boolean(this,property);this.fields.push(bf);return bf}fieldFor(property){if("string"!==typeof property){throw new TypeError("property must be string")}for(const fd of this.fields){if(fd.property===property){return fd}}return undefined}}exports.BitStructure=BitStructure;class BitField{constructor(container,bits,property){if(!(container instanceof BitStructure)){throw new TypeError("container must be a BitStructure")}if(!Number.isInteger(bits)||0>=bits){throw new TypeError("bits must be positive integer")}const totalBits=8*container.span;const usedBits=container.fields.reduce((sum,fd)=>sum+fd.bits,0);if(bits+usedBits>totalBits){throw new Error("bits too long for span remainder ("+(totalBits-usedBits)+" of "+totalBits+" remain)")}this.container=container;this.bits=bits;this.valueMask=(1<<bits)-1;if(32===bits){this.valueMask=4294967295}this.start=usedBits;if(this.container.msb){this.start=totalBits-usedBits-bits}this.wordMask=fixBitwiseResult(this.valueMask<<this.start);this.property=property}decode(b,offset){const word=this.container._packedGetValue();const wordValue=fixBitwiseResult(word&this.wordMask);const value=wordValue>>>this.start;return value}encode(value){if("number"!==typeof value||!Number.isInteger(value)||value!==fixBitwiseResult(value&this.valueMask)){throw new TypeError(nameWithProperty("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask)}const word=this.container._packedGetValue();const wordValue=fixBitwiseResult(value<<this.start);this.container._packedSetValue(fixBitwiseResult(word&~this.wordMask)|wordValue)}}exports.BitField=BitField;class Boolean extends BitField{constructor(container,property){super(container,1,property)}decode(b,offset){return!!super.decode(b,offset)}encode(value){if("boolean"===typeof value){value=+value}super.encode(value)}}exports.Boolean=Boolean;class Blob extends Layout{constructor(length,property){if(!(length instanceof ExternalLayout&&length.isCount()||Number.isInteger(length)&&0<=length)){throw new TypeError("length must be positive integer "+"or an unsigned integer ExternalLayout")}let span=-1;if(!(length instanceof ExternalLayout)){span=length}super(span,property);this.length=length}getSpan(b,offset){let span=this.span;if(0>span){span=this.length.decode(b,offset)}return span}decode(b,offset=0){let span=this.span;if(0>span){span=this.length.decode(b,offset)}return uint8ArrayToBuffer(b).slice(offset,offset+span)}encode(src,b,offset){let span=this.length;if(this.length instanceof ExternalLayout){span=src.length}if(!(src instanceof Uint8Array&&span===src.length)){throw new TypeError(nameWithProperty("Blob.encode",this)+" requires (length "+span+") Uint8Array as src")}if(offset+span>b.length){throw new RangeError("encoding overruns Uint8Array")}const srcBuffer=uint8ArrayToBuffer(src);uint8ArrayToBuffer(b).write(srcBuffer.toString("hex"),offset,span,"hex");if(this.length instanceof ExternalLayout){this.length.encode(span,b,offset)}return span}}exports.Blob=Blob;class CString extends Layout{constructor(property){super(-1,property)}getSpan(b,offset=0){checkUint8Array(b);let idx=offset;while(idx<b.length&&0!==b[idx]){idx+=1}return 1+idx-offset}decode(b,offset=0){const span=this.getSpan(b,offset);return uint8ArrayToBuffer(b).slice(offset,offset+span-1).toString("utf-8")}encode(src,b,offset=0){if("string"!==typeof src){src=String(src)}const srcb=buffer_1.Buffer.from(src,"utf8");const span=srcb.length;if(offset+span>b.length){throw new RangeError("encoding overruns Buffer")}const buffer=uint8ArrayToBuffer(b);srcb.copy(buffer,offset);buffer[offset+span]=0;return span+1}}exports.CString=CString;class UTF8 extends Layout{constructor(maxSpan,property){if("string"===typeof maxSpan&&undefined===property){property=maxSpan;maxSpan=undefined}if(undefined===maxSpan){maxSpan=-1}else if(!Number.isInteger(maxSpan)){throw new TypeError("maxSpan must be an integer")}super(-1,property);this.maxSpan=maxSpan}getSpan(b,offset=0){checkUint8Array(b);return b.length-offset}decode(b,offset=0){const span=this.getSpan(b,offset);if(0<=this.maxSpan&&this.maxSpan<span){throw new RangeError("text length exceeds maxSpan")}return uint8ArrayToBuffer(b).slice(offset,offset+span).toString("utf-8")}encode(src,b,offset=0){if("string"!==typeof src){src=String(src)}const srcb=buffer_1.Buffer.from(src,"utf8");const span=srcb.length;if(0<=this.maxSpan&&this.maxSpan<span){throw new RangeError("text length exceeds maxSpan")}if(offset+span>b.length){throw new RangeError("encoding overruns Buffer")}srcb.copy(uint8ArrayToBuffer(b),offset);return span}}exports.UTF8=UTF8;class Constant extends Layout{constructor(value,property){super(0,property);this.value=value}decode(b,offset){return this.value}encode(src,b,offset){return 0}}exports.Constant=Constant;exports.greedy=(elementSpan,property)=>new GreedyCount(elementSpan,property);exports.offset=(layout,offset,property)=>new OffsetLayout(layout,offset,property);exports.u8=property=>new UInt(1,property);exports.u16=property=>new UInt(2,property);exports.u24=property=>new UInt(3,property);exports.u32=property=>new UInt(4,property);exports.u40=property=>new UInt(5,property);exports.u48=property=>new UInt(6,property);exports.nu64=property=>new NearUInt64(property);exports.u16be=property=>new UIntBE(2,property);exports.u24be=property=>new UIntBE(3,property);exports.u32be=property=>new UIntBE(4,property);exports.u40be=property=>new UIntBE(5,property);exports.u48be=property=>new UIntBE(6,property);exports.nu64be=property=>new NearUInt64BE(property);exports.s8=property=>new Int(1,property);exports.s16=property=>new Int(2,property);exports.s24=property=>new Int(3,property);exports.s32=property=>new Int(4,property);exports.s40=property=>new Int(5,property);exports.s48=property=>new Int(6,property);exports.ns64=property=>new NearInt64(property);exports.s16be=property=>new IntBE(2,property);exports.s24be=property=>new IntBE(3,property);exports.s32be=property=>new IntBE(4,property);exports.s40be=property=>new IntBE(5,property);exports.s48be=property=>new IntBE(6,property);exports.ns64be=property=>new NearInt64BE(property);exports.f32=property=>new Float(property);exports.f32be=property=>new FloatBE(property);exports.f64=property=>new Double(property);exports.f64be=property=>new DoubleBE(property);exports.struct=(fields,property,decodePrefixes)=>new Structure(fields,property,decodePrefixes);exports.bits=(word,msb,property)=>new BitStructure(word,msb,property);exports.seq=(elementLayout,count,property)=>new Sequence(elementLayout,count,property);exports.union=(discr,defaultLayout,property)=>new Union(discr,defaultLayout,property);exports.unionLayoutDiscriminator=(layout,property)=>new UnionLayoutDiscriminator(layout,property);exports.blob=(length,property)=>new Blob(length,property);exports.cstr=property=>new CString(property);exports.utf8=(maxSpan,property)=>new UTF8(maxSpan,property);exports.constant=(value,property)=>new Constant(value,property)},{buffer:269}],44:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.approve=approve;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _internal=require("./internal.mjs");async function approve(connection,payer,account,delegate,owner,amount,multiSigners=[],confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){const[ownerPublicKey,signers]=(0,_internal.getSigners)(owner,multiSigners);const transaction=(new _web.Transaction).add((0,_index.createApproveInstruction)(account,delegate,ownerPublicKey,amount,multiSigners,programId));return await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer,...signers],confirmOptions)}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./internal.mjs":57,"@solana/web3.js":99}],45:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.approveChecked=approveChecked;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _internal=require("./internal.mjs");async function approveChecked(connection,payer,mint,account,delegate,owner,amount,decimals,multiSigners=[],confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){const[ownerPublicKey,signers]=(0,_internal.getSigners)(owner,multiSigners);const transaction=(new _web.Transaction).add((0,_index.createApproveCheckedInstruction)(account,mint,delegate,ownerPublicKey,amount,decimals,multiSigners,programId));return await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer,...signers],confirmOptions)}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./internal.mjs":57,"@solana/web3.js":99}],46:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.burn=burn;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _internal=require("./internal.mjs");async function burn(connection,payer,account,mint,owner,amount,multiSigners=[],confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){const[ownerPublicKey,signers]=(0,_internal.getSigners)(owner,multiSigners);const transaction=(new _web.Transaction).add((0,_index.createBurnInstruction)(account,mint,ownerPublicKey,amount,multiSigners,programId));return await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer,...signers],confirmOptions)}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./internal.mjs":57,"@solana/web3.js":99}],47:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.burnChecked=burnChecked;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _internal=require("./internal.mjs");async function burnChecked(connection,payer,account,mint,owner,amount,decimals,multiSigners=[],confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){const[ownerPublicKey,signers]=(0,_internal.getSigners)(owner,multiSigners);const transaction=(new _web.Transaction).add((0,_index.createBurnCheckedInstruction)(account,mint,ownerPublicKey,amount,decimals,multiSigners,programId));return await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer,...signers],confirmOptions)}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./internal.mjs":57,"@solana/web3.js":99}],48:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.closeAccount=closeAccount;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _internal=require("./internal.mjs");async function closeAccount(connection,payer,account,destination,authority,multiSigners=[],confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){const[authorityPublicKey,signers]=(0,_internal.getSigners)(authority,multiSigners);const transaction=(new _web.Transaction).add((0,_index.createCloseAccountInstruction)(account,destination,authorityPublicKey,multiSigners,programId));return await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer,...signers],confirmOptions)}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./internal.mjs":57,"@solana/web3.js":99}],49:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createAccount=createAccount;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _index2=require("./../state/index.mjs");var _createAssociatedTokenAccount=require("./createAssociatedTokenAccount.mjs");async function createAccount(connection,payer,mint,owner,keypair,confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){if(!keypair)return await(0,_createAssociatedTokenAccount.createAssociatedTokenAccount)(connection,payer,mint,owner,confirmOptions,programId);const lamports=await(0,_index2.getMinimumBalanceForRentExemptAccount)(connection);const transaction=(new _web.Transaction).add(_web.SystemProgram.createAccount({fromPubkey:payer.publicKey,newAccountPubkey:keypair.publicKey,space:_index2.ACCOUNT_SIZE,lamports:lamports,programId:programId}),(0,_index.createInitializeAccountInstruction)(keypair.publicKey,mint,owner,programId));await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer,keypair],confirmOptions);return keypair.publicKey}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./../state/index.mjs":96,"./createAssociatedTokenAccount.mjs":50,"@solana/web3.js":99}],50:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createAssociatedTokenAccount=createAssociatedTokenAccount;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _index2=require("./../state/index.mjs");async function createAssociatedTokenAccount(connection,payer,mint,owner,confirmOptions,programId=_constants.TOKEN_PROGRAM_ID,associatedTokenProgramId=_constants.ASSOCIATED_TOKEN_PROGRAM_ID){const associatedToken=await(0,_index2.getAssociatedTokenAddress)(mint,owner,false,programId,associatedTokenProgramId);const transaction=(new _web.Transaction).add((0,_index.createAssociatedTokenAccountInstruction)(payer.publicKey,associatedToken,owner,mint,programId,associatedTokenProgramId));await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer],confirmOptions);return associatedToken}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./../state/index.mjs":96,"@solana/web3.js":99}],51:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createMint=createMint;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _index2=require("./../state/index.mjs");async function createMint(connection,payer,mintAuthority,freezeAuthority,decimals,keypair=_web.Keypair.generate(),confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){const lamports=await(0,_index2.getMinimumBalanceForRentExemptMint)(connection);const transaction=(new _web.Transaction).add(_web.SystemProgram.createAccount({fromPubkey:payer.publicKey,newAccountPubkey:keypair.publicKey,space:_index2.MINT_SIZE,lamports:lamports,programId:programId}),(0,_index.createInitializeMintInstruction)(keypair.publicKey,decimals,mintAuthority,freezeAuthority,programId));await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer,keypair],confirmOptions);return keypair.publicKey}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./../state/index.mjs":96,"@solana/web3.js":99}],52:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createMultisig=createMultisig;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _index2=require("./../state/index.mjs");async function createMultisig(connection,payer,signers,m,keypair=_web.Keypair.generate(),confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){const lamports=await(0,_index2.getMinimumBalanceForRentExemptMultisig)(connection);const transaction=(new _web.Transaction).add(_web.SystemProgram.createAccount({fromPubkey:payer.publicKey,newAccountPubkey:keypair.publicKey,space:_index2.MULTISIG_SIZE,lamports:lamports,programId:programId}),(0,_index.createInitializeMultisigInstruction)(keypair.publicKey,signers,m,programId));await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer,keypair],confirmOptions);return keypair.publicKey}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./../state/index.mjs":96,"@solana/web3.js":99}],53:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createWrappedNativeAccount=createWrappedNativeAccount;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _index2=require("./../state/index.mjs");var _createAccount=require("./createAccount.mjs");async function createWrappedNativeAccount(connection,payer,owner,amount,keypair,confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){if(!amount)return await(0,_createAccount.createAccount)(connection,payer,_constants.NATIVE_MINT,owner,keypair,confirmOptions,programId);if(!keypair){const associatedToken=await(0,_index2.getAssociatedTokenAddress)(_constants.NATIVE_MINT,owner,false,programId,_constants.ASSOCIATED_TOKEN_PROGRAM_ID);const transaction=(new _web.Transaction).add((0,_index.createAssociatedTokenAccountInstruction)(payer.publicKey,associatedToken,owner,_constants.NATIVE_MINT,programId,_constants.ASSOCIATED_TOKEN_PROGRAM_ID),_web.SystemProgram.transfer({fromPubkey:payer.publicKey,toPubkey:associatedToken,lamports:amount}),(0,_index.createSyncNativeInstruction)(associatedToken,programId));await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer],confirmOptions);return associatedToken}const lamports=await(0,_index2.getMinimumBalanceForRentExemptAccount)(connection);const transaction=(new _web.Transaction).add(_web.SystemProgram.createAccount({fromPubkey:payer.publicKey,newAccountPubkey:keypair.publicKey,space:_index2.ACCOUNT_SIZE,lamports:lamports,programId:programId}),_web.SystemProgram.transfer({fromPubkey:payer.publicKey,toPubkey:keypair.publicKey,lamports:amount}),(0,_index.createInitializeAccountInstruction)(keypair.publicKey,_constants.NATIVE_MINT,owner,programId));await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer,keypair],confirmOptions);return keypair.publicKey}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./../state/index.mjs":96,"./createAccount.mjs":49,"@solana/web3.js":99}],54:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.freezeAccount=freezeAccount;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _internal=require("./internal.mjs");async function freezeAccount(connection,payer,account,mint,authority,multiSigners=[],confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){const[authorityPublicKey,signers]=(0,_internal.getSigners)(authority,multiSigners);const transaction=(new _web.Transaction).add((0,_index.createFreezeAccountInstruction)(account,mint,authorityPublicKey,multiSigners,programId));return await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer,...signers],confirmOptions)}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./internal.mjs":57,"@solana/web3.js":99}],55:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getOrCreateAssociatedTokenAccount=getOrCreateAssociatedTokenAccount;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _index=require("./../instructions/index.mjs");var _index2=require("./../state/index.mjs");async function getOrCreateAssociatedTokenAccount(connection,payer,mint,owner,allowOwnerOffCurve=false,commitment,confirmOptions,programId=_constants.TOKEN_PROGRAM_ID,associatedTokenProgramId=_constants.ASSOCIATED_TOKEN_PROGRAM_ID){const associatedToken=await(0,_index2.getAssociatedTokenAddress)(mint,owner,allowOwnerOffCurve,programId,associatedTokenProgramId);let account;try{account=await(0,_index2.getAccount)(connection,associatedToken,commitment,programId)}catch(error){if(error instanceof _errors.TokenAccountNotFoundError||error instanceof _errors.TokenInvalidAccountOwnerError){try{const transaction=(new _web.Transaction).add((0,_index.createAssociatedTokenAccountInstruction)(payer.publicKey,associatedToken,owner,mint,programId,associatedTokenProgramId));await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer],confirmOptions)}catch(error){}account=await(0,_index2.getAccount)(connection,associatedToken,commitment,programId)}else{throw error}}if(!account.mint.equals(mint))throw new _errors.TokenInvalidMintError;if(!account.owner.equals(owner))throw new _errors.TokenInvalidOwnerError;return account}},{"./../constants.mjs":66,"./../errors.mjs":67,"./../instructions/index.mjs":77,"./../state/index.mjs":96,"@solana/web3.js":99}],56:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createMint=require("./createMint.mjs");Object.keys(_createMint).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_createMint[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _createMint[key]}})});var _createAccount=require("./createAccount.mjs");Object.keys(_createAccount).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_createAccount[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _createAccount[key]}})});var _createWrappedNativeAccount=require("./createWrappedNativeAccount.mjs");Object.keys(_createWrappedNativeAccount).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_createWrappedNativeAccount[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _createWrappedNativeAccount[key]}})});var _createMultisig=require("./createMultisig.mjs");Object.keys(_createMultisig).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_createMultisig[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _createMultisig[key]}})});var _transfer=require("./transfer.mjs");Object.keys(_transfer).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_transfer[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _transfer[key]}})});var _approve=require("./approve.mjs");Object.keys(_approve).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_approve[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _approve[key]}})});var _revoke=require("./revoke.mjs");Object.keys(_revoke).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_revoke[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _revoke[key]}})});var _setAuthority=require("./setAuthority.mjs");Object.keys(_setAuthority).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_setAuthority[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _setAuthority[key]}})});var _mintTo=require("./mintTo.mjs");Object.keys(_mintTo).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_mintTo[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _mintTo[key]}})});var _burn=require("./burn.mjs");Object.keys(_burn).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_burn[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _burn[key]}})});var _closeAccount=require("./closeAccount.mjs");Object.keys(_closeAccount).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_closeAccount[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _closeAccount[key]}})});var _freezeAccount=require("./freezeAccount.mjs");Object.keys(_freezeAccount).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_freezeAccount[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _freezeAccount[key]}})});var _thawAccount=require("./thawAccount.mjs");Object.keys(_thawAccount).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_thawAccount[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _thawAccount[key]}})});var _transferChecked=require("./transferChecked.mjs");Object.keys(_transferChecked).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_transferChecked[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _transferChecked[key]}})});var _approveChecked=require("./approveChecked.mjs");Object.keys(_approveChecked).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_approveChecked[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _approveChecked[key]}})});var _mintToChecked=require("./mintToChecked.mjs");Object.keys(_mintToChecked).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_mintToChecked[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _mintToChecked[key]}})});var _burnChecked=require("./burnChecked.mjs");Object.keys(_burnChecked).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_burnChecked[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _burnChecked[key]}})});var _syncNative=require("./syncNative.mjs");Object.keys(_syncNative).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_syncNative[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _syncNative[key]}})});var _createAssociatedTokenAccount=require("./createAssociatedTokenAccount.mjs");Object.keys(_createAssociatedTokenAccount).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_createAssociatedTokenAccount[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _createAssociatedTokenAccount[key]}})});var _getOrCreateAssociatedTokenAccount=require("./getOrCreateAssociatedTokenAccount.mjs");Object.keys(_getOrCreateAssociatedTokenAccount).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_getOrCreateAssociatedTokenAccount[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _getOrCreateAssociatedTokenAccount[key]}})})},{"./approve.mjs":44,"./approveChecked.mjs":45,"./burn.mjs":46,"./burnChecked.mjs":47,"./closeAccount.mjs":48,"./createAccount.mjs":49,"./createAssociatedTokenAccount.mjs":50,"./createMint.mjs":51,"./createMultisig.mjs":52,"./createWrappedNativeAccount.mjs":53,"./freezeAccount.mjs":54,"./getOrCreateAssociatedTokenAccount.mjs":55,"./mintTo.mjs":58,"./mintToChecked.mjs":59,"./revoke.mjs":60,"./setAuthority.mjs":61,"./syncNative.mjs":62,"./thawAccount.mjs":63,"./transfer.mjs":64,"./transferChecked.mjs":65}],57:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSigners=getSigners;var _web=require("@solana/web3.js");function getSigners(signerOrMultisig,multiSigners){return signerOrMultisig instanceof _web.PublicKey?[signerOrMultisig,multiSigners]:[signerOrMultisig.publicKey,[signerOrMultisig]]}},{"@solana/web3.js":99}],58:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mintTo=mintTo;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _internal=require("./internal.mjs");async function mintTo(connection,payer,mint,destination,authority,amount,multiSigners=[],confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){const[authorityPublicKey,signers]=(0,_internal.getSigners)(authority,multiSigners);const transaction=(new _web.Transaction).add((0,_index.createMintToInstruction)(mint,destination,authorityPublicKey,amount,multiSigners,programId));return await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer,...signers],confirmOptions)}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./internal.mjs":57,"@solana/web3.js":99}],59:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mintToChecked=mintToChecked;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _internal=require("./internal.mjs");async function mintToChecked(connection,payer,mint,destination,authority,amount,decimals,multiSigners=[],confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){const[authorityPublicKey,signers]=(0,_internal.getSigners)(authority,multiSigners);const transaction=(new _web.Transaction).add((0,_index.createMintToCheckedInstruction)(mint,destination,authorityPublicKey,amount,decimals,multiSigners,programId));return await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer,...signers],confirmOptions)}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./internal.mjs":57,"@solana/web3.js":99}],60:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.revoke=revoke;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _internal=require("./internal.mjs");async function revoke(connection,payer,account,owner,multiSigners=[],confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){const[ownerPublicKey,signers]=(0,_internal.getSigners)(owner,multiSigners);const transaction=(new _web.Transaction).add((0,_index.createRevokeInstruction)(account,ownerPublicKey,multiSigners,programId));return await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer,...signers],confirmOptions)}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./internal.mjs":57,"@solana/web3.js":99}],61:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setAuthority=setAuthority;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _internal=require("./internal.mjs");async function setAuthority(connection,payer,account,currentAuthority,authorityType,newAuthority,multiSigners=[],confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){const[currentAuthorityPublicKey,signers]=(0,_internal.getSigners)(currentAuthority,multiSigners);const transaction=(new _web.Transaction).add((0,_index.createSetAuthorityInstruction)(account,currentAuthorityPublicKey,authorityType,newAuthority,multiSigners,programId));return await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer,...signers],confirmOptions)}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./internal.mjs":57,"@solana/web3.js":99}],62:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.syncNative=syncNative;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");async function syncNative(connection,payer,account,confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){const transaction=(new _web.Transaction).add((0,_index.createSyncNativeInstruction)(account,programId));return await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer],confirmOptions)}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"@solana/web3.js":99}],63:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.thawAccount=thawAccount;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _internal=require("./internal.mjs");async function thawAccount(connection,payer,account,mint,authority,multiSigners=[],confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){const[authorityPublicKey,signers]=(0,_internal.getSigners)(authority,multiSigners);const transaction=(new _web.Transaction).add((0,_index.createThawAccountInstruction)(account,mint,authorityPublicKey,multiSigners,programId));return await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer,...signers],confirmOptions)}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./internal.mjs":57,"@solana/web3.js":99}],64:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.transfer=transfer;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _internal=require("./internal.mjs");async function transfer(connection,payer,source,destination,owner,amount,multiSigners=[],confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){const[ownerPublicKey,signers]=(0,_internal.getSigners)(owner,multiSigners);const transaction=(new _web.Transaction).add((0,_index.createTransferInstruction)(source,destination,ownerPublicKey,amount,multiSigners,programId));return await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer,...signers],confirmOptions)}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./internal.mjs":57,"@solana/web3.js":99}],65:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.transferChecked=transferChecked;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _index=require("./../instructions/index.mjs");var _internal=require("./internal.mjs");async function transferChecked(connection,payer,source,mint,destination,owner,amount,decimals,multiSigners=[],confirmOptions,programId=_constants.TOKEN_PROGRAM_ID){const[ownerPublicKey,signers]=(0,_internal.getSigners)(owner,multiSigners);const transaction=(new _web.Transaction).add((0,_index.createTransferCheckedInstruction)(source,mint,destination,ownerPublicKey,amount,decimals,multiSigners,programId));return await(0,_web.sendAndConfirmTransaction)(connection,transaction,[payer,...signers],confirmOptions)}},{"./../constants.mjs":66,"./../instructions/index.mjs":77,"./internal.mjs":57,"@solana/web3.js":99}],66:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TOKEN_PROGRAM_ID=exports.NATIVE_MINT=exports.ASSOCIATED_TOKEN_PROGRAM_ID=void 0;var _web=require("@solana/web3.js");const TOKEN_PROGRAM_ID=new _web.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");exports.TOKEN_PROGRAM_ID=TOKEN_PROGRAM_ID;const ASSOCIATED_TOKEN_PROGRAM_ID=new _web.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");exports.ASSOCIATED_TOKEN_PROGRAM_ID=ASSOCIATED_TOKEN_PROGRAM_ID;const NATIVE_MINT=new _web.PublicKey("So11111111111111111111111111111111111111112");exports.NATIVE_MINT=NATIVE_MINT},{"@solana/web3.js":99}],67:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TokenOwnerOffCurveError=exports.TokenInvalidOwnerError=exports.TokenInvalidMintError=exports.TokenInvalidInstructionTypeError=exports.TokenInvalidInstructionProgramError=exports.TokenInvalidInstructionKeysError=exports.TokenInvalidInstructionDataError=exports.TokenInvalidAccountSizeError=exports.TokenInvalidAccountOwnerError=exports.TokenError=exports.TokenAccountNotFoundError=void 0;class TokenError extends Error{constructor(message){super(message)}}exports.TokenError=TokenError;class TokenAccountNotFoundError extends TokenError{constructor(){super(...arguments);this.name="TokenAccountNotFoundError"}}exports.TokenAccountNotFoundError=TokenAccountNotFoundError;class TokenInvalidAccountOwnerError extends TokenError{constructor(){super(...arguments);this.name="TokenInvalidAccountOwnerError"}}exports.TokenInvalidAccountOwnerError=TokenInvalidAccountOwnerError;class TokenInvalidAccountSizeError extends TokenError{constructor(){super(...arguments);this.name="TokenInvalidAccountSizeError"}}exports.TokenInvalidAccountSizeError=TokenInvalidAccountSizeError;class TokenInvalidMintError extends TokenError{constructor(){super(...arguments);this.name="TokenInvalidMintError"}}exports.TokenInvalidMintError=TokenInvalidMintError;class TokenInvalidOwnerError extends TokenError{constructor(){super(...arguments);this.name="TokenInvalidOwnerError"}}exports.TokenInvalidOwnerError=TokenInvalidOwnerError;class TokenOwnerOffCurveError extends TokenError{constructor(){super(...arguments);this.name="TokenOwnerOffCurveError"}}exports.TokenOwnerOffCurveError=TokenOwnerOffCurveError;class TokenInvalidInstructionProgramError extends TokenError{constructor(){super(...arguments);this.name="TokenInvalidInstructionProgramError"}}exports.TokenInvalidInstructionProgramError=TokenInvalidInstructionProgramError;class TokenInvalidInstructionKeysError extends TokenError{constructor(){super(...arguments);this.name="TokenInvalidInstructionKeysError"}}exports.TokenInvalidInstructionKeysError=TokenInvalidInstructionKeysError;class TokenInvalidInstructionDataError extends TokenError{constructor(){super(...arguments);this.name="TokenInvalidInstructionDataError"}}exports.TokenInvalidInstructionDataError=TokenInvalidInstructionDataError;class TokenInvalidInstructionTypeError extends TokenError{constructor(){super(...arguments);this.name="TokenInvalidInstructionTypeError"}}exports.TokenInvalidInstructionTypeError=TokenInvalidInstructionTypeError},{}],68:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _index=require("./instructions/index.mjs");Object.keys(_index).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_index[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _index[key]}})});var _index2=require("./state/index.mjs");Object.keys(_index2).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_index2[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _index2[key]}})});var _index3=require("./actions/index.mjs");Object.keys(_index3).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_index3[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _index3[key]}})});var _constants=require("./constants.mjs");Object.keys(_constants).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_constants[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _constants[key]}})});var _errors=require("./errors.mjs");Object.keys(_errors).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_errors[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _errors[key]}})})},{"./actions/index.mjs":56,"./constants.mjs":66,"./errors.mjs":67,"./instructions/index.mjs":77,"./state/index.mjs":96}],69:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.approveInstructionData=void 0;exports.createApproveInstruction=createApproveInstruction;exports.decodeApproveInstruction=decodeApproveInstruction;exports.decodeApproveInstructionUnchecked=decodeApproveInstructionUnchecked;var _bufferLayout=require("@solana/buffer-layout");var _bufferLayoutUtils=require("@solana/buffer-layout-utils");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _internal=require("./internal.mjs");var _types=require("./types.mjs");const approveInstructionData=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("instruction"),(0,_bufferLayoutUtils.u64)("amount")]);exports.approveInstructionData=approveInstructionData;function createApproveInstruction(account,delegate,owner,amount,multiSigners=[],programId=_constants.TOKEN_PROGRAM_ID){const keys=(0,_internal.addSigners)([{pubkey:account,isSigner:false,isWritable:true},{pubkey:delegate,isSigner:false,isWritable:false}],owner,multiSigners);const data=Buffer.alloc(approveInstructionData.span);approveInstructionData.encode({instruction:_types.TokenInstruction.Approve,amount:BigInt(amount)},data);return new _web.TransactionInstruction({keys:keys,programId:programId,data:data})}function decodeApproveInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.programId.equals(programId))throw new _errors.TokenInvalidInstructionProgramError;if(instruction.data.length!==approveInstructionData.span)throw new _errors.TokenInvalidInstructionDataError;const{keys:{account,delegate,owner,multiSigners},data}=decodeApproveInstructionUnchecked(instruction);if(data.instruction!==_types.TokenInstruction.Approve)throw new _errors.TokenInvalidInstructionTypeError;if(!account||!delegate||!owner)throw new _errors.TokenInvalidInstructionKeysError;return{programId:programId,keys:{account:account,delegate:delegate,owner:owner,multiSigners:multiSigners},data:data}}function decodeApproveInstructionUnchecked({programId,keys:[account,delegate,owner,...multiSigners],data}){return{programId:programId,keys:{account:account,delegate:delegate,owner:owner,multiSigners:multiSigners},data:approveInstructionData.decode(data)}}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"./../errors.mjs":67,"./internal.mjs":85,"./types.mjs":94,"@solana/buffer-layout":43,"@solana/buffer-layout-utils":40,"@solana/web3.js":99,buffer:269}],70:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.approveCheckedInstructionData=void 0;exports.createApproveCheckedInstruction=createApproveCheckedInstruction;exports.decodeApproveCheckedInstruction=decodeApproveCheckedInstruction;exports.decodeApproveCheckedInstructionUnchecked=decodeApproveCheckedInstructionUnchecked;var _bufferLayout=require("@solana/buffer-layout");var _bufferLayoutUtils=require("@solana/buffer-layout-utils");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _internal=require("./internal.mjs");var _types=require("./types.mjs");const approveCheckedInstructionData=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("instruction"),(0,_bufferLayoutUtils.u64)("amount"),(0,_bufferLayout.u8)("decimals")]);exports.approveCheckedInstructionData=approveCheckedInstructionData;function createApproveCheckedInstruction(account,mint,delegate,owner,amount,decimals,multiSigners=[],programId=_constants.TOKEN_PROGRAM_ID){const keys=(0,_internal.addSigners)([{pubkey:account,isSigner:false,isWritable:true},{pubkey:mint,isSigner:false,isWritable:false},{pubkey:delegate,isSigner:false,isWritable:false}],owner,multiSigners);const data=Buffer.alloc(approveCheckedInstructionData.span);approveCheckedInstructionData.encode({instruction:_types.TokenInstruction.ApproveChecked,amount:BigInt(amount),decimals:decimals},data);return new _web.TransactionInstruction({keys:keys,programId:programId,data:data})}function decodeApproveCheckedInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.programId.equals(programId))throw new _errors.TokenInvalidInstructionProgramError;if(instruction.data.length!==approveCheckedInstructionData.span)throw new _errors.TokenInvalidInstructionDataError;const{keys:{account,mint,delegate,owner,multiSigners},data}=decodeApproveCheckedInstructionUnchecked(instruction);if(data.instruction!==_types.TokenInstruction.ApproveChecked)throw new _errors.TokenInvalidInstructionTypeError;if(!account||!mint||!delegate||!owner)throw new _errors.TokenInvalidInstructionKeysError;return{programId:programId,keys:{account:account,mint:mint,delegate:delegate,owner:owner,multiSigners:multiSigners},data:data}}function decodeApproveCheckedInstructionUnchecked({programId,keys:[account,mint,delegate,owner,...multiSigners],data}){return{programId:programId,keys:{account:account,mint:mint,delegate:delegate,owner:owner,multiSigners:multiSigners},data:approveCheckedInstructionData.decode(data)}}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"./../errors.mjs":67,"./internal.mjs":85,"./types.mjs":94,"@solana/buffer-layout":43,"@solana/buffer-layout-utils":40,"@solana/web3.js":99,buffer:269}],71:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createAssociatedTokenAccountInstruction=createAssociatedTokenAccountInstruction;var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");function createAssociatedTokenAccountInstruction(payer,associatedToken,owner,mint,programId=_constants.TOKEN_PROGRAM_ID,associatedTokenProgramId=_constants.ASSOCIATED_TOKEN_PROGRAM_ID){const keys=[{pubkey:payer,isSigner:true,isWritable:true},{pubkey:associatedToken,isSigner:false,isWritable:true},{pubkey:owner,isSigner:false,isWritable:false},{pubkey:mint,isSigner:false,isWritable:false},{pubkey:_web.SystemProgram.programId,isSigner:false,isWritable:false},{pubkey:programId,isSigner:false,isWritable:false},{pubkey:_web.SYSVAR_RENT_PUBKEY,isSigner:false,isWritable:false}];return new _web.TransactionInstruction({keys:keys,programId:associatedTokenProgramId,data:Buffer.alloc(0)})}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"@solana/web3.js":99,buffer:269}],72:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.burnInstructionData=void 0;exports.createBurnInstruction=createBurnInstruction;exports.decodeBurnInstruction=decodeBurnInstruction;exports.decodeBurnInstructionUnchecked=decodeBurnInstructionUnchecked;var _bufferLayout=require("@solana/buffer-layout");var _bufferLayoutUtils=require("@solana/buffer-layout-utils");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _internal=require("./internal.mjs");var _types=require("./types.mjs");const burnInstructionData=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("instruction"),(0,_bufferLayoutUtils.u64)("amount")]);exports.burnInstructionData=burnInstructionData;function createBurnInstruction(account,mint,owner,amount,multiSigners=[],programId=_constants.TOKEN_PROGRAM_ID){const keys=(0,_internal.addSigners)([{pubkey:account,isSigner:false,isWritable:true},{pubkey:mint,isSigner:false,isWritable:true}],owner,multiSigners);const data=Buffer.alloc(burnInstructionData.span);burnInstructionData.encode({instruction:_types.TokenInstruction.Burn,amount:BigInt(amount)},data);return new _web.TransactionInstruction({keys:keys,programId:programId,data:data})}function decodeBurnInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.programId.equals(programId))throw new _errors.TokenInvalidInstructionProgramError;if(instruction.data.length!==burnInstructionData.span)throw new _errors.TokenInvalidInstructionDataError;const{keys:{account,mint,owner,multiSigners},data}=decodeBurnInstructionUnchecked(instruction);if(data.instruction!==_types.TokenInstruction.Burn)throw new _errors.TokenInvalidInstructionTypeError;if(!account||!mint||!owner)throw new _errors.TokenInvalidInstructionKeysError;return{programId:programId,keys:{account:account,mint:mint,owner:owner,multiSigners:multiSigners},data:data}}function decodeBurnInstructionUnchecked({programId,keys:[account,mint,owner,...multiSigners],data}){return{programId:programId,keys:{account:account,mint:mint,owner:owner,multiSigners:multiSigners},data:burnInstructionData.decode(data)}}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"./../errors.mjs":67,"./internal.mjs":85,"./types.mjs":94,"@solana/buffer-layout":43,"@solana/buffer-layout-utils":40,"@solana/web3.js":99,buffer:269}],73:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.burnCheckedInstructionData=void 0;exports.createBurnCheckedInstruction=createBurnCheckedInstruction;exports.decodeBurnCheckedInstruction=decodeBurnCheckedInstruction;exports.decodeBurnCheckedInstructionUnchecked=decodeBurnCheckedInstructionUnchecked;var _bufferLayout=require("@solana/buffer-layout");var _bufferLayoutUtils=require("@solana/buffer-layout-utils");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _internal=require("./internal.mjs");var _types=require("./types.mjs");const burnCheckedInstructionData=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("instruction"),(0,_bufferLayoutUtils.u64)("amount"),(0,_bufferLayout.u8)("decimals")]);exports.burnCheckedInstructionData=burnCheckedInstructionData;function createBurnCheckedInstruction(account,mint,owner,amount,decimals,multiSigners=[],programId=_constants.TOKEN_PROGRAM_ID){const keys=(0,_internal.addSigners)([{pubkey:account,isSigner:false,isWritable:true},{pubkey:mint,isSigner:false,isWritable:true}],owner,multiSigners);const data=Buffer.alloc(burnCheckedInstructionData.span);burnCheckedInstructionData.encode({instruction:_types.TokenInstruction.BurnChecked,amount:BigInt(amount),decimals:decimals},data);return new _web.TransactionInstruction({keys:keys,programId:programId,data:data})}function decodeBurnCheckedInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.programId.equals(programId))throw new _errors.TokenInvalidInstructionProgramError;if(instruction.data.length!==burnCheckedInstructionData.span)throw new _errors.TokenInvalidInstructionDataError;const{keys:{account,mint,owner,multiSigners},data}=decodeBurnCheckedInstructionUnchecked(instruction);if(data.instruction!==_types.TokenInstruction.BurnChecked)throw new _errors.TokenInvalidInstructionTypeError;if(!account||!mint||!owner)throw new _errors.TokenInvalidInstructionKeysError;return{programId:programId,keys:{account:account,mint:mint,owner:owner,multiSigners:multiSigners},data:data}}function decodeBurnCheckedInstructionUnchecked({programId,keys:[account,mint,owner,...multiSigners],data}){return{programId:programId,keys:{account:account,mint:mint,owner:owner,multiSigners:multiSigners},data:burnCheckedInstructionData.decode(data)}}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"./../errors.mjs":67,"./internal.mjs":85,"./types.mjs":94,"@solana/buffer-layout":43,"@solana/buffer-layout-utils":40,"@solana/web3.js":99,buffer:269}],74:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.closeAccountInstructionData=void 0;exports.createCloseAccountInstruction=createCloseAccountInstruction;exports.decodeCloseAccountInstruction=decodeCloseAccountInstruction;exports.decodeCloseAccountInstructionUnchecked=decodeCloseAccountInstructionUnchecked;var _bufferLayout=require("@solana/buffer-layout");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _internal=require("./internal.mjs");var _types=require("./types.mjs");const closeAccountInstructionData=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("instruction")]);exports.closeAccountInstructionData=closeAccountInstructionData;function createCloseAccountInstruction(account,destination,authority,multiSigners=[],programId=_constants.TOKEN_PROGRAM_ID){const keys=(0,_internal.addSigners)([{pubkey:account,isSigner:false,isWritable:true},{pubkey:destination,isSigner:false,isWritable:true}],authority,multiSigners);const data=Buffer.alloc(closeAccountInstructionData.span);closeAccountInstructionData.encode({instruction:_types.TokenInstruction.CloseAccount},data);return new _web.TransactionInstruction({keys:keys,programId:programId,data:data})}function decodeCloseAccountInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.programId.equals(programId))throw new _errors.TokenInvalidInstructionProgramError;if(instruction.data.length!==closeAccountInstructionData.span)throw new _errors.TokenInvalidInstructionDataError;const{keys:{account,destination,authority,multiSigners},data}=decodeCloseAccountInstructionUnchecked(instruction);if(data.instruction!==_types.TokenInstruction.CloseAccount)throw new _errors.TokenInvalidInstructionTypeError;if(!account||!destination||!authority)throw new _errors.TokenInvalidInstructionKeysError;return{programId:programId,keys:{account:account,destination:destination,authority:authority,multiSigners:multiSigners},data:data}}function decodeCloseAccountInstructionUnchecked({programId,keys:[account,destination,authority,...multiSigners],data}){return{programId:programId,keys:{account:account,destination:destination,authority:authority,multiSigners:multiSigners},data:closeAccountInstructionData.decode(data)}}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"./../errors.mjs":67,"./internal.mjs":85,"./types.mjs":94,"@solana/buffer-layout":43,"@solana/web3.js":99,buffer:269}],75:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.decodeInstruction=decodeInstruction;exports.isApproveCheckedInstruction=isApproveCheckedInstruction;exports.isApproveInstruction=isApproveInstruction;exports.isBurnCheckedInstruction=isBurnCheckedInstruction;exports.isBurnInstruction=isBurnInstruction;exports.isCloseAccountInstruction=isCloseAccountInstruction;exports.isFreezeAccountInstruction=isFreezeAccountInstruction;exports.isInitializeAccountInstruction=isInitializeAccountInstruction;exports.isInitializeMintInstruction=isInitializeMintInstruction;exports.isInitializeMultisigInstruction=isInitializeMultisigInstruction;exports.isMintToCheckedInstruction=isMintToCheckedInstruction;exports.isMintToInstruction=isMintToInstruction;exports.isRevokeInstruction=isRevokeInstruction;exports.isSetAuthorityInstruction=isSetAuthorityInstruction;exports.isSyncNativeInstruction=isSyncNativeInstruction;exports.isThawAccountInstruction=isThawAccountInstruction;exports.isTransferCheckedInstruction=isTransferCheckedInstruction;exports.isTransferInstruction=isTransferInstruction;var _bufferLayout=require("@solana/buffer-layout");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _approve=require("./approve.mjs");var _approveChecked=require("./approveChecked.mjs");var _burn=require("./burn.mjs");var _burnChecked=require("./burnChecked.mjs");var _closeAccount=require("./closeAccount.mjs");var _freezeAccount=require("./freezeAccount.mjs");var _initializeAccount=require("./initializeAccount.mjs");var _initializeMint=require("./initializeMint.mjs");var _initializeMultisig=require("./initializeMultisig.mjs");var _mintTo=require("./mintTo.mjs");var _mintToChecked=require("./mintToChecked.mjs");var _revoke=require("./revoke.mjs");var _setAuthority=require("./setAuthority.mjs");var _syncNative=require("./syncNative.mjs");var _thawAccount=require("./thawAccount.mjs");var _transfer=require("./transfer.mjs");var _transferChecked=require("./transferChecked.mjs");var _types=require("./types.mjs");function decodeInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.data.length)throw new _errors.TokenInvalidInstructionDataError;const type=(0,_bufferLayout.u8)().decode(instruction.data);if(type===_types.TokenInstruction.InitializeMint)return(0,_initializeMint.decodeInitializeMintInstruction)(instruction,programId);if(type===_types.TokenInstruction.InitializeAccount)return(0,_initializeAccount.decodeInitializeAccountInstruction)(instruction,programId);if(type===_types.TokenInstruction.InitializeMultisig)return(0,_initializeMultisig.decodeInitializeMultisigInstruction)(instruction,programId);if(type===_types.TokenInstruction.Transfer)return(0,_transfer.decodeTransferInstruction)(instruction,programId);if(type===_types.TokenInstruction.Approve)return(0,_approve.decodeApproveInstruction)(instruction,programId);if(type===_types.TokenInstruction.Revoke)return(0,_revoke.decodeRevokeInstruction)(instruction,programId);if(type===_types.TokenInstruction.SetAuthority)return(0,_setAuthority.decodeSetAuthorityInstruction)(instruction,programId);if(type===_types.TokenInstruction.MintTo)return(0,_mintTo.decodeMintToInstruction)(instruction,programId);if(type===_types.TokenInstruction.Burn)return(0,_burn.decodeBurnInstruction)(instruction,programId);if(type===_types.TokenInstruction.CloseAccount)return(0,_closeAccount.decodeCloseAccountInstruction)(instruction,programId);if(type===_types.TokenInstruction.FreezeAccount)return(0,_freezeAccount.decodeFreezeAccountInstruction)(instruction,programId);if(type===_types.TokenInstruction.ThawAccount)return(0,_thawAccount.decodeThawAccountInstruction)(instruction,programId);if(type===_types.TokenInstruction.TransferChecked)return(0,_transferChecked.decodeTransferCheckedInstruction)(instruction,programId);if(type===_types.TokenInstruction.ApproveChecked)return(0,_approveChecked.decodeApproveCheckedInstruction)(instruction,programId);if(type===_types.TokenInstruction.MintToChecked)return(0,_mintToChecked.decodeMintToCheckedInstruction)(instruction,programId);if(type===_types.TokenInstruction.BurnChecked)return(0,_burnChecked.decodeBurnCheckedInstruction)(instruction,programId);if(type===_types.TokenInstruction.InitializeAccount2)throw new _errors.TokenInvalidInstructionTypeError;if(type===_types.TokenInstruction.SyncNative)return(0,_syncNative.decodeSyncNativeInstruction)(instruction,programId);if(type===_types.TokenInstruction.InitializeAccount3)throw new _errors.TokenInvalidInstructionTypeError;if(type===_types.TokenInstruction.InitializeMultisig2)throw new _errors.TokenInvalidInstructionTypeError;if(type===_types.TokenInstruction.InitializeMint2)throw new _errors.TokenInvalidInstructionTypeError;throw new _errors.TokenInvalidInstructionTypeError}function isInitializeMintInstruction(decoded){return decoded.data.instruction===_types.TokenInstruction.InitializeMint}function isInitializeAccountInstruction(decoded){return decoded.data.instruction===_types.TokenInstruction.InitializeAccount}function isInitializeMultisigInstruction(decoded){return decoded.data.instruction===_types.TokenInstruction.InitializeMultisig}function isTransferInstruction(decoded){return decoded.data.instruction===_types.TokenInstruction.Transfer}function isApproveInstruction(decoded){return decoded.data.instruction===_types.TokenInstruction.Approve}function isRevokeInstruction(decoded){return decoded.data.instruction===_types.TokenInstruction.Revoke}function isSetAuthorityInstruction(decoded){return decoded.data.instruction===_types.TokenInstruction.SetAuthority}function isMintToInstruction(decoded){return decoded.data.instruction===_types.TokenInstruction.MintTo}function isBurnInstruction(decoded){return decoded.data.instruction===_types.TokenInstruction.Burn}function isCloseAccountInstruction(decoded){return decoded.data.instruction===_types.TokenInstruction.CloseAccount}function isFreezeAccountInstruction(decoded){return decoded.data.instruction===_types.TokenInstruction.FreezeAccount}function isThawAccountInstruction(decoded){return decoded.data.instruction===_types.TokenInstruction.ThawAccount}function isTransferCheckedInstruction(decoded){return decoded.data.instruction===_types.TokenInstruction.TransferChecked}function isApproveCheckedInstruction(decoded){return decoded.data.instruction===_types.TokenInstruction.ApproveChecked}function isMintToCheckedInstruction(decoded){return decoded.data.instruction===_types.TokenInstruction.MintToChecked}function isBurnCheckedInstruction(decoded){return decoded.data.instruction===_types.TokenInstruction.BurnChecked}function isSyncNativeInstruction(decoded){return decoded.data.instruction===_types.TokenInstruction.SyncNative}},{"./../constants.mjs":66,"./../errors.mjs":67,"./approve.mjs":69,"./approveChecked.mjs":70,"./burn.mjs":72,"./burnChecked.mjs":73,"./closeAccount.mjs":74,"./freezeAccount.mjs":76,"./initializeAccount.mjs":78,"./initializeMint.mjs":81,"./initializeMultisig.mjs":83,"./mintTo.mjs":86,"./mintToChecked.mjs":87,"./revoke.mjs":88,"./setAuthority.mjs":89,"./syncNative.mjs":90,"./thawAccount.mjs":91,"./transfer.mjs":92,"./transferChecked.mjs":93,"./types.mjs":94,"@solana/buffer-layout":43}],76:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFreezeAccountInstruction=createFreezeAccountInstruction;exports.decodeFreezeAccountInstruction=decodeFreezeAccountInstruction;exports.decodeFreezeAccountInstructionUnchecked=decodeFreezeAccountInstructionUnchecked;exports.freezeAccountInstructionData=void 0;var _bufferLayout=require("@solana/buffer-layout");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _internal=require("./internal.mjs");var _types=require("./types.mjs");const freezeAccountInstructionData=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("instruction")]);exports.freezeAccountInstructionData=freezeAccountInstructionData;function createFreezeAccountInstruction(account,mint,authority,multiSigners=[],programId=_constants.TOKEN_PROGRAM_ID){const keys=(0,_internal.addSigners)([{pubkey:account,isSigner:false,isWritable:true},{pubkey:mint,isSigner:false,isWritable:false}],authority,multiSigners);const data=Buffer.alloc(freezeAccountInstructionData.span);freezeAccountInstructionData.encode({instruction:_types.TokenInstruction.FreezeAccount},data);return new _web.TransactionInstruction({keys:keys,programId:programId,data:data})}function decodeFreezeAccountInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.programId.equals(programId))throw new _errors.TokenInvalidInstructionProgramError;if(instruction.data.length!==freezeAccountInstructionData.span)throw new _errors.TokenInvalidInstructionDataError;const{keys:{account,mint,authority,multiSigners},data}=decodeFreezeAccountInstructionUnchecked(instruction);if(data.instruction!==_types.TokenInstruction.FreezeAccount)throw new _errors.TokenInvalidInstructionTypeError;if(!account||!mint||!authority)throw new _errors.TokenInvalidInstructionKeysError;return{programId:programId,keys:{account:account,mint:mint,authority:authority,multiSigners:multiSigners},data:data}}function decodeFreezeAccountInstructionUnchecked({programId,keys:[account,mint,authority,...multiSigners],data}){return{programId:programId,keys:{account:account,mint:mint,authority:authority,multiSigners:multiSigners},data:freezeAccountInstructionData.decode(data)}}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"./../errors.mjs":67,"./internal.mjs":85,"./types.mjs":94,"@solana/buffer-layout":43,"@solana/web3.js":99,buffer:269}],77:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _types=require("./types.mjs");Object.keys(_types).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_types[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _types[key]}})});var _initializeMint=require("./initializeMint.mjs");Object.keys(_initializeMint).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_initializeMint[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _initializeMint[key]}})});var _initializeAccount=require("./initializeAccount.mjs");Object.keys(_initializeAccount).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_initializeAccount[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _initializeAccount[key]}})});var _initializeMultisig=require("./initializeMultisig.mjs");Object.keys(_initializeMultisig).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_initializeMultisig[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _initializeMultisig[key]}})});var _transfer=require("./transfer.mjs");Object.keys(_transfer).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_transfer[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _transfer[key]}})});var _approve=require("./approve.mjs");Object.keys(_approve).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_approve[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _approve[key]}})});var _revoke=require("./revoke.mjs");Object.keys(_revoke).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_revoke[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _revoke[key]}})});var _setAuthority=require("./setAuthority.mjs");Object.keys(_setAuthority).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_setAuthority[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _setAuthority[key]}})});var _mintTo=require("./mintTo.mjs");Object.keys(_mintTo).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_mintTo[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _mintTo[key]}})});var _burn=require("./burn.mjs");Object.keys(_burn).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_burn[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _burn[key]}})});var _closeAccount=require("./closeAccount.mjs");Object.keys(_closeAccount).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_closeAccount[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _closeAccount[key]}})});var _freezeAccount=require("./freezeAccount.mjs");Object.keys(_freezeAccount).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_freezeAccount[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _freezeAccount[key]}})});var _thawAccount=require("./thawAccount.mjs");Object.keys(_thawAccount).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_thawAccount[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _thawAccount[key]}})});var _transferChecked=require("./transferChecked.mjs");Object.keys(_transferChecked).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_transferChecked[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _transferChecked[key]}})});var _approveChecked=require("./approveChecked.mjs");Object.keys(_approveChecked).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_approveChecked[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _approveChecked[key]}})});var _mintToChecked=require("./mintToChecked.mjs");Object.keys(_mintToChecked).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_mintToChecked[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _mintToChecked[key]}})});var _burnChecked=require("./burnChecked.mjs");Object.keys(_burnChecked).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_burnChecked[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _burnChecked[key]}})});var _initializeAccount2=require("./initializeAccount2.mjs");Object.keys(_initializeAccount2).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_initializeAccount2[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _initializeAccount2[key]}})});var _syncNative=require("./syncNative.mjs");Object.keys(_syncNative).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_syncNative[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _syncNative[key]}})});var _initializeAccount3=require("./initializeAccount3.mjs");Object.keys(_initializeAccount3).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_initializeAccount3[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _initializeAccount3[key]}})});var _initializeMultisig2=require("./initializeMultisig2.mjs");Object.keys(_initializeMultisig2).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_initializeMultisig2[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _initializeMultisig2[key]}})});var _initializeMint2=require("./initializeMint2.mjs");Object.keys(_initializeMint2).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_initializeMint2[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _initializeMint2[key]}})});var _decode=require("./decode.mjs");Object.keys(_decode).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_decode[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _decode[key]}})});var _associatedTokenAccount=require("./associatedTokenAccount.mjs");Object.keys(_associatedTokenAccount).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_associatedTokenAccount[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _associatedTokenAccount[key]}})})},{"./approve.mjs":69,"./approveChecked.mjs":70,"./associatedTokenAccount.mjs":71,"./burn.mjs":72,"./burnChecked.mjs":73,"./closeAccount.mjs":74,"./decode.mjs":75,"./freezeAccount.mjs":76,"./initializeAccount.mjs":78,"./initializeAccount2.mjs":79,"./initializeAccount3.mjs":80,"./initializeMint.mjs":81,"./initializeMint2.mjs":82,"./initializeMultisig.mjs":83,"./initializeMultisig2.mjs":84,"./mintTo.mjs":86,"./mintToChecked.mjs":87,"./revoke.mjs":88,"./setAuthority.mjs":89,"./syncNative.mjs":90,"./thawAccount.mjs":91,"./transfer.mjs":92,"./transferChecked.mjs":93,"./types.mjs":94}],78:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createInitializeAccountInstruction=createInitializeAccountInstruction;exports.decodeInitializeAccountInstruction=decodeInitializeAccountInstruction;exports.decodeInitializeAccountInstructionUnchecked=decodeInitializeAccountInstructionUnchecked;exports.initializeAccountInstructionData=void 0;var _bufferLayout=require("@solana/buffer-layout");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _types=require("./types.mjs");const initializeAccountInstructionData=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("instruction")]);exports.initializeAccountInstructionData=initializeAccountInstructionData;function createInitializeAccountInstruction(account,mint,owner,programId=_constants.TOKEN_PROGRAM_ID){const keys=[{pubkey:account,isSigner:false,isWritable:true},{pubkey:mint,isSigner:false,isWritable:false},{pubkey:owner,isSigner:false,isWritable:false},{pubkey:_web.SYSVAR_RENT_PUBKEY,isSigner:false,isWritable:false}];const data=Buffer.alloc(initializeAccountInstructionData.span);initializeAccountInstructionData.encode({instruction:_types.TokenInstruction.InitializeAccount},data);return new _web.TransactionInstruction({keys:keys,programId:programId,data:data})}function decodeInitializeAccountInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.programId.equals(programId))throw new _errors.TokenInvalidInstructionProgramError;if(instruction.data.length!==initializeAccountInstructionData.span)throw new _errors.TokenInvalidInstructionDataError;const{keys:{account,mint,owner,rent},data}=decodeInitializeAccountInstructionUnchecked(instruction);if(data.instruction!==_types.TokenInstruction.InitializeAccount)throw new _errors.TokenInvalidInstructionTypeError;if(!account||!mint||!owner||!rent)throw new _errors.TokenInvalidInstructionKeysError;return{programId:programId,keys:{account:account,mint:mint,owner:owner,rent:rent},data:data}}function decodeInitializeAccountInstructionUnchecked({programId,keys:[account,mint,owner,rent],data}){return{programId:programId,keys:{account:account,mint:mint,owner:owner,rent:rent},data:initializeAccountInstructionData.decode(data)}}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"./../errors.mjs":67,"./types.mjs":94,"@solana/buffer-layout":43,"@solana/web3.js":99,buffer:269}],79:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true})},{}],80:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true})},{}],81:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createInitializeMintInstruction=createInitializeMintInstruction;exports.decodeInitializeMintInstruction=decodeInitializeMintInstruction;exports.decodeInitializeMintInstructionUnchecked=decodeInitializeMintInstructionUnchecked;exports.initializeMintInstructionData=void 0;var _bufferLayout=require("@solana/buffer-layout");var _bufferLayoutUtils=require("@solana/buffer-layout-utils");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _types=require("./types.mjs");const initializeMintInstructionData=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("instruction"),(0,_bufferLayout.u8)("decimals"),(0,_bufferLayoutUtils.publicKey)("mintAuthority"),(0,_bufferLayout.u8)("freezeAuthorityOption"),(0,_bufferLayoutUtils.publicKey)("freezeAuthority")]);exports.initializeMintInstructionData=initializeMintInstructionData;function createInitializeMintInstruction(mint,decimals,mintAuthority,freezeAuthority,programId=_constants.TOKEN_PROGRAM_ID){const keys=[{pubkey:mint,isSigner:false,isWritable:true},{pubkey:_web.SYSVAR_RENT_PUBKEY,isSigner:false,isWritable:false}];const data=Buffer.alloc(initializeMintInstructionData.span);initializeMintInstructionData.encode({instruction:_types.TokenInstruction.InitializeMint,decimals:decimals,mintAuthority:mintAuthority,freezeAuthorityOption:freezeAuthority?1:0,freezeAuthority:freezeAuthority||new _web.PublicKey(0)},data);return new _web.TransactionInstruction({keys:keys,programId:programId,data:data})}function decodeInitializeMintInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.programId.equals(programId))throw new _errors.TokenInvalidInstructionProgramError;if(instruction.data.length!==initializeMintInstructionData.span)throw new _errors.TokenInvalidInstructionDataError;const{keys:{mint,rent},data}=decodeInitializeMintInstructionUnchecked(instruction);if(data.instruction!==_types.TokenInstruction.InitializeMint)throw new _errors.TokenInvalidInstructionTypeError;if(!mint||!rent)throw new _errors.TokenInvalidInstructionKeysError;return{programId:programId,keys:{mint:mint,rent:rent},data:data}}function decodeInitializeMintInstructionUnchecked({programId,keys:[mint,rent],data}){const{instruction,decimals,mintAuthority,freezeAuthorityOption,freezeAuthority}=initializeMintInstructionData.decode(data);return{programId:programId,keys:{mint:mint,rent:rent},data:{instruction:instruction,decimals:decimals,mintAuthority:mintAuthority,freezeAuthority:freezeAuthorityOption?freezeAuthority:null}}}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"./../errors.mjs":67,"./types.mjs":94,"@solana/buffer-layout":43,"@solana/buffer-layout-utils":40,"@solana/web3.js":99,buffer:269}],82:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true})},{}],83:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createInitializeMultisigInstruction=createInitializeMultisigInstruction;exports.decodeInitializeMultisigInstruction=decodeInitializeMultisigInstruction;exports.decodeInitializeMultisigInstructionUnchecked=decodeInitializeMultisigInstructionUnchecked;exports.initializeMultisigInstructionData=void 0;var _bufferLayout=require("@solana/buffer-layout");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _types=require("./types.mjs");const initializeMultisigInstructionData=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("instruction"),(0,_bufferLayout.u8)("m")]);exports.initializeMultisigInstructionData=initializeMultisigInstructionData;function createInitializeMultisigInstruction(account,signers,m,programId=_constants.TOKEN_PROGRAM_ID){const keys=[{pubkey:account,isSigner:false,isWritable:true},{pubkey:_web.SYSVAR_RENT_PUBKEY,isSigner:false,isWritable:false}];for(const signer of signers){keys.push({pubkey:signer,isSigner:false,isWritable:false})}const data=Buffer.alloc(initializeMultisigInstructionData.span);initializeMultisigInstructionData.encode({instruction:_types.TokenInstruction.InitializeMultisig,m:m},data);return new _web.TransactionInstruction({keys:keys,programId:programId,data:data})}function decodeInitializeMultisigInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.programId.equals(programId))throw new _errors.TokenInvalidInstructionProgramError;if(instruction.data.length!==initializeMultisigInstructionData.span)throw new _errors.TokenInvalidInstructionDataError;const{keys:{account,rent,signers},data}=decodeInitializeMultisigInstructionUnchecked(instruction);if(data.instruction!==_types.TokenInstruction.InitializeMultisig)throw new _errors.TokenInvalidInstructionTypeError;if(!account||!rent||!signers.length)throw new _errors.TokenInvalidInstructionKeysError;return{programId:programId,keys:{account:account,rent:rent,signers:signers},data:data}}function decodeInitializeMultisigInstructionUnchecked({programId,keys:[account,rent,...signers],data}){return{programId:programId,keys:{account:account,rent:rent,signers:signers},data:initializeMultisigInstructionData.decode(data)}}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"./../errors.mjs":67,"./types.mjs":94,"@solana/buffer-layout":43,"@solana/web3.js":99,buffer:269}],84:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true})},{}],85:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addSigners=addSigners;function addSigners(keys,ownerOrAuthority,multiSigners){if(multiSigners.length){keys.push({pubkey:ownerOrAuthority,isSigner:false,isWritable:false});for(const signer of multiSigners){keys.push({pubkey:signer.publicKey,isSigner:true,isWritable:false})}}else{keys.push({pubkey:ownerOrAuthority,isSigner:true,isWritable:false})}return keys}},{}],86:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createMintToInstruction=createMintToInstruction;exports.decodeMintToInstruction=decodeMintToInstruction;exports.decodeMintToInstructionUnchecked=decodeMintToInstructionUnchecked;exports.mintToInstructionData=void 0;var _bufferLayout=require("@solana/buffer-layout");var _bufferLayoutUtils=require("@solana/buffer-layout-utils");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _internal=require("./internal.mjs");var _types=require("./types.mjs");const mintToInstructionData=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("instruction"),(0,_bufferLayoutUtils.u64)("amount")]);exports.mintToInstructionData=mintToInstructionData;function createMintToInstruction(mint,destination,authority,amount,multiSigners=[],programId=_constants.TOKEN_PROGRAM_ID){const keys=(0,_internal.addSigners)([{pubkey:mint,isSigner:false,isWritable:true},{pubkey:destination,isSigner:false,isWritable:true}],authority,multiSigners);const data=Buffer.alloc(mintToInstructionData.span);mintToInstructionData.encode({instruction:_types.TokenInstruction.MintTo,amount:BigInt(amount)},data);return new _web.TransactionInstruction({keys:keys,programId:programId,data:data})}function decodeMintToInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.programId.equals(programId))throw new _errors.TokenInvalidInstructionProgramError;if(instruction.data.length!==mintToInstructionData.span)throw new _errors.TokenInvalidInstructionDataError;const{keys:{mint,destination,authority,multiSigners},data}=decodeMintToInstructionUnchecked(instruction);if(data.instruction!==_types.TokenInstruction.MintTo)throw new _errors.TokenInvalidInstructionTypeError;if(!mint||!destination||!authority)throw new _errors.TokenInvalidInstructionKeysError;return{programId:programId,keys:{mint:mint,destination:destination,authority:authority,multiSigners:multiSigners},data:data}}function decodeMintToInstructionUnchecked({programId,keys:[mint,destination,authority,...multiSigners],data}){return{programId:programId,keys:{mint:mint,destination:destination,authority:authority,multiSigners:multiSigners},data:mintToInstructionData.decode(data)}}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"./../errors.mjs":67,"./internal.mjs":85,"./types.mjs":94,"@solana/buffer-layout":43,"@solana/buffer-layout-utils":40,"@solana/web3.js":99,buffer:269}],87:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createMintToCheckedInstruction=createMintToCheckedInstruction;exports.decodeMintToCheckedInstruction=decodeMintToCheckedInstruction;exports.decodeMintToCheckedInstructionUnchecked=decodeMintToCheckedInstructionUnchecked;exports.mintToCheckedInstructionData=void 0;var _bufferLayout=require("@solana/buffer-layout");var _bufferLayoutUtils=require("@solana/buffer-layout-utils");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _internal=require("./internal.mjs");var _types=require("./types.mjs");const mintToCheckedInstructionData=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("instruction"),(0,_bufferLayoutUtils.u64)("amount"),(0,_bufferLayout.u8)("decimals")]);exports.mintToCheckedInstructionData=mintToCheckedInstructionData;function createMintToCheckedInstruction(mint,destination,authority,amount,decimals,multiSigners=[],programId=_constants.TOKEN_PROGRAM_ID){const keys=(0,_internal.addSigners)([{pubkey:mint,isSigner:false,isWritable:true},{pubkey:destination,isSigner:false,isWritable:true}],authority,multiSigners);const data=Buffer.alloc(mintToCheckedInstructionData.span);mintToCheckedInstructionData.encode({instruction:_types.TokenInstruction.MintToChecked,amount:BigInt(amount),decimals:decimals},data);return new _web.TransactionInstruction({keys:keys,programId:programId,data:data})}function decodeMintToCheckedInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.programId.equals(programId))throw new _errors.TokenInvalidInstructionProgramError;if(instruction.data.length!==mintToCheckedInstructionData.span)throw new _errors.TokenInvalidInstructionDataError;const{keys:{mint,destination,authority,multiSigners},data}=decodeMintToCheckedInstructionUnchecked(instruction);if(data.instruction!==_types.TokenInstruction.MintToChecked)throw new _errors.TokenInvalidInstructionTypeError;if(!mint||!destination||!authority)throw new _errors.TokenInvalidInstructionKeysError;return{programId:programId,keys:{mint:mint,destination:destination,authority:authority,multiSigners:multiSigners},data:data}}function decodeMintToCheckedInstructionUnchecked({programId,keys:[mint,destination,authority,...multiSigners],data}){return{programId:programId,keys:{mint:mint,destination:destination,authority:authority,multiSigners:multiSigners},data:mintToCheckedInstructionData.decode(data)}}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"./../errors.mjs":67,"./internal.mjs":85,"./types.mjs":94,"@solana/buffer-layout":43,"@solana/buffer-layout-utils":40,"@solana/web3.js":99,buffer:269}],88:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createRevokeInstruction=createRevokeInstruction;exports.decodeRevokeInstruction=decodeRevokeInstruction;exports.decodeRevokeInstructionUnchecked=decodeRevokeInstructionUnchecked;exports.revokeInstructionData=void 0;var _bufferLayout=require("@solana/buffer-layout");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _internal=require("./internal.mjs");var _types=require("./types.mjs");const revokeInstructionData=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("instruction")]);exports.revokeInstructionData=revokeInstructionData;function createRevokeInstruction(account,owner,multiSigners=[],programId=_constants.TOKEN_PROGRAM_ID){const keys=(0,_internal.addSigners)([{pubkey:account,isSigner:false,isWritable:true}],owner,multiSigners);const data=Buffer.alloc(revokeInstructionData.span);revokeInstructionData.encode({instruction:_types.TokenInstruction.Revoke},data);return new _web.TransactionInstruction({keys:keys,programId:programId,data:data})}function decodeRevokeInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.programId.equals(programId))throw new _errors.TokenInvalidInstructionProgramError;if(instruction.data.length!==revokeInstructionData.span)throw new _errors.TokenInvalidInstructionDataError;const{keys:{account,owner,multiSigners},data}=decodeRevokeInstructionUnchecked(instruction);if(data.instruction!==_types.TokenInstruction.Revoke)throw new _errors.TokenInvalidInstructionTypeError;if(!account||!owner)throw new _errors.TokenInvalidInstructionKeysError;return{programId:programId,keys:{account:account,owner:owner,multiSigners:multiSigners},data:data}}function decodeRevokeInstructionUnchecked({programId,keys:[account,owner,...multiSigners],data}){return{programId:programId,keys:{account:account,owner:owner,multiSigners:multiSigners},data:revokeInstructionData.decode(data)}}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"./../errors.mjs":67,"./internal.mjs":85,"./types.mjs":94,"@solana/buffer-layout":43,"@solana/web3.js":99,buffer:269}],89:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AuthorityType=void 0;exports.createSetAuthorityInstruction=createSetAuthorityInstruction;exports.decodeSetAuthorityInstruction=decodeSetAuthorityInstruction;exports.decodeSetAuthorityInstructionUnchecked=decodeSetAuthorityInstructionUnchecked;exports.setAuthorityInstructionData=void 0;var _bufferLayout=require("@solana/buffer-layout");var _bufferLayoutUtils=require("@solana/buffer-layout-utils");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _internal=require("./internal.mjs");var _types=require("./types.mjs");var AuthorityType;exports.AuthorityType=AuthorityType;(function(AuthorityType){AuthorityType[AuthorityType["MintTokens"]=0]="MintTokens";AuthorityType[AuthorityType["FreezeAccount"]=1]="FreezeAccount";AuthorityType[AuthorityType["AccountOwner"]=2]="AccountOwner";AuthorityType[AuthorityType["CloseAccount"]=3]="CloseAccount"})(AuthorityType||(exports.AuthorityType=AuthorityType={}));const setAuthorityInstructionData=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("instruction"),(0,_bufferLayout.u8)("authorityType"),(0,_bufferLayout.u8)("newAuthorityOption"),(0,_bufferLayoutUtils.publicKey)("newAuthority")]);exports.setAuthorityInstructionData=setAuthorityInstructionData;function createSetAuthorityInstruction(account,currentAuthority,authorityType,newAuthority,multiSigners=[],programId=_constants.TOKEN_PROGRAM_ID){const keys=(0,_internal.addSigners)([{pubkey:account,isSigner:false,isWritable:true}],currentAuthority,multiSigners);const data=Buffer.alloc(setAuthorityInstructionData.span);setAuthorityInstructionData.encode({instruction:_types.TokenInstruction.SetAuthority,authorityType:authorityType,newAuthorityOption:newAuthority?1:0,newAuthority:newAuthority||new _web.PublicKey(0)},data);return new _web.TransactionInstruction({keys:keys,programId:programId,data:data})}function decodeSetAuthorityInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.programId.equals(programId))throw new _errors.TokenInvalidInstructionProgramError;if(instruction.data.length!==setAuthorityInstructionData.span)throw new _errors.TokenInvalidInstructionDataError;const{keys:{account,currentAuthority,multiSigners},data}=decodeSetAuthorityInstructionUnchecked(instruction);if(data.instruction!==_types.TokenInstruction.SetAuthority)throw new _errors.TokenInvalidInstructionTypeError;if(!account||!currentAuthority)throw new _errors.TokenInvalidInstructionKeysError;return{programId:programId,keys:{account:account,currentAuthority:currentAuthority,multiSigners:multiSigners},data:data}}function decodeSetAuthorityInstructionUnchecked({programId,keys:[account,currentAuthority,...multiSigners],data}){const{instruction,authorityType,newAuthorityOption,newAuthority}=setAuthorityInstructionData.decode(data);return{programId:programId,keys:{account:account,currentAuthority:currentAuthority,multiSigners:multiSigners},data:{instruction:instruction,authorityType:authorityType,newAuthority:newAuthorityOption?newAuthority:null}}}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"./../errors.mjs":67,"./internal.mjs":85,"./types.mjs":94,"@solana/buffer-layout":43,"@solana/buffer-layout-utils":40,"@solana/web3.js":99,buffer:269}],90:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSyncNativeInstruction=createSyncNativeInstruction;exports.decodeSyncNativeInstruction=decodeSyncNativeInstruction;exports.decodeSyncNativeInstructionUnchecked=decodeSyncNativeInstructionUnchecked;exports.syncNativeInstructionData=void 0;var _bufferLayout=require("@solana/buffer-layout");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _types=require("./types.mjs");const syncNativeInstructionData=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("instruction")]);exports.syncNativeInstructionData=syncNativeInstructionData;function createSyncNativeInstruction(account,programId=_constants.TOKEN_PROGRAM_ID){const keys=[{pubkey:account,isSigner:false,isWritable:true}];const data=Buffer.alloc(syncNativeInstructionData.span);syncNativeInstructionData.encode({instruction:_types.TokenInstruction.SyncNative},data);return new _web.TransactionInstruction({keys:keys,programId:programId,data:data})}function decodeSyncNativeInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.programId.equals(programId))throw new _errors.TokenInvalidInstructionProgramError;if(instruction.data.length!==syncNativeInstructionData.span)throw new _errors.TokenInvalidInstructionDataError;const{keys:{account},data}=decodeSyncNativeInstructionUnchecked(instruction);if(data.instruction!==_types.TokenInstruction.SyncNative)throw new _errors.TokenInvalidInstructionTypeError;if(!account)throw new _errors.TokenInvalidInstructionKeysError;return{programId:programId,keys:{account:account},data:data}}function decodeSyncNativeInstructionUnchecked({programId,keys:[account],data}){return{programId:programId,keys:{account:account},data:syncNativeInstructionData.decode(data)}}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"./../errors.mjs":67,"./types.mjs":94,"@solana/buffer-layout":43,"@solana/web3.js":99,buffer:269}],91:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createThawAccountInstruction=createThawAccountInstruction;exports.decodeThawAccountInstruction=decodeThawAccountInstruction;exports.decodeThawAccountInstructionUnchecked=decodeThawAccountInstructionUnchecked;exports.thawAccountInstructionData=void 0;var _bufferLayout=require("@solana/buffer-layout");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _internal=require("./internal.mjs");var _types=require("./types.mjs");const thawAccountInstructionData=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("instruction")]);exports.thawAccountInstructionData=thawAccountInstructionData;function createThawAccountInstruction(account,mint,authority,multiSigners=[],programId=_constants.TOKEN_PROGRAM_ID){const keys=(0,_internal.addSigners)([{pubkey:account,isSigner:false,isWritable:true},{pubkey:mint,isSigner:false,isWritable:false}],authority,multiSigners);const data=Buffer.alloc(thawAccountInstructionData.span);thawAccountInstructionData.encode({instruction:_types.TokenInstruction.ThawAccount},data);return new _web.TransactionInstruction({keys:keys,programId:programId,data:data})}function decodeThawAccountInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.programId.equals(programId))throw new _errors.TokenInvalidInstructionProgramError;if(instruction.data.length!==thawAccountInstructionData.span)throw new _errors.TokenInvalidInstructionDataError;const{keys:{account,mint,authority,multiSigners},data}=decodeThawAccountInstructionUnchecked(instruction);if(data.instruction!==_types.TokenInstruction.ThawAccount)throw new _errors.TokenInvalidInstructionTypeError;if(!account||!mint||!authority)throw new _errors.TokenInvalidInstructionKeysError;return{programId:programId,keys:{account:account,mint:mint,authority:authority,multiSigners:multiSigners},data:data}}function decodeThawAccountInstructionUnchecked({programId,keys:[account,mint,authority,...multiSigners],data}){return{programId:programId,keys:{account:account,mint:mint,authority:authority,multiSigners:multiSigners},data:thawAccountInstructionData.decode(data)}}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"./../errors.mjs":67,"./internal.mjs":85,"./types.mjs":94,"@solana/buffer-layout":43,"@solana/web3.js":99,buffer:269}],92:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createTransferInstruction=createTransferInstruction;exports.decodeTransferInstruction=decodeTransferInstruction;exports.decodeTransferInstructionUnchecked=decodeTransferInstructionUnchecked;exports.transferInstructionData=void 0;var _bufferLayout=require("@solana/buffer-layout");var _bufferLayoutUtils=require("@solana/buffer-layout-utils");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _internal=require("./internal.mjs");var _types=require("./types.mjs");const transferInstructionData=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("instruction"),(0,_bufferLayoutUtils.u64)("amount")]);exports.transferInstructionData=transferInstructionData;function createTransferInstruction(source,destination,owner,amount,multiSigners=[],programId=_constants.TOKEN_PROGRAM_ID){const keys=(0,_internal.addSigners)([{pubkey:source,isSigner:false,isWritable:true},{pubkey:destination,isSigner:false,isWritable:true}],owner,multiSigners);const data=Buffer.alloc(transferInstructionData.span);transferInstructionData.encode({instruction:_types.TokenInstruction.Transfer,amount:BigInt(amount)},data);return new _web.TransactionInstruction({keys:keys,programId:programId,data:data})}function decodeTransferInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.programId.equals(programId))throw new _errors.TokenInvalidInstructionProgramError;if(instruction.data.length!==transferInstructionData.span)throw new _errors.TokenInvalidInstructionDataError;const{keys:{source,destination,owner,multiSigners},data}=decodeTransferInstructionUnchecked(instruction);if(data.instruction!==_types.TokenInstruction.Transfer)throw new _errors.TokenInvalidInstructionTypeError;if(!source||!destination||!owner)throw new _errors.TokenInvalidInstructionKeysError;return{programId:programId,keys:{source:source,destination:destination,owner:owner,multiSigners:multiSigners},data:data}}function decodeTransferInstructionUnchecked({programId,keys:[source,destination,owner,...multiSigners],data}){return{programId:programId,keys:{source:source,destination:destination,owner:owner,multiSigners:multiSigners},data:transferInstructionData.decode(data)}}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"./../errors.mjs":67,"./internal.mjs":85,"./types.mjs":94,"@solana/buffer-layout":43,"@solana/buffer-layout-utils":40,"@solana/web3.js":99,buffer:269}],93:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createTransferCheckedInstruction=createTransferCheckedInstruction;exports.decodeTransferCheckedInstruction=decodeTransferCheckedInstruction;exports.decodeTransferCheckedInstructionUnchecked=decodeTransferCheckedInstructionUnchecked;exports.transferCheckedInstructionData=void 0;var _bufferLayout=require("@solana/buffer-layout");var _bufferLayoutUtils=require("@solana/buffer-layout-utils");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var _internal=require("./internal.mjs");var _types=require("./types.mjs");const transferCheckedInstructionData=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("instruction"),(0,_bufferLayoutUtils.u64)("amount"),(0,_bufferLayout.u8)("decimals")]);exports.transferCheckedInstructionData=transferCheckedInstructionData;function createTransferCheckedInstruction(source,mint,destination,owner,amount,decimals,multiSigners=[],programId=_constants.TOKEN_PROGRAM_ID){const keys=(0,_internal.addSigners)([{pubkey:source,isSigner:false,isWritable:true},{pubkey:mint,isSigner:false,isWritable:false},{pubkey:destination,isSigner:false,isWritable:true}],owner,multiSigners);const data=Buffer.alloc(transferCheckedInstructionData.span);transferCheckedInstructionData.encode({instruction:_types.TokenInstruction.TransferChecked,amount:BigInt(amount),decimals:decimals},data);return new _web.TransactionInstruction({keys:keys,programId:programId,data:data})}function decodeTransferCheckedInstruction(instruction,programId=_constants.TOKEN_PROGRAM_ID){if(!instruction.programId.equals(programId))throw new _errors.TokenInvalidInstructionProgramError;if(instruction.data.length!==transferCheckedInstructionData.span)throw new _errors.TokenInvalidInstructionDataError;const{keys:{source,mint,destination,owner,multiSigners},data}=decodeTransferCheckedInstructionUnchecked(instruction);if(data.instruction!==_types.TokenInstruction.TransferChecked)throw new _errors.TokenInvalidInstructionTypeError;if(!source||!mint||!destination||!owner)throw new _errors.TokenInvalidInstructionKeysError;return{programId:programId,keys:{source:source,mint:mint,destination:destination,owner:owner,multiSigners:multiSigners},data:data}}function decodeTransferCheckedInstructionUnchecked({programId,keys:[source,mint,destination,owner,...multiSigners],data}){return{programId:programId,keys:{source:source,mint:mint,destination:destination,owner:owner,multiSigners:multiSigners},data:transferCheckedInstructionData.decode(data)}}}).call(this)}).call(this,require("buffer").Buffer)},{"./../constants.mjs":66,"./../errors.mjs":67,"./internal.mjs":85,"./types.mjs":94,"@solana/buffer-layout":43,"@solana/buffer-layout-utils":40,"@solana/web3.js":99,buffer:269}],94:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TokenInstruction=void 0;var TokenInstruction;exports.TokenInstruction=TokenInstruction;(function(TokenInstruction){TokenInstruction[TokenInstruction["InitializeMint"]=0]="InitializeMint";TokenInstruction[TokenInstruction["InitializeAccount"]=1]="InitializeAccount";TokenInstruction[TokenInstruction["InitializeMultisig"]=2]="InitializeMultisig";TokenInstruction[TokenInstruction["Transfer"]=3]="Transfer";TokenInstruction[TokenInstruction["Approve"]=4]="Approve";TokenInstruction[TokenInstruction["Revoke"]=5]="Revoke";TokenInstruction[TokenInstruction["SetAuthority"]=6]="SetAuthority";TokenInstruction[TokenInstruction["MintTo"]=7]="MintTo";TokenInstruction[TokenInstruction["Burn"]=8]="Burn";TokenInstruction[TokenInstruction["CloseAccount"]=9]="CloseAccount";TokenInstruction[TokenInstruction["FreezeAccount"]=10]="FreezeAccount";TokenInstruction[TokenInstruction["ThawAccount"]=11]="ThawAccount";TokenInstruction[TokenInstruction["TransferChecked"]=12]="TransferChecked";TokenInstruction[TokenInstruction["ApproveChecked"]=13]="ApproveChecked";TokenInstruction[TokenInstruction["MintToChecked"]=14]="MintToChecked";TokenInstruction[TokenInstruction["BurnChecked"]=15]="BurnChecked";TokenInstruction[TokenInstruction["InitializeAccount2"]=16]="InitializeAccount2";TokenInstruction[TokenInstruction["SyncNative"]=17]="SyncNative";TokenInstruction[TokenInstruction["InitializeAccount3"]=18]="InitializeAccount3";TokenInstruction[TokenInstruction["InitializeMultisig2"]=19]="InitializeMultisig2";TokenInstruction[TokenInstruction["InitializeMint2"]=20]="InitializeMint2"})(TokenInstruction||(exports.TokenInstruction=TokenInstruction={}))},{}],95:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AccountState=exports.AccountLayout=exports.ACCOUNT_SIZE=void 0;exports.getAccount=getAccount;exports.getMinimumBalanceForRentExemptAccount=getMinimumBalanceForRentExemptAccount;var _bufferLayout=require("@solana/buffer-layout");var _bufferLayoutUtils=require("@solana/buffer-layout-utils");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");var AccountState;exports.AccountState=AccountState;(function(AccountState){AccountState[AccountState["Uninitialized"]=0]="Uninitialized";AccountState[AccountState["Initialized"]=1]="Initialized";AccountState[AccountState["Frozen"]=2]="Frozen"})(AccountState||(exports.AccountState=AccountState={}));const AccountLayout=(0,_bufferLayout.struct)([(0,_bufferLayoutUtils.publicKey)("mint"),(0,_bufferLayoutUtils.publicKey)("owner"),(0,_bufferLayoutUtils.u64)("amount"),(0,_bufferLayout.u32)("delegateOption"),(0,_bufferLayoutUtils.publicKey)("delegate"),(0,_bufferLayout.u8)("state"),(0,_bufferLayout.u32)("isNativeOption"),(0,_bufferLayoutUtils.u64)("isNative"),(0,_bufferLayoutUtils.u64)("delegatedAmount"),(0,_bufferLayout.u32)("closeAuthorityOption"),(0,_bufferLayoutUtils.publicKey)("closeAuthority")]);exports.AccountLayout=AccountLayout;const ACCOUNT_SIZE=AccountLayout.span;exports.ACCOUNT_SIZE=ACCOUNT_SIZE;async function getAccount(connection,address,commitment,programId=_constants.TOKEN_PROGRAM_ID){const info=await connection.getAccountInfo(address,commitment);if(!info)throw new _errors.TokenAccountNotFoundError;if(!info.owner.equals(programId))throw new _errors.TokenInvalidAccountOwnerError;if(info.data.length!=ACCOUNT_SIZE)throw new _errors.TokenInvalidAccountSizeError;const rawAccount=AccountLayout.decode(info.data);return{address:address,mint:rawAccount.mint,owner:rawAccount.owner,amount:rawAccount.amount,delegate:rawAccount.delegateOption?rawAccount.delegate:null,delegatedAmount:rawAccount.delegatedAmount,isInitialized:rawAccount.state!==AccountState.Uninitialized,isFrozen:rawAccount.state===AccountState.Frozen,isNative:!!rawAccount.isNativeOption,rentExemptReserve:rawAccount.isNativeOption?rawAccount.isNative:null,closeAuthority:rawAccount.closeAuthorityOption?rawAccount.closeAuthority:null}}async function getMinimumBalanceForRentExemptAccount(connection,commitment){return await connection.getMinimumBalanceForRentExemption(ACCOUNT_SIZE,commitment)}},{"./../constants.mjs":66,"./../errors.mjs":67,"@solana/buffer-layout":43,"@solana/buffer-layout-utils":40}],96:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _account=require("./account.mjs");Object.keys(_account).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_account[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _account[key]}})});var _mint=require("./mint.mjs");Object.keys(_mint).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_mint[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _mint[key]}})});var _multisig=require("./multisig.mjs");Object.keys(_multisig).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_multisig[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _multisig[key]}})})},{"./account.mjs":95,"./mint.mjs":97,"./multisig.mjs":98}],97:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MintLayout=exports.MINT_SIZE=void 0;exports.getAssociatedTokenAddress=getAssociatedTokenAddress;exports.getMinimumBalanceForRentExemptMint=getMinimumBalanceForRentExemptMint;exports.getMint=getMint;var _bufferLayout=require("@solana/buffer-layout");var _bufferLayoutUtils=require("@solana/buffer-layout-utils");var _web=require("@solana/web3.js");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");const MintLayout=(0,_bufferLayout.struct)([(0,_bufferLayout.u32)("mintAuthorityOption"),(0,_bufferLayoutUtils.publicKey)("mintAuthority"),(0,_bufferLayoutUtils.u64)("supply"),(0,_bufferLayout.u8)("decimals"),(0,_bufferLayoutUtils.bool)("isInitialized"),(0,_bufferLayout.u32)("freezeAuthorityOption"),(0,_bufferLayoutUtils.publicKey)("freezeAuthority")]);exports.MintLayout=MintLayout;const MINT_SIZE=MintLayout.span;exports.MINT_SIZE=MINT_SIZE;async function getMint(connection,address,commitment,programId=_constants.TOKEN_PROGRAM_ID){const info=await connection.getAccountInfo(address,commitment);if(!info)throw new _errors.TokenAccountNotFoundError;if(!info.owner.equals(programId))throw new _errors.TokenInvalidAccountOwnerError;if(info.data.length!=MINT_SIZE)throw new _errors.TokenInvalidAccountSizeError;const rawMint=MintLayout.decode(info.data);return{address:address,mintAuthority:rawMint.mintAuthorityOption?rawMint.mintAuthority:null,supply:rawMint.supply,decimals:rawMint.decimals,isInitialized:rawMint.isInitialized,freezeAuthority:rawMint.freezeAuthorityOption?rawMint.freezeAuthority:null}}async function getMinimumBalanceForRentExemptMint(connection,commitment){return await connection.getMinimumBalanceForRentExemption(MINT_SIZE,commitment)}async function getAssociatedTokenAddress(mint,owner,allowOwnerOffCurve=false,programId=_constants.TOKEN_PROGRAM_ID,associatedTokenProgramId=_constants.ASSOCIATED_TOKEN_PROGRAM_ID){if(!allowOwnerOffCurve&&!_web.PublicKey.isOnCurve(owner.toBuffer()))throw new _errors.TokenOwnerOffCurveError;const[address]=await _web.PublicKey.findProgramAddress([owner.toBuffer(),programId.toBuffer(),mint.toBuffer()],associatedTokenProgramId);return address}},{"./../constants.mjs":66,"./../errors.mjs":67,"@solana/buffer-layout":43,"@solana/buffer-layout-utils":40,"@solana/web3.js":99}],98:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MultisigLayout=exports.MULTISIG_SIZE=void 0;exports.getMinimumBalanceForRentExemptMultisig=getMinimumBalanceForRentExemptMultisig;exports.getMultisig=getMultisig;var _bufferLayout=require("@solana/buffer-layout");var _bufferLayoutUtils=require("@solana/buffer-layout-utils");var _constants=require("./../constants.mjs");var _errors=require("./../errors.mjs");const MultisigLayout=(0,_bufferLayout.struct)([(0,_bufferLayout.u8)("m"),(0,_bufferLayout.u8)("n"),(0,_bufferLayoutUtils.bool)("isInitialized"),(0,_bufferLayoutUtils.publicKey)("signer1"),(0,_bufferLayoutUtils.publicKey)("signer2"),(0,_bufferLayoutUtils.publicKey)("signer3"),(0,_bufferLayoutUtils.publicKey)("signer4"),(0,_bufferLayoutUtils.publicKey)("signer5"),(0,_bufferLayoutUtils.publicKey)("signer6"),(0,_bufferLayoutUtils.publicKey)("signer7"),(0,_bufferLayoutUtils.publicKey)("signer8"),(0,_bufferLayoutUtils.publicKey)("signer9"),(0,_bufferLayoutUtils.publicKey)("signer10"),(0,_bufferLayoutUtils.publicKey)("signer11")]);exports.MultisigLayout=MultisigLayout;const MULTISIG_SIZE=MultisigLayout.span;exports.MULTISIG_SIZE=MULTISIG_SIZE;async function getMultisig(connection,address,commitment,programId=_constants.TOKEN_PROGRAM_ID){const info=await connection.getAccountInfo(address,commitment);if(!info)throw new _errors.TokenAccountNotFoundError;if(!info.owner.equals(programId))throw new _errors.TokenInvalidAccountOwnerError;if(info.data.length!=MULTISIG_SIZE)throw new _errors.TokenInvalidAccountSizeError;return{address:address,...MultisigLayout.decode(info.data)}}async function getMinimumBalanceForRentExemptMultisig(connection,commitment){return await connection.getMinimumBalanceForRentExemption(MULTISIG_SIZE,commitment)}},{"./../constants.mjs":66,"./../errors.mjs":67,"@solana/buffer-layout":43,"@solana/buffer-layout-utils":40}],99:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var buffer=require("buffer");var sha512=require("@noble/hashes/sha512");var ed25519=require("@noble/ed25519");var BN=require("bn.js");var bs58=require("bs58");var sha256=require("@noble/hashes/sha256");var borsh=require("borsh");var BufferLayout=require("@solana/buffer-layout");var bigintBuffer=require("bigint-buffer");var superstruct=require("superstruct");var RpcClient=require("jayson/lib/client/browser");var RpcWebSocketCommonClient=require("rpc-websockets/dist/lib/client");var createRpc=require("rpc-websockets/dist/lib/client/websocket.browser");var sha3=require("@noble/hashes/sha3");var hmac=require("@noble/hashes/hmac");var secp256k1=require("@noble/secp256k1");function _interopDefaultLegacy(e){return e&&typeof e==="object"&&"default"in e?e:{default:e}}function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);if(e){Object.keys(e).forEach(function(k){if(k!=="default"){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k]}})}})}n["default"]=e;return Object.freeze(n)}var ed25519__namespace=_interopNamespace(ed25519);var BN__default=_interopDefaultLegacy(BN);var bs58__default=_interopDefaultLegacy(bs58);var BufferLayout__namespace=_interopNamespace(BufferLayout);var RpcClient__default=_interopDefaultLegacy(RpcClient);var RpcWebSocketCommonClient__default=_interopDefaultLegacy(RpcWebSocketCommonClient);var createRpc__default=_interopDefaultLegacy(createRpc);var secp256k1__namespace=_interopNamespace(secp256k1);ed25519__namespace.utils.sha512Sync=(...m)=>sha512.sha512(ed25519__namespace.utils.concatBytes(...m));const generatePrivateKey=ed25519__namespace.utils.randomPrivateKey;const generateKeypair=()=>{const privateScalar=ed25519__namespace.utils.randomPrivateKey();const publicKey=getPublicKey(privateScalar);const secretKey=new Uint8Array(64);secretKey.set(privateScalar);secretKey.set(publicKey,32);return{publicKey:publicKey,secretKey:secretKey}};const getPublicKey=ed25519__namespace.sync.getPublicKey;function isOnCurve(publicKey){try{ed25519__namespace.Point.fromHex(publicKey,true);return true}catch{return false}}const sign=(message,secretKey)=>ed25519__namespace.sync.sign(message,secretKey.slice(0,32));const verify=ed25519__namespace.sync.verify;const toBuffer=arr=>{if(buffer.Buffer.isBuffer(arr)){return arr}else if(arr instanceof Uint8Array){return buffer.Buffer.from(arr.buffer,arr.byteOffset,arr.byteLength)}else{return buffer.Buffer.from(arr)}};class Struct{constructor(properties){Object.assign(this,properties)}encode(){return buffer.Buffer.from(borsh.serialize(SOLANA_SCHEMA,this))}static decode(data){return borsh.deserialize(SOLANA_SCHEMA,this,data)}static decodeUnchecked(data){return borsh.deserializeUnchecked(SOLANA_SCHEMA,this,data)}}class Enum extends Struct{constructor(properties){super(properties);this.enum="";if(Object.keys(properties).length!==1){throw new Error("Enum can only take single value")}Object.keys(properties).map(key=>{this.enum=key})}}const SOLANA_SCHEMA=new Map;let _Symbol$toStringTag;const MAX_SEED_LENGTH=32;const PUBLIC_KEY_LENGTH=32;function isPublicKeyData(value){return value._bn!==undefined}let uniquePublicKeyCounter=1;_Symbol$toStringTag=Symbol.toStringTag;class PublicKey extends Struct{constructor(value){super({});this._bn=void 0;if(isPublicKeyData(value)){this._bn=value._bn}else{if(typeof value==="string"){const decoded=bs58__default["default"].decode(value);if(decoded.length!=PUBLIC_KEY_LENGTH){throw new Error(`Invalid public key input`)}this._bn=new BN__default["default"](decoded)}else{this._bn=new BN__default["default"](value)}if(this._bn.byteLength()>PUBLIC_KEY_LENGTH){throw new Error(`Invalid public key input`)}}}static unique(){const key=new PublicKey(uniquePublicKeyCounter);uniquePublicKeyCounter+=1;return new PublicKey(key.toBuffer())}equals(publicKey){return this._bn.eq(publicKey._bn)}toBase58(){return bs58__default["default"].encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const buf=this.toBuffer();return new Uint8Array(buf.buffer,buf.byteOffset,buf.byteLength)}toBuffer(){const b=this._bn.toArrayLike(buffer.Buffer);if(b.length===PUBLIC_KEY_LENGTH){return b}const zeroPad=buffer.Buffer.alloc(32);b.copy(zeroPad,32-b.length);return zeroPad}get[_Symbol$toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(fromPublicKey,seed,programId){const buffer$1=buffer.Buffer.concat([fromPublicKey.toBuffer(),buffer.Buffer.from(seed),programId.toBuffer()]);const publicKeyBytes=sha256.sha256(buffer$1);return new PublicKey(publicKeyBytes)}static createProgramAddressSync(seeds,programId){let buffer$1=buffer.Buffer.alloc(0);seeds.forEach(function(seed){if(seed.length>MAX_SEED_LENGTH){throw new TypeError(`Max seed length exceeded`)}buffer$1=buffer.Buffer.concat([buffer$1,toBuffer(seed)])});buffer$1=buffer.Buffer.concat([buffer$1,programId.toBuffer(),buffer.Buffer.from("ProgramDerivedAddress")]);const publicKeyBytes=sha256.sha256(buffer$1);if(isOnCurve(publicKeyBytes)){throw new Error(`Invalid seeds, address must fall off the curve`)}return new PublicKey(publicKeyBytes)}static async createProgramAddress(seeds,programId){return this.createProgramAddressSync(seeds,programId)}static findProgramAddressSync(seeds,programId){let nonce=255;let address;while(nonce!=0){try{const seedsWithNonce=seeds.concat(buffer.Buffer.from([nonce]));address=this.createProgramAddressSync(seedsWithNonce,programId)}catch(err){if(err instanceof TypeError){throw err}nonce--;continue}return[address,nonce]}throw new Error(`Unable to find a viable program address nonce`)}static async findProgramAddress(seeds,programId){return this.findProgramAddressSync(seeds,programId)}static isOnCurve(pubkeyData){const pubkey=new PublicKey(pubkeyData);return isOnCurve(pubkey.toBytes())}}PublicKey.default=new PublicKey("11111111111111111111111111111111");SOLANA_SCHEMA.set(PublicKey,{kind:"struct",fields:[["_bn","u256"]]});class Account{constructor(secretKey){this._publicKey=void 0;this._secretKey=void 0;if(secretKey){const secretKeyBuffer=toBuffer(secretKey);if(secretKey.length!==64){throw new Error("bad secret key size")}this._publicKey=secretKeyBuffer.slice(32,64);this._secretKey=secretKeyBuffer.slice(0,32)}else{this._secretKey=toBuffer(generatePrivateKey());this._publicKey=toBuffer(getPublicKey(this._secretKey))}}get publicKey(){return new PublicKey(this._publicKey)}get secretKey(){return buffer.Buffer.concat([this._secretKey,this._publicKey],64)}}const BPF_LOADER_DEPRECATED_PROGRAM_ID=new PublicKey("BPFLoader1111111111111111111111111111111111");const PACKET_DATA_SIZE=1280-40-8;const VERSION_PREFIX_MASK=127;const SIGNATURE_LENGTH_IN_BYTES=64;class TransactionExpiredBlockheightExceededError extends Error{constructor(signature){super(`Signature ${signature} has expired: block height exceeded.`);this.signature=void 0;this.signature=signature}}Object.defineProperty(TransactionExpiredBlockheightExceededError.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class TransactionExpiredTimeoutError extends Error{constructor(signature,timeoutSeconds){super(`Transaction was not confirmed in ${timeoutSeconds.toFixed(2)} seconds. It is `+"unknown if it succeeded or failed. Check signature "+`${signature} using the Solana Explorer or CLI tools.`);this.signature=void 0;this.signature=signature}}Object.defineProperty(TransactionExpiredTimeoutError.prototype,"name",{value:"TransactionExpiredTimeoutError"});class TransactionExpiredNonceInvalidError extends Error{constructor(signature){super(`Signature ${signature} has expired: the nonce is no longer valid.`);this.signature=void 0;this.signature=signature}}Object.defineProperty(TransactionExpiredNonceInvalidError.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class MessageAccountKeys{constructor(staticAccountKeys,accountKeysFromLookups){this.staticAccountKeys=void 0;this.accountKeysFromLookups=void 0;this.staticAccountKeys=staticAccountKeys;this.accountKeysFromLookups=accountKeysFromLookups}keySegments(){const keySegments=[this.staticAccountKeys];if(this.accountKeysFromLookups){keySegments.push(this.accountKeysFromLookups.writable);keySegments.push(this.accountKeysFromLookups.readonly)}return keySegments}get(index){for(const keySegment of this.keySegments()){if(index<keySegment.length){return keySegment[index]}else{index-=keySegment.length}}return}get length(){return this.keySegments().flat().length}compileInstructions(instructions){const U8_MAX=255;if(this.length>U8_MAX+1){throw new Error("Account index overflow encountered during compilation")}const keyIndexMap=new Map;this.keySegments().flat().forEach((key,index)=>{keyIndexMap.set(key.toBase58(),index)});const findKeyIndex=key=>{const keyIndex=keyIndexMap.get(key.toBase58());if(keyIndex===undefined)throw new Error("Encountered an unknown instruction account key during compilation");return keyIndex};return instructions.map(instruction=>{return{programIdIndex:findKeyIndex(instruction.programId),accountKeyIndexes:instruction.keys.map(meta=>findKeyIndex(meta.pubkey)),data:instruction.data}})}}const publicKey=(property="publicKey")=>{return BufferLayout__namespace.blob(32,property)};const signature=(property="signature")=>{return BufferLayout__namespace.blob(64,property)};const rustString=(property="string")=>{const rsl=BufferLayout__namespace.struct([BufferLayout__namespace.u32("length"),BufferLayout__namespace.u32("lengthPadding"),BufferLayout__namespace.blob(BufferLayout__namespace.offset(BufferLayout__namespace.u32(),-8),"chars")],property);const _decode=rsl.decode.bind(rsl);const _encode=rsl.encode.bind(rsl);const rslShim=rsl;rslShim.decode=(b,offset)=>{const data=_decode(b,offset);return data["chars"].toString()};rslShim.encode=(str,b,offset)=>{const data={chars:buffer.Buffer.from(str,"utf8")};return _encode(data,b,offset)};rslShim.alloc=str=>{return BufferLayout__namespace.u32().span+BufferLayout__namespace.u32().span+buffer.Buffer.from(str,"utf8").length};return rslShim};const authorized=(property="authorized")=>{return BufferLayout__namespace.struct([publicKey("staker"),publicKey("withdrawer")],property)};const lockup=(property="lockup")=>{return BufferLayout__namespace.struct([BufferLayout__namespace.ns64("unixTimestamp"),BufferLayout__namespace.ns64("epoch"),publicKey("custodian")],property)};const voteInit=(property="voteInit")=>{return BufferLayout__namespace.struct([publicKey("nodePubkey"),publicKey("authorizedVoter"),publicKey("authorizedWithdrawer"),BufferLayout__namespace.u8("commission")],property)};const voteAuthorizeWithSeedArgs=(property="voteAuthorizeWithSeedArgs")=>{return BufferLayout__namespace.struct([BufferLayout__namespace.u32("voteAuthorizationType"),publicKey("currentAuthorityDerivedKeyOwnerPubkey"),rustString("currentAuthorityDerivedKeySeed"),publicKey("newAuthorized")],property)};function getAlloc(type,fields){const getItemAlloc=item=>{if(item.span>=0){return item.span}else if(typeof item.alloc==="function"){return item.alloc(fields[item.property])}else if("count"in item&&"elementLayout"in item){const field=fields[item.property];if(Array.isArray(field)){return field.length*getItemAlloc(item.elementLayout)}}else if("fields"in item){return getAlloc({layout:item},fields[item.property])}return 0};let alloc=0;type.layout.fields.forEach(item=>{alloc+=getItemAlloc(item)});return alloc}function decodeLength(bytes){let len=0;let size=0;for(;;){let elem=bytes.shift();len|=(elem&127)<<size*7;size+=1;if((elem&128)===0){break}}return len}function encodeLength(bytes,len){let rem_len=len;for(;;){let elem=rem_len&127;rem_len>>=7;if(rem_len==0){bytes.push(elem);break}else{elem|=128;bytes.push(elem)}}}function assert(condition,message){if(!condition){throw new Error(message||"Assertion failed")}}class CompiledKeys{constructor(payer,keyMetaMap){this.payer=void 0;this.keyMetaMap=void 0;this.payer=payer;this.keyMetaMap=keyMetaMap}static compile(instructions,payer){const keyMetaMap=new Map;const getOrInsertDefault=pubkey=>{const address=pubkey.toBase58();let keyMeta=keyMetaMap.get(address);if(keyMeta===undefined){keyMeta={isSigner:false,isWritable:false,isInvoked:false};keyMetaMap.set(address,keyMeta)}return keyMeta};const payerKeyMeta=getOrInsertDefault(payer);payerKeyMeta.isSigner=true;payerKeyMeta.isWritable=true;for(const ix of instructions){getOrInsertDefault(ix.programId).isInvoked=true;for(const accountMeta of ix.keys){const keyMeta=getOrInsertDefault(accountMeta.pubkey);keyMeta.isSigner||(keyMeta.isSigner=accountMeta.isSigner);keyMeta.isWritable||(keyMeta.isWritable=accountMeta.isWritable)}}return new CompiledKeys(payer,keyMetaMap)}getMessageComponents(){const mapEntries=[...this.keyMetaMap.entries()];assert(mapEntries.length<=256,"Max static account keys length exceeded");const writableSigners=mapEntries.filter(([,meta])=>meta.isSigner&&meta.isWritable);const readonlySigners=mapEntries.filter(([,meta])=>meta.isSigner&&!meta.isWritable);const writableNonSigners=mapEntries.filter(([,meta])=>!meta.isSigner&&meta.isWritable);const readonlyNonSigners=mapEntries.filter(([,meta])=>!meta.isSigner&&!meta.isWritable);const header={numRequiredSignatures:writableSigners.length+readonlySigners.length,numReadonlySignedAccounts:readonlySigners.length,numReadonlyUnsignedAccounts:readonlyNonSigners.length};{assert(writableSigners.length>0,"Expected at least one writable signer key");const[payerAddress]=writableSigners[0];assert(payerAddress===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const staticAccountKeys=[...writableSigners.map(([address])=>new PublicKey(address)),...readonlySigners.map(([address])=>new PublicKey(address)),...writableNonSigners.map(([address])=>new PublicKey(address)),...readonlyNonSigners.map(([address])=>new PublicKey(address))];return[header,staticAccountKeys]}extractTableLookup(lookupTable){const[writableIndexes,drainedWritableKeys]=this.drainKeysFoundInLookupTable(lookupTable.state.addresses,keyMeta=>!keyMeta.isSigner&&!keyMeta.isInvoked&&keyMeta.isWritable);const[readonlyIndexes,drainedReadonlyKeys]=this.drainKeysFoundInLookupTable(lookupTable.state.addresses,keyMeta=>!keyMeta.isSigner&&!keyMeta.isInvoked&&!keyMeta.isWritable);if(writableIndexes.length===0&&readonlyIndexes.length===0){return}return[{accountKey:lookupTable.key,writableIndexes:writableIndexes,readonlyIndexes:readonlyIndexes},{writable:drainedWritableKeys,readonly:drainedReadonlyKeys}]}drainKeysFoundInLookupTable(lookupTableEntries,keyMetaFilter){const lookupTableIndexes=new Array;const drainedKeys=new Array;for(const[address,keyMeta]of this.keyMetaMap.entries()){if(keyMetaFilter(keyMeta)){const key=new PublicKey(address);const lookupTableIndex=lookupTableEntries.findIndex(entry=>entry.equals(key));if(lookupTableIndex>=0){assert(lookupTableIndex<256,"Max lookup table index exceeded");lookupTableIndexes.push(lookupTableIndex);drainedKeys.push(key);this.keyMetaMap.delete(address)}}}return[lookupTableIndexes,drainedKeys]}}class Message{constructor(args){this.header=void 0;this.accountKeys=void 0;this.recentBlockhash=void 0;this.instructions=void 0;this.indexToProgramIds=new Map;this.header=args.header;this.accountKeys=args.accountKeys.map(account=>new PublicKey(account));this.recentBlockhash=args.recentBlockhash;this.instructions=args.instructions;this.instructions.forEach(ix=>this.indexToProgramIds.set(ix.programIdIndex,this.accountKeys[ix.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(ix=>({programIdIndex:ix.programIdIndex,accountKeyIndexes:ix.accounts,data:bs58__default["default"].decode(ix.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new MessageAccountKeys(this.staticAccountKeys)}static compile(args){const compiledKeys=CompiledKeys.compile(args.instructions,args.payerKey);const[header,staticAccountKeys]=compiledKeys.getMessageComponents();const accountKeys=new MessageAccountKeys(staticAccountKeys);const instructions=accountKeys.compileInstructions(args.instructions).map(ix=>({programIdIndex:ix.programIdIndex,accounts:ix.accountKeyIndexes,data:bs58__default["default"].encode(ix.data)}));return new Message({header:header,accountKeys:staticAccountKeys,recentBlockhash:args.recentBlockhash,instructions:instructions})}isAccountSigner(index){return index<this.header.numRequiredSignatures}isAccountWritable(index){const numSignedAccounts=this.header.numRequiredSignatures;if(index>=this.header.numRequiredSignatures){const unsignedAccountIndex=index-numSignedAccounts;const numUnsignedAccounts=this.accountKeys.length-numSignedAccounts;const numWritableUnsignedAccounts=numUnsignedAccounts-this.header.numReadonlyUnsignedAccounts;return unsignedAccountIndex<numWritableUnsignedAccounts}else{const numWritableSignedAccounts=numSignedAccounts-this.header.numReadonlySignedAccounts;return index<numWritableSignedAccounts}}isProgramId(index){return this.indexToProgramIds.has(index)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((_,index)=>!this.isProgramId(index))}serialize(){const numKeys=this.accountKeys.length;let keyCount=[];encodeLength(keyCount,numKeys);const instructions=this.instructions.map(instruction=>{const{accounts,programIdIndex}=instruction;const data=Array.from(bs58__default["default"].decode(instruction.data));let keyIndicesCount=[];encodeLength(keyIndicesCount,accounts.length);let dataCount=[];encodeLength(dataCount,data.length);return{programIdIndex:programIdIndex,keyIndicesCount:buffer.Buffer.from(keyIndicesCount),keyIndices:accounts,dataLength:buffer.Buffer.from(dataCount),data:data}});let instructionCount=[];encodeLength(instructionCount,instructions.length);let instructionBuffer=buffer.Buffer.alloc(PACKET_DATA_SIZE);buffer.Buffer.from(instructionCount).copy(instructionBuffer);let instructionBufferLength=instructionCount.length;instructions.forEach(instruction=>{const instructionLayout=BufferLayout__namespace.struct([BufferLayout__namespace.u8("programIdIndex"),BufferLayout__namespace.blob(instruction.keyIndicesCount.length,"keyIndicesCount"),BufferLayout__namespace.seq(BufferLayout__namespace.u8("keyIndex"),instruction.keyIndices.length,"keyIndices"),BufferLayout__namespace.blob(instruction.dataLength.length,"dataLength"),BufferLayout__namespace.seq(BufferLayout__namespace.u8("userdatum"),instruction.data.length,"data")]);const length=instructionLayout.encode(instruction,instructionBuffer,instructionBufferLength);instructionBufferLength+=length});instructionBuffer=instructionBuffer.slice(0,instructionBufferLength);const signDataLayout=BufferLayout__namespace.struct([BufferLayout__namespace.blob(1,"numRequiredSignatures"),BufferLayout__namespace.blob(1,"numReadonlySignedAccounts"),BufferLayout__namespace.blob(1,"numReadonlyUnsignedAccounts"),BufferLayout__namespace.blob(keyCount.length,"keyCount"),BufferLayout__namespace.seq(publicKey("key"),numKeys,"keys"),publicKey("recentBlockhash")]);const transaction={numRequiredSignatures:buffer.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:buffer.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:buffer.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:buffer.Buffer.from(keyCount),keys:this.accountKeys.map(key=>toBuffer(key.toBytes())),recentBlockhash:bs58__default["default"].decode(this.recentBlockhash)};let signData=buffer.Buffer.alloc(2048);const length=signDataLayout.encode(transaction,signData);instructionBuffer.copy(signData,length);return signData.slice(0,length+instructionBuffer.length)}static from(buffer$1){let byteArray=[...buffer$1];const numRequiredSignatures=byteArray.shift();if(numRequiredSignatures!==(numRequiredSignatures&VERSION_PREFIX_MASK)){throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()")}const numReadonlySignedAccounts=byteArray.shift();const numReadonlyUnsignedAccounts=byteArray.shift();const accountCount=decodeLength(byteArray);let accountKeys=[];for(let i=0;i<accountCount;i++){const account=byteArray.slice(0,PUBLIC_KEY_LENGTH);byteArray=byteArray.slice(PUBLIC_KEY_LENGTH);accountKeys.push(new PublicKey(buffer.Buffer.from(account)))}const recentBlockhash=byteArray.slice(0,PUBLIC_KEY_LENGTH);byteArray=byteArray.slice(PUBLIC_KEY_LENGTH);const instructionCount=decodeLength(byteArray);let instructions=[];for(let i=0;i<instructionCount;i++){const programIdIndex=byteArray.shift();const accountCount=decodeLength(byteArray);const accounts=byteArray.slice(0,accountCount);byteArray=byteArray.slice(accountCount);const dataLength=decodeLength(byteArray);const dataSlice=byteArray.slice(0,dataLength);const data=bs58__default["default"].encode(buffer.Buffer.from(dataSlice));byteArray=byteArray.slice(dataLength);instructions.push({programIdIndex:programIdIndex,accounts:accounts,data:data})}const messageArgs={header:{numRequiredSignatures:numRequiredSignatures,numReadonlySignedAccounts:numReadonlySignedAccounts,numReadonlyUnsignedAccounts:numReadonlyUnsignedAccounts},recentBlockhash:bs58__default["default"].encode(buffer.Buffer.from(recentBlockhash)),accountKeys:accountKeys,instructions:instructions};return new Message(messageArgs)}}class MessageV0{constructor(args){this.header=void 0;this.staticAccountKeys=void 0;this.recentBlockhash=void 0;this.compiledInstructions=void 0;this.addressTableLookups=void 0;this.header=args.header;this.staticAccountKeys=args.staticAccountKeys;this.recentBlockhash=args.recentBlockhash;this.compiledInstructions=args.compiledInstructions;this.addressTableLookups=args.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let count=0;for(const lookup of this.addressTableLookups){count+=lookup.readonlyIndexes.length+lookup.writableIndexes.length}return count}getAccountKeys(args){let accountKeysFromLookups;if(args&&"accountKeysFromLookups"in args&&args.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=args.accountKeysFromLookups.writable.length+args.accountKeysFromLookups.readonly.length){throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups")}accountKeysFromLookups=args.accountKeysFromLookups}else if(args&&"addressLookupTableAccounts"in args&&args.addressLookupTableAccounts){accountKeysFromLookups=this.resolveAddressTableLookups(args.addressLookupTableAccounts)}else if(this.addressTableLookups.length>0){throw new Error("Failed to get account keys because address table lookups were not resolved")}return new MessageAccountKeys(this.staticAccountKeys,accountKeysFromLookups)}isAccountSigner(index){return index<this.header.numRequiredSignatures}isAccountWritable(index){const numSignedAccounts=this.header.numRequiredSignatures;const numStaticAccountKeys=this.staticAccountKeys.length;if(index>=numStaticAccountKeys){const lookupAccountKeysIndex=index-numStaticAccountKeys;const numWritableLookupAccountKeys=this.addressTableLookups.reduce((count,lookup)=>count+lookup.writableIndexes.length,0);return lookupAccountKeysIndex<numWritableLookupAccountKeys}else if(index>=this.header.numRequiredSignatures){const unsignedAccountIndex=index-numSignedAccounts;const numUnsignedAccounts=numStaticAccountKeys-numSignedAccounts;const numWritableUnsignedAccounts=numUnsignedAccounts-this.header.numReadonlyUnsignedAccounts;return unsignedAccountIndex<numWritableUnsignedAccounts}else{const numWritableSignedAccounts=numSignedAccounts-this.header.numReadonlySignedAccounts;return index<numWritableSignedAccounts}}resolveAddressTableLookups(addressLookupTableAccounts){const accountKeysFromLookups={writable:[],readonly:[]};for(const tableLookup of this.addressTableLookups){const tableAccount=addressLookupTableAccounts.find(account=>account.key.equals(tableLookup.accountKey));if(!tableAccount){throw new Error(`Failed to find address lookup table account for table key ${tableLookup.accountKey.toBase58()}`)}for(const index of tableLookup.writableIndexes){if(index<tableAccount.state.addresses.length){accountKeysFromLookups.writable.push(tableAccount.state.addresses[index])}else{throw new Error(`Failed to find address for index ${index} in address lookup table ${tableLookup.accountKey.toBase58()}`)}}for(const index of tableLookup.readonlyIndexes){if(index<tableAccount.state.addresses.length){accountKeysFromLookups.readonly.push(tableAccount.state.addresses[index])}else{throw new Error(`Failed to find address for index ${index} in address lookup table ${tableLookup.accountKey.toBase58()}`)}}}return accountKeysFromLookups}static compile(args){const compiledKeys=CompiledKeys.compile(args.instructions,args.payerKey);const addressTableLookups=new Array;const accountKeysFromLookups={writable:new Array,readonly:new Array};const lookupTableAccounts=args.addressLookupTableAccounts||[];for(const lookupTable of lookupTableAccounts){const extractResult=compiledKeys.extractTableLookup(lookupTable);if(extractResult!==undefined){const[addressTableLookup,{writable,readonly}]=extractResult;addressTableLookups.push(addressTableLookup);accountKeysFromLookups.writable.push(...writable);accountKeysFromLookups.readonly.push(...readonly)}}const[header,staticAccountKeys]=compiledKeys.getMessageComponents();const accountKeys=new MessageAccountKeys(staticAccountKeys,accountKeysFromLookups);const compiledInstructions=accountKeys.compileInstructions(args.instructions);return new MessageV0({header:header,staticAccountKeys:staticAccountKeys,recentBlockhash:args.recentBlockhash,compiledInstructions:compiledInstructions,addressTableLookups:addressTableLookups})}serialize(){const encodedStaticAccountKeysLength=Array();encodeLength(encodedStaticAccountKeysLength,this.staticAccountKeys.length);const serializedInstructions=this.serializeInstructions();const encodedInstructionsLength=Array();encodeLength(encodedInstructionsLength,this.compiledInstructions.length);const serializedAddressTableLookups=this.serializeAddressTableLookups();const encodedAddressTableLookupsLength=Array();encodeLength(encodedAddressTableLookupsLength,this.addressTableLookups.length);const messageLayout=BufferLayout__namespace.struct([BufferLayout__namespace.u8("prefix"),BufferLayout__namespace.struct([BufferLayout__namespace.u8("numRequiredSignatures"),BufferLayout__namespace.u8("numReadonlySignedAccounts"),BufferLayout__namespace.u8("numReadonlyUnsignedAccounts")],"header"),BufferLayout__namespace.blob(encodedStaticAccountKeysLength.length,"staticAccountKeysLength"),BufferLayout__namespace.seq(publicKey(),this.staticAccountKeys.length,"staticAccountKeys"),publicKey("recentBlockhash"),BufferLayout__namespace.blob(encodedInstructionsLength.length,"instructionsLength"),BufferLayout__namespace.blob(serializedInstructions.length,"serializedInstructions"),BufferLayout__namespace.blob(encodedAddressTableLookupsLength.length,"addressTableLookupsLength"),BufferLayout__namespace.blob(serializedAddressTableLookups.length,"serializedAddressTableLookups")]);const serializedMessage=new Uint8Array(PACKET_DATA_SIZE);const MESSAGE_VERSION_0_PREFIX=1<<7;const serializedMessageLength=messageLayout.encode({prefix:MESSAGE_VERSION_0_PREFIX,header:this.header,staticAccountKeysLength:new Uint8Array(encodedStaticAccountKeysLength),staticAccountKeys:this.staticAccountKeys.map(key=>key.toBytes()),recentBlockhash:bs58__default["default"].decode(this.recentBlockhash),instructionsLength:new Uint8Array(encodedInstructionsLength),serializedInstructions:serializedInstructions,addressTableLookupsLength:new Uint8Array(encodedAddressTableLookupsLength),serializedAddressTableLookups:serializedAddressTableLookups},serializedMessage);return serializedMessage.slice(0,serializedMessageLength)}serializeInstructions(){let serializedLength=0;const serializedInstructions=new Uint8Array(PACKET_DATA_SIZE);for(const instruction of this.compiledInstructions){const encodedAccountKeyIndexesLength=Array();encodeLength(encodedAccountKeyIndexesLength,instruction.accountKeyIndexes.length);const encodedDataLength=Array();encodeLength(encodedDataLength,instruction.data.length);const instructionLayout=BufferLayout__namespace.struct([BufferLayout__namespace.u8("programIdIndex"),BufferLayout__namespace.blob(encodedAccountKeyIndexesLength.length,"encodedAccountKeyIndexesLength"),BufferLayout__namespace.seq(BufferLayout__namespace.u8(),instruction.accountKeyIndexes.length,"accountKeyIndexes"),BufferLayout__namespace.blob(encodedDataLength.length,"encodedDataLength"),BufferLayout__namespace.blob(instruction.data.length,"data")]);serializedLength+=instructionLayout.encode({programIdIndex:instruction.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(encodedAccountKeyIndexesLength),accountKeyIndexes:instruction.accountKeyIndexes,encodedDataLength:new Uint8Array(encodedDataLength),data:instruction.data},serializedInstructions,serializedLength)}return serializedInstructions.slice(0,serializedLength)}serializeAddressTableLookups(){let serializedLength=0;const serializedAddressTableLookups=new Uint8Array(PACKET_DATA_SIZE);for(const lookup of this.addressTableLookups){const encodedWritableIndexesLength=Array();encodeLength(encodedWritableIndexesLength,lookup.writableIndexes.length);const encodedReadonlyIndexesLength=Array();encodeLength(encodedReadonlyIndexesLength,lookup.readonlyIndexes.length);const addressTableLookupLayout=BufferLayout__namespace.struct([publicKey("accountKey"),BufferLayout__namespace.blob(encodedWritableIndexesLength.length,"encodedWritableIndexesLength"),BufferLayout__namespace.seq(BufferLayout__namespace.u8(),lookup.writableIndexes.length,"writableIndexes"),BufferLayout__namespace.blob(encodedReadonlyIndexesLength.length,"encodedReadonlyIndexesLength"),BufferLayout__namespace.seq(BufferLayout__namespace.u8(),lookup.readonlyIndexes.length,"readonlyIndexes")]);serializedLength+=addressTableLookupLayout.encode({accountKey:lookup.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(encodedWritableIndexesLength),writableIndexes:lookup.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(encodedReadonlyIndexesLength),readonlyIndexes:lookup.readonlyIndexes},serializedAddressTableLookups,serializedLength)}return serializedAddressTableLookups.slice(0,serializedLength)}static deserialize(serializedMessage){let byteArray=[...serializedMessage];const prefix=byteArray.shift();const maskedPrefix=prefix&VERSION_PREFIX_MASK;assert(prefix!==maskedPrefix,`Expected versioned message but received legacy message`);const version=maskedPrefix;assert(version===0,`Expected versioned message with version 0 but found version ${version}`);const header={numRequiredSignatures:byteArray.shift(),numReadonlySignedAccounts:byteArray.shift(),numReadonlyUnsignedAccounts:byteArray.shift()};const staticAccountKeys=[];const staticAccountKeysLength=decodeLength(byteArray);for(let i=0;i<staticAccountKeysLength;i++){staticAccountKeys.push(new PublicKey(byteArray.splice(0,PUBLIC_KEY_LENGTH)))}const recentBlockhash=bs58__default["default"].encode(byteArray.splice(0,PUBLIC_KEY_LENGTH));const instructionCount=decodeLength(byteArray);const compiledInstructions=[];for(let i=0;i<instructionCount;i++){const programIdIndex=byteArray.shift();const accountKeyIndexesLength=decodeLength(byteArray);const accountKeyIndexes=byteArray.splice(0,accountKeyIndexesLength);const dataLength=decodeLength(byteArray);const data=new Uint8Array(byteArray.splice(0,dataLength));compiledInstructions.push({programIdIndex:programIdIndex,accountKeyIndexes:accountKeyIndexes,data:data})}const addressTableLookupsCount=decodeLength(byteArray);const addressTableLookups=[];for(let i=0;i<addressTableLookupsCount;i++){const accountKey=new PublicKey(byteArray.splice(0,PUBLIC_KEY_LENGTH));const writableIndexesLength=decodeLength(byteArray);const writableIndexes=byteArray.splice(0,writableIndexesLength);const readonlyIndexesLength=decodeLength(byteArray);const readonlyIndexes=byteArray.splice(0,readonlyIndexesLength);addressTableLookups.push({accountKey:accountKey,writableIndexes:writableIndexes,readonlyIndexes:readonlyIndexes})}return new MessageV0({header:header,staticAccountKeys:staticAccountKeys,recentBlockhash:recentBlockhash,compiledInstructions:compiledInstructions,addressTableLookups:addressTableLookups})}}const VersionedMessage={deserializeMessageVersion(serializedMessage){const prefix=serializedMessage[0];const maskedPrefix=prefix&VERSION_PREFIX_MASK;if(maskedPrefix===prefix){return"legacy"}return maskedPrefix},deserialize:serializedMessage=>{const version=VersionedMessage.deserializeMessageVersion(serializedMessage);if(version==="legacy"){return Message.from(serializedMessage)}if(version===0){return MessageV0.deserialize(serializedMessage)}else{throw new Error(`Transaction message version ${version} deserialization is not supported`)}}};exports.TransactionStatus=void 0;(function(TransactionStatus){TransactionStatus[TransactionStatus["BLOCKHEIGHT_EXCEEDED"]=0]="BLOCKHEIGHT_EXCEEDED";TransactionStatus[TransactionStatus["PROCESSED"]=1]="PROCESSED";TransactionStatus[TransactionStatus["TIMED_OUT"]=2]="TIMED_OUT";TransactionStatus[TransactionStatus["NONCE_INVALID"]=3]="NONCE_INVALID"})(exports.TransactionStatus||(exports.TransactionStatus={}));const DEFAULT_SIGNATURE=buffer.Buffer.alloc(SIGNATURE_LENGTH_IN_BYTES).fill(0);class TransactionInstruction{constructor(opts){this.keys=void 0;this.programId=void 0;this.data=buffer.Buffer.alloc(0);this.programId=opts.programId;this.keys=opts.keys;if(opts.data){this.data=opts.data}}toJSON(){return{keys:this.keys.map(({pubkey,isSigner,isWritable})=>({pubkey:pubkey.toJSON(),isSigner:isSigner,isWritable:isWritable})),programId:this.programId.toJSON(),data:[...this.data]}}}class Transaction{get signature(){if(this.signatures.length>0){return this.signatures[0].signature}return null}constructor(opts){this.signatures=[];this.feePayer=void 0;this.instructions=[];this.recentBlockhash=void 0;this.lastValidBlockHeight=void 0;this.nonceInfo=void 0;this.minNonceContextSlot=void 0;this._message=void 0;this._json=void 0;if(!opts){return}if(opts.feePayer){this.feePayer=opts.feePayer}if(opts.signatures){this.signatures=opts.signatures}if(Object.prototype.hasOwnProperty.call(opts,"nonceInfo")){const{minContextSlot,nonceInfo}=opts;this.minNonceContextSlot=minContextSlot;this.nonceInfo=nonceInfo}else if(Object.prototype.hasOwnProperty.call(opts,"lastValidBlockHeight")){const{blockhash,lastValidBlockHeight}=opts;this.recentBlockhash=blockhash;this.lastValidBlockHeight=lastValidBlockHeight}else{const{recentBlockhash,nonceInfo}=opts;if(nonceInfo){this.nonceInfo=nonceInfo}this.recentBlockhash=recentBlockhash}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(instruction=>instruction.toJSON()),signers:this.signatures.map(({publicKey})=>{return publicKey.toJSON()})}}add(...items){if(items.length===0){throw new Error("No instructions")}items.forEach(item=>{if("instructions"in item){this.instructions=this.instructions.concat(item.instructions)}else if("data"in item&&"programId"in item&&"keys"in item){this.instructions.push(item)}else{this.instructions.push(new TransactionInstruction(item))}});return this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json)){return this._message}let recentBlockhash;let instructions;if(this.nonceInfo){recentBlockhash=this.nonceInfo.nonce;if(this.instructions[0]!=this.nonceInfo.nonceInstruction){instructions=[this.nonceInfo.nonceInstruction,...this.instructions]}else{instructions=this.instructions}}else{recentBlockhash=this.recentBlockhash;instructions=this.instructions}if(!recentBlockhash){throw new Error("Transaction recentBlockhash required")}if(instructions.length<1){console.warn("No instructions provided")}let feePayer;if(this.feePayer){feePayer=this.feePayer}else if(this.signatures.length>0&&this.signatures[0].publicKey){feePayer=this.signatures[0].publicKey}else{throw new Error("Transaction fee payer required")}for(let i=0;i<instructions.length;i++){if(instructions[i].programId===undefined){throw new Error(`Transaction instruction index ${i} has undefined program id`)}}const programIds=[];const accountMetas=[];instructions.forEach(instruction=>{instruction.keys.forEach(accountMeta=>{accountMetas.push({...accountMeta})});const programId=instruction.programId.toString();if(!programIds.includes(programId)){programIds.push(programId)}});programIds.forEach(programId=>{accountMetas.push({pubkey:new PublicKey(programId),isSigner:false,isWritable:false})});const uniqueMetas=[];accountMetas.forEach(accountMeta=>{const pubkeyString=accountMeta.pubkey.toString();const uniqueIndex=uniqueMetas.findIndex(x=>{return x.pubkey.toString()===pubkeyString});if(uniqueIndex>-1){uniqueMetas[uniqueIndex].isWritable=uniqueMetas[uniqueIndex].isWritable||accountMeta.isWritable;uniqueMetas[uniqueIndex].isSigner=uniqueMetas[uniqueIndex].isSigner||accountMeta.isSigner}else{uniqueMetas.push(accountMeta)}});uniqueMetas.sort(function(x,y){if(x.isSigner!==y.isSigner){return x.isSigner?-1:1}if(x.isWritable!==y.isWritable){return x.isWritable?-1:1}return x.pubkey.toBase58().localeCompare(y.pubkey.toBase58())});const feePayerIndex=uniqueMetas.findIndex(x=>{return x.pubkey.equals(feePayer)});if(feePayerIndex>-1){const[payerMeta]=uniqueMetas.splice(feePayerIndex,1);payerMeta.isSigner=true;payerMeta.isWritable=true;uniqueMetas.unshift(payerMeta)}else{uniqueMetas.unshift({pubkey:feePayer,isSigner:true,isWritable:true})}for(const signature of this.signatures){const uniqueIndex=uniqueMetas.findIndex(x=>{return x.pubkey.equals(signature.publicKey)});if(uniqueIndex>-1){if(!uniqueMetas[uniqueIndex].isSigner){uniqueMetas[uniqueIndex].isSigner=true;console.warn("Transaction references a signature that is unnecessary, "+"only the fee payer and instruction signer accounts should sign a transaction. "+"This behavior is deprecated and will throw an error in the next major version release.")}}else{throw new Error(`unknown signer: ${signature.publicKey.toString()}`)}}let numRequiredSignatures=0;let numReadonlySignedAccounts=0;let numReadonlyUnsignedAccounts=0;const signedKeys=[];const unsignedKeys=[];uniqueMetas.forEach(({pubkey,isSigner,isWritable})=>{if(isSigner){signedKeys.push(pubkey.toString());numRequiredSignatures+=1;if(!isWritable){numReadonlySignedAccounts+=1}}else{unsignedKeys.push(pubkey.toString());if(!isWritable){numReadonlyUnsignedAccounts+=1}}});const accountKeys=signedKeys.concat(unsignedKeys);const compiledInstructions=instructions.map(instruction=>{const{data,programId}=instruction;return{programIdIndex:accountKeys.indexOf(programId.toString()),accounts:instruction.keys.map(meta=>accountKeys.indexOf(meta.pubkey.toString())),data:bs58__default["default"].encode(data)}});compiledInstructions.forEach(instruction=>{assert(instruction.programIdIndex>=0);instruction.accounts.forEach(keyIndex=>assert(keyIndex>=0))});return new Message({header:{numRequiredSignatures:numRequiredSignatures,numReadonlySignedAccounts:numReadonlySignedAccounts,numReadonlyUnsignedAccounts:numReadonlyUnsignedAccounts},accountKeys:accountKeys,recentBlockhash:recentBlockhash,instructions:compiledInstructions})}_compile(){const message=this.compileMessage();const signedKeys=message.accountKeys.slice(0,message.header.numRequiredSignatures);if(this.signatures.length===signedKeys.length){const valid=this.signatures.every((pair,index)=>{return signedKeys[index].equals(pair.publicKey)});if(valid)return message}this.signatures=signedKeys.map(publicKey=>({signature:null,publicKey:publicKey}));return message}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(connection){return(await connection.getFeeForMessage(this.compileMessage())).value}setSigners(...signers){if(signers.length===0){throw new Error("No signers")}const seen=new Set;this.signatures=signers.filter(publicKey=>{const key=publicKey.toString();if(seen.has(key)){return false}else{seen.add(key);return true}}).map(publicKey=>({signature:null,publicKey:publicKey}))}sign(...signers){if(signers.length===0){throw new Error("No signers")}const seen=new Set;const uniqueSigners=[];for(const signer of signers){const key=signer.publicKey.toString();if(seen.has(key)){continue}else{seen.add(key);uniqueSigners.push(signer)}}this.signatures=uniqueSigners.map(signer=>({signature:null,publicKey:signer.publicKey}));const message=this._compile();this._partialSign(message,...uniqueSigners)}partialSign(...signers){if(signers.length===0){throw new Error("No signers")}const seen=new Set;const uniqueSigners=[];for(const signer of signers){const key=signer.publicKey.toString();if(seen.has(key)){continue}else{seen.add(key);uniqueSigners.push(signer)}}const message=this._compile();this._partialSign(message,...uniqueSigners)}_partialSign(message,...signers){const signData=message.serialize();signers.forEach(signer=>{const signature=sign(signData,signer.secretKey);this._addSignature(signer.publicKey,toBuffer(signature))})}addSignature(pubkey,signature){this._compile();this._addSignature(pubkey,signature)}_addSignature(pubkey,signature){assert(signature.length===64);const index=this.signatures.findIndex(sigpair=>pubkey.equals(sigpair.publicKey));if(index<0){throw new Error(`unknown signer: ${pubkey.toString()}`)}this.signatures[index].signature=buffer.Buffer.from(signature)}verifySignatures(requireAllSignatures){return this._verifySignatures(this.serializeMessage(),requireAllSignatures===undefined?true:requireAllSignatures)}_verifySignatures(signData,requireAllSignatures){for(const{signature,publicKey}of this.signatures){if(signature===null){if(requireAllSignatures){return false}}else{if(!verify(signature,signData,publicKey.toBytes())){return false}}}return true}serialize(config){const{requireAllSignatures,verifySignatures}=Object.assign({requireAllSignatures:true,verifySignatures:true},config);const signData=this.serializeMessage();if(verifySignatures&&!this._verifySignatures(signData,requireAllSignatures)){throw new Error("Signature verification failed")}return this._serialize(signData)}_serialize(signData){const{signatures}=this;const signatureCount=[];encodeLength(signatureCount,signatures.length);const transactionLength=signatureCount.length+signatures.length*64+signData.length;const wireTransaction=buffer.Buffer.alloc(transactionLength);assert(signatures.length<256);buffer.Buffer.from(signatureCount).copy(wireTransaction,0);signatures.forEach(({signature},index)=>{if(signature!==null){assert(signature.length===64,`signature has invalid length`);buffer.Buffer.from(signature).copy(wireTransaction,signatureCount.length+index*64)}});signData.copy(wireTransaction,signatureCount.length+signatures.length*64);assert(wireTransaction.length<=PACKET_DATA_SIZE,`Transaction too large: ${wireTransaction.length} > ${PACKET_DATA_SIZE}`);return wireTransaction}get keys(){assert(this.instructions.length===1);return this.instructions[0].keys.map(keyObj=>keyObj.pubkey)}get programId(){assert(this.instructions.length===1);return this.instructions[0].programId}get data(){assert(this.instructions.length===1);return this.instructions[0].data}static from(buffer$1){let byteArray=[...buffer$1];const signatureCount=decodeLength(byteArray);let signatures=[];for(let i=0;i<signatureCount;i++){const signature=byteArray.slice(0,SIGNATURE_LENGTH_IN_BYTES);byteArray=byteArray.slice(SIGNATURE_LENGTH_IN_BYTES);signatures.push(bs58__default["default"].encode(buffer.Buffer.from(signature)))}return Transaction.populate(Message.from(byteArray),signatures)}static populate(message,signatures=[]){const transaction=new Transaction;transaction.recentBlockhash=message.recentBlockhash;if(message.header.numRequiredSignatures>0){transaction.feePayer=message.accountKeys[0]}signatures.forEach((signature,index)=>{const sigPubkeyPair={signature:signature==bs58__default["default"].encode(DEFAULT_SIGNATURE)?null:bs58__default["default"].decode(signature),publicKey:message.accountKeys[index]};transaction.signatures.push(sigPubkeyPair)});message.instructions.forEach(instruction=>{const keys=instruction.accounts.map(account=>{const pubkey=message.accountKeys[account];return{pubkey:pubkey,isSigner:transaction.signatures.some(keyObj=>keyObj.publicKey.toString()===pubkey.toString())||message.isAccountSigner(account),isWritable:message.isAccountWritable(account)}});transaction.instructions.push(new TransactionInstruction({keys:keys,programId:message.accountKeys[instruction.programIdIndex],data:bs58__default["default"].decode(instruction.data)}))});transaction._message=message;transaction._json=transaction.toJSON();return transaction}}class TransactionMessage{constructor(args){this.payerKey=void 0;this.instructions=void 0;this.recentBlockhash=void 0;this.payerKey=args.payerKey;this.instructions=args.instructions;this.recentBlockhash=args.recentBlockhash}static decompile(message,args){const{header,compiledInstructions,recentBlockhash}=message;const{numRequiredSignatures,numReadonlySignedAccounts,numReadonlyUnsignedAccounts}=header;const numWritableSignedAccounts=numRequiredSignatures-numReadonlySignedAccounts;assert(numWritableSignedAccounts>0,"Message header is invalid");const numWritableUnsignedAccounts=message.staticAccountKeys.length-numRequiredSignatures-numReadonlyUnsignedAccounts;assert(numWritableUnsignedAccounts>=0,"Message header is invalid");const accountKeys=message.getAccountKeys(args);const payerKey=accountKeys.get(0);if(payerKey===undefined){throw new Error("Failed to decompile message because no account keys were found")}const instructions=[];for(const compiledIx of compiledInstructions){const keys=[];for(const keyIndex of compiledIx.accountKeyIndexes){const pubkey=accountKeys.get(keyIndex);if(pubkey===undefined){throw new Error(`Failed to find key for account key index ${keyIndex}`)}const isSigner=keyIndex<numRequiredSignatures;let isWritable;if(isSigner){isWritable=keyIndex<numWritableSignedAccounts}else if(keyIndex<accountKeys.staticAccountKeys.length){isWritable=keyIndex-numRequiredSignatures<numWritableUnsignedAccounts}else{isWritable=keyIndex-accountKeys.staticAccountKeys.length<accountKeys.accountKeysFromLookups.writable.length}keys.push({pubkey:pubkey,isSigner:keyIndex<header.numRequiredSignatures,isWritable:isWritable})}const programId=accountKeys.get(compiledIx.programIdIndex);if(programId===undefined){throw new Error(`Failed to find program id for program id index ${compiledIx.programIdIndex}`)}instructions.push(new TransactionInstruction({programId:programId,data:toBuffer(compiledIx.data),keys:keys}))}return new TransactionMessage({payerKey:payerKey,instructions:instructions,recentBlockhash:recentBlockhash})}compileToLegacyMessage(){return Message.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(addressLookupTableAccounts){return MessageV0.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:addressLookupTableAccounts})}}class VersionedTransaction{get version(){return this.message.version}constructor(message,signatures){this.signatures=void 0;this.message=void 0;if(signatures!==undefined){assert(signatures.length===message.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures");this.signatures=signatures}else{const defaultSignatures=[];for(let i=0;i<message.header.numRequiredSignatures;i++){defaultSignatures.push(new Uint8Array(SIGNATURE_LENGTH_IN_BYTES))}this.signatures=defaultSignatures}this.message=message}serialize(){const serializedMessage=this.message.serialize();const encodedSignaturesLength=Array();encodeLength(encodedSignaturesLength,this.signatures.length);const transactionLayout=BufferLayout__namespace.struct([BufferLayout__namespace.blob(encodedSignaturesLength.length,"encodedSignaturesLength"),BufferLayout__namespace.seq(signature(),this.signatures.length,"signatures"),BufferLayout__namespace.blob(serializedMessage.length,"serializedMessage")]);const serializedTransaction=new Uint8Array(2048);const serializedTransactionLength=transactionLayout.encode({encodedSignaturesLength:new Uint8Array(encodedSignaturesLength),signatures:this.signatures,serializedMessage:serializedMessage},serializedTransaction);return serializedTransaction.slice(0,serializedTransactionLength)}static deserialize(serializedTransaction){let byteArray=[...serializedTransaction];const signatures=[];const signaturesLength=decodeLength(byteArray);for(let i=0;i<signaturesLength;i++){signatures.push(new Uint8Array(byteArray.splice(0,SIGNATURE_LENGTH_IN_BYTES)))}const message=VersionedMessage.deserialize(new Uint8Array(byteArray));return new VersionedTransaction(message,signatures)}sign(signers){const messageData=this.message.serialize();const signerPubkeys=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const signer of signers){const signerIndex=signerPubkeys.findIndex(pubkey=>pubkey.equals(signer.publicKey));assert(signerIndex>=0,`Cannot sign with non signer key ${signer.publicKey.toBase58()}`);this.signatures[signerIndex]=sign(messageData,signer.secretKey)}}addSignature(publicKey,signature){assert(signature.byteLength===64,"Signature must be 64 bytes long");const signerPubkeys=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);const signerIndex=signerPubkeys.findIndex(pubkey=>pubkey.equals(publicKey));assert(signerIndex>=0,`Can not add signature; \`${publicKey.toBase58()}\` is not required to sign this transaction`);this.signatures[signerIndex]=signature}}const SYSVAR_CLOCK_PUBKEY=new PublicKey("SysvarC1ock11111111111111111111111111111111");const SYSVAR_EPOCH_SCHEDULE_PUBKEY=new PublicKey("SysvarEpochSchedu1e111111111111111111111111");const SYSVAR_INSTRUCTIONS_PUBKEY=new PublicKey("Sysvar1nstructions1111111111111111111111111");const SYSVAR_RECENT_BLOCKHASHES_PUBKEY=new PublicKey("SysvarRecentB1ockHashes11111111111111111111");const SYSVAR_RENT_PUBKEY=new PublicKey("SysvarRent111111111111111111111111111111111");const SYSVAR_REWARDS_PUBKEY=new PublicKey("SysvarRewards111111111111111111111111111111");const SYSVAR_SLOT_HASHES_PUBKEY=new PublicKey("SysvarS1otHashes111111111111111111111111111");const SYSVAR_SLOT_HISTORY_PUBKEY=new PublicKey("SysvarS1otHistory11111111111111111111111111");const SYSVAR_STAKE_HISTORY_PUBKEY=new PublicKey("SysvarStakeHistory1111111111111111111111111");async function sendAndConfirmTransaction(connection,transaction,signers,options){const sendOptions=options&&{skipPreflight:options.skipPreflight,preflightCommitment:options.preflightCommitment||options.commitment,maxRetries:options.maxRetries,minContextSlot:options.minContextSlot};const signature=await connection.sendTransaction(transaction,signers,sendOptions);let status;if(transaction.recentBlockhash!=null&&transaction.lastValidBlockHeight!=null){status=(await connection.confirmTransaction({abortSignal:options?.abortSignal,signature:signature,blockhash:transaction.recentBlockhash,lastValidBlockHeight:transaction.lastValidBlockHeight},options&&options.commitment)).value}else if(transaction.minNonceContextSlot!=null&&transaction.nonceInfo!=null){const{nonceInstruction}=transaction.nonceInfo;const nonceAccountPubkey=nonceInstruction.keys[0].pubkey;status=(await connection.confirmTransaction({abortSignal:options?.abortSignal,minContextSlot:transaction.minNonceContextSlot,nonceAccountPubkey:nonceAccountPubkey,nonceValue:transaction.nonceInfo.nonce,signature:signature},options&&options.commitment)).value}else{if(options?.abortSignal!=null){console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was "+"supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` "+"or a combination of `nonceInfo` and `minNonceContextSlot` are abortable.")}status=(await connection.confirmTransaction(signature,options&&options.commitment)).value}if(status.err){throw new Error(`Transaction ${signature} failed (${JSON.stringify(status)})`)}return signature}function sleep(ms){return new Promise(resolve=>setTimeout(resolve,ms))}function encodeData(type,fields){const allocLength=type.layout.span>=0?type.layout.span:getAlloc(type,fields);const data=buffer.Buffer.alloc(allocLength);const layoutFields=Object.assign({instruction:type.index},fields);type.layout.encode(layoutFields,data);return data}function decodeData$1(type,buffer){let data;try{data=type.layout.decode(buffer)}catch(err){throw new Error("invalid instruction; "+err)}if(data.instruction!==type.index){throw new Error(`invalid instruction; instruction index mismatch ${data.instruction} != ${type.index}`)}return data}const FeeCalculatorLayout=BufferLayout__namespace.nu64("lamportsPerSignature");const NonceAccountLayout=BufferLayout__namespace.struct([BufferLayout__namespace.u32("version"),BufferLayout__namespace.u32("state"),publicKey("authorizedPubkey"),publicKey("nonce"),BufferLayout__namespace.struct([FeeCalculatorLayout],"feeCalculator")]);const NONCE_ACCOUNT_LENGTH=NonceAccountLayout.span;class NonceAccount{constructor(args){this.authorizedPubkey=void 0;this.nonce=void 0;this.feeCalculator=void 0;this.authorizedPubkey=args.authorizedPubkey;this.nonce=args.nonce;this.feeCalculator=args.feeCalculator}static fromAccountData(buffer){const nonceAccount=NonceAccountLayout.decode(toBuffer(buffer),0);return new NonceAccount({authorizedPubkey:new PublicKey(nonceAccount.authorizedPubkey),nonce:new PublicKey(nonceAccount.nonce).toString(),feeCalculator:nonceAccount.feeCalculator})}}const encodeDecode=layout=>{const decode=layout.decode.bind(layout);const encode=layout.encode.bind(layout);return{decode:decode,encode:encode}};const bigInt=length=>property=>{const layout=BufferLayout.blob(length,property);const{encode,decode}=encodeDecode(layout);const bigIntLayout=layout;bigIntLayout.decode=(buffer$1,offset)=>{const src=decode(buffer$1,offset);return bigintBuffer.toBigIntLE(buffer.Buffer.from(src))};bigIntLayout.encode=(bigInt,buffer,offset)=>{const src=bigintBuffer.toBufferLE(bigInt,length);return encode(src,buffer,offset)};return bigIntLayout};const u64=bigInt(8);class SystemInstruction{constructor(){}static decodeInstructionType(instruction){this.checkProgramId(instruction.programId);const instructionTypeLayout=BufferLayout__namespace.u32("instruction");const typeIndex=instructionTypeLayout.decode(instruction.data);let type;for(const[ixType,layout]of Object.entries(SYSTEM_INSTRUCTION_LAYOUTS)){if(layout.index==typeIndex){type=ixType;break}}if(!type){throw new Error("Instruction type incorrect; not a SystemInstruction")}return type}static decodeCreateAccount(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,2);const{lamports,space,programId}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Create,instruction.data);return{fromPubkey:instruction.keys[0].pubkey,newAccountPubkey:instruction.keys[1].pubkey,lamports:lamports,space:space,programId:new PublicKey(programId)}}static decodeTransfer(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,2);const{lamports}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Transfer,instruction.data);return{fromPubkey:instruction.keys[0].pubkey,toPubkey:instruction.keys[1].pubkey,lamports:lamports}}static decodeTransferWithSeed(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,3);const{lamports,seed,programId}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.TransferWithSeed,instruction.data);return{fromPubkey:instruction.keys[0].pubkey,basePubkey:instruction.keys[1].pubkey,toPubkey:instruction.keys[2].pubkey,lamports:lamports,seed:seed,programId:new PublicKey(programId)}}static decodeAllocate(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,1);const{space}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Allocate,instruction.data);return{accountPubkey:instruction.keys[0].pubkey,space:space}}static decodeAllocateWithSeed(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,1);const{base,seed,space,programId}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AllocateWithSeed,instruction.data);return{accountPubkey:instruction.keys[0].pubkey,basePubkey:new PublicKey(base),seed:seed,space:space,programId:new PublicKey(programId)}}static decodeAssign(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,1);const{programId}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Assign,instruction.data);return{accountPubkey:instruction.keys[0].pubkey,programId:new PublicKey(programId)}}static decodeAssignWithSeed(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,1);const{base,seed,programId}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AssignWithSeed,instruction.data);return{accountPubkey:instruction.keys[0].pubkey,basePubkey:new PublicKey(base),seed:seed,programId:new PublicKey(programId)}}static decodeCreateWithSeed(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,2);const{base,seed,lamports,space,programId}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.CreateWithSeed,instruction.data);return{fromPubkey:instruction.keys[0].pubkey,newAccountPubkey:instruction.keys[1].pubkey,basePubkey:new PublicKey(base),seed:seed,lamports:lamports,space:space,programId:new PublicKey(programId)}}static decodeNonceInitialize(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,3);const{authorized}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.InitializeNonceAccount,instruction.data);return{noncePubkey:instruction.keys[0].pubkey,authorizedPubkey:new PublicKey(authorized)}}static decodeNonceAdvance(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,3);decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AdvanceNonceAccount,instruction.data);return{noncePubkey:instruction.keys[0].pubkey,authorizedPubkey:instruction.keys[2].pubkey}}static decodeNonceWithdraw(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,5);const{lamports}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.WithdrawNonceAccount,instruction.data);return{noncePubkey:instruction.keys[0].pubkey,toPubkey:instruction.keys[1].pubkey,authorizedPubkey:instruction.keys[4].pubkey,lamports:lamports}}static decodeNonceAuthorize(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,2);const{authorized}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AuthorizeNonceAccount,instruction.data);return{noncePubkey:instruction.keys[0].pubkey,authorizedPubkey:instruction.keys[1].pubkey,newAuthorizedPubkey:new PublicKey(authorized)}}static checkProgramId(programId){if(!programId.equals(SystemProgram.programId)){throw new Error("invalid instruction; programId is not SystemProgram")}}static checkKeyLength(keys,expectedLength){if(keys.length<expectedLength){throw new Error(`invalid instruction; found ${keys.length} keys, expected at least ${expectedLength}`)}}}const SYSTEM_INSTRUCTION_LAYOUTS=Object.freeze({Create:{index:0,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),BufferLayout__namespace.ns64("lamports"),BufferLayout__namespace.ns64("space"),publicKey("programId")])},Assign:{index:1,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),publicKey("programId")])},Transfer:{index:2,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),u64("lamports")])},CreateWithSeed:{index:3,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),publicKey("base"),rustString("seed"),BufferLayout__namespace.ns64("lamports"),BufferLayout__namespace.ns64("space"),publicKey("programId")])},AdvanceNonceAccount:{index:4,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),BufferLayout__namespace.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),publicKey("authorized")])},AuthorizeNonceAccount:{index:7,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),publicKey("authorized")])},Allocate:{index:8,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),BufferLayout__namespace.ns64("space")])},AllocateWithSeed:{index:9,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),publicKey("base"),rustString("seed"),BufferLayout__namespace.ns64("space"),publicKey("programId")])},AssignWithSeed:{index:10,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),publicKey("base"),rustString("seed"),publicKey("programId")])},TransferWithSeed:{index:11,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),u64("lamports"),rustString("seed"),publicKey("programId")])},UpgradeNonceAccount:{index:12,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction")])}});class SystemProgram{constructor(){}static createAccount(params){const type=SYSTEM_INSTRUCTION_LAYOUTS.Create;const data=encodeData(type,{lamports:params.lamports,space:params.space,programId:toBuffer(params.programId.toBuffer())});return new TransactionInstruction({keys:[{pubkey:params.fromPubkey,isSigner:true,isWritable:true},{pubkey:params.newAccountPubkey,isSigner:true,isWritable:true}],programId:this.programId,data:data})}static transfer(params){let data;let keys;if("basePubkey"in params){const type=SYSTEM_INSTRUCTION_LAYOUTS.TransferWithSeed;data=encodeData(type,{lamports:BigInt(params.lamports),seed:params.seed,programId:toBuffer(params.programId.toBuffer())});keys=[{pubkey:params.fromPubkey,isSigner:false,isWritable:true},{pubkey:params.basePubkey,isSigner:true,isWritable:false},{pubkey:params.toPubkey,isSigner:false,isWritable:true}]}else{const type=SYSTEM_INSTRUCTION_LAYOUTS.Transfer;data=encodeData(type,{lamports:BigInt(params.lamports)});keys=[{pubkey:params.fromPubkey,isSigner:true,isWritable:true},{pubkey:params.toPubkey,isSigner:false,isWritable:true}]}return new TransactionInstruction({keys:keys,programId:this.programId,data:data})}static assign(params){let data;let keys;if("basePubkey"in params){const type=SYSTEM_INSTRUCTION_LAYOUTS.AssignWithSeed;data=encodeData(type,{base:toBuffer(params.basePubkey.toBuffer()),seed:params.seed,programId:toBuffer(params.programId.toBuffer())});keys=[{pubkey:params.accountPubkey,isSigner:false,isWritable:true},{pubkey:params.basePubkey,isSigner:true,isWritable:false}]}else{const type=SYSTEM_INSTRUCTION_LAYOUTS.Assign;data=encodeData(type,{programId:toBuffer(params.programId.toBuffer())});keys=[{pubkey:params.accountPubkey,isSigner:true,isWritable:true}]}return new TransactionInstruction({keys:keys,programId:this.programId,data:data})}static createAccountWithSeed(params){const type=SYSTEM_INSTRUCTION_LAYOUTS.CreateWithSeed;const data=encodeData(type,{base:toBuffer(params.basePubkey.toBuffer()),seed:params.seed,lamports:params.lamports,space:params.space,programId:toBuffer(params.programId.toBuffer())});let keys=[{pubkey:params.fromPubkey,isSigner:true,isWritable:true},{pubkey:params.newAccountPubkey,isSigner:false,isWritable:true}];if(params.basePubkey!=params.fromPubkey){keys.push({pubkey:params.basePubkey,isSigner:true,isWritable:false})}return new TransactionInstruction({keys:keys,programId:this.programId,data:data})}static createNonceAccount(params){const transaction=new Transaction;if("basePubkey"in params&&"seed"in params){transaction.add(SystemProgram.createAccountWithSeed({fromPubkey:params.fromPubkey,newAccountPubkey:params.noncePubkey,basePubkey:params.basePubkey,seed:params.seed,lamports:params.lamports,space:NONCE_ACCOUNT_LENGTH,programId:this.programId}))}else{transaction.add(SystemProgram.createAccount({fromPubkey:params.fromPubkey,newAccountPubkey:params.noncePubkey,lamports:params.lamports,space:NONCE_ACCOUNT_LENGTH,programId:this.programId}))}const initParams={noncePubkey:params.noncePubkey,authorizedPubkey:params.authorizedPubkey};transaction.add(this.nonceInitialize(initParams));return transaction}static nonceInitialize(params){const type=SYSTEM_INSTRUCTION_LAYOUTS.InitializeNonceAccount;const data=encodeData(type,{authorized:toBuffer(params.authorizedPubkey.toBuffer())});const instructionData={keys:[{pubkey:params.noncePubkey,isSigner:false,isWritable:true},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:false,isWritable:false},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:false,isWritable:false}],programId:this.programId,data:data};return new TransactionInstruction(instructionData)}static nonceAdvance(params){const type=SYSTEM_INSTRUCTION_LAYOUTS.AdvanceNonceAccount;const data=encodeData(type);const instructionData={keys:[{pubkey:params.noncePubkey,isSigner:false,isWritable:true},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:false,isWritable:false},{pubkey:params.authorizedPubkey,isSigner:true,isWritable:false}],programId:this.programId,data:data};return new TransactionInstruction(instructionData)}static nonceWithdraw(params){const type=SYSTEM_INSTRUCTION_LAYOUTS.WithdrawNonceAccount;const data=encodeData(type,{lamports:params.lamports});return new TransactionInstruction({keys:[{pubkey:params.noncePubkey,isSigner:false,isWritable:true},{pubkey:params.toPubkey,isSigner:false,isWritable:true},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:false,isWritable:false},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:false,isWritable:false},{pubkey:params.authorizedPubkey,isSigner:true,isWritable:false}],programId:this.programId,data:data})}static nonceAuthorize(params){const type=SYSTEM_INSTRUCTION_LAYOUTS.AuthorizeNonceAccount;const data=encodeData(type,{authorized:toBuffer(params.newAuthorizedPubkey.toBuffer())});return new TransactionInstruction({keys:[{pubkey:params.noncePubkey,isSigner:false,isWritable:true},{pubkey:params.authorizedPubkey,isSigner:true,isWritable:false}],programId:this.programId,data:data})}static allocate(params){let data;let keys;if("basePubkey"in params){const type=SYSTEM_INSTRUCTION_LAYOUTS.AllocateWithSeed;data=encodeData(type,{base:toBuffer(params.basePubkey.toBuffer()),seed:params.seed,space:params.space,programId:toBuffer(params.programId.toBuffer())});keys=[{pubkey:params.accountPubkey,isSigner:false,isWritable:true},{pubkey:params.basePubkey,isSigner:true,isWritable:false}]}else{const type=SYSTEM_INSTRUCTION_LAYOUTS.Allocate;data=encodeData(type,{space:params.space});keys=[{pubkey:params.accountPubkey,isSigner:true,isWritable:true}]}return new TransactionInstruction({keys:keys,programId:this.programId,data:data})}}SystemProgram.programId=new PublicKey("11111111111111111111111111111111");const CHUNK_SIZE=PACKET_DATA_SIZE-300;class Loader{constructor(){}static getMinNumSignatures(dataLength){return 2*(Math.ceil(dataLength/Loader.chunkSize)+1+1)}static async load(connection,payer,program,programId,data){{const balanceNeeded=await connection.getMinimumBalanceForRentExemption(data.length);const programInfo=await connection.getAccountInfo(program.publicKey,"confirmed");let transaction=null;if(programInfo!==null){if(programInfo.executable){console.error("Program load failed, account is already executable");return false}if(programInfo.data.length!==data.length){transaction=transaction||new Transaction;transaction.add(SystemProgram.allocate({accountPubkey:program.publicKey,space:data.length}))}if(!programInfo.owner.equals(programId)){transaction=transaction||new Transaction;transaction.add(SystemProgram.assign({accountPubkey:program.publicKey,programId:programId}))}if(programInfo.lamports<balanceNeeded){transaction=transaction||new Transaction;transaction.add(SystemProgram.transfer({fromPubkey:payer.publicKey,toPubkey:program.publicKey,lamports:balanceNeeded-programInfo.lamports}))}}else{transaction=(new Transaction).add(SystemProgram.createAccount({fromPubkey:payer.publicKey,newAccountPubkey:program.publicKey,lamports:balanceNeeded>0?balanceNeeded:1,space:data.length,programId:programId}))}if(transaction!==null){await sendAndConfirmTransaction(connection,transaction,[payer,program],{commitment:"confirmed"})}}const dataLayout=BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),BufferLayout__namespace.u32("offset"),BufferLayout__namespace.u32("bytesLength"),BufferLayout__namespace.u32("bytesLengthPadding"),BufferLayout__namespace.seq(BufferLayout__namespace.u8("byte"),BufferLayout__namespace.offset(BufferLayout__namespace.u32(),-8),"bytes")]);const chunkSize=Loader.chunkSize;let offset=0;let array=data;let transactions=[];while(array.length>0){const bytes=array.slice(0,chunkSize);const data=buffer.Buffer.alloc(chunkSize+16);dataLayout.encode({instruction:0,offset:offset,bytes:bytes,bytesLength:0,bytesLengthPadding:0},data);const transaction=(new Transaction).add({keys:[{pubkey:program.publicKey,isSigner:true,isWritable:true}],programId:programId,data:data});transactions.push(sendAndConfirmTransaction(connection,transaction,[payer,program],{commitment:"confirmed"}));if(connection._rpcEndpoint.includes("solana.com")){const REQUESTS_PER_SECOND=4;await sleep(1e3/REQUESTS_PER_SECOND)}offset+=chunkSize;array=array.slice(chunkSize)}await Promise.all(transactions);{const dataLayout=BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction")]);const data=buffer.Buffer.alloc(dataLayout.span);dataLayout.encode({instruction:1},data);const transaction=(new Transaction).add({keys:[{pubkey:program.publicKey,isSigner:true,isWritable:true},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:false,isWritable:false}],programId:programId,data:data});await sendAndConfirmTransaction(connection,transaction,[payer,program],{commitment:"confirmed"})}return true}}Loader.chunkSize=CHUNK_SIZE;const BPF_LOADER_PROGRAM_ID=new PublicKey("BPFLoader2111111111111111111111111111111111");class BpfLoader{static getMinNumSignatures(dataLength){return Loader.getMinNumSignatures(dataLength)}static load(connection,payer,program,elf,loaderProgramId){return Loader.load(connection,payer,program,loaderProgramId,elf)}}var objToString=Object.prototype.toString;var objKeys=Object.keys||function(obj){var keys=[];for(var name in obj){keys.push(name)}return keys};function stringify(val,isArrayProp){var i,max,str,keys,key,propVal,toStr;if(val===true){return"true"}if(val===false){return"false"}switch(typeof val){case"object":if(val===null){return null}else if(val.toJSON&&typeof val.toJSON==="function"){return stringify(val.toJSON(),isArrayProp)}else{toStr=objToString.call(val);if(toStr==="[object Array]"){str="[";max=val.length-1;for(i=0;i<max;i++){str+=stringify(val[i],true)+","}if(max>-1){str+=stringify(val[i],true)}return str+"]"}else if(toStr==="[object Object]"){keys=objKeys(val).sort();max=keys.length;str="";i=0;while(i<max){key=keys[i];propVal=stringify(val[key],false);if(propVal!==undefined){if(str){str+=","}str+=JSON.stringify(key)+":"+propVal}i++}return"{"+str+"}"}else{return JSON.stringify(val)}}case"function":case"undefined":return isArrayProp?null:undefined;case"string":return JSON.stringify(val);default:return isFinite(val)?val:null}}var fastStableStringify=function(val){var returnVal=stringify(val,false);if(returnVal!==undefined){return""+returnVal}};var fastStableStringify$1=fastStableStringify;const MINIMUM_SLOT_PER_EPOCH=32;function trailingZeros(n){let trailingZeros=0;while(n>1){n/=2;trailingZeros++}return trailingZeros}function nextPowerOfTwo(n){if(n===0)return 1;n--;n|=n>>1;n|=n>>2;n|=n>>4;n|=n>>8;n|=n>>16;n|=n>>32;return n+1}class EpochSchedule{constructor(slotsPerEpoch,leaderScheduleSlotOffset,warmup,firstNormalEpoch,firstNormalSlot){this.slotsPerEpoch=void 0;this.leaderScheduleSlotOffset=void 0;this.warmup=void 0;this.firstNormalEpoch=void 0;this.firstNormalSlot=void 0;this.slotsPerEpoch=slotsPerEpoch;this.leaderScheduleSlotOffset=leaderScheduleSlotOffset;this.warmup=warmup;this.firstNormalEpoch=firstNormalEpoch;this.firstNormalSlot=firstNormalSlot}getEpoch(slot){return this.getEpochAndSlotIndex(slot)[0]}getEpochAndSlotIndex(slot){if(slot<this.firstNormalSlot){const epoch=trailingZeros(nextPowerOfTwo(slot+MINIMUM_SLOT_PER_EPOCH+1))-trailingZeros(MINIMUM_SLOT_PER_EPOCH)-1;const epochLen=this.getSlotsInEpoch(epoch);const slotIndex=slot-(epochLen-MINIMUM_SLOT_PER_EPOCH);return[epoch,slotIndex]}else{const normalSlotIndex=slot-this.firstNormalSlot;const normalEpochIndex=Math.floor(normalSlotIndex/this.slotsPerEpoch);const epoch=this.firstNormalEpoch+normalEpochIndex;const slotIndex=normalSlotIndex%this.slotsPerEpoch;return[epoch,slotIndex]}}getFirstSlotInEpoch(epoch){if(epoch<=this.firstNormalEpoch){return(Math.pow(2,epoch)-1)*MINIMUM_SLOT_PER_EPOCH}else{return(epoch-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}}getLastSlotInEpoch(epoch){return this.getFirstSlotInEpoch(epoch)+this.getSlotsInEpoch(epoch)-1}getSlotsInEpoch(epoch){if(epoch<this.firstNormalEpoch){return Math.pow(2,epoch+trailingZeros(MINIMUM_SLOT_PER_EPOCH))}else{return this.slotsPerEpoch}}}class SendTransactionError extends Error{constructor(message,logs){super(message);this.logs=void 0;this.logs=logs}}const SolanaJSONRPCErrorCode={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class SolanaJSONRPCError extends Error{constructor({code,message,data},customMessage){super(customMessage!=null?`${customMessage}: ${message}`:message);this.code=void 0;this.data=void 0;this.code=code;this.data=data;this.name="SolanaJSONRPCError"}}var fetchImpl=globalThis.fetch;class RpcWebSocketClient extends RpcWebSocketCommonClient__default["default"]{constructor(address,options,generate_request_id){const webSocketFactory=url=>{const rpc=createRpc__default["default"](url,{autoconnect:true,max_reconnects:5,reconnect:true,reconnect_interval:1e3,...options});if("socket"in rpc){this.underlyingSocket=rpc.socket}else{this.underlyingSocket=rpc}return rpc};super(webSocketFactory,address,options,generate_request_id);this.underlyingSocket=void 0}call(...args){const readyState=this.underlyingSocket?.readyState;if(readyState===1){return super.call(...args)}return Promise.reject(new Error("Tried to call a JSON-RPC method `"+args[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+readyState+")"))}notify(...args){const readyState=this.underlyingSocket?.readyState;if(readyState===1){return super.notify(...args)}return Promise.reject(new Error("Tried to send a JSON-RPC notification `"+args[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+readyState+")"))}}const NUM_TICKS_PER_SECOND=160;const DEFAULT_TICKS_PER_SLOT=64;const NUM_SLOTS_PER_SECOND=NUM_TICKS_PER_SECOND/DEFAULT_TICKS_PER_SLOT;const MS_PER_SLOT=1e3/NUM_SLOTS_PER_SECOND;function decodeData(type,data){let decoded;try{decoded=type.layout.decode(data)}catch(err){throw new Error("invalid instruction; "+err)}if(decoded.typeIndex!==type.index){throw new Error(`invalid account data; account type mismatch ${decoded.typeIndex} != ${type.index}`)}return decoded}const LOOKUP_TABLE_META_SIZE=56;class AddressLookupTableAccount{constructor(args){this.key=void 0;this.state=void 0;this.key=args.key;this.state=args.state}isActive(){const U64_MAX=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===U64_MAX}static deserialize(accountData){const meta=decodeData(LookupTableMetaLayout,accountData);const serializedAddressesLen=accountData.length-LOOKUP_TABLE_META_SIZE;assert(serializedAddressesLen>=0,"lookup table is invalid");assert(serializedAddressesLen%32===0,"lookup table is invalid");const numSerializedAddresses=serializedAddressesLen/32;const{addresses}=BufferLayout__namespace.struct([BufferLayout__namespace.seq(publicKey(),numSerializedAddresses,"addresses")]).decode(accountData.slice(LOOKUP_TABLE_META_SIZE));return{deactivationSlot:meta.deactivationSlot,lastExtendedSlot:meta.lastExtendedSlot,lastExtendedSlotStartIndex:meta.lastExtendedStartIndex,authority:meta.authority.length!==0?new PublicKey(meta.authority[0]):undefined,addresses:addresses.map(address=>new PublicKey(address))}}}const LookupTableMetaLayout={index:1,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("typeIndex"),u64("deactivationSlot"),BufferLayout__namespace.nu64("lastExtendedSlot"),BufferLayout__namespace.u8("lastExtendedStartIndex"),BufferLayout__namespace.u8(),BufferLayout__namespace.seq(publicKey(),BufferLayout__namespace.offset(BufferLayout__namespace.u8(),-1),"authority")])};const URL_RE=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function makeWebsocketUrl(endpoint){const matches=endpoint.match(URL_RE);if(matches==null){throw TypeError(`Failed to validate endpoint URL \`${endpoint}\``)}const[_,hostish,portWithColon,rest]=matches;const protocol=endpoint.startsWith("https:")?"wss:":"ws:";const startPort=portWithColon==null?null:parseInt(portWithColon.slice(1),10);const websocketPort=startPort==null?"":`:${startPort+1}`;return`${protocol}//${hostish}${websocketPort}${rest}`}const PublicKeyFromString=superstruct.coerce(superstruct.instance(PublicKey),superstruct.string(),value=>new PublicKey(value));const RawAccountDataResult=superstruct.tuple([superstruct.string(),superstruct.literal("base64")]);const BufferFromRawAccountData=superstruct.coerce(superstruct.instance(buffer.Buffer),RawAccountDataResult,value=>buffer.Buffer.from(value[0],"base64"));const BLOCKHASH_CACHE_TIMEOUT_MS=30*1e3;function assertEndpointUrl(putativeUrl){if(/^https?:/.test(putativeUrl)===false){throw new TypeError("Endpoint URL must start with `http:` or `https:`.")}return putativeUrl}function extractCommitmentFromConfig(commitmentOrConfig){let commitment;let config;if(typeof commitmentOrConfig==="string"){commitment=commitmentOrConfig}else if(commitmentOrConfig){const{commitment:specifiedCommitment,...specifiedConfig}=commitmentOrConfig;commitment=specifiedCommitment;config=specifiedConfig}return{commitment:commitment,config:config}}function createRpcResult(result){return superstruct.union([superstruct.type({jsonrpc:superstruct.literal("2.0"),id:superstruct.string(),result:result}),superstruct.type({jsonrpc:superstruct.literal("2.0"),id:superstruct.string(),error:superstruct.type({code:superstruct.unknown(),message:superstruct.string(),data:superstruct.optional(superstruct.any())})})])}const UnknownRpcResult=createRpcResult(superstruct.unknown());function jsonRpcResult(schema){return superstruct.coerce(createRpcResult(schema),UnknownRpcResult,value=>{if("error"in value){return value}else{return{...value,result:superstruct.create(value.result,schema)}}})}function jsonRpcResultAndContext(value){return jsonRpcResult(superstruct.type({context:superstruct.type({slot:superstruct.number()}),value:value}))}function notificationResultAndContext(value){return superstruct.type({context:superstruct.type({slot:superstruct.number()}),value:value})}function versionedMessageFromResponse(version,response){if(version===0){return new MessageV0({header:response.header,staticAccountKeys:response.accountKeys.map(accountKey=>new PublicKey(accountKey)),recentBlockhash:response.recentBlockhash,compiledInstructions:response.instructions.map(ix=>({programIdIndex:ix.programIdIndex,accountKeyIndexes:ix.accounts,data:bs58__default["default"].decode(ix.data)})),addressTableLookups:response.addressTableLookups})}else{return new Message(response)}}const GetInflationGovernorResult=superstruct.type({foundation:superstruct.number(),foundationTerm:superstruct.number(),initial:superstruct.number(),taper:superstruct.number(),terminal:superstruct.number()});const GetInflationRewardResult=jsonRpcResult(superstruct.array(superstruct.nullable(superstruct.type({epoch:superstruct.number(),effectiveSlot:superstruct.number(),amount:superstruct.number(),postBalance:superstruct.number(),commission:superstruct.optional(superstruct.nullable(superstruct.number()))}))));const GetInflationRateResult=superstruct.type({total:superstruct.number(),validator:superstruct.number(),foundation:superstruct.number(),epoch:superstruct.number()});const GetEpochInfoResult=superstruct.type({epoch:superstruct.number(),slotIndex:superstruct.number(),slotsInEpoch:superstruct.number(),absoluteSlot:superstruct.number(),blockHeight:superstruct.optional(superstruct.number()),transactionCount:superstruct.optional(superstruct.number())});const GetEpochScheduleResult=superstruct.type({slotsPerEpoch:superstruct.number(),leaderScheduleSlotOffset:superstruct.number(),warmup:superstruct.boolean(),firstNormalEpoch:superstruct.number(),firstNormalSlot:superstruct.number()});const GetLeaderScheduleResult=superstruct.record(superstruct.string(),superstruct.array(superstruct.number()));const TransactionErrorResult=superstruct.nullable(superstruct.union([superstruct.type({}),superstruct.string()]));const SignatureStatusResult=superstruct.type({err:TransactionErrorResult});const SignatureReceivedResult=superstruct.literal("receivedSignature");const VersionResult=superstruct.type({"solana-core":superstruct.string(),"feature-set":superstruct.optional(superstruct.number())});const SimulatedTransactionResponseStruct=jsonRpcResultAndContext(superstruct.type({err:superstruct.nullable(superstruct.union([superstruct.type({}),superstruct.string()])),logs:superstruct.nullable(superstruct.array(superstruct.string())),accounts:superstruct.optional(superstruct.nullable(superstruct.array(superstruct.nullable(superstruct.type({executable:superstruct.boolean(),owner:superstruct.string(),lamports:superstruct.number(),data:superstruct.array(superstruct.string()),rentEpoch:superstruct.optional(superstruct.number())}))))),unitsConsumed:superstruct.optional(superstruct.number()),returnData:superstruct.optional(superstruct.nullable(superstruct.type({programId:superstruct.string(),data:superstruct.tuple([superstruct.string(),superstruct.literal("base64")])})))}));const BlockProductionResponseStruct=jsonRpcResultAndContext(superstruct.type({byIdentity:superstruct.record(superstruct.string(),superstruct.array(superstruct.number())),range:superstruct.type({firstSlot:superstruct.number(),lastSlot:superstruct.number()})}));function createRpcClient(url,httpHeaders,customFetch,fetchMiddleware,disableRetryOnRateLimit,httpAgent){const fetch=customFetch?customFetch:fetchImpl;let agent;{if(httpAgent!=null){console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment."+"It has been ignored; `httpAgent` is only used in Node environments.")}}let fetchWithMiddleware;if(fetchMiddleware){fetchWithMiddleware=async(info,init)=>{const modifiedFetchArgs=await new Promise((resolve,reject)=>{try{fetchMiddleware(info,init,(modifiedInfo,modifiedInit)=>resolve([modifiedInfo,modifiedInit]))}catch(error){reject(error)}});return await fetch(...modifiedFetchArgs)}}const clientBrowser=new RpcClient__default["default"](async(request,callback)=>{const options={method:"POST",body:request,agent:agent,headers:Object.assign({"Content-Type":"application/json"},httpHeaders||{},COMMON_HTTP_HEADERS)};try{let too_many_requests_retries=5;let res;let waitTime=500;for(;;){if(fetchWithMiddleware){res=await fetchWithMiddleware(url,options)}else{res=await fetch(url,options)}if(res.status!==429){break}if(disableRetryOnRateLimit===true){break}too_many_requests_retries-=1;if(too_many_requests_retries===0){break}console.log(`Server responded with ${res.status} ${res.statusText}.  Retrying after ${waitTime}ms delay...`);await sleep(waitTime);waitTime*=2}const text=await res.text();if(res.ok){callback(null,text)}else{callback(new Error(`${res.status} ${res.statusText}: ${text}`))}}catch(err){if(err instanceof Error)callback(err)}},{});return clientBrowser}function createRpcRequest(client){return(method,args)=>{return new Promise((resolve,reject)=>{client.request(method,args,(err,response)=>{if(err){reject(err);return}resolve(response)})})}}function createRpcBatchRequest(client){return requests=>{return new Promise((resolve,reject)=>{if(requests.length===0)resolve([]);const batch=requests.map(params=>{return client.request(params.methodName,params.args)});client.request(batch,(err,response)=>{if(err){reject(err);return}resolve(response)})})}}const GetInflationGovernorRpcResult=jsonRpcResult(GetInflationGovernorResult);const GetInflationRateRpcResult=jsonRpcResult(GetInflationRateResult);const GetEpochInfoRpcResult=jsonRpcResult(GetEpochInfoResult);const GetEpochScheduleRpcResult=jsonRpcResult(GetEpochScheduleResult);const GetLeaderScheduleRpcResult=jsonRpcResult(GetLeaderScheduleResult);const SlotRpcResult=jsonRpcResult(superstruct.number());const GetSupplyRpcResult=jsonRpcResultAndContext(superstruct.type({total:superstruct.number(),circulating:superstruct.number(),nonCirculating:superstruct.number(),nonCirculatingAccounts:superstruct.array(PublicKeyFromString)}));const TokenAmountResult=superstruct.type({amount:superstruct.string(),uiAmount:superstruct.nullable(superstruct.number()),decimals:superstruct.number(),uiAmountString:superstruct.optional(superstruct.string())});const GetTokenLargestAccountsResult=jsonRpcResultAndContext(superstruct.array(superstruct.type({address:PublicKeyFromString,amount:superstruct.string(),uiAmount:superstruct.nullable(superstruct.number()),decimals:superstruct.number(),uiAmountString:superstruct.optional(superstruct.string())})));const GetTokenAccountsByOwner=jsonRpcResultAndContext(superstruct.array(superstruct.type({pubkey:PublicKeyFromString,account:superstruct.type({executable:superstruct.boolean(),owner:PublicKeyFromString,lamports:superstruct.number(),data:BufferFromRawAccountData,rentEpoch:superstruct.number()})})));const ParsedAccountDataResult=superstruct.type({program:superstruct.string(),parsed:superstruct.unknown(),space:superstruct.number()});const GetParsedTokenAccountsByOwner=jsonRpcResultAndContext(superstruct.array(superstruct.type({pubkey:PublicKeyFromString,account:superstruct.type({executable:superstruct.boolean(),owner:PublicKeyFromString,lamports:superstruct.number(),data:ParsedAccountDataResult,rentEpoch:superstruct.number()})})));const GetLargestAccountsRpcResult=jsonRpcResultAndContext(superstruct.array(superstruct.type({lamports:superstruct.number(),address:PublicKeyFromString})));const AccountInfoResult=superstruct.type({executable:superstruct.boolean(),owner:PublicKeyFromString,lamports:superstruct.number(),data:BufferFromRawAccountData,rentEpoch:superstruct.number()});const KeyedAccountInfoResult=superstruct.type({pubkey:PublicKeyFromString,account:AccountInfoResult});const ParsedOrRawAccountData=superstruct.coerce(superstruct.union([superstruct.instance(buffer.Buffer),ParsedAccountDataResult]),superstruct.union([RawAccountDataResult,ParsedAccountDataResult]),value=>{if(Array.isArray(value)){return superstruct.create(value,BufferFromRawAccountData)}else{return value}});const ParsedAccountInfoResult=superstruct.type({executable:superstruct.boolean(),owner:PublicKeyFromString,lamports:superstruct.number(),data:ParsedOrRawAccountData,rentEpoch:superstruct.number()});const KeyedParsedAccountInfoResult=superstruct.type({pubkey:PublicKeyFromString,account:ParsedAccountInfoResult});const StakeActivationResult=superstruct.type({state:superstruct.union([superstruct.literal("active"),superstruct.literal("inactive"),superstruct.literal("activating"),superstruct.literal("deactivating")]),active:superstruct.number(),inactive:superstruct.number()});const GetConfirmedSignaturesForAddress2RpcResult=jsonRpcResult(superstruct.array(superstruct.type({signature:superstruct.string(),slot:superstruct.number(),err:TransactionErrorResult,memo:superstruct.nullable(superstruct.string()),blockTime:superstruct.optional(superstruct.nullable(superstruct.number()))})));const GetSignaturesForAddressRpcResult=jsonRpcResult(superstruct.array(superstruct.type({signature:superstruct.string(),slot:superstruct.number(),err:TransactionErrorResult,memo:superstruct.nullable(superstruct.string()),blockTime:superstruct.optional(superstruct.nullable(superstruct.number()))})));const AccountNotificationResult=superstruct.type({subscription:superstruct.number(),result:notificationResultAndContext(AccountInfoResult)});const ProgramAccountInfoResult=superstruct.type({pubkey:PublicKeyFromString,account:AccountInfoResult});const ProgramAccountNotificationResult=superstruct.type({subscription:superstruct.number(),result:notificationResultAndContext(ProgramAccountInfoResult)});const SlotInfoResult=superstruct.type({parent:superstruct.number(),slot:superstruct.number(),root:superstruct.number()});const SlotNotificationResult=superstruct.type({subscription:superstruct.number(),result:SlotInfoResult});const SlotUpdateResult=superstruct.union([superstruct.type({type:superstruct.union([superstruct.literal("firstShredReceived"),superstruct.literal("completed"),superstruct.literal("optimisticConfirmation"),superstruct.literal("root")]),slot:superstruct.number(),timestamp:superstruct.number()}),superstruct.type({type:superstruct.literal("createdBank"),parent:superstruct.number(),slot:superstruct.number(),timestamp:superstruct.number()}),superstruct.type({type:superstruct.literal("frozen"),slot:superstruct.number(),timestamp:superstruct.number(),stats:superstruct.type({numTransactionEntries:superstruct.number(),numSuccessfulTransactions:superstruct.number(),numFailedTransactions:superstruct.number(),maxTransactionsPerEntry:superstruct.number()})}),superstruct.type({type:superstruct.literal("dead"),slot:superstruct.number(),timestamp:superstruct.number(),err:superstruct.string()})]);const SlotUpdateNotificationResult=superstruct.type({subscription:superstruct.number(),result:SlotUpdateResult});const SignatureNotificationResult=superstruct.type({subscription:superstruct.number(),result:notificationResultAndContext(superstruct.union([SignatureStatusResult,SignatureReceivedResult]))});const RootNotificationResult=superstruct.type({subscription:superstruct.number(),result:superstruct.number()});const ContactInfoResult=superstruct.type({pubkey:superstruct.string(),gossip:superstruct.nullable(superstruct.string()),tpu:superstruct.nullable(superstruct.string()),rpc:superstruct.nullable(superstruct.string()),version:superstruct.nullable(superstruct.string())});const VoteAccountInfoResult=superstruct.type({votePubkey:superstruct.string(),nodePubkey:superstruct.string(),activatedStake:superstruct.number(),epochVoteAccount:superstruct.boolean(),epochCredits:superstruct.array(superstruct.tuple([superstruct.number(),superstruct.number(),superstruct.number()])),commission:superstruct.number(),lastVote:superstruct.number(),rootSlot:superstruct.nullable(superstruct.number())});const GetVoteAccounts=jsonRpcResult(superstruct.type({current:superstruct.array(VoteAccountInfoResult),delinquent:superstruct.array(VoteAccountInfoResult)}));const ConfirmationStatus=superstruct.union([superstruct.literal("processed"),superstruct.literal("confirmed"),superstruct.literal("finalized")]);const SignatureStatusResponse=superstruct.type({slot:superstruct.number(),confirmations:superstruct.nullable(superstruct.number()),err:TransactionErrorResult,confirmationStatus:superstruct.optional(ConfirmationStatus)});const GetSignatureStatusesRpcResult=jsonRpcResultAndContext(superstruct.array(superstruct.nullable(SignatureStatusResponse)));const GetMinimumBalanceForRentExemptionRpcResult=jsonRpcResult(superstruct.number());const AddressTableLookupStruct=superstruct.type({accountKey:PublicKeyFromString,writableIndexes:superstruct.array(superstruct.number()),readonlyIndexes:superstruct.array(superstruct.number())});const ConfirmedTransactionResult=superstruct.type({signatures:superstruct.array(superstruct.string()),message:superstruct.type({accountKeys:superstruct.array(superstruct.string()),header:superstruct.type({numRequiredSignatures:superstruct.number(),numReadonlySignedAccounts:superstruct.number(),numReadonlyUnsignedAccounts:superstruct.number()}),instructions:superstruct.array(superstruct.type({accounts:superstruct.array(superstruct.number()),data:superstruct.string(),programIdIndex:superstruct.number()})),recentBlockhash:superstruct.string(),addressTableLookups:superstruct.optional(superstruct.array(AddressTableLookupStruct))})});const AnnotatedAccountKey=superstruct.type({pubkey:PublicKeyFromString,signer:superstruct.boolean(),writable:superstruct.boolean(),source:superstruct.optional(superstruct.union([superstruct.literal("transaction"),superstruct.literal("lookupTable")]))});const ConfirmedTransactionAccountsModeResult=superstruct.type({accountKeys:superstruct.array(AnnotatedAccountKey),signatures:superstruct.array(superstruct.string())});const ParsedInstructionResult=superstruct.type({parsed:superstruct.unknown(),program:superstruct.string(),programId:PublicKeyFromString});const RawInstructionResult=superstruct.type({accounts:superstruct.array(PublicKeyFromString),data:superstruct.string(),programId:PublicKeyFromString});const InstructionResult=superstruct.union([RawInstructionResult,ParsedInstructionResult]);const UnknownInstructionResult=superstruct.union([superstruct.type({parsed:superstruct.unknown(),program:superstruct.string(),programId:superstruct.string()}),superstruct.type({accounts:superstruct.array(superstruct.string()),data:superstruct.string(),programId:superstruct.string()})]);const ParsedOrRawInstruction=superstruct.coerce(InstructionResult,UnknownInstructionResult,value=>{if("accounts"in value){return superstruct.create(value,RawInstructionResult)}else{return superstruct.create(value,ParsedInstructionResult)}});const ParsedConfirmedTransactionResult=superstruct.type({signatures:superstruct.array(superstruct.string()),message:superstruct.type({accountKeys:superstruct.array(AnnotatedAccountKey),instructions:superstruct.array(ParsedOrRawInstruction),recentBlockhash:superstruct.string(),addressTableLookups:superstruct.optional(superstruct.nullable(superstruct.array(AddressTableLookupStruct)))})});const TokenBalanceResult=superstruct.type({accountIndex:superstruct.number(),mint:superstruct.string(),owner:superstruct.optional(superstruct.string()),uiTokenAmount:TokenAmountResult});const LoadedAddressesResult=superstruct.type({writable:superstruct.array(PublicKeyFromString),readonly:superstruct.array(PublicKeyFromString)});const ConfirmedTransactionMetaResult=superstruct.type({err:TransactionErrorResult,fee:superstruct.number(),innerInstructions:superstruct.optional(superstruct.nullable(superstruct.array(superstruct.type({index:superstruct.number(),instructions:superstruct.array(superstruct.type({accounts:superstruct.array(superstruct.number()),data:superstruct.string(),programIdIndex:superstruct.number()}))})))),preBalances:superstruct.array(superstruct.number()),postBalances:superstruct.array(superstruct.number()),logMessages:superstruct.optional(superstruct.nullable(superstruct.array(superstruct.string()))),preTokenBalances:superstruct.optional(superstruct.nullable(superstruct.array(TokenBalanceResult))),postTokenBalances:superstruct.optional(superstruct.nullable(superstruct.array(TokenBalanceResult))),loadedAddresses:superstruct.optional(LoadedAddressesResult),computeUnitsConsumed:superstruct.optional(superstruct.number())});const ParsedConfirmedTransactionMetaResult=superstruct.type({err:TransactionErrorResult,fee:superstruct.number(),innerInstructions:superstruct.optional(superstruct.nullable(superstruct.array(superstruct.type({index:superstruct.number(),instructions:superstruct.array(ParsedOrRawInstruction)})))),preBalances:superstruct.array(superstruct.number()),postBalances:superstruct.array(superstruct.number()),logMessages:superstruct.optional(superstruct.nullable(superstruct.array(superstruct.string()))),preTokenBalances:superstruct.optional(superstruct.nullable(superstruct.array(TokenBalanceResult))),postTokenBalances:superstruct.optional(superstruct.nullable(superstruct.array(TokenBalanceResult))),loadedAddresses:superstruct.optional(LoadedAddressesResult),computeUnitsConsumed:superstruct.optional(superstruct.number())});const TransactionVersionStruct=superstruct.union([superstruct.literal(0),superstruct.literal("legacy")]);const RewardsResult=superstruct.type({pubkey:superstruct.string(),lamports:superstruct.number(),postBalance:superstruct.nullable(superstruct.number()),rewardType:superstruct.nullable(superstruct.string()),commission:superstruct.optional(superstruct.nullable(superstruct.number()))});const GetBlockRpcResult=jsonRpcResult(superstruct.nullable(superstruct.type({blockhash:superstruct.string(),previousBlockhash:superstruct.string(),parentSlot:superstruct.number(),transactions:superstruct.array(superstruct.type({transaction:ConfirmedTransactionResult,meta:superstruct.nullable(ConfirmedTransactionMetaResult),version:superstruct.optional(TransactionVersionStruct)})),rewards:superstruct.optional(superstruct.array(RewardsResult)),blockTime:superstruct.nullable(superstruct.number()),blockHeight:superstruct.nullable(superstruct.number())})));const GetNoneModeBlockRpcResult=jsonRpcResult(superstruct.nullable(superstruct.type({blockhash:superstruct.string(),previousBlockhash:superstruct.string(),parentSlot:superstruct.number(),rewards:superstruct.optional(superstruct.array(RewardsResult)),blockTime:superstruct.nullable(superstruct.number()),blockHeight:superstruct.nullable(superstruct.number())})));const GetAccountsModeBlockRpcResult=jsonRpcResult(superstruct.nullable(superstruct.type({blockhash:superstruct.string(),previousBlockhash:superstruct.string(),parentSlot:superstruct.number(),transactions:superstruct.array(superstruct.type({transaction:ConfirmedTransactionAccountsModeResult,meta:superstruct.nullable(ConfirmedTransactionMetaResult),version:superstruct.optional(TransactionVersionStruct)})),rewards:superstruct.optional(superstruct.array(RewardsResult)),blockTime:superstruct.nullable(superstruct.number()),blockHeight:superstruct.nullable(superstruct.number())})));const GetParsedBlockRpcResult=jsonRpcResult(superstruct.nullable(superstruct.type({blockhash:superstruct.string(),previousBlockhash:superstruct.string(),parentSlot:superstruct.number(),transactions:superstruct.array(superstruct.type({transaction:ParsedConfirmedTransactionResult,meta:superstruct.nullable(ParsedConfirmedTransactionMetaResult),version:superstruct.optional(TransactionVersionStruct)})),rewards:superstruct.optional(superstruct.array(RewardsResult)),blockTime:superstruct.nullable(superstruct.number()),blockHeight:superstruct.nullable(superstruct.number())})));const GetParsedAccountsModeBlockRpcResult=jsonRpcResult(superstruct.nullable(superstruct.type({blockhash:superstruct.string(),previousBlockhash:superstruct.string(),parentSlot:superstruct.number(),transactions:superstruct.array(superstruct.type({transaction:ConfirmedTransactionAccountsModeResult,meta:superstruct.nullable(ParsedConfirmedTransactionMetaResult),version:superstruct.optional(TransactionVersionStruct)})),rewards:superstruct.optional(superstruct.array(RewardsResult)),blockTime:superstruct.nullable(superstruct.number()),blockHeight:superstruct.nullable(superstruct.number())})));const GetParsedNoneModeBlockRpcResult=jsonRpcResult(superstruct.nullable(superstruct.type({blockhash:superstruct.string(),previousBlockhash:superstruct.string(),parentSlot:superstruct.number(),rewards:superstruct.optional(superstruct.array(RewardsResult)),blockTime:superstruct.nullable(superstruct.number()),blockHeight:superstruct.nullable(superstruct.number())})));const GetConfirmedBlockRpcResult=jsonRpcResult(superstruct.nullable(superstruct.type({blockhash:superstruct.string(),previousBlockhash:superstruct.string(),parentSlot:superstruct.number(),transactions:superstruct.array(superstruct.type({transaction:ConfirmedTransactionResult,meta:superstruct.nullable(ConfirmedTransactionMetaResult)})),rewards:superstruct.optional(superstruct.array(RewardsResult)),blockTime:superstruct.nullable(superstruct.number())})));const GetBlockSignaturesRpcResult=jsonRpcResult(superstruct.nullable(superstruct.type({blockhash:superstruct.string(),previousBlockhash:superstruct.string(),parentSlot:superstruct.number(),signatures:superstruct.array(superstruct.string()),blockTime:superstruct.nullable(superstruct.number())})));const GetTransactionRpcResult=jsonRpcResult(superstruct.nullable(superstruct.type({slot:superstruct.number(),meta:ConfirmedTransactionMetaResult,blockTime:superstruct.optional(superstruct.nullable(superstruct.number())),transaction:ConfirmedTransactionResult,version:superstruct.optional(TransactionVersionStruct)})));const GetParsedTransactionRpcResult=jsonRpcResult(superstruct.nullable(superstruct.type({slot:superstruct.number(),transaction:ParsedConfirmedTransactionResult,meta:superstruct.nullable(ParsedConfirmedTransactionMetaResult),blockTime:superstruct.optional(superstruct.nullable(superstruct.number())),version:superstruct.optional(TransactionVersionStruct)})));const GetRecentBlockhashAndContextRpcResult=jsonRpcResultAndContext(superstruct.type({blockhash:superstruct.string(),feeCalculator:superstruct.type({lamportsPerSignature:superstruct.number()})}));const GetLatestBlockhashRpcResult=jsonRpcResultAndContext(superstruct.type({blockhash:superstruct.string(),lastValidBlockHeight:superstruct.number()}));const PerfSampleResult=superstruct.type({slot:superstruct.number(),numTransactions:superstruct.number(),numSlots:superstruct.number(),samplePeriodSecs:superstruct.number()});const GetRecentPerformanceSamplesRpcResult=jsonRpcResult(superstruct.array(PerfSampleResult));const GetFeeCalculatorRpcResult=jsonRpcResultAndContext(superstruct.nullable(superstruct.type({feeCalculator:superstruct.type({lamportsPerSignature:superstruct.number()})})));const RequestAirdropRpcResult=jsonRpcResult(superstruct.string());const SendTransactionRpcResult=jsonRpcResult(superstruct.string());const LogsResult=superstruct.type({err:TransactionErrorResult,logs:superstruct.array(superstruct.string()),signature:superstruct.string()});const LogsNotificationResult=superstruct.type({result:notificationResultAndContext(LogsResult),subscription:superstruct.number()});const COMMON_HTTP_HEADERS={"solana-client":`js/${"0.0.0-development"}`};class Connection{constructor(endpoint,_commitmentOrConfig){this._commitment=void 0;this._confirmTransactionInitialTimeout=void 0;this._rpcEndpoint=void 0;this._rpcWsEndpoint=void 0;this._rpcClient=void 0;this._rpcRequest=void 0;this._rpcBatchRequest=void 0;this._rpcWebSocket=void 0;this._rpcWebSocketConnected=false;this._rpcWebSocketHeartbeat=null;this._rpcWebSocketIdleTimeout=null;this._rpcWebSocketGeneration=0;this._disableBlockhashCaching=false;this._pollingBlockhash=false;this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]};this._nextClientSubscriptionId=0;this._subscriptionDisposeFunctionsByClientSubscriptionId={};this._subscriptionHashByClientSubscriptionId={};this._subscriptionStateChangeCallbacksByHash={};this._subscriptionCallbacksByServerSubscriptionId={};this._subscriptionsByHash={};this._subscriptionsAutoDisposedByRpc=new Set;this.getBlockHeight=(()=>{const requestPromises={};return async commitmentOrConfig=>{const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig);const args=this._buildArgs([],commitment,undefined,config);const requestHash=fastStableStringify$1(args);requestPromises[requestHash]=requestPromises[requestHash]??(async()=>{try{const unsafeRes=await this._rpcRequest("getBlockHeight",args);const res=superstruct.create(unsafeRes,jsonRpcResult(superstruct.number()));if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get block height information")}return res.result}finally{delete requestPromises[requestHash]}})();return await requestPromises[requestHash]}})();let wsEndpoint;let httpHeaders;let fetch;let fetchMiddleware;let disableRetryOnRateLimit;let httpAgent;if(_commitmentOrConfig&&typeof _commitmentOrConfig==="string"){this._commitment=_commitmentOrConfig}else if(_commitmentOrConfig){this._commitment=_commitmentOrConfig.commitment;this._confirmTransactionInitialTimeout=_commitmentOrConfig.confirmTransactionInitialTimeout;wsEndpoint=_commitmentOrConfig.wsEndpoint;httpHeaders=_commitmentOrConfig.httpHeaders;fetch=_commitmentOrConfig.fetch;fetchMiddleware=_commitmentOrConfig.fetchMiddleware;disableRetryOnRateLimit=_commitmentOrConfig.disableRetryOnRateLimit;httpAgent=_commitmentOrConfig.httpAgent}this._rpcEndpoint=assertEndpointUrl(endpoint);this._rpcWsEndpoint=wsEndpoint||makeWebsocketUrl(endpoint);this._rpcClient=createRpcClient(endpoint,httpHeaders,fetch,fetchMiddleware,disableRetryOnRateLimit,httpAgent);this._rpcRequest=createRpcRequest(this._rpcClient);this._rpcBatchRequest=createRpcBatchRequest(this._rpcClient);this._rpcWebSocket=new RpcWebSocketClient(this._rpcWsEndpoint,{autoconnect:false,max_reconnects:Infinity});this._rpcWebSocket.on("open",this._wsOnOpen.bind(this));this._rpcWebSocket.on("error",this._wsOnError.bind(this));this._rpcWebSocket.on("close",this._wsOnClose.bind(this));this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this));this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this));this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this));this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this));this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this));this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this));this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(publicKey,commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig);const args=this._buildArgs([publicKey.toBase58()],commitment,undefined,config);const unsafeRes=await this._rpcRequest("getBalance",args);const res=superstruct.create(unsafeRes,jsonRpcResultAndContext(superstruct.number()));if("error"in res){throw new SolanaJSONRPCError(res.error,`failed to get balance for ${publicKey.toBase58()}`)}return res.result}async getBalance(publicKey,commitmentOrConfig){return await this.getBalanceAndContext(publicKey,commitmentOrConfig).then(x=>x.value).catch(e=>{throw new Error("failed to get balance of account "+publicKey.toBase58()+": "+e)})}async getBlockTime(slot){const unsafeRes=await this._rpcRequest("getBlockTime",[slot]);const res=superstruct.create(unsafeRes,jsonRpcResult(superstruct.nullable(superstruct.number())));if("error"in res){throw new SolanaJSONRPCError(res.error,`failed to get block time for slot ${slot}`)}return res.result}async getMinimumLedgerSlot(){const unsafeRes=await this._rpcRequest("minimumLedgerSlot",[]);const res=superstruct.create(unsafeRes,jsonRpcResult(superstruct.number()));if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get minimum ledger slot")}return res.result}async getFirstAvailableBlock(){const unsafeRes=await this._rpcRequest("getFirstAvailableBlock",[]);const res=superstruct.create(unsafeRes,SlotRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get first available block")}return res.result}async getSupply(config){let configArg={};if(typeof config==="string"){configArg={commitment:config}}else if(config){configArg={...config,commitment:config&&config.commitment||this.commitment}}else{configArg={commitment:this.commitment}}const unsafeRes=await this._rpcRequest("getSupply",[configArg]);const res=superstruct.create(unsafeRes,GetSupplyRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get supply")}return res.result}async getTokenSupply(tokenMintAddress,commitment){const args=this._buildArgs([tokenMintAddress.toBase58()],commitment);const unsafeRes=await this._rpcRequest("getTokenSupply",args);const res=superstruct.create(unsafeRes,jsonRpcResultAndContext(TokenAmountResult));if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get token supply")}return res.result}async getTokenAccountBalance(tokenAddress,commitment){const args=this._buildArgs([tokenAddress.toBase58()],commitment);const unsafeRes=await this._rpcRequest("getTokenAccountBalance",args);const res=superstruct.create(unsafeRes,jsonRpcResultAndContext(TokenAmountResult));if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get token account balance")}return res.result}async getTokenAccountsByOwner(ownerAddress,filter,commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig);let _args=[ownerAddress.toBase58()];if("mint"in filter){_args.push({mint:filter.mint.toBase58()})}else{_args.push({programId:filter.programId.toBase58()})}const args=this._buildArgs(_args,commitment,"base64",config);const unsafeRes=await this._rpcRequest("getTokenAccountsByOwner",args);const res=superstruct.create(unsafeRes,GetTokenAccountsByOwner);if("error"in res){throw new SolanaJSONRPCError(res.error,`failed to get token accounts owned by account ${ownerAddress.toBase58()}`)}return res.result}async getParsedTokenAccountsByOwner(ownerAddress,filter,commitment){let _args=[ownerAddress.toBase58()];if("mint"in filter){_args.push({mint:filter.mint.toBase58()})}else{_args.push({programId:filter.programId.toBase58()})}const args=this._buildArgs(_args,commitment,"jsonParsed");const unsafeRes=await this._rpcRequest("getTokenAccountsByOwner",args);const res=superstruct.create(unsafeRes,GetParsedTokenAccountsByOwner);if("error"in res){throw new SolanaJSONRPCError(res.error,`failed to get token accounts owned by account ${ownerAddress.toBase58()}`)}return res.result}async getLargestAccounts(config){const arg={...config,commitment:config&&config.commitment||this.commitment};const args=arg.filter||arg.commitment?[arg]:[];const unsafeRes=await this._rpcRequest("getLargestAccounts",args);const res=superstruct.create(unsafeRes,GetLargestAccountsRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get largest accounts")}return res.result}async getTokenLargestAccounts(mintAddress,commitment){const args=this._buildArgs([mintAddress.toBase58()],commitment);const unsafeRes=await this._rpcRequest("getTokenLargestAccounts",args);const res=superstruct.create(unsafeRes,GetTokenLargestAccountsResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get token largest accounts")}return res.result}async getAccountInfoAndContext(publicKey,commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig);const args=this._buildArgs([publicKey.toBase58()],commitment,"base64",config);const unsafeRes=await this._rpcRequest("getAccountInfo",args);const res=superstruct.create(unsafeRes,jsonRpcResultAndContext(superstruct.nullable(AccountInfoResult)));if("error"in res){throw new SolanaJSONRPCError(res.error,`failed to get info about account ${publicKey.toBase58()}`)}return res.result}async getParsedAccountInfo(publicKey,commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig);const args=this._buildArgs([publicKey.toBase58()],commitment,"jsonParsed",config);const unsafeRes=await this._rpcRequest("getAccountInfo",args);const res=superstruct.create(unsafeRes,jsonRpcResultAndContext(superstruct.nullable(ParsedAccountInfoResult)));if("error"in res){throw new SolanaJSONRPCError(res.error,`failed to get info about account ${publicKey.toBase58()}`)}return res.result}async getAccountInfo(publicKey,commitmentOrConfig){try{const res=await this.getAccountInfoAndContext(publicKey,commitmentOrConfig);return res.value}catch(e){throw new Error("failed to get info about account "+publicKey.toBase58()+": "+e)}}async getMultipleParsedAccounts(publicKeys,rawConfig){const{commitment,config}=extractCommitmentFromConfig(rawConfig);const keys=publicKeys.map(key=>key.toBase58());const args=this._buildArgs([keys],commitment,"jsonParsed",config);const unsafeRes=await this._rpcRequest("getMultipleAccounts",args);const res=superstruct.create(unsafeRes,jsonRpcResultAndContext(superstruct.array(superstruct.nullable(ParsedAccountInfoResult))));if("error"in res){throw new SolanaJSONRPCError(res.error,`failed to get info for accounts ${keys}`)}return res.result}async getMultipleAccountsInfoAndContext(publicKeys,commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig);const keys=publicKeys.map(key=>key.toBase58());const args=this._buildArgs([keys],commitment,"base64",config);const unsafeRes=await this._rpcRequest("getMultipleAccounts",args);const res=superstruct.create(unsafeRes,jsonRpcResultAndContext(superstruct.array(superstruct.nullable(AccountInfoResult))));if("error"in res){throw new SolanaJSONRPCError(res.error,`failed to get info for accounts ${keys}`)}return res.result}async getMultipleAccountsInfo(publicKeys,commitmentOrConfig){const res=await this.getMultipleAccountsInfoAndContext(publicKeys,commitmentOrConfig);return res.value}async getStakeActivation(publicKey,commitmentOrConfig,epoch){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig);const args=this._buildArgs([publicKey.toBase58()],commitment,undefined,{...config,epoch:epoch!=null?epoch:config?.epoch});const unsafeRes=await this._rpcRequest("getStakeActivation",args);const res=superstruct.create(unsafeRes,jsonRpcResult(StakeActivationResult));if("error"in res){throw new SolanaJSONRPCError(res.error,`failed to get Stake Activation ${publicKey.toBase58()}`)}return res.result}async getProgramAccounts(programId,configOrCommitment){const{commitment,config}=extractCommitmentFromConfig(configOrCommitment);const{encoding,...configWithoutEncoding}=config||{};const args=this._buildArgs([programId.toBase58()],commitment,encoding||"base64",configWithoutEncoding);const unsafeRes=await this._rpcRequest("getProgramAccounts",args);const res=superstruct.create(unsafeRes,jsonRpcResult(superstruct.array(KeyedAccountInfoResult)));if("error"in res){throw new SolanaJSONRPCError(res.error,`failed to get accounts owned by program ${programId.toBase58()}`)}return res.result}async getParsedProgramAccounts(programId,configOrCommitment){const{commitment,config}=extractCommitmentFromConfig(configOrCommitment);const args=this._buildArgs([programId.toBase58()],commitment,"jsonParsed",config);const unsafeRes=await this._rpcRequest("getProgramAccounts",args);const res=superstruct.create(unsafeRes,jsonRpcResult(superstruct.array(KeyedParsedAccountInfoResult)));if("error"in res){throw new SolanaJSONRPCError(res.error,`failed to get accounts owned by program ${programId.toBase58()}`)}return res.result}async confirmTransaction(strategy,commitment){let rawSignature;if(typeof strategy=="string"){rawSignature=strategy}else{const config=strategy;if(config.abortSignal?.aborted){return Promise.reject(config.abortSignal.reason)}rawSignature=config.signature}let decodedSignature;try{decodedSignature=bs58__default["default"].decode(rawSignature)}catch(err){throw new Error("signature must be base58 encoded: "+rawSignature)}assert(decodedSignature.length===64,"signature has invalid length");if(typeof strategy==="string"){return await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:commitment||this.commitment,signature:rawSignature})}else if("lastValidBlockHeight"in strategy){return await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:commitment||this.commitment,strategy:strategy})}else{return await this.confirmTransactionUsingDurableNonceStrategy({commitment:commitment||this.commitment,strategy:strategy})}}getCancellationPromise(signal){return new Promise((_,reject)=>{if(signal==null){return}if(signal.aborted){reject(signal.reason)}else{signal.addEventListener("abort",()=>{reject(signal.reason)})}})}getTransactionConfirmationPromise({commitment,signature}){let signatureSubscriptionId;let disposeSignatureSubscriptionStateChangeObserver;let done=false;const confirmationPromise=new Promise((resolve,reject)=>{try{signatureSubscriptionId=this.onSignature(signature,(result,context)=>{signatureSubscriptionId=undefined;const response={context:context,value:result};resolve({__type:exports.TransactionStatus.PROCESSED,response:response})},commitment);const subscriptionSetupPromise=new Promise(resolveSubscriptionSetup=>{if(signatureSubscriptionId==null){resolveSubscriptionSetup()}else{disposeSignatureSubscriptionStateChangeObserver=this._onSubscriptionStateChange(signatureSubscriptionId,nextState=>{if(nextState==="subscribed"){resolveSubscriptionSetup()}})}});(async()=>{await subscriptionSetupPromise;if(done)return;const response=await this.getSignatureStatus(signature);if(done)return;if(response==null){return}const{context,value}=response;if(value==null){return}if(value?.err){reject(value.err)}else{switch(commitment){case"confirmed":case"single":case"singleGossip":{if(value.confirmationStatus==="processed"){return}break}case"finalized":case"max":case"root":{if(value.confirmationStatus==="processed"||value.confirmationStatus==="confirmed"){return}break}case"processed":case"recent":}done=true;resolve({__type:exports.TransactionStatus.PROCESSED,response:{context:context,value:value}})}})()}catch(err){reject(err)}});const abortConfirmation=()=>{if(disposeSignatureSubscriptionStateChangeObserver){disposeSignatureSubscriptionStateChangeObserver();disposeSignatureSubscriptionStateChangeObserver=undefined}if(signatureSubscriptionId!=null){this.removeSignatureListener(signatureSubscriptionId);signatureSubscriptionId=undefined}};return{abortConfirmation:abortConfirmation,confirmationPromise:confirmationPromise}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment,strategy:{abortSignal,lastValidBlockHeight,signature}}){let done=false;const expiryPromise=new Promise(resolve=>{const checkBlockHeight=async()=>{try{const blockHeight=await this.getBlockHeight(commitment);return blockHeight}catch(_e){return-1}};(async()=>{let currentBlockHeight=await checkBlockHeight();if(done)return;while(currentBlockHeight<=lastValidBlockHeight){await sleep(1e3);if(done)return;currentBlockHeight=await checkBlockHeight();if(done)return}resolve({__type:exports.TransactionStatus.BLOCKHEIGHT_EXCEEDED})})()});const{abortConfirmation,confirmationPromise}=this.getTransactionConfirmationPromise({commitment:commitment,signature:signature});const cancellationPromise=this.getCancellationPromise(abortSignal);let result;try{const outcome=await Promise.race([cancellationPromise,confirmationPromise,expiryPromise]);if(outcome.__type===exports.TransactionStatus.PROCESSED){result=outcome.response}else{throw new TransactionExpiredBlockheightExceededError(signature)}}finally{done=true;abortConfirmation()}return result}async confirmTransactionUsingDurableNonceStrategy({commitment,strategy:{abortSignal,minContextSlot,nonceAccountPubkey,nonceValue,signature}}){let done=false;const expiryPromise=new Promise(resolve=>{let currentNonceValue=nonceValue;let lastCheckedSlot=null;const getCurrentNonceValue=async()=>{try{const{context,value:nonceAccount}=await this.getNonceAndContext(nonceAccountPubkey,{commitment:commitment,minContextSlot:minContextSlot});lastCheckedSlot=context.slot;return nonceAccount?.nonce}catch(e){return currentNonceValue}};(async()=>{currentNonceValue=await getCurrentNonceValue();if(done)return;while(true){if(nonceValue!==currentNonceValue){resolve({__type:exports.TransactionStatus.NONCE_INVALID,slotInWhichNonceDidAdvance:lastCheckedSlot});return}await sleep(2e3);if(done)return;currentNonceValue=await getCurrentNonceValue();if(done)return}})()});const{abortConfirmation,confirmationPromise}=this.getTransactionConfirmationPromise({commitment:commitment,signature:signature});const cancellationPromise=this.getCancellationPromise(abortSignal);let result;try{const outcome=await Promise.race([cancellationPromise,confirmationPromise,expiryPromise]);if(outcome.__type===exports.TransactionStatus.PROCESSED){result=outcome.response}else{let signatureStatus;while(true){const status=await this.getSignatureStatus(signature);if(status==null){break}if(status.context.slot<(outcome.slotInWhichNonceDidAdvance??minContextSlot)){await sleep(400);continue}signatureStatus=status;break}if(signatureStatus?.value){const commitmentForStatus=commitment||"finalized";const{confirmationStatus}=signatureStatus.value;switch(commitmentForStatus){case"processed":case"recent":if(confirmationStatus!=="processed"&&confirmationStatus!=="confirmed"&&confirmationStatus!=="finalized"){throw new TransactionExpiredNonceInvalidError(signature)}break;case"confirmed":case"single":case"singleGossip":if(confirmationStatus!=="confirmed"&&confirmationStatus!=="finalized"){throw new TransactionExpiredNonceInvalidError(signature)}break;case"finalized":case"max":case"root":if(confirmationStatus!=="finalized"){throw new TransactionExpiredNonceInvalidError(signature)}break;default:(_=>{})(commitmentForStatus)}result={context:signatureStatus.context,value:{err:signatureStatus.value.err}}}else{throw new TransactionExpiredNonceInvalidError(signature)}}}finally{done=true;abortConfirmation()}return result}async confirmTransactionUsingLegacyTimeoutStrategy({commitment,signature}){let timeoutId;const expiryPromise=new Promise(resolve=>{let timeoutMs=this._confirmTransactionInitialTimeout||60*1e3;switch(commitment){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{timeoutMs=this._confirmTransactionInitialTimeout||30*1e3;break}}timeoutId=setTimeout(()=>resolve({__type:exports.TransactionStatus.TIMED_OUT,timeoutMs:timeoutMs}),timeoutMs)});const{abortConfirmation,confirmationPromise}=this.getTransactionConfirmationPromise({commitment:commitment,signature:signature});let result;try{const outcome=await Promise.race([confirmationPromise,expiryPromise]);if(outcome.__type===exports.TransactionStatus.PROCESSED){result=outcome.response}else{throw new TransactionExpiredTimeoutError(signature,outcome.timeoutMs/1e3)}}finally{clearTimeout(timeoutId);abortConfirmation()}return result}async getClusterNodes(){const unsafeRes=await this._rpcRequest("getClusterNodes",[]);const res=superstruct.create(unsafeRes,jsonRpcResult(superstruct.array(ContactInfoResult)));if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get cluster nodes")}return res.result}async getVoteAccounts(commitment){const args=this._buildArgs([],commitment);const unsafeRes=await this._rpcRequest("getVoteAccounts",args);const res=superstruct.create(unsafeRes,GetVoteAccounts);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get vote accounts")}return res.result}async getSlot(commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig);const args=this._buildArgs([],commitment,undefined,config);const unsafeRes=await this._rpcRequest("getSlot",args);const res=superstruct.create(unsafeRes,jsonRpcResult(superstruct.number()));if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get slot")}return res.result}async getSlotLeader(commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig);const args=this._buildArgs([],commitment,undefined,config);const unsafeRes=await this._rpcRequest("getSlotLeader",args);const res=superstruct.create(unsafeRes,jsonRpcResult(superstruct.string()));if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get slot leader")}return res.result}async getSlotLeaders(startSlot,limit){const args=[startSlot,limit];const unsafeRes=await this._rpcRequest("getSlotLeaders",args);const res=superstruct.create(unsafeRes,jsonRpcResult(superstruct.array(PublicKeyFromString)));if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get slot leaders")}return res.result}async getSignatureStatus(signature,config){const{context,value:values}=await this.getSignatureStatuses([signature],config);assert(values.length===1);const value=values[0];return{context:context,value:value}}async getSignatureStatuses(signatures,config){const params=[signatures];if(config){params.push(config)}const unsafeRes=await this._rpcRequest("getSignatureStatuses",params);const res=superstruct.create(unsafeRes,GetSignatureStatusesRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get signature status")}return res.result}async getTransactionCount(commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig);const args=this._buildArgs([],commitment,undefined,config);const unsafeRes=await this._rpcRequest("getTransactionCount",args);const res=superstruct.create(unsafeRes,jsonRpcResult(superstruct.number()));if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get transaction count")}return res.result}async getTotalSupply(commitment){const result=await this.getSupply({commitment:commitment,excludeNonCirculatingAccountsList:true});return result.value.total}async getInflationGovernor(commitment){const args=this._buildArgs([],commitment);const unsafeRes=await this._rpcRequest("getInflationGovernor",args);const res=superstruct.create(unsafeRes,GetInflationGovernorRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get inflation")}return res.result}async getInflationReward(addresses,epoch,commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig);const args=this._buildArgs([addresses.map(pubkey=>pubkey.toBase58())],commitment,undefined,{...config,epoch:epoch!=null?epoch:config?.epoch});const unsafeRes=await this._rpcRequest("getInflationReward",args);const res=superstruct.create(unsafeRes,GetInflationRewardResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get inflation reward")}return res.result}async getInflationRate(){const unsafeRes=await this._rpcRequest("getInflationRate",[]);const res=superstruct.create(unsafeRes,GetInflationRateRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get inflation rate")}return res.result}async getEpochInfo(commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig);const args=this._buildArgs([],commitment,undefined,config);const unsafeRes=await this._rpcRequest("getEpochInfo",args);const res=superstruct.create(unsafeRes,GetEpochInfoRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get epoch info")}return res.result}async getEpochSchedule(){const unsafeRes=await this._rpcRequest("getEpochSchedule",[]);const res=superstruct.create(unsafeRes,GetEpochScheduleRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get epoch schedule")}const epochSchedule=res.result;return new EpochSchedule(epochSchedule.slotsPerEpoch,epochSchedule.leaderScheduleSlotOffset,epochSchedule.warmup,epochSchedule.firstNormalEpoch,epochSchedule.firstNormalSlot)}async getLeaderSchedule(){const unsafeRes=await this._rpcRequest("getLeaderSchedule",[]);const res=superstruct.create(unsafeRes,GetLeaderScheduleRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get leader schedule")}return res.result}async getMinimumBalanceForRentExemption(dataLength,commitment){const args=this._buildArgs([dataLength],commitment);const unsafeRes=await this._rpcRequest("getMinimumBalanceForRentExemption",args);const res=superstruct.create(unsafeRes,GetMinimumBalanceForRentExemptionRpcResult);if("error"in res){console.warn("Unable to fetch minimum balance for rent exemption");return 0}return res.result}async getRecentBlockhashAndContext(commitment){const args=this._buildArgs([],commitment);const unsafeRes=await this._rpcRequest("getRecentBlockhash",args);const res=superstruct.create(unsafeRes,GetRecentBlockhashAndContextRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get recent blockhash")}return res.result}async getRecentPerformanceSamples(limit){const unsafeRes=await this._rpcRequest("getRecentPerformanceSamples",limit?[limit]:[]);const res=superstruct.create(unsafeRes,GetRecentPerformanceSamplesRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get recent performance samples")}return res.result}async getFeeCalculatorForBlockhash(blockhash,commitment){const args=this._buildArgs([blockhash],commitment);const unsafeRes=await this._rpcRequest("getFeeCalculatorForBlockhash",args);const res=superstruct.create(unsafeRes,GetFeeCalculatorRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get fee calculator")}const{context,value}=res.result;return{context:context,value:value!==null?value.feeCalculator:null}}async getFeeForMessage(message,commitment){const wireMessage=toBuffer(message.serialize()).toString("base64");const args=this._buildArgs([wireMessage],commitment);const unsafeRes=await this._rpcRequest("getFeeForMessage",args);const res=superstruct.create(unsafeRes,jsonRpcResultAndContext(superstruct.nullable(superstruct.number())));if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get fee for message")}if(res.result===null){throw new Error("invalid blockhash")}return res.result}async getRecentBlockhash(commitment){try{const res=await this.getRecentBlockhashAndContext(commitment);return res.value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(commitmentOrConfig){try{const res=await this.getLatestBlockhashAndContext(commitmentOrConfig);return res.value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig);const args=this._buildArgs([],commitment,undefined,config);const unsafeRes=await this._rpcRequest("getLatestBlockhash",args);const res=superstruct.create(unsafeRes,GetLatestBlockhashRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get latest blockhash")}return res.result}async getVersion(){const unsafeRes=await this._rpcRequest("getVersion",[]);const res=superstruct.create(unsafeRes,jsonRpcResult(VersionResult));if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get version")}return res.result}async getGenesisHash(){const unsafeRes=await this._rpcRequest("getGenesisHash",[]);const res=superstruct.create(unsafeRes,jsonRpcResult(superstruct.string()));if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get genesis hash")}return res.result}async getBlock(slot,rawConfig){const{commitment,config}=extractCommitmentFromConfig(rawConfig);const args=this._buildArgsAtLeastConfirmed([slot],commitment,undefined,config);const unsafeRes=await this._rpcRequest("getBlock",args);try{switch(config?.transactionDetails){case"accounts":{const res=superstruct.create(unsafeRes,GetAccountsModeBlockRpcResult);if("error"in res){throw res.error}return res.result}case"none":{const res=superstruct.create(unsafeRes,GetNoneModeBlockRpcResult);if("error"in res){throw res.error}return res.result}default:{const res=superstruct.create(unsafeRes,GetBlockRpcResult);if("error"in res){throw res.error}const{result}=res;return result?{...result,transactions:result.transactions.map(({transaction,meta,version})=>({meta:meta,transaction:{...transaction,message:versionedMessageFromResponse(version,transaction.message)},version:version}))}:null}}}catch(e){throw new SolanaJSONRPCError(e,"failed to get confirmed block")}}async getParsedBlock(slot,rawConfig){const{commitment,config}=extractCommitmentFromConfig(rawConfig);const args=this._buildArgsAtLeastConfirmed([slot],commitment,"jsonParsed",config);const unsafeRes=await this._rpcRequest("getBlock",args);try{switch(config?.transactionDetails){case"accounts":{const res=superstruct.create(unsafeRes,GetParsedAccountsModeBlockRpcResult);if("error"in res){throw res.error}return res.result}case"none":{const res=superstruct.create(unsafeRes,GetParsedNoneModeBlockRpcResult);if("error"in res){throw res.error}return res.result}default:{const res=superstruct.create(unsafeRes,GetParsedBlockRpcResult);if("error"in res){throw res.error}return res.result}}}catch(e){throw new SolanaJSONRPCError(e,"failed to get block")}}async getBlockProduction(configOrCommitment){let extra;let commitment;if(typeof configOrCommitment==="string"){commitment=configOrCommitment}else if(configOrCommitment){const{commitment:c,...rest}=configOrCommitment;commitment=c;extra=rest}const args=this._buildArgs([],commitment,"base64",extra);const unsafeRes=await this._rpcRequest("getBlockProduction",args);const res=superstruct.create(unsafeRes,BlockProductionResponseStruct);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get block production information")}return res.result}async getTransaction(signature,rawConfig){const{commitment,config}=extractCommitmentFromConfig(rawConfig);const args=this._buildArgsAtLeastConfirmed([signature],commitment,undefined,config);const unsafeRes=await this._rpcRequest("getTransaction",args);const res=superstruct.create(unsafeRes,GetTransactionRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get transaction")}const result=res.result;if(!result)return result;return{...result,transaction:{...result.transaction,message:versionedMessageFromResponse(result.version,result.transaction.message)}}}async getParsedTransaction(signature,commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig);const args=this._buildArgsAtLeastConfirmed([signature],commitment,"jsonParsed",config);const unsafeRes=await this._rpcRequest("getTransaction",args);const res=superstruct.create(unsafeRes,GetParsedTransactionRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get transaction")}return res.result}async getParsedTransactions(signatures,commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig);const batch=signatures.map(signature=>{const args=this._buildArgsAtLeastConfirmed([signature],commitment,"jsonParsed",config);return{methodName:"getTransaction",args:args}});const unsafeRes=await this._rpcBatchRequest(batch);const res=unsafeRes.map(unsafeRes=>{const res=superstruct.create(unsafeRes,GetParsedTransactionRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get transactions")}return res.result});return res}async getTransactions(signatures,commitmentOrConfig){const{commitment,config}=extractCommitmentFromConfig(commitmentOrConfig);const batch=signatures.map(signature=>{const args=this._buildArgsAtLeastConfirmed([signature],commitment,undefined,config);return{methodName:"getTransaction",args:args}});const unsafeRes=await this._rpcBatchRequest(batch);const res=unsafeRes.map(unsafeRes=>{const res=superstruct.create(unsafeRes,GetTransactionRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get transactions")}const result=res.result;if(!result)return result;return{...result,transaction:{...result.transaction,message:versionedMessageFromResponse(result.version,result.transaction.message)}}});return res}async getConfirmedBlock(slot,commitment){const args=this._buildArgsAtLeastConfirmed([slot],commitment);const unsafeRes=await this._rpcRequest("getConfirmedBlock",args);const res=superstruct.create(unsafeRes,GetConfirmedBlockRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get confirmed block")}const result=res.result;if(!result){throw new Error("Confirmed block "+slot+" not found")}const block={...result,transactions:result.transactions.map(({transaction,meta})=>{const message=new Message(transaction.message);return{meta:meta,transaction:{...transaction,message:message}}})};return{...block,transactions:block.transactions.map(({transaction,meta})=>{return{meta:meta,transaction:Transaction.populate(transaction.message,transaction.signatures)}})}}async getBlocks(startSlot,endSlot,commitment){const args=this._buildArgsAtLeastConfirmed(endSlot!==undefined?[startSlot,endSlot]:[startSlot],commitment);const unsafeRes=await this._rpcRequest("getBlocks",args);const res=superstruct.create(unsafeRes,jsonRpcResult(superstruct.array(superstruct.number())));if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get blocks")}return res.result}async getBlockSignatures(slot,commitment){const args=this._buildArgsAtLeastConfirmed([slot],commitment,undefined,{transactionDetails:"signatures",rewards:false});const unsafeRes=await this._rpcRequest("getBlock",args);const res=superstruct.create(unsafeRes,GetBlockSignaturesRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get block")}const result=res.result;if(!result){throw new Error("Block "+slot+" not found")}return result}async getConfirmedBlockSignatures(slot,commitment){const args=this._buildArgsAtLeastConfirmed([slot],commitment,undefined,{transactionDetails:"signatures",rewards:false});const unsafeRes=await this._rpcRequest("getConfirmedBlock",args);const res=superstruct.create(unsafeRes,GetBlockSignaturesRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get confirmed block")}const result=res.result;if(!result){throw new Error("Confirmed block "+slot+" not found")}return result}async getConfirmedTransaction(signature,commitment){const args=this._buildArgsAtLeastConfirmed([signature],commitment);const unsafeRes=await this._rpcRequest("getConfirmedTransaction",args);const res=superstruct.create(unsafeRes,GetTransactionRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get transaction")}const result=res.result;if(!result)return result;const message=new Message(result.transaction.message);const signatures=result.transaction.signatures;return{...result,transaction:Transaction.populate(message,signatures)}}async getParsedConfirmedTransaction(signature,commitment){const args=this._buildArgsAtLeastConfirmed([signature],commitment,"jsonParsed");const unsafeRes=await this._rpcRequest("getConfirmedTransaction",args);const res=superstruct.create(unsafeRes,GetParsedTransactionRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get confirmed transaction")}return res.result}async getParsedConfirmedTransactions(signatures,commitment){const batch=signatures.map(signature=>{const args=this._buildArgsAtLeastConfirmed([signature],commitment,"jsonParsed");return{methodName:"getConfirmedTransaction",args:args}});const unsafeRes=await this._rpcBatchRequest(batch);const res=unsafeRes.map(unsafeRes=>{const res=superstruct.create(unsafeRes,GetParsedTransactionRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get confirmed transactions")}return res.result});return res}async getConfirmedSignaturesForAddress(address,startSlot,endSlot){let options={};let firstAvailableBlock=await this.getFirstAvailableBlock();while(!("until"in options)){startSlot--;if(startSlot<=0||startSlot<firstAvailableBlock){break}try{const block=await this.getConfirmedBlockSignatures(startSlot,"finalized");if(block.signatures.length>0){options.until=block.signatures[block.signatures.length-1].toString()}}catch(err){if(err instanceof Error&&err.message.includes("skipped")){continue}else{throw err}}}let highestConfirmedRoot=await this.getSlot("finalized");while(!("before"in options)){endSlot++;if(endSlot>highestConfirmedRoot){break}try{const block=await this.getConfirmedBlockSignatures(endSlot);if(block.signatures.length>0){options.before=block.signatures[block.signatures.length-1].toString()}}catch(err){if(err instanceof Error&&err.message.includes("skipped")){continue}else{throw err}}}const confirmedSignatureInfo=await this.getConfirmedSignaturesForAddress2(address,options);return confirmedSignatureInfo.map(info=>info.signature)}async getConfirmedSignaturesForAddress2(address,options,commitment){const args=this._buildArgsAtLeastConfirmed([address.toBase58()],commitment,undefined,options);const unsafeRes=await this._rpcRequest("getConfirmedSignaturesForAddress2",args);const res=superstruct.create(unsafeRes,GetConfirmedSignaturesForAddress2RpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get confirmed signatures for address")}return res.result}async getSignaturesForAddress(address,options,commitment){const args=this._buildArgsAtLeastConfirmed([address.toBase58()],commitment,undefined,options);const unsafeRes=await this._rpcRequest("getSignaturesForAddress",args);const res=superstruct.create(unsafeRes,GetSignaturesForAddressRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,"failed to get signatures for address")}return res.result}async getAddressLookupTable(accountKey,config){const{context,value:accountInfo}=await this.getAccountInfoAndContext(accountKey,config);let value=null;if(accountInfo!==null){value=new AddressLookupTableAccount({key:accountKey,state:AddressLookupTableAccount.deserialize(accountInfo.data)})}return{context:context,value:value}}async getNonceAndContext(nonceAccount,commitmentOrConfig){const{context,value:accountInfo}=await this.getAccountInfoAndContext(nonceAccount,commitmentOrConfig);let value=null;if(accountInfo!==null){value=NonceAccount.fromAccountData(accountInfo.data)}return{context:context,value:value}}async getNonce(nonceAccount,commitmentOrConfig){return await this.getNonceAndContext(nonceAccount,commitmentOrConfig).then(x=>x.value).catch(e=>{throw new Error("failed to get nonce for account "+nonceAccount.toBase58()+": "+e)})}async requestAirdrop(to,lamports){const unsafeRes=await this._rpcRequest("requestAirdrop",[to.toBase58(),lamports]);const res=superstruct.create(unsafeRes,RequestAirdropRpcResult);if("error"in res){throw new SolanaJSONRPCError(res.error,`airdrop to ${to.toBase58()} failed`)}return res.result}async _blockhashWithExpiryBlockHeight(disableCache){if(!disableCache){while(this._pollingBlockhash){await sleep(100)}const timeSinceFetch=Date.now()-this._blockhashInfo.lastFetch;const expired=timeSinceFetch>=BLOCKHASH_CACHE_TIMEOUT_MS;if(this._blockhashInfo.latestBlockhash!==null&&!expired){return this._blockhashInfo.latestBlockhash}}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=true;try{const startTime=Date.now();const cachedLatestBlockhash=this._blockhashInfo.latestBlockhash;const cachedBlockhash=cachedLatestBlockhash?cachedLatestBlockhash.blockhash:null;for(let i=0;i<50;i++){const latestBlockhash=await this.getLatestBlockhash("finalized");if(cachedBlockhash!==latestBlockhash.blockhash){this._blockhashInfo={latestBlockhash:latestBlockhash,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]};return latestBlockhash}await sleep(MS_PER_SLOT/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-startTime}ms`)}finally{this._pollingBlockhash=false}}async getStakeMinimumDelegation(config){const{commitment,config:configArg}=extractCommitmentFromConfig(config);const args=this._buildArgs([],commitment,"base64",configArg);const unsafeRes=await this._rpcRequest("getStakeMinimumDelegation",args);const res=superstruct.create(unsafeRes,jsonRpcResultAndContext(superstruct.number()));if("error"in res){throw new SolanaJSONRPCError(res.error,`failed to get stake minimum delegation`)}return res.result}async simulateTransaction(transactionOrMessage,configOrSigners,includeAccounts){if("message"in transactionOrMessage){const versionedTx=transactionOrMessage;const wireTransaction=versionedTx.serialize();const encodedTransaction=buffer.Buffer.from(wireTransaction).toString("base64");if(Array.isArray(configOrSigners)||includeAccounts!==undefined){throw new Error("Invalid arguments")}const config=configOrSigners||{};config.encoding="base64";if(!("commitment"in config)){config.commitment=this.commitment}const args=[encodedTransaction,config];const unsafeRes=await this._rpcRequest("simulateTransaction",args);const res=superstruct.create(unsafeRes,SimulatedTransactionResponseStruct);if("error"in res){throw new Error("failed to simulate transaction: "+res.error.message)}return res.result}let transaction;if(transactionOrMessage instanceof Transaction){let originalTx=transactionOrMessage;transaction=new Transaction;transaction.feePayer=originalTx.feePayer;transaction.instructions=transactionOrMessage.instructions;transaction.nonceInfo=originalTx.nonceInfo;transaction.signatures=originalTx.signatures}else{transaction=Transaction.populate(transactionOrMessage);transaction._message=transaction._json=undefined}if(configOrSigners!==undefined&&!Array.isArray(configOrSigners)){throw new Error("Invalid arguments")}const signers=configOrSigners;if(transaction.nonceInfo&&signers){transaction.sign(...signers)}else{let disableCache=this._disableBlockhashCaching;for(;;){const latestBlockhash=await this._blockhashWithExpiryBlockHeight(disableCache);transaction.lastValidBlockHeight=latestBlockhash.lastValidBlockHeight;transaction.recentBlockhash=latestBlockhash.blockhash;if(!signers)break;transaction.sign(...signers);if(!transaction.signature){throw new Error("!signature")}const signature=transaction.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(signature)&&!this._blockhashInfo.transactionSignatures.includes(signature)){this._blockhashInfo.simulatedSignatures.push(signature);break}else{disableCache=true}}}const message=transaction._compile();const signData=message.serialize();const wireTransaction=transaction._serialize(signData);const encodedTransaction=wireTransaction.toString("base64");const config={encoding:"base64",commitment:this.commitment};if(includeAccounts){const addresses=(Array.isArray(includeAccounts)?includeAccounts:message.nonProgramIds()).map(key=>key.toBase58());config["accounts"]={encoding:"base64",addresses:addresses}}if(signers){config.sigVerify=true}const args=[encodedTransaction,config];const unsafeRes=await this._rpcRequest("simulateTransaction",args);const res=superstruct.create(unsafeRes,SimulatedTransactionResponseStruct);if("error"in res){let logs;if("data"in res.error){logs=res.error.data.logs;if(logs&&Array.isArray(logs)){const traceIndent="\n    ";const logTrace=traceIndent+logs.join(traceIndent);console.error(res.error.message,logTrace)}}throw new SendTransactionError("failed to simulate transaction: "+res.error.message,logs)}return res.result}async sendTransaction(transaction,signersOrOptions,options){if("version"in transaction){if(signersOrOptions&&Array.isArray(signersOrOptions)){throw new Error("Invalid arguments")}const wireTransaction=transaction.serialize();return await this.sendRawTransaction(wireTransaction,signersOrOptions)}if(signersOrOptions===undefined||!Array.isArray(signersOrOptions)){throw new Error("Invalid arguments")}const signers=signersOrOptions;if(transaction.nonceInfo){transaction.sign(...signers)}else{let disableCache=this._disableBlockhashCaching;for(;;){const latestBlockhash=await this._blockhashWithExpiryBlockHeight(disableCache);transaction.lastValidBlockHeight=latestBlockhash.lastValidBlockHeight;transaction.recentBlockhash=latestBlockhash.blockhash;transaction.sign(...signers);if(!transaction.signature){throw new Error("!signature")}const signature=transaction.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(signature)){this._blockhashInfo.transactionSignatures.push(signature);break}else{disableCache=true}}}const wireTransaction=transaction.serialize();return await this.sendRawTransaction(wireTransaction,options)}async sendRawTransaction(rawTransaction,options){const encodedTransaction=toBuffer(rawTransaction).toString("base64");const result=await this.sendEncodedTransaction(encodedTransaction,options);return result}async sendEncodedTransaction(encodedTransaction,options){const config={encoding:"base64"};const skipPreflight=options&&options.skipPreflight;const preflightCommitment=options&&options.preflightCommitment||this.commitment;if(options&&options.maxRetries!=null){config.maxRetries=options.maxRetries}if(options&&options.minContextSlot!=null){config.minContextSlot=options.minContextSlot}if(skipPreflight){config.skipPreflight=skipPreflight}if(preflightCommitment){config.preflightCommitment=preflightCommitment}const args=[encodedTransaction,config];const unsafeRes=await this._rpcRequest("sendTransaction",args);const res=superstruct.create(unsafeRes,SendTransactionRpcResult);if("error"in res){let logs;if("data"in res.error){logs=res.error.data.logs}throw new SendTransactionError("failed to send transaction: "+res.error.message,logs)}return res.result}_wsOnOpen(){this._rpcWebSocketConnected=true;this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3);this._updateSubscriptions()}_wsOnError(err){this._rpcWebSocketConnected=false;console.error("ws error:",err.message)}_wsOnClose(code){this._rpcWebSocketConnected=false;this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER;if(this._rpcWebSocketIdleTimeout){clearTimeout(this._rpcWebSocketIdleTimeout);this._rpcWebSocketIdleTimeout=null}if(this._rpcWebSocketHeartbeat){clearInterval(this._rpcWebSocketHeartbeat);this._rpcWebSocketHeartbeat=null}if(code===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={};Object.entries(this._subscriptionsByHash).forEach(([hash,subscription])=>{this._setSubscription(hash,{...subscription,state:"pending"})})}_setSubscription(hash,nextSubscription){const prevState=this._subscriptionsByHash[hash]?.state;this._subscriptionsByHash[hash]=nextSubscription;if(prevState!==nextSubscription.state){const stateChangeCallbacks=this._subscriptionStateChangeCallbacksByHash[hash];if(stateChangeCallbacks){stateChangeCallbacks.forEach(cb=>{try{cb(nextSubscription.state)}catch{}})}}}_onSubscriptionStateChange(clientSubscriptionId,callback){var _this$_subscriptionSt;const hash=this._subscriptionHashByClientSubscriptionId[clientSubscriptionId];if(hash==null){return()=>{}}const stateChangeCallbacks=(_this$_subscriptionSt=this._subscriptionStateChangeCallbacksByHash)[hash]||(_this$_subscriptionSt[hash]=new Set);stateChangeCallbacks.add(callback);return()=>{stateChangeCallbacks.delete(callback);if(stateChangeCallbacks.size===0){delete this._subscriptionStateChangeCallbacksByHash[hash]}}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){if(this._rpcWebSocketConnected){this._rpcWebSocketConnected=false;this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(err){if(err instanceof Error){console.log(`Error when closing socket connection: ${err.message}`)}}},500)}return}if(this._rpcWebSocketIdleTimeout!==null){clearTimeout(this._rpcWebSocketIdleTimeout);this._rpcWebSocketIdleTimeout=null;this._rpcWebSocketConnected=true}if(!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const activeWebSocketGeneration=this._rpcWebSocketGeneration;const isCurrentConnectionStillActive=()=>{return activeWebSocketGeneration===this._rpcWebSocketGeneration};await Promise.all(Object.keys(this._subscriptionsByHash).map(async hash=>{const subscription=this._subscriptionsByHash[hash];if(subscription===undefined){return}switch(subscription.state){case"pending":case"unsubscribed":if(subscription.callbacks.size===0){delete this._subscriptionsByHash[hash];if(subscription.state==="unsubscribed"){delete this._subscriptionCallbacksByServerSubscriptionId[subscription.serverSubscriptionId]}await this._updateSubscriptions();return}await(async()=>{const{args,method}=subscription;try{this._setSubscription(hash,{...subscription,state:"subscribing"});const serverSubscriptionId=await this._rpcWebSocket.call(method,args);this._setSubscription(hash,{...subscription,serverSubscriptionId:serverSubscriptionId,state:"subscribed"});this._subscriptionCallbacksByServerSubscriptionId[serverSubscriptionId]=subscription.callbacks;await this._updateSubscriptions()}catch(e){if(e instanceof Error){console.error(`${method} error for argument`,args,e.message)}if(!isCurrentConnectionStillActive()){return}this._setSubscription(hash,{...subscription,state:"pending"});await this._updateSubscriptions()}})();break;case"subscribed":if(subscription.callbacks.size===0){await(async()=>{const{serverSubscriptionId,unsubscribeMethod}=subscription;if(this._subscriptionsAutoDisposedByRpc.has(serverSubscriptionId)){this._subscriptionsAutoDisposedByRpc.delete(serverSubscriptionId)}else{this._setSubscription(hash,{...subscription,state:"unsubscribing"});this._setSubscription(hash,{...subscription,state:"unsubscribing"});try{await this._rpcWebSocket.call(unsubscribeMethod,[serverSubscriptionId])}catch(e){if(e instanceof Error){console.error(`${unsubscribeMethod} error:`,e.message)}if(!isCurrentConnectionStillActive()){return}this._setSubscription(hash,{...subscription,state:"subscribed"});await this._updateSubscriptions();return}}this._setSubscription(hash,{...subscription,state:"unsubscribed"});await this._updateSubscriptions()})()}break}}))}_handleServerNotification(serverSubscriptionId,callbackArgs){const callbacks=this._subscriptionCallbacksByServerSubscriptionId[serverSubscriptionId];if(callbacks===undefined){return}callbacks.forEach(cb=>{try{cb(...callbackArgs)}catch(e){console.error(e)}})}_wsOnAccountNotification(notification){const{result,subscription}=superstruct.create(notification,AccountNotificationResult);this._handleServerNotification(subscription,[result.value,result.context])}_makeSubscription(subscriptionConfig,args){const clientSubscriptionId=this._nextClientSubscriptionId++;const hash=fastStableStringify$1([subscriptionConfig.method,args]);const existingSubscription=this._subscriptionsByHash[hash];if(existingSubscription===undefined){this._subscriptionsByHash[hash]={...subscriptionConfig,args:args,callbacks:new Set([subscriptionConfig.callback]),state:"pending"}}else{existingSubscription.callbacks.add(subscriptionConfig.callback)}this._subscriptionHashByClientSubscriptionId[clientSubscriptionId]=hash;this._subscriptionDisposeFunctionsByClientSubscriptionId[clientSubscriptionId]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[clientSubscriptionId];delete this._subscriptionHashByClientSubscriptionId[clientSubscriptionId];const subscription=this._subscriptionsByHash[hash];assert(subscription!==undefined,`Could not find a \`Subscription\` when tearing down client subscription #${clientSubscriptionId}`);subscription.callbacks.delete(subscriptionConfig.callback);await this._updateSubscriptions()};this._updateSubscriptions();return clientSubscriptionId}onAccountChange(publicKey,callback,commitment){const args=this._buildArgs([publicKey.toBase58()],commitment||this._commitment||"finalized","base64");return this._makeSubscription({callback:callback,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},args)}async removeAccountChangeListener(clientSubscriptionId){await this._unsubscribeClientSubscription(clientSubscriptionId,"account change")}_wsOnProgramAccountNotification(notification){const{result,subscription}=superstruct.create(notification,ProgramAccountNotificationResult);this._handleServerNotification(subscription,[{accountId:result.value.pubkey,accountInfo:result.value.account},result.context])}onProgramAccountChange(programId,callback,commitment,filters){const args=this._buildArgs([programId.toBase58()],commitment||this._commitment||"finalized","base64",filters?{filters:filters}:undefined);return this._makeSubscription({callback:callback,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},args)}async removeProgramAccountChangeListener(clientSubscriptionId){await this._unsubscribeClientSubscription(clientSubscriptionId,"program account change")}onLogs(filter,callback,commitment){const args=this._buildArgs([typeof filter==="object"?{mentions:[filter.toString()]}:filter],commitment||this._commitment||"finalized");return this._makeSubscription({callback:callback,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},args)}async removeOnLogsListener(clientSubscriptionId){await this._unsubscribeClientSubscription(clientSubscriptionId,"logs")}_wsOnLogsNotification(notification){const{result,subscription}=superstruct.create(notification,LogsNotificationResult);this._handleServerNotification(subscription,[result.value,result.context])}_wsOnSlotNotification(notification){const{result,subscription}=superstruct.create(notification,SlotNotificationResult);this._handleServerNotification(subscription,[result])}onSlotChange(callback){return this._makeSubscription({callback:callback,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(clientSubscriptionId){await this._unsubscribeClientSubscription(clientSubscriptionId,"slot change")}_wsOnSlotUpdatesNotification(notification){const{result,subscription}=superstruct.create(notification,SlotUpdateNotificationResult);this._handleServerNotification(subscription,[result])}onSlotUpdate(callback){return this._makeSubscription({callback:callback,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(clientSubscriptionId){await this._unsubscribeClientSubscription(clientSubscriptionId,"slot update")}async _unsubscribeClientSubscription(clientSubscriptionId,subscriptionName){const dispose=this._subscriptionDisposeFunctionsByClientSubscriptionId[clientSubscriptionId];if(dispose){await dispose()}else{console.warn("Ignored unsubscribe request because an active subscription with id "+`\`${clientSubscriptionId}\` for '${subscriptionName}' events `+"could not be found.")}}_buildArgs(args,override,encoding,extra){const commitment=override||this._commitment;if(commitment||encoding||extra){let options={};if(encoding){options.encoding=encoding}if(commitment){options.commitment=commitment}if(extra){options=Object.assign(options,extra)}args.push(options)}return args}_buildArgsAtLeastConfirmed(args,override,encoding,extra){const commitment=override||this._commitment;if(commitment&&!["confirmed","finalized"].includes(commitment)){throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`")}return this._buildArgs(args,override,encoding,extra)}_wsOnSignatureNotification(notification){const{result,subscription}=superstruct.create(notification,SignatureNotificationResult);if(result.value!=="receivedSignature"){this._subscriptionsAutoDisposedByRpc.add(subscription)}this._handleServerNotification(subscription,result.value==="receivedSignature"?[{type:"received"},result.context]:[{type:"status",result:result.value},result.context])}onSignature(signature,callback,commitment){const args=this._buildArgs([signature],commitment||this._commitment||"finalized");const clientSubscriptionId=this._makeSubscription({callback:(notification,context)=>{if(notification.type==="status"){callback(notification.result,context);try{this.removeSignatureListener(clientSubscriptionId)}catch(_err){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},args);return clientSubscriptionId}onSignatureWithOptions(signature,callback,options){const{commitment,...extra}={...options,commitment:options&&options.commitment||this._commitment||"finalized"};const args=this._buildArgs([signature],commitment,undefined,extra);const clientSubscriptionId=this._makeSubscription({callback:(notification,context)=>{callback(notification,context);try{this.removeSignatureListener(clientSubscriptionId)}catch(_err){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},args);return clientSubscriptionId}async removeSignatureListener(clientSubscriptionId){await this._unsubscribeClientSubscription(clientSubscriptionId,"signature result")}_wsOnRootNotification(notification){const{result,subscription}=superstruct.create(notification,RootNotificationResult);this._handleServerNotification(subscription,[result])}onRootChange(callback){return this._makeSubscription({callback:callback,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(clientSubscriptionId){await this._unsubscribeClientSubscription(clientSubscriptionId,"root change")}}class Keypair{constructor(keypair){this._keypair=void 0;this._keypair=keypair??generateKeypair()}static generate(){return new Keypair(generateKeypair())}static fromSecretKey(secretKey,options){if(secretKey.byteLength!==64){throw new Error("bad secret key size")}const publicKey=secretKey.slice(32,64);if(!options||!options.skipValidation){const privateScalar=secretKey.slice(0,32);const computedPublicKey=getPublicKey(privateScalar);for(let ii=0;ii<32;ii++){if(publicKey[ii]!==computedPublicKey[ii]){throw new Error("provided secretKey is invalid")}}}return new Keypair({publicKey:publicKey,secretKey:secretKey})}static fromSeed(seed){const publicKey=getPublicKey(seed);const secretKey=new Uint8Array(64);secretKey.set(seed);secretKey.set(publicKey,32);return new Keypair({publicKey:publicKey,secretKey:secretKey})}get publicKey(){return new PublicKey(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const LOOKUP_TABLE_INSTRUCTION_LAYOUTS=Object.freeze({CreateLookupTable:{index:0,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),u64("recentSlot"),BufferLayout__namespace.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction")])},ExtendLookupTable:{index:2,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),u64(),BufferLayout__namespace.seq(publicKey(),BufferLayout__namespace.offset(BufferLayout__namespace.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction")])},CloseLookupTable:{index:4,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction")])}});class AddressLookupTableInstruction{constructor(){}static decodeInstructionType(instruction){this.checkProgramId(instruction.programId);const instructionTypeLayout=BufferLayout__namespace.u32("instruction");const index=instructionTypeLayout.decode(instruction.data);let type;for(const[layoutType,layout]of Object.entries(LOOKUP_TABLE_INSTRUCTION_LAYOUTS)){if(layout.index==index){type=layoutType;break}}if(!type){throw new Error("Invalid Instruction. Should be a LookupTable Instruction")}return type}static decodeCreateLookupTable(instruction){this.checkProgramId(instruction.programId);this.checkKeysLength(instruction.keys,4);const{recentSlot}=decodeData$1(LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CreateLookupTable,instruction.data);return{authority:instruction.keys[1].pubkey,payer:instruction.keys[2].pubkey,recentSlot:Number(recentSlot)}}static decodeExtendLookupTable(instruction){this.checkProgramId(instruction.programId);if(instruction.keys.length<2){throw new Error(`invalid instruction; found ${instruction.keys.length} keys, expected at least 2`)}const{addresses}=decodeData$1(LOOKUP_TABLE_INSTRUCTION_LAYOUTS.ExtendLookupTable,instruction.data);return{lookupTable:instruction.keys[0].pubkey,authority:instruction.keys[1].pubkey,payer:instruction.keys.length>2?instruction.keys[2].pubkey:undefined,addresses:addresses.map(buffer=>new PublicKey(buffer))}}static decodeCloseLookupTable(instruction){this.checkProgramId(instruction.programId);this.checkKeysLength(instruction.keys,3);return{lookupTable:instruction.keys[0].pubkey,authority:instruction.keys[1].pubkey,recipient:instruction.keys[2].pubkey}}static decodeFreezeLookupTable(instruction){this.checkProgramId(instruction.programId);this.checkKeysLength(instruction.keys,2);return{lookupTable:instruction.keys[0].pubkey,authority:instruction.keys[1].pubkey}}static decodeDeactivateLookupTable(instruction){this.checkProgramId(instruction.programId);this.checkKeysLength(instruction.keys,2);return{lookupTable:instruction.keys[0].pubkey,authority:instruction.keys[1].pubkey}}static checkProgramId(programId){if(!programId.equals(AddressLookupTableProgram.programId)){throw new Error("invalid instruction; programId is not AddressLookupTable Program")}}static checkKeysLength(keys,expectedLength){if(keys.length<expectedLength){throw new Error(`invalid instruction; found ${keys.length} keys, expected at least ${expectedLength}`)}}}class AddressLookupTableProgram{constructor(){}static createLookupTable(params){const[lookupTableAddress,bumpSeed]=PublicKey.findProgramAddressSync([params.authority.toBuffer(),bigintBuffer.toBufferLE(BigInt(params.recentSlot),8)],this.programId);const type=LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CreateLookupTable;const data=encodeData(type,{recentSlot:BigInt(params.recentSlot),bumpSeed:bumpSeed});const keys=[{pubkey:lookupTableAddress,isSigner:false,isWritable:true},{pubkey:params.authority,isSigner:true,isWritable:false},{pubkey:params.payer,isSigner:true,isWritable:true},{pubkey:SystemProgram.programId,isSigner:false,isWritable:false}];return[new TransactionInstruction({programId:this.programId,keys:keys,data:data}),lookupTableAddress]}static freezeLookupTable(params){const type=LOOKUP_TABLE_INSTRUCTION_LAYOUTS.FreezeLookupTable;const data=encodeData(type);const keys=[{pubkey:params.lookupTable,isSigner:false,isWritable:true},{pubkey:params.authority,isSigner:true,isWritable:false}];return new TransactionInstruction({programId:this.programId,keys:keys,data:data})}static extendLookupTable(params){const type=LOOKUP_TABLE_INSTRUCTION_LAYOUTS.ExtendLookupTable;const data=encodeData(type,{addresses:params.addresses.map(addr=>addr.toBytes())});const keys=[{pubkey:params.lookupTable,isSigner:false,isWritable:true},{pubkey:params.authority,isSigner:true,isWritable:false}];if(params.payer){keys.push({pubkey:params.payer,isSigner:true,isWritable:true},{pubkey:SystemProgram.programId,isSigner:false,isWritable:false})}return new TransactionInstruction({programId:this.programId,keys:keys,data:data})}static deactivateLookupTable(params){const type=LOOKUP_TABLE_INSTRUCTION_LAYOUTS.DeactivateLookupTable;const data=encodeData(type);const keys=[{pubkey:params.lookupTable,isSigner:false,isWritable:true},{pubkey:params.authority,isSigner:true,isWritable:false}];return new TransactionInstruction({programId:this.programId,keys:keys,data:data})}static closeLookupTable(params){const type=LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CloseLookupTable;const data=encodeData(type);const keys=[{pubkey:params.lookupTable,isSigner:false,isWritable:true},{pubkey:params.authority,isSigner:true,isWritable:false},{pubkey:params.recipient,isSigner:false,isWritable:true}];return new TransactionInstruction({programId:this.programId,keys:keys,data:data})}}AddressLookupTableProgram.programId=new PublicKey("AddressLookupTab1e1111111111111111111111111");class ComputeBudgetInstruction{constructor(){}static decodeInstructionType(instruction){this.checkProgramId(instruction.programId);const instructionTypeLayout=BufferLayout__namespace.u8("instruction");const typeIndex=instructionTypeLayout.decode(instruction.data);let type;for(const[ixType,layout]of Object.entries(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS)){if(layout.index==typeIndex){type=ixType;break}}if(!type){throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction")}return type}static decodeRequestUnits(instruction){this.checkProgramId(instruction.programId);const{units,additionalFee}=decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestUnits,instruction.data);return{units:units,additionalFee:additionalFee}}static decodeRequestHeapFrame(instruction){this.checkProgramId(instruction.programId);const{bytes}=decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestHeapFrame,instruction.data);return{bytes:bytes}}static decodeSetComputeUnitLimit(instruction){this.checkProgramId(instruction.programId);const{units}=decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitLimit,instruction.data);return{units:units}}static decodeSetComputeUnitPrice(instruction){this.checkProgramId(instruction.programId);const{microLamports}=decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitPrice,instruction.data);return{microLamports:microLamports}}static checkProgramId(programId){if(!programId.equals(ComputeBudgetProgram.programId)){throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}}const COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=Object.freeze({RequestUnits:{index:0,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u8("instruction"),BufferLayout__namespace.u32("units"),BufferLayout__namespace.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u8("instruction"),BufferLayout__namespace.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u8("instruction"),BufferLayout__namespace.u32("units")])},SetComputeUnitPrice:{index:3,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u8("instruction"),u64("microLamports")])}});class ComputeBudgetProgram{constructor(){}static requestUnits(params){const type=COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestUnits;const data=encodeData(type,params);return new TransactionInstruction({keys:[],programId:this.programId,data:data})}static requestHeapFrame(params){const type=COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestHeapFrame;const data=encodeData(type,params);return new TransactionInstruction({keys:[],programId:this.programId,data:data})}static setComputeUnitLimit(params){const type=COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitLimit;const data=encodeData(type,params);return new TransactionInstruction({keys:[],programId:this.programId,data:data})}static setComputeUnitPrice(params){const type=COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitPrice;const data=encodeData(type,{microLamports:BigInt(params.microLamports)});return new TransactionInstruction({keys:[],programId:this.programId,data:data})}}ComputeBudgetProgram.programId=new PublicKey("ComputeBudget111111111111111111111111111111");const PRIVATE_KEY_BYTES$1=64;const PUBLIC_KEY_BYTES$1=32;const SIGNATURE_BYTES=64;const ED25519_INSTRUCTION_LAYOUT=BufferLayout__namespace.struct([BufferLayout__namespace.u8("numSignatures"),BufferLayout__namespace.u8("padding"),BufferLayout__namespace.u16("signatureOffset"),BufferLayout__namespace.u16("signatureInstructionIndex"),BufferLayout__namespace.u16("publicKeyOffset"),BufferLayout__namespace.u16("publicKeyInstructionIndex"),BufferLayout__namespace.u16("messageDataOffset"),BufferLayout__namespace.u16("messageDataSize"),BufferLayout__namespace.u16("messageInstructionIndex")]);class Ed25519Program{constructor(){}static createInstructionWithPublicKey(params){const{publicKey,message,signature,instructionIndex}=params;assert(publicKey.length===PUBLIC_KEY_BYTES$1,`Public Key must be ${PUBLIC_KEY_BYTES$1} bytes but received ${publicKey.length} bytes`);assert(signature.length===SIGNATURE_BYTES,`Signature must be ${SIGNATURE_BYTES} bytes but received ${signature.length} bytes`);const publicKeyOffset=ED25519_INSTRUCTION_LAYOUT.span;const signatureOffset=publicKeyOffset+publicKey.length;const messageDataOffset=signatureOffset+signature.length;const numSignatures=1;const instructionData=buffer.Buffer.alloc(messageDataOffset+message.length);const index=instructionIndex==null?65535:instructionIndex;ED25519_INSTRUCTION_LAYOUT.encode({numSignatures:numSignatures,padding:0,signatureOffset:signatureOffset,signatureInstructionIndex:index,publicKeyOffset:publicKeyOffset,publicKeyInstructionIndex:index,messageDataOffset:messageDataOffset,messageDataSize:message.length,messageInstructionIndex:index},instructionData);instructionData.fill(publicKey,publicKeyOffset);instructionData.fill(signature,signatureOffset);instructionData.fill(message,messageDataOffset);return new TransactionInstruction({keys:[],programId:Ed25519Program.programId,data:instructionData})}static createInstructionWithPrivateKey(params){const{privateKey,message,instructionIndex}=params;assert(privateKey.length===PRIVATE_KEY_BYTES$1,`Private key must be ${PRIVATE_KEY_BYTES$1} bytes but received ${privateKey.length} bytes`);try{const keypair=Keypair.fromSecretKey(privateKey);const publicKey=keypair.publicKey.toBytes();const signature=sign(message,keypair.secretKey);return this.createInstructionWithPublicKey({publicKey:publicKey,message:message,signature:signature,instructionIndex:instructionIndex})}catch(error){throw new Error(`Error creating instruction; ${error}`)}}}Ed25519Program.programId=new PublicKey("Ed25519SigVerify111111111111111111111111111");secp256k1__namespace.utils.hmacSha256Sync=(key,...msgs)=>{const h=hmac.hmac.create(sha256.sha256,key);msgs.forEach(msg=>h.update(msg));return h.digest()};const ecdsaSign=(msgHash,privKey)=>secp256k1__namespace.signSync(msgHash,privKey,{der:false,recovered:true});secp256k1__namespace.utils.isValidPrivateKey;const publicKeyCreate=secp256k1__namespace.getPublicKey;const PRIVATE_KEY_BYTES=32;const ETHEREUM_ADDRESS_BYTES=20;const PUBLIC_KEY_BYTES=64;const SIGNATURE_OFFSETS_SERIALIZED_SIZE=11;const SECP256K1_INSTRUCTION_LAYOUT=BufferLayout__namespace.struct([BufferLayout__namespace.u8("numSignatures"),BufferLayout__namespace.u16("signatureOffset"),BufferLayout__namespace.u8("signatureInstructionIndex"),BufferLayout__namespace.u16("ethAddressOffset"),BufferLayout__namespace.u8("ethAddressInstructionIndex"),BufferLayout__namespace.u16("messageDataOffset"),BufferLayout__namespace.u16("messageDataSize"),BufferLayout__namespace.u8("messageInstructionIndex"),BufferLayout__namespace.blob(20,"ethAddress"),BufferLayout__namespace.blob(64,"signature"),BufferLayout__namespace.u8("recoveryId")]);class Secp256k1Program{constructor(){}static publicKeyToEthAddress(publicKey){assert(publicKey.length===PUBLIC_KEY_BYTES,`Public key must be ${PUBLIC_KEY_BYTES} bytes but received ${publicKey.length} bytes`);try{return buffer.Buffer.from(sha3.keccak_256(toBuffer(publicKey))).slice(-ETHEREUM_ADDRESS_BYTES)}catch(error){throw new Error(`Error constructing Ethereum address: ${error}`)}}static createInstructionWithPublicKey(params){const{publicKey,message,signature,recoveryId,instructionIndex}=params;return Secp256k1Program.createInstructionWithEthAddress({ethAddress:Secp256k1Program.publicKeyToEthAddress(publicKey),message:message,signature:signature,recoveryId:recoveryId,instructionIndex:instructionIndex})}static createInstructionWithEthAddress(params){const{ethAddress:rawAddress,message,signature,recoveryId,instructionIndex=0}=params;let ethAddress;if(typeof rawAddress==="string"){if(rawAddress.startsWith("0x")){ethAddress=buffer.Buffer.from(rawAddress.substr(2),"hex")}else{ethAddress=buffer.Buffer.from(rawAddress,"hex")}}else{ethAddress=rawAddress}assert(ethAddress.length===ETHEREUM_ADDRESS_BYTES,`Address must be ${ETHEREUM_ADDRESS_BYTES} bytes but received ${ethAddress.length} bytes`);const dataStart=1+SIGNATURE_OFFSETS_SERIALIZED_SIZE;const ethAddressOffset=dataStart;const signatureOffset=dataStart+ethAddress.length;const messageDataOffset=signatureOffset+signature.length+1;const numSignatures=1;const instructionData=buffer.Buffer.alloc(SECP256K1_INSTRUCTION_LAYOUT.span+message.length);SECP256K1_INSTRUCTION_LAYOUT.encode({numSignatures:numSignatures,signatureOffset:signatureOffset,signatureInstructionIndex:instructionIndex,ethAddressOffset:ethAddressOffset,ethAddressInstructionIndex:instructionIndex,messageDataOffset:messageDataOffset,messageDataSize:message.length,messageInstructionIndex:instructionIndex,signature:toBuffer(signature),ethAddress:toBuffer(ethAddress),recoveryId:recoveryId},instructionData);instructionData.fill(toBuffer(message),SECP256K1_INSTRUCTION_LAYOUT.span);return new TransactionInstruction({keys:[],programId:Secp256k1Program.programId,data:instructionData})}static createInstructionWithPrivateKey(params){const{privateKey:pkey,message,instructionIndex}=params;assert(pkey.length===PRIVATE_KEY_BYTES,`Private key must be ${PRIVATE_KEY_BYTES} bytes but received ${pkey.length} bytes`);try{const privateKey=toBuffer(pkey);const publicKey=publicKeyCreate(privateKey,false).slice(1);const messageHash=buffer.Buffer.from(sha3.keccak_256(toBuffer(message)));const[signature,recoveryId]=ecdsaSign(messageHash,privateKey);return this.createInstructionWithPublicKey({publicKey:publicKey,message:message,signature:signature,recoveryId:recoveryId,instructionIndex:instructionIndex})}catch(error){throw new Error(`Error creating instruction; ${error}`)}}}Secp256k1Program.programId=new PublicKey("KeccakSecp256k11111111111111111111111111111");const STAKE_CONFIG_ID=new PublicKey("StakeConfig11111111111111111111111111111111");class Authorized{constructor(staker,withdrawer){this.staker=void 0;this.withdrawer=void 0;this.staker=staker;this.withdrawer=withdrawer}}class Lockup{constructor(unixTimestamp,epoch,custodian){this.unixTimestamp=void 0;this.epoch=void 0;this.custodian=void 0;this.unixTimestamp=unixTimestamp;this.epoch=epoch;this.custodian=custodian}}Lockup.default=new Lockup(0,0,PublicKey.default);class StakeInstruction{constructor(){}static decodeInstructionType(instruction){this.checkProgramId(instruction.programId);const instructionTypeLayout=BufferLayout__namespace.u32("instruction");const typeIndex=instructionTypeLayout.decode(instruction.data);let type;for(const[ixType,layout]of Object.entries(STAKE_INSTRUCTION_LAYOUTS)){if(layout.index==typeIndex){type=ixType;break}}if(!type){throw new Error("Instruction type incorrect; not a StakeInstruction")}return type}static decodeInitialize(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,2);const{authorized,lockup}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Initialize,instruction.data);return{stakePubkey:instruction.keys[0].pubkey,authorized:new Authorized(new PublicKey(authorized.staker),new PublicKey(authorized.withdrawer)),lockup:new Lockup(lockup.unixTimestamp,lockup.epoch,new PublicKey(lockup.custodian))}}static decodeDelegate(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,6);decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Delegate,instruction.data);return{stakePubkey:instruction.keys[0].pubkey,votePubkey:instruction.keys[1].pubkey,authorizedPubkey:instruction.keys[5].pubkey}}static decodeAuthorize(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,3);const{newAuthorized,stakeAuthorizationType}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Authorize,instruction.data);const o={stakePubkey:instruction.keys[0].pubkey,authorizedPubkey:instruction.keys[2].pubkey,newAuthorizedPubkey:new PublicKey(newAuthorized),stakeAuthorizationType:{index:stakeAuthorizationType}};if(instruction.keys.length>3){o.custodianPubkey=instruction.keys[3].pubkey}return o}static decodeAuthorizeWithSeed(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,2);const{newAuthorized,stakeAuthorizationType,authoritySeed,authorityOwner}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed,instruction.data);const o={stakePubkey:instruction.keys[0].pubkey,authorityBase:instruction.keys[1].pubkey,authoritySeed:authoritySeed,authorityOwner:new PublicKey(authorityOwner),newAuthorizedPubkey:new PublicKey(newAuthorized),stakeAuthorizationType:{index:stakeAuthorizationType}};if(instruction.keys.length>3){o.custodianPubkey=instruction.keys[3].pubkey}return o}static decodeSplit(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,3);const{lamports}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Split,instruction.data);return{stakePubkey:instruction.keys[0].pubkey,splitStakePubkey:instruction.keys[1].pubkey,authorizedPubkey:instruction.keys[2].pubkey,lamports:lamports}}static decodeMerge(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,3);decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Merge,instruction.data);return{stakePubkey:instruction.keys[0].pubkey,sourceStakePubKey:instruction.keys[1].pubkey,authorizedPubkey:instruction.keys[4].pubkey}}static decodeWithdraw(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,5);const{lamports}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Withdraw,instruction.data);const o={stakePubkey:instruction.keys[0].pubkey,toPubkey:instruction.keys[1].pubkey,authorizedPubkey:instruction.keys[4].pubkey,lamports:lamports};if(instruction.keys.length>5){o.custodianPubkey=instruction.keys[5].pubkey}return o}static decodeDeactivate(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,3);decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Deactivate,instruction.data);return{stakePubkey:instruction.keys[0].pubkey,authorizedPubkey:instruction.keys[2].pubkey}}static checkProgramId(programId){if(!programId.equals(StakeProgram.programId)){throw new Error("invalid instruction; programId is not StakeProgram")}}static checkKeyLength(keys,expectedLength){if(keys.length<expectedLength){throw new Error(`invalid instruction; found ${keys.length} keys, expected at least ${expectedLength}`)}}}const STAKE_INSTRUCTION_LAYOUTS=Object.freeze({Initialize:{index:0,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),authorized(),lockup()])},Authorize:{index:1,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),publicKey("newAuthorized"),BufferLayout__namespace.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction")])},Split:{index:3,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),BufferLayout__namespace.ns64("lamports")])},Withdraw:{index:4,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),BufferLayout__namespace.ns64("lamports")])},Deactivate:{index:5,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction")])},Merge:{index:7,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),publicKey("newAuthorized"),BufferLayout__namespace.u32("stakeAuthorizationType"),rustString("authoritySeed"),publicKey("authorityOwner")])}});const StakeAuthorizationLayout=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class StakeProgram{constructor(){}static initialize(params){const{stakePubkey,authorized,lockup:maybeLockup}=params;const lockup=maybeLockup||Lockup.default;const type=STAKE_INSTRUCTION_LAYOUTS.Initialize;const data=encodeData(type,{authorized:{staker:toBuffer(authorized.staker.toBuffer()),withdrawer:toBuffer(authorized.withdrawer.toBuffer())},lockup:{unixTimestamp:lockup.unixTimestamp,epoch:lockup.epoch,custodian:toBuffer(lockup.custodian.toBuffer())}});const instructionData={keys:[{pubkey:stakePubkey,isSigner:false,isWritable:true},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:false,isWritable:false}],programId:this.programId,data:data};return new TransactionInstruction(instructionData)}static createAccountWithSeed(params){const transaction=new Transaction;transaction.add(SystemProgram.createAccountWithSeed({fromPubkey:params.fromPubkey,newAccountPubkey:params.stakePubkey,basePubkey:params.basePubkey,seed:params.seed,lamports:params.lamports,space:this.space,programId:this.programId}));const{stakePubkey,authorized,lockup}=params;return transaction.add(this.initialize({stakePubkey:stakePubkey,authorized:authorized,lockup:lockup}))}static createAccount(params){const transaction=new Transaction;transaction.add(SystemProgram.createAccount({fromPubkey:params.fromPubkey,newAccountPubkey:params.stakePubkey,lamports:params.lamports,space:this.space,programId:this.programId}));const{stakePubkey,authorized,lockup}=params;return transaction.add(this.initialize({stakePubkey:stakePubkey,authorized:authorized,lockup:lockup}))}static delegate(params){const{stakePubkey,authorizedPubkey,votePubkey}=params;const type=STAKE_INSTRUCTION_LAYOUTS.Delegate;const data=encodeData(type);return(new Transaction).add({keys:[{pubkey:stakePubkey,isSigner:false,isWritable:true},{pubkey:votePubkey,isSigner:false,isWritable:false},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:false,isWritable:false},{pubkey:SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:false,isWritable:false},{pubkey:STAKE_CONFIG_ID,isSigner:false,isWritable:false},{pubkey:authorizedPubkey,isSigner:true,isWritable:false}],programId:this.programId,data:data})}static authorize(params){const{stakePubkey,authorizedPubkey,newAuthorizedPubkey,stakeAuthorizationType,custodianPubkey}=params;const type=STAKE_INSTRUCTION_LAYOUTS.Authorize;const data=encodeData(type,{newAuthorized:toBuffer(newAuthorizedPubkey.toBuffer()),stakeAuthorizationType:stakeAuthorizationType.index});const keys=[{pubkey:stakePubkey,isSigner:false,isWritable:true},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:false,isWritable:true},{pubkey:authorizedPubkey,isSigner:true,isWritable:false}];if(custodianPubkey){keys.push({pubkey:custodianPubkey,isSigner:false,isWritable:false})}return(new Transaction).add({keys:keys,programId:this.programId,data:data})}static authorizeWithSeed(params){const{stakePubkey,authorityBase,authoritySeed,authorityOwner,newAuthorizedPubkey,stakeAuthorizationType,custodianPubkey}=params;const type=STAKE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed;const data=encodeData(type,{newAuthorized:toBuffer(newAuthorizedPubkey.toBuffer()),stakeAuthorizationType:stakeAuthorizationType.index,authoritySeed:authoritySeed,authorityOwner:toBuffer(authorityOwner.toBuffer())});const keys=[{pubkey:stakePubkey,isSigner:false,isWritable:true},{pubkey:authorityBase,isSigner:true,isWritable:false},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:false,isWritable:false}];if(custodianPubkey){keys.push({pubkey:custodianPubkey,isSigner:false,isWritable:false})}return(new Transaction).add({keys:keys,programId:this.programId,data:data})}static splitInstruction(params){const{stakePubkey,authorizedPubkey,splitStakePubkey,lamports}=params;const type=STAKE_INSTRUCTION_LAYOUTS.Split;const data=encodeData(type,{lamports:lamports});return new TransactionInstruction({keys:[{pubkey:stakePubkey,isSigner:false,isWritable:true},{pubkey:splitStakePubkey,isSigner:false,isWritable:true},{pubkey:authorizedPubkey,isSigner:true,isWritable:false}],programId:this.programId,data:data})}static split(params){const transaction=new Transaction;transaction.add(SystemProgram.createAccount({fromPubkey:params.authorizedPubkey,newAccountPubkey:params.splitStakePubkey,lamports:0,space:this.space,programId:this.programId}));return transaction.add(this.splitInstruction(params))}static splitWithSeed(params){const{stakePubkey,authorizedPubkey,splitStakePubkey,basePubkey,seed,lamports}=params;const transaction=new Transaction;transaction.add(SystemProgram.allocate({accountPubkey:splitStakePubkey,basePubkey:basePubkey,seed:seed,space:this.space,programId:this.programId}));return transaction.add(this.splitInstruction({stakePubkey:stakePubkey,authorizedPubkey:authorizedPubkey,splitStakePubkey:splitStakePubkey,lamports:lamports}))}static merge(params){const{stakePubkey,sourceStakePubKey,authorizedPubkey}=params;const type=STAKE_INSTRUCTION_LAYOUTS.Merge;const data=encodeData(type);return(new Transaction).add({keys:[{pubkey:stakePubkey,isSigner:false,isWritable:true},{pubkey:sourceStakePubKey,isSigner:false,isWritable:true},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:false,isWritable:false},{pubkey:SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:false,isWritable:false},{pubkey:authorizedPubkey,isSigner:true,isWritable:false}],programId:this.programId,data:data})}static withdraw(params){const{stakePubkey,authorizedPubkey,toPubkey,lamports,custodianPubkey}=params;const type=STAKE_INSTRUCTION_LAYOUTS.Withdraw;const data=encodeData(type,{lamports:lamports});const keys=[{pubkey:stakePubkey,isSigner:false,isWritable:true},{pubkey:toPubkey,isSigner:false,isWritable:true},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:false,isWritable:false},{pubkey:SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:false,isWritable:false},{pubkey:authorizedPubkey,isSigner:true,isWritable:false}];if(custodianPubkey){keys.push({pubkey:custodianPubkey,isSigner:false,isWritable:false})}return(new Transaction).add({keys:keys,programId:this.programId,data:data})}static deactivate(params){const{stakePubkey,authorizedPubkey}=params;const type=STAKE_INSTRUCTION_LAYOUTS.Deactivate;const data=encodeData(type);return(new Transaction).add({keys:[{pubkey:stakePubkey,isSigner:false,isWritable:true},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:false,isWritable:false},{pubkey:authorizedPubkey,isSigner:true,isWritable:false}],programId:this.programId,data:data})}}StakeProgram.programId=new PublicKey("Stake11111111111111111111111111111111111111");StakeProgram.space=200;class VoteInit{constructor(nodePubkey,authorizedVoter,authorizedWithdrawer,commission){this.nodePubkey=void 0;this.authorizedVoter=void 0;this.authorizedWithdrawer=void 0;this.commission=void 0;this.nodePubkey=nodePubkey;this.authorizedVoter=authorizedVoter;this.authorizedWithdrawer=authorizedWithdrawer;this.commission=commission}}class VoteInstruction{constructor(){}static decodeInstructionType(instruction){this.checkProgramId(instruction.programId);const instructionTypeLayout=BufferLayout__namespace.u32("instruction");const typeIndex=instructionTypeLayout.decode(instruction.data);let type;for(const[ixType,layout]of Object.entries(VOTE_INSTRUCTION_LAYOUTS)){if(layout.index==typeIndex){type=ixType;break}}if(!type){throw new Error("Instruction type incorrect; not a VoteInstruction")}return type}static decodeInitializeAccount(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,4);const{voteInit}=decodeData$1(VOTE_INSTRUCTION_LAYOUTS.InitializeAccount,instruction.data);return{votePubkey:instruction.keys[0].pubkey,nodePubkey:instruction.keys[3].pubkey,voteInit:new VoteInit(new PublicKey(voteInit.nodePubkey),new PublicKey(voteInit.authorizedVoter),new PublicKey(voteInit.authorizedWithdrawer),voteInit.commission)}}static decodeAuthorize(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,3);const{newAuthorized,voteAuthorizationType}=decodeData$1(VOTE_INSTRUCTION_LAYOUTS.Authorize,instruction.data);return{votePubkey:instruction.keys[0].pubkey,authorizedPubkey:instruction.keys[2].pubkey,newAuthorizedPubkey:new PublicKey(newAuthorized),voteAuthorizationType:{index:voteAuthorizationType}}}static decodeAuthorizeWithSeed(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey,currentAuthorityDerivedKeySeed,newAuthorized,voteAuthorizationType}}=decodeData$1(VOTE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed,instruction.data);return{currentAuthorityDerivedKeyBasePubkey:instruction.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new PublicKey(currentAuthorityDerivedKeyOwnerPubkey),currentAuthorityDerivedKeySeed:currentAuthorityDerivedKeySeed,newAuthorizedPubkey:new PublicKey(newAuthorized),voteAuthorizationType:{index:voteAuthorizationType},votePubkey:instruction.keys[0].pubkey}}static decodeWithdraw(instruction){this.checkProgramId(instruction.programId);this.checkKeyLength(instruction.keys,3);const{lamports}=decodeData$1(VOTE_INSTRUCTION_LAYOUTS.Withdraw,instruction.data);return{votePubkey:instruction.keys[0].pubkey,authorizedWithdrawerPubkey:instruction.keys[2].pubkey,lamports:lamports,toPubkey:instruction.keys[1].pubkey}}static checkProgramId(programId){if(!programId.equals(VoteProgram.programId)){throw new Error("invalid instruction; programId is not VoteProgram")}}static checkKeyLength(keys,expectedLength){if(keys.length<expectedLength){throw new Error(`invalid instruction; found ${keys.length} keys, expected at least ${expectedLength}`)}}}const VOTE_INSTRUCTION_LAYOUTS=Object.freeze({InitializeAccount:{index:0,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),voteInit()])},Authorize:{index:1,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),publicKey("newAuthorized"),BufferLayout__namespace.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),BufferLayout__namespace.ns64("lamports")])},AuthorizeWithSeed:{index:10,layout:BufferLayout__namespace.struct([BufferLayout__namespace.u32("instruction"),voteAuthorizeWithSeedArgs()])}});const VoteAuthorizationLayout=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class VoteProgram{constructor(){}static initializeAccount(params){const{votePubkey,nodePubkey,voteInit}=params;const type=VOTE_INSTRUCTION_LAYOUTS.InitializeAccount;const data=encodeData(type,{voteInit:{nodePubkey:toBuffer(voteInit.nodePubkey.toBuffer()),authorizedVoter:toBuffer(voteInit.authorizedVoter.toBuffer()),authorizedWithdrawer:toBuffer(voteInit.authorizedWithdrawer.toBuffer()),commission:voteInit.commission}});const instructionData={keys:[{pubkey:votePubkey,isSigner:false,isWritable:true},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:false,isWritable:false},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:false,isWritable:false},{pubkey:nodePubkey,isSigner:true,isWritable:false}],programId:this.programId,data:data};return new TransactionInstruction(instructionData)}static createAccount(params){const transaction=new Transaction;transaction.add(SystemProgram.createAccount({fromPubkey:params.fromPubkey,newAccountPubkey:params.votePubkey,lamports:params.lamports,space:this.space,programId:this.programId}));return transaction.add(this.initializeAccount({votePubkey:params.votePubkey,nodePubkey:params.voteInit.nodePubkey,voteInit:params.voteInit}))}static authorize(params){const{votePubkey,authorizedPubkey,newAuthorizedPubkey,voteAuthorizationType}=params;const type=VOTE_INSTRUCTION_LAYOUTS.Authorize;const data=encodeData(type,{newAuthorized:toBuffer(newAuthorizedPubkey.toBuffer()),voteAuthorizationType:voteAuthorizationType.index});const keys=[{pubkey:votePubkey,isSigner:false,isWritable:true},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:false,isWritable:false},{pubkey:authorizedPubkey,isSigner:true,isWritable:false}];return(new Transaction).add({keys:keys,programId:this.programId,data:data})}static authorizeWithSeed(params){const{currentAuthorityDerivedKeyBasePubkey,currentAuthorityDerivedKeyOwnerPubkey,currentAuthorityDerivedKeySeed,newAuthorizedPubkey,voteAuthorizationType,votePubkey}=params;const type=VOTE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed;const data=encodeData(type,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:toBuffer(currentAuthorityDerivedKeyOwnerPubkey.toBuffer()),currentAuthorityDerivedKeySeed:currentAuthorityDerivedKeySeed,newAuthorized:toBuffer(newAuthorizedPubkey.toBuffer()),voteAuthorizationType:voteAuthorizationType.index}});const keys=[{pubkey:votePubkey,isSigner:false,isWritable:true},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:false,isWritable:false},{pubkey:currentAuthorityDerivedKeyBasePubkey,isSigner:true,isWritable:false}];return(new Transaction).add({keys:keys,programId:this.programId,data:data})}static withdraw(params){const{votePubkey,authorizedWithdrawerPubkey,lamports,toPubkey}=params;const type=VOTE_INSTRUCTION_LAYOUTS.Withdraw;const data=encodeData(type,{lamports:lamports});const keys=[{pubkey:votePubkey,isSigner:false,isWritable:true},{pubkey:toPubkey,isSigner:false,isWritable:true},{pubkey:authorizedWithdrawerPubkey,isSigner:true,isWritable:false}];return(new Transaction).add({keys:keys,programId:this.programId,data:data})}static safeWithdraw(params,currentVoteAccountBalance,rentExemptMinimum){if(params.lamports>currentVoteAccountBalance-rentExemptMinimum){throw new Error("Withdraw will leave vote account with insuffcient funds.")}return VoteProgram.withdraw(params)}}VoteProgram.programId=new PublicKey("Vote111111111111111111111111111111111111111");VoteProgram.space=3731;const VALIDATOR_INFO_KEY=new PublicKey("Va1idator1nfo111111111111111111111111111111");const InfoString=superstruct.type({name:superstruct.string(),website:superstruct.optional(superstruct.string()),details:superstruct.optional(superstruct.string()),keybaseUsername:superstruct.optional(superstruct.string())});class ValidatorInfo{constructor(key,info){this.key=void 0;this.info=void 0;this.key=key;this.info=info}static fromConfigData(buffer$1){let byteArray=[...buffer$1];const configKeyCount=decodeLength(byteArray);if(configKeyCount!==2)return null;const configKeys=[];for(let i=0;i<2;i++){const publicKey=new PublicKey(byteArray.slice(0,PUBLIC_KEY_LENGTH));byteArray=byteArray.slice(PUBLIC_KEY_LENGTH);const isSigner=byteArray.slice(0,1)[0]===1;byteArray=byteArray.slice(1);configKeys.push({publicKey:publicKey,isSigner:isSigner})}if(configKeys[0].publicKey.equals(VALIDATOR_INFO_KEY)){if(configKeys[1].isSigner){const rawInfo=rustString().decode(buffer.Buffer.from(byteArray));const info=JSON.parse(rawInfo);superstruct.assert(info,InfoString);return new ValidatorInfo(configKeys[1].publicKey,info)}}return null}}const VOTE_PROGRAM_ID=new PublicKey("Vote111111111111111111111111111111111111111");const VoteAccountLayout=BufferLayout__namespace.struct([publicKey("nodePubkey"),publicKey("authorizedWithdrawer"),BufferLayout__namespace.u8("commission"),BufferLayout__namespace.nu64(),BufferLayout__namespace.seq(BufferLayout__namespace.struct([BufferLayout__namespace.nu64("slot"),BufferLayout__namespace.u32("confirmationCount")]),BufferLayout__namespace.offset(BufferLayout__namespace.u32(),-8),"votes"),BufferLayout__namespace.u8("rootSlotValid"),BufferLayout__namespace.nu64("rootSlot"),BufferLayout__namespace.nu64(),BufferLayout__namespace.seq(BufferLayout__namespace.struct([BufferLayout__namespace.nu64("epoch"),publicKey("authorizedVoter")]),BufferLayout__namespace.offset(BufferLayout__namespace.u32(),-8),"authorizedVoters"),BufferLayout__namespace.struct([BufferLayout__namespace.seq(BufferLayout__namespace.struct([publicKey("authorizedPubkey"),BufferLayout__namespace.nu64("epochOfLastAuthorizedSwitch"),BufferLayout__namespace.nu64("targetEpoch")]),32,"buf"),BufferLayout__namespace.nu64("idx"),BufferLayout__namespace.u8("isEmpty")],"priorVoters"),BufferLayout__namespace.nu64(),BufferLayout__namespace.seq(BufferLayout__namespace.struct([BufferLayout__namespace.nu64("epoch"),BufferLayout__namespace.nu64("credits"),BufferLayout__namespace.nu64("prevCredits")]),BufferLayout__namespace.offset(BufferLayout__namespace.u32(),-8),"epochCredits"),BufferLayout__namespace.struct([BufferLayout__namespace.nu64("slot"),BufferLayout__namespace.nu64("timestamp")],"lastTimestamp")]);class VoteAccount{constructor(args){this.nodePubkey=void 0;this.authorizedWithdrawer=void 0;this.commission=void 0;this.rootSlot=void 0;this.votes=void 0;this.authorizedVoters=void 0;this.priorVoters=void 0;this.epochCredits=void 0;this.lastTimestamp=void 0;this.nodePubkey=args.nodePubkey;this.authorizedWithdrawer=args.authorizedWithdrawer;this.commission=args.commission;this.rootSlot=args.rootSlot;this.votes=args.votes;this.authorizedVoters=args.authorizedVoters;this.priorVoters=args.priorVoters;this.epochCredits=args.epochCredits;this.lastTimestamp=args.lastTimestamp}static fromAccountData(buffer){const versionOffset=4;const va=VoteAccountLayout.decode(toBuffer(buffer),versionOffset);let rootSlot=va.rootSlot;if(!va.rootSlotValid){rootSlot=null}return new VoteAccount({nodePubkey:new PublicKey(va.nodePubkey),authorizedWithdrawer:new PublicKey(va.authorizedWithdrawer),commission:va.commission,votes:va.votes,rootSlot:rootSlot,authorizedVoters:va.authorizedVoters.map(parseAuthorizedVoter),priorVoters:getPriorVoters(va.priorVoters),epochCredits:va.epochCredits,lastTimestamp:va.lastTimestamp})}}function parseAuthorizedVoter({authorizedVoter,epoch}){return{epoch:epoch,authorizedVoter:new PublicKey(authorizedVoter)}}function parsePriorVoters({authorizedPubkey,epochOfLastAuthorizedSwitch,targetEpoch}){return{authorizedPubkey:new PublicKey(authorizedPubkey),epochOfLastAuthorizedSwitch:epochOfLastAuthorizedSwitch,targetEpoch:targetEpoch}}function getPriorVoters({buf,idx,isEmpty}){if(isEmpty){return[]}return[...buf.slice(idx+1).map(parsePriorVoters),...buf.slice(0,idx).map(parsePriorVoters)]}const endpoint={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function clusterApiUrl(cluster,tls){const key=tls===false?"http":"https";if(!cluster){return endpoint[key]["devnet"]}const url=endpoint[key][cluster];if(!url){throw new Error(`Unknown ${key} cluster: ${cluster}`)}return url}async function sendAndConfirmRawTransaction(connection,rawTransaction,confirmationStrategyOrConfirmOptions,maybeConfirmOptions){let confirmationStrategy;let options;if(confirmationStrategyOrConfirmOptions&&Object.prototype.hasOwnProperty.call(confirmationStrategyOrConfirmOptions,"lastValidBlockHeight")){confirmationStrategy=confirmationStrategyOrConfirmOptions;options=maybeConfirmOptions}else if(confirmationStrategyOrConfirmOptions&&Object.prototype.hasOwnProperty.call(confirmationStrategyOrConfirmOptions,"nonceValue")){confirmationStrategy=confirmationStrategyOrConfirmOptions;options=maybeConfirmOptions}else{options=confirmationStrategyOrConfirmOptions}const sendOptions=options&&{skipPreflight:options.skipPreflight,preflightCommitment:options.preflightCommitment||options.commitment,minContextSlot:options.minContextSlot};const signature=await connection.sendRawTransaction(rawTransaction,sendOptions);const commitment=options&&options.commitment;const confirmationPromise=confirmationStrategy?connection.confirmTransaction(confirmationStrategy,commitment):connection.confirmTransaction(signature,commitment);const status=(await confirmationPromise).value;if(status.err){throw new Error(`Raw transaction ${signature} failed (${JSON.stringify(status)})`)}return signature}const LAMPORTS_PER_SOL=1e9;exports.Account=Account;exports.AddressLookupTableAccount=AddressLookupTableAccount;exports.AddressLookupTableInstruction=AddressLookupTableInstruction;exports.AddressLookupTableProgram=AddressLookupTableProgram;exports.Authorized=Authorized;exports.BLOCKHASH_CACHE_TIMEOUT_MS=BLOCKHASH_CACHE_TIMEOUT_MS;exports.BPF_LOADER_DEPRECATED_PROGRAM_ID=BPF_LOADER_DEPRECATED_PROGRAM_ID;exports.BPF_LOADER_PROGRAM_ID=BPF_LOADER_PROGRAM_ID;exports.BpfLoader=BpfLoader;exports.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=COMPUTE_BUDGET_INSTRUCTION_LAYOUTS;exports.ComputeBudgetInstruction=ComputeBudgetInstruction;exports.ComputeBudgetProgram=ComputeBudgetProgram;exports.Connection=Connection;exports.Ed25519Program=Ed25519Program;exports.Enum=Enum;exports.EpochSchedule=EpochSchedule;exports.FeeCalculatorLayout=FeeCalculatorLayout;exports.Keypair=Keypair;exports.LAMPORTS_PER_SOL=LAMPORTS_PER_SOL;exports.LOOKUP_TABLE_INSTRUCTION_LAYOUTS=LOOKUP_TABLE_INSTRUCTION_LAYOUTS;exports.Loader=Loader;exports.Lockup=Lockup;exports.MAX_SEED_LENGTH=MAX_SEED_LENGTH;exports.Message=Message;exports.MessageAccountKeys=MessageAccountKeys;exports.MessageV0=MessageV0;exports.NONCE_ACCOUNT_LENGTH=NONCE_ACCOUNT_LENGTH;exports.NonceAccount=NonceAccount;exports.PACKET_DATA_SIZE=PACKET_DATA_SIZE;exports.PUBLIC_KEY_LENGTH=PUBLIC_KEY_LENGTH;exports.PublicKey=PublicKey;exports.SIGNATURE_LENGTH_IN_BYTES=SIGNATURE_LENGTH_IN_BYTES;exports.SOLANA_SCHEMA=SOLANA_SCHEMA;exports.STAKE_CONFIG_ID=STAKE_CONFIG_ID;exports.STAKE_INSTRUCTION_LAYOUTS=STAKE_INSTRUCTION_LAYOUTS;exports.SYSTEM_INSTRUCTION_LAYOUTS=SYSTEM_INSTRUCTION_LAYOUTS;exports.SYSVAR_CLOCK_PUBKEY=SYSVAR_CLOCK_PUBKEY;exports.SYSVAR_EPOCH_SCHEDULE_PUBKEY=SYSVAR_EPOCH_SCHEDULE_PUBKEY;exports.SYSVAR_INSTRUCTIONS_PUBKEY=SYSVAR_INSTRUCTIONS_PUBKEY;exports.SYSVAR_RECENT_BLOCKHASHES_PUBKEY=SYSVAR_RECENT_BLOCKHASHES_PUBKEY;exports.SYSVAR_RENT_PUBKEY=SYSVAR_RENT_PUBKEY;exports.SYSVAR_REWARDS_PUBKEY=SYSVAR_REWARDS_PUBKEY;exports.SYSVAR_SLOT_HASHES_PUBKEY=SYSVAR_SLOT_HASHES_PUBKEY;exports.SYSVAR_SLOT_HISTORY_PUBKEY=SYSVAR_SLOT_HISTORY_PUBKEY;exports.SYSVAR_STAKE_HISTORY_PUBKEY=SYSVAR_STAKE_HISTORY_PUBKEY;exports.Secp256k1Program=Secp256k1Program;exports.SendTransactionError=SendTransactionError;exports.SolanaJSONRPCError=SolanaJSONRPCError;exports.SolanaJSONRPCErrorCode=SolanaJSONRPCErrorCode;exports.StakeAuthorizationLayout=StakeAuthorizationLayout;exports.StakeInstruction=StakeInstruction;exports.StakeProgram=StakeProgram;exports.Struct=Struct;exports.SystemInstruction=SystemInstruction;exports.SystemProgram=SystemProgram;exports.Transaction=Transaction;exports.TransactionExpiredBlockheightExceededError=TransactionExpiredBlockheightExceededError;exports.TransactionExpiredNonceInvalidError=TransactionExpiredNonceInvalidError;exports.TransactionExpiredTimeoutError=TransactionExpiredTimeoutError;exports.TransactionInstruction=TransactionInstruction;exports.TransactionMessage=TransactionMessage;exports.VALIDATOR_INFO_KEY=VALIDATOR_INFO_KEY;exports.VERSION_PREFIX_MASK=VERSION_PREFIX_MASK;exports.VOTE_PROGRAM_ID=VOTE_PROGRAM_ID;exports.ValidatorInfo=ValidatorInfo;exports.VersionedMessage=VersionedMessage;exports.VersionedTransaction=VersionedTransaction;exports.VoteAccount=VoteAccount;exports.VoteAuthorizationLayout=VoteAuthorizationLayout;exports.VoteInit=VoteInit;exports.VoteInstruction=VoteInstruction;exports.VoteProgram=VoteProgram;exports.clusterApiUrl=clusterApiUrl;exports.sendAndConfirmRawTransaction=sendAndConfirmRawTransaction;exports.sendAndConfirmTransaction=sendAndConfirmTransaction},{"@noble/ed25519":26,"@noble/hashes/hmac":31,"@noble/hashes/sha256":32,"@noble/hashes/sha3":33,"@noble/hashes/sha512":34,"@noble/secp256k1":36,"@solana/buffer-layout":43,"bigint-buffer":219,"bn.js":221,borsh:222,bs58:101,buffer:269,"jayson/lib/client/browser":497,"rpc-websockets/dist/lib/client":562,"rpc-websockets/dist/lib/client/websocket.browser":563,superstruct:102}],100:[function(require,module,exports){arguments[4][23][0].apply(exports,arguments)},{dup:23,"safe-buffer":787}],101:[function(require,module,exports){arguments[4][24][0].apply(exports,arguments)},{"base-x":100,dup:24}],102:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StructError=exports.Struct=void 0;exports.any=any;exports.array=array;exports.assert=assert;exports.assign=assign;exports.boolean=boolean;exports.coerce=coerce;exports.create=create;exports.date=date;exports.defaulted=defaulted;exports.define=define;exports.deprecated=deprecated;exports.dynamic=dynamic;exports.empty=empty;exports.enums=enums;exports.func=func;exports.instance=instance;exports.integer=integer;exports.intersection=intersection;exports.is=is;exports.lazy=lazy;exports.literal=literal;exports.map=map;exports.mask=mask;exports.max=max;exports.min=min;exports.never=never;exports.nullable=nullable;exports.number=number;exports.object=object;exports.omit=omit;exports.optional=optional;exports.partial=partial;exports.pattern=pattern;exports.pick=pick;exports.record=record;exports.refine=refine;exports.regexp=regexp;exports.set=set;exports.size=size;exports.string=string;exports.struct=struct;exports.trimmed=trimmed;exports.tuple=tuple;exports.type=type;exports.union=union;exports.unknown=unknown;exports.validate=validate;class StructError extends TypeError{constructor(failure,failures){let cached;const{message,...rest}=failure;const{path}=failure;const msg=path.length===0?message:"At path: "+path.join(".")+" -- "+message;super(msg);Object.assign(this,rest);this.name=this.constructor.name;this.failures=()=>{var _cached;return(_cached=cached)!=null?_cached:cached=[failure,...failures()]}}}exports.StructError=StructError;function isIterable(x){return isObject(x)&&typeof x[Symbol.iterator]==="function"}function isObject(x){return typeof x==="object"&&x!=null}function isPlainObject(x){if(Object.prototype.toString.call(x)!=="[object Object]"){return false}const prototype=Object.getPrototypeOf(x);return prototype===null||prototype===Object.prototype}function print(value){return typeof value==="string"?JSON.stringify(value):""+value}function shiftIterator(input){const{done,value}=input.next();return done?undefined:value}function toFailure(result,context,struct,value){if(result===true){return}else if(result===false){result={}}else if(typeof result==="string"){result={message:result}}const{path,branch}=context;const{type}=struct;const{refinement,message="Expected a value of type `"+type+"`"+(refinement?" with refinement `"+refinement+"`":"")+", but received: `"+print(value)+"`"}=result;return{value:value,type:type,refinement:refinement,key:path[path.length-1],path:path,branch:branch,...result,message:message}}function*toFailures(result,context,struct,value){if(!isIterable(result)){result=[result]}for(const r of result){const failure=toFailure(r,context,struct,value);if(failure){yield failure}}}function*run(value,struct,options={}){const{path=[],branch=[value],coerce=false,mask=false}=options;const ctx={path:path,branch:branch};if(coerce){value=struct.coercer(value,ctx);if(mask&&struct.type!=="type"&&isObject(struct.schema)&&isObject(value)&&!Array.isArray(value)){for(const key in value){if(struct.schema[key]===undefined){delete value[key]}}}}let valid=true;for(const failure of struct.validator(value,ctx)){valid=false;yield[failure,undefined]}for(let[k,v,s]of struct.entries(value,ctx)){const ts=run(v,s,{path:k===undefined?path:[...path,k],branch:k===undefined?branch:[...branch,v],coerce:coerce,mask:mask});for(const t of ts){if(t[0]){valid=false;yield[t[0],undefined]}else if(coerce){v=t[1];if(k===undefined){value=v}else if(value instanceof Map){value.set(k,v)}else if(value instanceof Set){value.add(v)}else if(isObject(value)){value[k]=v}}}}if(valid){for(const failure of struct.refiner(value,ctx)){valid=false;yield[failure,undefined]}}if(valid){yield[undefined,value]}}class Struct{constructor(props){const{type,schema,validator,refiner,coercer=value=>value,entries=function*(){}}=props;this.type=type;this.schema=schema;this.entries=entries;this.coercer=coercer;if(validator){this.validator=(value,context)=>{const result=validator(value,context);return toFailures(result,context,this,value)}}else{this.validator=()=>[]}if(refiner){this.refiner=(value,context)=>{const result=refiner(value,context);return toFailures(result,context,this,value)}}else{this.refiner=()=>[]}}assert(value){return assert(value,this)}create(value){return create(value,this)}is(value){return is(value,this)}mask(value){return mask(value,this)}validate(value,options={}){return validate(value,this,options)}}exports.Struct=Struct;function assert(value,struct){const result=validate(value,struct);if(result[0]){throw result[0]}}function create(value,struct){const result=validate(value,struct,{coerce:true});if(result[0]){throw result[0]}else{return result[1]}}function mask(value,struct){const result=validate(value,struct,{coerce:true,mask:true});if(result[0]){throw result[0]}else{return result[1]}}function is(value,struct){const result=validate(value,struct);return!result[0]}function validate(value,struct,options={}){const tuples=run(value,struct,options);const tuple=shiftIterator(tuples);if(tuple[0]){const error=new StructError(tuple[0],function*(){for(const t of tuples){if(t[0]){yield t[0]}}});return[error,undefined]}else{const v=tuple[1];return[undefined,v]}}function assign(...Structs){const schemas=Structs.map(s=>s.schema);const schema=Object.assign({},...schemas);return object(schema)}function define(name,validator){return new Struct({type:name,schema:null,validator:validator})}function deprecated(struct,log){return new Struct({...struct,refiner:(value,ctx)=>value===undefined||struct.refiner(value,ctx),validator(value,ctx){if(value===undefined){return true}else{log(value,ctx);return struct.validator(value,ctx)}}})}function dynamic(fn){return new Struct({type:"dynamic",schema:null,*entries(value,ctx){const struct=fn(value,ctx);yield*struct.entries(value,ctx)},validator(value,ctx){const struct=fn(value,ctx);return struct.validator(value,ctx)},coercer(value,ctx){const struct=fn(value,ctx);return struct.coercer(value,ctx)}})}function lazy(fn){let struct;return new Struct({type:"lazy",schema:null,*entries(value,ctx){var _struct;(_struct=struct)!=null?_struct:struct=fn();yield*struct.entries(value,ctx)},validator(value,ctx){var _struct2;(_struct2=struct)!=null?_struct2:struct=fn();return struct.validator(value,ctx)},coercer(value,ctx){var _struct3;(_struct3=struct)!=null?_struct3:struct=fn();return struct.coercer(value,ctx)}})}function omit(struct,keys){const{schema}=struct;const subschema={...schema};for(const key of keys){delete subschema[key]}return object(subschema)}function partial(struct){const schema=struct instanceof Struct?{...struct.schema}:{...struct};for(const key in schema){schema[key]=optional(schema[key])}return object(schema)}function pick(struct,keys){const{schema}=struct;const subschema={};for(const key of keys){subschema[key]=schema[key]}return object(subschema)}function struct(name,validator){console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`.");return define(name,validator)}function any(){return define("any",()=>true)}function array(Element){return new Struct({type:"array",schema:Element,*entries(value){if(Element&&Array.isArray(value)){for(const[i,v]of value.entries()){yield[i,v,Element]}}},coercer(value){return Array.isArray(value)?value.slice():value},validator(value){return Array.isArray(value)||"Expected an array value, but received: "+print(value)}})}function boolean(){return define("boolean",value=>{return typeof value==="boolean"})}function date(){return define("date",value=>{return value instanceof Date&&!isNaN(value.getTime())||"Expected a valid `Date` object, but received: "+print(value)})}function enums(values){const schema={};const description=values.map(v=>print(v)).join();for(const key of values){schema[key]=key}return new Struct({type:"enums",schema:schema,validator(value){return values.includes(value)||"Expected one of `"+description+"`, but received: "+print(value)}})}function func(){return define("func",value=>{return typeof value==="function"||"Expected a function, but received: "+print(value)})}function instance(Class){return define("instance",value=>{return value instanceof Class||"Expected a `"+Class.name+"` instance, but received: "+print(value)})}function integer(){return define("integer",value=>{return typeof value==="number"&&!isNaN(value)&&Number.isInteger(value)||"Expected an integer, but received: "+print(value)})}function intersection(Structs){return new Struct({type:"intersection",schema:null,*entries(value,ctx){for(const S of Structs){yield*S.entries(value,ctx)}},*validator(value,ctx){for(const S of Structs){yield*S.validator(value,ctx)}},*refiner(value,ctx){for(const S of Structs){yield*S.refiner(value,ctx)}}})}function literal(constant){const description=print(constant);const t=typeof constant;return new Struct({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?constant:null,validator(value){return value===constant||"Expected the literal `"+description+"`, but received: "+print(value)}})}function map(Key,Value){return new Struct({type:"map",schema:null,*entries(value){if(Key&&Value&&value instanceof Map){for(const[k,v]of value.entries()){yield[k,k,Key];yield[k,v,Value]}}},coercer(value){return value instanceof Map?new Map(value):value},validator(value){return value instanceof Map||"Expected a `Map` object, but received: "+print(value)}})}function never(){return define("never",()=>false)}function nullable(struct){return new Struct({...struct,validator:(value,ctx)=>value===null||struct.validator(value,ctx),refiner:(value,ctx)=>value===null||struct.refiner(value,ctx)})}function number(){return define("number",value=>{return typeof value==="number"&&!isNaN(value)||"Expected a number, but received: "+print(value)})}function object(schema){const knowns=schema?Object.keys(schema):[];const Never=never();return new Struct({type:"object",schema:schema?schema:null,*entries(value){if(schema&&isObject(value)){const unknowns=new Set(Object.keys(value));for(const key of knowns){unknowns.delete(key);yield[key,value[key],schema[key]]}for(const key of unknowns){yield[key,value[key],Never]}}},validator(value){return isObject(value)||"Expected an object, but received: "+print(value)},coercer(value){return isObject(value)?{...value}:value}})}function optional(struct){return new Struct({...struct,validator:(value,ctx)=>value===undefined||struct.validator(value,ctx),refiner:(value,ctx)=>value===undefined||struct.refiner(value,ctx)})}function record(Key,Value){return new Struct({type:"record",schema:null,*entries(value){if(isObject(value)){for(const k in value){const v=value[k];yield[k,k,Key];yield[k,v,Value]}}},validator(value){return isObject(value)||"Expected an object, but received: "+print(value)}})}function regexp(){return define("regexp",value=>{return value instanceof RegExp})}function set(Element){return new Struct({type:"set",schema:null,*entries(value){if(Element&&value instanceof Set){for(const v of value){yield[v,v,Element]}}},coercer(value){return value instanceof Set?new Set(value):value},validator(value){return value instanceof Set||"Expected a `Set` object, but received: "+print(value)}})}function string(){return define("string",value=>{return typeof value==="string"||"Expected a string, but received: "+print(value)})}function tuple(Elements){const Never=never();return new Struct({type:"tuple",schema:null,*entries(value){if(Array.isArray(value)){const length=Math.max(Elements.length,value.length);for(let i=0;i<length;i++){yield[i,value[i],Elements[i]||Never]}}},validator(value){return Array.isArray(value)||"Expected an array, but received: "+print(value)}})}function type(schema){const keys=Object.keys(schema);return new Struct({type:"type",schema:schema,*entries(value){if(isObject(value)){for(const k of keys){yield[k,value[k],schema[k]]}}},validator(value){return isObject(value)||"Expected an object, but received: "+print(value)}})}function union(Structs){const description=Structs.map(s=>s.type).join(" | ");return new Struct({type:"union",schema:null,validator(value,ctx){const failures=[];for(const S of Structs){const[...tuples]=run(value,S,ctx);const[first]=tuples;if(!first[0]){return[]}else{for(const[failure]of tuples){if(failure){failures.push(failure)}}}}return["Expected the value to satisfy a union of `"+description+"`, but received: "+print(value),...failures]}})}function unknown(){return define("unknown",()=>true)}function coerce(struct,condition,coercer){return new Struct({...struct,coercer:(value,ctx)=>{return is(value,condition)?struct.coercer(coercer(value,ctx),ctx):struct.coercer(value,ctx)}})}function defaulted(struct,fallback,options={}){return coerce(struct,unknown(),x=>{const f=typeof fallback==="function"?fallback():fallback;if(x===undefined){return f}if(!options.strict&&isPlainObject(x)&&isPlainObject(f)){const ret={...x};let changed=false;for(const key in f){if(ret[key]===undefined){ret[key]=f[key];changed=true}}if(changed){return ret}}return x})}function trimmed(struct){return coerce(struct,string(),x=>x.trim())}function empty(struct){const expected="Expected an empty "+struct.type;return refine(struct,"empty",value=>{if(value instanceof Map||value instanceof Set){const{size}=value;return size===0||expected+" but received one with a size of `"+size+"`"}else{const{length}=value;return length===0||expected+" but received one with a length of `"+length+"`"}})}function max(struct,threshold,options={}){const{exclusive}=options;return refine(struct,"max",value=>{return exclusive?value<threshold:value<=threshold||"Expected a "+struct.type+" greater than "+(exclusive?"":"or equal to ")+threshold+" but received `"+value+"`"})}function min(struct,threshold,options={}){const{exclusive}=options;return refine(struct,"min",value=>{return exclusive?value>threshold:value>=threshold||"Expected a "+struct.type+" greater than "+(exclusive?"":"or equal to ")+threshold+" but received `"+value+"`"})}function pattern(struct,regexp){return refine(struct,"pattern",value=>{return regexp.test(value)||"Expected a "+struct.type+" matching `/"+regexp.source+'/` but received "'+value+'"'})}function size(struct,min,max=min){const expected="Expected a "+struct.type;const of=min===max?"of `"+min+"`":"between `"+min+"` and `"+max+"`";return refine(struct,"size",value=>{if(typeof value==="number"||value instanceof Date){return min<=value&&value<=max||expected+" "+of+" but received `"+value+"`"}else if(value instanceof Map||value instanceof Set){const{size}=value;return min<=size&&size<=max||expected+" with a size "+of+" but received one with a size of `"+size+"`"}else{const{length}=value;return min<=length&&length<=max||expected+" with a length "+of+" but received one with a length of `"+length+"`"}})}function refine(struct,name,refiner){return new Struct({...struct,*refiner(value,ctx){yield*struct.refiner(value,ctx);const result=refiner(value,ctx);const failures=toFailures(result,ctx,struct,value);for(const failure of failures){yield{...failure,refinement:name}}}})}},{}],103:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});exports.graphql=void 0;const types=__importStar(require("./graphql"));const documents={"\n    query GetAllGroupsByUserId($userId: Int!, $limit: Int, $offset: Int) {\n        groupsPaginatedList_user_id(user_id: $userId, limit: $limit, offset: $offset) {\n            accepted_tos\n            bump\n            group_id\n            parent\n            parent_type\n            public_key\n            shdw\n            status\n            timestamp\n            user_id\n            identities {\n                accepted_tos\n                actions\n                authority\n                bump\n                creation_ts\n                issuer\n                public_key\n                ses\n                storage\n                update_ts\n                user_id\n                verified\n            }\n        }\n    }      \n":types.GetAllGroupsByUserIdDocument,"\n    query GetGroupById($groupId: Int!) {\n        groups(group_id: $groupId) {\n            accepted_tos\n            bump\n            group_id\n            parent\n            parent_type\n            public_key\n            shdw\n            status\n            timestamp\n            user_id\n            identities {\n                accepted_tos\n                actions\n                authority\n                bump\n                creation_ts\n                issuer\n                public_key\n                ses\n                storage\n                update_ts\n                user_id\n                verified\n            }\n        }\n    }      \n":types.GetGroupByIdDocument,"\n    query GetAllPostBySearch($appId: Int!, $typeOfWork: String, $latitude: Float, $longitude: Float, $maxDistance: Int, $minHours: Int, $maxHours: Int, $jobTitle: String, $test: Boolean, $limit: Int, $offset: Int) {\n        postsPaginatedList_app_id_search_v3(appId: $appId, type_of_work: $typeOfWork, latitude: $latitude, longitude: $longitude, max_distance: $maxDistance, min_hours: $minHours, max_hours: $maxHours, job_title: $jobTitle, test: $test, limit: $limit, offset: $offset) {\n            user_id\n            timestamp\n            status\n            shdw\n            public_key\n            parent_type\n            parent\n            like\n            bump\n            identity {\n                accepted_tos\n                actions\n                authority\n                bump\n                creation_ts\n                issuer\n                public_key\n                ses\n                storage\n                update_ts\n                user_id\n                verified\n            }\n            group {\n                accepted_tos\n                bump\n                group_id\n                parent\n                parent_type\n                public_key\n                shdw\n                status\n                timestamp\n                user_id\n                identities {\n                    accepted_tos\n                    actions\n                    authority\n                    bump\n                    creation_ts\n                    issuer\n                    public_key\n                    ses\n                    storage\n                    update_ts\n                    user_id\n                    verified\n                }\n            }\n        }\n    }      \n":types.GetAllPostBySearchDocument,"\n    query GetAllPostByParent($parentType: Int!, $parent: Int!, $limit: Int, $offset: Int) {\n        postsPaginatedList_parent(parent_type: $parentType, parent: $parent, limit: $limit, offset: $offset) {\n            user_id\n            timestamp\n            status\n            shdw\n            public_key\n            parent_type\n            parent\n            like\n            bump\n            identities {\n                accepted_tos\n                actions\n                authority\n                bump\n                creation_ts\n                issuer\n                public_key\n                ses\n                storage\n                update_ts\n                user_id\n                verified\n            }\n        }\n    }      \n":types.GetAllPostByParentDocument,"\n    query GetPostByPublicKey($publicKey: String!) {\n        posts(public_key: $publicKey) {\n            user_id\n            timestamp\n            status\n            shdw\n            public_key\n            parent_type\n            parent\n            like\n            bump\n            identities {\n                accepted_tos\n                actions\n                authority\n                bump\n                creation_ts\n                issuer\n                public_key\n                ses\n                storage\n                update_ts\n                user_id\n                verified\n            }\n        }\n    }      \n":types.GetPostByPublicKeyDocument,"\n    query GetProfileByUserId($userId: Int!, $appId: Int) {\n        getProfiles(user_id: $userId, app_id: $appId) {\n            user_id\n            timestamp\n            status\n            shdw\n            role\n            public_key\n            bump\n            app_id\n            accepted_tos\n            identities {\n                accepted_tos\n                actions\n                authority\n                bump\n                creation_ts\n                issuer\n                public_key\n                ses\n                storage\n                update_ts\n                user_id\n                verified\n            }\n        }\n    }      \n":types.GetProfileByUserIdDocument,"\n    query GetProfileByPublicKey($publicKey: String!) {\n        profiles(public_key: $publicKey) {\n            user_id\n            timestamp\n            status\n            shdw\n            role\n            public_key\n            bump\n            app_id\n            accepted_tos\n            identities {\n                accepted_tos\n                actions\n                authority\n                bump\n                creation_ts\n                issuer\n                public_key\n                ses\n                storage\n                update_ts\n                user_id\n                verified\n            }\n        }\n    }      \n":types.GetProfileByPublicKeyDocument};function graphql(source){return documents[source]??{}}exports.graphql=graphql},{"./graphql":104}],104:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GetProfileByPublicKeyDocument=exports.GetProfileByUserIdDocument=exports.GetPostByPublicKeyDocument=exports.GetAllPostByParentDocument=exports.GetAllPostBySearchDocument=exports.GetGroupByIdDocument=exports.GetAllGroupsByUserIdDocument=void 0;exports.GetAllGroupsByUserIdDocument={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAllGroupsByUserId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"groupsPaginatedList_user_id"},arguments:[{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accepted_tos"}},{kind:"Field",name:{kind:"Name",value:"bump"}},{kind:"Field",name:{kind:"Name",value:"group_id"}},{kind:"Field",name:{kind:"Name",value:"parent"}},{kind:"Field",name:{kind:"Name",value:"parent_type"}},{kind:"Field",name:{kind:"Name",value:"public_key"}},{kind:"Field",name:{kind:"Name",value:"shdw"}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"timestamp"}},{kind:"Field",name:{kind:"Name",value:"user_id"}},{kind:"Field",name:{kind:"Name",value:"identities"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accepted_tos"}},{kind:"Field",name:{kind:"Name",value:"actions"}},{kind:"Field",name:{kind:"Name",value:"authority"}},{kind:"Field",name:{kind:"Name",value:"bump"}},{kind:"Field",name:{kind:"Name",value:"creation_ts"}},{kind:"Field",name:{kind:"Name",value:"issuer"}},{kind:"Field",name:{kind:"Name",value:"public_key"}},{kind:"Field",name:{kind:"Name",value:"ses"}},{kind:"Field",name:{kind:"Name",value:"storage"}},{kind:"Field",name:{kind:"Name",value:"update_ts"}},{kind:"Field",name:{kind:"Name",value:"user_id"}},{kind:"Field",name:{kind:"Name",value:"verified"}}]}}]}}]}}]};exports.GetGroupByIdDocument={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetGroupById"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"groupId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"groups"},arguments:[{kind:"Argument",name:{kind:"Name",value:"group_id"},value:{kind:"Variable",name:{kind:"Name",value:"groupId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accepted_tos"}},{kind:"Field",name:{kind:"Name",value:"bump"}},{kind:"Field",name:{kind:"Name",value:"group_id"}},{kind:"Field",name:{kind:"Name",value:"parent"}},{kind:"Field",name:{kind:"Name",value:"parent_type"}},{kind:"Field",name:{kind:"Name",value:"public_key"}},{kind:"Field",name:{kind:"Name",value:"shdw"}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"timestamp"}},{kind:"Field",name:{kind:"Name",value:"user_id"}},{kind:"Field",name:{kind:"Name",value:"identities"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accepted_tos"}},{kind:"Field",name:{kind:"Name",value:"actions"}},{kind:"Field",name:{kind:"Name",value:"authority"}},{kind:"Field",name:{kind:"Name",value:"bump"}},{kind:"Field",name:{kind:"Name",value:"creation_ts"}},{kind:"Field",name:{kind:"Name",value:"issuer"}},{kind:"Field",name:{kind:"Name",value:"public_key"}},{kind:"Field",name:{kind:"Name",value:"ses"}},{kind:"Field",name:{kind:"Name",value:"storage"}},{kind:"Field",name:{kind:"Name",value:"update_ts"}},{kind:"Field",name:{kind:"Name",value:"user_id"}},{kind:"Field",name:{kind:"Name",value:"verified"}}]}}]}}]}}]};exports.GetAllPostBySearchDocument={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAllPostBySearch"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"appId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"typeOfWork"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"latitude"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"longitude"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"maxDistance"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"minHours"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"maxHours"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"jobTitle"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"test"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postsPaginatedList_app_id_search_v3"},arguments:[{kind:"Argument",name:{kind:"Name",value:"appId"},value:{kind:"Variable",name:{kind:"Name",value:"appId"}}},{kind:"Argument",name:{kind:"Name",value:"type_of_work"},value:{kind:"Variable",name:{kind:"Name",value:"typeOfWork"}}},{kind:"Argument",name:{kind:"Name",value:"latitude"},value:{kind:"Variable",name:{kind:"Name",value:"latitude"}}},{kind:"Argument",name:{kind:"Name",value:"longitude"},value:{kind:"Variable",name:{kind:"Name",value:"longitude"}}},{kind:"Argument",name:{kind:"Name",value:"max_distance"},value:{kind:"Variable",name:{kind:"Name",value:"maxDistance"}}},{kind:"Argument",name:{kind:"Name",value:"min_hours"},value:{kind:"Variable",name:{kind:"Name",value:"minHours"}}},{kind:"Argument",name:{kind:"Name",value:"max_hours"},value:{kind:"Variable",name:{kind:"Name",value:"maxHours"}}},{kind:"Argument",name:{kind:"Name",value:"job_title"},value:{kind:"Variable",name:{kind:"Name",value:"jobTitle"}}},{kind:"Argument",name:{kind:"Name",value:"test"},value:{kind:"Variable",name:{kind:"Name",value:"test"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user_id"}},{kind:"Field",name:{kind:"Name",value:"timestamp"}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"shdw"}},{kind:"Field",name:{kind:"Name",value:"public_key"}},{kind:"Field",name:{kind:"Name",value:"parent_type"}},{kind:"Field",name:{kind:"Name",value:"parent"}},{kind:"Field",name:{kind:"Name",value:"like"}},{kind:"Field",name:{kind:"Name",value:"bump"}},{kind:"Field",name:{kind:"Name",value:"identity"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accepted_tos"}},{kind:"Field",name:{kind:"Name",value:"actions"}},{kind:"Field",name:{kind:"Name",value:"authority"}},{kind:"Field",name:{kind:"Name",value:"bump"}},{kind:"Field",name:{kind:"Name",value:"creation_ts"}},{kind:"Field",name:{kind:"Name",value:"issuer"}},{kind:"Field",name:{kind:"Name",value:"public_key"}},{kind:"Field",name:{kind:"Name",value:"ses"}},{kind:"Field",name:{kind:"Name",value:"storage"}},{kind:"Field",name:{kind:"Name",value:"update_ts"}},{kind:"Field",name:{kind:"Name",value:"user_id"}},{kind:"Field",name:{kind:"Name",value:"verified"}}]}},{kind:"Field",name:{kind:"Name",value:"group"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accepted_tos"}},{kind:"Field",name:{kind:"Name",value:"bump"}},{kind:"Field",name:{kind:"Name",value:"group_id"}},{kind:"Field",name:{kind:"Name",value:"parent"}},{kind:"Field",name:{kind:"Name",value:"parent_type"}},{kind:"Field",name:{kind:"Name",value:"public_key"}},{kind:"Field",name:{kind:"Name",value:"shdw"}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"timestamp"}},{kind:"Field",name:{kind:"Name",value:"user_id"}},{kind:"Field",name:{kind:"Name",value:"identities"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accepted_tos"}},{kind:"Field",name:{kind:"Name",value:"actions"}},{kind:"Field",name:{kind:"Name",value:"authority"}},{kind:"Field",name:{kind:"Name",value:"bump"}},{kind:"Field",name:{kind:"Name",value:"creation_ts"}},{kind:"Field",name:{kind:"Name",value:"issuer"}},{kind:"Field",name:{kind:"Name",value:"public_key"}},{kind:"Field",name:{kind:"Name",value:"ses"}},{kind:"Field",name:{kind:"Name",value:"storage"}},{kind:"Field",name:{kind:"Name",value:"update_ts"}},{kind:"Field",name:{kind:"Name",value:"user_id"}},{kind:"Field",name:{kind:"Name",value:"verified"}}]}}]}}]}}]}}]};exports.GetAllPostByParentDocument={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAllPostByParent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"parentType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"parent"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postsPaginatedList_parent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"parent_type"},value:{kind:"Variable",name:{kind:"Name",value:"parentType"}}},{kind:"Argument",name:{kind:"Name",value:"parent"},value:{kind:"Variable",name:{kind:"Name",value:"parent"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user_id"}},{kind:"Field",name:{kind:"Name",value:"timestamp"}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"shdw"}},{kind:"Field",name:{kind:"Name",value:"public_key"}},{kind:"Field",name:{kind:"Name",value:"parent_type"}},{kind:"Field",name:{kind:"Name",value:"parent"}},{kind:"Field",name:{kind:"Name",value:"like"}},{kind:"Field",name:{kind:"Name",value:"bump"}},{kind:"Field",name:{kind:"Name",value:"identities"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accepted_tos"}},{kind:"Field",name:{kind:"Name",value:"actions"}},{kind:"Field",name:{kind:"Name",value:"authority"}},{kind:"Field",name:{kind:"Name",value:"bump"}},{kind:"Field",name:{kind:"Name",value:"creation_ts"}},{kind:"Field",name:{kind:"Name",value:"issuer"}},{kind:"Field",name:{kind:"Name",value:"public_key"}},{kind:"Field",name:{kind:"Name",value:"ses"}},{kind:"Field",name:{kind:"Name",value:"storage"}},{kind:"Field",name:{kind:"Name",value:"update_ts"}},{kind:"Field",name:{kind:"Name",value:"user_id"}},{kind:"Field",name:{kind:"Name",value:"verified"}}]}}]}}]}}]};exports.GetPostByPublicKeyDocument={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetPostByPublicKey"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"publicKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"posts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"public_key"},value:{kind:"Variable",name:{kind:"Name",value:"publicKey"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user_id"}},{kind:"Field",name:{kind:"Name",value:"timestamp"}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"shdw"}},{kind:"Field",name:{kind:"Name",value:"public_key"}},{kind:"Field",name:{kind:"Name",value:"parent_type"}},{kind:"Field",name:{kind:"Name",value:"parent"}},{kind:"Field",name:{kind:"Name",value:"like"}},{kind:"Field",name:{kind:"Name",value:"bump"}},{kind:"Field",name:{kind:"Name",value:"identities"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accepted_tos"}},{kind:"Field",name:{kind:"Name",value:"actions"}},{kind:"Field",name:{kind:"Name",value:"authority"}},{kind:"Field",name:{kind:"Name",value:"bump"}},{kind:"Field",name:{kind:"Name",value:"creation_ts"}},{kind:"Field",name:{kind:"Name",value:"issuer"}},{kind:"Field",name:{kind:"Name",value:"public_key"}},{kind:"Field",name:{kind:"Name",value:"ses"}},{kind:"Field",name:{kind:"Name",value:"storage"}},{kind:"Field",name:{kind:"Name",value:"update_ts"}},{kind:"Field",name:{kind:"Name",value:"user_id"}},{kind:"Field",name:{kind:"Name",value:"verified"}}]}}]}}]}}]};exports.GetProfileByUserIdDocument={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetProfileByUserId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"appId"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getProfiles"},arguments:[{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"Argument",name:{kind:"Name",value:"app_id"},value:{kind:"Variable",name:{kind:"Name",value:"appId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user_id"}},{kind:"Field",name:{kind:"Name",value:"timestamp"}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"shdw"}},{kind:"Field",name:{kind:"Name",value:"role"}},{kind:"Field",name:{kind:"Name",value:"public_key"}},{kind:"Field",name:{kind:"Name",value:"bump"}},{kind:"Field",name:{kind:"Name",value:"app_id"}},{kind:"Field",name:{kind:"Name",value:"accepted_tos"}},{kind:"Field",name:{kind:"Name",value:"identities"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accepted_tos"}},{kind:"Field",name:{kind:"Name",value:"actions"}},{kind:"Field",name:{kind:"Name",value:"authority"}},{kind:"Field",name:{kind:"Name",value:"bump"}},{kind:"Field",name:{kind:"Name",value:"creation_ts"}},{kind:"Field",name:{kind:"Name",value:"issuer"}},{kind:"Field",name:{kind:"Name",value:"public_key"}},{kind:"Field",name:{kind:"Name",value:"ses"}},{kind:"Field",name:{kind:"Name",value:"storage"}},{kind:"Field",name:{kind:"Name",value:"update_ts"}},{kind:"Field",name:{kind:"Name",value:"user_id"}},{kind:"Field",name:{kind:"Name",value:"verified"}}]}}]}}]}}]};exports.GetProfileByPublicKeyDocument={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetProfileByPublicKey"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"publicKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profiles"},arguments:[{kind:"Argument",name:{kind:"Name",value:"public_key"},value:{kind:"Variable",name:{kind:"Name",value:"publicKey"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user_id"}},{kind:"Field",name:{kind:"Name",value:"timestamp"}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"shdw"}},{kind:"Field",name:{kind:"Name",value:"role"}},{kind:"Field",name:{kind:"Name",value:"public_key"}},{kind:"Field",name:{kind:"Name",value:"bump"}},{kind:"Field",name:{kind:"Name",value:"app_id"}},{kind:"Field",name:{kind:"Name",value:"accepted_tos"}},{kind:"Field",name:{kind:"Name",value:"identities"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accepted_tos"}},{kind:"Field",name:{kind:"Name",value:"actions"}},{kind:"Field",name:{kind:"Name",value:"authority"}},{kind:"Field",name:{kind:"Name",value:"bump"}},{kind:"Field",name:{kind:"Name",value:"creation_ts"}},{kind:"Field",name:{kind:"Name",value:"issuer"}},{kind:"Field",name:{kind:"Name",value:"public_key"}},{kind:"Field",name:{kind:"Name",value:"ses"}},{kind:"Field",name:{kind:"Name",value:"storage"}},{kind:"Field",name:{kind:"Name",value:"update_ts"}},{kind:"Field",name:{kind:"Name",value:"user_id"}},{kind:"Field",name:{kind:"Name",value:"verified"}}]}}]}}]}}]}},{}],105:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.InvalidAvatarType=exports.InvalidBannerType=exports.GroupNotFoundError=exports.PostNotFoundError=exports.AppNotFoundError=exports.ProfileNotFoundError=exports.IdentityNotSelectedError=exports.IdentityNotFoundError=exports.IssuerNotFoundError=exports.ParentType=exports.SplingProtocol=void 0;const anchor_1=require("@coral-xyz/anchor");const react_native_shadow_drive_1=require("react-native-shadow-drive");const bytes_1=require("@coral-xyz/anchor/dist/cjs/utils/bytes");const tweetnacl_1=__importDefault(require("tweetnacl"));const methods_1=require("./methods");const types_1=require("./types");Object.defineProperty(exports,"ParentType",{enumerable:true,get:function(){return types_1.ParentType}});const helpers_1=require("./utils/helpers");const errors_1=require("./utils/errors");Object.defineProperty(exports,"IssuerNotFoundError",{enumerable:true,get:function(){return errors_1.IssuerNotFoundError}});Object.defineProperty(exports,"IdentityNotFoundError",{enumerable:true,get:function(){return errors_1.IdentityNotFoundError}});Object.defineProperty(exports,"IdentityNotSelectedError",{enumerable:true,get:function(){return errors_1.IdentityNotSelectedError}});Object.defineProperty(exports,"ProfileNotFoundError",{enumerable:true,get:function(){return errors_1.ProfileNotFoundError}});Object.defineProperty(exports,"AppNotFoundError",{enumerable:true,get:function(){return errors_1.AppNotFoundError}});Object.defineProperty(exports,"PostNotFoundError",{enumerable:true,get:function(){return errors_1.PostNotFoundError}});Object.defineProperty(exports,"GroupNotFoundError",{enumerable:true,get:function(){return errors_1.GroupNotFoundError}});Object.defineProperty(exports,"InvalidBannerType",{enumerable:true,get:function(){return errors_1.InvalidBannerType}});Object.defineProperty(exports,"InvalidAvatarType",{enumerable:true,get:function(){return errors_1.InvalidAvatarType}});const AnchorWallet_1=require("./utils/AnchorWallet");const index_1=require("graphql-request/build/cjs/index");const constants_1=require("./utils/constants");class SplingProtocol{constructor(sessionWallet,storageWallet,options){this.graphQLClient=null;this.createIssuer=methods_1.createIssuer;this.updateIssuer=methods_1.updateIssuer;this.getIssuer=methods_1.getIssuer;this.createIdentity=methods_1.createIdentity;this.updateIdentity=methods_1.updateIdentity;this.getIdentityByUserId=methods_1.getIdentityByUserId;this.getIdentityByPublicKey=methods_1.getIdentityByPublicKey;this.getIdentityBySession=methods_1.getIdentityBySession;this.createProfile=methods_1.createProfile;this.updateProfile=methods_1.updateProfile;this.deleteProfile=methods_1.deleteProfile;this.getProfile=methods_1.getProfile;this.getProfileByUserId=methods_1.getProfileByUserId;this.createApp=methods_1.createApp;this.updateApp=methods_1.updateApp;this.getApp=methods_1.getApp;this.getAllAppsByUserId=methods_1.getAllAppsByUserId;this.getAppById=methods_1.getAppById;this.createPost=methods_1.createPost;this.updatePost=methods_1.updatePost;this.deletePost=methods_1.deletePost;this.getPostByPublicKey=methods_1.getPostByPublicKey;this.getAllPostsByParent=methods_1.getAllPostsByParent;this.getAllPostsByAppId=methods_1.getAllPostsByAppId;this.createGroup=methods_1.createGroup;this.updateGroup=methods_1.updateGroup;this.getGroupById=methods_1.getGroupById;this.getGroupsByUserId=methods_1.getGroupsByUserId;if(options.useIndexer===true){this.graphQLClient=new index_1.GraphQLClient(constants_1.INDEXER_GRAPH_QL_ENDPOINT,{headers:{Authorization:constants_1.INDEXER_GRAPH_QL_AUTH_KEY}})}this.connection=new anchor_1.web3.Connection(options.rpcUrl?options.rpcUrl:"https://api.mainnet-beta.solana.com/","processed");this.sessionWallet=new AnchorWallet_1.AnchorWallet(sessionWallet);this.storageWallet=new AnchorWallet_1.AnchorWallet(storageWallet);this.anchorProgram=(0,helpers_1.createSplingProtocolProgram)(this.connection,this.sessionWallet);this.identity=null}async init(fake){if(!this.sessionWallet&&!this.storageWallet)return;if(fake)return this;this.shadowDrive=await new react_native_shadow_drive_1.ShdwDrive(this.connection,this.storageWallet).init();let storageAccountResponses=await this.shadowDrive.getStorageAccounts("v2");if(storageAccountResponses.length<=0)throw new Error("No storage account exist!");storageAccountResponses=storageAccountResponses.sort((x,y)=>x.account.creationTime-y.account.creationTime);const storageAccount=storageAccountResponses[0];this.storageAccount=storageAccount.publicKey;this.storageAccountIndex=storageAccount.account.accountCounterSeed;return this}getConnection(){return this.connection}selectIdentity(identity){this.identity=identity}signRequest(appId,request){if(this.identity===null)throw new errors_1.IdentityNotSelectedError;const msg=Buffer.from(`Spling Protocol Signed Message:\nUserId: ${this.identity.userId}\nAppId: ${appId}\nRequest: ${request}`);const msgSig=tweetnacl_1.default.sign.detached(msg,this.sessionWallet.payer.secretKey);return bytes_1.bs58.encode(msgSig)}}exports.SplingProtocol=SplingProtocol}).call(this)}).call(this,require("buffer").Buffer)},{"./methods":122,"./types":146,"./utils/AnchorWallet":147,"./utils/constants":148,"./utils/errors":160,"./utils/helpers":164,"@coral-xyz/anchor":16,"@coral-xyz/anchor/dist/cjs/utils/bytes":20,buffer:269,"graphql-request/build/cjs/index":326,"react-native-shadow-drive":529,tweetnacl:815}],106:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});const helpers_1=require("../../utils/helpers");const anchor=__importStar(require("@coral-xyz/anchor"));const anchor_1=require("@coral-xyz/anchor");const constants_1=require("../../utils/constants");const models_1=require("../../models");const dayjs_1=__importDefault(require("dayjs"));const errors_1=require("../../utils/errors");async function createApp(acceptTos,action,name,description=null,metadata=null){try{if(this.identity===null)throw new errors_1.IdentityNotSelectedError;const metadataObject=metadata?JSON.parse(JSON.stringify(metadata)):null;if(typeof metadataObject!=="object")throw new Error("Invalid JSON object");const timestamp=(0,dayjs_1.default)().unix().toString();const hash=(0,helpers_1.getPublicKeyFromSeed)(`${timestamp}-${this.identity.userId.toString()}`);const[ControllerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("controller")],constants_1.programId);const[AppPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("app"),hash.toBuffer()],constants_1.programId);const filesToUpload=[];let descriptionTextFile;if(description!==null){if(!constants_1.isBrowser){const RNFS=require("react-native-fs");const descriptionTextPath=`${RNFS.DocumentDirectoryPath}/${AppPDA.toString()}.txt`;await RNFS.writeFile(descriptionTextPath,description,"utf8");const statResult=await RNFS.stat(descriptionTextPath);const file=await RNFS.readFile(descriptionTextPath,"utf8");descriptionTextFile={uri:`file://${descriptionTextPath}`,type:"text/plain",file:Buffer.from(file,"utf8"),name:`${AppPDA.toString()}.txt`,size:statResult.size};filesToUpload.push(descriptionTextFile)}else{descriptionTextFile=new File([new Blob([description],{type:"text/plain"})],`${AppPDA.toString()}.txt`);filesToUpload.push(descriptionTextFile)}}const appProfileJson={timestamp:timestamp,name:name,description:description?`${AppPDA.toString()}.txt`:null,metadata:metadataObject};if(!constants_1.isBrowser){const RNFS=require("react-native-fs");const appJSONPath=`${RNFS.DocumentDirectoryPath}/${AppPDA.toString()}.json`;await RNFS.writeFile(appJSONPath,JSON.stringify(appProfileJson),"utf8");const statResult=await RNFS.stat(appJSONPath);const file=await RNFS.readFile(appJSONPath,"utf8");filesToUpload.push({uri:`file://${appJSONPath}`,type:"application/json",file:Buffer.from(file,"utf8"),name:`${AppPDA.toString()}.json`,size:statResult.size})}else{const fileToSave=new Blob([JSON.stringify(appProfileJson)],{type:"application/json"});filesToUpload.push(new File([fileToSave],`${AppPDA.toString()}.json`))}await this.shadowDrive.uploadFiles(this.storageAccount,!constants_1.isBrowser?filesToUpload:filesToUpload);if(!constants_1.isBrowser){const RNFS=require("react-native-fs");RNFS.unlink(`${RNFS.DocumentDirectoryPath}/${AppPDA.toString()}.json`);if(descriptionTextFile!=null){RNFS.unlink(`${RNFS.DocumentDirectoryPath}/${AppPDA.toString()}.txt`)}}await this.anchorProgram.methods.createApp(this.identity.userId.toString(),hash,this.storageAccountIndex,Number(acceptTos),action).accounts({authority:this.sessionWallet.publicKey,controller:ControllerPDA,identity:this.identity.publicKey,app:AppPDA}).rpc();let onChainApp=null;while(onChainApp==null){try{onChainApp=await this.anchorProgram.account.app.fetch(AppPDA)}catch(error){}}const appChain=new models_1.AppChain(AppPDA,onChainApp);return Promise.resolve({publicKey:appChain.publicKey,timestamp:appChain.timestamp,userId:appChain.userId,appId:appChain.appId,shdw:appChain.shdw,status:appChain.status,acceptedTOS:appChain.acceptedTOS,name:name,description:description?description:null,metadata:metadataObject})}catch(error){return Promise.reject(error)}}exports.default=createApp}).call(this)}).call(this,require("buffer").Buffer)},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"../../utils/helpers":164,"@coral-xyz/anchor":16,buffer:269,dayjs:284,"react-native-fs":undefined}],107:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const constants_1=require("../../utils/constants");const models_1=require("../../models");const helpers_1=require("./helpers");const helpers_2=require("../../utils/helpers");const errors_1=require("../../utils/errors");const bytes_1=require("@coral-xyz/anchor/dist/cjs/utils/bytes");async function getAllAppsByUserId(userId){try{const apps=[];const onChainApps=await this.anchorProgram.account.app.all([{memcmp:{offset:8+4,bytes:bytes_1.bs58.encode(Uint8Array.from([userId]))}}]);const onChainIdentities=await this.anchorProgram.account.identitiy.all([{memcmp:{offset:8+4+4+4+1+32,bytes:bytes_1.bs58.encode(Uint8Array.from([userId]))}}]);if(onChainIdentities.length===0)throw new errors_1.IdentityNotFoundError;const identity=onChainIdentities[0];const identityChain=new models_1.IdentityChain(identity.publicKey,identity.account);for(const app of onChainApps){try{const appChain=new models_1.AppChain(app.publicKey,app.account);const storageAccount=(0,helpers_2.findStorageAccountPK)(identityChain.storage,appChain.shdw);const appFileData=await(0,helpers_1.getAppFileData)(storageAccount,appChain.publicKey);if(appFileData.description!=null){appFileData.description=await(0,helpers_2.getTextFromFile)(`${constants_1.shadowDriveDomain}${storageAccount.toString()}/${appFileData.description}`)}apps.push({publicKey:appChain.publicKey,timestamp:appChain.timestamp,userId:appChain.userId,appId:appChain.appId,shdw:appChain.shdw,status:appChain.status,acceptedTOS:appChain.acceptedTOS,name:appFileData.name,description:appFileData.description?appFileData.description:null,metadata:appFileData.metadata})}catch(error){}}return Promise.resolve(apps)}catch(error){Promise.reject(error)}}exports.default=getAllAppsByUserId},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"../../utils/helpers":164,"./helpers":110,"@coral-xyz/anchor/dist/cjs/utils/bytes":20}],108:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const constants_1=require("../../utils/constants");const models_1=require("../../models");const errors_1=require("../../utils/errors");const helpers_1=require("../../utils/helpers");const bytes_1=require("@coral-xyz/anchor/dist/cjs/utils/bytes");const helpers_2=require("./helpers");async function getAppById(appId){try{const onChainApps=await this.anchorProgram.account.app.all([{memcmp:{offset:8+4+4,bytes:bytes_1.bs58.encode(Uint8Array.from([appId]))}}]);if(onChainApps.length===0)throw new errors_1.AppNotFoundError;const app=onChainApps[0];const appChain=new models_1.AppChain(app.publicKey,app.account);const onChainIdentities=await this.anchorProgram.account.identity.all([{memcmp:{offset:8+4+4+4+1+32+32,bytes:bytes_1.bs58.encode(Uint8Array.from([appChain.userId]))}}]);if(onChainIdentities.length===0)throw new errors_1.IdentityNotFoundError;const identity=onChainIdentities[0];const identityChain=new models_1.IdentityChain(identity.publicKey,identity.account);const storageAccount=(0,helpers_1.findStorageAccountPK)(identityChain.storage,appChain.shdw);const appJson=await(0,helpers_2.getAppFileData)(storageAccount,appChain.publicKey);if(appJson.description!=null){appJson.description=await(0,helpers_1.getTextFromFile)(`${constants_1.shadowDriveDomain}${storageAccount.toString()}/${appJson.description}`)}return Promise.resolve({publicKey:appChain.publicKey,timestamp:appChain.timestamp,userId:appChain.userId,appId:appChain.appId,shdw:appChain.shdw,status:appChain.status,acceptedTOS:appChain.acceptedTOS,name:appJson.name,description:appJson.description?appJson.description:null,metadata:appJson.metadata})}catch(error){if(error.message.includes("Account does not exist")||error instanceof errors_1.AppNotFoundError||error instanceof errors_1.IdentityNotFoundError)return Promise.resolve(null);else return Promise.reject(error)}}exports.default=getAppById},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"../../utils/helpers":164,"./helpers":110,"@coral-xyz/anchor/dist/cjs/utils/bytes":20}],109:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const constants_1=require("../../utils/constants");const models_1=require("../../models");const errors_1=require("../../utils/errors");const helpers_1=require("../../utils/helpers");const bytes_1=require("@coral-xyz/anchor/dist/cjs/utils/bytes");const helpers_2=require("./helpers");async function getApp(publicKey){try{const onChainApp=await this.anchorProgram.account.app.fetch(publicKey);const appChain=new models_1.AppChain(publicKey,onChainApp);const onChainIdentities=await this.anchorProgram.account.identity.all([{memcmp:{offset:8+4+4+4+1+32+32,bytes:bytes_1.bs58.encode(Uint8Array.from([appChain.userId]))}}]);if(onChainIdentities.length===0)throw new errors_1.IdentityNotFoundError;const identity=onChainIdentities[0];const identityChain=new models_1.IdentityChain(identity.publicKey,identity.account);const storageAccount=(0,helpers_1.findStorageAccountPK)(identityChain.storage,appChain.shdw);const appJson=await(0,helpers_2.getAppFileData)(storageAccount,publicKey);if(appJson.description!=null){appJson.description=await(0,helpers_1.getTextFromFile)(`${constants_1.shadowDriveDomain}${storageAccount.toString()}/${appJson.description}`)}return Promise.resolve({publicKey:appChain.publicKey,timestamp:appChain.timestamp,userId:appChain.userId,appId:appChain.appId,shdw:appChain.shdw,status:appChain.status,acceptedTOS:appChain.acceptedTOS,name:appJson.name,description:appJson.description?appJson.description:null,metadata:appJson.metadata})}catch(error){if(error.message.includes("Account does not exist")||error instanceof errors_1.AppNotFoundError||error instanceof errors_1.IdentityNotFoundError)return Promise.resolve(null);else return Promise.reject(error)}}exports.default=getApp},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"../../utils/helpers":164,"./helpers":110,"@coral-xyz/anchor/dist/cjs/utils/bytes":20}],110:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.getAppFileData=void 0;const constants_1=require("../../utils/constants");const errors_1=require("../../utils/errors");const axios_1=__importDefault(require("axios"));async function getAppFileData(shdw,appPublicKey){try{const response=await axios_1.default.get(`${constants_1.shadowDriveDomain}${shdw.toString()}/${appPublicKey.toString()}.json?timestamp=${(new Date).getTime()}`);if(response.status!==200)throw new errors_1.AppNotFoundError;return Promise.resolve(response.data)}catch{return Promise.reject(new errors_1.AppNotFoundError)}}exports.getAppFileData=getAppFileData},{"../../utils/constants":148,"../../utils/errors":160,axios:186}],111:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@coral-xyz/anchor"));const anchor_1=require("@coral-xyz/anchor");const models_1=require("../../models");const constants_1=require("../../utils/constants");const errors_1=require("../../utils/errors");const helpers_1=require("./helpers");const helpers_2=require("../../utils/helpers");async function updateApp(publicKey,acceptTos,action,name=null,description=null,metadata=null){try{if(this.identity===null)throw new errors_1.IdentityNotSelectedError;const metadataObject=metadata?JSON.parse(JSON.stringify(metadata)):null;if(typeof metadataObject!=="object")throw new Error("Invalid JSON object");const onChainApp=await this.anchorProgram.account.app.fetch(publicKey);const appChain=new models_1.AppChain(publicKey,onChainApp);const storageAccount=(0,helpers_2.findStorageAccountPK)(this.identity.storage,appChain.shdw);const appJson=await(0,helpers_1.getAppFileData)(storageAccount,publicKey);if(name!==null){appJson.name=name}if(description!==null){appJson.description=description}if(metadata!==null){appJson.metadata=metadataObject}let appFile;if(!constants_1.isBrowser){const RNFS=require("react-native-fs");const profileJSONPath=`${RNFS.DocumentDirectoryPath}/${appChain.publicKey.toString()}.json`;await RNFS.writeFile(profileJSONPath,JSON.stringify(appJson),"utf8");const statResult=await RNFS.stat(profileJSONPath);const file=await RNFS.readFile(profileJSONPath,"utf8");appFile={uri:`file://${profileJSONPath}`,type:"application/json",file:Buffer.from(file,"utf8"),name:`${appChain.publicKey.toString()}.json`,size:statResult.size}}else{const fileToSave=new Blob([JSON.stringify(appJson)],{type:"application/json"});appFile=new File([fileToSave],`${appChain.publicKey.toString()}.json`)}await this.shadowDrive.editFile(this.storageAccount,`${constants_1.shadowDriveDomain}${storageAccount.toString()}/${appChain.publicKey.toString()}.json`,!constants_1.isBrowser?appFile:appFile,"v2");if(appFile!==null&&!constants_1.isBrowser){const RNFS=require("react-native-fs");RNFS.unlink(`${RNFS.DocumentDirectoryPath}/${appChain.publicKey.toString()}.json`)}const[ControllerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("controller")],constants_1.programId);const hash=(0,helpers_2.getPublicKeyFromSeed)(`${appJson.timestamp}-${this.identity.userId.toString()}`);await this.anchorProgram.methods.updateApp(this.identity.userId.toString(),hash,action,acceptTos).accounts({authority:this.sessionWallet.publicKey,controller:ControllerPDA,identity:this.identity.publicKey,app:publicKey}).rpc();return Promise.resolve({publicKey:appChain.publicKey,timestamp:appChain.timestamp,userId:appChain.userId,appId:appChain.appId,shdw:appChain.shdw,status:appChain.status,acceptedTOS:acceptTos,name:appJson.name,description:appJson.description,metadata:appJson.metadata})}catch(error){return Promise.reject(error)}}exports.default=updateApp}).call(this)}).call(this,require("buffer").Buffer)},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"../../utils/helpers":164,"./helpers":110,"@coral-xyz/anchor":16,buffer:269,"react-native-fs":undefined}],112:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});const helpers_1=require("../../utils/helpers");const anchor=__importStar(require("@coral-xyz/anchor"));const anchor_1=require("@coral-xyz/anchor");const constants_1=require("../../utils/constants");const models_1=require("../../models");const dayjs_1=__importDefault(require("dayjs"));const errors_1=require("../../utils/errors");async function createGroup(parentType,parent,acceptTos,action,name=null,files=null,description=null,metadata=null){try{if(this.identity===null)throw new errors_1.IdentityNotSelectedError;const metadataObject=metadata?JSON.parse(JSON.stringify(metadata)):null;if(typeof metadataObject!=="object")throw new Error("Invalid JSON object");const timestamp=(0,dayjs_1.default)().unix().toString();const hash=(0,helpers_1.getPublicKeyFromSeed)(`${timestamp}-${this.identity.userId.toString()}-${parent.toString()}`);const[ControllerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("controller")],constants_1.programId);const[GroupPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("group"),hash.toBuffer()],constants_1.programId);const filesToUpload=[];const mediaData=[];if(files?.length){for(let index=0;index<files.length;index++){const file=files[index];mediaData.push({title:file.title??null,description:file.description??null,externalUrl:file.externalUrl??null,file:`${constants_1.shadowDriveDomain}${this.storageAccount}/${GroupPDA.toString()}-${index+1}.${file?.type.split("/")[1]}`,type:file?.type.split("/")[1]});if(!constants_1.isBrowser){const RNFS=require("react-native-fs");const readedFile=await RNFS.readFile(file.uri,"base64");filesToUpload.push({uri:file.uri,name:`${GroupPDA.toString()}-${index+1}.${file?.type.split("/")[1]}`,type:file.type,size:file.size,file:Buffer.from(readedFile,"base64")})}else{filesToUpload.push(new File([(0,helpers_1.convertDataUriToBlob)(file.base64)],`${GroupPDA.toString()}-${index+1}.${file?.type.split("/")[1]}`))}}}let descriptionTextFile;if(description!==null){if(!constants_1.isBrowser){const RNFS=require("react-native-fs");const descriptionTextPath=`${RNFS.DocumentDirectoryPath}/${GroupPDA.toString()}.txt`;await RNFS.writeFile(descriptionTextPath,description,"utf8");const statResult=await RNFS.stat(descriptionTextPath);const file=await RNFS.readFile(descriptionTextPath,"utf8");descriptionTextFile={uri:`file://${descriptionTextPath}`,type:"text/plain",file:Buffer.from(file,"utf8"),name:`${GroupPDA.toString()}.txt`,size:statResult.size};filesToUpload.push(descriptionTextFile)}else{descriptionTextFile=new File([new Blob([description],{type:"text/plain"})],`${GroupPDA.toString()}.txt`);filesToUpload.push(descriptionTextFile)}}const groupJson={timestamp:timestamp,name:name,description:description?`${GroupPDA.toString()}.txt`:null,files:mediaData,metadata:metadataObject};if(!constants_1.isBrowser){const RNFS=require("react-native-fs");const appJSONPath=`${RNFS.DocumentDirectoryPath}/${GroupPDA.toString()}.json`;await RNFS.writeFile(appJSONPath,JSON.stringify(groupJson),"utf8");const statResult=await RNFS.stat(appJSONPath);const file=await RNFS.readFile(appJSONPath,"utf8");filesToUpload.push({uri:`file://${appJSONPath}`,type:"application/json",file:Buffer.from(file,"utf8"),name:`${GroupPDA.toString()}.json`,size:statResult.size})}else{const fileToSave=new Blob([JSON.stringify(groupJson)],{type:"application/json"});filesToUpload.push(new File([fileToSave],`${GroupPDA.toString()}.json`))}await this.shadowDrive.uploadFiles(this.storageAccount,!constants_1.isBrowser?filesToUpload:filesToUpload);if(!constants_1.isBrowser){const RNFS=require("react-native-fs");RNFS.unlink(`${RNFS.DocumentDirectoryPath}/${GroupPDA.toString()}.json`);if(descriptionTextFile!=null){RNFS.unlink(`${RNFS.DocumentDirectoryPath}/${GroupPDA.toString()}.txt`)}}await this.anchorProgram.methods.createGroup(this.identity.userId.toString(),hash,this.storageAccountIndex,parentType,parent,acceptTos,action).accounts({authority:this.sessionWallet.publicKey,controller:ControllerPDA,identity:this.identity.publicKey,group:GroupPDA}).rpc();let onChainGroup=null;while(onChainGroup==null){try{onChainGroup=await this.anchorProgram.account.group.fetch(GroupPDA)}catch(error){}}const groupChain=new models_1.GroupChain(GroupPDA,onChainGroup);return Promise.resolve({publicKey:groupChain.publicKey,timestamp:groupChain.timestamp,userId:groupChain.userId,groupId:groupChain.groupId,parent:groupChain.parent,parentType:groupChain.parentType,shdw:groupChain.shdw,status:groupChain.status,acceptedTOS:groupChain.acceptedTOS,bump:groupChain.bump,name:name,description:description?description:null,files:mediaData,metadata:metadataObject})}catch(error){return Promise.reject(error)}}exports.default=createGroup}).call(this)}).call(this,require("buffer").Buffer)},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"../../utils/helpers":164,"@coral-xyz/anchor":16,buffer:269,dayjs:284,"react-native-fs":undefined}],113:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const constants_1=require("../../utils/constants");const models_1=require("../../models");const errors_1=require("../../utils/errors");const helpers_1=require("../../utils/helpers");const bytes_1=require("@coral-xyz/anchor/dist/cjs/utils/bytes");const helpers_2=require("./helpers");const anchor_1=require("@coral-xyz/anchor");const group_1=require("../../utils/gql/group");async function getGroupById(groupId){try{if(this.graphQLClient!==null){const groupQuery=await this.graphQLClient.request(group_1.GetGroupByIdQueryDocument,{groupId:groupId});if(groupQuery.groups===null)throw new errors_1.GroupNotFoundError;const groupChain=groupQuery.groups;const groupPublicKey=new anchor_1.web3.PublicKey(groupChain.public_key);const storageAccount=(0,helpers_1.findStorageAccountPK)(new anchor_1.web3.PublicKey(groupChain.identities.storage),groupChain.shdw);const groupJson=await(0,helpers_2.getGroupFileData)(storageAccount,groupPublicKey);if(groupJson.description!=null){groupJson.description=await(0,helpers_1.getTextFromFile)(`${constants_1.shadowDriveDomain}${storageAccount.toString()}/${groupJson.description}`)}return Promise.resolve({publicKey:groupPublicKey,timestamp:groupChain.timestamp,userId:groupChain.user_id,groupId:groupChain.group_id,parent:groupChain.parent,parentType:groupChain.parent_type,shdw:groupChain.shdw,status:groupChain.status,acceptedTOS:groupChain.accepted_tos,bump:groupChain.bump,name:groupJson.name,description:groupJson.description,files:groupJson.files,metadata:groupJson.metadata})}else{const onChainGroups=await this.anchorProgram.account.group.all([{memcmp:{offset:8+4+4,bytes:bytes_1.bs58.encode(Uint8Array.from([groupId]))}}]);if(onChainGroups.length===0)throw new errors_1.GroupNotFoundError;const group=onChainGroups[0];const groupChain=new models_1.GroupChain(group.publicKey,group.account);const onChainIdentities=await this.anchorProgram.account.identity.all([{memcmp:{offset:8+4+4+4+1+32+32,bytes:bytes_1.bs58.encode(Uint8Array.from([groupChain.userId]))}}]);if(onChainIdentities.length===0)throw new errors_1.IdentityNotFoundError;const identity=onChainIdentities[0];const identityChain=new models_1.IdentityChain(identity.publicKey,identity.account);const storageAccount=(0,helpers_1.findStorageAccountPK)(identityChain.storage,groupChain.shdw);const groupJson=await(0,helpers_2.getGroupFileData)(storageAccount,groupChain.publicKey);if(groupJson.description!=null){groupJson.description=await(0,helpers_1.getTextFromFile)(`${constants_1.shadowDriveDomain}${storageAccount.toString()}/${groupJson.description}`)}return Promise.resolve({publicKey:groupChain.publicKey,timestamp:groupChain.timestamp,userId:groupChain.userId,groupId:groupChain.groupId,parent:groupChain.parent,parentType:groupChain.parentType,shdw:groupChain.shdw,status:groupChain.status,acceptedTOS:groupChain.acceptedTOS,bump:groupChain.bump,name:groupJson.name,description:groupJson.description,files:groupJson.files,metadata:groupJson.metadata})}}catch(error){if(error.message.includes("Account does not exist")||error instanceof errors_1.GroupNotFoundError||error instanceof errors_1.IdentityNotFoundError)return Promise.resolve(null);else return Promise.reject(error)}}exports.default=getGroupById},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"../../utils/gql/group":161,"../../utils/helpers":164,"./helpers":115,"@coral-xyz/anchor":16,"@coral-xyz/anchor/dist/cjs/utils/bytes":20}],114:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const constants_1=require("../../utils/constants");const models_1=require("../../models");const errors_1=require("../../utils/errors");const helpers_1=require("../../utils/helpers");const bytes_1=require("@coral-xyz/anchor/dist/cjs/utils/bytes");const helpers_2=require("./helpers");const anchor_1=require("@coral-xyz/anchor");const group_1=require("../../utils/gql/group");async function getGroupsByUserId(userId,limit=null,offset=null){try{const groups=[];if(this.graphQLClient!==null){const groupQuery=await this.graphQLClient.request(group_1.GetAllGroupsByUserIdQueryDocument,{userId:userId,limit:limit,offset:offset});if(groupQuery.groupsPaginatedList_user_id===null||groupQuery.groupsPaginatedList_user_id.length===0)throw new errors_1.GroupNotFoundError;const onChainGroups=groupQuery.groupsPaginatedList_user_id;let groupsContent=await Promise.all(onChainGroups.map(group=>(0,helpers_2.getGroupFileDataV2)((0,helpers_1.findStorageAccountPK)(new anchor_1.web3.PublicKey(group.identities.storage),group.shdw),new anchor_1.web3.PublicKey(group.public_key),group.group_id)));groupsContent=groupsContent.filter(value=>value!==null);let groupsText=await Promise.all(groupsContent.map(groupContent=>{if(groupContent.description!==null){const groupChain=onChainGroups.find(group=>group.public_key===groupContent.publicKey);if(groupChain===undefined)return null;const storageAccount=(0,helpers_1.findStorageAccountPK)(new anchor_1.web3.PublicKey(groupChain.identities.storage),groupChain.shdw);return(0,helpers_2.getGroupTextFromFile)(groupContent.publicKey,`${constants_1.shadowDriveDomain}${storageAccount.toString()}/${groupContent.description}`)}return null}));groupsText=groupsText.filter(value=>value!==null);for(const g in onChainGroups){try{const onChainGroup=onChainGroups[g];const groupPublicKey=new anchor_1.web3.PublicKey(onChainGroup.public_key);const groupFileData=groupsContent.find(groupFile=>groupFile.publicKey===onChainGroup.public_key);if(groupFileData===undefined)throw new errors_1.GroupNotFoundError;const postTextFile=groupsText.find(groupText=>groupText.publicKey===onChainGroup.public_key);if(postTextFile!==undefined){groupFileData.description=postTextFile.text}groups.push({publicKey:groupPublicKey,timestamp:onChainGroup.timestamp,userId:onChainGroup.user_id,groupId:onChainGroup.group_id,parent:onChainGroup.parent,parentType:onChainGroup.parent_type,shdw:onChainGroup.shdw,status:onChainGroup.status,acceptedTOS:onChainGroup.accepted_tos,bump:onChainGroup.bump,name:groupFileData.name,description:groupFileData.description,files:groupFileData.files,metadata:groupFileData.metadata})}catch(error){}}}else{const onChainGroups=await this.anchorProgram.account.group.all([{memcmp:{offset:8+4,bytes:bytes_1.bs58.encode(Uint8Array.from([userId]))}}]);if(onChainGroups.length===0)throw new errors_1.GroupNotFoundError;const onChainIdentities=await this.anchorProgram.account.identity.all([{memcmp:{offset:8+4+4+4+1+32+32,bytes:bytes_1.bs58.encode(Uint8Array.from([userId]))}}]);if(onChainIdentities.length===0)throw new errors_1.IdentityNotFoundError;const identity=onChainIdentities[0];const identityChain=new models_1.IdentityChain(identity.publicKey,identity.account);for(const group of onChainGroups){try{const groupChain=new models_1.GroupChain(group.publicKey,group.account);const storageAccount=(0,helpers_1.findStorageAccountPK)(identityChain.storage,groupChain.shdw);const groupJson=await(0,helpers_2.getGroupFileData)(storageAccount,groupChain.publicKey);if(groupJson.description!=null){groupJson.description=await(0,helpers_1.getTextFromFile)(`${constants_1.shadowDriveDomain}${storageAccount.toString()}/${groupJson.description}`)}groups.push({publicKey:groupChain.publicKey,timestamp:groupChain.timestamp,userId:groupChain.userId,groupId:groupChain.groupId,parent:groupChain.parent,parentType:groupChain.parentType,shdw:groupChain.shdw,status:groupChain.status,acceptedTOS:groupChain.acceptedTOS,bump:groupChain.bump,name:groupJson.name,description:groupJson.description,files:groupJson.files,metadata:groupJson.metadata})}catch(error){}}groups.sort((x,y)=>y.timestamp-x.timestamp)}return Promise.resolve(groups)}catch(error){if(error.message.includes("Account does not exist")||error instanceof errors_1.GroupNotFoundError||error instanceof errors_1.IdentityNotFoundError)return Promise.resolve(null);else return Promise.reject(error)}}exports.default=getGroupsByUserId},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"../../utils/gql/group":161,"../../utils/helpers":164,"./helpers":115,"@coral-xyz/anchor":16,"@coral-xyz/anchor/dist/cjs/utils/bytes":20}],115:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.getGroupTextFromFile=exports.getGroupFileDataV2=exports.getGroupFileData=void 0;const constants_1=require("../../utils/constants");const errors_1=require("../../utils/errors");const axios_1=__importDefault(require("axios"));async function getGroupFileData(shdw,groupPublicKey){try{const response=await axios_1.default.get(`${constants_1.shadowDriveDomain}${shdw.toString()}/${groupPublicKey.toString()}.json?timestamp=${(new Date).getTime()}`);if(response.status!==200)throw new errors_1.GroupNotFoundError;return Promise.resolve(response.data)}catch{return Promise.reject(new errors_1.GroupNotFoundError)}}exports.getGroupFileData=getGroupFileData;async function getGroupFileDataV2(shdw,groupPublicKey,groupId){try{const response=await axios_1.default.get(`${constants_1.shadowDriveDomain}${shdw.toString()}/${groupPublicKey.toString()}.json?timestamp=${(new Date).getTime()}`);if(response.status!==200)return Promise.resolve(null);response.data.publicKey=groupPublicKey.toString();response.data.groupId=groupId;return Promise.resolve(response.data)}catch{return Promise.resolve(null)}}exports.getGroupFileDataV2=getGroupFileDataV2;async function getGroupTextFromFile(publicKey,url){try{const response=await axios_1.default.get(url);if(response.status!==200)return Promise.resolve(null);return Promise.resolve({publicKey:publicKey,text:response.data})}catch{return Promise.resolve(null)}}exports.getGroupTextFromFile=getGroupTextFromFile},{"../../utils/constants":148,"../../utils/errors":160,axios:186}],116:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});const helpers_1=require("../../utils/helpers");const anchor=__importStar(require("@coral-xyz/anchor"));const anchor_1=require("@coral-xyz/anchor");const constants_1=require("../../utils/constants");const models_1=require("../../models");const helpers_2=require("./helpers");const errors_1=require("../../utils/errors");const bytes_1=require("@coral-xyz/anchor/dist/cjs/utils/bytes");async function updateGroup(groupId=null,acceptTos,action,name=null,description=null,metadata=null){try{if(this.identity===null)throw new errors_1.IdentityNotSelectedError;const metadataObject=metadata?JSON.parse(JSON.stringify(metadata)):null;if(typeof metadataObject!=="object")throw new Error("Invalid JSON object");const onChainGroups=await this.anchorProgram.account.group.all([{memcmp:{offset:8+4+4,bytes:bytes_1.bs58.encode(Uint8Array.from([groupId]))}}]);if(onChainGroups.length===0)throw new errors_1.GroupNotFoundError;const group=onChainGroups[0];const groupChain=new models_1.GroupChain(group.publicKey,group.account);const storageAccount=(0,helpers_1.findStorageAccountPK)(this.identity.storage,groupChain.shdw);const groupJson=await(0,helpers_2.getGroupFileData)(storageAccount,groupChain.publicKey);let descriptionTextFile;if(description!==null){if(!constants_1.isBrowser){const RNFS=require("react-native-fs");const descriptionTextPath=`${RNFS.DocumentDirectoryPath}/${groupChain.publicKey.toString()}.txt`;await RNFS.writeFile(descriptionTextPath,description,"utf8");const statResult=await RNFS.stat(descriptionTextPath);const file=await RNFS.readFile(descriptionTextPath,"utf8");descriptionTextFile={uri:`file://${descriptionTextPath}`,type:"text/plain",file:Buffer.from(file,"utf8"),name:`${groupChain.publicKey.toString()}.txt`,size:statResult.size}}else{descriptionTextFile=new File([new Blob([description],{type:"text/plain"})],`${groupChain.publicKey.toString()}.txt`)}}if(descriptionTextFile!=null){if(groupJson.description!==null){await this.shadowDrive.editFile(this.storageAccount,`${constants_1.shadowDriveDomain}${storageAccount.toString()}/${groupChain.publicKey.toString()}.txt`,!constants_1.isBrowser?descriptionTextFile:descriptionTextFile,"v2")}else{await this.shadowDrive.uploadFile(storageAccount,!constants_1.isBrowser?descriptionTextFile:descriptionTextFile)}}if(name!==null){groupJson.name=name}if(description!==null){groupJson.description=`${groupChain.publicKey.toString()}.txt`}if(metadata!==null){groupJson.metadata=metadataObject}let groupFile;if(!constants_1.isBrowser){const RNFS=require("react-native-fs");const profileJSONPath=`${RNFS.DocumentDirectoryPath}/${groupChain.publicKey.toString()}.json`;await RNFS.writeFile(profileJSONPath,JSON.stringify(groupJson),"utf8");const statResult=await RNFS.stat(profileJSONPath);const file=await RNFS.readFile(profileJSONPath,"utf8");groupFile={uri:`file://${profileJSONPath}`,type:"application/json",file:Buffer.from(file,"utf8"),name:`${groupChain.publicKey.toString()}.json`,size:statResult.size}}else{const fileToSave=new Blob([JSON.stringify(groupJson)],{type:"application/json"});groupFile=new File([fileToSave],`${groupChain.publicKey.toString()}.json`)}await this.shadowDrive.editFile(storageAccount,`${constants_1.shadowDriveDomain}${storageAccount.toString()}/${groupChain.publicKey.toString()}.json`,!constants_1.isBrowser?groupFile:groupFile,"v2");if(groupFile!==null&&!constants_1.isBrowser){const RNFS=require("react-native-fs");RNFS.unlink(`${RNFS.DocumentDirectoryPath}/${groupChain.publicKey.toString()}.json`)}const[ControllerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("controller")],constants_1.programId);const hash=(0,helpers_1.getPublicKeyFromSeed)(`${groupJson.timestamp}-${this.identity.userId.toString()}-${groupChain.parent.toString()}`);await this.anchorProgram.methods.updateGroup(this.identity.userId.toString(),hash,action,acceptTos).accounts({authority:this.sessionWallet.publicKey,controller:ControllerPDA,identity:this.identity.publicKey,group:groupChain.publicKey}).rpc();return Promise.resolve({publicKey:groupChain.publicKey,timestamp:groupChain.timestamp,userId:groupChain.userId,groupId:groupChain.groupId,parent:groupChain.parent,parentType:groupChain.parentType,shdw:groupChain.shdw,status:groupChain.status,acceptedTOS:acceptTos,bump:groupChain.bump,name:name,description:description?description:null,files:groupJson.files,metadata:metadataObject})}catch(error){return Promise.reject(error)}}exports.default=updateGroup}).call(this)}).call(this,require("buffer").Buffer)},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"../../utils/helpers":164,"./helpers":115,"@coral-xyz/anchor":16,"@coral-xyz/anchor/dist/cjs/utils/bytes":20,buffer:269,"react-native-fs":undefined}],117:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@coral-xyz/anchor"));const anchor_1=require("@coral-xyz/anchor");const models_1=require("../../models");const constants_1=require("../../utils/constants");async function createIdentity(identifier,accepted_tos){try{if(identifier.length>32)throw new Error("Maximum length of 32 characters as identifier reached");const identifierKeypair=anchor_1.web3.Keypair.fromSeed(anchor.utils.bytes.utf8.encode(identifier.padEnd(32,"0")));const[ControllerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("controller")],constants_1.programId);const[IdentityPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("identity"),this.issuerWallet.publicKey.toBuffer(),identifierKeypair.publicKey.toBuffer()],constants_1.programId);const[IssuerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("issuer"),this.sessionWallet.publicKey.toBuffer()],constants_1.programId);await this.anchorProgram.methods.createIdentity(identifierKeypair.publicKey,this.sessionWallet.publicKey,accepted_tos).accounts({authority:this.sessionWallet.publicKey,controller:ControllerPDA,issuer:IssuerPDA,identity:IdentityPDA}).rpc();let onChainIdentity=null;while(onChainIdentity==null){try{onChainIdentity=await this.anchorProgram.account.identity.fetch(IdentityPDA)}catch(error){}}const identityChain=new models_1.IdentityChain(IdentityPDA,onChainIdentity);return Promise.resolve({publicKey:identityChain.publicKey,creationTimestamp:identityChain.creationTimestamp,updateTimestamp:identityChain.updateTimestamp,issuer:identityChain.issuer,verified:identityChain.verified,authority:identityChain.authority,userId:identityChain.userId,actions:identityChain.actions,userSessions:identityChain.userSessions,acceptedTOS:identityChain.acceptedTOS})}catch(error){return Promise.reject(error)}}exports.default=createIdentity},{"../../models":145,"../../utils/constants":148,"@coral-xyz/anchor":16}],118:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const models_1=require("../../models");const errors_1=require("../../utils/errors");async function getIdentityByPublicKey(publicKey){try{const onChainIdentity=await this.anchorProgram.account.identity.fetch(publicKey);const identityChain=new models_1.IdentityChain(publicKey,onChainIdentity);return Promise.resolve({publicKey:identityChain.publicKey,creationTimestamp:identityChain.creationTimestamp,updateTimestamp:identityChain.updateTimestamp,issuer:identityChain.issuer,verified:identityChain.verified,authority:identityChain.authority,storage:identityChain.storage,userId:identityChain.userId,actions:identityChain.actions,userSessions:identityChain.userSessions,acceptedTOS:identityChain.acceptedTOS})}catch(error){if(error.message.includes("Account does not exist")||error instanceof errors_1.IdentityNotFoundError){return Promise.resolve(null)}return Promise.reject(error)}}exports.default=getIdentityByPublicKey},{"../../models":145,"../../utils/errors":160}],119:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const models_1=require("../../models");const errors_1=require("../../utils/errors");async function getIdentityBySession(publicKey){try{const onChainIdentities=await this.anchorProgram.account.identity.all([{memcmp:{offset:8+4+4+4+1,bytes:publicKey.toBase58()}}]);if(onChainIdentities.length===0)throw new errors_1.IdentityNotFoundError;const identities=onChainIdentities.map(identity=>new models_1.IdentityChain(identity.publicKey,identity.account)).sort((x,y)=>y.creationTimestamp-x.creationTimestamp);const identityChain=identities[0];return Promise.resolve({publicKey:identityChain.publicKey,creationTimestamp:identityChain.creationTimestamp,updateTimestamp:identityChain.updateTimestamp,issuer:identityChain.issuer,verified:identityChain.verified,authority:identityChain.authority,storage:identityChain.storage,userId:identityChain.userId,actions:identityChain.actions,userSessions:identityChain.userSessions,acceptedTOS:identityChain.acceptedTOS})}catch(error){if(error.message.includes("Account does not exist")||error instanceof errors_1.IdentityNotFoundError){return Promise.resolve(null)}return Promise.reject(error)}}exports.default=getIdentityBySession},{"../../models":145,"../../utils/errors":160}],120:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});const constants_1=require("../../utils/constants");const models_1=require("../../models");const errors_1=require("../../utils/errors");const anchor=__importStar(require("@coral-xyz/anchor"));const anchor_1=require("@coral-xyz/anchor");async function getIdentityByUserId(userId){try{const[IdentityPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("identity"),anchor.utils.bytes.utf8.encode(userId.toString())],constants_1.programId);const onChainIdentity=await this.anchorProgram.account.identity.fetch(IdentityPDA);const identityChain=new models_1.IdentityChain(IdentityPDA,onChainIdentity);return Promise.resolve({publicKey:identityChain.publicKey,creationTimestamp:identityChain.creationTimestamp,updateTimestamp:identityChain.updateTimestamp,issuer:identityChain.issuer,verified:identityChain.verified,authority:identityChain.authority,storage:identityChain.storage,userId:identityChain.userId,actions:identityChain.actions,userSessions:identityChain.userSessions,acceptedTOS:identityChain.acceptedTOS})}catch(error){if(error.message.includes("Account does not exist")||error instanceof errors_1.IdentityNotFoundError){return Promise.resolve(null)}return Promise.reject(error)}}exports.default=getIdentityByUserId},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"@coral-xyz/anchor":16}],121:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@coral-xyz/anchor"));const anchor_1=require("@coral-xyz/anchor");const models_1=require("../../models");const constants_1=require("../../utils/constants");async function updateIdentity(identifier){try{const identifierKeypair=anchor_1.web3.Keypair.fromSeed(anchor.utils.bytes.utf8.encode(identifier.padEnd(32,"0")));const[IdentityPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("identity"),this.sessionWallet.publicKey.toBuffer(),identifierKeypair.publicKey.toBuffer()],constants_1.programId);const[IssuerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("issuer"),this.sessionWallet.publicKey.toBuffer()],constants_1.programId);await this.anchorProgram.methods.updateIdentity(identifierKeypair.publicKey,this.sessionWallet.publicKey).accounts({authority:this.sessionWallet.publicKey,issuer:IssuerPDA,identity:IdentityPDA}).rpc();let onChainIdentity=null;while(onChainIdentity==null){try{onChainIdentity=await this.anchorProgram.account.identity.fetch(IdentityPDA)}catch(error){}}const identityChain=new models_1.IdentityChain(IdentityPDA,onChainIdentity);return Promise.resolve({publicKey:identityChain.publicKey,creationTimestamp:identityChain.creationTimestamp,updateTimestamp:identityChain.updateTimestamp,issuer:identityChain.issuer,verified:identityChain.verified,authority:identityChain.authority,userId:identityChain.userId,actions:identityChain.actions,userSessions:identityChain.userSessions,acceptedTOS:identityChain.acceptedTOS})}catch(error){return Promise.reject(error)}}exports.default=updateIdentity},{"../../models":145,"../../utils/constants":148,"@coral-xyz/anchor":16}],122:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.getGroupsByUserId=exports.getGroupById=exports.updateGroup=exports.createGroup=exports.getAllPostsByAppId=exports.getAllPostsByParent=exports.getPostByPublicKey=exports.deletePost=exports.updatePost=exports.createPost=exports.getAppById=exports.getAllAppsByUserId=exports.getApp=exports.updateApp=exports.createApp=exports.getProfileByUserId=exports.getProfile=exports.deleteProfile=exports.updateProfile=exports.createProfile=exports.getIdentityBySession=exports.getIdentityByPublicKey=exports.getIdentityByUserId=exports.updateIdentity=exports.createIdentity=exports.getIssuer=exports.updateIssuer=exports.createIssuer=void 0;const create_issuer_1=__importDefault(require("./issuer/create-issuer"));exports.createIssuer=create_issuer_1.default;const update_issuer_1=__importDefault(require("./issuer/update-issuer"));exports.updateIssuer=update_issuer_1.default;const get_issuer_1=__importDefault(require("./issuer/get-issuer"));exports.getIssuer=get_issuer_1.default;const create_identity_1=__importDefault(require("./identity/create-identity"));exports.createIdentity=create_identity_1.default;const update_identity_1=__importDefault(require("./identity/update-identity"));exports.updateIdentity=update_identity_1.default;const get_identity_by_user_id_1=__importDefault(require("./identity/get-identity-by-user-id"));exports.getIdentityByUserId=get_identity_by_user_id_1.default;const get_identity_by_public_key_1=__importDefault(require("./identity/get-identity-by-public-key"));exports.getIdentityByPublicKey=get_identity_by_public_key_1.default;const get_identity_by_session_1=__importDefault(require("./identity/get-identity-by-session"));exports.getIdentityBySession=get_identity_by_session_1.default;const create_profile_1=__importDefault(require("./profile/create-profile"));exports.createProfile=create_profile_1.default;const update_profile_1=__importDefault(require("./profile/update-profile"));exports.updateProfile=update_profile_1.default;const delete_profile_1=__importDefault(require("./profile/delete-profile"));exports.deleteProfile=delete_profile_1.default;const get_profile_1=__importDefault(require("./profile/get-profile"));exports.getProfile=get_profile_1.default;const get_profile_by_user_id_1=__importDefault(require("./profile/get-profile-by-user-id"));exports.getProfileByUserId=get_profile_by_user_id_1.default;const create_app_1=__importDefault(require("./app/create-app"));exports.createApp=create_app_1.default;const update_app_1=__importDefault(require("./app/update-app"));exports.updateApp=update_app_1.default;const get_app_1=__importDefault(require("./app/get-app"));exports.getApp=get_app_1.default;const get_all_apps_by_user_id_1=__importDefault(require("./app/get-all-apps-by-user-id"));exports.getAllAppsByUserId=get_all_apps_by_user_id_1.default;const get_app_by_id_1=__importDefault(require("./app/get-app-by-id"));exports.getAppById=get_app_by_id_1.default;const create_post_1=__importDefault(require("./post/create-post"));exports.createPost=create_post_1.default;const update_post_1=__importDefault(require("./post/update-post"));exports.updatePost=update_post_1.default;const delete_post_1=__importDefault(require("./post/delete-post"));exports.deletePost=delete_post_1.default;const get_post_by_public_key_1=__importDefault(require("./post/get-post-by-public-key"));exports.getPostByPublicKey=get_post_by_public_key_1.default;const get_all_posts_by_parent_1=__importDefault(require("./post/get-all-posts-by-parent"));exports.getAllPostsByParent=get_all_posts_by_parent_1.default;const get_all_posts_by_app_id_1=__importDefault(require("./post/get-all-posts-by-app-id"));exports.getAllPostsByAppId=get_all_posts_by_app_id_1.default;const create_group_1=__importDefault(require("./group/create-group"));exports.createGroup=create_group_1.default;const update_group_1=__importDefault(require("./group/update-group"));exports.updateGroup=update_group_1.default;const get_group_by_id_1=__importDefault(require("./group/get-group-by-id"));exports.getGroupById=get_group_by_id_1.default;const get_group_by_user_id_1=__importDefault(require("./group/get-group-by-user-id"));exports.getGroupsByUserId=get_group_by_user_id_1.default},{"./app/create-app":106,"./app/get-all-apps-by-user-id":107,"./app/get-app":109,"./app/get-app-by-id":108,"./app/update-app":111,"./group/create-group":112,"./group/get-group-by-id":113,"./group/get-group-by-user-id":114,"./group/update-group":116,"./identity/create-identity":117,"./identity/get-identity-by-public-key":118,"./identity/get-identity-by-session":119,"./identity/get-identity-by-user-id":120,"./identity/update-identity":121,"./issuer/create-issuer":123,"./issuer/get-issuer":124,"./issuer/update-issuer":125,"./post/create-post":126,"./post/delete-post":127,"./post/get-all-posts-by-app-id":128,"./post/get-all-posts-by-parent":129,"./post/get-post-by-public-key":130,"./post/update-post":132,"./profile/create-profile":133,"./profile/delete-profile":134,"./profile/get-profile":136,"./profile/get-profile-by-user-id":135,"./profile/update-profile":138}],123:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@coral-xyz/anchor"));const anchor_1=require("@coral-xyz/anchor");const models_1=require("../../models");const constants_1=require("../../utils/constants");async function createIssuer(){try{const[ControllerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("controller")],constants_1.programId);const[IssuerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("issuer"),this.sessionWallet.publicKey.toBuffer()],constants_1.programId);await this.anchorProgram.methods.createIssuer().accounts({authority:this.sessionWallet.publicKey,controller:ControllerPDA,issuer:IssuerPDA}).rpc();let onChainIssuer=null;while(onChainIssuer==null){try{onChainIssuer=await this.anchorProgram.account.issuer.fetch(IssuerPDA)}catch(error){}}const issuerChain=new models_1.IssuerChain(onChainIssuer);return Promise.resolve({key:issuerChain.key,id:issuerChain.id,verified:issuerChain.verified})}catch(error){return Promise.reject(error)}}exports.default=createIssuer},{"../../models":145,"../../utils/constants":148,"@coral-xyz/anchor":16}],124:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});const constants_1=require("../../utils/constants");const models_1=require("../../models");const errors_1=require("../../utils/errors");const anchor=__importStar(require("@coral-xyz/anchor"));const anchor_1=require("@coral-xyz/anchor");async function getIssuer(){try{const[IssuerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("issuer"),this.sessionWallet.publicKey.toBuffer()],constants_1.programId);const onChainIssuer=await this.anchorProgram.account.issuer.fetch(IssuerPDA);const issuerChain=new models_1.IssuerChain(onChainIssuer);return Promise.resolve({key:issuerChain.key,id:issuerChain.id,verified:issuerChain.verified})}catch(error){if(error.message.includes("Account does not exist")||error instanceof errors_1.IssuerNotFoundError){return Promise.resolve(null)}return Promise.reject(error)}}exports.default=getIssuer},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"@coral-xyz/anchor":16}],125:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@coral-xyz/anchor"));const anchor_1=require("@coral-xyz/anchor");const models_1=require("../../models");const constants_1=require("../../utils/constants");async function updateIssuer(status){try{const[IssuerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("issuer"),this.sessionWallet.publicKey.toBuffer()],constants_1.programId);await this.anchorProgram.methods.updateIssuer(status).accounts({authority:this.sessionWallet.publicKey,issuer:IssuerPDA}).rpc();let onChainIssuer=null;while(onChainIssuer==null){try{onChainIssuer=await this.anchorProgram.account.issuer.fetch(IssuerPDA)}catch(error){}}const issuerChain=new models_1.IssuerChain(onChainIssuer);return Promise.resolve({key:issuerChain.key,id:issuerChain.id,verified:issuerChain.verified})}catch(error){return Promise.reject(error)}}exports.default=updateIssuer},{"../../models":145,"../../utils/constants":148,"@coral-xyz/anchor":16}],126:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});const helpers_1=require("../../utils/helpers");const anchor=__importStar(require("@coral-xyz/anchor"));const anchor_1=require("@coral-xyz/anchor");const constants_1=require("../../utils/constants");const models_1=require("../../models");const dayjs_1=__importDefault(require("dayjs"));const errors_1=require("../../utils/errors");async function createPost(parentType,parent,action,files=null,metadata=null){try{if(this.identity===null)throw new errors_1.IdentityNotSelectedError;const metadataObject=metadata?JSON.parse(JSON.stringify(metadata)):null;if(typeof metadataObject!=="object")throw new Error("Invalid JSON object");const timestamp=(0,dayjs_1.default)().unix().toString();const hash=(0,helpers_1.getPublicKeyFromSeed)(`${timestamp}-${this.identity.userId.toString()}-${parent.toString()}`);const[ControllerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("controller")],constants_1.programId);const[PostPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("post"),hash.toBuffer()],constants_1.programId);const filesToUpload=[];const mediaData=[];if(files?.length){for(let index=0;index<files.length;index++){const file=files[index];mediaData.push({title:file.title??null,description:file.description??null,externalUrl:file.externalUrl??null,file:`${constants_1.shadowDriveDomain}${this.storageAccount}/${PostPDA.toString()}-${index+1}.${file?.type.split("/")[1]}`,type:file?.type.split("/")[1]});if(!constants_1.isBrowser){const RNFS=require("react-native-fs");const readedFile=await RNFS.readFile(file.uri,"base64");filesToUpload.push({uri:file.uri,name:`${PostPDA.toString()}-${index+1}.${file?.type.split("/")[1]}`,type:file.type,size:file.size,file:Buffer.from(readedFile,"base64")})}else{filesToUpload.push(new File([(0,helpers_1.convertDataUriToBlob)(file.base64)],`${PostPDA.toString()}-${index+1}.${file?.type.split("/")[1]}`))}}}const postJson={timestamp:timestamp,files:mediaData,metadata:metadataObject};if(!constants_1.isBrowser){const RNFS=require("react-native-fs");const appJSONPath=`${RNFS.DocumentDirectoryPath}/${PostPDA.toString()}.json`;await RNFS.writeFile(appJSONPath,JSON.stringify(postJson),"utf8");const statResult=await RNFS.stat(appJSONPath);const file=await RNFS.readFile(appJSONPath,"utf8");filesToUpload.push({uri:`file://${appJSONPath}`,type:"application/json",file:Buffer.from(file,"utf8"),name:`${PostPDA.toString()}.json`,size:statResult.size})}else{const fileToSave=new Blob([JSON.stringify(postJson)],{type:"application/json"});filesToUpload.push(new File([fileToSave],`${PostPDA.toString()}.json`))}await this.shadowDrive.uploadFiles(this.storageAccount,!constants_1.isBrowser?filesToUpload:filesToUpload);if(!constants_1.isBrowser){const RNFS=require("react-native-fs");RNFS.unlink(`${RNFS.DocumentDirectoryPath}/${PostPDA.toString()}.json`)}await this.anchorProgram.methods.createPost(this.identity.userId.toString(),this.storageAccountIndex,hash,parentType,parent,action).accounts({authority:this.sessionWallet.publicKey,controller:ControllerPDA,identity:this.identity.publicKey,post:PostPDA}).rpc();let onChainPost=null;while(onChainPost==null){try{onChainPost=await this.anchorProgram.account.post.fetch(PostPDA)}catch(error){}}const postChain=new models_1.PostChain(PostPDA,onChainPost);return Promise.resolve({publicKey:postChain.publicKey,timestamp:postChain.timestamp,userId:postChain.userId,parent:postChain.parent,parentType:postChain.parentType,like:postChain.like,status:postChain.status,bump:postChain.bump,files:postJson.files,metadata:metadataObject})}catch(error){return Promise.reject(error)}}exports.default=createPost}).call(this)}).call(this,require("buffer").Buffer)},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"../../utils/helpers":164,"@coral-xyz/anchor":16,buffer:269,dayjs:284,"react-native-fs":undefined}],127:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@coral-xyz/anchor"));const anchor_1=require("@coral-xyz/anchor");const constants_1=require("../../utils/constants");const helpers_1=require("./helpers");const errors_1=require("../../utils/errors");const helpers_2=require("../../utils/helpers");const models_1=require("../../models");const bytes_1=require("@coral-xyz/anchor/dist/cjs/utils/bytes");const post_1=require("../../utils/gql/post");async function deletePost(publicKey){try{if(this.identity===null)throw new errors_1.IdentityNotSelectedError;if(this.graphQLClient!==null){const postQuery=await this.graphQLClient.request(post_1.GetPostByPublicKeyQueryDocument,{publicKey:publicKey.toString()});if(postQuery.posts===null)throw new errors_1.PostNotFoundError;const postChain=postQuery.posts;const storageAccount=(0,helpers_2.findStorageAccountPK)(new anchor_1.web3.PublicKey(postChain.identities.storage),postChain.shdw);const postFileData=await(0,helpers_1.getPostFileData)(storageAccount,publicKey);postFileData.files.forEach(file=>{this.shadowDrive.deleteFile(this.storageAccount,file.file,"v2")});await this.shadowDrive.deleteFile(this.storageAccount,`${constants_1.shadowDriveDomain}${storageAccount.toString()}/${publicKey.toString()}.json`,"v2");const[ControllerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("controller")],constants_1.programId);const hash=(0,helpers_2.getPublicKeyFromSeed)(`${postFileData.timestamp}-${this.identity.userId.toString()}-${postChain.parent.toString()}`);await this.anchorProgram.methods.deletePost(this.identity.userId.toString(),hash).accounts({authority:this.sessionWallet.publicKey,controller:ControllerPDA,identity:this.identity.publicKey,post:publicKey}).rpc();return Promise.resolve()}else{const onChainPost=await this.anchorProgram.account.post.fetch(publicKey);const postChain=new models_1.PostChain(publicKey,onChainPost);const onChainIdentities=await this.anchorProgram.account.identity.all([{memcmp:{offset:8+4+4+4+1+32+32,bytes:bytes_1.bs58.encode(Uint8Array.from([postChain.userId]))}}]);if(onChainIdentities.length===0)throw new errors_1.IdentityNotFoundError;const identity=onChainIdentities[0];const identityChain=new models_1.IdentityChain(identity.publicKey,identity.account);const storageAccount=(0,helpers_2.findStorageAccountPK)(identityChain.storage,postChain.shdw);const postFileData=await(0,helpers_1.getPostFileData)(storageAccount,publicKey);postFileData.files.forEach(file=>{this.shadowDrive.deleteFile(this.storageAccount,file.file,"v2")});await this.shadowDrive.deleteFile(this.storageAccount,`${constants_1.shadowDriveDomain}${storageAccount.toString()}/${publicKey.toString()}.json`,"v2");const[ControllerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("controller")],constants_1.programId);const hash=(0,helpers_2.getPublicKeyFromSeed)(`${postFileData.timestamp}-${this.identity.userId.toString()}-${postChain.parent.toString()}`);await this.anchorProgram.methods.deletePost(this.identity.userId.toString(),hash).accounts({authority:this.sessionWallet.publicKey,controller:ControllerPDA,identity:this.identity.publicKey,post:publicKey}).rpc();return Promise.resolve()}}catch(error){return Promise.reject(error)}}exports.default=deletePost},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"../../utils/gql/post":162,"../../utils/helpers":164,"./helpers":131,"@coral-xyz/anchor":16,"@coral-xyz/anchor/dist/cjs/utils/bytes":20}],128:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const models_1=require("../../models");const types_1=require("../../types");const helpers_1=require("./helpers");const helpers_2=require("../../utils/helpers");const errors_1=require("../../utils/errors");const bytes_1=require("@coral-xyz/anchor/dist/cjs/utils/bytes");const anchor_1=require("@coral-xyz/anchor");const graphql_1=require("../../gql/graphql");const helpers_3=require("../group/helpers");const constants_1=require("../../utils/constants");async function getAllPostsByAppId(appId,typeOfWork=null,postalCode=null,maxDistance=null,minHours=null,maxHours=null,jobTitle=null,test=false,limit=null,offset=null){try{const posts=[];let latitude=null;let longitude=null;if(postalCode!==null){const getLocationResponse=await fetch(`${constants_1.AUTH_API}/geolocation/${encodeURIComponent(postalCode)}`,{mode:"cors",method:"GET"});if(getLocationResponse.ok){const result=await getLocationResponse.json();latitude=result.latitude;longitude=result.longitude}}if(this.graphQLClient!==null){const postQuery=await this.graphQLClient.request(graphql_1.GetAllPostBySearchDocument,{appId:appId,typeOfWork:typeOfWork,latitude:latitude,longitude:longitude,maxDistance:maxDistance??25e3,minHours:minHours?minHours:null,maxHours:maxHours?maxHours:null,jobTitle:jobTitle?jobTitle:null,test:test,limit:limit,offset:offset});const onChainPosts=postQuery.postsPaginatedList_app_id_search_v3;let[postsContent,groupsContent]=await Promise.all([Promise.all(onChainPosts.map(post=>(0,helpers_1.getPostFileDataV2)((0,helpers_2.findStorageAccountPK)(new anchor_1.web3.PublicKey(post.identity.storage),post.shdw),new anchor_1.web3.PublicKey(post.public_key)))),Promise.all(onChainPosts.map(post=>(0,helpers_3.getGroupFileDataV2)((0,helpers_2.findStorageAccountPK)(new anchor_1.web3.PublicKey(post.group.identities.storage),post.group.shdw),new anchor_1.web3.PublicKey(post.group.public_key),post.group.group_id)))]);postsContent=postsContent.filter(value=>value!==null);groupsContent=groupsContent.filter(value=>value!==null);for(const p in onChainPosts){try{const onChainPost=onChainPosts[p];const postPublicKey=new anchor_1.web3.PublicKey(onChainPost.public_key);const postFileData=postsContent.find(postFile=>postFile.publicKey===onChainPost.public_key);if(postFileData===undefined)throw new errors_1.PostNotFoundError;const groupFileData=groupsContent.find(groupFile=>groupFile.groupId===onChainPost.parent);if(postFileData===undefined)throw new errors_1.GroupNotFoundError;posts.push({publicKey:postPublicKey,timestamp:onChainPost.timestamp,userId:onChainPost.user_id,parent:onChainPost.parent,parentType:onChainPost.parent_type,like:onChainPost.like,status:onChainPost.status,bump:onChainPost.bump,files:postFileData.files,metadata:postFileData.metadata,groupData:groupFileData?groupFileData:null})}catch(error){}}}else{const onChainGroups=await this.anchorProgram.account.group.all([{memcmp:{offset:8+4+4+4,bytes:bytes_1.bs58.encode(Uint8Array.from([appId]))}},{memcmp:{offset:8+4+4+4+4,bytes:bytes_1.bs58.encode(Uint8Array.from([types_1.ParentType.App]))}}]);const groupIds=onChainGroups.map(group=>new models_1.GroupChain(group.publicKey,group.account).groupId);const onChainPosts=[];for(let index=0;index<groupIds.length;index++){const anchorPosts=await this.anchorProgram.account.post.all([{memcmp:{offset:8+4+4+1,bytes:bytes_1.bs58.encode(Uint8Array.from([groupIds[index]]))}},{memcmp:{offset:8+4+4+1+4,bytes:bytes_1.bs58.encode(Uint8Array.from([types_1.ParentType.Group]))}}]);onChainPosts.push(...anchorPosts.map(post=>new models_1.PostChain(post.publicKey,post.account)))}onChainPosts.sort((x,y)=>y.timestamp-x.timestamp);for(const postChain of onChainPosts){try{const onChainIdentities=await this.anchorProgram.account.identity.all([{memcmp:{offset:8+4+4+4+1+32+32,bytes:bytes_1.bs58.encode(Uint8Array.from([postChain.userId]))}}]);if(onChainIdentities.length===0)throw new errors_1.IdentityNotFoundError;const identity=onChainIdentities[0];const identityChain=new models_1.IdentityChain(identity.publicKey,identity.account);const storageAccount=(0,helpers_2.findStorageAccountPK)(identityChain.storage,postChain.shdw);const postFileData=await(0,helpers_1.getPostFileData)(storageAccount,postChain.publicKey);posts.push({publicKey:postChain.publicKey,timestamp:postChain.timestamp,userId:postChain.userId,parent:postChain.parent,parentType:postChain.parentType,like:postChain.like,status:postChain.status,bump:postChain.bump,files:postFileData.files,metadata:postFileData.metadata})}catch(error){}}}return Promise.resolve(posts)}catch(error){Promise.reject(error)}}exports.default=getAllPostsByAppId},{"../../gql/graphql":104,"../../models":145,"../../types":146,"../../utils/constants":148,"../../utils/errors":160,"../../utils/helpers":164,"../group/helpers":115,"./helpers":131,"@coral-xyz/anchor":16,"@coral-xyz/anchor/dist/cjs/utils/bytes":20}],129:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const models_1=require("../../models");const helpers_1=require("./helpers");const helpers_2=require("../../utils/helpers");const errors_1=require("../../utils/errors");const bytes_1=require("@coral-xyz/anchor/dist/cjs/utils/bytes");const anchor_1=require("@coral-xyz/anchor");const post_1=require("../../utils/gql/post");async function getAllPostsByParent(parent,parentType,limit=null,offset=null){try{const posts=[];if(this.graphQLClient!==null){const postQuery=await this.graphQLClient.request(post_1.GetAllPostByParentQueryDocument,{parent:parent,parentType:parentType,limit:limit,offset:offset});const onChainPosts=postQuery.postsPaginatedList_parent;let postsContent=await Promise.all(onChainPosts.map(post=>(0,helpers_1.getPostFileDataV2)((0,helpers_2.findStorageAccountPK)(new anchor_1.web3.PublicKey(post.identities.storage),post.shdw),new anchor_1.web3.PublicKey(post.public_key))));postsContent=postsContent.filter(value=>value!==null);for(const p in onChainPosts){try{const onChainPost=onChainPosts[p];const postPublicKey=new anchor_1.web3.PublicKey(onChainPost.public_key);const postFileData=postsContent.find(postFile=>postFile.publicKey===onChainPost.public_key);if(postFileData===undefined)throw new errors_1.PostNotFoundError;posts.push({publicKey:postPublicKey,timestamp:onChainPost.timestamp,userId:onChainPost.user_id,parent:onChainPost.parent,parentType:onChainPost.parent_type,like:onChainPost.like,status:onChainPost.status,bump:onChainPost.bump,files:postFileData.files,metadata:postFileData.metadata})}catch(error){}}}else{const onChainPosts=await this.anchorProgram.account.post.all([{memcmp:{offset:8+4+4+1,bytes:bytes_1.bs58.encode(Uint8Array.from([parent]))}},{memcmp:{offset:8+4+4+1+4,bytes:bytes_1.bs58.encode(Uint8Array.from([parentType]))}}]);for(const post of onChainPosts){try{const postChain=new models_1.PostChain(post.publicKey,post.account);const onChainIdentities=await this.anchorProgram.account.identity.all([{memcmp:{offset:8+4+4+4+1+32+32,bytes:bytes_1.bs58.encode(Uint8Array.from([postChain.userId]))}}]);if(onChainIdentities.length===0)throw new errors_1.IdentityNotFoundError;const identity=onChainIdentities[0];const identityChain=new models_1.IdentityChain(identity.publicKey,identity.account);const storageAccount=(0,helpers_2.findStorageAccountPK)(identityChain.storage,post.shdw);const postFileData=await(0,helpers_1.getPostFileData)(storageAccount,postChain.publicKey);posts.push({publicKey:postChain.publicKey,timestamp:postChain.timestamp,userId:postChain.userId,parent:postChain.parent,parentType:postChain.parentType,like:postChain.like,status:postChain.status,bump:postChain.bump,files:postFileData.files,metadata:postFileData.metadata})}catch(error){}}}return Promise.resolve(posts)}catch(error){Promise.reject(error)}}exports.default=getAllPostsByParent},{"../../models":145,"../../utils/errors":160,"../../utils/gql/post":162,"../../utils/helpers":164,"./helpers":131,"@coral-xyz/anchor":16,"@coral-xyz/anchor/dist/cjs/utils/bytes":20}],130:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const models_1=require("../../models");const anchor_1=require("@coral-xyz/anchor");const errors_1=require("../../utils/errors");const helpers_1=require("../../utils/helpers");const bytes_1=require("@coral-xyz/anchor/dist/cjs/utils/bytes");const helpers_2=require("./helpers");const post_1=require("../../utils/gql/post");const group_1=require("../../utils/gql/group");const helpers_3=require("../group/helpers");async function getPostByPublicKey(publicKey){try{if(this.graphQLClient!==null){const postQuery=await this.graphQLClient.request(post_1.GetPostByPublicKeyQueryDocument,{publicKey:publicKey.toString()});if(postQuery.posts===null)throw new errors_1.PostNotFoundError;const postChain=postQuery.posts;const groupQuery=await this.graphQLClient.request(group_1.GetGroupByIdQueryDocument,{groupId:postChain.parent});if(groupQuery.groups===null)throw new errors_1.GroupNotFoundError;const groupChain=groupQuery.groups;const storageAccount=(0,helpers_1.findStorageAccountPK)(new anchor_1.web3.PublicKey(postChain.identities.storage),postChain.shdw);const groupStorageAccount=(0,helpers_1.findStorageAccountPK)(new anchor_1.web3.PublicKey(groupChain.identities.storage),groupChain.shdw);const[postJson,groupJson]=await Promise.all([(0,helpers_2.getPostFileData)(storageAccount,publicKey),(0,helpers_3.getGroupFileData)(groupStorageAccount,new anchor_1.web3.PublicKey(groupChain.public_key))]);return Promise.resolve({publicKey:publicKey,timestamp:postChain.timestamp,userId:postChain.user_id,parent:postChain.parent,parentType:postChain.parent_type,like:postChain.like,status:postChain.status,bump:postChain.bump,files:postJson.files,metadata:postJson.metadata,groupData:groupJson?groupJson:null})}else{const onChainPost=await this.anchorProgram.account.post.fetch(publicKey);const postChain=new models_1.PostChain(publicKey,onChainPost);const onChainIdentities=await this.anchorProgram.account.identity.all([{memcmp:{offset:8+4+4+4+1+32+32,bytes:bytes_1.bs58.encode(Uint8Array.from([postChain.userId]))}}]);if(onChainIdentities.length===0)throw new errors_1.IdentityNotFoundError;const identity=onChainIdentities[0];const identityChain=new models_1.IdentityChain(identity.publicKey,identity.account);const storageAccount=(0,helpers_1.findStorageAccountPK)(identityChain.storage,postChain.shdw);const postJson=await(0,helpers_2.getPostFileData)(storageAccount,publicKey);return Promise.resolve({publicKey:postChain.publicKey,timestamp:postChain.timestamp,userId:postChain.userId,parent:postChain.parent,parentType:postChain.parentType,like:postChain.like,status:postChain.status,bump:postChain.bump,files:postJson.files,metadata:postJson.metadata})}}catch(error){if(error.message.includes("Account does not exist")||error instanceof errors_1.PostNotFoundError||error instanceof errors_1.IdentityNotFoundError)return Promise.resolve(null);else return Promise.reject(error)}}exports.default=getPostByPublicKey},{"../../models":145,"../../utils/errors":160,"../../utils/gql/group":161,"../../utils/gql/post":162,"../../utils/helpers":164,"../group/helpers":115,"./helpers":131,"@coral-xyz/anchor":16,"@coral-xyz/anchor/dist/cjs/utils/bytes":20}],131:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.getPostFileDataV2=exports.getPostFileData=void 0;const constants_1=require("../../utils/constants");const errors_1=require("../../utils/errors");const axios_1=__importDefault(require("axios"));async function getPostFileData(shdw,postPublicKey){try{const response=await axios_1.default.get(`${constants_1.shadowDriveDomain}${shdw.toString()}/${postPublicKey.toString()}.json?timestamp=${(new Date).getTime()}`);if(response.status!==200)throw new errors_1.PostNotFoundError;return Promise.resolve(response.data)}catch{return Promise.reject(new errors_1.PostNotFoundError)}}exports.getPostFileData=getPostFileData;async function getPostFileDataV2(shdw,postPublicKey){try{const response=await axios_1.default.get(`${constants_1.shadowDriveDomain}${shdw.toString()}/${postPublicKey.toString()}.json?timestamp=${(new Date).getTime()}`);if(response.status!==200)return Promise.resolve(null);response.data.publicKey=postPublicKey.toString();return Promise.resolve(response.data)}catch{return Promise.resolve(null)}}exports.getPostFileDataV2=getPostFileDataV2},{"../../utils/constants":148,"../../utils/errors":160,axios:186}],132:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});const anchor_1=require("@coral-xyz/anchor");const models_1=require("../../models");const constants_1=require("../../utils/constants");const errors_1=require("../../utils/errors");const helpers_1=require("./helpers");const helpers_2=require("../../utils/helpers");const anchor=__importStar(require("@coral-xyz/anchor"));async function updatePost(publicKey,metadata=null,files=null){try{if(this.identity===null)throw new errors_1.IdentityNotSelectedError;const metadataObject=metadata?JSON.parse(JSON.stringify(metadata)):null;if(typeof metadataObject!=="object")throw new Error("Invalid JSON object");const onChainPost=await this.anchorProgram.account.post.fetch(publicKey);const postChain=new models_1.PostChain(publicKey,onChainPost);const storageAccount=(0,helpers_2.findStorageAccountPK)(this.identity.storage,postChain.shdw);const postJson=await(0,helpers_1.getPostFileData)(storageAccount,publicKey);if(metadata!==null){postJson.metadata=metadataObject}const mediaData=[];const filesToUpload=[];if(files!==null&&files.length>0){postJson.files.forEach(file=>{this.shadowDrive.deleteFile(this.storageAccount,file.file,"v2")});for(let index=0;index<files.length;index++){const file=files[index];mediaData.push({title:file.title??null,description:file.description??null,externalUrl:file.externalUrl??null,file:`${constants_1.shadowDriveDomain}${this.storageAccount}/${publicKey.toString()}-${index+1}.${file?.type.split("/")[1]}`,type:file?.type.split("/")[1]});if(!constants_1.isBrowser){const RNFS=require("react-native-fs");const readedFile=await RNFS.readFile(file.uri,"base64");filesToUpload.push({uri:file.uri,name:`${publicKey.toString()}-${index+1}.${file?.type.split("/")[1]}`,type:file.type,size:file.size,file:Buffer.from(readedFile,"base64")})}else{filesToUpload.push(new File([(0,helpers_2.convertDataUriToBlob)(file.base64)],`${publicKey.toString()}-${index+1}.${file?.type.split("/")[1]}`))}}}if(mediaData.length>0){postJson.files=mediaData}let appFile;if(!constants_1.isBrowser){const RNFS=require("react-native-fs");const profileJSONPath=`${RNFS.DocumentDirectoryPath}/${postChain.publicKey.toString()}.json`;await RNFS.writeFile(profileJSONPath,JSON.stringify(postJson),"utf8");const statResult=await RNFS.stat(profileJSONPath);const file=await RNFS.readFile(profileJSONPath,"utf8");appFile={uri:`file://${profileJSONPath}`,type:"application/json",file:Buffer.from(file,"utf8"),name:`${postChain.publicKey.toString()}.json`,size:statResult.size}}else{const fileToSave=new Blob([JSON.stringify(postJson)],{type:"application/json"});appFile=new File([fileToSave],`${postChain.publicKey.toString()}.json`)}if(filesToUpload.length>0){await this.shadowDrive.uploadFiles(this.storageAccount,!constants_1.isBrowser?filesToUpload:filesToUpload)}await this.shadowDrive.editFile(this.storageAccount,`${constants_1.shadowDriveDomain}${storageAccount.toString()}/${postChain.publicKey.toString()}.json`,!constants_1.isBrowser?appFile:appFile,"v2");if(appFile!==null&&!constants_1.isBrowser){const RNFS=require("react-native-fs");RNFS.unlink(`${RNFS.DocumentDirectoryPath}/${postChain.publicKey.toString()}.json`)}const hash=(0,helpers_2.getPublicKeyFromSeed)(`${postJson.timestamp}-${this.identity.userId.toString()}-${postChain.parent.toString()}`);const[ControllerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("controller")],constants_1.programId);await this.anchorProgram.methods.updatePost(this.identity.userId.toString(),hash).accounts({authority:this.sessionWallet.publicKey,controller:ControllerPDA,identity:this.identity.publicKey,post:postChain.publicKey}).rpc();return Promise.resolve({publicKey:postChain.publicKey,timestamp:postChain.timestamp,userId:postChain.userId,parent:postChain.parent,parentType:postChain.parentType,like:postChain.like,status:postChain.status,bump:postChain.bump,files:postJson.files,metadata:postJson.metadata})}catch(error){return Promise.reject(error)}}exports.default=updatePost}).call(this)}).call(this,require("buffer").Buffer)},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"../../utils/helpers":164,"./helpers":131,"@coral-xyz/anchor":16,buffer:269,"react-native-fs":undefined}],133:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});const helpers_1=require("../../utils/helpers");const anchor=__importStar(require("@coral-xyz/anchor"));const anchor_1=require("@coral-xyz/anchor");const constants_1=require("../../utils/constants");const models_1=require("../../models");const dayjs_1=__importDefault(require("dayjs"));const InvalidAvatarType_1=__importDefault(require("../../utils/errors/InvalidAvatarType"));const errors_1=require("../../utils/errors");async function createProfile(appId=null,acceptTos,action,name=null,avatar=null,description=null,metadata=null){try{if(this.identity===null)throw new errors_1.IdentityNotSelectedError;const metadataObject=metadata?JSON.parse(JSON.stringify(metadata)):null;if(typeof metadataObject!=="object")throw new Error("Invalid JSON object");if(avatar!==null&&!(0,helpers_1.isValidAvatar)(avatar))throw new InvalidAvatarType_1.default;const hash=(0,helpers_1.getPublicKeyFromSeed)(`${this.identity.userId}-${appId??""}`);const[ControllerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("controller")],constants_1.programId);const[ProfilePDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("profile"),hash.toBuffer()],constants_1.programId);const profileExist=await existProfile(this.anchorProgram,ProfilePDA);if(profileExist)throw new errors_1.ProfileAlreadyExistError;const filesToUpload=[];if(avatar!==null){if(!constants_1.isBrowser){const RNFS=require("react-native-fs");const readedFile=await RNFS.readFile(avatar.uri,"base64");filesToUpload.push({uri:avatar.uri,name:`${ProfilePDA.toString()}-avatar.${avatar.type.split("/")[1]}`,type:avatar.type,size:avatar.size,file:Buffer.from(readedFile,"base64")})}else{filesToUpload.push(new File([(0,helpers_1.convertDataUriToBlob)(avatar.base64)],`${ProfilePDA.toString()}-avatar.${avatar.type.split("/")[1]}`))}}let descriptionTextFile;if(description!==null){if(!constants_1.isBrowser){const RNFS=require("react-native-fs");const descriptionTextPath=`${RNFS.DocumentDirectoryPath}/${ProfilePDA.toString()}.txt`;await RNFS.writeFile(descriptionTextPath,description,"utf8");const statResult=await RNFS.stat(descriptionTextPath);const file=await RNFS.readFile(descriptionTextPath,"utf8");descriptionTextFile={uri:`file://${descriptionTextPath}`,type:"text/plain",file:Buffer.from(file,"utf8"),name:`${ProfilePDA.toString()}.txt`,size:statResult.size};filesToUpload.push(descriptionTextFile)}else{descriptionTextFile=new File([new Blob([description],{type:"text/plain"})],`${ProfilePDA.toString()}.txt`);filesToUpload.push(descriptionTextFile)}}const userProfileJson={timestamp:(0,dayjs_1.default)().unix().toString(),name:name,description:description?`${ProfilePDA.toString()}.txt`:null,avatar:avatar?{title:avatar.title??null,description:avatar.description??null,externalUrl:avatar.externalUrl??null,file:`${constants_1.shadowDriveDomain}${this.storageAccount}/${ProfilePDA.toString()}-avatar.${avatar.type.split("/")[1]}`,type:avatar.type.split("/")[1]}:null,metadata:metadataObject};if(!constants_1.isBrowser){const RNFS=require("react-native-fs");const profileJSONPath=`${RNFS.DocumentDirectoryPath}/${ProfilePDA.toString()}.json`;await RNFS.writeFile(profileJSONPath,JSON.stringify(userProfileJson),"utf8");const statResult=await RNFS.stat(profileJSONPath);const file=await RNFS.readFile(profileJSONPath,"utf8");filesToUpload.push({uri:`file://${profileJSONPath}`,type:"application/json",file:Buffer.from(file,"utf8"),name:`${ProfilePDA.toString()}.json`,size:statResult.size})}else{const fileToSave=new Blob([JSON.stringify(userProfileJson)],{type:"application/json"});filesToUpload.push(new File([fileToSave],`${ProfilePDA.toString()}.json`))}await this.shadowDrive.uploadFiles(this.storageAccount,!constants_1.isBrowser?filesToUpload:filesToUpload);if(!constants_1.isBrowser){const RNFS=require("react-native-fs");RNFS.unlink(`${RNFS.DocumentDirectoryPath}/${ProfilePDA.toString()}.json`);if(descriptionTextFile!=null){RNFS.unlink(`${RNFS.DocumentDirectoryPath}/${ProfilePDA.toString()}.txt`)}}await this.anchorProgram.methods.createProfile(this.identity.userId.toString(),hash,this.storageAccountIndex,acceptTos,action,appId).accounts({authority:this.sessionWallet.publicKey,controller:ControllerPDA,identity:this.identity.publicKey,profile:ProfilePDA}).rpc();let onChainProfile=null;while(onChainProfile==null){try{onChainProfile=await this.anchorProgram.account.profile.fetch(ProfilePDA)}catch(error){}}const profileChain=new models_1.ProfileChain(ProfilePDA,onChainProfile);return Promise.resolve({publicKey:profileChain.publicKey,timestamp:profileChain.timestamp,appId:profileChain.appId,userId:profileChain.userId,shdw:profileChain.shdw,status:profileChain.status,role:profileChain.role,acceptedTOS:profileChain.acceptedTOS,name:name,description:description?description:null,avatar:userProfileJson.avatar,metadata:metadataObject})}catch(error){return Promise.reject(error)}}exports.default=createProfile;async function existProfile(anchorProgram,publicKey){try{await anchorProgram.account.profile.fetch(publicKey);return Promise.resolve(true)}catch(error){if(error.message.includes("Account does not exist"))return Promise.resolve(false);return Promise.reject(error)}}}).call(this)}).call(this,require("buffer").Buffer)},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"../../utils/errors/InvalidAvatarType":153,"../../utils/helpers":164,"@coral-xyz/anchor":16,buffer:269,dayjs:284,"react-native-fs":undefined}],134:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@coral-xyz/anchor"));const anchor_1=require("@coral-xyz/anchor");const constants_1=require("../../utils/constants");const helpers_1=require("./helpers");const errors_1=require("../../utils/errors");const helpers_2=require("../../utils/helpers");const models_1=require("../../models");async function deleteProfile(appId=null){try{if(this.identity===null)throw new errors_1.IdentityNotSelectedError;const hash=(0,helpers_2.getPublicKeyFromSeed)(`${this.identity.userId}${appId??""}`);const[ProfilePDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("profile"),hash.toBuffer()],constants_1.programId);const onChainProfile=await this.anchorProgram.account.profile.fetch(ProfilePDA);const profileChain=new models_1.ProfileChain(ProfilePDA,onChainProfile);const storageAccount=(0,helpers_2.findStorageAccountPK)(this.identity.storage,profileChain.shdw);const profileFileData=await(0,helpers_1.getProfileFileData)(storageAccount,ProfilePDA);if(profileFileData.avatar!=null){await this.shadowDrive.deleteFile(storageAccount.toString(),`${constants_1.shadowDriveDomain}${storageAccount.toString()}/${profileFileData.avatar.file}`,"v2")}await this.shadowDrive.deleteFile(storageAccount.toString(),`${constants_1.shadowDriveDomain}${storageAccount.toString()}/${profileChain.publicKey}.json`,"v2");const[ControllerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("controller")],constants_1.programId);await this.anchorProgram.methods.deleteProfile(this.identity.userId.toString(),hash).accounts({authority:this.sessionWallet.publicKey,controller:ControllerPDA,identity:this.identity.publicKey,profile:ProfilePDA}).rpc();return Promise.resolve()}catch(error){return Promise.reject(error)}}exports.default=deleteProfile},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"../../utils/helpers":164,"./helpers":137,"@coral-xyz/anchor":16}],135:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const constants_1=require("../../utils/constants");const models_1=require("../../models");const helpers_1=require("./helpers");const anchor_1=require("@coral-xyz/anchor");const errors_1=require("../../utils/errors");const helpers_2=require("../../utils/helpers");const bytes_1=require("@coral-xyz/anchor/dist/cjs/utils/bytes");const profile_1=require("../../utils/gql/profile");async function getProfileByUserId(userId,appId=null){try{if(this.graphQLClient!==null){const profileQuery=await this.graphQLClient.request(profile_1.GetProfileByUserIdQueryDocument,{userId:userId,appId:appId});if(profileQuery.getProfiles===null||profileQuery.getProfiles.length===0)throw new errors_1.ProfileNotFoundError;const onChainProfile=profileQuery.getProfiles[0];const profilePublicKey=new anchor_1.web3.PublicKey(onChainProfile.public_key);const storageAccount=(0,helpers_2.findStorageAccountPK)(new anchor_1.web3.PublicKey(onChainProfile.identities.storage),onChainProfile.shdw);const userProfileJson=await(0,helpers_1.getProfileFileData)(storageAccount,profilePublicKey);if(userProfileJson.description!=null){userProfileJson.description=await(0,helpers_2.getTextFromFile)(`${constants_1.shadowDriveDomain}${storageAccount}/${userProfileJson.description}`)}return Promise.resolve({publicKey:profilePublicKey,timestamp:onChainProfile.timestamp,appId:onChainProfile.app_id,userId:onChainProfile.user_id,shdw:onChainProfile.shdw,status:onChainProfile.status,role:onChainProfile.role,acceptedTOS:onChainProfile.accepted_tos,name:userProfileJson.name,description:userProfileJson.description,avatar:userProfileJson.avatar,metadata:userProfileJson.metadata})}else{const onChainProfiles=await this.anchorProgram.account.profile.all([{memcmp:{offset:8+4+2,bytes:bytes_1.bs58.encode(Uint8Array.from([userId]))}}]);if(onChainProfiles.length===0)throw new errors_1.ProfileNotFoundError;const profileChains=onChainProfiles.map(profile=>new models_1.ProfileChain(profile.publicKey,profile.account)).filter(profile=>profile.appId===appId);if(profileChains.length===0)throw new errors_1.ProfileNotFoundError;const profileChain=profileChains[0];const onChainIdentities=await this.anchorProgram.account.identitiy.all([{memcmp:{offset:8+4+4+4+1+32,bytes:bytes_1.bs58.encode(Uint8Array.from([profileChain.userId]))}}]);if(onChainIdentities.length===0)throw new errors_1.IdentityNotFoundError;const identity=onChainIdentities[0];const identityChain=new models_1.IdentityChain(identity.publicKey,identity.account);const storageAccount=(0,helpers_2.findStorageAccountPK)(identityChain.storage,profileChain.shdw);const userProfileJson=await(0,helpers_1.getProfileFileData)(storageAccount,profileChain.publicKey);if(userProfileJson.description!=null){userProfileJson.description=await(0,helpers_2.getTextFromFile)(`${constants_1.shadowDriveDomain}${storageAccount}/${userProfileJson.description}`)}return Promise.resolve({publicKey:profileChain.publicKey,timestamp:profileChain.timestamp,appId:profileChain.appId,userId:profileChain.userId,shdw:profileChain.shdw,status:profileChain.status,role:profileChain.role,acceptedTOS:profileChain.acceptedTOS,name:userProfileJson.name,description:userProfileJson.description,avatar:userProfileJson.avatar,metadata:userProfileJson.metadata})}}catch(error){if(error.message.includes("Account does not exist")||error instanceof errors_1.ProfileNotFoundError)return Promise.resolve(null);else return Promise.reject(error)}}exports.default=getProfileByUserId},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"../../utils/gql/profile":163,"../../utils/helpers":164,"./helpers":137,"@coral-xyz/anchor":16,"@coral-xyz/anchor/dist/cjs/utils/bytes":20}],136:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});const constants_1=require("../../utils/constants");const models_1=require("../../models");const helpers_1=require("./helpers");const anchor_1=require("@coral-xyz/anchor");const anchor=__importStar(require("@coral-xyz/anchor"));const errors_1=require("../../utils/errors");const helpers_2=require("../../utils/helpers");const profile_1=require("../../utils/gql/profile");async function getProfile(appId){try{if(this.identity===null)throw new errors_1.IdentityNotSelectedError;const hash=(0,helpers_2.getPublicKeyFromSeed)(`${this.identity.userId}-${appId??""}`);const[ProfilePDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("profile"),hash.toBuffer()],constants_1.programId);if(this.graphQLClient!==null){const profileQuery=await this.graphQLClient.request(profile_1.GetProfileByPublicKeyQueryDocument,{publicKey:ProfilePDA.toString()});if(profileQuery.profiles===null)throw new errors_1.ProfileNotFoundError;const onChainProfile=profileQuery.profiles;const storageAccount=(0,helpers_2.findStorageAccountPK)(this.identity.storage,onChainProfile.shdw);const userProfileJson=await(0,helpers_1.getProfileFileData)(storageAccount,ProfilePDA);if(userProfileJson.description!=null){userProfileJson.description=await(0,helpers_2.getTextFromFile)(`${constants_1.shadowDriveDomain}${storageAccount}/${userProfileJson.description}`)}return Promise.resolve({publicKey:ProfilePDA,timestamp:onChainProfile.timestamp,appId:onChainProfile.app_id,userId:onChainProfile.user_id,shdw:onChainProfile.shdw,status:onChainProfile.status,role:onChainProfile.role,acceptedTOS:onChainProfile.accepted_tos,name:userProfileJson.name,description:userProfileJson.description,avatar:userProfileJson.avatar,metadata:userProfileJson.metadata})}else{const onChainProfile=await this.anchorProgram.account.profile.fetch(ProfilePDA);const profileChain=new models_1.ProfileChain(ProfilePDA,onChainProfile);const storageAccount=(0,helpers_2.findStorageAccountPK)(this.identity.storage,profileChain.shdw);const userProfileJson=await(0,helpers_1.getProfileFileData)(storageAccount,ProfilePDA);if(userProfileJson.description!=null){userProfileJson.description=await(0,helpers_2.getTextFromFile)(`${constants_1.shadowDriveDomain}${storageAccount}/${userProfileJson.description}`)}return Promise.resolve({publicKey:profileChain.publicKey,timestamp:profileChain.timestamp,appId:profileChain.appId,userId:profileChain.userId,shdw:profileChain.shdw,status:profileChain.status,role:profileChain.role,acceptedTOS:profileChain.acceptedTOS,name:userProfileJson.name,description:userProfileJson.description,avatar:userProfileJson.avatar,metadata:userProfileJson.metadata})}}catch(error){if(error.message.includes("Account does not exist")||error instanceof errors_1.ProfileNotFoundError)return Promise.resolve(null);else return Promise.reject(error)}}exports.default=getProfile},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"../../utils/gql/profile":163,"../../utils/helpers":164,"./helpers":137,"@coral-xyz/anchor":16}],137:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.getProfileFileData=void 0;const constants_1=require("../../utils/constants");const errors_1=require("../../utils/errors");const axios_1=__importDefault(require("axios"));async function getProfileFileData(shdw,profilePublicKey){try{const response=await axios_1.default.get(`${constants_1.shadowDriveDomain}${shdw.toString()}/${profilePublicKey.toString()}.json?timestamp=${(new Date).getTime()}`);if(response.status!==200)throw new errors_1.ProfileNotFoundError;return Promise.resolve(response.data)}catch{return Promise.reject(new errors_1.ProfileNotFoundError)}}exports.getProfileFileData=getProfileFileData},{"../../utils/constants":148,"../../utils/errors":160,axios:186}],138:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});const helpers_1=require("../../utils/helpers");const anchor=__importStar(require("@coral-xyz/anchor"));const anchor_1=require("@coral-xyz/anchor");const constants_1=require("../../utils/constants");const models_1=require("../../models");const helpers_2=require("./helpers");const InvalidAvatarType_1=__importDefault(require("../../utils/errors/InvalidAvatarType"));const errors_1=require("../../utils/errors");async function updateProfile(appId=null,acceptTos,action,name=null,avatar=null,description=null,metadata=null){try{if(this.identity===null)throw new errors_1.IdentityNotSelectedError;const metadataObject=metadata?JSON.parse(JSON.stringify(metadata)):null;if(typeof metadataObject!=="object")throw new Error("Invalid JSON object");if(avatar!==null&&!(0,helpers_1.isValidAvatar)(avatar))throw new InvalidAvatarType_1.default;const hash=(0,helpers_1.getPublicKeyFromSeed)(`${this.identity.userId}${appId??""}`);const[ControllerPDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("controller")],constants_1.programId);const[ProfilePDA]=anchor_1.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("profile"),hash.toBuffer()],constants_1.programId);const onChainProfile=await this.anchorProgram.account.profile.fetch(ProfilePDA);const profileChain=new models_1.ProfileChain(ProfilePDA,onChainProfile);const storageAccount=(0,helpers_1.findStorageAccountPK)(this.identity.storage,profileChain.shdw);const userProfileJson=await(0,helpers_2.getProfileFileData)(storageAccount,ProfilePDA);let userAvatarFile=null;if(avatar!==null){if(!constants_1.isBrowser){const RNFS=require("react-native-fs");const readedFile=await RNFS.readFile(avatar.uri,"base64");userAvatarFile={uri:avatar.uri,name:`${profileChain.publicKey.toString()}.${avatar.type.split("/")[1]}`,type:avatar.type,size:avatar.size,file:Buffer.from(readedFile,"base64")}}else{userAvatarFile=new File([(0,helpers_1.convertDataUriToBlob)(avatar.base64)],`${profileChain.publicKey.toString()}.${avatar.type.split("/")[1]}`)}}if(userAvatarFile!=null){if(userProfileJson.avatar!==null&&userProfileJson.avatar.type===avatar.type.split("/")[1]){await this.shadowDrive.editFile(this.storageAccount,`${constants_1.shadowDriveDomain}${storageAccount.toString()}/${userProfileJson.avatar.file}`,!constants_1.isBrowser?userAvatarFile:userAvatarFile,"v2")}else{await this.shadowDrive.uploadFile(storageAccount,!constants_1.isBrowser?userAvatarFile:userAvatarFile)}}if(name!==null){userProfileJson.name=name}if(description!==null){userProfileJson.description=description}if(avatar!==null){userProfileJson.avatar=userAvatarFile?{title:avatar.title??null,description:avatar.description??null,externalUrl:avatar.externalUrl??null,file:`${constants_1.shadowDriveDomain}${this.storageAccount}/${profileChain.publicKey.toString()}.${avatar.type.split("/")[1]}`,type:avatar.type.split("/")[1]}:null}if(metadata!==null){userProfileJson.metadata=metadataObject}let profileFile;if(!constants_1.isBrowser){const RNFS=require("react-native-fs");const profileJSONPath=`${RNFS.DocumentDirectoryPath}/${profileChain.publicKey.toString()}.json`;await RNFS.writeFile(profileJSONPath,JSON.stringify(userProfileJson),"utf8");const statResult=await RNFS.stat(profileJSONPath);const file=await RNFS.readFile(profileJSONPath,"utf8");profileFile={uri:`file://${profileJSONPath}`,type:"application/json",file:Buffer.from(file,"utf8"),name:`${profileChain.publicKey.toString()}.json`,size:statResult.size}}else{const fileToSave=new Blob([JSON.stringify(userProfileJson)],{type:"application/json"});profileFile=new File([fileToSave],`${profileChain.publicKey.toString()}.json`)}await this.shadowDrive.editFile(storageAccount,`${constants_1.shadowDriveDomain}${storageAccount.toString()}/${profileChain.publicKey.toString()}.json`,!constants_1.isBrowser?profileFile:profileFile,"v2");if(profileFile!==null&&!constants_1.isBrowser){const RNFS=require("react-native-fs");RNFS.unlink(`${RNFS.DocumentDirectoryPath}/${profileChain.publicKey.toString()}.json`)}await this.anchorProgram.methods.updateProfile(this.identity.userId.toString(),hash,action,Number(acceptTos)).accounts({authority:this.sessionWallet.publicKey,controller:ControllerPDA,identity:this.identity.publicKey,profile:ProfilePDA}).rpc();return Promise.resolve({publicKey:profileChain.publicKey,timestamp:profileChain.timestamp,appId:profileChain.appId,userId:profileChain.userId,shdw:profileChain.shdw,status:profileChain.status,role:profileChain.role,acceptedTOS:Number(acceptTos),name:name?name:null,description:description?description:null,avatar:userProfileJson.avatar,metadata:metadataObject})}catch(error){return Promise.reject(error)}}exports.default=updateProfile}).call(this)}).call(this,require("buffer").Buffer)},{"../../models":145,"../../utils/constants":148,"../../utils/errors":160,"../../utils/errors/InvalidAvatarType":153,"../../utils/helpers":164,"./helpers":137,"@coral-xyz/anchor":16,buffer:269,"react-native-fs":undefined}],139:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AppChain=void 0;class AppChain{constructor(publicKey,accountData){this.publicKey=publicKey;this.timestamp=accountData.ts;this.userId=accountData.uid;this.appId=accountData.aid;this.shdw=accountData.shdw;this.status=accountData.st;this.acceptedTOS=accountData.accepted_tos}get key(){return this.publicKey.toBase58()}}exports.AppChain=AppChain},{}],140:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GroupChain=void 0;class GroupChain{constructor(publicKey,accountData){this.publicKey=publicKey;this.timestamp=accountData.ts;this.userId=accountData.uid;this.groupId=accountData.gid;this.parent=accountData.parent;this.parentType=accountData.parentType;this.shdw=accountData.shdw;this.status=accountData.st;this.acceptedTOS=accountData.acceptedTos;this.bump=accountData.bump}get key(){return this.publicKey.toBase58()}}exports.GroupChain=GroupChain},{}],141:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IdentityChain=void 0;class IdentityChain{constructor(publicKey,accountData){this.publicKey=publicKey;this.creationTimestamp=accountData.creationTs;this.updateTimestamp=accountData.updateTs;this.issuer=accountData.issuer;this.verified=accountData.verified;this.authority=accountData.authority;this.storage=accountData.storage;this.userId=accountData.uid;this.actions=accountData.actions;this.userSessions=accountData.ses;this.acceptedTOS=accountData.acceptedTos}get key(){return this.publicKey.toBase58()}}exports.IdentityChain=IdentityChain},{}],142:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IssuerChain=void 0;class IssuerChain{constructor(accountData){this.key=accountData.issuer_key;this.id=accountData.issuer_id;this.verified=accountData.verified}get publicKey(){return this.key.toBase58()}}exports.IssuerChain=IssuerChain},{}],143:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PostChain=void 0;class PostChain{constructor(publicKey,accountData){this.publicKey=publicKey;this.timestamp=accountData.ts;this.userId=accountData.uid;this.parent=accountData.parent;this.parentType=accountData.parentType;this.shdw=accountData.shdw;this.like=accountData.like;this.status=accountData.st;this.bump=accountData.bump}get key(){return this.publicKey.toBase58()}}exports.PostChain=PostChain},{}],144:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ProfileChain=void 0;class ProfileChain{constructor(publicKey,accountData){this.publicKey=publicKey;this.timestamp=accountData.ts;this.appId=accountData.aid;this.userId=accountData.uid;this.shdw=accountData.shdw;this.status=accountData.st;this.role=accountData.role;this.acceptedTOS=accountData.acceptedTos}get key(){return this.publicKey.toBase58()}}exports.ProfileChain=ProfileChain},{}],145:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GroupChain=exports.PostChain=exports.AppChain=exports.ProfileChain=exports.IdentityChain=exports.IssuerChain=void 0;const IssuerChain_1=require("./IssuerChain");Object.defineProperty(exports,"IssuerChain",{enumerable:true,get:function(){return IssuerChain_1.IssuerChain}});const IdentityChain_1=require("./IdentityChain");Object.defineProperty(exports,"IdentityChain",{enumerable:true,get:function(){return IdentityChain_1.IdentityChain}});const ProfileChain_1=require("./ProfileChain");Object.defineProperty(exports,"ProfileChain",{enumerable:true,get:function(){return ProfileChain_1.ProfileChain}});const AppChain_1=require("./AppChain");Object.defineProperty(exports,"AppChain",{enumerable:true,get:function(){return AppChain_1.AppChain}});const PostChain_1=require("./PostChain");Object.defineProperty(exports,"PostChain",{enumerable:true,get:function(){return PostChain_1.PostChain}});const GroupChain_1=require("./GroupChain");Object.defineProperty(exports,"GroupChain",{enumerable:true,get:function(){return GroupChain_1.GroupChain}})},{"./AppChain":139,"./GroupChain":140,"./IdentityChain":141,"./IssuerChain":142,"./PostChain":143,"./ProfileChain":144}],146:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ParentType=void 0;var ParentType;(function(ParentType){ParentType[ParentType["App"]=1]="App";ParentType[ParentType["Group"]=2]="Group"})(ParentType=exports.ParentType||(exports.ParentType={}))},{}],147:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AnchorWallet=void 0;class AnchorWallet{constructor(payer){this.payer=payer;this.payer=payer}async signTransaction(tx){tx.partialSign(this.payer);return tx}async signAllTransactions(txs){return txs.map(t=>{t.partialSign(this.payer);return t})}get publicKey(){return this.payer.publicKey}}exports.AnchorWallet=AnchorWallet},{}],148:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NEW_AUTH_API=exports.AUTH_API=exports.INDEXER_GRAPH_QL_AUTH_KEY=exports.INDEXER_GRAPH_QL_ENDPOINT=exports.shadowDriveDomain=exports.shadowProgramId=exports.programId=exports.isBrowser=void 0;const anchor_1=require("@coral-xyz/anchor");exports.isBrowser=typeof document!=="undefined";exports.programId=new anchor_1.web3.PublicKey("DzeYb2NmuErwXmaDqMzBYWdZVRYQjuEynZwAzyNVC5xF");exports.shadowProgramId=new anchor_1.web3.PublicKey("2e1wdyNhUvE76y6yUCvah2KaviavMJYKoRun8acMRBZZ");exports.shadowDriveDomain="https://shdw-drive.genesysgo.net/";exports.INDEXER_GRAPH_QL_ENDPOINT="https://bavaro.eu.stepzen.net/api/indexer/__graphql";exports.INDEXER_GRAPH_QL_AUTH_KEY="apikey bavaro::stepzen.net+1000::16bbead8af4ee1dd6ccbf512112677ee6539e0a2a1cad73d5c82fc4b70202162";exports.AUTH_API="https://gir8cmdrdt.eu-central-1.awsapprunner.com";exports.NEW_AUTH_API="https://wqgipvyimk.eu-central-1.awsapprunner.com/v2"},{"@coral-xyz/anchor":16}],149:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class AppNotFoundError extends Error{constructor(){super("App not found.");Object.setPrototypeOf(this,AppNotFoundError.prototype)}}exports.default=AppNotFoundError},{}],150:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class GroupNotFoundError extends Error{constructor(){super("Group not found.");Object.setPrototypeOf(this,GroupNotFoundError.prototype)}}exports.default=GroupNotFoundError},{}],151:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class IdentityNotFoundError extends Error{constructor(){super("Identity not found.");Object.setPrototypeOf(this,IdentityNotFoundError.prototype)}}exports.default=IdentityNotFoundError},{}],152:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class IdentityNotSelectedError extends Error{constructor(){super("Identity not selected.");Object.setPrototypeOf(this,IdentityNotSelectedError.prototype)}}exports.default=IdentityNotSelectedError},{}],153:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class InvalidAvatarType extends Error{constructor(){super('Avatar file type is invalid. Valid types: ("jpg", "jpeg", "png", "gif")');Object.setPrototypeOf(this,InvalidAvatarType.prototype)}}exports.default=InvalidAvatarType},{}],154:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class InvalidBannerType extends Error{constructor(){super('Banner file type is invalid. Valid types: ("jpg", "jpeg", "png", "gif")');Object.setPrototypeOf(this,InvalidBannerType.prototype)}}exports.default=InvalidBannerType},{}],155:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class InvalidHashError extends Error{constructor(){super("Hash is invalid or does not match.");Object.setPrototypeOf(this,InvalidHashError.prototype)}}exports.default=InvalidHashError},{}],156:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class IssuerNotFoundError extends Error{constructor(){super("Issuer not found.");Object.setPrototypeOf(this,IssuerNotFoundError.prototype)}}exports.default=IssuerNotFoundError},{}],157:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class PostNotFoundError extends Error{constructor(){super("Post not found.");Object.setPrototypeOf(this,PostNotFoundError.prototype)}}exports.default=PostNotFoundError},{}],158:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class ProfileAlreadyExistError extends Error{constructor(){super("Profile already exist.");Object.setPrototypeOf(this,ProfileAlreadyExistError.prototype)}}exports.default=ProfileAlreadyExistError},{}],159:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class ProfileNotFoundError extends Error{constructor(){super("Profile not found.");Object.setPrototypeOf(this,ProfileNotFoundError.prototype)}}exports.default=ProfileNotFoundError},{}],160:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.InvalidAvatarType=exports.InvalidBannerType=exports.GroupNotFoundError=exports.PostNotFoundError=exports.ProfileAlreadyExistError=exports.IdentityNotSelectedError=exports.AppNotFoundError=exports.InvalidHashError=exports.ProfileNotFoundError=exports.IdentityNotFoundError=exports.IssuerNotFoundError=void 0;const IssuerNotFoundError_1=__importDefault(require("./IssuerNotFoundError"));exports.IssuerNotFoundError=IssuerNotFoundError_1.default;const IdentityNotFoundError_1=__importDefault(require("./IdentityNotFoundError"));exports.IdentityNotFoundError=IdentityNotFoundError_1.default;const ProfileNotFoundError_1=__importDefault(require("./ProfileNotFoundError"));exports.ProfileNotFoundError=ProfileNotFoundError_1.default;const InvalidHashError_1=__importDefault(require("./InvalidHashError"));exports.InvalidHashError=InvalidHashError_1.default;const AppNotFoundError_1=__importDefault(require("./AppNotFoundError"));exports.AppNotFoundError=AppNotFoundError_1.default;const IdentityNotSelectedError_1=__importDefault(require("./IdentityNotSelectedError"));exports.IdentityNotSelectedError=IdentityNotSelectedError_1.default;const ProfileAlreadyExistError_1=__importDefault(require("./ProfileAlreadyExistError"));exports.ProfileAlreadyExistError=ProfileAlreadyExistError_1.default;const PostNotFoundError_1=__importDefault(require("./PostNotFoundError"));exports.PostNotFoundError=PostNotFoundError_1.default;const GroupNotFoundError_1=__importDefault(require("./GroupNotFoundError"));exports.GroupNotFoundError=GroupNotFoundError_1.default;const InvalidAvatarType_1=__importDefault(require("./InvalidAvatarType"));exports.InvalidAvatarType=InvalidAvatarType_1.default;const InvalidBannerType_1=__importDefault(require("./InvalidBannerType"));exports.InvalidBannerType=InvalidBannerType_1.default},{"./AppNotFoundError":149,"./GroupNotFoundError":150,"./IdentityNotFoundError":151,"./IdentityNotSelectedError":152,"./InvalidAvatarType":153,"./InvalidBannerType":154,"./InvalidHashError":155,"./IssuerNotFoundError":156,"./PostNotFoundError":157,"./ProfileAlreadyExistError":158,"./ProfileNotFoundError":159}],161:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GetGroupByIdQueryDocument=exports.GetAllGroupsByUserIdQueryDocument=void 0;const gql_1=require("../../gql/gql");exports.GetAllGroupsByUserIdQueryDocument=(0,gql_1.graphql)(`
    query GetAllGroupsByUserId($userId: Int!, $limit: Int, $offset: Int) {
        groupsPaginatedList_user_id(user_id: $userId, limit: $limit, offset: $offset) {
            accepted_tos
            bump
            group_id
            parent
            parent_type
            public_key
            shdw
            status
            timestamp
            user_id
            identities {
                accepted_tos
                actions
                authority
                bump
                creation_ts
                issuer
                public_key
                ses
                storage
                update_ts
                user_id
                verified
            }
        }
    }      
`);exports.GetGroupByIdQueryDocument=(0,gql_1.graphql)(`
    query GetGroupById($groupId: Int!) {
        groups(group_id: $groupId) {
            accepted_tos
            bump
            group_id
            parent
            parent_type
            public_key
            shdw
            status
            timestamp
            user_id
            identities {
                accepted_tos
                actions
                authority
                bump
                creation_ts
                issuer
                public_key
                ses
                storage
                update_ts
                user_id
                verified
            }
        }
    }      
`)},{"../../gql/gql":103}],162:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GetPostByPublicKeyQueryDocument=exports.GetAllPostByParentQueryDocument=exports.GetAllPostBySearchQueryDocument=void 0;const gql_1=require("../../gql/gql");exports.GetAllPostBySearchQueryDocument=(0,gql_1.graphql)(`
    query GetAllPostBySearch($appId: Int!, $typeOfWork: String, $latitude: Float, $longitude: Float, $maxDistance: Int, $minHours: Int, $maxHours: Int, $jobTitle: String, $test: Boolean, $limit: Int, $offset: Int) {
        postsPaginatedList_app_id_search_v3(appId: $appId, type_of_work: $typeOfWork, latitude: $latitude, longitude: $longitude, max_distance: $maxDistance, min_hours: $minHours, max_hours: $maxHours, job_title: $jobTitle, test: $test, limit: $limit, offset: $offset) {
            user_id
            timestamp
            status
            shdw
            public_key
            parent_type
            parent
            like
            bump
            identity {
                accepted_tos
                actions
                authority
                bump
                creation_ts
                issuer
                public_key
                ses
                storage
                update_ts
                user_id
                verified
            }
            group {
                accepted_tos
                bump
                group_id
                parent
                parent_type
                public_key
                shdw
                status
                timestamp
                user_id
                identities {
                    accepted_tos
                    actions
                    authority
                    bump
                    creation_ts
                    issuer
                    public_key
                    ses
                    storage
                    update_ts
                    user_id
                    verified
                }
            }
        }
    }      
`);exports.GetAllPostByParentQueryDocument=(0,gql_1.graphql)(`
    query GetAllPostByParent($parentType: Int!, $parent: Int!, $limit: Int, $offset: Int) {
        postsPaginatedList_parent(parent_type: $parentType, parent: $parent, limit: $limit, offset: $offset) {
            user_id
            timestamp
            status
            shdw
            public_key
            parent_type
            parent
            like
            bump
            identities {
                accepted_tos
                actions
                authority
                bump
                creation_ts
                issuer
                public_key
                ses
                storage
                update_ts
                user_id
                verified
            }
        }
    }      
`);exports.GetPostByPublicKeyQueryDocument=(0,gql_1.graphql)(`
    query GetPostByPublicKey($publicKey: String!) {
        posts(public_key: $publicKey) {
            user_id
            timestamp
            status
            shdw
            public_key
            parent_type
            parent
            like
            bump
            identities {
                accepted_tos
                actions
                authority
                bump
                creation_ts
                issuer
                public_key
                ses
                storage
                update_ts
                user_id
                verified
            }
        }
    }      
`)},{"../../gql/gql":103}],163:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GetProfileByPublicKeyQueryDocument=exports.GetProfileByUserIdQueryDocument=void 0;const gql_1=require("../../gql/gql");exports.GetProfileByUserIdQueryDocument=(0,gql_1.graphql)(`
    query GetProfileByUserId($userId: Int!, $appId: Int) {
        getProfiles(user_id: $userId, app_id: $appId) {
            user_id
            timestamp
            status
            shdw
            role
            public_key
            bump
            app_id
            accepted_tos
            identities {
                accepted_tos
                actions
                authority
                bump
                creation_ts
                issuer
                public_key
                ses
                storage
                update_ts
                user_id
                verified
            }
        }
    }      
`);exports.GetProfileByPublicKeyQueryDocument=(0,gql_1.graphql)(`
    query GetProfileByPublicKey($publicKey: String!) {
        profiles(public_key: $publicKey) {
            user_id
            timestamp
            status
            shdw
            role
            public_key
            bump
            app_id
            accepted_tos
            identities {
                accepted_tos
                actions
                authority
                bump
                creation_ts
                issuer
                public_key
                ses
                storage
                update_ts
                user_id
                verified
            }
        }
    }      
`)},{"../../gql/gql":103}],164:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.convertTextToOptionalString=exports.isValidBanner=exports.isValidAvatar=exports.getPublicKeyFromSeed=exports.getTextFromFile=exports.convertDataUriToBlob=exports.findStorageAccountPK=exports.createSplingProtocolProgram=void 0;const anchor=__importStar(require("@coral-xyz/anchor"));const constants_1=require("./constants");const idl_1=require("./idl");const axios_1=__importDefault(require("axios"));function createSplingProtocolProgram(connection,wallet){const anchorProvider=new anchor.AnchorProvider(connection,wallet,{});return new anchor.Program(idl_1.IDL,constants_1.programId,anchorProvider)}exports.createSplingProtocolProgram=createSplingProtocolProgram;function findStorageAccountPK(storagePK,index){const[StorageAccountPDA]=anchor.web3.PublicKey.findProgramAddressSync([anchor.utils.bytes.utf8.encode("storage-account"),storagePK.toBuffer(),new anchor.BN(index).toTwos(0).toArrayLike(Buffer,"le",4)],constants_1.shadowProgramId);return StorageAccountPDA}exports.findStorageAccountPK=findStorageAccountPK;function convertDataUriToBlob(dataURI){const byteString=atob(dataURI.split(",")[1]);const mimeString=dataURI.split(",")[0].split(":")[1].split(";")[0];const ab=new ArrayBuffer(byteString.length);const ia=new Uint8Array(ab);for(let i=0;i<byteString.length;i++){ia[i]=byteString.charCodeAt(i)}return new Blob([ab],{type:mimeString})}exports.convertDataUriToBlob=convertDataUriToBlob;async function getTextFromFile(url){try{const response=await axios_1.default.get(url);if(response.status!==200)return Promise.resolve(null);return Promise.resolve(response.data)}catch(error){return Promise.resolve(null)}}exports.getTextFromFile=getTextFromFile;function getPublicKeyFromSeed(seed){const hex=new Uint8Array(Buffer.from(Buffer.from(seed.padEnd(32,"0"))));return anchor.web3.Keypair.fromSeed(hex).publicKey}exports.getPublicKeyFromSeed=getPublicKeyFromSeed;function isValidAvatar(file){return["jpg","jpeg","png","gif"].includes(file.type.split("/")[1])}exports.isValidAvatar=isValidAvatar;function isValidBanner(file){return["jpg","jpeg","png","gif"].includes(file.type.split("/")[1])}exports.isValidBanner=isValidBanner;function convertTextToOptionalString(text){return isValidJSON(text)?JSON.stringify(text):text}exports.convertTextToOptionalString=convertTextToOptionalString;function isValidJSON(str){return/^[\s\n\r]*[{].*[}][\s\n\r]*$/.test(JSON.stringify(str))}}).call(this)}).call(this,require("buffer").Buffer)},{"./constants":148,"./idl":165,"@coral-xyz/anchor":16,axios:186,buffer:269}],165:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IDL=void 0;exports.IDL={version:"0.1.0",name:"v3_spling",instructions:[{name:"createController",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"controller",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[]},{name:"createIssuer",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"controller",isMut:true,isSigner:false},{name:"issuer",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[]},{name:"createIdentity",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"controller",isMut:true,isSigner:false},{name:"issuer",isMut:true,isSigner:false},{name:"identity",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[{name:"sessionAuthority",type:"publicKey"},{name:"storage",type:"publicKey"},{name:"tos",type:"u8"}]},{name:"updateIdentity",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"issuer",isMut:true,isSigner:false},{name:"identity",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[{name:"uid",type:"string"},{name:"sessionAuthority",type:"publicKey"}]},{name:"createApp",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"controller",isMut:true,isSigner:false},{name:"identity",isMut:false,isSigner:false},{name:"app",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[{name:"uid",type:"string"},{name:"hash",type:"publicKey"},{name:"shdw",type:"u8"},{name:"tos",type:"u8"},{name:"action",type:"bool"}]},{name:"createProfile",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"controller",isMut:true,isSigner:false},{name:"identity",isMut:false,isSigner:false},{name:"profile",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[{name:"uid",type:"string"},{name:"hash",type:"publicKey"},{name:"shdw",type:"u8"},{name:"tos",type:"u8"},{name:"action",type:"bool"},{name:"aid",type:{option:"u32"}}]},{name:"createGroup",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"controller",isMut:true,isSigner:false},{name:"identity",isMut:false,isSigner:false},{name:"group",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[{name:"uid",type:"string"},{name:"hash",type:"publicKey"},{name:"shdw",type:"u8"},{name:"parentType",type:"u8"},{name:"parent",type:"u32"},{name:"tos",type:"u8"},{name:"action",type:"bool"}]},{name:"createPost",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"controller",isMut:true,isSigner:false},{name:"identity",isMut:false,isSigner:false},{name:"post",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[{name:"uid",type:"string"},{name:"shdw",type:"u8"},{name:"hash",type:"publicKey"},{name:"parentType",type:"u8"},{name:"parent",type:"u32"},{name:"action",type:"bool"}]},{name:"createChamber",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"identity",isMut:true,isSigner:false},{name:"chamber",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[]},{name:"updateChamber",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"identity",isMut:false,isSigner:false},{name:"chamber",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[]},{name:"deletePost",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"controller",isMut:true,isSigner:false},{name:"identity",isMut:false,isSigner:false},{name:"post",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[{name:"uid",type:"string"},{name:"hash",type:"publicKey"}]},{name:"deleteGroup",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"controller",isMut:true,isSigner:false},{name:"identity",isMut:false,isSigner:false},{name:"group",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[{name:"uid",type:"string"},{name:"hash",type:"publicKey"}]},{name:"deleteProfile",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"controller",isMut:true,isSigner:false},{name:"identity",isMut:false,isSigner:false},{name:"profile",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[{name:"uid",type:"string"},{name:"hash",type:"publicKey"}]},{name:"deleteApp",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"controller",isMut:true,isSigner:false},{name:"identity",isMut:false,isSigner:false},{name:"app",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[{name:"uid",type:"string"},{name:"hash",type:"publicKey"}]},{name:"updateGroup",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"controller",isMut:true,isSigner:false},{name:"identity",isMut:false,isSigner:false},{name:"group",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[{name:"uid",type:"string"},{name:"hash",type:"publicKey"},{name:"action",type:"bool"},{name:"tos",type:{option:"u8"}}]},{name:"updateProfile",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"controller",isMut:true,isSigner:false},{name:"identity",isMut:false,isSigner:false},{name:"profile",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[{name:"uid",type:"string"},{name:"hash",type:"publicKey"},{name:"action",type:"bool"},{name:"tos",type:{option:"u8"}}]},{name:"updatePost",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"controller",isMut:true,isSigner:false},{name:"identity",isMut:false,isSigner:false},{name:"post",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[{name:"uid",type:"string"},{name:"hash",type:"publicKey"}]},{name:"updateApp",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"controller",isMut:true,isSigner:false},{name:"identity",isMut:false,isSigner:false},{name:"app",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[{name:"uid",type:"string"},{name:"hash",type:"publicKey"},{name:"action",type:"bool"},{name:"tos",type:{option:"u8"}}]},{name:"updateIssuer",accounts:[{name:"authority",isMut:true,isSigner:true},{name:"issuer",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[{name:"status",type:"u8"}]}],accounts:[{name:"Issuer",type:{kind:"struct",fields:[{name:"issuerKey",type:"publicKey"},{name:"issuerId",type:"u32"},{name:"verified",type:"u8"},{name:"bump",type:"u8"}]}},{name:"Identity",type:{kind:"struct",fields:[{name:"creationTs",type:"u32"},{name:"updateTs",type:"u32"},{name:"issuer",type:"u32"},{name:"verified",type:"u8"},{name:"authority",type:"publicKey"},{name:"storage",type:"publicKey"},{name:"uid",type:"u32"},{name:"actions",type:"u8"},{name:"ses",type:"u32"},{name:"acceptedTos",type:"u8"},{name:"bump",type:"u8"}]}},{name:"IdentityInfo",type:{kind:"struct",fields:[{name:"creationTs",type:"u32"},{name:"updateTs",type:"u32"},{name:"issuer",type:"u32"},{name:"verified",type:"u8"},{name:"authority",type:"publicKey"},{name:"uid",type:"u32"},{name:"actions",type:"u8"},{name:"acceptedTos",type:"u8"},{name:"bump",type:"u8"}]}},{name:"Controller",type:{kind:"struct",fields:[{name:"users",type:"u32"},{name:"groups",type:"u32"},{name:"apps",type:"u32"},{name:"issuer",type:"u32"},{name:"bump",type:"u8"}]}},{name:"App",type:{kind:"struct",fields:[{name:"ts",type:"u32"},{name:"uid",type:"u32"},{name:"aid",type:"u32"},{name:"shdw",type:"u8"},{name:"st",type:"u8"},{name:"acceptedTos",type:"u8"},{name:"bump",type:"u8"}]}},{name:"Profile",type:{kind:"struct",fields:[{name:"ts",type:"u32"},{name:"aid",type:"u32"},{name:"uid",type:"u32"},{name:"shdw",type:"u8"},{name:"st",type:"u8"},{name:"role",type:"u8"},{name:"acceptedTos",type:"u8"},{name:"bump",type:"u8"}]}},{name:"Group",type:{kind:"struct",fields:[{name:"ts",type:"u32"},{name:"uid",type:"u32"},{name:"gid",type:"u32"},{name:"parent",type:"u32"},{name:"parentType",type:"u8"},{name:"shdw",type:"u8"},{name:"st",type:"u8"},{name:"acceptedTos",type:"u8"},{name:"bump",type:"u8"}]}},{name:"Post",type:{kind:"struct",fields:[{name:"ts",type:"u32"},{name:"uid",type:"u32"},{name:"shdw",type:"u8"},{name:"parent",type:"u32"},{name:"parentType",type:"u8"},{name:"like",type:"u8"},{name:"st",type:"u8"},{name:"bump",type:"u8"}]}},{name:"Chamber",type:{kind:"struct",fields:[{name:"ts",type:"u32"},{name:"uid",type:"u32"},{name:"sec",type:"bytes"},{name:"bump",type:"u8"}]}}],errors:[{code:6e3,name:"SlowDown",msg:"Funding for user action exceeded"}],metadata:{address:"DzeYb2NmuErwXmaDqMzBYWdZVRYQjuEynZwAzyNVC5xF"}}},{}],166:[function(require,module,exports){"use strict";const asn1=exports;asn1.bignum=require("bn.js");asn1.define=require("./asn1/api").define;asn1.base=require("./asn1/base");asn1.constants=require("./asn1/constants");asn1.decoders=require("./asn1/decoders");asn1.encoders=require("./asn1/encoders")},{"./asn1/api":167,"./asn1/base":169,"./asn1/constants":173,"./asn1/decoders":175,"./asn1/encoders":178,"bn.js":180}],167:[function(require,module,exports){"use strict";const encoders=require("./encoders");const decoders=require("./decoders");const inherits=require("inherits");const api=exports;api.define=function define(name,body){return new Entity(name,body)};function Entity(name,body){this.name=name;this.body=body;this.decoders={};this.encoders={}}Entity.prototype._createNamed=function createNamed(Base){const name=this.name;function Generated(entity){this._initNamed(entity,name)}inherits(Generated,Base);Generated.prototype._initNamed=function _initNamed(entity,name){Base.call(this,entity,name)};return new Generated(this)};Entity.prototype._getDecoder=function _getDecoder(enc){enc=enc||"der";if(!this.decoders.hasOwnProperty(enc))this.decoders[enc]=this._createNamed(decoders[enc]);return this.decoders[enc]};Entity.prototype.decode=function decode(data,enc,options){return this._getDecoder(enc).decode(data,options)};Entity.prototype._getEncoder=function _getEncoder(enc){enc=enc||"der";if(!this.encoders.hasOwnProperty(enc))this.encoders[enc]=this._createNamed(encoders[enc]);return this.encoders[enc]};Entity.prototype.encode=function encode(data,enc,reporter){return this._getEncoder(enc).encode(data,reporter)}},{"./decoders":175,"./encoders":178,inherits:492}],168:[function(require,module,exports){"use strict";const inherits=require("inherits");const Reporter=require("../base/reporter").Reporter;const Buffer=require("safer-buffer").Buffer;function DecoderBuffer(base,options){Reporter.call(this,options);if(!Buffer.isBuffer(base)){this.error("Input not Buffer");return}this.base=base;this.offset=0;this.length=base.length}inherits(DecoderBuffer,Reporter);exports.DecoderBuffer=DecoderBuffer;DecoderBuffer.isDecoderBuffer=function isDecoderBuffer(data){if(data instanceof DecoderBuffer){return true}const isCompatible=typeof data==="object"&&Buffer.isBuffer(data.base)&&data.constructor.name==="DecoderBuffer"&&typeof data.offset==="number"&&typeof data.length==="number"&&typeof data.save==="function"&&typeof data.restore==="function"&&typeof data.isEmpty==="function"&&typeof data.readUInt8==="function"&&typeof data.skip==="function"&&typeof data.raw==="function";return isCompatible};DecoderBuffer.prototype.save=function save(){return{offset:this.offset,reporter:Reporter.prototype.save.call(this)}};DecoderBuffer.prototype.restore=function restore(save){const res=new DecoderBuffer(this.base);res.offset=save.offset;res.length=this.offset;this.offset=save.offset;Reporter.prototype.restore.call(this,save.reporter);return res};DecoderBuffer.prototype.isEmpty=function isEmpty(){return this.offset===this.length};DecoderBuffer.prototype.readUInt8=function readUInt8(fail){if(this.offset+1<=this.length)return this.base.readUInt8(this.offset++,true);else return this.error(fail||"DecoderBuffer overrun")};DecoderBuffer.prototype.skip=function skip(bytes,fail){if(!(this.offset+bytes<=this.length))return this.error(fail||"DecoderBuffer overrun");const res=new DecoderBuffer(this.base);res._reporterState=this._reporterState;res.offset=this.offset;res.length=this.offset+bytes;this.offset+=bytes;return res};DecoderBuffer.prototype.raw=function raw(save){return this.base.slice(save?save.offset:this.offset,this.length)};function EncoderBuffer(value,reporter){if(Array.isArray(value)){this.length=0;this.value=value.map(function(item){if(!EncoderBuffer.isEncoderBuffer(item))item=new EncoderBuffer(item,reporter);this.length+=item.length;return item},this)}else if(typeof value==="number"){if(!(0<=value&&value<=255))return reporter.error("non-byte EncoderBuffer value");this.value=value;this.length=1}else if(typeof value==="string"){this.value=value;this.length=Buffer.byteLength(value)}else if(Buffer.isBuffer(value)){this.value=value;this.length=value.length}else{return reporter.error("Unsupported type: "+typeof value)}}exports.EncoderBuffer=EncoderBuffer;EncoderBuffer.isEncoderBuffer=function isEncoderBuffer(data){if(data instanceof EncoderBuffer){return true}const isCompatible=typeof data==="object"&&data.constructor.name==="EncoderBuffer"&&typeof data.length==="number"&&typeof data.join==="function";return isCompatible};EncoderBuffer.prototype.join=function join(out,offset){if(!out)out=Buffer.alloc(this.length);if(!offset)offset=0;if(this.length===0)return out;if(Array.isArray(this.value)){this.value.forEach(function(item){item.join(out,offset);offset+=item.length})}else{if(typeof this.value==="number")out[offset]=this.value;else if(typeof this.value==="string")out.write(this.value,offset);else if(Buffer.isBuffer(this.value))this.value.copy(out,offset);offset+=this.length}return out}},{"../base/reporter":171,inherits:492,"safer-buffer":788}],169:[function(require,module,exports){"use strict";const base=exports;base.Reporter=require("./reporter").Reporter;base.DecoderBuffer=require("./buffer").DecoderBuffer;base.EncoderBuffer=require("./buffer").EncoderBuffer;base.Node=require("./node")},{"./buffer":168,"./node":170,"./reporter":171}],170:[function(require,module,exports){"use strict";const Reporter=require("../base/reporter").Reporter;const EncoderBuffer=require("../base/buffer").EncoderBuffer;const DecoderBuffer=require("../base/buffer").DecoderBuffer;const assert=require("minimalistic-assert");const tags=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"];const methods=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(tags);const overrided=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function Node(enc,parent,name){const state={};this._baseState=state;state.name=name;state.enc=enc;state.parent=parent||null;state.children=null;state.tag=null;state.args=null;state.reverseArgs=null;state.choice=null;state.optional=false;state.any=false;state.obj=false;state.use=null;state.useDecoder=null;state.key=null;state["default"]=null;state.explicit=null;state.implicit=null;state.contains=null;if(!state.parent){state.children=[];this._wrap()}}module.exports=Node;const stateProps=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Node.prototype.clone=function clone(){const state=this._baseState;const cstate={};stateProps.forEach(function(prop){cstate[prop]=state[prop]});const res=new this.constructor(cstate.parent);res._baseState=cstate;return res};Node.prototype._wrap=function wrap(){const state=this._baseState;methods.forEach(function(method){this[method]=function _wrappedMethod(){const clone=new this.constructor(this);state.children.push(clone);return clone[method].apply(clone,arguments)}},this)};Node.prototype._init=function init(body){const state=this._baseState;assert(state.parent===null);body.call(this);state.children=state.children.filter(function(child){return child._baseState.parent===this},this);assert.equal(state.children.length,1,"Root node can have only one child")};Node.prototype._useArgs=function useArgs(args){const state=this._baseState;const children=args.filter(function(arg){return arg instanceof this.constructor},this);args=args.filter(function(arg){return!(arg instanceof this.constructor)},this);if(children.length!==0){assert(state.children===null);state.children=children;children.forEach(function(child){child._baseState.parent=this},this)}if(args.length!==0){assert(state.args===null);state.args=args;state.reverseArgs=args.map(function(arg){if(typeof arg!=="object"||arg.constructor!==Object)return arg;const res={};Object.keys(arg).forEach(function(key){if(key==(key|0))key|=0;const value=arg[key];res[value]=key});return res})}};overrided.forEach(function(method){Node.prototype[method]=function _overrided(){const state=this._baseState;throw new Error(method+" not implemented for encoding: "+state.enc)}});tags.forEach(function(tag){Node.prototype[tag]=function _tagMethod(){const state=this._baseState;const args=Array.prototype.slice.call(arguments);assert(state.tag===null);state.tag=tag;this._useArgs(args);return this}});Node.prototype.use=function use(item){assert(item);const state=this._baseState;assert(state.use===null);state.use=item;return this};Node.prototype.optional=function optional(){const state=this._baseState;state.optional=true;return this};Node.prototype.def=function def(val){const state=this._baseState;assert(state["default"]===null);state["default"]=val;state.optional=true;return this};Node.prototype.explicit=function explicit(num){const state=this._baseState;assert(state.explicit===null&&state.implicit===null);state.explicit=num;return this};Node.prototype.implicit=function implicit(num){const state=this._baseState;assert(state.explicit===null&&state.implicit===null);state.implicit=num;return this};Node.prototype.obj=function obj(){const state=this._baseState;const args=Array.prototype.slice.call(arguments);state.obj=true;if(args.length!==0)this._useArgs(args);return this};Node.prototype.key=function key(newKey){const state=this._baseState;assert(state.key===null);state.key=newKey;return this};Node.prototype.any=function any(){const state=this._baseState;state.any=true;return this};Node.prototype.choice=function choice(obj){const state=this._baseState;assert(state.choice===null);state.choice=obj;this._useArgs(Object.keys(obj).map(function(key){return obj[key]}));return this};Node.prototype.contains=function contains(item){const state=this._baseState;assert(state.use===null);state.contains=item;return this};Node.prototype._decode=function decode(input,options){const state=this._baseState;if(state.parent===null)return input.wrapResult(state.children[0]._decode(input,options));let result=state["default"];let present=true;let prevKey=null;if(state.key!==null)prevKey=input.enterKey(state.key);if(state.optional){let tag=null;if(state.explicit!==null)tag=state.explicit;else if(state.implicit!==null)tag=state.implicit;else if(state.tag!==null)tag=state.tag;if(tag===null&&!state.any){const save=input.save();try{if(state.choice===null)this._decodeGeneric(state.tag,input,options);else this._decodeChoice(input,options);present=true}catch(e){present=false}input.restore(save)}else{present=this._peekTag(input,tag,state.any);if(input.isError(present))return present}}let prevObj;if(state.obj&&present)prevObj=input.enterObject();if(present){if(state.explicit!==null){const explicit=this._decodeTag(input,state.explicit);if(input.isError(explicit))return explicit;input=explicit}const start=input.offset;if(state.use===null&&state.choice===null){let save;if(state.any)save=input.save();const body=this._decodeTag(input,state.implicit!==null?state.implicit:state.tag,state.any);if(input.isError(body))return body;if(state.any)result=input.raw(save);else input=body}if(options&&options.track&&state.tag!==null)options.track(input.path(),start,input.length,"tagged");if(options&&options.track&&state.tag!==null)options.track(input.path(),input.offset,input.length,"content");if(state.any){}else if(state.choice===null){result=this._decodeGeneric(state.tag,input,options)}else{result=this._decodeChoice(input,options)}if(input.isError(result))return result;if(!state.any&&state.choice===null&&state.children!==null){state.children.forEach(function decodeChildren(child){child._decode(input,options)})}if(state.contains&&(state.tag==="octstr"||state.tag==="bitstr")){const data=new DecoderBuffer(result);result=this._getUse(state.contains,input._reporterState.obj)._decode(data,options)}}if(state.obj&&present)result=input.leaveObject(prevObj);if(state.key!==null&&(result!==null||present===true))input.leaveKey(prevKey,state.key,result);else if(prevKey!==null)input.exitKey(prevKey);return result};Node.prototype._decodeGeneric=function decodeGeneric(tag,input,options){const state=this._baseState;if(tag==="seq"||tag==="set")return null;if(tag==="seqof"||tag==="setof")return this._decodeList(input,tag,state.args[0],options);else if(/str$/.test(tag))return this._decodeStr(input,tag,options);else if(tag==="objid"&&state.args)return this._decodeObjid(input,state.args[0],state.args[1],options);else if(tag==="objid")return this._decodeObjid(input,null,null,options);else if(tag==="gentime"||tag==="utctime")return this._decodeTime(input,tag,options);else if(tag==="null_")return this._decodeNull(input,options);else if(tag==="bool")return this._decodeBool(input,options);else if(tag==="objDesc")return this._decodeStr(input,tag,options);else if(tag==="int"||tag==="enum")return this._decodeInt(input,state.args&&state.args[0],options);if(state.use!==null){return this._getUse(state.use,input._reporterState.obj)._decode(input,options)}else{return input.error("unknown tag: "+tag)}};Node.prototype._getUse=function _getUse(entity,obj){const state=this._baseState;state.useDecoder=this._use(entity,obj);assert(state.useDecoder._baseState.parent===null);state.useDecoder=state.useDecoder._baseState.children[0];if(state.implicit!==state.useDecoder._baseState.implicit){state.useDecoder=state.useDecoder.clone();state.useDecoder._baseState.implicit=state.implicit}return state.useDecoder};Node.prototype._decodeChoice=function decodeChoice(input,options){const state=this._baseState;let result=null;let match=false;Object.keys(state.choice).some(function(key){const save=input.save();const node=state.choice[key];try{const value=node._decode(input,options);if(input.isError(value))return false;result={type:key,value:value};match=true}catch(e){input.restore(save);return false}return true},this);if(!match)return input.error("Choice not matched");return result};Node.prototype._createEncoderBuffer=function createEncoderBuffer(data){return new EncoderBuffer(data,this.reporter)};Node.prototype._encode=function encode(data,reporter,parent){const state=this._baseState;if(state["default"]!==null&&state["default"]===data)return;const result=this._encodeValue(data,reporter,parent);if(result===undefined)return;if(this._skipDefault(result,reporter,parent))return;return result};Node.prototype._encodeValue=function encode(data,reporter,parent){const state=this._baseState;if(state.parent===null)return state.children[0]._encode(data,reporter||new Reporter);let result=null;this.reporter=reporter;if(state.optional&&data===undefined){if(state["default"]!==null)data=state["default"];else return}let content=null;let primitive=false;if(state.any){result=this._createEncoderBuffer(data)}else if(state.choice){result=this._encodeChoice(data,reporter)}else if(state.contains){content=this._getUse(state.contains,parent)._encode(data,reporter);primitive=true}else if(state.children){content=state.children.map(function(child){if(child._baseState.tag==="null_")return child._encode(null,reporter,data);if(child._baseState.key===null)return reporter.error("Child should have a key");const prevKey=reporter.enterKey(child._baseState.key);if(typeof data!=="object")return reporter.error("Child expected, but input is not object");const res=child._encode(data[child._baseState.key],reporter,data);reporter.leaveKey(prevKey);return res},this).filter(function(child){return child});content=this._createEncoderBuffer(content)}else{if(state.tag==="seqof"||state.tag==="setof"){if(!(state.args&&state.args.length===1))return reporter.error("Too many args for : "+state.tag);if(!Array.isArray(data))return reporter.error("seqof/setof, but data is not Array");const child=this.clone();child._baseState.implicit=null;content=this._createEncoderBuffer(data.map(function(item){const state=this._baseState;return this._getUse(state.args[0],data)._encode(item,reporter)},child))}else if(state.use!==null){result=this._getUse(state.use,parent)._encode(data,reporter)}else{content=this._encodePrimitive(state.tag,data);primitive=true}}if(!state.any&&state.choice===null){const tag=state.implicit!==null?state.implicit:state.tag;const cls=state.implicit===null?"universal":"context";if(tag===null){if(state.use===null)reporter.error("Tag could be omitted only for .use()")}else{if(state.use===null)result=this._encodeComposite(tag,primitive,cls,content)}}if(state.explicit!==null)result=this._encodeComposite(state.explicit,false,"context",result);return result};Node.prototype._encodeChoice=function encodeChoice(data,reporter){const state=this._baseState;const node=state.choice[data.type];if(!node){assert(false,data.type+" not found in "+JSON.stringify(Object.keys(state.choice)))}return node._encode(data.value,reporter)};Node.prototype._encodePrimitive=function encodePrimitive(tag,data){const state=this._baseState;if(/str$/.test(tag))return this._encodeStr(data,tag);else if(tag==="objid"&&state.args)return this._encodeObjid(data,state.reverseArgs[0],state.args[1]);else if(tag==="objid")return this._encodeObjid(data,null,null);else if(tag==="gentime"||tag==="utctime")return this._encodeTime(data,tag);else if(tag==="null_")return this._encodeNull();else if(tag==="int"||tag==="enum")return this._encodeInt(data,state.args&&state.reverseArgs[0]);else if(tag==="bool")return this._encodeBool(data);else if(tag==="objDesc")return this._encodeStr(data,tag);else throw new Error("Unsupported tag: "+tag)};Node.prototype._isNumstr=function isNumstr(str){return/^[0-9 ]*$/.test(str)};Node.prototype._isPrintstr=function isPrintstr(str){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(str)}},{"../base/buffer":168,"../base/reporter":171,"minimalistic-assert":503}],171:[function(require,module,exports){"use strict";const inherits=require("inherits");function Reporter(options){this._reporterState={obj:null,path:[],options:options||{},errors:[]}}exports.Reporter=Reporter;Reporter.prototype.isError=function isError(obj){return obj instanceof ReporterError};Reporter.prototype.save=function save(){const state=this._reporterState;return{obj:state.obj,pathLen:state.path.length}};Reporter.prototype.restore=function restore(data){const state=this._reporterState;state.obj=data.obj;state.path=state.path.slice(0,data.pathLen)};Reporter.prototype.enterKey=function enterKey(key){return this._reporterState.path.push(key)};Reporter.prototype.exitKey=function exitKey(index){const state=this._reporterState;state.path=state.path.slice(0,index-1)};Reporter.prototype.leaveKey=function leaveKey(index,key,value){const state=this._reporterState;this.exitKey(index);if(state.obj!==null)state.obj[key]=value};Reporter.prototype.path=function path(){return this._reporterState.path.join("/")};Reporter.prototype.enterObject=function enterObject(){const state=this._reporterState;const prev=state.obj;state.obj={};return prev};Reporter.prototype.leaveObject=function leaveObject(prev){const state=this._reporterState;const now=state.obj;state.obj=prev;return now};Reporter.prototype.error=function error(msg){let err;const state=this._reporterState;const inherited=msg instanceof ReporterError;if(inherited){err=msg}else{err=new ReporterError(state.path.map(function(elem){return"["+JSON.stringify(elem)+"]"}).join(""),msg.message||msg,msg.stack)}if(!state.options.partial)throw err;if(!inherited)state.errors.push(err);return err};Reporter.prototype.wrapResult=function wrapResult(result){const state=this._reporterState;if(!state.options.partial)return result;return{result:this.isError(result)?null:result,errors:state.errors}};function ReporterError(path,msg){this.path=path;this.rethrow(msg)}inherits(ReporterError,Error);ReporterError.prototype.rethrow=function rethrow(msg){this.message=msg+" at: "+(this.path||"(shallow)");if(Error.captureStackTrace)Error.captureStackTrace(this,ReporterError);if(!this.stack){try{throw new Error(this.message)}catch(e){this.stack=e.stack}}return this}},{inherits:492}],172:[function(require,module,exports){"use strict";function reverse(map){const res={};Object.keys(map).forEach(function(key){if((key|0)==key)key=key|0;const value=map[key];res[value]=key});return res}exports.tagClass={0:"universal",1:"application",2:"context",3:"private"};exports.tagClassByName=reverse(exports.tagClass);exports.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"};exports.tagByName=reverse(exports.tag)},{}],173:[function(require,module,exports){"use strict";const constants=exports;constants._reverse=function reverse(map){const res={};Object.keys(map).forEach(function(key){if((key|0)==key)key=key|0;const value=map[key];res[value]=key});return res};constants.der=require("./der")},{"./der":172}],174:[function(require,module,exports){"use strict";const inherits=require("inherits");const bignum=require("bn.js");const DecoderBuffer=require("../base/buffer").DecoderBuffer;const Node=require("../base/node");const der=require("../constants/der");function DERDecoder(entity){this.enc="der";this.name=entity.name;this.entity=entity;this.tree=new DERNode;this.tree._init(entity.body)}module.exports=DERDecoder;DERDecoder.prototype.decode=function decode(data,options){if(!DecoderBuffer.isDecoderBuffer(data)){data=new DecoderBuffer(data,options)}return this.tree._decode(data,options)};function DERNode(parent){Node.call(this,"der",parent)}inherits(DERNode,Node);DERNode.prototype._peekTag=function peekTag(buffer,tag,any){if(buffer.isEmpty())return false;const state=buffer.save();const decodedTag=derDecodeTag(buffer,'Failed to peek tag: "'+tag+'"');if(buffer.isError(decodedTag))return decodedTag;buffer.restore(state);return decodedTag.tag===tag||decodedTag.tagStr===tag||decodedTag.tagStr+"of"===tag||any};DERNode.prototype._decodeTag=function decodeTag(buffer,tag,any){const decodedTag=derDecodeTag(buffer,'Failed to decode tag of "'+tag+'"');if(buffer.isError(decodedTag))return decodedTag;let len=derDecodeLen(buffer,decodedTag.primitive,'Failed to get length of "'+tag+'"');if(buffer.isError(len))return len;if(!any&&decodedTag.tag!==tag&&decodedTag.tagStr!==tag&&decodedTag.tagStr+"of"!==tag){return buffer.error('Failed to match tag: "'+tag+'"')}if(decodedTag.primitive||len!==null)return buffer.skip(len,'Failed to match body of: "'+tag+'"');const state=buffer.save();const res=this._skipUntilEnd(buffer,'Failed to skip indefinite length body: "'+this.tag+'"');if(buffer.isError(res))return res;len=buffer.offset-state.offset;buffer.restore(state);return buffer.skip(len,'Failed to match body of: "'+tag+'"')};DERNode.prototype._skipUntilEnd=function skipUntilEnd(buffer,fail){for(;;){const tag=derDecodeTag(buffer,fail);if(buffer.isError(tag))return tag;const len=derDecodeLen(buffer,tag.primitive,fail);if(buffer.isError(len))return len;let res;if(tag.primitive||len!==null)res=buffer.skip(len);else res=this._skipUntilEnd(buffer,fail);if(buffer.isError(res))return res;if(tag.tagStr==="end")break}};DERNode.prototype._decodeList=function decodeList(buffer,tag,decoder,options){const result=[];while(!buffer.isEmpty()){const possibleEnd=this._peekTag(buffer,"end");if(buffer.isError(possibleEnd))return possibleEnd;const res=decoder.decode(buffer,"der",options);if(buffer.isError(res)&&possibleEnd)break;result.push(res)}return result};DERNode.prototype._decodeStr=function decodeStr(buffer,tag){if(tag==="bitstr"){const unused=buffer.readUInt8();if(buffer.isError(unused))return unused;return{unused:unused,data:buffer.raw()}}else if(tag==="bmpstr"){const raw=buffer.raw();if(raw.length%2===1)return buffer.error("Decoding of string type: bmpstr length mismatch");let str="";for(let i=0;i<raw.length/2;i++){str+=String.fromCharCode(raw.readUInt16BE(i*2))}return str}else if(tag==="numstr"){const numstr=buffer.raw().toString("ascii");if(!this._isNumstr(numstr)){return buffer.error("Decoding of string type: "+"numstr unsupported characters")}return numstr}else if(tag==="octstr"){return buffer.raw()}else if(tag==="objDesc"){return buffer.raw()}else if(tag==="printstr"){const printstr=buffer.raw().toString("ascii");if(!this._isPrintstr(printstr)){return buffer.error("Decoding of string type: "+"printstr unsupported characters")}return printstr}else if(/str$/.test(tag)){return buffer.raw().toString()}else{return buffer.error("Decoding of string type: "+tag+" unsupported")}};DERNode.prototype._decodeObjid=function decodeObjid(buffer,values,relative){let result;const identifiers=[];let ident=0;let subident=0;while(!buffer.isEmpty()){subident=buffer.readUInt8();ident<<=7;ident|=subident&127;if((subident&128)===0){identifiers.push(ident);ident=0}}if(subident&128)identifiers.push(ident);const first=identifiers[0]/40|0;const second=identifiers[0]%40;if(relative)result=identifiers;else result=[first,second].concat(identifiers.slice(1));if(values){let tmp=values[result.join(" ")];if(tmp===undefined)tmp=values[result.join(".")];if(tmp!==undefined)result=tmp}return result};DERNode.prototype._decodeTime=function decodeTime(buffer,tag){const str=buffer.raw().toString();let year;let mon;let day;let hour;let min;let sec;if(tag==="gentime"){year=str.slice(0,4)|0;mon=str.slice(4,6)|0;day=str.slice(6,8)|0;hour=str.slice(8,10)|0;min=str.slice(10,12)|0;sec=str.slice(12,14)|0}else if(tag==="utctime"){year=str.slice(0,2)|0;mon=str.slice(2,4)|0;day=str.slice(4,6)|0;hour=str.slice(6,8)|0;min=str.slice(8,10)|0;sec=str.slice(10,12)|0;if(year<70)year=2e3+year;else year=1900+year}else{return buffer.error("Decoding "+tag+" time is not supported yet")}return Date.UTC(year,mon-1,day,hour,min,sec,0)};DERNode.prototype._decodeNull=function decodeNull(){return null};DERNode.prototype._decodeBool=function decodeBool(buffer){const res=buffer.readUInt8();if(buffer.isError(res))return res;else return res!==0};DERNode.prototype._decodeInt=function decodeInt(buffer,values){const raw=buffer.raw();let res=new bignum(raw);if(values)res=values[res.toString(10)]||res;return res};DERNode.prototype._use=function use(entity,obj){if(typeof entity==="function")entity=entity(obj);return entity._getDecoder("der").tree};function derDecodeTag(buf,fail){let tag=buf.readUInt8(fail);if(buf.isError(tag))return tag;const cls=der.tagClass[tag>>6];const primitive=(tag&32)===0;if((tag&31)===31){let oct=tag;tag=0;while((oct&128)===128){oct=buf.readUInt8(fail);if(buf.isError(oct))return oct;tag<<=7;tag|=oct&127}}else{tag&=31}const tagStr=der.tag[tag];return{cls:cls,primitive:primitive,tag:tag,tagStr:tagStr}}function derDecodeLen(buf,primitive,fail){let len=buf.readUInt8(fail);if(buf.isError(len))return len;if(!primitive&&len===128)return null;if((len&128)===0){return len}const num=len&127;if(num>4)return buf.error("length octect is too long");len=0;for(let i=0;i<num;i++){len<<=8;const j=buf.readUInt8(fail);if(buf.isError(j))return j;len|=j}return len}},{"../base/buffer":168,"../base/node":170,"../constants/der":172,"bn.js":180,inherits:492}],175:[function(require,module,exports){"use strict";const decoders=exports;decoders.der=require("./der");decoders.pem=require("./pem")},{"./der":174,"./pem":176}],176:[function(require,module,exports){"use strict";const inherits=require("inherits");const Buffer=require("safer-buffer").Buffer;const DERDecoder=require("./der");function PEMDecoder(entity){DERDecoder.call(this,entity);this.enc="pem"}inherits(PEMDecoder,DERDecoder);module.exports=PEMDecoder;PEMDecoder.prototype.decode=function decode(data,options){const lines=data.toString().split(/[\r\n]+/g);const label=options.label.toUpperCase();const re=/^-----(BEGIN|END) ([^-]+)-----$/;let start=-1;let end=-1;for(let i=0;i<lines.length;i++){const match=lines[i].match(re);if(match===null)continue;if(match[2]!==label)continue;if(start===-1){if(match[1]!=="BEGIN")break;start=i}else{if(match[1]!=="END")break;end=i;break}}if(start===-1||end===-1)throw new Error("PEM section not found for: "+label);const base64=lines.slice(start+1,end).join("");base64.replace(/[^a-z0-9+/=]+/gi,"");const input=Buffer.from(base64,"base64");return DERDecoder.prototype.decode.call(this,input,options)}},{"./der":174,inherits:492,"safer-buffer":788}],177:[function(require,module,exports){"use strict";const inherits=require("inherits");const Buffer=require("safer-buffer").Buffer;const Node=require("../base/node");const der=require("../constants/der");function DEREncoder(entity){this.enc="der";this.name=entity.name;this.entity=entity;this.tree=new DERNode;this.tree._init(entity.body)}module.exports=DEREncoder;DEREncoder.prototype.encode=function encode(data,reporter){return this.tree._encode(data,reporter).join()};function DERNode(parent){Node.call(this,"der",parent)}inherits(DERNode,Node);DERNode.prototype._encodeComposite=function encodeComposite(tag,primitive,cls,content){const encodedTag=encodeTag(tag,primitive,cls,this.reporter);if(content.length<128){const header=Buffer.alloc(2);header[0]=encodedTag;header[1]=content.length;return this._createEncoderBuffer([header,content])}let lenOctets=1;for(let i=content.length;i>=256;i>>=8)lenOctets++;const header=Buffer.alloc(1+1+lenOctets);header[0]=encodedTag;header[1]=128|lenOctets;for(let i=1+lenOctets,j=content.length;j>0;i--,j>>=8)header[i]=j&255;return this._createEncoderBuffer([header,content])};DERNode.prototype._encodeStr=function encodeStr(str,tag){if(tag==="bitstr"){return this._createEncoderBuffer([str.unused|0,str.data])}else if(tag==="bmpstr"){const buf=Buffer.alloc(str.length*2);for(let i=0;i<str.length;i++){buf.writeUInt16BE(str.charCodeAt(i),i*2)}return this._createEncoderBuffer(buf)}else if(tag==="numstr"){if(!this._isNumstr(str)){return this.reporter.error("Encoding of string type: numstr supports "+"only digits and space")}return this._createEncoderBuffer(str)}else if(tag==="printstr"){if(!this._isPrintstr(str)){return this.reporter.error("Encoding of string type: printstr supports "+"only latin upper and lower case letters, "+"digits, space, apostrophe, left and rigth "+"parenthesis, plus sign, comma, hyphen, "+"dot, slash, colon, equal sign, "+"question mark")}return this._createEncoderBuffer(str)}else if(/str$/.test(tag)){return this._createEncoderBuffer(str)}else if(tag==="objDesc"){return this._createEncoderBuffer(str)}else{return this.reporter.error("Encoding of string type: "+tag+" unsupported")}};DERNode.prototype._encodeObjid=function encodeObjid(id,values,relative){if(typeof id==="string"){if(!values)return this.reporter.error("string objid given, but no values map found");if(!values.hasOwnProperty(id))return this.reporter.error("objid not found in values map");id=values[id].split(/[\s.]+/g);for(let i=0;i<id.length;i++)id[i]|=0}else if(Array.isArray(id)){id=id.slice();for(let i=0;i<id.length;i++)id[i]|=0}if(!Array.isArray(id)){return this.reporter.error("objid() should be either array or string, "+"got: "+JSON.stringify(id))}if(!relative){if(id[1]>=40)return this.reporter.error("Second objid identifier OOB");id.splice(0,2,id[0]*40+id[1])}let size=0;for(let i=0;i<id.length;i++){let ident=id[i];for(size++;ident>=128;ident>>=7)size++}const objid=Buffer.alloc(size);let offset=objid.length-1;for(let i=id.length-1;i>=0;i--){let ident=id[i];objid[offset--]=ident&127;while((ident>>=7)>0)objid[offset--]=128|ident&127}return this._createEncoderBuffer(objid)};function two(num){if(num<10)return"0"+num;else return num}DERNode.prototype._encodeTime=function encodeTime(time,tag){let str;const date=new Date(time);if(tag==="gentime"){str=[two(date.getUTCFullYear()),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),"Z"].join("")}else if(tag==="utctime"){str=[two(date.getUTCFullYear()%100),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),"Z"].join("")}else{this.reporter.error("Encoding "+tag+" time is not supported yet")}return this._encodeStr(str,"octstr")};DERNode.prototype._encodeNull=function encodeNull(){return this._createEncoderBuffer("")};DERNode.prototype._encodeInt=function encodeInt(num,values){if(typeof num==="string"){if(!values)return this.reporter.error("String int or enum given, but no values map");if(!values.hasOwnProperty(num)){return this.reporter.error("Values map doesn't contain: "+JSON.stringify(num))}num=values[num]}if(typeof num!=="number"&&!Buffer.isBuffer(num)){const numArray=num.toArray();if(!num.sign&&numArray[0]&128){numArray.unshift(0)}num=Buffer.from(numArray)}if(Buffer.isBuffer(num)){let size=num.length;if(num.length===0)size++;const out=Buffer.alloc(size);num.copy(out);if(num.length===0)out[0]=0;return this._createEncoderBuffer(out)}if(num<128)return this._createEncoderBuffer(num);if(num<256)return this._createEncoderBuffer([0,num]);let size=1;for(let i=num;i>=256;i>>=8)size++;const out=new Array(size);for(let i=out.length-1;i>=0;i--){out[i]=num&255;num>>=8}if(out[0]&128){out.unshift(0)}return this._createEncoderBuffer(Buffer.from(out))};DERNode.prototype._encodeBool=function encodeBool(value){return this._createEncoderBuffer(value?255:0)};DERNode.prototype._use=function use(entity,obj){if(typeof entity==="function")entity=entity(obj);return entity._getEncoder("der").tree};DERNode.prototype._skipDefault=function skipDefault(dataBuffer,reporter,parent){const state=this._baseState;let i;if(state["default"]===null)return false;const data=dataBuffer.join();if(state.defaultBuffer===undefined)state.defaultBuffer=this._encodeValue(state["default"],reporter,parent).join();if(data.length!==state.defaultBuffer.length)return false;for(i=0;i<data.length;i++)if(data[i]!==state.defaultBuffer[i])return false;return true};function encodeTag(tag,primitive,cls,reporter){let res;if(tag==="seqof")tag="seq";else if(tag==="setof")tag="set";if(der.tagByName.hasOwnProperty(tag))res=der.tagByName[tag];else if(typeof tag==="number"&&(tag|0)===tag)res=tag;else return reporter.error("Unknown tag: "+tag);if(res>=31)return reporter.error("Multi-octet tag encoding unsupported");if(!primitive)res|=32;res|=der.tagClassByName[cls||"universal"]<<6;return res}},{"../base/node":170,"../constants/der":172,inherits:492,"safer-buffer":788}],178:[function(require,module,exports){"use strict";const encoders=exports;encoders.der=require("./der");encoders.pem=require("./pem")},{"./der":177,"./pem":179}],179:[function(require,module,exports){"use strict";const inherits=require("inherits");const DEREncoder=require("./der");function PEMEncoder(entity){DEREncoder.call(this,entity);this.enc="pem"}inherits(PEMEncoder,DEREncoder);module.exports=PEMEncoder;PEMEncoder.prototype.encode=function encode(data,options){const buf=DEREncoder.prototype.encode.call(this,data);const p=buf.toString("base64");const out=["-----BEGIN "+options.label+"-----"];for(let i=0;i<p.length;i+=64)out.push(p.slice(i,i+64));out.push("-----END "+options.label+"-----");return out.join("\n")}},{"./der":177,inherits:492}],180:[function(require,module,exports){(function(module,exports){"use strict";function assert(val,msg){if(!val)throw new Error(msg||"Assertion failed")}function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}function BN(number,base,endian){if(BN.isBN(number)){return number}this.negative=0;this.words=null;this.length=0;this.red=null;if(number!==null){if(base==="le"||base==="be"){endian=base;base=10}this._init(number||0,base||10,endian||"be")}}if(typeof module==="object"){module.exports=BN}else{exports.BN=BN}BN.BN=BN;BN.wordSize=26;var Buffer;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined"){Buffer=window.Buffer}else{Buffer=require("buffer").Buffer}}catch(e){}BN.isBN=function isBN(num){if(num instanceof BN){return true}return num!==null&&typeof num==="object"&&num.constructor.wordSize===BN.wordSize&&Array.isArray(num.words)};BN.max=function max(left,right){if(left.cmp(right)>0)return left;return right};BN.min=function min(left,right){if(left.cmp(right)<0)return left;return right};BN.prototype._init=function init(number,base,endian){if(typeof number==="number"){return this._initNumber(number,base,endian)}if(typeof number==="object"){return this._initArray(number,base,endian)}if(base==="hex"){base=16}assert(base===(base|0)&&base>=2&&base<=36);number=number.toString().replace(/\s+/g,"");var start=0;if(number[0]==="-"){start++;this.negative=1}if(start<number.length){if(base===16){this._parseHex(number,start,endian)}else{this._parseBase(number,base,start);if(endian==="le"){this._initArray(this.toArray(),base,endian)}}}};BN.prototype._initNumber=function _initNumber(number,base,endian){if(number<0){this.negative=1;number=-number}if(number<67108864){this.words=[number&67108863];this.length=1}else if(number<4503599627370496){this.words=[number&67108863,number/67108864&67108863];this.length=2}else{assert(number<9007199254740992);this.words=[number&67108863,number/67108864&67108863,1];this.length=3}if(endian!=="le")return;this._initArray(this.toArray(),base,endian)};BN.prototype._initArray=function _initArray(number,base,endian){assert(typeof number.length==="number");if(number.length<=0){this.words=[0];this.length=1;return this}this.length=Math.ceil(number.length/3);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var j,w;var off=0;if(endian==="be"){for(i=number.length-1,j=0;i>=0;i-=3){w=number[i]|number[i-1]<<8|number[i-2]<<16;this.words[j]|=w<<off&67108863;this.words[j+1]=w>>>26-off&67108863;off+=24;if(off>=26){off-=26;j++}}}else if(endian==="le"){for(i=0,j=0;i<number.length;i+=3){w=number[i]|number[i+1]<<8|number[i+2]<<16;this.words[j]|=w<<off&67108863;this.words[j+1]=w>>>26-off&67108863;off+=24;if(off>=26){off-=26;j++}}}return this.strip()};function parseHex4Bits(string,index){var c=string.charCodeAt(index);if(c>=65&&c<=70){return c-55}else if(c>=97&&c<=102){return c-87}else{return c-48&15}}function parseHexByte(string,lowerBound,index){var r=parseHex4Bits(string,index);if(index-1>=lowerBound){r|=parseHex4Bits(string,index-1)<<4}return r}BN.prototype._parseHex=function _parseHex(number,start,endian){this.length=Math.ceil((number.length-start)/6);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var off=0;var j=0;var w;if(endian==="be"){for(i=number.length-1;i>=start;i-=2){w=parseHexByte(number,start,i)<<off;this.words[j]|=w&67108863;if(off>=18){off-=18;j+=1;this.words[j]|=w>>>26}else{off+=8}}}else{var parseLength=number.length-start;for(i=parseLength%2===0?start+1:start;i<number.length;i+=2){w=parseHexByte(number,start,i)<<off;this.words[j]|=w&67108863;if(off>=18){off-=18;j+=1;this.words[j]|=w>>>26}else{off+=8}}}this.strip()};function parseBase(str,start,end,mul){var r=0;var len=Math.min(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r*=mul;if(c>=49){r+=c-49+10}else if(c>=17){r+=c-17+10}else{r+=c}}return r}BN.prototype._parseBase=function _parseBase(number,base,start){this.words=[0];this.length=1;for(var limbLen=0,limbPow=1;limbPow<=67108863;limbPow*=base){limbLen++}limbLen--;limbPow=limbPow/base|0;var total=number.length-start;var mod=total%limbLen;var end=Math.min(total,total-mod)+start;var word=0;for(var i=start;i<end;i+=limbLen){word=parseBase(number,i,i+limbLen,base);this.imuln(limbPow);if(this.words[0]+word<67108864){this.words[0]+=word}else{this._iaddn(word)}}if(mod!==0){var pow=1;word=parseBase(number,i,number.length,base);for(i=0;i<mod;i++){pow*=base}this.imuln(pow);if(this.words[0]+word<67108864){this.words[0]+=word}else{this._iaddn(word)}}this.strip()};BN.prototype.copy=function copy(dest){dest.words=new Array(this.length);for(var i=0;i<this.length;i++){dest.words[i]=this.words[i]}dest.length=this.length;dest.negative=this.negative;dest.red=this.red};BN.prototype.clone=function clone(){var r=new BN(null);this.copy(r);return r};BN.prototype._expand=function _expand(size){while(this.length<size){this.words[this.length++]=0}return this};BN.prototype.strip=function strip(){while(this.length>1&&this.words[this.length-1]===0){this.length--}return this._normSign()};BN.prototype._normSign=function _normSign(){if(this.length===1&&this.words[0]===0){this.negative=0}return this};BN.prototype.inspect=function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var zeros=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"];var groupSizes=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var groupBases=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];BN.prototype.toString=function toString(base,padding){base=base||10;padding=padding|0||1;var out;if(base===16||base==="hex"){out="";var off=0;var carry=0;for(var i=0;i<this.length;i++){var w=this.words[i];var word=((w<<off|carry)&16777215).toString(16);carry=w>>>24-off&16777215;if(carry!==0||i!==this.length-1){out=zeros[6-word.length]+word+out}else{out=word+out}off+=2;if(off>=26){off-=26;i--}}if(carry!==0){out=carry.toString(16)+out}while(out.length%padding!==0){out="0"+out}if(this.negative!==0){out="-"+out}return out}if(base===(base|0)&&base>=2&&base<=36){var groupSize=groupSizes[base];var groupBase=groupBases[base];out="";var c=this.clone();c.negative=0;while(!c.isZero()){var r=c.modn(groupBase).toString(base);c=c.idivn(groupBase);if(!c.isZero()){out=zeros[groupSize-r.length]+r+out}else{out=r+out}}if(this.isZero()){out="0"+out}while(out.length%padding!==0){out="0"+out}if(this.negative!==0){out="-"+out}return out}assert(false,"Base should be between 2 and 36")};BN.prototype.toNumber=function toNumber(){var ret=this.words[0];if(this.length===2){ret+=this.words[1]*67108864}else if(this.length===3&&this.words[2]===1){ret+=4503599627370496+this.words[1]*67108864}else if(this.length>2){assert(false,"Number can only safely store up to 53 bits")}return this.negative!==0?-ret:ret};BN.prototype.toJSON=function toJSON(){return this.toString(16)};BN.prototype.toBuffer=function toBuffer(endian,length){assert(typeof Buffer!=="undefined");return this.toArrayLike(Buffer,endian,length)};BN.prototype.toArray=function toArray(endian,length){return this.toArrayLike(Array,endian,length)};BN.prototype.toArrayLike=function toArrayLike(ArrayType,endian,length){var byteLength=this.byteLength();var reqLength=length||Math.max(1,byteLength);assert(byteLength<=reqLength,"byte array longer than desired length");assert(reqLength>0,"Requested array length <= 0");this.strip();var littleEndian=endian==="le";var res=new ArrayType(reqLength);var b,i;var q=this.clone();if(!littleEndian){for(i=0;i<reqLength-byteLength;i++){res[i]=0}for(i=0;!q.isZero();i++){b=q.andln(255);q.iushrn(8);res[reqLength-i-1]=b}}else{for(i=0;!q.isZero();i++){b=q.andln(255);q.iushrn(8);res[i]=b}for(;i<reqLength;i++){res[i]=0}}return res};if(Math.clz32){BN.prototype._countBits=function _countBits(w){return 32-Math.clz32(w)}}else{BN.prototype._countBits=function _countBits(w){var t=w;var r=0;if(t>=4096){r+=13;t>>>=13}if(t>=64){r+=7;t>>>=7}if(t>=8){r+=4;t>>>=4}if(t>=2){r+=2;t>>>=2}return r+t}}BN.prototype._zeroBits=function _zeroBits(w){if(w===0)return 26;var t=w;var r=0;if((t&8191)===0){r+=13;t>>>=13}if((t&127)===0){r+=7;t>>>=7}if((t&15)===0){r+=4;t>>>=4}if((t&3)===0){r+=2;t>>>=2}if((t&1)===0){r++}return r};BN.prototype.bitLength=function bitLength(){var w=this.words[this.length-1];var hi=this._countBits(w);return(this.length-1)*26+hi};function toBitArray(num){var w=new Array(num.bitLength());for(var bit=0;bit<w.length;bit++){var off=bit/26|0;var wbit=bit%26;w[bit]=(num.words[off]&1<<wbit)>>>wbit}return w}BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;var r=0;for(var i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);r+=b;if(b!==26)break}return r};BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)};BN.prototype.toTwos=function toTwos(width){if(this.negative!==0){return this.abs().inotn(width).iaddn(1)}return this.clone()};BN.prototype.fromTwos=function fromTwos(width){if(this.testn(width-1)){return this.notn(width).iaddn(1).ineg()}return this.clone()};BN.prototype.isNeg=function isNeg(){return this.negative!==0};BN.prototype.neg=function neg(){return this.clone().ineg()};BN.prototype.ineg=function ineg(){if(!this.isZero()){this.negative^=1}return this};BN.prototype.iuor=function iuor(num){while(this.length<num.length){this.words[this.length++]=0}for(var i=0;i<num.length;i++){this.words[i]=this.words[i]|num.words[i]}return this.strip()};BN.prototype.ior=function ior(num){assert((this.negative|num.negative)===0);return this.iuor(num)};BN.prototype.or=function or(num){if(this.length>num.length)return this.clone().ior(num);return num.clone().ior(this)};BN.prototype.uor=function uor(num){if(this.length>num.length)return this.clone().iuor(num);return num.clone().iuor(this)};BN.prototype.iuand=function iuand(num){var b;if(this.length>num.length){b=num}else{b=this}for(var i=0;i<b.length;i++){this.words[i]=this.words[i]&num.words[i]}this.length=b.length;return this.strip()};BN.prototype.iand=function iand(num){assert((this.negative|num.negative)===0);return this.iuand(num)};BN.prototype.and=function and(num){if(this.length>num.length)return this.clone().iand(num);return num.clone().iand(this)};BN.prototype.uand=function uand(num){if(this.length>num.length)return this.clone().iuand(num);return num.clone().iuand(this)};BN.prototype.iuxor=function iuxor(num){var a;var b;if(this.length>num.length){a=this;b=num}else{a=num;b=this}for(var i=0;i<b.length;i++){this.words[i]=a.words[i]^b.words[i]}if(this!==a){for(;i<a.length;i++){this.words[i]=a.words[i]}}this.length=a.length;return this.strip()};BN.prototype.ixor=function ixor(num){assert((this.negative|num.negative)===0);return this.iuxor(num)};BN.prototype.xor=function xor(num){if(this.length>num.length)return this.clone().ixor(num);return num.clone().ixor(this)};BN.prototype.uxor=function uxor(num){if(this.length>num.length)return this.clone().iuxor(num);return num.clone().iuxor(this)};BN.prototype.inotn=function inotn(width){assert(typeof width==="number"&&width>=0);var bytesNeeded=Math.ceil(width/26)|0;var bitsLeft=width%26;this._expand(bytesNeeded);if(bitsLeft>0){bytesNeeded--}for(var i=0;i<bytesNeeded;i++){this.words[i]=~this.words[i]&67108863}if(bitsLeft>0){this.words[i]=~this.words[i]&67108863>>26-bitsLeft}return this.strip()};BN.prototype.notn=function notn(width){return this.clone().inotn(width)};BN.prototype.setn=function setn(bit,val){assert(typeof bit==="number"&&bit>=0);var off=bit/26|0;var wbit=bit%26;this._expand(off+1);if(val){this.words[off]=this.words[off]|1<<wbit}else{this.words[off]=this.words[off]&~(1<<wbit)}return this.strip()};BN.prototype.iadd=function iadd(num){var r;if(this.negative!==0&&num.negative===0){this.negative=0;r=this.isub(num);this.negative^=1;return this._normSign()}else if(this.negative===0&&num.negative!==0){num.negative=0;r=this.isub(num);num.negative=1;return r._normSign()}var a,b;if(this.length>num.length){a=this;b=num}else{a=num;b=this}var carry=0;for(var i=0;i<b.length;i++){r=(a.words[i]|0)+(b.words[i]|0)+carry;this.words[i]=r&67108863;carry=r>>>26}for(;carry!==0&&i<a.length;i++){r=(a.words[i]|0)+carry;this.words[i]=r&67108863;carry=r>>>26}this.length=a.length;if(carry!==0){this.words[this.length]=carry;this.length++}else if(a!==this){for(;i<a.length;i++){this.words[i]=a.words[i]}}return this};BN.prototype.add=function add(num){var res;if(num.negative!==0&&this.negative===0){num.negative=0;res=this.sub(num);num.negative^=1;return res}else if(num.negative===0&&this.negative!==0){this.negative=0;res=num.sub(this);this.negative=1;return res}if(this.length>num.length)return this.clone().iadd(num);return num.clone().iadd(this)};BN.prototype.isub=function isub(num){if(num.negative!==0){num.negative=0;var r=this.iadd(num);num.negative=1;return r._normSign()}else if(this.negative!==0){this.negative=0;this.iadd(num);this.negative=1;return this._normSign()}var cmp=this.cmp(num);if(cmp===0){this.negative=0;this.length=1;this.words[0]=0;return this}var a,b;if(cmp>0){a=this;b=num}else{a=num;b=this}var carry=0;for(var i=0;i<b.length;i++){r=(a.words[i]|0)-(b.words[i]|0)+carry;carry=r>>26;this.words[i]=r&67108863}for(;carry!==0&&i<a.length;i++){r=(a.words[i]|0)+carry;carry=r>>26;this.words[i]=r&67108863}if(carry===0&&i<a.length&&a!==this){for(;i<a.length;i++){this.words[i]=a.words[i]}}this.length=Math.max(this.length,i);if(a!==this){this.negative=1}return this.strip()};BN.prototype.sub=function sub(num){return this.clone().isub(num)};function smallMulTo(self,num,out){out.negative=num.negative^self.negative;var len=self.length+num.length|0;out.length=len;len=len-1|0;var a=self.words[0]|0;var b=num.words[0]|0;var r=a*b;var lo=r&67108863;var carry=r/67108864|0;out.words[0]=lo;for(var k=1;k<len;k++){var ncarry=carry>>>26;var rword=carry&67108863;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j|0;a=self.words[i]|0;b=num.words[j]|0;r=a*b+rword;ncarry+=r/67108864|0;rword=r&67108863}out.words[k]=rword|0;carry=ncarry|0}if(carry!==0){out.words[k]=carry|0}else{out.length--}return out.strip()}var comb10MulTo=function comb10MulTo(self,num,out){var a=self.words;var b=num.words;var o=out.words;var c=0;var lo;var mid;var hi;var a0=a[0]|0;var al0=a0&8191;var ah0=a0>>>13;var a1=a[1]|0;var al1=a1&8191;var ah1=a1>>>13;var a2=a[2]|0;var al2=a2&8191;var ah2=a2>>>13;var a3=a[3]|0;var al3=a3&8191;var ah3=a3>>>13;var a4=a[4]|0;var al4=a4&8191;var ah4=a4>>>13;var a5=a[5]|0;var al5=a5&8191;var ah5=a5>>>13;var a6=a[6]|0;var al6=a6&8191;var ah6=a6>>>13;var a7=a[7]|0;var al7=a7&8191;var ah7=a7>>>13;var a8=a[8]|0;var al8=a8&8191;var ah8=a8>>>13;var a9=a[9]|0;var al9=a9&8191;var ah9=a9>>>13;var b0=b[0]|0;var bl0=b0&8191;var bh0=b0>>>13;var b1=b[1]|0;var bl1=b1&8191;var bh1=b1>>>13;var b2=b[2]|0;var bl2=b2&8191;var bh2=b2>>>13;var b3=b[3]|0;var bl3=b3&8191;var bh3=b3>>>13;var b4=b[4]|0;var bl4=b4&8191;var bh4=b4>>>13;var b5=b[5]|0;var bl5=b5&8191;var bh5=b5>>>13;var b6=b[6]|0;var bl6=b6&8191;var bh6=b6>>>13;var b7=b[7]|0;var bl7=b7&8191;var bh7=b7>>>13;var b8=b[8]|0;var bl8=b8&8191;var bh8=b8>>>13;var b9=b[9]|0;var bl9=b9&8191;var bh9=b9>>>13;out.negative=self.negative^num.negative;out.length=19;lo=Math.imul(al0,bl0);mid=Math.imul(al0,bh0);mid=mid+Math.imul(ah0,bl0)|0;hi=Math.imul(ah0,bh0);var w0=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w0>>>26)|0;w0&=67108863;lo=Math.imul(al1,bl0);mid=Math.imul(al1,bh0);mid=mid+Math.imul(ah1,bl0)|0;hi=Math.imul(ah1,bh0);lo=lo+Math.imul(al0,bl1)|0;mid=mid+Math.imul(al0,bh1)|0;mid=mid+Math.imul(ah0,bl1)|0;hi=hi+Math.imul(ah0,bh1)|0;var w1=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w1>>>26)|0;w1&=67108863;lo=Math.imul(al2,bl0);mid=Math.imul(al2,bh0);mid=mid+Math.imul(ah2,bl0)|0;hi=Math.imul(ah2,bh0);lo=lo+Math.imul(al1,bl1)|0;mid=mid+Math.imul(al1,bh1)|0;mid=mid+Math.imul(ah1,bl1)|0;hi=hi+Math.imul(ah1,bh1)|0;lo=lo+Math.imul(al0,bl2)|0;mid=mid+Math.imul(al0,bh2)|0;mid=mid+Math.imul(ah0,bl2)|0;hi=hi+Math.imul(ah0,bh2)|0;var w2=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w2>>>26)|0;w2&=67108863;lo=Math.imul(al3,bl0);mid=Math.imul(al3,bh0);mid=mid+Math.imul(ah3,bl0)|0;hi=Math.imul(ah3,bh0);lo=lo+Math.imul(al2,bl1)|0;mid=mid+Math.imul(al2,bh1)|0;mid=mid+Math.imul(ah2,bl1)|0;hi=hi+Math.imul(ah2,bh1)|0;lo=lo+Math.imul(al1,bl2)|0;mid=mid+Math.imul(al1,bh2)|0;mid=mid+Math.imul(ah1,bl2)|0;hi=hi+Math.imul(ah1,bh2)|0;lo=lo+Math.imul(al0,bl3)|0;mid=mid+Math.imul(al0,bh3)|0;mid=mid+Math.imul(ah0,bl3)|0;hi=hi+Math.imul(ah0,bh3)|0;var w3=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w3>>>26)|0;w3&=67108863;lo=Math.imul(al4,bl0);mid=Math.imul(al4,bh0);mid=mid+Math.imul(ah4,bl0)|0;hi=Math.imul(ah4,bh0);lo=lo+Math.imul(al3,bl1)|0;mid=mid+Math.imul(al3,bh1)|0;mid=mid+Math.imul(ah3,bl1)|0;hi=hi+Math.imul(ah3,bh1)|0;lo=lo+Math.imul(al2,bl2)|0;mid=mid+Math.imul(al2,bh2)|0;mid=mid+Math.imul(ah2,bl2)|0;hi=hi+Math.imul(ah2,bh2)|0;lo=lo+Math.imul(al1,bl3)|0;mid=mid+Math.imul(al1,bh3)|0;mid=mid+Math.imul(ah1,bl3)|0;hi=hi+Math.imul(ah1,bh3)|0;lo=lo+Math.imul(al0,bl4)|0;mid=mid+Math.imul(al0,bh4)|0;mid=mid+Math.imul(ah0,bl4)|0;hi=hi+Math.imul(ah0,bh4)|0;var w4=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w4>>>26)|0;w4&=67108863;lo=Math.imul(al5,bl0);mid=Math.imul(al5,bh0);mid=mid+Math.imul(ah5,bl0)|0;hi=Math.imul(ah5,bh0);lo=lo+Math.imul(al4,bl1)|0;mid=mid+Math.imul(al4,bh1)|0;mid=mid+Math.imul(ah4,bl1)|0;hi=hi+Math.imul(ah4,bh1)|0;lo=lo+Math.imul(al3,bl2)|0;mid=mid+Math.imul(al3,bh2)|0;mid=mid+Math.imul(ah3,bl2)|0;hi=hi+Math.imul(ah3,bh2)|0;lo=lo+Math.imul(al2,bl3)|0;mid=mid+Math.imul(al2,bh3)|0;mid=mid+Math.imul(ah2,bl3)|0;hi=hi+Math.imul(ah2,bh3)|0;lo=lo+Math.imul(al1,bl4)|0;mid=mid+Math.imul(al1,bh4)|0;mid=mid+Math.imul(ah1,bl4)|0;hi=hi+Math.imul(ah1,bh4)|0;lo=lo+Math.imul(al0,bl5)|0;mid=mid+Math.imul(al0,bh5)|0;mid=mid+Math.imul(ah0,bl5)|0;hi=hi+Math.imul(ah0,bh5)|0;var w5=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w5>>>26)|0;w5&=67108863;lo=Math.imul(al6,bl0);mid=Math.imul(al6,bh0);mid=mid+Math.imul(ah6,bl0)|0;hi=Math.imul(ah6,bh0);lo=lo+Math.imul(al5,bl1)|0;mid=mid+Math.imul(al5,bh1)|0;mid=mid+Math.imul(ah5,bl1)|0;hi=hi+Math.imul(ah5,bh1)|0;lo=lo+Math.imul(al4,bl2)|0;mid=mid+Math.imul(al4,bh2)|0;mid=mid+Math.imul(ah4,bl2)|0;hi=hi+Math.imul(ah4,bh2)|0;lo=lo+Math.imul(al3,bl3)|0;mid=mid+Math.imul(al3,bh3)|0;mid=mid+Math.imul(ah3,bl3)|0;hi=hi+Math.imul(ah3,bh3)|0;lo=lo+Math.imul(al2,bl4)|0;mid=mid+Math.imul(al2,bh4)|0;mid=mid+Math.imul(ah2,bl4)|0;hi=hi+Math.imul(ah2,bh4)|0;lo=lo+Math.imul(al1,bl5)|0;mid=mid+Math.imul(al1,bh5)|0;mid=mid+Math.imul(ah1,bl5)|0;hi=hi+Math.imul(ah1,bh5)|0;lo=lo+Math.imul(al0,bl6)|0;mid=mid+Math.imul(al0,bh6)|0;mid=mid+Math.imul(ah0,bl6)|0;hi=hi+Math.imul(ah0,bh6)|0;var w6=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w6>>>26)|0;w6&=67108863;lo=Math.imul(al7,bl0);mid=Math.imul(al7,bh0);mid=mid+Math.imul(ah7,bl0)|0;hi=Math.imul(ah7,bh0);lo=lo+Math.imul(al6,bl1)|0;mid=mid+Math.imul(al6,bh1)|0;mid=mid+Math.imul(ah6,bl1)|0;hi=hi+Math.imul(ah6,bh1)|0;lo=lo+Math.imul(al5,bl2)|0;mid=mid+Math.imul(al5,bh2)|0;mid=mid+Math.imul(ah5,bl2)|0;hi=hi+Math.imul(ah5,bh2)|0;lo=lo+Math.imul(al4,bl3)|0;mid=mid+Math.imul(al4,bh3)|0;mid=mid+Math.imul(ah4,bl3)|0;hi=hi+Math.imul(ah4,bh3)|0;lo=lo+Math.imul(al3,bl4)|0;mid=mid+Math.imul(al3,bh4)|0;mid=mid+Math.imul(ah3,bl4)|0;hi=hi+Math.imul(ah3,bh4)|0;lo=lo+Math.imul(al2,bl5)|0;mid=mid+Math.imul(al2,bh5)|0;mid=mid+Math.imul(ah2,bl5)|0;hi=hi+Math.imul(ah2,bh5)|0;lo=lo+Math.imul(al1,bl6)|0;mid=mid+Math.imul(al1,bh6)|0;mid=mid+Math.imul(ah1,bl6)|0;hi=hi+Math.imul(ah1,bh6)|0;lo=lo+Math.imul(al0,bl7)|0;mid=mid+Math.imul(al0,bh7)|0;mid=mid+Math.imul(ah0,bl7)|0;hi=hi+Math.imul(ah0,bh7)|0;var w7=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w7>>>26)|0;w7&=67108863;lo=Math.imul(al8,bl0);mid=Math.imul(al8,bh0);mid=mid+Math.imul(ah8,bl0)|0;hi=Math.imul(ah8,bh0);lo=lo+Math.imul(al7,bl1)|0;mid=mid+Math.imul(al7,bh1)|0;mid=mid+Math.imul(ah7,bl1)|0;hi=hi+Math.imul(ah7,bh1)|0;lo=lo+Math.imul(al6,bl2)|0;mid=mid+Math.imul(al6,bh2)|0;mid=mid+Math.imul(ah6,bl2)|0;hi=hi+Math.imul(ah6,bh2)|0;lo=lo+Math.imul(al5,bl3)|0;mid=mid+Math.imul(al5,bh3)|0;mid=mid+Math.imul(ah5,bl3)|0;hi=hi+Math.imul(ah5,bh3)|0;lo=lo+Math.imul(al4,bl4)|0;mid=mid+Math.imul(al4,bh4)|0;mid=mid+Math.imul(ah4,bl4)|0;hi=hi+Math.imul(ah4,bh4)|0;lo=lo+Math.imul(al3,bl5)|0;mid=mid+Math.imul(al3,bh5)|0;mid=mid+Math.imul(ah3,bl5)|0;hi=hi+Math.imul(ah3,bh5)|0;lo=lo+Math.imul(al2,bl6)|0;mid=mid+Math.imul(al2,bh6)|0;mid=mid+Math.imul(ah2,bl6)|0;hi=hi+Math.imul(ah2,bh6)|0;lo=lo+Math.imul(al1,bl7)|0;mid=mid+Math.imul(al1,bh7)|0;mid=mid+Math.imul(ah1,bl7)|0;hi=hi+Math.imul(ah1,bh7)|0;lo=lo+Math.imul(al0,bl8)|0;mid=mid+Math.imul(al0,bh8)|0;mid=mid+Math.imul(ah0,bl8)|0;hi=hi+Math.imul(ah0,bh8)|0;var w8=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w8>>>26)|0;w8&=67108863;lo=Math.imul(al9,bl0);mid=Math.imul(al9,bh0);mid=mid+Math.imul(ah9,bl0)|0;hi=Math.imul(ah9,bh0);lo=lo+Math.imul(al8,bl1)|0;mid=mid+Math.imul(al8,bh1)|0;mid=mid+Math.imul(ah8,bl1)|0;hi=hi+Math.imul(ah8,bh1)|0;lo=lo+Math.imul(al7,bl2)|0;mid=mid+Math.imul(al7,bh2)|0;mid=mid+Math.imul(ah7,bl2)|0;hi=hi+Math.imul(ah7,bh2)|0;lo=lo+Math.imul(al6,bl3)|0;mid=mid+Math.imul(al6,bh3)|0;mid=mid+Math.imul(ah6,bl3)|0;hi=hi+Math.imul(ah6,bh3)|0;lo=lo+Math.imul(al5,bl4)|0;mid=mid+Math.imul(al5,bh4)|0;mid=mid+Math.imul(ah5,bl4)|0;hi=hi+Math.imul(ah5,bh4)|0;lo=lo+Math.imul(al4,bl5)|0;mid=mid+Math.imul(al4,bh5)|0;mid=mid+Math.imul(ah4,bl5)|0;hi=hi+Math.imul(ah4,bh5)|0;lo=lo+Math.imul(al3,bl6)|0;mid=mid+Math.imul(al3,bh6)|0;mid=mid+Math.imul(ah3,bl6)|0;hi=hi+Math.imul(ah3,bh6)|0;lo=lo+Math.imul(al2,bl7)|0;mid=mid+Math.imul(al2,bh7)|0;mid=mid+Math.imul(ah2,bl7)|0;hi=hi+Math.imul(ah2,bh7)|0;lo=lo+Math.imul(al1,bl8)|0;mid=mid+Math.imul(al1,bh8)|0;mid=mid+Math.imul(ah1,bl8)|0;hi=hi+Math.imul(ah1,bh8)|0;lo=lo+Math.imul(al0,bl9)|0;mid=mid+Math.imul(al0,bh9)|0;mid=mid+Math.imul(ah0,bl9)|0;hi=hi+Math.imul(ah0,bh9)|0;var w9=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w9>>>26)|0;w9&=67108863;lo=Math.imul(al9,bl1);mid=Math.imul(al9,bh1);mid=mid+Math.imul(ah9,bl1)|0;hi=Math.imul(ah9,bh1);lo=lo+Math.imul(al8,bl2)|0;mid=mid+Math.imul(al8,bh2)|0;mid=mid+Math.imul(ah8,bl2)|0;hi=hi+Math.imul(ah8,bh2)|0;lo=lo+Math.imul(al7,bl3)|0;mid=mid+Math.imul(al7,bh3)|0;mid=mid+Math.imul(ah7,bl3)|0;hi=hi+Math.imul(ah7,bh3)|0;lo=lo+Math.imul(al6,bl4)|0;mid=mid+Math.imul(al6,bh4)|0;mid=mid+Math.imul(ah6,bl4)|0;hi=hi+Math.imul(ah6,bh4)|0;lo=lo+Math.imul(al5,bl5)|0;mid=mid+Math.imul(al5,bh5)|0;mid=mid+Math.imul(ah5,bl5)|0;hi=hi+Math.imul(ah5,bh5)|0;lo=lo+Math.imul(al4,bl6)|0;mid=mid+Math.imul(al4,bh6)|0;mid=mid+Math.imul(ah4,bl6)|0;hi=hi+Math.imul(ah4,bh6)|0;lo=lo+Math.imul(al3,bl7)|0;mid=mid+Math.imul(al3,bh7)|0;mid=mid+Math.imul(ah3,bl7)|0;hi=hi+Math.imul(ah3,bh7)|0;lo=lo+Math.imul(al2,bl8)|0;mid=mid+Math.imul(al2,bh8)|0;mid=mid+Math.imul(ah2,bl8)|0;hi=hi+Math.imul(ah2,bh8)|0;lo=lo+Math.imul(al1,bl9)|0;mid=mid+Math.imul(al1,bh9)|0;mid=mid+Math.imul(ah1,bl9)|0;hi=hi+Math.imul(ah1,bh9)|0;var w10=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w10>>>26)|0;w10&=67108863;lo=Math.imul(al9,bl2);mid=Math.imul(al9,bh2);mid=mid+Math.imul(ah9,bl2)|0;hi=Math.imul(ah9,bh2);lo=lo+Math.imul(al8,bl3)|0;mid=mid+Math.imul(al8,bh3)|0;mid=mid+Math.imul(ah8,bl3)|0;hi=hi+Math.imul(ah8,bh3)|0;lo=lo+Math.imul(al7,bl4)|0;mid=mid+Math.imul(al7,bh4)|0;mid=mid+Math.imul(ah7,bl4)|0;hi=hi+Math.imul(ah7,bh4)|0;lo=lo+Math.imul(al6,bl5)|0;mid=mid+Math.imul(al6,bh5)|0;mid=mid+Math.imul(ah6,bl5)|0;hi=hi+Math.imul(ah6,bh5)|0;lo=lo+Math.imul(al5,bl6)|0;mid=mid+Math.imul(al5,bh6)|0;mid=mid+Math.imul(ah5,bl6)|0;hi=hi+Math.imul(ah5,bh6)|0;lo=lo+Math.imul(al4,bl7)|0;mid=mid+Math.imul(al4,bh7)|0;mid=mid+Math.imul(ah4,bl7)|0;hi=hi+Math.imul(ah4,bh7)|0;lo=lo+Math.imul(al3,bl8)|0;mid=mid+Math.imul(al3,bh8)|0;mid=mid+Math.imul(ah3,bl8)|0;hi=hi+Math.imul(ah3,bh8)|0;lo=lo+Math.imul(al2,bl9)|0;mid=mid+Math.imul(al2,bh9)|0;mid=mid+Math.imul(ah2,bl9)|0;hi=hi+Math.imul(ah2,bh9)|0;var w11=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w11>>>26)|0;w11&=67108863;lo=Math.imul(al9,bl3);mid=Math.imul(al9,bh3);mid=mid+Math.imul(ah9,bl3)|0;hi=Math.imul(ah9,bh3);lo=lo+Math.imul(al8,bl4)|0;mid=mid+Math.imul(al8,bh4)|0;mid=mid+Math.imul(ah8,bl4)|0;hi=hi+Math.imul(ah8,bh4)|0;lo=lo+Math.imul(al7,bl5)|0;mid=mid+Math.imul(al7,bh5)|0;mid=mid+Math.imul(ah7,bl5)|0;hi=hi+Math.imul(ah7,bh5)|0;lo=lo+Math.imul(al6,bl6)|0;mid=mid+Math.imul(al6,bh6)|0;mid=mid+Math.imul(ah6,bl6)|0;hi=hi+Math.imul(ah6,bh6)|0;lo=lo+Math.imul(al5,bl7)|0;mid=mid+Math.imul(al5,bh7)|0;mid=mid+Math.imul(ah5,bl7)|0;hi=hi+Math.imul(ah5,bh7)|0;lo=lo+Math.imul(al4,bl8)|0;mid=mid+Math.imul(al4,bh8)|0;mid=mid+Math.imul(ah4,bl8)|0;hi=hi+Math.imul(ah4,bh8)|0;lo=lo+Math.imul(al3,bl9)|0;mid=mid+Math.imul(al3,bh9)|0;mid=mid+Math.imul(ah3,bl9)|0;hi=hi+Math.imul(ah3,bh9)|0;var w12=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w12>>>26)|0;w12&=67108863;lo=Math.imul(al9,bl4);mid=Math.imul(al9,bh4);mid=mid+Math.imul(ah9,bl4)|0;hi=Math.imul(ah9,bh4);lo=lo+Math.imul(al8,bl5)|0;mid=mid+Math.imul(al8,bh5)|0;mid=mid+Math.imul(ah8,bl5)|0;hi=hi+Math.imul(ah8,bh5)|0;lo=lo+Math.imul(al7,bl6)|0;mid=mid+Math.imul(al7,bh6)|0;mid=mid+Math.imul(ah7,bl6)|0;hi=hi+Math.imul(ah7,bh6)|0;lo=lo+Math.imul(al6,bl7)|0;mid=mid+Math.imul(al6,bh7)|0;mid=mid+Math.imul(ah6,bl7)|0;hi=hi+Math.imul(ah6,bh7)|0;lo=lo+Math.imul(al5,bl8)|0;mid=mid+Math.imul(al5,bh8)|0;mid=mid+Math.imul(ah5,bl8)|0;hi=hi+Math.imul(ah5,bh8)|0;lo=lo+Math.imul(al4,bl9)|0;mid=mid+Math.imul(al4,bh9)|0;mid=mid+Math.imul(ah4,bl9)|0;hi=hi+Math.imul(ah4,bh9)|0;var w13=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w13>>>26)|0;w13&=67108863;lo=Math.imul(al9,bl5);mid=Math.imul(al9,bh5);mid=mid+Math.imul(ah9,bl5)|0;hi=Math.imul(ah9,bh5);lo=lo+Math.imul(al8,bl6)|0;mid=mid+Math.imul(al8,bh6)|0;mid=mid+Math.imul(ah8,bl6)|0;hi=hi+Math.imul(ah8,bh6)|0;lo=lo+Math.imul(al7,bl7)|0;mid=mid+Math.imul(al7,bh7)|0;mid=mid+Math.imul(ah7,bl7)|0;hi=hi+Math.imul(ah7,bh7)|0;lo=lo+Math.imul(al6,bl8)|0;mid=mid+Math.imul(al6,bh8)|0;mid=mid+Math.imul(ah6,bl8)|0;hi=hi+Math.imul(ah6,bh8)|0;lo=lo+Math.imul(al5,bl9)|0;mid=mid+Math.imul(al5,bh9)|0;mid=mid+Math.imul(ah5,bl9)|0;hi=hi+Math.imul(ah5,bh9)|0;var w14=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w14>>>26)|0;w14&=67108863;lo=Math.imul(al9,bl6);mid=Math.imul(al9,bh6);mid=mid+Math.imul(ah9,bl6)|0;hi=Math.imul(ah9,bh6);lo=lo+Math.imul(al8,bl7)|0;mid=mid+Math.imul(al8,bh7)|0;mid=mid+Math.imul(ah8,bl7)|0;hi=hi+Math.imul(ah8,bh7)|0;lo=lo+Math.imul(al7,bl8)|0;mid=mid+Math.imul(al7,bh8)|0;mid=mid+Math.imul(ah7,bl8)|0;hi=hi+Math.imul(ah7,bh8)|0;lo=lo+Math.imul(al6,bl9)|0;mid=mid+Math.imul(al6,bh9)|0;mid=mid+Math.imul(ah6,bl9)|0;hi=hi+Math.imul(ah6,bh9)|0;var w15=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w15>>>26)|0;w15&=67108863;lo=Math.imul(al9,bl7);mid=Math.imul(al9,bh7);mid=mid+Math.imul(ah9,bl7)|0;hi=Math.imul(ah9,bh7);lo=lo+Math.imul(al8,bl8)|0;mid=mid+Math.imul(al8,bh8)|0;mid=mid+Math.imul(ah8,bl8)|0;hi=hi+Math.imul(ah8,bh8)|0;lo=lo+Math.imul(al7,bl9)|0;mid=mid+Math.imul(al7,bh9)|0;mid=mid+Math.imul(ah7,bl9)|0;hi=hi+Math.imul(ah7,bh9)|0;var w16=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w16>>>26)|0;w16&=67108863;lo=Math.imul(al9,bl8);mid=Math.imul(al9,bh8);mid=mid+Math.imul(ah9,bl8)|0;hi=Math.imul(ah9,bh8);lo=lo+Math.imul(al8,bl9)|0;mid=mid+Math.imul(al8,bh9)|0;mid=mid+Math.imul(ah8,bl9)|0;hi=hi+Math.imul(ah8,bh9)|0;var w17=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w17>>>26)|0;w17&=67108863;lo=Math.imul(al9,bl9);mid=Math.imul(al9,bh9);mid=mid+Math.imul(ah9,bl9)|0;hi=Math.imul(ah9,bh9);var w18=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w18>>>26)|0;w18&=67108863;o[0]=w0;o[1]=w1;o[2]=w2;o[3]=w3;o[4]=w4;o[5]=w5;o[6]=w6;o[7]=w7;o[8]=w8;o[9]=w9;o[10]=w10;o[11]=w11;o[12]=w12;o[13]=w13;o[14]=w14;o[15]=w15;o[16]=w16;o[17]=w17;o[18]=w18;if(c!==0){o[19]=c;out.length++}return out};if(!Math.imul){comb10MulTo=smallMulTo}function bigMulTo(self,num,out){out.negative=num.negative^self.negative;out.length=self.length+num.length;var carry=0;var hncarry=0;for(var k=0;k<out.length-1;k++){var ncarry=hncarry;hncarry=0;var rword=carry&67108863;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j;var a=self.words[i]|0;var b=num.words[j]|0;var r=a*b;var lo=r&67108863;ncarry=ncarry+(r/67108864|0)|0;lo=lo+rword|0;rword=lo&67108863;ncarry=ncarry+(lo>>>26)|0;hncarry+=ncarry>>>26;ncarry&=67108863}out.words[k]=rword;carry=ncarry;ncarry=hncarry}if(carry!==0){out.words[k]=carry}else{out.length--}return out.strip()}function jumboMulTo(self,num,out){var fftm=new FFTM;return fftm.mulp(self,num,out)}BN.prototype.mulTo=function mulTo(num,out){var res;var len=this.length+num.length;if(this.length===10&&num.length===10){res=comb10MulTo(this,num,out)}else if(len<63){res=smallMulTo(this,num,out)}else if(len<1024){res=bigMulTo(this,num,out)}else{res=jumboMulTo(this,num,out)}return res};function FFTM(x,y){this.x=x;this.y=y}FFTM.prototype.makeRBT=function makeRBT(N){var t=new Array(N);var l=BN.prototype._countBits(N)-1;for(var i=0;i<N;i++){t[i]=this.revBin(i,l,N)}return t};FFTM.prototype.revBin=function revBin(x,l,N){if(x===0||x===N-1)return x;var rb=0;for(var i=0;i<l;i++){rb|=(x&1)<<l-i-1;x>>=1}return rb};FFTM.prototype.permute=function permute(rbt,rws,iws,rtws,itws,N){for(var i=0;i<N;i++){rtws[i]=rws[rbt[i]];itws[i]=iws[rbt[i]]}};FFTM.prototype.transform=function transform(rws,iws,rtws,itws,N,rbt){this.permute(rbt,rws,iws,rtws,itws,N);for(var s=1;s<N;s<<=1){var l=s<<1;var rtwdf=Math.cos(2*Math.PI/l);var itwdf=Math.sin(2*Math.PI/l);for(var p=0;p<N;p+=l){var rtwdf_=rtwdf;var itwdf_=itwdf;for(var j=0;j<s;j++){var re=rtws[p+j];var ie=itws[p+j];var ro=rtws[p+j+s];var io=itws[p+j+s];var rx=rtwdf_*ro-itwdf_*io;io=rtwdf_*io+itwdf_*ro;ro=rx;rtws[p+j]=re+ro;itws[p+j]=ie+io;rtws[p+j+s]=re-ro;itws[p+j+s]=ie-io;if(j!==l){rx=rtwdf*rtwdf_-itwdf*itwdf_;itwdf_=rtwdf*itwdf_+itwdf*rtwdf_;rtwdf_=rx}}}}};FFTM.prototype.guessLen13b=function guessLen13b(n,m){var N=Math.max(m,n)|1;var odd=N&1;var i=0;for(N=N/2|0;N;N=N>>>1){i++}return 1<<i+1+odd};FFTM.prototype.conjugate=function conjugate(rws,iws,N){if(N<=1)return;for(var i=0;i<N/2;i++){var t=rws[i];rws[i]=rws[N-i-1];rws[N-i-1]=t;t=iws[i];iws[i]=-iws[N-i-1];iws[N-i-1]=-t}};FFTM.prototype.normalize13b=function normalize13b(ws,N){var carry=0;for(var i=0;i<N/2;i++){var w=Math.round(ws[2*i+1]/N)*8192+Math.round(ws[2*i]/N)+carry;ws[i]=w&67108863;if(w<67108864){carry=0}else{carry=w/67108864|0}}return ws};FFTM.prototype.convert13b=function convert13b(ws,len,rws,N){var carry=0;for(var i=0;i<len;i++){carry=carry+(ws[i]|0);rws[2*i]=carry&8191;carry=carry>>>13;rws[2*i+1]=carry&8191;carry=carry>>>13}for(i=2*len;i<N;++i){rws[i]=0}assert(carry===0);assert((carry&~8191)===0)};FFTM.prototype.stub=function stub(N){var ph=new Array(N);for(var i=0;i<N;i++){ph[i]=0}return ph};FFTM.prototype.mulp=function mulp(x,y,out){var N=2*this.guessLen13b(x.length,y.length);var rbt=this.makeRBT(N);var _=this.stub(N);var rws=new Array(N);var rwst=new Array(N);var iwst=new Array(N);var nrws=new Array(N);var nrwst=new Array(N);var niwst=new Array(N);var rmws=out.words;rmws.length=N;this.convert13b(x.words,x.length,rws,N);this.convert13b(y.words,y.length,nrws,N);this.transform(rws,_,rwst,iwst,N,rbt);this.transform(nrws,_,nrwst,niwst,N,rbt);for(var i=0;i<N;i++){var rx=rwst[i]*nrwst[i]-iwst[i]*niwst[i];iwst[i]=rwst[i]*niwst[i]+iwst[i]*nrwst[i];rwst[i]=rx}this.conjugate(rwst,iwst,N);this.transform(rwst,iwst,rmws,_,N,rbt);this.conjugate(rmws,_,N);this.normalize13b(rmws,N);out.negative=x.negative^y.negative;out.length=x.length+y.length;return out.strip()};BN.prototype.mul=function mul(num){var out=new BN(null);out.words=new Array(this.length+num.length);return this.mulTo(num,out)};BN.prototype.mulf=function mulf(num){var out=new BN(null);out.words=new Array(this.length+num.length);return jumboMulTo(this,num,out)};BN.prototype.imul=function imul(num){return this.clone().mulTo(num,this)};BN.prototype.imuln=function imuln(num){assert(typeof num==="number");assert(num<67108864);var carry=0;for(var i=0;i<this.length;i++){var w=(this.words[i]|0)*num;var lo=(w&67108863)+(carry&67108863);carry>>=26;carry+=w/67108864|0;carry+=lo>>>26;this.words[i]=lo&67108863}if(carry!==0){this.words[i]=carry;this.length++}return this};BN.prototype.muln=function muln(num){return this.clone().imuln(num)};BN.prototype.sqr=function sqr(){return this.mul(this)};BN.prototype.isqr=function isqr(){return this.imul(this.clone())};BN.prototype.pow=function pow(num){var w=toBitArray(num);if(w.length===0)return new BN(1);var res=this;for(var i=0;i<w.length;i++,res=res.sqr()){if(w[i]!==0)break}if(++i<w.length){for(var q=res.sqr();i<w.length;i++,q=q.sqr()){if(w[i]===0)continue;res=res.mul(q)}}return res};BN.prototype.iushln=function iushln(bits){assert(typeof bits==="number"&&bits>=0);var r=bits%26;var s=(bits-r)/26;var carryMask=67108863>>>26-r<<26-r;var i;if(r!==0){var carry=0;for(i=0;i<this.length;i++){var newCarry=this.words[i]&carryMask;var c=(this.words[i]|0)-newCarry<<r;this.words[i]=c|carry;carry=newCarry>>>26-r}if(carry){this.words[i]=carry;this.length++}}if(s!==0){for(i=this.length-1;i>=0;i--){this.words[i+s]=this.words[i]}for(i=0;i<s;i++){this.words[i]=0}this.length+=s}return this.strip()};BN.prototype.ishln=function ishln(bits){assert(this.negative===0);return this.iushln(bits)};BN.prototype.iushrn=function iushrn(bits,hint,extended){assert(typeof bits==="number"&&bits>=0);var h;if(hint){h=(hint-hint%26)/26}else{h=0}var r=bits%26;var s=Math.min((bits-r)/26,this.length);var mask=67108863^67108863>>>r<<r;var maskedWords=extended;h-=s;h=Math.max(0,h);if(maskedWords){for(var i=0;i<s;i++){maskedWords.words[i]=this.words[i]}maskedWords.length=s}if(s===0){}else if(this.length>s){this.length-=s;for(i=0;i<this.length;i++){this.words[i]=this.words[i+s]}}else{this.words[0]=0;this.length=1}var carry=0;for(i=this.length-1;i>=0&&(carry!==0||i>=h);i--){var word=this.words[i]|0;this.words[i]=carry<<26-r|word>>>r;carry=word&mask}if(maskedWords&&carry!==0){maskedWords.words[maskedWords.length++]=carry}if(this.length===0){this.words[0]=0;this.length=1}return this.strip()};BN.prototype.ishrn=function ishrn(bits,hint,extended){assert(this.negative===0);return this.iushrn(bits,hint,extended)};BN.prototype.shln=function shln(bits){return this.clone().ishln(bits)};BN.prototype.ushln=function ushln(bits){return this.clone().iushln(bits)};BN.prototype.shrn=function shrn(bits){return this.clone().ishrn(bits)};BN.prototype.ushrn=function ushrn(bits){return this.clone().iushrn(bits)};BN.prototype.testn=function testn(bit){assert(typeof bit==="number"&&bit>=0);var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s)return false;var w=this.words[s];return!!(w&q)};BN.prototype.imaskn=function imaskn(bits){assert(typeof bits==="number"&&bits>=0);var r=bits%26;var s=(bits-r)/26;assert(this.negative===0,"imaskn works only with positive numbers");if(this.length<=s){return this}if(r!==0){s++}this.length=Math.min(s,this.length);if(r!==0){var mask=67108863^67108863>>>r<<r;this.words[this.length-1]&=mask}return this.strip()};BN.prototype.maskn=function maskn(bits){return this.clone().imaskn(bits)};BN.prototype.iaddn=function iaddn(num){assert(typeof num==="number");assert(num<67108864);if(num<0)return this.isubn(-num);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<num){this.words[0]=num-(this.words[0]|0);this.negative=0;return this}this.negative=0;this.isubn(num);this.negative=1;return this}return this._iaddn(num)};BN.prototype._iaddn=function _iaddn(num){this.words[0]+=num;for(var i=0;i<this.length&&this.words[i]>=67108864;i++){this.words[i]-=67108864;if(i===this.length-1){this.words[i+1]=1}else{this.words[i+1]++}}this.length=Math.max(this.length,i+1);return this};BN.prototype.isubn=function isubn(num){assert(typeof num==="number");assert(num<67108864);if(num<0)return this.iaddn(-num);if(this.negative!==0){this.negative=0;this.iaddn(num);this.negative=1;return this}this.words[0]-=num;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1}else{for(var i=0;i<this.length&&this.words[i]<0;i++){this.words[i]+=67108864;this.words[i+1]-=1}}return this.strip()};BN.prototype.addn=function addn(num){return this.clone().iaddn(num)};BN.prototype.subn=function subn(num){return this.clone().isubn(num)};BN.prototype.iabs=function iabs(){this.negative=0;return this};BN.prototype.abs=function abs(){return this.clone().iabs()};BN.prototype._ishlnsubmul=function _ishlnsubmul(num,mul,shift){var len=num.length+shift;var i;this._expand(len);var w;var carry=0;for(i=0;i<num.length;i++){w=(this.words[i+shift]|0)+carry;var right=(num.words[i]|0)*mul;w-=right&67108863;carry=(w>>26)-(right/67108864|0);this.words[i+shift]=w&67108863}for(;i<this.length-shift;i++){w=(this.words[i+shift]|0)+carry;carry=w>>26;this.words[i+shift]=w&67108863}if(carry===0)return this.strip();assert(carry===-1);carry=0;for(i=0;i<this.length;i++){w=-(this.words[i]|0)+carry;carry=w>>26;this.words[i]=w&67108863}this.negative=1;return this.strip()};BN.prototype._wordDiv=function _wordDiv(num,mode){var shift=this.length-num.length;var a=this.clone();var b=num;var bhi=b.words[b.length-1]|0;var bhiBits=this._countBits(bhi);shift=26-bhiBits;if(shift!==0){b=b.ushln(shift);a.iushln(shift);bhi=b.words[b.length-1]|0}var m=a.length-b.length;var q;if(mode!=="mod"){q=new BN(null);q.length=m+1;q.words=new Array(q.length);for(var i=0;i<q.length;i++){q.words[i]=0}}var diff=a.clone()._ishlnsubmul(b,1,m);if(diff.negative===0){a=diff;if(q){q.words[m]=1}}for(var j=m-1;j>=0;j--){var qj=(a.words[b.length+j]|0)*67108864+(a.words[b.length+j-1]|0);qj=Math.min(qj/bhi|0,67108863);a._ishlnsubmul(b,qj,j);while(a.negative!==0){qj--;a.negative=0;a._ishlnsubmul(b,1,j);if(!a.isZero()){a.negative^=1}}if(q){q.words[j]=qj}}if(q){q.strip()}a.strip();if(mode!=="div"&&shift!==0){a.iushrn(shift)}return{div:q||null,mod:a}};BN.prototype.divmod=function divmod(num,mode,positive){assert(!num.isZero());if(this.isZero()){return{div:new BN(0),mod:new BN(0)}}var div,mod,res;if(this.negative!==0&&num.negative===0){res=this.neg().divmod(num,mode);if(mode!=="mod"){div=res.div.neg()}if(mode!=="div"){mod=res.mod.neg();if(positive&&mod.negative!==0){mod.iadd(num)}}return{div:div,mod:mod}}if(this.negative===0&&num.negative!==0){res=this.divmod(num.neg(),mode);if(mode!=="mod"){div=res.div.neg()}return{div:div,mod:res.mod}}if((this.negative&num.negative)!==0){res=this.neg().divmod(num.neg(),mode);if(mode!=="div"){mod=res.mod.neg();if(positive&&mod.negative!==0){mod.isub(num)}}return{div:res.div,mod:mod}}if(num.length>this.length||this.cmp(num)<0){return{div:new BN(0),mod:this}}if(num.length===1){if(mode==="div"){return{div:this.divn(num.words[0]),mod:null}}if(mode==="mod"){return{div:null,mod:new BN(this.modn(num.words[0]))}}return{div:this.divn(num.words[0]),mod:new BN(this.modn(num.words[0]))}}return this._wordDiv(num,mode)};BN.prototype.div=function div(num){return this.divmod(num,"div",false).div};BN.prototype.mod=function mod(num){return this.divmod(num,"mod",false).mod};BN.prototype.umod=function umod(num){return this.divmod(num,"mod",true).mod};BN.prototype.divRound=function divRound(num){var dm=this.divmod(num);if(dm.mod.isZero())return dm.div;var mod=dm.div.negative!==0?dm.mod.isub(num):dm.mod;var half=num.ushrn(1);var r2=num.andln(1);var cmp=mod.cmp(half);if(cmp<0||r2===1&&cmp===0)return dm.div;return dm.div.negative!==0?dm.div.isubn(1):dm.div.iaddn(1)};BN.prototype.modn=function modn(num){assert(num<=67108863);var p=(1<<26)%num;var acc=0;for(var i=this.length-1;i>=0;i--){acc=(p*acc+(this.words[i]|0))%num}return acc};BN.prototype.idivn=function idivn(num){assert(num<=67108863);var carry=0;for(var i=this.length-1;i>=0;i--){var w=(this.words[i]|0)+carry*67108864;this.words[i]=w/num|0;carry=w%num}return this.strip()};BN.prototype.divn=function divn(num){return this.clone().idivn(num)};BN.prototype.egcd=function egcd(p){assert(p.negative===0);assert(!p.isZero());var x=this;var y=p.clone();if(x.negative!==0){x=x.umod(p)}else{x=x.clone()}var A=new BN(1);var B=new BN(0);var C=new BN(0);var D=new BN(1);var g=0;while(x.isEven()&&y.isEven()){x.iushrn(1);y.iushrn(1);++g}var yp=y.clone();var xp=x.clone();while(!x.isZero()){for(var i=0,im=1;(x.words[0]&im)===0&&i<26;++i,im<<=1);if(i>0){x.iushrn(i);while(i-- >0){if(A.isOdd()||B.isOdd()){A.iadd(yp);B.isub(xp)}A.iushrn(1);B.iushrn(1)}}for(var j=0,jm=1;(y.words[0]&jm)===0&&j<26;++j,jm<<=1);if(j>0){y.iushrn(j);while(j-- >0){if(C.isOdd()||D.isOdd()){C.iadd(yp);D.isub(xp)}C.iushrn(1);D.iushrn(1)}}if(x.cmp(y)>=0){x.isub(y);A.isub(C);B.isub(D)}else{y.isub(x);C.isub(A);D.isub(B)}}return{a:C,b:D,gcd:y.iushln(g)}};BN.prototype._invmp=function _invmp(p){assert(p.negative===0);assert(!p.isZero());var a=this;var b=p.clone();if(a.negative!==0){a=a.umod(p)}else{a=a.clone()}var x1=new BN(1);var x2=new BN(0);var delta=b.clone();while(a.cmpn(1)>0&&b.cmpn(1)>0){for(var i=0,im=1;(a.words[0]&im)===0&&i<26;++i,im<<=1);if(i>0){a.iushrn(i);while(i-- >0){if(x1.isOdd()){x1.iadd(delta)}x1.iushrn(1)}}for(var j=0,jm=1;(b.words[0]&jm)===0&&j<26;++j,jm<<=1);if(j>0){b.iushrn(j);while(j-- >0){if(x2.isOdd()){x2.iadd(delta)}x2.iushrn(1)}}if(a.cmp(b)>=0){a.isub(b);x1.isub(x2)}else{b.isub(a);x2.isub(x1)}}var res;if(a.cmpn(1)===0){res=x1}else{res=x2}if(res.cmpn(0)<0){res.iadd(p)}return res};BN.prototype.gcd=function gcd(num){if(this.isZero())return num.abs();if(num.isZero())return this.abs();var a=this.clone();var b=num.clone();a.negative=0;b.negative=0;for(var shift=0;a.isEven()&&b.isEven();shift++){a.iushrn(1);b.iushrn(1)}do{while(a.isEven()){a.iushrn(1)}while(b.isEven()){b.iushrn(1)}var r=a.cmp(b);if(r<0){var t=a;a=b;b=t}else if(r===0||b.cmpn(1)===0){break}a.isub(b)}while(true);return b.iushln(shift)};BN.prototype.invm=function invm(num){return this.egcd(num).a.umod(num)};BN.prototype.isEven=function isEven(){return(this.words[0]&1)===0};BN.prototype.isOdd=function isOdd(){return(this.words[0]&1)===1};BN.prototype.andln=function andln(num){return this.words[0]&num};BN.prototype.bincn=function bincn(bit){assert(typeof bit==="number");var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s){this._expand(s+1);this.words[s]|=q;return this}var carry=q;for(var i=s;carry!==0&&i<this.length;i++){var w=this.words[i]|0;w+=carry;carry=w>>>26;w&=67108863;this.words[i]=w}if(carry!==0){this.words[i]=carry;this.length++}return this};BN.prototype.isZero=function isZero(){return this.length===1&&this.words[0]===0};BN.prototype.cmpn=function cmpn(num){var negative=num<0;if(this.negative!==0&&!negative)return-1;if(this.negative===0&&negative)return 1;this.strip();var res;if(this.length>1){res=1}else{if(negative){num=-num}assert(num<=67108863,"Number is too big");var w=this.words[0]|0;res=w===num?0:w<num?-1:1}if(this.negative!==0)return-res|0;return res};BN.prototype.cmp=function cmp(num){if(this.negative!==0&&num.negative===0)return-1;if(this.negative===0&&num.negative!==0)return 1;var res=this.ucmp(num);if(this.negative!==0)return-res|0;return res};BN.prototype.ucmp=function ucmp(num){if(this.length>num.length)return 1;if(this.length<num.length)return-1;var res=0;for(var i=this.length-1;i>=0;i--){var a=this.words[i]|0;var b=num.words[i]|0;if(a===b)continue;if(a<b){res=-1}else if(a>b){res=1}break}return res};BN.prototype.gtn=function gtn(num){return this.cmpn(num)===1};BN.prototype.gt=function gt(num){return this.cmp(num)===1};BN.prototype.gten=function gten(num){return this.cmpn(num)>=0};BN.prototype.gte=function gte(num){return this.cmp(num)>=0};BN.prototype.ltn=function ltn(num){return this.cmpn(num)===-1};BN.prototype.lt=function lt(num){return this.cmp(num)===-1};BN.prototype.lten=function lten(num){return this.cmpn(num)<=0};BN.prototype.lte=function lte(num){return this.cmp(num)<=0};BN.prototype.eqn=function eqn(num){return this.cmpn(num)===0};BN.prototype.eq=function eq(num){return this.cmp(num)===0};BN.red=function red(num){return new Red(num)};BN.prototype.toRed=function toRed(ctx){assert(!this.red,"Already a number in reduction context");assert(this.negative===0,"red works only with positives");return ctx.convertTo(this)._forceRed(ctx)};BN.prototype.fromRed=function fromRed(){assert(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};BN.prototype._forceRed=function _forceRed(ctx){this.red=ctx;return this};BN.prototype.forceRed=function forceRed(ctx){assert(!this.red,"Already a number in reduction context");return this._forceRed(ctx)};BN.prototype.redAdd=function redAdd(num){assert(this.red,"redAdd works only with red numbers");return this.red.add(this,num)};BN.prototype.redIAdd=function redIAdd(num){assert(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,num)};BN.prototype.redSub=function redSub(num){assert(this.red,"redSub works only with red numbers");return this.red.sub(this,num)};BN.prototype.redISub=function redISub(num){assert(this.red,"redISub works only with red numbers");return this.red.isub(this,num)};BN.prototype.redShl=function redShl(num){assert(this.red,"redShl works only with red numbers");return this.red.shl(this,num)};BN.prototype.redMul=function redMul(num){assert(this.red,"redMul works only with red numbers");this.red._verify2(this,num);return this.red.mul(this,num)};BN.prototype.redIMul=function redIMul(num){assert(this.red,"redMul works only with red numbers");this.red._verify2(this,num);return this.red.imul(this,num)};BN.prototype.redSqr=function redSqr(){assert(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};BN.prototype.redISqr=function redISqr(){assert(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};BN.prototype.redSqrt=function redSqrt(){assert(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};BN.prototype.redInvm=function redInvm(){assert(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};BN.prototype.redNeg=function redNeg(){assert(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};BN.prototype.redPow=function redPow(num){assert(this.red&&!num.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,num)};var primes={k256:null,p224:null,p192:null,p25519:null};function MPrime(name,p){this.name=name;this.p=new BN(p,16);this.n=this.p.bitLength();this.k=new BN(1).iushln(this.n).isub(this.p);this.tmp=this._tmp()}MPrime.prototype._tmp=function _tmp(){var tmp=new BN(null);tmp.words=new Array(Math.ceil(this.n/13));return tmp};MPrime.prototype.ireduce=function ireduce(num){var r=num;var rlen;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);rlen=r.bitLength()}while(rlen>this.n);var cmp=rlen<this.n?-1:r.ucmp(this.p);if(cmp===0){r.words[0]=0;r.length=1}else if(cmp>0){r.isub(this.p)}else{if(r.strip!==undefined){r.strip()}else{r._strip()}}return r};MPrime.prototype.split=function split(input,out){input.iushrn(this.n,0,out)};MPrime.prototype.imulK=function imulK(num){return num.imul(this.k)};function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}inherits(K256,MPrime);K256.prototype.split=function split(input,output){var mask=4194303;var outLen=Math.min(input.length,9);for(var i=0;i<outLen;i++){output.words[i]=input.words[i]}output.length=outLen;if(input.length<=9){input.words[0]=0;input.length=1;return}var prev=input.words[9];output.words[output.length++]=prev&mask;for(i=10;i<input.length;i++){var next=input.words[i]|0;input.words[i-10]=(next&mask)<<4|prev>>>22;prev=next}prev>>>=22;input.words[i-10]=prev;if(prev===0&&input.length>10){input.length-=10}else{input.length-=9}};K256.prototype.imulK=function imulK(num){num.words[num.length]=0;num.words[num.length+1]=0;num.length+=2;var lo=0;for(var i=0;i<num.length;i++){var w=num.words[i]|0;lo+=w*977;num.words[i]=lo&67108863;lo=w*64+(lo/67108864|0)}if(num.words[num.length-1]===0){num.length--;if(num.words[num.length-1]===0){num.length--}}return num};function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}inherits(P224,MPrime);function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}inherits(P192,MPrime);function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}inherits(P25519,MPrime);P25519.prototype.imulK=function imulK(num){var carry=0;for(var i=0;i<num.length;i++){var hi=(num.words[i]|0)*19+carry;var lo=hi&67108863;hi>>>=26;num.words[i]=lo;carry=hi}if(carry!==0){num.words[num.length++]=carry}return num};BN._prime=function prime(name){if(primes[name])return primes[name];var prime;if(name==="k256"){prime=new K256}else if(name==="p224"){prime=new P224}else if(name==="p192"){prime=new P192}else if(name==="p25519"){prime=new P25519}else{throw new Error("Unknown prime "+name)}primes[name]=prime;return prime};function Red(m){if(typeof m==="string"){var prime=BN._prime(m);this.m=prime.p;this.prime=prime}else{assert(m.gtn(1),"modulus must be greater than 1");this.m=m;this.prime=null}}Red.prototype._verify1=function _verify1(a){assert(a.negative===0,"red works only with positives");assert(a.red,"red works only with red numbers")};Red.prototype._verify2=function _verify2(a,b){assert((a.negative|b.negative)===0,"red works only with positives");assert(a.red&&a.red===b.red,"red works only with red numbers")};Red.prototype.imod=function imod(a){if(this.prime)return this.prime.ireduce(a)._forceRed(this);return a.umod(this.m)._forceRed(this)};Red.prototype.neg=function neg(a){if(a.isZero()){return a.clone()}return this.m.sub(a)._forceRed(this)};Red.prototype.add=function add(a,b){this._verify2(a,b);var res=a.add(b);if(res.cmp(this.m)>=0){res.isub(this.m)}return res._forceRed(this)};Red.prototype.iadd=function iadd(a,b){this._verify2(a,b);var res=a.iadd(b);if(res.cmp(this.m)>=0){res.isub(this.m)}return res};Red.prototype.sub=function sub(a,b){this._verify2(a,b);var res=a.sub(b);if(res.cmpn(0)<0){res.iadd(this.m)}return res._forceRed(this)};Red.prototype.isub=function isub(a,b){this._verify2(a,b);var res=a.isub(b);if(res.cmpn(0)<0){res.iadd(this.m)}return res};Red.prototype.shl=function shl(a,num){this._verify1(a);return this.imod(a.ushln(num))};Red.prototype.imul=function imul(a,b){this._verify2(a,b);return this.imod(a.imul(b))};Red.prototype.mul=function mul(a,b){this._verify2(a,b);return this.imod(a.mul(b))};Red.prototype.isqr=function isqr(a){return this.imul(a,a.clone())};Red.prototype.sqr=function sqr(a){return this.mul(a,a)};Red.prototype.sqrt=function sqrt(a){if(a.isZero())return a.clone();var mod3=this.m.andln(3);assert(mod3%2===1);if(mod3===3){var pow=this.m.add(new BN(1)).iushrn(2);return this.pow(a,pow)}var q=this.m.subn(1);var s=0;while(!q.isZero()&&q.andln(1)===0){s++;q.iushrn(1)}assert(!q.isZero());var one=new BN(1).toRed(this);var nOne=one.redNeg();var lpow=this.m.subn(1).iushrn(1);var z=this.m.bitLength();z=new BN(2*z*z).toRed(this);while(this.pow(z,lpow).cmp(nOne)!==0){z.redIAdd(nOne)}var c=this.pow(z,q);var r=this.pow(a,q.addn(1).iushrn(1));var t=this.pow(a,q);var m=s;while(t.cmp(one)!==0){var tmp=t;for(var i=0;tmp.cmp(one)!==0;i++){tmp=tmp.redSqr()}assert(i<m);var b=this.pow(c,new BN(1).iushln(m-i-1));r=r.redMul(b);c=b.redSqr();t=t.redMul(c);m=i}return r};Red.prototype.invm=function invm(a){var inv=a._invmp(this.m);if(inv.negative!==0){inv.negative=0;return this.imod(inv).redNeg()}else{return this.imod(inv)}};Red.prototype.pow=function pow(a,num){if(num.isZero())return new BN(1).toRed(this);if(num.cmpn(1)===0)return a.clone();var windowSize=4;var wnd=new Array(1<<windowSize);wnd[0]=new BN(1).toRed(this);wnd[1]=a;for(var i=2;i<wnd.length;i++){wnd[i]=this.mul(wnd[i-1],a)}var res=wnd[0];var current=0;var currentLen=0;var start=num.bitLength()%26;if(start===0){start=26}for(i=num.length-1;i>=0;i--){var word=num.words[i];for(var j=start-1;j>=0;j--){var bit=word>>j&1;if(res!==wnd[0]){res=this.sqr(res)}if(bit===0&&current===0){currentLen=0;continue}current<<=1;current|=bit;currentLen++;if(currentLen!==windowSize&&(i!==0||j!==0))continue;res=this.mul(res,wnd[current]);currentLen=0;current=0}start=26}return res};Red.prototype.convertTo=function convertTo(num){var r=num.umod(this.m);return r===num?r.clone():r};Red.prototype.convertFrom=function convertFrom(num){var res=num.clone();res.red=null;return res};BN.mont=function mont(num){return new Mont(num)};function Mont(m){Red.call(this,m);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26}this.r=new BN(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}inherits(Mont,Red);Mont.prototype.convertTo=function convertTo(num){return this.imod(num.ushln(this.shift))};Mont.prototype.convertFrom=function convertFrom(num){var r=this.imod(num.mul(this.rinv));r.red=null;return r};Mont.prototype.imul=function imul(a,b){if(a.isZero()||b.isZero()){a.words[0]=0;a.length=1;return a}var t=a.imul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;if(u.cmp(this.m)>=0){res=u.isub(this.m)}else if(u.cmpn(0)<0){res=u.iadd(this.m)}return res._forceRed(this)};Mont.prototype.mul=function mul(a,b){if(a.isZero()||b.isZero())return new BN(0)._forceRed(this);var t=a.mul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;if(u.cmp(this.m)>=0){res=u.isub(this.m)}else if(u.cmpn(0)<0){res=u.iadd(this.m)}return res._forceRed(this)};Mont.prototype.invm=function invm(a){var res=this.imod(a._invmp(this.m).mul(this.r2));return res._forceRed(this)}})(typeof module==="undefined"||module,this)},{buffer:226}],181:[function(require,module,exports){(function(global){(function(){"use strict";var objectAssign=require("object-assign");function compare(a,b){if(a===b){return 0}var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break}}if(x<y){return-1}if(y<x){return 1}return 0}function isBuffer(b){if(global.Buffer&&typeof global.Buffer.isBuffer==="function"){return global.Buffer.isBuffer(b)}return!!(b!=null&&b._isBuffer)}var util=require("util/");var hasOwn=Object.prototype.hasOwnProperty;var pSlice=Array.prototype.slice;var functionsHaveNames=function(){return function foo(){}.name==="foo"}();function pToString(obj){return Object.prototype.toString.call(obj)}function isView(arrbuf){if(isBuffer(arrbuf)){return false}if(typeof global.ArrayBuffer!=="function"){return false}if(typeof ArrayBuffer.isView==="function"){return ArrayBuffer.isView(arrbuf)}if(!arrbuf){return false}if(arrbuf instanceof DataView){return true}if(arrbuf.buffer&&arrbuf.buffer instanceof ArrayBuffer){return true}return false}var assert=module.exports=ok;var regex=/\s*function\s+([^\(\s]*)\s*/;function getName(func){if(!util.isFunction(func)){return}if(functionsHaveNames){return func.name}var str=func.toString();var match=str.match(regex);return match&&match[1]}assert.AssertionError=function AssertionError(options){this.name="AssertionError";this.actual=options.actual;this.expected=options.expected;this.operator=options.operator;if(options.message){this.message=options.message;this.generatedMessage=false}else{this.message=getMessage(this);this.generatedMessage=true}var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace){Error.captureStackTrace(this,stackStartFunction)}else{var err=new Error;if(err.stack){var out=err.stack;var fn_name=getName(stackStartFunction);var idx=out.indexOf("\n"+fn_name);if(idx>=0){var next_line=out.indexOf("\n",idx+1);out=out.substring(next_line+1)}this.stack=out}}};util.inherits(assert.AssertionError,Error);function truncate(s,n){if(typeof s==="string"){return s.length<n?s:s.slice(0,n)}else{return s}}function inspect(something){if(functionsHaveNames||!util.isFunction(something)){return util.inspect(something)}var rawname=getName(something);var name=rawname?": "+rawname:"";return"[Function"+name+"]"}function getMessage(self){return truncate(inspect(self.actual),128)+" "+self.operator+" "+truncate(inspect(self.expected),128)}function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction})}assert.fail=fail;function ok(value,message){if(!value)fail(value,true,message,"==",assert.ok)}assert.ok=ok;assert.equal=function equal(actual,expected,message){if(actual!=expected)fail(actual,expected,message,"==",assert.equal)};assert.notEqual=function notEqual(actual,expected,message){if(actual==expected){fail(actual,expected,message,"!=",assert.notEqual)}};assert.deepEqual=function deepEqual(actual,expected,message){if(!_deepEqual(actual,expected,false)){fail(actual,expected,message,"deepEqual",assert.deepEqual)}};assert.deepStrictEqual=function deepStrictEqual(actual,expected,message){if(!_deepEqual(actual,expected,true)){fail(actual,expected,message,"deepStrictEqual",assert.deepStrictEqual)}};function _deepEqual(actual,expected,strict,memos){if(actual===expected){return true}else if(isBuffer(actual)&&isBuffer(expected)){return compare(actual,expected)===0}else if(util.isDate(actual)&&util.isDate(expected)){return actual.getTime()===expected.getTime()}else if(util.isRegExp(actual)&&util.isRegExp(expected)){return actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase}else if((actual===null||typeof actual!=="object")&&(expected===null||typeof expected!=="object")){return strict?actual===expected:actual==expected}else if(isView(actual)&&isView(expected)&&pToString(actual)===pToString(expected)&&!(actual instanceof Float32Array||actual instanceof Float64Array)){return compare(new Uint8Array(actual.buffer),new Uint8Array(expected.buffer))===0}else if(isBuffer(actual)!==isBuffer(expected)){return false}else{memos=memos||{actual:[],expected:[]};var actualIndex=memos.actual.indexOf(actual);if(actualIndex!==-1){if(actualIndex===memos.expected.indexOf(expected)){return true}}memos.actual.push(actual);memos.expected.push(expected);return objEquiv(actual,expected,strict,memos)}}function isArguments(object){return Object.prototype.toString.call(object)=="[object Arguments]"}function objEquiv(a,b,strict,actualVisitedObjects){if(a===null||a===undefined||b===null||b===undefined)return false;if(util.isPrimitive(a)||util.isPrimitive(b))return a===b;if(strict&&Object.getPrototypeOf(a)!==Object.getPrototypeOf(b))return false;var aIsArgs=isArguments(a);var bIsArgs=isArguments(b);if(aIsArgs&&!bIsArgs||!aIsArgs&&bIsArgs)return false;if(aIsArgs){a=pSlice.call(a);b=pSlice.call(b);return _deepEqual(a,b,strict)}var ka=objectKeys(a);var kb=objectKeys(b);var key,i;if(ka.length!==kb.length)return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--){if(ka[i]!==kb[i])return false}for(i=ka.length-1;i>=0;i--){key=ka[i];if(!_deepEqual(a[key],b[key],strict,actualVisitedObjects))return false}return true}assert.notDeepEqual=function notDeepEqual(actual,expected,message){if(_deepEqual(actual,expected,false)){fail(actual,expected,message,"notDeepEqual",assert.notDeepEqual)}};assert.notDeepStrictEqual=notDeepStrictEqual;function notDeepStrictEqual(actual,expected,message){if(_deepEqual(actual,expected,true)){fail(actual,expected,message,"notDeepStrictEqual",notDeepStrictEqual)}}assert.strictEqual=function strictEqual(actual,expected,message){if(actual!==expected){fail(actual,expected,message,"===",assert.strictEqual)}};assert.notStrictEqual=function notStrictEqual(actual,expected,message){if(actual===expected){fail(actual,expected,message,"!==",assert.notStrictEqual)}};function expectedException(actual,expected){if(!actual||!expected){return false}if(Object.prototype.toString.call(expected)=="[object RegExp]"){return expected.test(actual)}try{if(actual instanceof expected){return true}}catch(e){}if(Error.isPrototypeOf(expected)){return false}return expected.call({},actual)===true}function _tryBlock(block){var error;try{block()}catch(e){error=e}return error}function _throws(shouldThrow,block,expected,message){var actual;if(typeof block!=="function"){throw new TypeError('"block" argument must be a function')}if(typeof expected==="string"){message=expected;expected=null}actual=_tryBlock(block);message=(expected&&expected.name?" ("+expected.name+").":".")+(message?" "+message:".");if(shouldThrow&&!actual){fail(actual,expected,"Missing expected exception"+message)}var userProvidedMessage=typeof message==="string";var isUnwantedException=!shouldThrow&&util.isError(actual);var isUnexpectedException=!shouldThrow&&actual&&!expected;if(isUnwantedException&&userProvidedMessage&&expectedException(actual,expected)||isUnexpectedException){fail(actual,expected,"Got unwanted exception"+message)}if(shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual){throw actual}}assert.throws=function(block,error,message){_throws(true,block,error,message)};assert.doesNotThrow=function(block,error,message){_throws(false,block,error,message)};assert.ifError=function(err){if(err)throw err};function strict(value,message){if(!value)fail(value,true,message,"==",strict)}assert.strict=objectAssign(strict,assert,{equal:assert.strictEqual,deepEqual:assert.deepStrictEqual,notEqual:assert.notStrictEqual,notDeepEqual:assert.notDeepStrictEqual});assert.strict.strict=assert.strict;var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){if(hasOwn.call(obj,key))keys.push(key)}return keys}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"object-assign":506,"util/":184}],182:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],183:[function(require,module,exports){module.exports=function isBuffer(arg){return arg&&typeof arg==="object"&&typeof arg.copy==="function"&&typeof arg.fill==="function"&&typeof arg.readUInt8==="function"}},{}],184:[function(require,module,exports){(function(process,global){(function(){var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}if(process.noDeprecation===true){return fn}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))debugEnviron=process.env.NODE_DEBUG||"";set=set.toUpperCase();if(!debugs[set]){if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=require("./support/isBuffer");function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=require("inherits");exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}).call(this)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":183,_process:519,inherits:182}],185:[function(require,module,exports){(function(global){(function(){"use strict";var possibleNames=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"];var g=typeof globalThis==="undefined"?global:globalThis;module.exports=function availableTypedArrays(){var out=[];for(var i=0;i<possibleNames.length;i++){if(typeof g[possibleNames[i]]==="function"){out[out.length]=possibleNames[i]}}return out}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],186:[function(require,module,exports){module.exports=require("./lib/axios")},{"./lib/axios":188}],187:[function(require,module,exports){"use strict";var utils=require("./../utils");var settle=require("./../core/settle");var cookies=require("./../helpers/cookies");var buildURL=require("./../helpers/buildURL");var buildFullPath=require("../core/buildFullPath");var parseHeaders=require("./../helpers/parseHeaders");var isURLSameOrigin=require("./../helpers/isURLSameOrigin");var transitionalDefaults=require("../defaults/transitional");var AxiosError=require("../core/AxiosError");var CanceledError=require("../cancel/CanceledError");var parseProtocol=require("../helpers/parseProtocol");module.exports=function xhrAdapter(config){return new Promise(function dispatchXhrRequest(resolve,reject){var requestData=config.data;var requestHeaders=config.headers;var responseType=config.responseType;var onCanceled;function done(){if(config.cancelToken){config.cancelToken.unsubscribe(onCanceled)}if(config.signal){config.signal.removeEventListener("abort",onCanceled)}}if(utils.isFormData(requestData)&&utils.isStandardBrowserEnv()){delete requestHeaders["Content-Type"]}var request=new XMLHttpRequest;if(config.auth){var username=config.auth.username||"";var password=config.auth.password?unescape(encodeURIComponent(config.auth.password)):"";requestHeaders.Authorization="Basic "+btoa(username+":"+password)}var fullPath=buildFullPath(config.baseURL,config.url);request.open(config.method.toUpperCase(),buildURL(fullPath,config.params,config.paramsSerializer),true);request.timeout=config.timeout;function onloadend(){if(!request){return}var responseHeaders="getAllResponseHeaders"in request?parseHeaders(request.getAllResponseHeaders()):null;var responseData=!responseType||responseType==="text"||responseType==="json"?request.responseText:request.response;var response={data:responseData,status:request.status,statusText:request.statusText,headers:responseHeaders,config:config,request:request};settle(function _resolve(value){resolve(value);done()},function _reject(err){reject(err);done()},response);request=null}if("onloadend"in request){request.onloadend=onloadend}else{request.onreadystatechange=function handleLoad(){if(!request||request.readyState!==4){return}if(request.status===0&&!(request.responseURL&&request.responseURL.indexOf("file:")===0)){return}setTimeout(onloadend)}}request.onabort=function handleAbort(){if(!request){return}reject(new AxiosError("Request aborted",AxiosError.ECONNABORTED,config,request));request=null};request.onerror=function handleError(){reject(new AxiosError("Network Error",AxiosError.ERR_NETWORK,config,request,request));request=null};request.ontimeout=function handleTimeout(){var timeoutErrorMessage=config.timeout?"timeout of "+config.timeout+"ms exceeded":"timeout exceeded";var transitional=config.transitional||transitionalDefaults;if(config.timeoutErrorMessage){timeoutErrorMessage=config.timeoutErrorMessage}reject(new AxiosError(timeoutErrorMessage,transitional.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,config,request));request=null};if(utils.isStandardBrowserEnv()){var xsrfValue=(config.withCredentials||isURLSameOrigin(fullPath))&&config.xsrfCookieName?cookies.read(config.xsrfCookieName):undefined;if(xsrfValue){requestHeaders[config.xsrfHeaderName]=xsrfValue}}if("setRequestHeader"in request){utils.forEach(requestHeaders,function setRequestHeader(val,key){if(typeof requestData==="undefined"&&key.toLowerCase()==="content-type"){delete requestHeaders[key]}else{request.setRequestHeader(key,val)}})}if(!utils.isUndefined(config.withCredentials)){request.withCredentials=!!config.withCredentials}if(responseType&&responseType!=="json"){request.responseType=config.responseType}if(typeof config.onDownloadProgress==="function"){request.addEventListener("progress",config.onDownloadProgress)}if(typeof config.onUploadProgress==="function"&&request.upload){request.upload.addEventListener("progress",config.onUploadProgress)}if(config.cancelToken||config.signal){onCanceled=function(cancel){if(!request){return}reject(!cancel||cancel&&cancel.type?new CanceledError:cancel);request.abort();request=null};config.cancelToken&&config.cancelToken.subscribe(onCanceled);if(config.signal){config.signal.aborted?onCanceled():config.signal.addEventListener("abort",onCanceled)}}if(!requestData){requestData=null}var protocol=parseProtocol(fullPath);if(protocol&&["http","https","file"].indexOf(protocol)===-1){reject(new AxiosError("Unsupported protocol "+protocol+":",AxiosError.ERR_BAD_REQUEST,config));return}request.send(requestData)})}},{"../cancel/CanceledError":190,"../core/AxiosError":193,"../core/buildFullPath":195,"../defaults/transitional":201,"../helpers/parseProtocol":213,"./../core/settle":198,"./../helpers/buildURL":204,"./../helpers/cookies":206,"./../helpers/isURLSameOrigin":209,"./../helpers/parseHeaders":212,"./../utils":217}],188:[function(require,module,exports){"use strict";var utils=require("./utils");var bind=require("./helpers/bind");var Axios=require("./core/Axios");var mergeConfig=require("./core/mergeConfig");var defaults=require("./defaults");function createInstance(defaultConfig){var context=new Axios(defaultConfig);var instance=bind(Axios.prototype.request,context);utils.extend(instance,Axios.prototype,context);utils.extend(instance,context);instance.create=function create(instanceConfig){return createInstance(mergeConfig(defaultConfig,instanceConfig))};return instance}var axios=createInstance(defaults);axios.Axios=Axios;axios.CanceledError=require("./cancel/CanceledError");axios.CancelToken=require("./cancel/CancelToken");axios.isCancel=require("./cancel/isCancel");axios.VERSION=require("./env/data").version;axios.toFormData=require("./helpers/toFormData");axios.AxiosError=require("../lib/core/AxiosError");axios.Cancel=axios.CanceledError;axios.all=function all(promises){return Promise.all(promises)};axios.spread=require("./helpers/spread");axios.isAxiosError=require("./helpers/isAxiosError");module.exports=axios;module.exports.default=axios},{"../lib/core/AxiosError":193,"./cancel/CancelToken":189,"./cancel/CanceledError":190,"./cancel/isCancel":191,"./core/Axios":192,"./core/mergeConfig":197,"./defaults":200,"./env/data":202,"./helpers/bind":203,"./helpers/isAxiosError":208,"./helpers/spread":214,"./helpers/toFormData":215,"./utils":217}],189:[function(require,module,exports){"use strict";var CanceledError=require("./CanceledError");function CancelToken(executor){if(typeof executor!=="function"){throw new TypeError("executor must be a function.")}var resolvePromise;this.promise=new Promise(function promiseExecutor(resolve){resolvePromise=resolve});var token=this;this.promise.then(function(cancel){if(!token._listeners)return;var i;var l=token._listeners.length;for(i=0;i<l;i++){token._listeners[i](cancel)}token._listeners=null});this.promise.then=function(onfulfilled){var _resolve;var promise=new Promise(function(resolve){token.subscribe(resolve);_resolve=resolve}).then(onfulfilled);promise.cancel=function reject(){token.unsubscribe(_resolve)};return promise};executor(function cancel(message){if(token.reason){return}token.reason=new CanceledError(message);resolvePromise(token.reason)})}CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason){throw this.reason}};CancelToken.prototype.subscribe=function subscribe(listener){if(this.reason){listener(this.reason);return}if(this._listeners){this._listeners.push(listener)}else{this._listeners=[listener]}};CancelToken.prototype.unsubscribe=function unsubscribe(listener){if(!this._listeners){return}var index=this._listeners.indexOf(listener);if(index!==-1){this._listeners.splice(index,1)}};CancelToken.source=function source(){var cancel;var token=new CancelToken(function executor(c){cancel=c});return{token:token,cancel:cancel}};module.exports=CancelToken},{"./CanceledError":190}],190:[function(require,module,exports){"use strict";var AxiosError=require("../core/AxiosError");var utils=require("../utils");function CanceledError(message){AxiosError.call(this,message==null?"canceled":message,AxiosError.ERR_CANCELED);this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:true});module.exports=CanceledError},{"../core/AxiosError":193,"../utils":217}],191:[function(require,module,exports){"use strict";module.exports=function isCancel(value){return!!(value&&value.__CANCEL__)}},{}],192:[function(require,module,exports){"use strict";var utils=require("./../utils");var buildURL=require("../helpers/buildURL");var InterceptorManager=require("./InterceptorManager");var dispatchRequest=require("./dispatchRequest");var mergeConfig=require("./mergeConfig");var buildFullPath=require("./buildFullPath");var validator=require("../helpers/validator");var validators=validator.validators;function Axios(instanceConfig){this.defaults=instanceConfig;this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios.prototype.request=function request(configOrUrl,config){if(typeof configOrUrl==="string"){config=config||{};config.url=configOrUrl}else{config=configOrUrl||{}}config=mergeConfig(this.defaults,config);if(config.method){config.method=config.method.toLowerCase()}else if(this.defaults.method){config.method=this.defaults.method.toLowerCase()}else{config.method="get"}var transitional=config.transitional;if(transitional!==undefined){validator.assertOptions(transitional,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},false)}var requestInterceptorChain=[];var synchronousRequestInterceptors=true;this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor){if(typeof interceptor.runWhen==="function"&&interceptor.runWhen(config)===false){return}synchronousRequestInterceptors=synchronousRequestInterceptors&&interceptor.synchronous;requestInterceptorChain.unshift(interceptor.fulfilled,interceptor.rejected)});var responseInterceptorChain=[];this.interceptors.response.forEach(function pushResponseInterceptors(interceptor){responseInterceptorChain.push(interceptor.fulfilled,interceptor.rejected)});var promise;if(!synchronousRequestInterceptors){var chain=[dispatchRequest,undefined];Array.prototype.unshift.apply(chain,requestInterceptorChain);chain=chain.concat(responseInterceptorChain);promise=Promise.resolve(config);while(chain.length){promise=promise.then(chain.shift(),chain.shift())}return promise}var newConfig=config;while(requestInterceptorChain.length){var onFulfilled=requestInterceptorChain.shift();var onRejected=requestInterceptorChain.shift();try{newConfig=onFulfilled(newConfig)}catch(error){onRejected(error);break}}try{promise=dispatchRequest(newConfig)}catch(error){return Promise.reject(error)}while(responseInterceptorChain.length){promise=promise.then(responseInterceptorChain.shift(),responseInterceptorChain.shift())}return promise};Axios.prototype.getUri=function getUri(config){config=mergeConfig(this.defaults,config);var fullPath=buildFullPath(config.baseURL,config.url);return buildURL(fullPath,config.params,config.paramsSerializer)};utils.forEach(["delete","get","head","options"],function forEachMethodNoData(method){Axios.prototype[method]=function(url,config){return this.request(mergeConfig(config||{},{method:method,url:url,data:(config||{}).data}))}});utils.forEach(["post","put","patch"],function forEachMethodWithData(method){function generateHTTPMethod(isForm){return function httpMethod(url,data,config){return this.request(mergeConfig(config||{},{method:method,headers:isForm?{"Content-Type":"multipart/form-data"}:{},url:url,data:data}))}}Axios.prototype[method]=generateHTTPMethod();Axios.prototype[method+"Form"]=generateHTTPMethod(true)});module.exports=Axios},{"../helpers/buildURL":204,"../helpers/validator":216,"./../utils":217,"./InterceptorManager":194,"./buildFullPath":195,"./dispatchRequest":196,"./mergeConfig":197}],193:[function(require,module,exports){"use strict";var utils=require("../utils");function AxiosError(message,code,config,request,response){Error.call(this);this.message=message;this.name="AxiosError";code&&(this.code=code);config&&(this.config=config);request&&(this.request=request);response&&(this.response=response)}utils.inherits(AxiosError,Error,{toJSON:function toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var prototype=AxiosError.prototype;var descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(code){descriptors[code]={value:code}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype,"isAxiosError",{value:true});AxiosError.from=function(error,code,config,request,response,customProps){var axiosError=Object.create(prototype);utils.toFlatObject(error,axiosError,function filter(obj){return obj!==Error.prototype});AxiosError.call(axiosError,error.message,code,config,request,response);axiosError.name=error.name;customProps&&Object.assign(axiosError,customProps);return axiosError};module.exports=AxiosError},{"../utils":217}],194:[function(require,module,exports){"use strict";var utils=require("./../utils");function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(fulfilled,rejected,options){this.handlers.push({fulfilled:fulfilled,rejected:rejected,synchronous:options?options.synchronous:false,runWhen:options?options.runWhen:null});return this.handlers.length-1};InterceptorManager.prototype.eject=function eject(id){if(this.handlers[id]){this.handlers[id]=null}};InterceptorManager.prototype.forEach=function forEach(fn){utils.forEach(this.handlers,function forEachHandler(h){if(h!==null){fn(h)}})};module.exports=InterceptorManager},{"./../utils":217}],195:[function(require,module,exports){"use strict";var isAbsoluteURL=require("../helpers/isAbsoluteURL");var combineURLs=require("../helpers/combineURLs");module.exports=function buildFullPath(baseURL,requestedURL){if(baseURL&&!isAbsoluteURL(requestedURL)){return combineURLs(baseURL,requestedURL)}return requestedURL}},{"../helpers/combineURLs":205,"../helpers/isAbsoluteURL":207}],196:[function(require,module,exports){"use strict";var utils=require("./../utils");var transformData=require("./transformData");var isCancel=require("../cancel/isCancel");var defaults=require("../defaults");var CanceledError=require("../cancel/CanceledError");function throwIfCancellationRequested(config){if(config.cancelToken){config.cancelToken.throwIfRequested()}if(config.signal&&config.signal.aborted){throw new CanceledError}}module.exports=function dispatchRequest(config){throwIfCancellationRequested(config);config.headers=config.headers||{};config.data=transformData.call(config,config.data,config.headers,config.transformRequest);config.headers=utils.merge(config.headers.common||{},config.headers[config.method]||{},config.headers);utils.forEach(["delete","get","head","post","put","patch","common"],function cleanHeaderConfig(method){delete config.headers[method]});var adapter=config.adapter||defaults.adapter;return adapter(config).then(function onAdapterResolution(response){throwIfCancellationRequested(config);response.data=transformData.call(config,response.data,response.headers,config.transformResponse);return response},function onAdapterRejection(reason){if(!isCancel(reason)){throwIfCancellationRequested(config);if(reason&&reason.response){reason.response.data=transformData.call(config,reason.response.data,reason.response.headers,config.transformResponse)}}return Promise.reject(reason)})}},{"../cancel/CanceledError":190,"../cancel/isCancel":191,"../defaults":200,"./../utils":217,"./transformData":199}],197:[function(require,module,exports){"use strict";var utils=require("../utils");module.exports=function mergeConfig(config1,config2){config2=config2||{};var config={};function getMergedValue(target,source){if(utils.isPlainObject(target)&&utils.isPlainObject(source)){return utils.merge(target,source)}else if(utils.isPlainObject(source)){return utils.merge({},source)}else if(utils.isArray(source)){return source.slice()}return source}function mergeDeepProperties(prop){if(!utils.isUndefined(config2[prop])){return getMergedValue(config1[prop],config2[prop])}else if(!utils.isUndefined(config1[prop])){return getMergedValue(undefined,config1[prop])}}function valueFromConfig2(prop){if(!utils.isUndefined(config2[prop])){return getMergedValue(undefined,config2[prop])}}function defaultToConfig2(prop){if(!utils.isUndefined(config2[prop])){return getMergedValue(undefined,config2[prop])}else if(!utils.isUndefined(config1[prop])){return getMergedValue(undefined,config1[prop])}}function mergeDirectKeys(prop){if(prop in config2){return getMergedValue(config1[prop],config2[prop])}else if(prop in config1){return getMergedValue(undefined,config1[prop])}}var mergeMap={url:valueFromConfig2,method:valueFromConfig2,data:valueFromConfig2,baseURL:defaultToConfig2,transformRequest:defaultToConfig2,transformResponse:defaultToConfig2,paramsSerializer:defaultToConfig2,timeout:defaultToConfig2,timeoutMessage:defaultToConfig2,withCredentials:defaultToConfig2,adapter:defaultToConfig2,responseType:defaultToConfig2,xsrfCookieName:defaultToConfig2,xsrfHeaderName:defaultToConfig2,onUploadProgress:defaultToConfig2,onDownloadProgress:defaultToConfig2,decompress:defaultToConfig2,maxContentLength:defaultToConfig2,maxBodyLength:defaultToConfig2,beforeRedirect:defaultToConfig2,transport:defaultToConfig2,httpAgent:defaultToConfig2,httpsAgent:defaultToConfig2,cancelToken:defaultToConfig2,socketPath:defaultToConfig2,responseEncoding:defaultToConfig2,validateStatus:mergeDirectKeys};utils.forEach(Object.keys(config1).concat(Object.keys(config2)),function computeConfigValue(prop){var merge=mergeMap[prop]||mergeDeepProperties;var configValue=merge(prop);utils.isUndefined(configValue)&&merge!==mergeDirectKeys||(config[prop]=configValue)});return config}},{"../utils":217}],198:[function(require,module,exports){"use strict";var AxiosError=require("./AxiosError");module.exports=function settle(resolve,reject,response){var validateStatus=response.config.validateStatus;if(!response.status||!validateStatus||validateStatus(response.status)){resolve(response)}else{reject(new AxiosError("Request failed with status code "+response.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status/100)-4],response.config,response.request,response))}}},{"./AxiosError":193}],199:[function(require,module,exports){"use strict";var utils=require("./../utils");var defaults=require("../defaults");module.exports=function transformData(data,headers,fns){var context=this||defaults;utils.forEach(fns,function transform(fn){data=fn.call(context,data,headers)});return data}},{"../defaults":200,"./../utils":217}],200:[function(require,module,exports){(function(process){(function(){"use strict";var utils=require("../utils");var normalizeHeaderName=require("../helpers/normalizeHeaderName");var AxiosError=require("../core/AxiosError");var transitionalDefaults=require("./transitional");var toFormData=require("../helpers/toFormData");var DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(headers,value){if(!utils.isUndefined(headers)&&utils.isUndefined(headers["Content-Type"])){headers["Content-Type"]=value}}function getDefaultAdapter(){var adapter;if(typeof XMLHttpRequest!=="undefined"){adapter=require("../adapters/xhr")}else if(typeof process!=="undefined"&&Object.prototype.toString.call(process)==="[object process]"){adapter=require("../adapters/http")}return adapter}function stringifySafely(rawValue,parser,encoder){if(utils.isString(rawValue)){try{(parser||JSON.parse)(rawValue);return utils.trim(rawValue)}catch(e){if(e.name!=="SyntaxError"){throw e}}}return(encoder||JSON.stringify)(rawValue)}var defaults={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function transformRequest(data,headers){normalizeHeaderName(headers,"Accept");normalizeHeaderName(headers,"Content-Type");if(utils.isFormData(data)||utils.isArrayBuffer(data)||utils.isBuffer(data)||utils.isStream(data)||utils.isFile(data)||utils.isBlob(data)){return data}if(utils.isArrayBufferView(data)){return data.buffer}if(utils.isURLSearchParams(data)){setContentTypeIfUnset(headers,"application/x-www-form-urlencoded;charset=utf-8");return data.toString()}var isObjectPayload=utils.isObject(data);var contentType=headers&&headers["Content-Type"];var isFileList;if((isFileList=utils.isFileList(data))||isObjectPayload&&contentType==="multipart/form-data"){var _FormData=this.env&&this.env.FormData;return toFormData(isFileList?{"files[]":data}:data,_FormData&&new _FormData)}else if(isObjectPayload||contentType==="application/json"){setContentTypeIfUnset(headers,"application/json");return stringifySafely(data)}return data}],transformResponse:[function transformResponse(data){var transitional=this.transitional||defaults.transitional;var silentJSONParsing=transitional&&transitional.silentJSONParsing;var forcedJSONParsing=transitional&&transitional.forcedJSONParsing;var strictJSONParsing=!silentJSONParsing&&this.responseType==="json";if(strictJSONParsing||forcedJSONParsing&&utils.isString(data)&&data.length){try{return JSON.parse(data)}catch(e){if(strictJSONParsing){if(e.name==="SyntaxError"){throw AxiosError.from(e,AxiosError.ERR_BAD_RESPONSE,this,null,this.response)}throw e}}}return data}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:require("./env/FormData")},validateStatus:function validateStatus(status){return status>=200&&status<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function forEachMethodNoData(method){defaults.headers[method]={}});utils.forEach(["post","put","patch"],function forEachMethodWithData(method){defaults.headers[method]=utils.merge(DEFAULT_CONTENT_TYPE)});module.exports=defaults}).call(this)}).call(this,require("_process"))},{"../adapters/http":187,"../adapters/xhr":187,"../core/AxiosError":193,"../helpers/normalizeHeaderName":210,"../helpers/toFormData":215,"../utils":217,"./env/FormData":211,"./transitional":201,_process:519}],201:[function(require,module,exports){"use strict";module.exports={silentJSONParsing:true,forcedJSONParsing:true,clarifyTimeoutError:false}},{}],202:[function(require,module,exports){module.exports={version:"0.27.2"}},{}],203:[function(require,module,exports){"use strict";module.exports=function bind(fn,thisArg){return function wrap(){var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}return fn.apply(thisArg,args)}}},{}],204:[function(require,module,exports){"use strict";var utils=require("./../utils");function encode(val){return encodeURIComponent(val).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}module.exports=function buildURL(url,params,paramsSerializer){if(!params){return url}var serializedParams;if(paramsSerializer){serializedParams=paramsSerializer(params)}else if(utils.isURLSearchParams(params)){serializedParams=params.toString()}else{var parts=[];utils.forEach(params,function serialize(val,key){if(val===null||typeof val==="undefined"){return}if(utils.isArray(val)){key=key+"[]"}else{val=[val]}utils.forEach(val,function parseValue(v){if(utils.isDate(v)){v=v.toISOString()}else if(utils.isObject(v)){v=JSON.stringify(v)}parts.push(encode(key)+"="+encode(v))})});serializedParams=parts.join("&")}if(serializedParams){var hashmarkIndex=url.indexOf("#");if(hashmarkIndex!==-1){url=url.slice(0,hashmarkIndex)}url+=(url.indexOf("?")===-1?"?":"&")+serializedParams}return url}},{"./../utils":217}],205:[function(require,module,exports){"use strict";module.exports=function combineURLs(baseURL,relativeURL){return relativeURL?baseURL.replace(/\/+$/,"")+"/"+relativeURL.replace(/^\/+/,""):baseURL}},{}],206:[function(require,module,exports){"use strict";var utils=require("./../utils");module.exports=utils.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(name,value,expires,path,domain,secure){var cookie=[];cookie.push(name+"="+encodeURIComponent(value));if(utils.isNumber(expires)){cookie.push("expires="+new Date(expires).toGMTString())}if(utils.isString(path)){cookie.push("path="+path)}if(utils.isString(domain)){cookie.push("domain="+domain)}if(secure===true){cookie.push("secure")}document.cookie=cookie.join("; ")},read:function read(name){var match=document.cookie.match(new RegExp("(^|;\\s*)("+name+")=([^;]*)"));return match?decodeURIComponent(match[3]):null},remove:function remove(name){this.write(name,"",Date.now()-864e5)}}}():function nonStandardBrowserEnv(){return{write:function write(){},read:function read(){return null},remove:function remove(){}}}()},{"./../utils":217}],207:[function(require,module,exports){"use strict";module.exports=function isAbsoluteURL(url){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(url)}},{}],208:[function(require,module,exports){"use strict";var utils=require("./../utils");module.exports=function isAxiosError(payload){return utils.isObject(payload)&&payload.isAxiosError===true}},{"./../utils":217}],209:[function(require,module,exports){"use strict";var utils=require("./../utils");module.exports=utils.isStandardBrowserEnv()?function standardBrowserEnv(){var msie=/(msie|trident)/i.test(navigator.userAgent);var urlParsingNode=document.createElement("a");var originURL;function resolveURL(url){var href=url;if(msie){urlParsingNode.setAttribute("href",href);href=urlParsingNode.href}urlParsingNode.setAttribute("href",href);return{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:urlParsingNode.pathname.charAt(0)==="/"?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}originURL=resolveURL(window.location.href);return function isURLSameOrigin(requestURL){var parsed=utils.isString(requestURL)?resolveURL(requestURL):requestURL;return parsed.protocol===originURL.protocol&&parsed.host===originURL.host}}():function nonStandardBrowserEnv(){return function isURLSameOrigin(){return true}}()},{"./../utils":217}],210:[function(require,module,exports){"use strict";var utils=require("../utils");module.exports=function normalizeHeaderName(headers,normalizedName){utils.forEach(headers,function processHeader(value,name){if(name!==normalizedName&&name.toUpperCase()===normalizedName.toUpperCase()){headers[normalizedName]=value;delete headers[name]}})}},{"../utils":217}],211:[function(require,module,exports){module.exports=null},{}],212:[function(require,module,exports){"use strict";var utils=require("./../utils");var ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function parseHeaders(headers){var parsed={};var key;var val;var i;if(!headers){return parsed}utils.forEach(headers.split("\n"),function parser(line){i=line.indexOf(":");key=utils.trim(line.substr(0,i)).toLowerCase();val=utils.trim(line.substr(i+1));if(key){if(parsed[key]&&ignoreDuplicateOf.indexOf(key)>=0){return}if(key==="set-cookie"){parsed[key]=(parsed[key]?parsed[key]:[]).concat([val])}else{parsed[key]=parsed[key]?parsed[key]+", "+val:val}}});return parsed}},{"./../utils":217}],213:[function(require,module,exports){"use strict";module.exports=function parseProtocol(url){var match=/^([-+\w]{1,25})(:?\/\/|:)/.exec(url);return match&&match[1]||""}},{}],214:[function(require,module,exports){"use strict";module.exports=function spread(callback){return function wrap(arr){return callback.apply(null,arr)}}},{}],215:[function(require,module,exports){(function(Buffer){(function(){"use strict";var utils=require("../utils");function toFormData(obj,formData){formData=formData||new FormData;var stack=[];function convertValue(value){if(value===null)return"";if(utils.isDate(value)){return value.toISOString()}if(utils.isArrayBuffer(value)||utils.isTypedArray(value)){return typeof Blob==="function"?new Blob([value]):Buffer.from(value)}return value}function build(data,parentKey){if(utils.isPlainObject(data)||utils.isArray(data)){if(stack.indexOf(data)!==-1){throw Error("Circular reference detected in "+parentKey)}stack.push(data);utils.forEach(data,function each(value,key){if(utils.isUndefined(value))return;var fullKey=parentKey?parentKey+"."+key:key;var arr;if(value&&!parentKey&&typeof value==="object"){if(utils.endsWith(key,"{}")){value=JSON.stringify(value)}else if(utils.endsWith(key,"[]")&&(arr=utils.toArray(value))){arr.forEach(function(el){!utils.isUndefined(el)&&formData.append(fullKey,convertValue(el))});return}}build(value,fullKey)});stack.pop()}else{formData.append(parentKey,convertValue(data))}}build(obj);return formData}module.exports=toFormData}).call(this)}).call(this,require("buffer").Buffer)},{"../utils":217,buffer:269}],216:[function(require,module,exports){"use strict";var VERSION=require("../env/data").version;var AxiosError=require("../core/AxiosError");var validators={};["object","boolean","number","function","string","symbol"].forEach(function(type,i){validators[type]=function validator(thing){return typeof thing===type||"a"+(i<1?"n ":" ")+type}});var deprecatedWarnings={};validators.transitional=function transitional(validator,version,message){function formatMessage(opt,desc){return"[Axios v"+VERSION+"] Transitional option '"+opt+"'"+desc+(message?". "+message:"")}return function(value,opt,opts){if(validator===false){throw new AxiosError(formatMessage(opt," has been removed"+(version?" in "+version:"")),AxiosError.ERR_DEPRECATED)}if(version&&!deprecatedWarnings[opt]){deprecatedWarnings[opt]=true;console.warn(formatMessage(opt," has been deprecated since v"+version+" and will be removed in the near future"))}return validator?validator(value,opt,opts):true}};function assertOptions(options,schema,allowUnknown){if(typeof options!=="object"){throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE)}var keys=Object.keys(options);var i=keys.length;while(i-- >0){var opt=keys[i];var validator=schema[opt];if(validator){var value=options[opt];var result=value===undefined||validator(value,opt,options);if(result!==true){throw new AxiosError("option "+opt+" must be "+result,AxiosError.ERR_BAD_OPTION_VALUE)}continue}if(allowUnknown!==true){throw new AxiosError("Unknown option "+opt,AxiosError.ERR_BAD_OPTION)}}}module.exports={assertOptions:assertOptions,validators:validators}},{"../core/AxiosError":193,"../env/data":202}],217:[function(require,module,exports){"use strict";var bind=require("./helpers/bind");var toString=Object.prototype.toString;var kindOf=function(cache){return function(thing){var str=toString.call(thing);return cache[str]||(cache[str]=str.slice(8,-1).toLowerCase())}}(Object.create(null));function kindOfTest(type){type=type.toLowerCase();return function isKindOf(thing){return kindOf(thing)===type}}function isArray(val){return Array.isArray(val)}function isUndefined(val){return typeof val==="undefined"}function isBuffer(val){return val!==null&&!isUndefined(val)&&val.constructor!==null&&!isUndefined(val.constructor)&&typeof val.constructor.isBuffer==="function"&&val.constructor.isBuffer(val)}var isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(val){var result;if(typeof ArrayBuffer!=="undefined"&&ArrayBuffer.isView){result=ArrayBuffer.isView(val)}else{result=val&&val.buffer&&isArrayBuffer(val.buffer)}return result}function isString(val){return typeof val==="string"}function isNumber(val){return typeof val==="number"}function isObject(val){return val!==null&&typeof val==="object"}function isPlainObject(val){if(kindOf(val)!=="object"){return false}var prototype=Object.getPrototypeOf(val);return prototype===null||prototype===Object.prototype}var isDate=kindOfTest("Date");var isFile=kindOfTest("File");var isBlob=kindOfTest("Blob");var isFileList=kindOfTest("FileList");function isFunction(val){return toString.call(val)==="[object Function]"}function isStream(val){return isObject(val)&&isFunction(val.pipe)}function isFormData(thing){var pattern="[object FormData]";return thing&&(typeof FormData==="function"&&thing instanceof FormData||toString.call(thing)===pattern||isFunction(thing.toString)&&thing.toString()===pattern)}var isURLSearchParams=kindOfTest("URLSearchParams");function trim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){if(typeof navigator!=="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")){return false}return typeof window!=="undefined"&&typeof document!=="undefined"}function forEach(obj,fn){if(obj===null||typeof obj==="undefined"){return}if(typeof obj!=="object"){obj=[obj]}if(isArray(obj)){for(var i=0,l=obj.length;i<l;i++){fn.call(null,obj[i],i,obj)}}else{for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){fn.call(null,obj[key],key,obj)}}}}function merge(){var result={};function assignValue(val,key){if(isPlainObject(result[key])&&isPlainObject(val)){result[key]=merge(result[key],val)}else if(isPlainObject(val)){result[key]=merge({},val)}else if(isArray(val)){result[key]=val.slice()}else{result[key]=val}}for(var i=0,l=arguments.length;i<l;i++){forEach(arguments[i],assignValue)}return result}function extend(a,b,thisArg){forEach(b,function assignValue(val,key){if(thisArg&&typeof val==="function"){a[key]=bind(val,thisArg)}else{a[key]=val}});return a}function stripBOM(content){if(content.charCodeAt(0)===65279){content=content.slice(1)}return content}function inherits(constructor,superConstructor,props,descriptors){constructor.prototype=Object.create(superConstructor.prototype,descriptors);constructor.prototype.constructor=constructor;props&&Object.assign(constructor.prototype,props)}function toFlatObject(sourceObj,destObj,filter){var props;var i;var prop;var merged={};destObj=destObj||{};do{props=Object.getOwnPropertyNames(sourceObj);i=props.length;while(i-- >0){prop=props[i];if(!merged[prop]){destObj[prop]=sourceObj[prop];merged[prop]=true}}sourceObj=Object.getPrototypeOf(sourceObj)}while(sourceObj&&(!filter||filter(sourceObj,destObj))&&sourceObj!==Object.prototype);return destObj}function endsWith(str,searchString,position){str=String(str);if(position===undefined||position>str.length){position=str.length}position-=searchString.length;var lastIndex=str.indexOf(searchString,position);return lastIndex!==-1&&lastIndex===position}function toArray(thing){if(!thing)return null;var i=thing.length;if(isUndefined(i))return null;var arr=new Array(i);while(i-- >0){arr[i]=thing[i]}return arr}var isTypedArray=function(TypedArray){return function(thing){return TypedArray&&thing instanceof TypedArray}}(typeof Uint8Array!=="undefined"&&Object.getPrototypeOf(Uint8Array));module.exports={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isPlainObject:isPlainObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,extend:extend,trim:trim,stripBOM:stripBOM,inherits:inherits,toFlatObject:toFlatObject,kindOf:kindOf,kindOfTest:kindOfTest,endsWith:endsWith,toArray:toArray,isTypedArray:isTypedArray,isFileList:isFileList}},{"./helpers/bind":203}],218:[function(require,module,exports){"use strict";exports.byteLength=byteLength;exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(b64){var len=b64.length;if(len%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var validLen=b64.indexOf("=");if(validLen===-1)validLen=len;var placeHoldersLen=validLen===len?0:4-validLen%4;return[validLen,placeHoldersLen]}function byteLength(b64){var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function _byteLength(b64,validLen,placeHoldersLen){return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function toByteArray(b64){var tmp;var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];var arr=new Arr(_byteLength(b64,validLen,placeHoldersLen));var curByte=0;var len=placeHoldersLen>0?validLen-4:validLen;var i;for(i=0;i<len;i+=4){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[curByte++]=tmp>>16&255;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}if(placeHoldersLen===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[curByte++]=tmp&255}if(placeHoldersLen===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}return arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(uint8[i+2]&255);output.push(tripletToBase64(tmp))}return output.join("")}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength))}if(extraBytes===1){tmp=uint8[len-1];parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"=")}return parts.join("")}},{}],219:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});let converter;function toBigIntLE(buf){{const reversed=Buffer.from(buf);reversed.reverse();const hex=reversed.toString("hex");if(hex.length===0){return BigInt(0)}return BigInt(`0x${hex}`)}return converter.toBigInt(buf,false)}exports.toBigIntLE=toBigIntLE;function toBigIntBE(buf){{const hex=buf.toString("hex");if(hex.length===0){return BigInt(0)}return BigInt(`0x${hex}`)}return converter.toBigInt(buf,true)}exports.toBigIntBE=toBigIntBE;function toBufferLE(num,width){{const hex=num.toString(16);const buffer=Buffer.from(hex.padStart(width*2,"0").slice(0,width*2),"hex");buffer.reverse();return buffer}return converter.fromBigInt(num,Buffer.allocUnsafe(width),false)}exports.toBufferLE=toBufferLE;function toBufferBE(num,width){{const hex=num.toString(16);return Buffer.from(hex.padStart(width*2,"0").slice(0,width*2),"hex")}return converter.fromBigInt(num,Buffer.allocUnsafe(width),true)}exports.toBufferBE=toBufferBE}).call(this)}).call(this,require("buffer").Buffer)},{buffer:269}],220:[function(require,module,exports){(function(globalObject){"use strict";var BigNumber,isNumeric=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mathceil=Math.ceil,mathfloor=Math.floor,bignumberError="[BigNumber Error] ",tooManyDigits=bignumberError+"Number primitive has more than 15 significant digits: ",BASE=1e14,LOG_BASE=14,MAX_SAFE_INTEGER=9007199254740991,POWS_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE=1e7,MAX=1e9;function clone(configObject){var div,convertBase,parseNumeric,P=BigNumber.prototype={constructor:BigNumber,toString:null,valueOf:null},ONE=new BigNumber(1),DECIMAL_PLACES=20,ROUNDING_MODE=4,TO_EXP_NEG=-7,TO_EXP_POS=21,MIN_EXP=-1e7,MAX_EXP=1e7,CRYPTO=false,MODULO_MODE=1,POW_PRECISION=0,FORMAT={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},ALPHABET="0123456789abcdefghijklmnopqrstuvwxyz",alphabetHasNormalDecimalDigits=true;function BigNumber(v,b){var alphabet,c,caseChanged,e,i,isNum,len,str,x=this;if(!(x instanceof BigNumber))return new BigNumber(v,b);if(b==null){if(v&&v._isBigNumber===true){x.s=v.s;if(!v.c||v.e>MAX_EXP){x.c=x.e=null}else if(v.e<MIN_EXP){x.c=[x.e=0]}else{x.e=v.e;x.c=v.c.slice()}return}if((isNum=typeof v=="number")&&v*0==0){x.s=1/v<0?(v=-v,-1):1;if(v===~~v){for(e=0,i=v;i>=10;i/=10,e++);if(e>MAX_EXP){x.c=x.e=null}else{x.e=e;x.c=[v]}return}str=String(v)}else{if(!isNumeric.test(str=String(v)))return parseNumeric(x,str,isNum);x.s=str.charCodeAt(0)==45?(str=str.slice(1),-1):1}if((e=str.indexOf("."))>-1)str=str.replace(".","");if((i=str.search(/e/i))>0){if(e<0)e=i;e+=+str.slice(i+1);str=str.substring(0,i)}else if(e<0){e=str.length}}else{intCheck(b,2,ALPHABET.length,"Base");if(b==10&&alphabetHasNormalDecimalDigits){x=new BigNumber(v);return round(x,DECIMAL_PLACES+x.e+1,ROUNDING_MODE)}str=String(v);if(isNum=typeof v=="number"){if(v*0!=0)return parseNumeric(x,str,isNum,b);x.s=1/v<0?(str=str.slice(1),-1):1;if(BigNumber.DEBUG&&str.replace(/^0\.0*|\./,"").length>15){throw Error(tooManyDigits+v)}}else{x.s=str.charCodeAt(0)===45?(str=str.slice(1),-1):1}alphabet=ALPHABET.slice(0,b);e=i=0;for(len=str.length;i<len;i++){if(alphabet.indexOf(c=str.charAt(i))<0){if(c=="."){if(i>e){e=len;continue}}else if(!caseChanged){if(str==str.toUpperCase()&&(str=str.toLowerCase())||str==str.toLowerCase()&&(str=str.toUpperCase())){caseChanged=true;i=-1;e=0;continue}}return parseNumeric(x,String(v),isNum,b)}}isNum=false;str=convertBase(str,b,10,x.s);if((e=str.indexOf("."))>-1)str=str.replace(".","");else e=str.length}for(i=0;str.charCodeAt(i)===48;i++);for(len=str.length;str.charCodeAt(--len)===48;);if(str=str.slice(i,++len)){len-=i;if(isNum&&BigNumber.DEBUG&&len>15&&(v>MAX_SAFE_INTEGER||v!==mathfloor(v))){throw Error(tooManyDigits+x.s*v)}if((e=e-i-1)>MAX_EXP){x.c=x.e=null}else if(e<MIN_EXP){x.c=[x.e=0]}else{x.e=e;x.c=[];i=(e+1)%LOG_BASE;if(e<0)i+=LOG_BASE;if(i<len){if(i)x.c.push(+str.slice(0,i));for(len-=LOG_BASE;i<len;){x.c.push(+str.slice(i,i+=LOG_BASE))}i=LOG_BASE-(str=str.slice(i)).length}else{i-=len}for(;i--;str+="0");x.c.push(+str)}}else{x.c=[x.e=0]}}BigNumber.clone=clone;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(obj){var p,v;if(obj!=null){if(typeof obj=="object"){if(obj.hasOwnProperty(p="DECIMAL_PLACES")){v=obj[p];intCheck(v,0,MAX,p);DECIMAL_PLACES=v}if(obj.hasOwnProperty(p="ROUNDING_MODE")){v=obj[p];intCheck(v,0,8,p);ROUNDING_MODE=v}if(obj.hasOwnProperty(p="EXPONENTIAL_AT")){v=obj[p];if(v&&v.pop){intCheck(v[0],-MAX,0,p);intCheck(v[1],0,MAX,p);TO_EXP_NEG=v[0];TO_EXP_POS=v[1]}else{intCheck(v,-MAX,MAX,p);TO_EXP_NEG=-(TO_EXP_POS=v<0?-v:v)}}if(obj.hasOwnProperty(p="RANGE")){v=obj[p];if(v&&v.pop){intCheck(v[0],-MAX,-1,p);intCheck(v[1],1,MAX,p);MIN_EXP=v[0];MAX_EXP=v[1]}else{intCheck(v,-MAX,MAX,p);if(v){MIN_EXP=-(MAX_EXP=v<0?-v:v)}else{throw Error(bignumberError+p+" cannot be zero: "+v)}}}if(obj.hasOwnProperty(p="CRYPTO")){v=obj[p];if(v===!!v){if(v){if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)){CRYPTO=v}else{CRYPTO=!v;throw Error(bignumberError+"crypto unavailable")}}else{CRYPTO=v}}else{throw Error(bignumberError+p+" not true or false: "+v)}}if(obj.hasOwnProperty(p="MODULO_MODE")){v=obj[p];intCheck(v,0,9,p);MODULO_MODE=v}if(obj.hasOwnProperty(p="POW_PRECISION")){v=obj[p];intCheck(v,0,MAX,p);POW_PRECISION=v}if(obj.hasOwnProperty(p="FORMAT")){v=obj[p];if(typeof v=="object")FORMAT=v;else throw Error(bignumberError+p+" not an object: "+v)}if(obj.hasOwnProperty(p="ALPHABET")){v=obj[p];if(typeof v=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(v)){alphabetHasNormalDecimalDigits=v.slice(0,10)=="0123456789";ALPHABET=v}else{throw Error(bignumberError+p+" invalid: "+v)}}}else{throw Error(bignumberError+"Object expected: "+obj)}}return{DECIMAL_PLACES:DECIMAL_PLACES,ROUNDING_MODE:ROUNDING_MODE,EXPONENTIAL_AT:[TO_EXP_NEG,TO_EXP_POS],RANGE:[MIN_EXP,MAX_EXP],CRYPTO:CRYPTO,MODULO_MODE:MODULO_MODE,POW_PRECISION:POW_PRECISION,FORMAT:FORMAT,ALPHABET:ALPHABET}};BigNumber.isBigNumber=function(v){if(!v||v._isBigNumber!==true)return false;if(!BigNumber.DEBUG)return true;var i,n,c=v.c,e=v.e,s=v.s;out:if({}.toString.call(c)=="[object Array]"){if((s===1||s===-1)&&e>=-MAX&&e<=MAX&&e===mathfloor(e)){if(c[0]===0){if(e===0&&c.length===1)return true;break out}i=(e+1)%LOG_BASE;if(i<1)i+=LOG_BASE;if(String(c[0]).length==i){for(i=0;i<c.length;i++){n=c[i];if(n<0||n>=BASE||n!==mathfloor(n))break out}if(n!==0)return true}}}else if(c===null&&e===null&&(s===null||s===1||s===-1)){return true}throw Error(bignumberError+"Invalid BigNumber: "+v)};BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,P.lt)};BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,P.gt)};BigNumber.random=function(){var pow2_53=9007199254740992;var random53bitInt=Math.random()*pow2_53&2097151?function(){return mathfloor(Math.random()*pow2_53)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(dp){var a,b,e,k,v,i=0,c=[],rand=new BigNumber(ONE);if(dp==null)dp=DECIMAL_PLACES;else intCheck(dp,0,MAX);k=mathceil(dp/LOG_BASE);if(CRYPTO){if(crypto.getRandomValues){a=crypto.getRandomValues(new Uint32Array(k*=2));for(;i<k;){v=a[i]*131072+(a[i+1]>>>11);if(v>=9e15){b=crypto.getRandomValues(new Uint32Array(2));a[i]=b[0];a[i+1]=b[1]}else{c.push(v%1e14);i+=2}}i=k/2}else if(crypto.randomBytes){a=crypto.randomBytes(k*=7);for(;i<k;){v=(a[i]&31)*281474976710656+a[i+1]*1099511627776+a[i+2]*4294967296+a[i+3]*16777216+(a[i+4]<<16)+(a[i+5]<<8)+a[i+6];if(v>=9e15){crypto.randomBytes(7).copy(a,i)}else{c.push(v%1e14);i+=7}}i=k/7}else{CRYPTO=false;throw Error(bignumberError+"crypto unavailable")}}if(!CRYPTO){for(;i<k;){v=random53bitInt();if(v<9e15)c[i++]=v%1e14}}k=c[--i];dp%=LOG_BASE;if(k&&dp){v=POWS_TEN[LOG_BASE-dp];c[i]=mathfloor(k/v)*v}for(;c[i]===0;c.pop(),i--);if(i<0){c=[e=0]}else{for(e=-1;c[0]===0;c.splice(0,1),e-=LOG_BASE);for(i=1,v=c[0];v>=10;v/=10,i++);if(i<LOG_BASE)e-=LOG_BASE-i}rand.e=e;rand.c=c;return rand}}();BigNumber.sum=function(){var i=1,args=arguments,sum=new BigNumber(args[0]);for(;i<args.length;)sum=sum.plus(args[i++]);return sum};convertBase=function(){var decimal="0123456789";function toBaseOut(str,baseIn,baseOut,alphabet){var j,arr=[0],arrL,i=0,len=str.length;for(;i<len;){for(arrL=arr.length;arrL--;arr[arrL]*=baseIn);arr[0]+=alphabet.indexOf(str.charAt(i++));for(j=0;j<arr.length;j++){if(arr[j]>baseOut-1){if(arr[j+1]==null)arr[j+1]=0;arr[j+1]+=arr[j]/baseOut|0;arr[j]%=baseOut}}}return arr.reverse()}return function(str,baseIn,baseOut,sign,callerIsToString){var alphabet,d,e,k,r,x,xc,y,i=str.indexOf("."),dp=DECIMAL_PLACES,rm=ROUNDING_MODE;if(i>=0){k=POW_PRECISION;POW_PRECISION=0;str=str.replace(".","");y=new BigNumber(baseIn);x=y.pow(str.length-i);POW_PRECISION=k;y.c=toBaseOut(toFixedPoint(coeffToString(x.c),x.e,"0"),10,baseOut,decimal);y.e=y.c.length}xc=toBaseOut(str,baseIn,baseOut,callerIsToString?(alphabet=ALPHABET,decimal):(alphabet=decimal,ALPHABET));e=k=xc.length;for(;xc[--k]==0;xc.pop());if(!xc[0])return alphabet.charAt(0);if(i<0){--e}else{x.c=xc;x.e=e;x.s=sign;x=div(x,y,dp,rm,baseOut);xc=x.c;r=x.r;e=x.e}d=e+dp+1;i=xc[d];k=baseOut/2;r=r||d<0||xc[d+1]!=null;r=rm<4?(i!=null||r)&&(rm==0||rm==(x.s<0?3:2)):i>k||i==k&&(rm==4||r||rm==6&&xc[d-1]&1||rm==(x.s<0?8:7));if(d<1||!xc[0]){str=r?toFixedPoint(alphabet.charAt(1),-dp,alphabet.charAt(0)):alphabet.charAt(0)}else{xc.length=d;if(r){for(--baseOut;++xc[--d]>baseOut;){xc[d]=0;if(!d){++e;xc=[1].concat(xc)}}}for(k=xc.length;!xc[--k];);for(i=0,str="";i<=k;str+=alphabet.charAt(xc[i++]));str=toFixedPoint(str,e,alphabet.charAt(0))}return str}}();div=function(){function multiply(x,k,base){var m,temp,xlo,xhi,carry=0,i=x.length,klo=k%SQRT_BASE,khi=k/SQRT_BASE|0;for(x=x.slice();i--;){xlo=x[i]%SQRT_BASE;xhi=x[i]/SQRT_BASE|0;m=khi*xlo+xhi*klo;temp=klo*xlo+m%SQRT_BASE*SQRT_BASE+carry;carry=(temp/base|0)+(m/SQRT_BASE|0)+khi*xhi;x[i]=temp%base}if(carry)x=[carry].concat(x);return x}function compare(a,b,aL,bL){var i,cmp;if(aL!=bL){cmp=aL>bL?1:-1}else{for(i=cmp=0;i<aL;i++){if(a[i]!=b[i]){cmp=a[i]>b[i]?1:-1;break}}}return cmp}function subtract(a,b,aL,base){var i=0;for(;aL--;){a[aL]-=i;i=a[aL]<b[aL]?1:0;a[aL]=i*base+a[aL]-b[aL]}for(;!a[0]&&a.length>1;a.splice(0,1));}return function(x,y,dp,rm,base){var cmp,e,i,more,n,prod,prodL,q,qc,rem,remL,rem0,xi,xL,yc0,yL,yz,s=x.s==y.s?1:-1,xc=x.c,yc=y.c;if(!xc||!xc[0]||!yc||!yc[0]){return new BigNumber(!x.s||!y.s||(xc?yc&&xc[0]==yc[0]:!yc)?NaN:xc&&xc[0]==0||!yc?s*0:s/0)}q=new BigNumber(s);qc=q.c=[];e=x.e-y.e;s=dp+e+1;if(!base){base=BASE;e=bitFloor(x.e/LOG_BASE)-bitFloor(y.e/LOG_BASE);s=s/LOG_BASE|0}for(i=0;yc[i]==(xc[i]||0);i++);if(yc[i]>(xc[i]||0))e--;if(s<0){qc.push(1);more=true}else{xL=xc.length;yL=yc.length;i=0;s+=2;n=mathfloor(base/(yc[0]+1));if(n>1){yc=multiply(yc,n,base);xc=multiply(xc,n,base);yL=yc.length;xL=xc.length}xi=yL;rem=xc.slice(0,yL);remL=rem.length;for(;remL<yL;rem[remL++]=0);yz=yc.slice();yz=[0].concat(yz);yc0=yc[0];if(yc[1]>=base/2)yc0++;do{n=0;cmp=compare(yc,rem,yL,remL);if(cmp<0){rem0=rem[0];if(yL!=remL)rem0=rem0*base+(rem[1]||0);n=mathfloor(rem0/yc0);if(n>1){if(n>=base)n=base-1;prod=multiply(yc,n,base);prodL=prod.length;remL=rem.length;while(compare(prod,rem,prodL,remL)==1){n--;subtract(prod,yL<prodL?yz:yc,prodL,base);prodL=prod.length;cmp=1}}else{if(n==0){cmp=n=1}prod=yc.slice();prodL=prod.length}if(prodL<remL)prod=[0].concat(prod);subtract(rem,prod,remL,base);remL=rem.length;if(cmp==-1){while(compare(yc,rem,yL,remL)<1){n++;subtract(rem,yL<remL?yz:yc,remL,base);remL=rem.length}}}else if(cmp===0){n++;rem=[0]}qc[i++]=n;if(rem[0]){rem[remL++]=xc[xi]||0}else{rem=[xc[xi]];remL=1}}while((xi++<xL||rem[0]!=null)&&s--);more=rem[0]!=null;if(!qc[0])qc.splice(0,1)}if(base==BASE){for(i=1,s=qc[0];s>=10;s/=10,i++);round(q,dp+(q.e=i+e*LOG_BASE-1)+1,rm,more)}else{q.e=e;q.r=+more}return q}}();function format(n,i,rm,id){var c0,e,ne,len,str;if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);if(!n.c)return n.toString();c0=n.c[0];ne=n.e;if(i==null){str=coeffToString(n.c);str=id==1||id==2&&(ne<=TO_EXP_NEG||ne>=TO_EXP_POS)?toExponential(str,ne):toFixedPoint(str,ne,"0")}else{n=round(new BigNumber(n),i,rm);e=n.e;str=coeffToString(n.c);len=str.length;if(id==1||id==2&&(i<=e||e<=TO_EXP_NEG)){for(;len<i;str+="0",len++);str=toExponential(str,e)}else{i-=ne;str=toFixedPoint(str,e,"0");if(e+1>len){if(--i>0)for(str+=".";i--;str+="0");}else{i+=e-len;if(i>0){if(e+1==len)str+=".";for(;i--;str+="0");}}}}return n.s<0&&c0?"-"+str:str}function maxOrMin(args,method){var n,i=1,m=new BigNumber(args[0]);for(;i<args.length;i++){n=new BigNumber(args[i]);if(!n.s){m=n;break}else if(method.call(m,n)){m=n}}return m}function normalise(n,c,e){var i=1,j=c.length;for(;!c[--j];c.pop());for(j=c[0];j>=10;j/=10,i++);if((e=i+e*LOG_BASE-1)>MAX_EXP){n.c=n.e=null}else if(e<MIN_EXP){n.c=[n.e=0]}else{n.e=e;n.c=c}return n}parseNumeric=function(){var basePrefix=/^(-?)0([xbo])(?=\w[\w.]*$)/i,dotAfter=/^([^.]+)\.$/,dotBefore=/^\.([^.]+)$/,isInfinityOrNaN=/^-?(Infinity|NaN)$/,whitespaceOrPlus=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(x,str,isNum,b){var base,s=isNum?str:str.replace(whitespaceOrPlus,"");if(isInfinityOrNaN.test(s)){x.s=isNaN(s)?null:s<0?-1:1}else{if(!isNum){s=s.replace(basePrefix,function(m,p1,p2){base=(p2=p2.toLowerCase())=="x"?16:p2=="b"?2:8;return!b||b==base?p1:m});if(b){base=b;s=s.replace(dotAfter,"$1").replace(dotBefore,"0.$1")}if(str!=s)return new BigNumber(s,base)}if(BigNumber.DEBUG){throw Error(bignumberError+"Not a"+(b?" base "+b:"")+" number: "+str)}x.s=null}x.c=x.e=null}}();function round(x,sd,rm,r){var d,i,j,k,n,ni,rd,xc=x.c,pows10=POWS_TEN;if(xc){out:{for(d=1,k=xc[0];k>=10;k/=10,d++);i=sd-d;if(i<0){i+=LOG_BASE;j=sd;n=xc[ni=0];rd=n/pows10[d-j-1]%10|0}else{ni=mathceil((i+1)/LOG_BASE);if(ni>=xc.length){if(r){for(;xc.length<=ni;xc.push(0));n=rd=0;d=1;i%=LOG_BASE;j=i-LOG_BASE+1}else{break out}}else{n=k=xc[ni];for(d=1;k>=10;k/=10,d++);i%=LOG_BASE;j=i-LOG_BASE+d;rd=j<0?0:n/pows10[d-j-1]%10|0}}r=r||sd<0||xc[ni+1]!=null||(j<0?n:n%pows10[d-j-1]);r=rm<4?(rd||r)&&(rm==0||rm==(x.s<0?3:2)):rd>5||rd==5&&(rm==4||r||rm==6&&(i>0?j>0?n/pows10[d-j]:0:xc[ni-1])%10&1||rm==(x.s<0?8:7));if(sd<1||!xc[0]){xc.length=0;if(r){sd-=x.e+1;xc[0]=pows10[(LOG_BASE-sd%LOG_BASE)%LOG_BASE];x.e=-sd||0}else{xc[0]=x.e=0}return x}if(i==0){xc.length=ni;k=1;ni--}else{xc.length=ni+1;k=pows10[LOG_BASE-i];xc[ni]=j>0?mathfloor(n/pows10[d-j]%pows10[j])*k:0}if(r){for(;;){if(ni==0){for(i=1,j=xc[0];j>=10;j/=10,i++);j=xc[0]+=k;for(k=1;j>=10;j/=10,k++);if(i!=k){x.e++;if(xc[0]==BASE)xc[0]=1}break}else{xc[ni]+=k;if(xc[ni]!=BASE)break;xc[ni--]=0;k=1}}}for(i=xc.length;xc[--i]===0;xc.pop());}if(x.e>MAX_EXP){x.c=x.e=null}else if(x.e<MIN_EXP){x.c=[x.e=0]}}return x}function valueOf(n){var str,e=n.e;if(e===null)return n.toString();str=coeffToString(n.c);str=e<=TO_EXP_NEG||e>=TO_EXP_POS?toExponential(str,e):toFixedPoint(str,e,"0");return n.s<0?"-"+str:str}P.absoluteValue=P.abs=function(){var x=new BigNumber(this);if(x.s<0)x.s=1;return x};P.comparedTo=function(y,b){return compare(this,new BigNumber(y,b))};P.decimalPlaces=P.dp=function(dp,rm){var c,n,v,x=this;if(dp!=null){intCheck(dp,0,MAX);if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);return round(new BigNumber(x),dp+x.e+1,rm)}if(!(c=x.c))return null;n=((v=c.length-1)-bitFloor(this.e/LOG_BASE))*LOG_BASE;if(v=c[v])for(;v%10==0;v/=10,n--);if(n<0)n=0;return n};P.dividedBy=P.div=function(y,b){return div(this,new BigNumber(y,b),DECIMAL_PLACES,ROUNDING_MODE)};P.dividedToIntegerBy=P.idiv=function(y,b){return div(this,new BigNumber(y,b),0,1)};P.exponentiatedBy=P.pow=function(n,m){var half,isModExp,i,k,more,nIsBig,nIsNeg,nIsOdd,y,x=this;n=new BigNumber(n);if(n.c&&!n.isInteger()){throw Error(bignumberError+"Exponent not an integer: "+valueOf(n))}if(m!=null)m=new BigNumber(m);nIsBig=n.e>14;if(!x.c||!x.c[0]||x.c[0]==1&&!x.e&&x.c.length==1||!n.c||!n.c[0]){y=new BigNumber(Math.pow(+valueOf(x),nIsBig?n.s*(2-isOdd(n)):+valueOf(n)));return m?y.mod(m):y}nIsNeg=n.s<0;if(m){if(m.c?!m.c[0]:!m.s)return new BigNumber(NaN);isModExp=!nIsNeg&&x.isInteger()&&m.isInteger();if(isModExp)x=x.mod(m)}else if(n.e>9&&(x.e>0||x.e<-1||(x.e==0?x.c[0]>1||nIsBig&&x.c[1]>=24e7:x.c[0]<8e13||nIsBig&&x.c[0]<=9999975e7))){k=x.s<0&&isOdd(n)?-0:0;if(x.e>-1)k=1/k;return new BigNumber(nIsNeg?1/k:k)}else if(POW_PRECISION){k=mathceil(POW_PRECISION/LOG_BASE+2)}if(nIsBig){half=new BigNumber(.5);if(nIsNeg)n.s=1;nIsOdd=isOdd(n)}else{i=Math.abs(+valueOf(n));nIsOdd=i%2}y=new BigNumber(ONE);for(;;){if(nIsOdd){y=y.times(x);if(!y.c)break;if(k){if(y.c.length>k)y.c.length=k}else if(isModExp){y=y.mod(m)}}if(i){i=mathfloor(i/2);if(i===0)break;nIsOdd=i%2}else{n=n.times(half);round(n,n.e+1,1);if(n.e>14){nIsOdd=isOdd(n)}else{i=+valueOf(n);if(i===0)break;nIsOdd=i%2}}x=x.times(x);if(k){if(x.c&&x.c.length>k)x.c.length=k}else if(isModExp){x=x.mod(m)}}if(isModExp)return y;if(nIsNeg)y=ONE.div(y);return m?y.mod(m):k?round(y,POW_PRECISION,ROUNDING_MODE,more):y};P.integerValue=function(rm){var n=new BigNumber(this);if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);return round(n,n.e+1,rm)};P.isEqualTo=P.eq=function(y,b){return compare(this,new BigNumber(y,b))===0};P.isFinite=function(){return!!this.c};P.isGreaterThan=P.gt=function(y,b){return compare(this,new BigNumber(y,b))>0};P.isGreaterThanOrEqualTo=P.gte=function(y,b){return(b=compare(this,new BigNumber(y,b)))===1||b===0};P.isInteger=function(){return!!this.c&&bitFloor(this.e/LOG_BASE)>this.c.length-2};P.isLessThan=P.lt=function(y,b){return compare(this,new BigNumber(y,b))<0};P.isLessThanOrEqualTo=P.lte=function(y,b){return(b=compare(this,new BigNumber(y,b)))===-1||b===0};P.isNaN=function(){return!this.s};P.isNegative=function(){return this.s<0};P.isPositive=function(){return this.s>0};P.isZero=function(){return!!this.c&&this.c[0]==0};P.minus=function(y,b){var i,j,t,xLTy,x=this,a=x.s;y=new BigNumber(y,b);b=y.s;if(!a||!b)return new BigNumber(NaN);if(a!=b){y.s=-b;return x.plus(y)}var xe=x.e/LOG_BASE,ye=y.e/LOG_BASE,xc=x.c,yc=y.c;if(!xe||!ye){if(!xc||!yc)return xc?(y.s=-b,y):new BigNumber(yc?x:NaN);if(!xc[0]||!yc[0]){return yc[0]?(y.s=-b,y):new BigNumber(xc[0]?x:ROUNDING_MODE==3?-0:0)}}xe=bitFloor(xe);ye=bitFloor(ye);xc=xc.slice();if(a=xe-ye){if(xLTy=a<0){a=-a;t=xc}else{ye=xe;t=yc}t.reverse();for(b=a;b--;t.push(0));t.reverse()}else{j=(xLTy=(a=xc.length)<(b=yc.length))?a:b;for(a=b=0;b<j;b++){if(xc[b]!=yc[b]){xLTy=xc[b]<yc[b];break}}}if(xLTy){t=xc;xc=yc;yc=t;y.s=-y.s}b=(j=yc.length)-(i=xc.length);if(b>0)for(;b--;xc[i++]=0);b=BASE-1;for(;j>a;){if(xc[--j]<yc[j]){for(i=j;i&&!xc[--i];xc[i]=b);--xc[i];xc[j]+=BASE}xc[j]-=yc[j]}for(;xc[0]==0;xc.splice(0,1),--ye);if(!xc[0]){y.s=ROUNDING_MODE==3?-1:1;y.c=[y.e=0];return y}return normalise(y,xc,ye)};P.modulo=P.mod=function(y,b){var q,s,x=this;y=new BigNumber(y,b);if(!x.c||!y.s||y.c&&!y.c[0]){return new BigNumber(NaN)}else if(!y.c||x.c&&!x.c[0]){return new BigNumber(x)}if(MODULO_MODE==9){s=y.s;y.s=1;q=div(x,y,0,3);y.s=s;q.s*=s}else{q=div(x,y,0,MODULO_MODE)}y=x.minus(q.times(y));if(!y.c[0]&&MODULO_MODE==1)y.s=x.s;return y};P.multipliedBy=P.times=function(y,b){var c,e,i,j,k,m,xcL,xlo,xhi,ycL,ylo,yhi,zc,base,sqrtBase,x=this,xc=x.c,yc=(y=new BigNumber(y,b)).c;if(!xc||!yc||!xc[0]||!yc[0]){if(!x.s||!y.s||xc&&!xc[0]&&!yc||yc&&!yc[0]&&!xc){y.c=y.e=y.s=null}else{y.s*=x.s;if(!xc||!yc){y.c=y.e=null}else{y.c=[0];y.e=0}}return y}e=bitFloor(x.e/LOG_BASE)+bitFloor(y.e/LOG_BASE);y.s*=x.s;xcL=xc.length;ycL=yc.length;if(xcL<ycL){zc=xc;xc=yc;yc=zc;i=xcL;xcL=ycL;ycL=i}for(i=xcL+ycL,zc=[];i--;zc.push(0));base=BASE;sqrtBase=SQRT_BASE;for(i=ycL;--i>=0;){c=0;ylo=yc[i]%sqrtBase;yhi=yc[i]/sqrtBase|0;for(k=xcL,j=i+k;j>i;){xlo=xc[--k]%sqrtBase;xhi=xc[k]/sqrtBase|0;m=yhi*xlo+xhi*ylo;xlo=ylo*xlo+m%sqrtBase*sqrtBase+zc[j]+c;c=(xlo/base|0)+(m/sqrtBase|0)+yhi*xhi;zc[j--]=xlo%base}zc[j]=c}if(c){++e}else{zc.splice(0,1)}return normalise(y,zc,e)};P.negated=function(){var x=new BigNumber(this);x.s=-x.s||null;return x};P.plus=function(y,b){var t,x=this,a=x.s;y=new BigNumber(y,b);b=y.s;if(!a||!b)return new BigNumber(NaN);if(a!=b){y.s=-b;return x.minus(y)}var xe=x.e/LOG_BASE,ye=y.e/LOG_BASE,xc=x.c,yc=y.c;if(!xe||!ye){if(!xc||!yc)return new BigNumber(a/0);if(!xc[0]||!yc[0])return yc[0]?y:new BigNumber(xc[0]?x:a*0)}xe=bitFloor(xe);ye=bitFloor(ye);xc=xc.slice();if(a=xe-ye){if(a>0){ye=xe;t=yc}else{a=-a;t=xc}t.reverse();for(;a--;t.push(0));t.reverse()}a=xc.length;b=yc.length;if(a-b<0){t=yc;yc=xc;xc=t;b=a}for(a=0;b;){a=(xc[--b]=xc[b]+yc[b]+a)/BASE|0;xc[b]=BASE===xc[b]?0:xc[b]%BASE}if(a){xc=[a].concat(xc);++ye}return normalise(y,xc,ye)};P.precision=P.sd=function(sd,rm){var c,n,v,x=this;if(sd!=null&&sd!==!!sd){intCheck(sd,1,MAX);if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);return round(new BigNumber(x),sd,rm)}if(!(c=x.c))return null;v=c.length-1;n=v*LOG_BASE+1;if(v=c[v]){for(;v%10==0;v/=10,n--);for(v=c[0];v>=10;v/=10,n++);}if(sd&&x.e+1>n)n=x.e+1;return n};P.shiftedBy=function(k){intCheck(k,-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER);return this.times("1e"+k)};P.squareRoot=P.sqrt=function(){var m,n,r,rep,t,x=this,c=x.c,s=x.s,e=x.e,dp=DECIMAL_PLACES+4,half=new BigNumber("0.5");if(s!==1||!c||!c[0]){return new BigNumber(!s||s<0&&(!c||c[0])?NaN:c?x:1/0)}s=Math.sqrt(+valueOf(x));if(s==0||s==1/0){n=coeffToString(c);if((n.length+e)%2==0)n+="0";s=Math.sqrt(+n);e=bitFloor((e+1)/2)-(e<0||e%2);if(s==1/0){n="5e"+e}else{n=s.toExponential();n=n.slice(0,n.indexOf("e")+1)+e}r=new BigNumber(n)}else{r=new BigNumber(s+"")}if(r.c[0]){e=r.e;s=e+dp;if(s<3)s=0;for(;;){t=r;r=half.times(t.plus(div(x,t,dp,1)));if(coeffToString(t.c).slice(0,s)===(n=coeffToString(r.c)).slice(0,s)){if(r.e<e)--s;n=n.slice(s-3,s+1);if(n=="9999"||!rep&&n=="4999"){if(!rep){round(t,t.e+DECIMAL_PLACES+2,0);if(t.times(t).eq(x)){r=t;break}}dp+=4;s+=4;rep=1}else{if(!+n||!+n.slice(1)&&n.charAt(0)=="5"){round(r,r.e+DECIMAL_PLACES+2,1);m=!r.times(r).eq(x)}break}}}}return round(r,r.e+DECIMAL_PLACES+1,ROUNDING_MODE,m)};P.toExponential=function(dp,rm){if(dp!=null){intCheck(dp,0,MAX);dp++}return format(this,dp,rm,1)};P.toFixed=function(dp,rm){if(dp!=null){intCheck(dp,0,MAX);dp=dp+this.e+1}return format(this,dp,rm)};P.toFormat=function(dp,rm,format){var str,x=this;if(format==null){if(dp!=null&&rm&&typeof rm=="object"){format=rm;rm=null}else if(dp&&typeof dp=="object"){format=dp;dp=rm=null}else{format=FORMAT}}else if(typeof format!="object"){throw Error(bignumberError+"Argument not an object: "+format)}str=x.toFixed(dp,rm);if(x.c){var i,arr=str.split("."),g1=+format.groupSize,g2=+format.secondaryGroupSize,groupSeparator=format.groupSeparator||"",intPart=arr[0],fractionPart=arr[1],isNeg=x.s<0,intDigits=isNeg?intPart.slice(1):intPart,len=intDigits.length;if(g2){i=g1;g1=g2;g2=i;len-=i}if(g1>0&&len>0){i=len%g1||g1;intPart=intDigits.substr(0,i);for(;i<len;i+=g1)intPart+=groupSeparator+intDigits.substr(i,g1);if(g2>0)intPart+=groupSeparator+intDigits.slice(i);if(isNeg)intPart="-"+intPart}str=fractionPart?intPart+(format.decimalSeparator||"")+((g2=+format.fractionGroupSize)?fractionPart.replace(new RegExp("\\d{"+g2+"}\\B","g"),"$&"+(format.fractionGroupSeparator||"")):fractionPart):intPart}return(format.prefix||"")+str+(format.suffix||"")};P.toFraction=function(md){var d,d0,d1,d2,e,exp,n,n0,n1,q,r,s,x=this,xc=x.c;if(md!=null){n=new BigNumber(md);if(!n.isInteger()&&(n.c||n.s!==1)||n.lt(ONE)){throw Error(bignumberError+"Argument "+(n.isInteger()?"out of range: ":"not an integer: ")+valueOf(n))}}if(!xc)return new BigNumber(x);d=new BigNumber(ONE);n1=d0=new BigNumber(ONE);d1=n0=new BigNumber(ONE);s=coeffToString(xc);e=d.e=s.length-x.e-1;d.c[0]=POWS_TEN[(exp=e%LOG_BASE)<0?LOG_BASE+exp:exp];md=!md||n.comparedTo(d)>0?e>0?d:n1:n;exp=MAX_EXP;MAX_EXP=1/0;n=new BigNumber(s);n0.c[0]=0;for(;;){q=div(n,d,0,1);d2=d0.plus(q.times(d1));if(d2.comparedTo(md)==1)break;d0=d1;d1=d2;n1=n0.plus(q.times(d2=n1));n0=d2;d=n.minus(q.times(d2=d));n=d2}d2=div(md.minus(d0),d1,0,1);n0=n0.plus(d2.times(n1));d0=d0.plus(d2.times(d1));n0.s=n1.s=x.s;e=e*2;r=div(n1,d1,e,ROUNDING_MODE).minus(x).abs().comparedTo(div(n0,d0,e,ROUNDING_MODE).minus(x).abs())<1?[n1,d1]:[n0,d0];MAX_EXP=exp;return r};P.toNumber=function(){return+valueOf(this)};P.toPrecision=function(sd,rm){if(sd!=null)intCheck(sd,1,MAX);return format(this,sd,rm,2)};P.toString=function(b){var str,n=this,s=n.s,e=n.e;if(e===null){if(s){str="Infinity";if(s<0)str="-"+str}else{str="NaN"}}else{if(b==null){str=e<=TO_EXP_NEG||e>=TO_EXP_POS?toExponential(coeffToString(n.c),e):toFixedPoint(coeffToString(n.c),e,"0")}else if(b===10&&alphabetHasNormalDecimalDigits){n=round(new BigNumber(n),DECIMAL_PLACES+e+1,ROUNDING_MODE);str=toFixedPoint(coeffToString(n.c),n.e,"0")}else{intCheck(b,2,ALPHABET.length,"Base");str=convertBase(toFixedPoint(coeffToString(n.c),e,"0"),10,b,s,true)}if(s<0&&n.c[0])str="-"+str}return str};P.valueOf=P.toJSON=function(){return valueOf(this)};P._isBigNumber=true;if(configObject!=null)BigNumber.set(configObject);return BigNumber}function bitFloor(n){var i=n|0;return n>0||n===i?i:i-1}function coeffToString(a){var s,z,i=1,j=a.length,r=a[0]+"";for(;i<j;){s=a[i++]+"";z=LOG_BASE-s.length;for(;z--;s="0"+s);r+=s}for(j=r.length;r.charCodeAt(--j)===48;);return r.slice(0,j+1||1)}function compare(x,y){var a,b,xc=x.c,yc=y.c,i=x.s,j=y.s,k=x.e,l=y.e;if(!i||!j)return null;a=xc&&!xc[0];b=yc&&!yc[0];if(a||b)return a?b?0:-j:i;if(i!=j)return i;a=i<0;b=k==l;if(!xc||!yc)return b?0:!xc^a?1:-1;if(!b)return k>l^a?1:-1;j=(k=xc.length)<(l=yc.length)?k:l;for(i=0;i<j;i++)if(xc[i]!=yc[i])return xc[i]>yc[i]^a?1:-1;return k==l?0:k>l^a?1:-1}function intCheck(n,min,max,name){if(n<min||n>max||n!==mathfloor(n)){throw Error(bignumberError+(name||"Argument")+(typeof n=="number"?n<min||n>max?" out of range: ":" not an integer: ":" not a primitive number: ")+String(n))}}function isOdd(n){var k=n.c.length-1;return bitFloor(n.e/LOG_BASE)==k&&n.c[k]%2!=0}function toExponential(str,e){return(str.length>1?str.charAt(0)+"."+str.slice(1):str)+(e<0?"e":"e+")+e}function toFixedPoint(str,e,z){var len,zs;if(e<0){for(zs=z+".";++e;zs+=z);str=zs+str}else{len=str.length;if(++e>len){for(zs=z,e-=len;--e;zs+=z);str+=zs}else if(e<len){str=str.slice(0,e)+"."+str.slice(e)}}return str}BigNumber=clone();BigNumber["default"]=BigNumber.BigNumber=BigNumber;if(typeof define=="function"&&define.amd){define(function(){return BigNumber})}else if(typeof module!="undefined"&&module.exports){module.exports=BigNumber}else{if(!globalObject){globalObject=typeof self!="undefined"&&self?self:window}globalObject.BigNumber=BigNumber}})(this)},{}],221:[function(require,module,exports){(function(module,exports){"use strict";function assert(val,msg){if(!val)throw new Error(msg||"Assertion failed")}function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}function BN(number,base,endian){if(BN.isBN(number)){return number}this.negative=0;this.words=null;this.length=0;this.red=null;if(number!==null){if(base==="le"||base==="be"){endian=base;base=10}this._init(number||0,base||10,endian||"be")}}if(typeof module==="object"){module.exports=BN}else{exports.BN=BN}BN.BN=BN;BN.wordSize=26;var Buffer;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined"){Buffer=window.Buffer}else{Buffer=require("buffer").Buffer}}catch(e){}BN.isBN=function isBN(num){if(num instanceof BN){return true}return num!==null&&typeof num==="object"&&num.constructor.wordSize===BN.wordSize&&Array.isArray(num.words)};BN.max=function max(left,right){if(left.cmp(right)>0)return left;return right};BN.min=function min(left,right){if(left.cmp(right)<0)return left;return right};BN.prototype._init=function init(number,base,endian){if(typeof number==="number"){return this._initNumber(number,base,endian)}if(typeof number==="object"){return this._initArray(number,base,endian)}if(base==="hex"){base=16}assert(base===(base|0)&&base>=2&&base<=36);number=number.toString().replace(/\s+/g,"");var start=0;if(number[0]==="-"){start++;this.negative=1}if(start<number.length){if(base===16){this._parseHex(number,start,endian)}else{this._parseBase(number,base,start);if(endian==="le"){this._initArray(this.toArray(),base,endian)}}}};BN.prototype._initNumber=function _initNumber(number,base,endian){if(number<0){this.negative=1;number=-number}if(number<67108864){this.words=[number&67108863];this.length=1}else if(number<4503599627370496){this.words=[number&67108863,number/67108864&67108863];this.length=2}else{assert(number<9007199254740992);this.words=[number&67108863,number/67108864&67108863,1];this.length=3}if(endian!=="le")return;this._initArray(this.toArray(),base,endian)};BN.prototype._initArray=function _initArray(number,base,endian){assert(typeof number.length==="number");if(number.length<=0){this.words=[0];this.length=1;return this}this.length=Math.ceil(number.length/3);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var j,w;var off=0;if(endian==="be"){for(i=number.length-1,j=0;i>=0;i-=3){w=number[i]|number[i-1]<<8|number[i-2]<<16;this.words[j]|=w<<off&67108863;this.words[j+1]=w>>>26-off&67108863;off+=24;if(off>=26){off-=26;j++}}}else if(endian==="le"){for(i=0,j=0;i<number.length;i+=3){w=number[i]|number[i+1]<<8|number[i+2]<<16;this.words[j]|=w<<off&67108863;this.words[j+1]=w>>>26-off&67108863;off+=24;if(off>=26){off-=26;j++}}}return this._strip()};function parseHex4Bits(string,index){var c=string.charCodeAt(index);if(c>=48&&c<=57){return c-48}else if(c>=65&&c<=70){return c-55}else if(c>=97&&c<=102){return c-87}else{assert(false,"Invalid character in "+string)}}function parseHexByte(string,lowerBound,index){var r=parseHex4Bits(string,index);if(index-1>=lowerBound){r|=parseHex4Bits(string,index-1)<<4}return r}BN.prototype._parseHex=function _parseHex(number,start,endian){this.length=Math.ceil((number.length-start)/6);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var off=0;var j=0;var w;if(endian==="be"){for(i=number.length-1;i>=start;i-=2){w=parseHexByte(number,start,i)<<off;this.words[j]|=w&67108863;if(off>=18){off-=18;j+=1;this.words[j]|=w>>>26}else{off+=8}}}else{var parseLength=number.length-start;for(i=parseLength%2===0?start+1:start;i<number.length;i+=2){w=parseHexByte(number,start,i)<<off;this.words[j]|=w&67108863;if(off>=18){off-=18;j+=1;this.words[j]|=w>>>26}else{off+=8}}}this._strip()};function parseBase(str,start,end,mul){var r=0;var b=0;var len=Math.min(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r*=mul;if(c>=49){b=c-49+10}else if(c>=17){b=c-17+10}else{b=c}assert(c>=0&&b<mul,"Invalid character");r+=b}return r}BN.prototype._parseBase=function _parseBase(number,base,start){this.words=[0];this.length=1;for(var limbLen=0,limbPow=1;limbPow<=67108863;limbPow*=base){limbLen++}limbLen--;limbPow=limbPow/base|0;var total=number.length-start;var mod=total%limbLen;var end=Math.min(total,total-mod)+start;var word=0;for(var i=start;i<end;i+=limbLen){word=parseBase(number,i,i+limbLen,base);this.imuln(limbPow);if(this.words[0]+word<67108864){this.words[0]+=word}else{this._iaddn(word)}}if(mod!==0){var pow=1;word=parseBase(number,i,number.length,base);for(i=0;i<mod;i++){pow*=base}this.imuln(pow);if(this.words[0]+word<67108864){this.words[0]+=word}else{this._iaddn(word)}}this._strip()};BN.prototype.copy=function copy(dest){dest.words=new Array(this.length);for(var i=0;i<this.length;i++){dest.words[i]=this.words[i]}dest.length=this.length;dest.negative=this.negative;dest.red=this.red};function move(dest,src){dest.words=src.words;dest.length=src.length;dest.negative=src.negative;dest.red=src.red}BN.prototype._move=function _move(dest){move(dest,this)};BN.prototype.clone=function clone(){var r=new BN(null);this.copy(r);return r};BN.prototype._expand=function _expand(size){while(this.length<size){this.words[this.length++]=0}return this};BN.prototype._strip=function strip(){while(this.length>1&&this.words[this.length-1]===0){this.length--}return this._normSign()};BN.prototype._normSign=function _normSign(){if(this.length===1&&this.words[0]===0){this.negative=0}return this};if(typeof Symbol!=="undefined"&&typeof Symbol.for==="function"){try{BN.prototype[Symbol.for("nodejs.util.inspect.custom")]=inspect}catch(e){BN.prototype.inspect=inspect}}else{BN.prototype.inspect=inspect}function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var zeros=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"];var groupSizes=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var groupBases=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];BN.prototype.toString=function toString(base,padding){base=base||10;padding=padding|0||1;var out;if(base===16||base==="hex"){out="";var off=0;var carry=0;for(var i=0;i<this.length;i++){var w=this.words[i];var word=((w<<off|carry)&16777215).toString(16);carry=w>>>24-off&16777215;off+=2;if(off>=26){off-=26;i--}if(carry!==0||i!==this.length-1){out=zeros[6-word.length]+word+out}else{out=word+out}}if(carry!==0){out=carry.toString(16)+out}while(out.length%padding!==0){out="0"+out}if(this.negative!==0){out="-"+out}return out}if(base===(base|0)&&base>=2&&base<=36){var groupSize=groupSizes[base];var groupBase=groupBases[base];out="";var c=this.clone();c.negative=0;while(!c.isZero()){var r=c.modrn(groupBase).toString(base);c=c.idivn(groupBase);if(!c.isZero()){out=zeros[groupSize-r.length]+r+out}else{out=r+out}}if(this.isZero()){out="0"+out}while(out.length%padding!==0){out="0"+out}if(this.negative!==0){out="-"+out}return out}assert(false,"Base should be between 2 and 36")};BN.prototype.toNumber=function toNumber(){var ret=this.words[0];if(this.length===2){ret+=this.words[1]*67108864}else if(this.length===3&&this.words[2]===1){ret+=4503599627370496+this.words[1]*67108864}else if(this.length>2){assert(false,"Number can only safely store up to 53 bits")}return this.negative!==0?-ret:ret};BN.prototype.toJSON=function toJSON(){return this.toString(16,2)};if(Buffer){BN.prototype.toBuffer=function toBuffer(endian,length){return this.toArrayLike(Buffer,endian,length)}}BN.prototype.toArray=function toArray(endian,length){return this.toArrayLike(Array,endian,length)};var allocate=function allocate(ArrayType,size){if(ArrayType.allocUnsafe){return ArrayType.allocUnsafe(size)}return new ArrayType(size)};BN.prototype.toArrayLike=function toArrayLike(ArrayType,endian,length){this._strip();var byteLength=this.byteLength();var reqLength=length||Math.max(1,byteLength);assert(byteLength<=reqLength,"byte array longer than desired length");assert(reqLength>0,"Requested array length <= 0");var res=allocate(ArrayType,reqLength);var postfix=endian==="le"?"LE":"BE";this["_toArrayLike"+postfix](res,byteLength);return res};BN.prototype._toArrayLikeLE=function _toArrayLikeLE(res,byteLength){var position=0;var carry=0;for(var i=0,shift=0;i<this.length;i++){var word=this.words[i]<<shift|carry;res[position++]=word&255;if(position<res.length){res[position++]=word>>8&255}if(position<res.length){res[position++]=word>>16&255}if(shift===6){if(position<res.length){res[position++]=word>>24&255}carry=0;shift=0}else{carry=word>>>24;shift+=2}}if(position<res.length){res[position++]=carry;while(position<res.length){res[position++]=0}}};BN.prototype._toArrayLikeBE=function _toArrayLikeBE(res,byteLength){var position=res.length-1;var carry=0;for(var i=0,shift=0;i<this.length;i++){var word=this.words[i]<<shift|carry;res[position--]=word&255;if(position>=0){res[position--]=word>>8&255}if(position>=0){res[position--]=word>>16&255}if(shift===6){if(position>=0){res[position--]=word>>24&255}carry=0;shift=0}else{carry=word>>>24;shift+=2}}if(position>=0){res[position--]=carry;while(position>=0){res[position--]=0}}};if(Math.clz32){BN.prototype._countBits=function _countBits(w){return 32-Math.clz32(w)}}else{BN.prototype._countBits=function _countBits(w){var t=w;var r=0;if(t>=4096){r+=13;t>>>=13}if(t>=64){r+=7;t>>>=7}if(t>=8){r+=4;t>>>=4}if(t>=2){r+=2;t>>>=2}return r+t}}BN.prototype._zeroBits=function _zeroBits(w){if(w===0)return 26;var t=w;var r=0;if((t&8191)===0){r+=13;t>>>=13}if((t&127)===0){r+=7;t>>>=7}if((t&15)===0){r+=4;t>>>=4}if((t&3)===0){r+=2;t>>>=2}if((t&1)===0){r++}return r};BN.prototype.bitLength=function bitLength(){var w=this.words[this.length-1];var hi=this._countBits(w);return(this.length-1)*26+hi};function toBitArray(num){var w=new Array(num.bitLength());for(var bit=0;bit<w.length;bit++){var off=bit/26|0;var wbit=bit%26;w[bit]=num.words[off]>>>wbit&1}return w}BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;var r=0;for(var i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);r+=b;if(b!==26)break}return r};BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)};BN.prototype.toTwos=function toTwos(width){if(this.negative!==0){return this.abs().inotn(width).iaddn(1)}return this.clone()};BN.prototype.fromTwos=function fromTwos(width){if(this.testn(width-1)){return this.notn(width).iaddn(1).ineg()}return this.clone()};BN.prototype.isNeg=function isNeg(){return this.negative!==0};BN.prototype.neg=function neg(){return this.clone().ineg()};BN.prototype.ineg=function ineg(){if(!this.isZero()){this.negative^=1}return this};BN.prototype.iuor=function iuor(num){while(this.length<num.length){this.words[this.length++]=0}for(var i=0;i<num.length;i++){this.words[i]=this.words[i]|num.words[i]}return this._strip()};BN.prototype.ior=function ior(num){assert((this.negative|num.negative)===0);return this.iuor(num)};BN.prototype.or=function or(num){if(this.length>num.length)return this.clone().ior(num);return num.clone().ior(this)};BN.prototype.uor=function uor(num){if(this.length>num.length)return this.clone().iuor(num);return num.clone().iuor(this)};BN.prototype.iuand=function iuand(num){var b;if(this.length>num.length){b=num}else{b=this}for(var i=0;i<b.length;i++){this.words[i]=this.words[i]&num.words[i]}this.length=b.length;return this._strip()};BN.prototype.iand=function iand(num){assert((this.negative|num.negative)===0);return this.iuand(num)};BN.prototype.and=function and(num){if(this.length>num.length)return this.clone().iand(num);return num.clone().iand(this)};BN.prototype.uand=function uand(num){if(this.length>num.length)return this.clone().iuand(num);return num.clone().iuand(this)};BN.prototype.iuxor=function iuxor(num){var a;var b;if(this.length>num.length){a=this;b=num}else{a=num;b=this}for(var i=0;i<b.length;i++){this.words[i]=a.words[i]^b.words[i]}if(this!==a){for(;i<a.length;i++){this.words[i]=a.words[i]}}this.length=a.length;return this._strip()};BN.prototype.ixor=function ixor(num){assert((this.negative|num.negative)===0);return this.iuxor(num)};BN.prototype.xor=function xor(num){if(this.length>num.length)return this.clone().ixor(num);return num.clone().ixor(this)};BN.prototype.uxor=function uxor(num){if(this.length>num.length)return this.clone().iuxor(num);return num.clone().iuxor(this)};BN.prototype.inotn=function inotn(width){assert(typeof width==="number"&&width>=0);var bytesNeeded=Math.ceil(width/26)|0;var bitsLeft=width%26;this._expand(bytesNeeded);if(bitsLeft>0){bytesNeeded--}for(var i=0;i<bytesNeeded;i++){this.words[i]=~this.words[i]&67108863}if(bitsLeft>0){this.words[i]=~this.words[i]&67108863>>26-bitsLeft}return this._strip()};BN.prototype.notn=function notn(width){return this.clone().inotn(width)};BN.prototype.setn=function setn(bit,val){assert(typeof bit==="number"&&bit>=0);var off=bit/26|0;var wbit=bit%26;this._expand(off+1);if(val){this.words[off]=this.words[off]|1<<wbit}else{this.words[off]=this.words[off]&~(1<<wbit)}return this._strip()};BN.prototype.iadd=function iadd(num){var r;if(this.negative!==0&&num.negative===0){this.negative=0;r=this.isub(num);this.negative^=1;return this._normSign()}else if(this.negative===0&&num.negative!==0){num.negative=0;r=this.isub(num);num.negative=1;return r._normSign()}var a,b;if(this.length>num.length){a=this;b=num}else{a=num;b=this}var carry=0;for(var i=0;i<b.length;i++){r=(a.words[i]|0)+(b.words[i]|0)+carry;this.words[i]=r&67108863;carry=r>>>26}for(;carry!==0&&i<a.length;i++){r=(a.words[i]|0)+carry;this.words[i]=r&67108863;carry=r>>>26}this.length=a.length;if(carry!==0){this.words[this.length]=carry;this.length++}else if(a!==this){for(;i<a.length;i++){this.words[i]=a.words[i]}}return this};BN.prototype.add=function add(num){var res;if(num.negative!==0&&this.negative===0){num.negative=0;res=this.sub(num);num.negative^=1;return res}else if(num.negative===0&&this.negative!==0){this.negative=0;res=num.sub(this);this.negative=1;return res}if(this.length>num.length)return this.clone().iadd(num);return num.clone().iadd(this)};BN.prototype.isub=function isub(num){if(num.negative!==0){num.negative=0;var r=this.iadd(num);num.negative=1;return r._normSign()}else if(this.negative!==0){this.negative=0;this.iadd(num);this.negative=1;return this._normSign()}var cmp=this.cmp(num);if(cmp===0){this.negative=0;this.length=1;this.words[0]=0;return this}var a,b;if(cmp>0){a=this;b=num}else{a=num;b=this}var carry=0;for(var i=0;i<b.length;i++){r=(a.words[i]|0)-(b.words[i]|0)+carry;carry=r>>26;this.words[i]=r&67108863}for(;carry!==0&&i<a.length;i++){r=(a.words[i]|0)+carry;carry=r>>26;this.words[i]=r&67108863}if(carry===0&&i<a.length&&a!==this){for(;i<a.length;i++){this.words[i]=a.words[i]}}this.length=Math.max(this.length,i);if(a!==this){this.negative=1}return this._strip()};BN.prototype.sub=function sub(num){return this.clone().isub(num)};function smallMulTo(self,num,out){out.negative=num.negative^self.negative;var len=self.length+num.length|0;out.length=len;len=len-1|0;var a=self.words[0]|0;var b=num.words[0]|0;var r=a*b;var lo=r&67108863;var carry=r/67108864|0;out.words[0]=lo;for(var k=1;k<len;k++){var ncarry=carry>>>26;var rword=carry&67108863;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j|0;a=self.words[i]|0;b=num.words[j]|0;r=a*b+rword;ncarry+=r/67108864|0;rword=r&67108863}out.words[k]=rword|0;carry=ncarry|0}if(carry!==0){out.words[k]=carry|0}else{out.length--}return out._strip()}var comb10MulTo=function comb10MulTo(self,num,out){var a=self.words;var b=num.words;var o=out.words;var c=0;var lo;var mid;var hi;var a0=a[0]|0;var al0=a0&8191;var ah0=a0>>>13;var a1=a[1]|0;var al1=a1&8191;var ah1=a1>>>13;var a2=a[2]|0;var al2=a2&8191;var ah2=a2>>>13;var a3=a[3]|0;var al3=a3&8191;var ah3=a3>>>13;var a4=a[4]|0;var al4=a4&8191;var ah4=a4>>>13;var a5=a[5]|0;var al5=a5&8191;var ah5=a5>>>13;var a6=a[6]|0;var al6=a6&8191;var ah6=a6>>>13;var a7=a[7]|0;var al7=a7&8191;var ah7=a7>>>13;var a8=a[8]|0;var al8=a8&8191;var ah8=a8>>>13;var a9=a[9]|0;var al9=a9&8191;var ah9=a9>>>13;var b0=b[0]|0;var bl0=b0&8191;var bh0=b0>>>13;var b1=b[1]|0;var bl1=b1&8191;var bh1=b1>>>13;var b2=b[2]|0;var bl2=b2&8191;var bh2=b2>>>13;var b3=b[3]|0;var bl3=b3&8191;var bh3=b3>>>13;var b4=b[4]|0;var bl4=b4&8191;var bh4=b4>>>13;var b5=b[5]|0;var bl5=b5&8191;var bh5=b5>>>13;var b6=b[6]|0;var bl6=b6&8191;var bh6=b6>>>13;var b7=b[7]|0;var bl7=b7&8191;var bh7=b7>>>13;var b8=b[8]|0;var bl8=b8&8191;var bh8=b8>>>13;var b9=b[9]|0;var bl9=b9&8191;var bh9=b9>>>13;out.negative=self.negative^num.negative;out.length=19;lo=Math.imul(al0,bl0);mid=Math.imul(al0,bh0);mid=mid+Math.imul(ah0,bl0)|0;hi=Math.imul(ah0,bh0);var w0=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w0>>>26)|0;w0&=67108863;lo=Math.imul(al1,bl0);mid=Math.imul(al1,bh0);mid=mid+Math.imul(ah1,bl0)|0;hi=Math.imul(ah1,bh0);lo=lo+Math.imul(al0,bl1)|0;mid=mid+Math.imul(al0,bh1)|0;mid=mid+Math.imul(ah0,bl1)|0;hi=hi+Math.imul(ah0,bh1)|0;var w1=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w1>>>26)|0;w1&=67108863;lo=Math.imul(al2,bl0);mid=Math.imul(al2,bh0);mid=mid+Math.imul(ah2,bl0)|0;hi=Math.imul(ah2,bh0);lo=lo+Math.imul(al1,bl1)|0;mid=mid+Math.imul(al1,bh1)|0;mid=mid+Math.imul(ah1,bl1)|0;hi=hi+Math.imul(ah1,bh1)|0;lo=lo+Math.imul(al0,bl2)|0;mid=mid+Math.imul(al0,bh2)|0;mid=mid+Math.imul(ah0,bl2)|0;hi=hi+Math.imul(ah0,bh2)|0;var w2=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w2>>>26)|0;w2&=67108863;lo=Math.imul(al3,bl0);mid=Math.imul(al3,bh0);mid=mid+Math.imul(ah3,bl0)|0;hi=Math.imul(ah3,bh0);lo=lo+Math.imul(al2,bl1)|0;mid=mid+Math.imul(al2,bh1)|0;mid=mid+Math.imul(ah2,bl1)|0;hi=hi+Math.imul(ah2,bh1)|0;lo=lo+Math.imul(al1,bl2)|0;mid=mid+Math.imul(al1,bh2)|0;mid=mid+Math.imul(ah1,bl2)|0;hi=hi+Math.imul(ah1,bh2)|0;lo=lo+Math.imul(al0,bl3)|0;mid=mid+Math.imul(al0,bh3)|0;mid=mid+Math.imul(ah0,bl3)|0;hi=hi+Math.imul(ah0,bh3)|0;var w3=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w3>>>26)|0;w3&=67108863;lo=Math.imul(al4,bl0);mid=Math.imul(al4,bh0);mid=mid+Math.imul(ah4,bl0)|0;hi=Math.imul(ah4,bh0);lo=lo+Math.imul(al3,bl1)|0;mid=mid+Math.imul(al3,bh1)|0;mid=mid+Math.imul(ah3,bl1)|0;hi=hi+Math.imul(ah3,bh1)|0;lo=lo+Math.imul(al2,bl2)|0;mid=mid+Math.imul(al2,bh2)|0;mid=mid+Math.imul(ah2,bl2)|0;hi=hi+Math.imul(ah2,bh2)|0;lo=lo+Math.imul(al1,bl3)|0;mid=mid+Math.imul(al1,bh3)|0;mid=mid+Math.imul(ah1,bl3)|0;hi=hi+Math.imul(ah1,bh3)|0;lo=lo+Math.imul(al0,bl4)|0;mid=mid+Math.imul(al0,bh4)|0;mid=mid+Math.imul(ah0,bl4)|0;hi=hi+Math.imul(ah0,bh4)|0;var w4=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w4>>>26)|0;w4&=67108863;lo=Math.imul(al5,bl0);mid=Math.imul(al5,bh0);mid=mid+Math.imul(ah5,bl0)|0;hi=Math.imul(ah5,bh0);lo=lo+Math.imul(al4,bl1)|0;mid=mid+Math.imul(al4,bh1)|0;mid=mid+Math.imul(ah4,bl1)|0;hi=hi+Math.imul(ah4,bh1)|0;lo=lo+Math.imul(al3,bl2)|0;mid=mid+Math.imul(al3,bh2)|0;mid=mid+Math.imul(ah3,bl2)|0;hi=hi+Math.imul(ah3,bh2)|0;lo=lo+Math.imul(al2,bl3)|0;mid=mid+Math.imul(al2,bh3)|0;mid=mid+Math.imul(ah2,bl3)|0;hi=hi+Math.imul(ah2,bh3)|0;lo=lo+Math.imul(al1,bl4)|0;mid=mid+Math.imul(al1,bh4)|0;mid=mid+Math.imul(ah1,bl4)|0;hi=hi+Math.imul(ah1,bh4)|0;lo=lo+Math.imul(al0,bl5)|0;mid=mid+Math.imul(al0,bh5)|0;mid=mid+Math.imul(ah0,bl5)|0;hi=hi+Math.imul(ah0,bh5)|0;var w5=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w5>>>26)|0;w5&=67108863;lo=Math.imul(al6,bl0);mid=Math.imul(al6,bh0);mid=mid+Math.imul(ah6,bl0)|0;hi=Math.imul(ah6,bh0);lo=lo+Math.imul(al5,bl1)|0;mid=mid+Math.imul(al5,bh1)|0;mid=mid+Math.imul(ah5,bl1)|0;hi=hi+Math.imul(ah5,bh1)|0;lo=lo+Math.imul(al4,bl2)|0;mid=mid+Math.imul(al4,bh2)|0;mid=mid+Math.imul(ah4,bl2)|0;hi=hi+Math.imul(ah4,bh2)|0;lo=lo+Math.imul(al3,bl3)|0;mid=mid+Math.imul(al3,bh3)|0;mid=mid+Math.imul(ah3,bl3)|0;hi=hi+Math.imul(ah3,bh3)|0;lo=lo+Math.imul(al2,bl4)|0;mid=mid+Math.imul(al2,bh4)|0;mid=mid+Math.imul(ah2,bl4)|0;hi=hi+Math.imul(ah2,bh4)|0;lo=lo+Math.imul(al1,bl5)|0;mid=mid+Math.imul(al1,bh5)|0;mid=mid+Math.imul(ah1,bl5)|0;hi=hi+Math.imul(ah1,bh5)|0;lo=lo+Math.imul(al0,bl6)|0;mid=mid+Math.imul(al0,bh6)|0;mid=mid+Math.imul(ah0,bl6)|0;hi=hi+Math.imul(ah0,bh6)|0;var w6=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w6>>>26)|0;w6&=67108863;lo=Math.imul(al7,bl0);mid=Math.imul(al7,bh0);mid=mid+Math.imul(ah7,bl0)|0;hi=Math.imul(ah7,bh0);lo=lo+Math.imul(al6,bl1)|0;mid=mid+Math.imul(al6,bh1)|0;mid=mid+Math.imul(ah6,bl1)|0;hi=hi+Math.imul(ah6,bh1)|0;lo=lo+Math.imul(al5,bl2)|0;mid=mid+Math.imul(al5,bh2)|0;mid=mid+Math.imul(ah5,bl2)|0;hi=hi+Math.imul(ah5,bh2)|0;lo=lo+Math.imul(al4,bl3)|0;mid=mid+Math.imul(al4,bh3)|0;mid=mid+Math.imul(ah4,bl3)|0;hi=hi+Math.imul(ah4,bh3)|0;lo=lo+Math.imul(al3,bl4)|0;mid=mid+Math.imul(al3,bh4)|0;mid=mid+Math.imul(ah3,bl4)|0;hi=hi+Math.imul(ah3,bh4)|0;lo=lo+Math.imul(al2,bl5)|0;mid=mid+Math.imul(al2,bh5)|0;mid=mid+Math.imul(ah2,bl5)|0;hi=hi+Math.imul(ah2,bh5)|0;lo=lo+Math.imul(al1,bl6)|0;mid=mid+Math.imul(al1,bh6)|0;mid=mid+Math.imul(ah1,bl6)|0;hi=hi+Math.imul(ah1,bh6)|0;lo=lo+Math.imul(al0,bl7)|0;mid=mid+Math.imul(al0,bh7)|0;mid=mid+Math.imul(ah0,bl7)|0;hi=hi+Math.imul(ah0,bh7)|0;var w7=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w7>>>26)|0;w7&=67108863;lo=Math.imul(al8,bl0);mid=Math.imul(al8,bh0);mid=mid+Math.imul(ah8,bl0)|0;hi=Math.imul(ah8,bh0);lo=lo+Math.imul(al7,bl1)|0;mid=mid+Math.imul(al7,bh1)|0;mid=mid+Math.imul(ah7,bl1)|0;hi=hi+Math.imul(ah7,bh1)|0;lo=lo+Math.imul(al6,bl2)|0;mid=mid+Math.imul(al6,bh2)|0;mid=mid+Math.imul(ah6,bl2)|0;hi=hi+Math.imul(ah6,bh2)|0;lo=lo+Math.imul(al5,bl3)|0;mid=mid+Math.imul(al5,bh3)|0;mid=mid+Math.imul(ah5,bl3)|0;hi=hi+Math.imul(ah5,bh3)|0;lo=lo+Math.imul(al4,bl4)|0;mid=mid+Math.imul(al4,bh4)|0;mid=mid+Math.imul(ah4,bl4)|0;hi=hi+Math.imul(ah4,bh4)|0;lo=lo+Math.imul(al3,bl5)|0;mid=mid+Math.imul(al3,bh5)|0;mid=mid+Math.imul(ah3,bl5)|0;hi=hi+Math.imul(ah3,bh5)|0;lo=lo+Math.imul(al2,bl6)|0;mid=mid+Math.imul(al2,bh6)|0;mid=mid+Math.imul(ah2,bl6)|0;hi=hi+Math.imul(ah2,bh6)|0;lo=lo+Math.imul(al1,bl7)|0;mid=mid+Math.imul(al1,bh7)|0;mid=mid+Math.imul(ah1,bl7)|0;hi=hi+Math.imul(ah1,bh7)|0;lo=lo+Math.imul(al0,bl8)|0;mid=mid+Math.imul(al0,bh8)|0;mid=mid+Math.imul(ah0,bl8)|0;hi=hi+Math.imul(ah0,bh8)|0;var w8=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w8>>>26)|0;w8&=67108863;lo=Math.imul(al9,bl0);mid=Math.imul(al9,bh0);mid=mid+Math.imul(ah9,bl0)|0;hi=Math.imul(ah9,bh0);lo=lo+Math.imul(al8,bl1)|0;mid=mid+Math.imul(al8,bh1)|0;mid=mid+Math.imul(ah8,bl1)|0;hi=hi+Math.imul(ah8,bh1)|0;lo=lo+Math.imul(al7,bl2)|0;mid=mid+Math.imul(al7,bh2)|0;mid=mid+Math.imul(ah7,bl2)|0;hi=hi+Math.imul(ah7,bh2)|0;lo=lo+Math.imul(al6,bl3)|0;mid=mid+Math.imul(al6,bh3)|0;mid=mid+Math.imul(ah6,bl3)|0;hi=hi+Math.imul(ah6,bh3)|0;lo=lo+Math.imul(al5,bl4)|0;mid=mid+Math.imul(al5,bh4)|0;mid=mid+Math.imul(ah5,bl4)|0;hi=hi+Math.imul(ah5,bh4)|0;lo=lo+Math.imul(al4,bl5)|0;mid=mid+Math.imul(al4,bh5)|0;mid=mid+Math.imul(ah4,bl5)|0;hi=hi+Math.imul(ah4,bh5)|0;lo=lo+Math.imul(al3,bl6)|0;mid=mid+Math.imul(al3,bh6)|0;mid=mid+Math.imul(ah3,bl6)|0;hi=hi+Math.imul(ah3,bh6)|0;lo=lo+Math.imul(al2,bl7)|0;mid=mid+Math.imul(al2,bh7)|0;mid=mid+Math.imul(ah2,bl7)|0;hi=hi+Math.imul(ah2,bh7)|0;lo=lo+Math.imul(al1,bl8)|0;mid=mid+Math.imul(al1,bh8)|0;mid=mid+Math.imul(ah1,bl8)|0;hi=hi+Math.imul(ah1,bh8)|0;lo=lo+Math.imul(al0,bl9)|0;mid=mid+Math.imul(al0,bh9)|0;mid=mid+Math.imul(ah0,bl9)|0;hi=hi+Math.imul(ah0,bh9)|0;var w9=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w9>>>26)|0;w9&=67108863;lo=Math.imul(al9,bl1);mid=Math.imul(al9,bh1);mid=mid+Math.imul(ah9,bl1)|0;hi=Math.imul(ah9,bh1);lo=lo+Math.imul(al8,bl2)|0;mid=mid+Math.imul(al8,bh2)|0;mid=mid+Math.imul(ah8,bl2)|0;hi=hi+Math.imul(ah8,bh2)|0;lo=lo+Math.imul(al7,bl3)|0;mid=mid+Math.imul(al7,bh3)|0;mid=mid+Math.imul(ah7,bl3)|0;hi=hi+Math.imul(ah7,bh3)|0;lo=lo+Math.imul(al6,bl4)|0;mid=mid+Math.imul(al6,bh4)|0;mid=mid+Math.imul(ah6,bl4)|0;hi=hi+Math.imul(ah6,bh4)|0;lo=lo+Math.imul(al5,bl5)|0;mid=mid+Math.imul(al5,bh5)|0;mid=mid+Math.imul(ah5,bl5)|0;hi=hi+Math.imul(ah5,bh5)|0;lo=lo+Math.imul(al4,bl6)|0;mid=mid+Math.imul(al4,bh6)|0;mid=mid+Math.imul(ah4,bl6)|0;hi=hi+Math.imul(ah4,bh6)|0;lo=lo+Math.imul(al3,bl7)|0;mid=mid+Math.imul(al3,bh7)|0;mid=mid+Math.imul(ah3,bl7)|0;hi=hi+Math.imul(ah3,bh7)|0;lo=lo+Math.imul(al2,bl8)|0;mid=mid+Math.imul(al2,bh8)|0;mid=mid+Math.imul(ah2,bl8)|0;hi=hi+Math.imul(ah2,bh8)|0;lo=lo+Math.imul(al1,bl9)|0;mid=mid+Math.imul(al1,bh9)|0;mid=mid+Math.imul(ah1,bl9)|0;hi=hi+Math.imul(ah1,bh9)|0;var w10=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w10>>>26)|0;w10&=67108863;lo=Math.imul(al9,bl2);mid=Math.imul(al9,bh2);mid=mid+Math.imul(ah9,bl2)|0;hi=Math.imul(ah9,bh2);lo=lo+Math.imul(al8,bl3)|0;mid=mid+Math.imul(al8,bh3)|0;mid=mid+Math.imul(ah8,bl3)|0;hi=hi+Math.imul(ah8,bh3)|0;lo=lo+Math.imul(al7,bl4)|0;mid=mid+Math.imul(al7,bh4)|0;mid=mid+Math.imul(ah7,bl4)|0;hi=hi+Math.imul(ah7,bh4)|0;lo=lo+Math.imul(al6,bl5)|0;mid=mid+Math.imul(al6,bh5)|0;mid=mid+Math.imul(ah6,bl5)|0;hi=hi+Math.imul(ah6,bh5)|0;lo=lo+Math.imul(al5,bl6)|0;mid=mid+Math.imul(al5,bh6)|0;mid=mid+Math.imul(ah5,bl6)|0;hi=hi+Math.imul(ah5,bh6)|0;lo=lo+Math.imul(al4,bl7)|0;mid=mid+Math.imul(al4,bh7)|0;mid=mid+Math.imul(ah4,bl7)|0;hi=hi+Math.imul(ah4,bh7)|0;lo=lo+Math.imul(al3,bl8)|0;mid=mid+Math.imul(al3,bh8)|0;mid=mid+Math.imul(ah3,bl8)|0;hi=hi+Math.imul(ah3,bh8)|0;lo=lo+Math.imul(al2,bl9)|0;mid=mid+Math.imul(al2,bh9)|0;mid=mid+Math.imul(ah2,bl9)|0;hi=hi+Math.imul(ah2,bh9)|0;var w11=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w11>>>26)|0;w11&=67108863;lo=Math.imul(al9,bl3);mid=Math.imul(al9,bh3);mid=mid+Math.imul(ah9,bl3)|0;hi=Math.imul(ah9,bh3);lo=lo+Math.imul(al8,bl4)|0;mid=mid+Math.imul(al8,bh4)|0;mid=mid+Math.imul(ah8,bl4)|0;hi=hi+Math.imul(ah8,bh4)|0;lo=lo+Math.imul(al7,bl5)|0;mid=mid+Math.imul(al7,bh5)|0;mid=mid+Math.imul(ah7,bl5)|0;hi=hi+Math.imul(ah7,bh5)|0;lo=lo+Math.imul(al6,bl6)|0;mid=mid+Math.imul(al6,bh6)|0;mid=mid+Math.imul(ah6,bl6)|0;hi=hi+Math.imul(ah6,bh6)|0;lo=lo+Math.imul(al5,bl7)|0;mid=mid+Math.imul(al5,bh7)|0;mid=mid+Math.imul(ah5,bl7)|0;hi=hi+Math.imul(ah5,bh7)|0;lo=lo+Math.imul(al4,bl8)|0;mid=mid+Math.imul(al4,bh8)|0;mid=mid+Math.imul(ah4,bl8)|0;hi=hi+Math.imul(ah4,bh8)|0;lo=lo+Math.imul(al3,bl9)|0;mid=mid+Math.imul(al3,bh9)|0;mid=mid+Math.imul(ah3,bl9)|0;hi=hi+Math.imul(ah3,bh9)|0;var w12=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w12>>>26)|0;w12&=67108863;lo=Math.imul(al9,bl4);mid=Math.imul(al9,bh4);mid=mid+Math.imul(ah9,bl4)|0;hi=Math.imul(ah9,bh4);lo=lo+Math.imul(al8,bl5)|0;mid=mid+Math.imul(al8,bh5)|0;mid=mid+Math.imul(ah8,bl5)|0;hi=hi+Math.imul(ah8,bh5)|0;lo=lo+Math.imul(al7,bl6)|0;mid=mid+Math.imul(al7,bh6)|0;mid=mid+Math.imul(ah7,bl6)|0;hi=hi+Math.imul(ah7,bh6)|0;lo=lo+Math.imul(al6,bl7)|0;mid=mid+Math.imul(al6,bh7)|0;mid=mid+Math.imul(ah6,bl7)|0;hi=hi+Math.imul(ah6,bh7)|0;lo=lo+Math.imul(al5,bl8)|0;mid=mid+Math.imul(al5,bh8)|0;mid=mid+Math.imul(ah5,bl8)|0;hi=hi+Math.imul(ah5,bh8)|0;lo=lo+Math.imul(al4,bl9)|0;mid=mid+Math.imul(al4,bh9)|0;mid=mid+Math.imul(ah4,bl9)|0;hi=hi+Math.imul(ah4,bh9)|0;var w13=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w13>>>26)|0;w13&=67108863;lo=Math.imul(al9,bl5);mid=Math.imul(al9,bh5);mid=mid+Math.imul(ah9,bl5)|0;hi=Math.imul(ah9,bh5);lo=lo+Math.imul(al8,bl6)|0;mid=mid+Math.imul(al8,bh6)|0;mid=mid+Math.imul(ah8,bl6)|0;hi=hi+Math.imul(ah8,bh6)|0;lo=lo+Math.imul(al7,bl7)|0;mid=mid+Math.imul(al7,bh7)|0;mid=mid+Math.imul(ah7,bl7)|0;hi=hi+Math.imul(ah7,bh7)|0;lo=lo+Math.imul(al6,bl8)|0;mid=mid+Math.imul(al6,bh8)|0;mid=mid+Math.imul(ah6,bl8)|0;hi=hi+Math.imul(ah6,bh8)|0;lo=lo+Math.imul(al5,bl9)|0;mid=mid+Math.imul(al5,bh9)|0;mid=mid+Math.imul(ah5,bl9)|0;hi=hi+Math.imul(ah5,bh9)|0;var w14=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w14>>>26)|0;w14&=67108863;lo=Math.imul(al9,bl6);mid=Math.imul(al9,bh6);mid=mid+Math.imul(ah9,bl6)|0;hi=Math.imul(ah9,bh6);lo=lo+Math.imul(al8,bl7)|0;mid=mid+Math.imul(al8,bh7)|0;mid=mid+Math.imul(ah8,bl7)|0;hi=hi+Math.imul(ah8,bh7)|0;lo=lo+Math.imul(al7,bl8)|0;mid=mid+Math.imul(al7,bh8)|0;mid=mid+Math.imul(ah7,bl8)|0;hi=hi+Math.imul(ah7,bh8)|0;lo=lo+Math.imul(al6,bl9)|0;mid=mid+Math.imul(al6,bh9)|0;mid=mid+Math.imul(ah6,bl9)|0;hi=hi+Math.imul(ah6,bh9)|0;var w15=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w15>>>26)|0;w15&=67108863;lo=Math.imul(al9,bl7);mid=Math.imul(al9,bh7);mid=mid+Math.imul(ah9,bl7)|0;hi=Math.imul(ah9,bh7);lo=lo+Math.imul(al8,bl8)|0;mid=mid+Math.imul(al8,bh8)|0;mid=mid+Math.imul(ah8,bl8)|0;hi=hi+Math.imul(ah8,bh8)|0;lo=lo+Math.imul(al7,bl9)|0;mid=mid+Math.imul(al7,bh9)|0;mid=mid+Math.imul(ah7,bl9)|0;hi=hi+Math.imul(ah7,bh9)|0;var w16=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w16>>>26)|0;w16&=67108863;lo=Math.imul(al9,bl8);mid=Math.imul(al9,bh8);mid=mid+Math.imul(ah9,bl8)|0;hi=Math.imul(ah9,bh8);lo=lo+Math.imul(al8,bl9)|0;mid=mid+Math.imul(al8,bh9)|0;mid=mid+Math.imul(ah8,bl9)|0;hi=hi+Math.imul(ah8,bh9)|0;var w17=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w17>>>26)|0;w17&=67108863;lo=Math.imul(al9,bl9);mid=Math.imul(al9,bh9);mid=mid+Math.imul(ah9,bl9)|0;hi=Math.imul(ah9,bh9);var w18=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w18>>>26)|0;w18&=67108863;o[0]=w0;o[1]=w1;o[2]=w2;o[3]=w3;o[4]=w4;o[5]=w5;o[6]=w6;o[7]=w7;o[8]=w8;o[9]=w9;o[10]=w10;o[11]=w11;o[12]=w12;o[13]=w13;o[14]=w14;o[15]=w15;o[16]=w16;o[17]=w17;o[18]=w18;if(c!==0){o[19]=c;out.length++}return out};if(!Math.imul){comb10MulTo=smallMulTo}function bigMulTo(self,num,out){out.negative=num.negative^self.negative;out.length=self.length+num.length;var carry=0;var hncarry=0;for(var k=0;k<out.length-1;k++){var ncarry=hncarry;hncarry=0;var rword=carry&67108863;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j;var a=self.words[i]|0;var b=num.words[j]|0;var r=a*b;var lo=r&67108863;ncarry=ncarry+(r/67108864|0)|0;lo=lo+rword|0;rword=lo&67108863;ncarry=ncarry+(lo>>>26)|0;hncarry+=ncarry>>>26;ncarry&=67108863}out.words[k]=rword;carry=ncarry;ncarry=hncarry}if(carry!==0){out.words[k]=carry}else{out.length--}return out._strip()}function jumboMulTo(self,num,out){return bigMulTo(self,num,out)}BN.prototype.mulTo=function mulTo(num,out){var res;var len=this.length+num.length;if(this.length===10&&num.length===10){res=comb10MulTo(this,num,out)}else if(len<63){res=smallMulTo(this,num,out)}else if(len<1024){res=bigMulTo(this,num,out)}else{res=jumboMulTo(this,num,out)}return res};function FFTM(x,y){this.x=x;this.y=y}FFTM.prototype.makeRBT=function makeRBT(N){var t=new Array(N);var l=BN.prototype._countBits(N)-1;for(var i=0;i<N;i++){t[i]=this.revBin(i,l,N)}return t};FFTM.prototype.revBin=function revBin(x,l,N){if(x===0||x===N-1)return x;var rb=0;for(var i=0;i<l;i++){rb|=(x&1)<<l-i-1;x>>=1}return rb};FFTM.prototype.permute=function permute(rbt,rws,iws,rtws,itws,N){for(var i=0;i<N;i++){rtws[i]=rws[rbt[i]];itws[i]=iws[rbt[i]]}};FFTM.prototype.transform=function transform(rws,iws,rtws,itws,N,rbt){this.permute(rbt,rws,iws,rtws,itws,N);for(var s=1;s<N;s<<=1){var l=s<<1;var rtwdf=Math.cos(2*Math.PI/l);var itwdf=Math.sin(2*Math.PI/l);for(var p=0;p<N;p+=l){var rtwdf_=rtwdf;var itwdf_=itwdf;for(var j=0;j<s;j++){var re=rtws[p+j];var ie=itws[p+j];var ro=rtws[p+j+s];var io=itws[p+j+s];var rx=rtwdf_*ro-itwdf_*io;io=rtwdf_*io+itwdf_*ro;ro=rx;rtws[p+j]=re+ro;itws[p+j]=ie+io;rtws[p+j+s]=re-ro;itws[p+j+s]=ie-io;if(j!==l){rx=rtwdf*rtwdf_-itwdf*itwdf_;itwdf_=rtwdf*itwdf_+itwdf*rtwdf_;rtwdf_=rx}}}}};FFTM.prototype.guessLen13b=function guessLen13b(n,m){var N=Math.max(m,n)|1;var odd=N&1;var i=0;for(N=N/2|0;N;N=N>>>1){i++}return 1<<i+1+odd};FFTM.prototype.conjugate=function conjugate(rws,iws,N){if(N<=1)return;for(var i=0;i<N/2;i++){var t=rws[i];rws[i]=rws[N-i-1];rws[N-i-1]=t;t=iws[i];iws[i]=-iws[N-i-1];iws[N-i-1]=-t}};FFTM.prototype.normalize13b=function normalize13b(ws,N){var carry=0;for(var i=0;i<N/2;i++){var w=Math.round(ws[2*i+1]/N)*8192+Math.round(ws[2*i]/N)+carry;ws[i]=w&67108863;if(w<67108864){carry=0}else{carry=w/67108864|0}}return ws};FFTM.prototype.convert13b=function convert13b(ws,len,rws,N){var carry=0;for(var i=0;i<len;i++){carry=carry+(ws[i]|0);rws[2*i]=carry&8191;carry=carry>>>13;rws[2*i+1]=carry&8191;carry=carry>>>13}for(i=2*len;i<N;++i){rws[i]=0}assert(carry===0);assert((carry&~8191)===0)};FFTM.prototype.stub=function stub(N){var ph=new Array(N);for(var i=0;i<N;i++){ph[i]=0}return ph};FFTM.prototype.mulp=function mulp(x,y,out){var N=2*this.guessLen13b(x.length,y.length);var rbt=this.makeRBT(N);var _=this.stub(N);var rws=new Array(N);var rwst=new Array(N);var iwst=new Array(N);var nrws=new Array(N);var nrwst=new Array(N);var niwst=new Array(N);var rmws=out.words;rmws.length=N;this.convert13b(x.words,x.length,rws,N);this.convert13b(y.words,y.length,nrws,N);this.transform(rws,_,rwst,iwst,N,rbt);this.transform(nrws,_,nrwst,niwst,N,rbt);for(var i=0;i<N;i++){var rx=rwst[i]*nrwst[i]-iwst[i]*niwst[i];iwst[i]=rwst[i]*niwst[i]+iwst[i]*nrwst[i];rwst[i]=rx}this.conjugate(rwst,iwst,N);this.transform(rwst,iwst,rmws,_,N,rbt);this.conjugate(rmws,_,N);this.normalize13b(rmws,N);out.negative=x.negative^y.negative;out.length=x.length+y.length;return out._strip()};BN.prototype.mul=function mul(num){var out=new BN(null);out.words=new Array(this.length+num.length);return this.mulTo(num,out)};BN.prototype.mulf=function mulf(num){var out=new BN(null);out.words=new Array(this.length+num.length);return jumboMulTo(this,num,out)};BN.prototype.imul=function imul(num){return this.clone().mulTo(num,this)};BN.prototype.imuln=function imuln(num){var isNegNum=num<0;if(isNegNum)num=-num;assert(typeof num==="number");assert(num<67108864);var carry=0;for(var i=0;i<this.length;i++){var w=(this.words[i]|0)*num;var lo=(w&67108863)+(carry&67108863);carry>>=26;carry+=w/67108864|0;carry+=lo>>>26;this.words[i]=lo&67108863}if(carry!==0){this.words[i]=carry;this.length++}return isNegNum?this.ineg():this};BN.prototype.muln=function muln(num){return this.clone().imuln(num)};BN.prototype.sqr=function sqr(){return this.mul(this)};BN.prototype.isqr=function isqr(){return this.imul(this.clone())};BN.prototype.pow=function pow(num){var w=toBitArray(num);if(w.length===0)return new BN(1);var res=this;for(var i=0;i<w.length;i++,res=res.sqr()){if(w[i]!==0)break}if(++i<w.length){for(var q=res.sqr();i<w.length;i++,q=q.sqr()){if(w[i]===0)continue;res=res.mul(q)}}return res};BN.prototype.iushln=function iushln(bits){assert(typeof bits==="number"&&bits>=0);var r=bits%26;var s=(bits-r)/26;var carryMask=67108863>>>26-r<<26-r;var i;if(r!==0){var carry=0;for(i=0;i<this.length;i++){var newCarry=this.words[i]&carryMask;var c=(this.words[i]|0)-newCarry<<r;this.words[i]=c|carry;carry=newCarry>>>26-r}if(carry){this.words[i]=carry;this.length++}}if(s!==0){for(i=this.length-1;i>=0;i--){this.words[i+s]=this.words[i]}for(i=0;i<s;i++){this.words[i]=0}this.length+=s}return this._strip()};BN.prototype.ishln=function ishln(bits){assert(this.negative===0);return this.iushln(bits)};BN.prototype.iushrn=function iushrn(bits,hint,extended){assert(typeof bits==="number"&&bits>=0);var h;if(hint){h=(hint-hint%26)/26}else{h=0}var r=bits%26;var s=Math.min((bits-r)/26,this.length);var mask=67108863^67108863>>>r<<r;var maskedWords=extended;h-=s;h=Math.max(0,h);if(maskedWords){for(var i=0;i<s;i++){maskedWords.words[i]=this.words[i]}maskedWords.length=s}if(s===0){}else if(this.length>s){this.length-=s;for(i=0;i<this.length;i++){this.words[i]=this.words[i+s]}}else{this.words[0]=0;this.length=1}var carry=0;for(i=this.length-1;i>=0&&(carry!==0||i>=h);i--){var word=this.words[i]|0;this.words[i]=carry<<26-r|word>>>r;carry=word&mask}if(maskedWords&&carry!==0){maskedWords.words[maskedWords.length++]=carry}if(this.length===0){this.words[0]=0;this.length=1}return this._strip()};BN.prototype.ishrn=function ishrn(bits,hint,extended){assert(this.negative===0);return this.iushrn(bits,hint,extended)};BN.prototype.shln=function shln(bits){return this.clone().ishln(bits)};BN.prototype.ushln=function ushln(bits){return this.clone().iushln(bits)};BN.prototype.shrn=function shrn(bits){return this.clone().ishrn(bits)};BN.prototype.ushrn=function ushrn(bits){return this.clone().iushrn(bits)};BN.prototype.testn=function testn(bit){assert(typeof bit==="number"&&bit>=0);var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s)return false;var w=this.words[s];return!!(w&q)};BN.prototype.imaskn=function imaskn(bits){assert(typeof bits==="number"&&bits>=0);var r=bits%26;var s=(bits-r)/26;assert(this.negative===0,"imaskn works only with positive numbers");if(this.length<=s){return this}if(r!==0){s++}this.length=Math.min(s,this.length);if(r!==0){var mask=67108863^67108863>>>r<<r;this.words[this.length-1]&=mask}return this._strip()};BN.prototype.maskn=function maskn(bits){return this.clone().imaskn(bits)};BN.prototype.iaddn=function iaddn(num){assert(typeof num==="number");assert(num<67108864);if(num<0)return this.isubn(-num);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<=num){this.words[0]=num-(this.words[0]|0);this.negative=0;return this}this.negative=0;this.isubn(num);this.negative=1;return this}return this._iaddn(num)};BN.prototype._iaddn=function _iaddn(num){this.words[0]+=num;for(var i=0;i<this.length&&this.words[i]>=67108864;i++){this.words[i]-=67108864;if(i===this.length-1){this.words[i+1]=1}else{this.words[i+1]++}}this.length=Math.max(this.length,i+1);return this};BN.prototype.isubn=function isubn(num){assert(typeof num==="number");assert(num<67108864);if(num<0)return this.iaddn(-num);if(this.negative!==0){this.negative=0;this.iaddn(num);this.negative=1;return this}this.words[0]-=num;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1}else{for(var i=0;i<this.length&&this.words[i]<0;i++){this.words[i]+=67108864;this.words[i+1]-=1}}return this._strip()};BN.prototype.addn=function addn(num){return this.clone().iaddn(num)};BN.prototype.subn=function subn(num){return this.clone().isubn(num)};BN.prototype.iabs=function iabs(){this.negative=0;return this};BN.prototype.abs=function abs(){return this.clone().iabs()};BN.prototype._ishlnsubmul=function _ishlnsubmul(num,mul,shift){var len=num.length+shift;var i;this._expand(len);var w;var carry=0;for(i=0;i<num.length;i++){w=(this.words[i+shift]|0)+carry;var right=(num.words[i]|0)*mul;w-=right&67108863;carry=(w>>26)-(right/67108864|0);this.words[i+shift]=w&67108863}for(;i<this.length-shift;i++){w=(this.words[i+shift]|0)+carry;carry=w>>26;this.words[i+shift]=w&67108863}if(carry===0)return this._strip();assert(carry===-1);carry=0;for(i=0;i<this.length;i++){w=-(this.words[i]|0)+carry;carry=w>>26;this.words[i]=w&67108863}this.negative=1;return this._strip()};BN.prototype._wordDiv=function _wordDiv(num,mode){var shift=this.length-num.length;var a=this.clone();var b=num;var bhi=b.words[b.length-1]|0;var bhiBits=this._countBits(bhi);shift=26-bhiBits;if(shift!==0){b=b.ushln(shift);a.iushln(shift);bhi=b.words[b.length-1]|0}var m=a.length-b.length;var q;if(mode!=="mod"){q=new BN(null);q.length=m+1;q.words=new Array(q.length);for(var i=0;i<q.length;i++){q.words[i]=0}}var diff=a.clone()._ishlnsubmul(b,1,m);if(diff.negative===0){a=diff;if(q){q.words[m]=1}}for(var j=m-1;j>=0;j--){var qj=(a.words[b.length+j]|0)*67108864+(a.words[b.length+j-1]|0);qj=Math.min(qj/bhi|0,67108863);a._ishlnsubmul(b,qj,j);while(a.negative!==0){qj--;a.negative=0;a._ishlnsubmul(b,1,j);if(!a.isZero()){a.negative^=1}}if(q){q.words[j]=qj}}if(q){q._strip()}a._strip();if(mode!=="div"&&shift!==0){a.iushrn(shift)}return{div:q||null,mod:a}};BN.prototype.divmod=function divmod(num,mode,positive){assert(!num.isZero());if(this.isZero()){return{div:new BN(0),mod:new BN(0)}}var div,mod,res;if(this.negative!==0&&num.negative===0){res=this.neg().divmod(num,mode);if(mode!=="mod"){div=res.div.neg()}if(mode!=="div"){mod=res.mod.neg();if(positive&&mod.negative!==0){mod.iadd(num)}}return{div:div,mod:mod}}if(this.negative===0&&num.negative!==0){res=this.divmod(num.neg(),mode);if(mode!=="mod"){div=res.div.neg()}return{div:div,mod:res.mod}}if((this.negative&num.negative)!==0){res=this.neg().divmod(num.neg(),mode);if(mode!=="div"){mod=res.mod.neg();if(positive&&mod.negative!==0){mod.isub(num)}}return{div:res.div,mod:mod}}if(num.length>this.length||this.cmp(num)<0){return{div:new BN(0),mod:this}}if(num.length===1){if(mode==="div"){return{div:this.divn(num.words[0]),mod:null}}if(mode==="mod"){return{div:null,mod:new BN(this.modrn(num.words[0]))}}return{div:this.divn(num.words[0]),mod:new BN(this.modrn(num.words[0]))}}return this._wordDiv(num,mode)};BN.prototype.div=function div(num){return this.divmod(num,"div",false).div};BN.prototype.mod=function mod(num){return this.divmod(num,"mod",false).mod};BN.prototype.umod=function umod(num){return this.divmod(num,"mod",true).mod};BN.prototype.divRound=function divRound(num){var dm=this.divmod(num);if(dm.mod.isZero())return dm.div;var mod=dm.div.negative!==0?dm.mod.isub(num):dm.mod;var half=num.ushrn(1);var r2=num.andln(1);var cmp=mod.cmp(half);if(cmp<0||r2===1&&cmp===0)return dm.div;return dm.div.negative!==0?dm.div.isubn(1):dm.div.iaddn(1)};BN.prototype.modrn=function modrn(num){var isNegNum=num<0;if(isNegNum)num=-num;assert(num<=67108863);var p=(1<<26)%num;var acc=0;for(var i=this.length-1;i>=0;i--){acc=(p*acc+(this.words[i]|0))%num}return isNegNum?-acc:acc};BN.prototype.modn=function modn(num){return this.modrn(num)};BN.prototype.idivn=function idivn(num){var isNegNum=num<0;if(isNegNum)num=-num;assert(num<=67108863);var carry=0;for(var i=this.length-1;i>=0;i--){var w=(this.words[i]|0)+carry*67108864;this.words[i]=w/num|0;carry=w%num}this._strip();return isNegNum?this.ineg():this};BN.prototype.divn=function divn(num){return this.clone().idivn(num)};BN.prototype.egcd=function egcd(p){assert(p.negative===0);assert(!p.isZero());var x=this;var y=p.clone();if(x.negative!==0){x=x.umod(p)}else{x=x.clone()}var A=new BN(1);var B=new BN(0);var C=new BN(0);var D=new BN(1);var g=0;while(x.isEven()&&y.isEven()){x.iushrn(1);y.iushrn(1);++g}var yp=y.clone();var xp=x.clone();while(!x.isZero()){for(var i=0,im=1;(x.words[0]&im)===0&&i<26;++i,im<<=1);if(i>0){x.iushrn(i);while(i-- >0){if(A.isOdd()||B.isOdd()){A.iadd(yp);B.isub(xp)}A.iushrn(1);B.iushrn(1)}}for(var j=0,jm=1;(y.words[0]&jm)===0&&j<26;++j,jm<<=1);if(j>0){y.iushrn(j);while(j-- >0){if(C.isOdd()||D.isOdd()){C.iadd(yp);D.isub(xp)}C.iushrn(1);D.iushrn(1)}}if(x.cmp(y)>=0){x.isub(y);A.isub(C);B.isub(D)}else{y.isub(x);C.isub(A);D.isub(B)}}return{a:C,b:D,gcd:y.iushln(g)}};BN.prototype._invmp=function _invmp(p){assert(p.negative===0);assert(!p.isZero());var a=this;var b=p.clone();if(a.negative!==0){a=a.umod(p)}else{a=a.clone()}var x1=new BN(1);var x2=new BN(0);var delta=b.clone();while(a.cmpn(1)>0&&b.cmpn(1)>0){for(var i=0,im=1;(a.words[0]&im)===0&&i<26;++i,im<<=1);if(i>0){a.iushrn(i);while(i-- >0){if(x1.isOdd()){x1.iadd(delta)}x1.iushrn(1)}}for(var j=0,jm=1;(b.words[0]&jm)===0&&j<26;++j,jm<<=1);if(j>0){b.iushrn(j);while(j-- >0){if(x2.isOdd()){x2.iadd(delta)}x2.iushrn(1)}}if(a.cmp(b)>=0){a.isub(b);x1.isub(x2)}else{b.isub(a);x2.isub(x1)}}var res;if(a.cmpn(1)===0){res=x1}else{res=x2}if(res.cmpn(0)<0){res.iadd(p)}return res};BN.prototype.gcd=function gcd(num){if(this.isZero())return num.abs();if(num.isZero())return this.abs();var a=this.clone();var b=num.clone();a.negative=0;b.negative=0;for(var shift=0;a.isEven()&&b.isEven();shift++){a.iushrn(1);b.iushrn(1)}do{while(a.isEven()){a.iushrn(1)}while(b.isEven()){b.iushrn(1)}var r=a.cmp(b);if(r<0){var t=a;a=b;b=t}else if(r===0||b.cmpn(1)===0){break}a.isub(b)}while(true);return b.iushln(shift)};BN.prototype.invm=function invm(num){return this.egcd(num).a.umod(num)};BN.prototype.isEven=function isEven(){return(this.words[0]&1)===0};BN.prototype.isOdd=function isOdd(){return(this.words[0]&1)===1};BN.prototype.andln=function andln(num){return this.words[0]&num};BN.prototype.bincn=function bincn(bit){assert(typeof bit==="number");var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s){this._expand(s+1);this.words[s]|=q;return this}var carry=q;for(var i=s;carry!==0&&i<this.length;i++){var w=this.words[i]|0;w+=carry;carry=w>>>26;w&=67108863;this.words[i]=w}if(carry!==0){this.words[i]=carry;this.length++}return this};BN.prototype.isZero=function isZero(){return this.length===1&&this.words[0]===0};BN.prototype.cmpn=function cmpn(num){var negative=num<0;if(this.negative!==0&&!negative)return-1;if(this.negative===0&&negative)return 1;this._strip();var res;if(this.length>1){res=1}else{if(negative){num=-num}assert(num<=67108863,"Number is too big");var w=this.words[0]|0;res=w===num?0:w<num?-1:1}if(this.negative!==0)return-res|0;return res};BN.prototype.cmp=function cmp(num){if(this.negative!==0&&num.negative===0)return-1;if(this.negative===0&&num.negative!==0)return 1;var res=this.ucmp(num);if(this.negative!==0)return-res|0;return res};BN.prototype.ucmp=function ucmp(num){if(this.length>num.length)return 1;if(this.length<num.length)return-1;var res=0;for(var i=this.length-1;i>=0;i--){var a=this.words[i]|0;var b=num.words[i]|0;if(a===b)continue;if(a<b){res=-1}else if(a>b){res=1}break}return res};BN.prototype.gtn=function gtn(num){return this.cmpn(num)===1};BN.prototype.gt=function gt(num){return this.cmp(num)===1};BN.prototype.gten=function gten(num){return this.cmpn(num)>=0};BN.prototype.gte=function gte(num){return this.cmp(num)>=0};BN.prototype.ltn=function ltn(num){return this.cmpn(num)===-1};BN.prototype.lt=function lt(num){return this.cmp(num)===-1};BN.prototype.lten=function lten(num){return this.cmpn(num)<=0};BN.prototype.lte=function lte(num){return this.cmp(num)<=0};BN.prototype.eqn=function eqn(num){return this.cmpn(num)===0};BN.prototype.eq=function eq(num){return this.cmp(num)===0};BN.red=function red(num){return new Red(num)};BN.prototype.toRed=function toRed(ctx){assert(!this.red,"Already a number in reduction context");assert(this.negative===0,"red works only with positives");return ctx.convertTo(this)._forceRed(ctx)};BN.prototype.fromRed=function fromRed(){assert(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};BN.prototype._forceRed=function _forceRed(ctx){this.red=ctx;return this};BN.prototype.forceRed=function forceRed(ctx){assert(!this.red,"Already a number in reduction context");return this._forceRed(ctx)};BN.prototype.redAdd=function redAdd(num){assert(this.red,"redAdd works only with red numbers");return this.red.add(this,num)};BN.prototype.redIAdd=function redIAdd(num){assert(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,num)};BN.prototype.redSub=function redSub(num){assert(this.red,"redSub works only with red numbers");return this.red.sub(this,num)};BN.prototype.redISub=function redISub(num){assert(this.red,"redISub works only with red numbers");return this.red.isub(this,num)};BN.prototype.redShl=function redShl(num){assert(this.red,"redShl works only with red numbers");return this.red.shl(this,num)};BN.prototype.redMul=function redMul(num){assert(this.red,"redMul works only with red numbers");this.red._verify2(this,num);return this.red.mul(this,num)};BN.prototype.redIMul=function redIMul(num){assert(this.red,"redMul works only with red numbers");this.red._verify2(this,num);return this.red.imul(this,num)};BN.prototype.redSqr=function redSqr(){assert(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};BN.prototype.redISqr=function redISqr(){assert(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};BN.prototype.redSqrt=function redSqrt(){assert(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};BN.prototype.redInvm=function redInvm(){assert(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};BN.prototype.redNeg=function redNeg(){assert(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};BN.prototype.redPow=function redPow(num){assert(this.red&&!num.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,num)};var primes={k256:null,p224:null,p192:null,p25519:null};function MPrime(name,p){this.name=name;this.p=new BN(p,16);this.n=this.p.bitLength();this.k=new BN(1).iushln(this.n).isub(this.p);this.tmp=this._tmp()}MPrime.prototype._tmp=function _tmp(){var tmp=new BN(null);tmp.words=new Array(Math.ceil(this.n/13));return tmp};MPrime.prototype.ireduce=function ireduce(num){var r=num;var rlen;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);rlen=r.bitLength()}while(rlen>this.n);var cmp=rlen<this.n?-1:r.ucmp(this.p);if(cmp===0){r.words[0]=0;r.length=1}else if(cmp>0){r.isub(this.p)}else{if(r.strip!==undefined){r.strip()}else{r._strip()}}return r};MPrime.prototype.split=function split(input,out){input.iushrn(this.n,0,out)};MPrime.prototype.imulK=function imulK(num){return num.imul(this.k)};function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}inherits(K256,MPrime);K256.prototype.split=function split(input,output){var mask=4194303;var outLen=Math.min(input.length,9);for(var i=0;i<outLen;i++){output.words[i]=input.words[i]}output.length=outLen;if(input.length<=9){input.words[0]=0;input.length=1;return}var prev=input.words[9];output.words[output.length++]=prev&mask;for(i=10;i<input.length;i++){var next=input.words[i]|0;input.words[i-10]=(next&mask)<<4|prev>>>22;prev=next}prev>>>=22;input.words[i-10]=prev;if(prev===0&&input.length>10){input.length-=10}else{input.length-=9}};K256.prototype.imulK=function imulK(num){num.words[num.length]=0;num.words[num.length+1]=0;num.length+=2;var lo=0;for(var i=0;i<num.length;i++){var w=num.words[i]|0;lo+=w*977;num.words[i]=lo&67108863;lo=w*64+(lo/67108864|0)}if(num.words[num.length-1]===0){num.length--;if(num.words[num.length-1]===0){num.length--}}return num};function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}inherits(P224,MPrime);function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}inherits(P192,MPrime);function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}inherits(P25519,MPrime);P25519.prototype.imulK=function imulK(num){var carry=0;for(var i=0;i<num.length;i++){var hi=(num.words[i]|0)*19+carry;var lo=hi&67108863;hi>>>=26;num.words[i]=lo;carry=hi}if(carry!==0){num.words[num.length++]=carry}return num};BN._prime=function prime(name){if(primes[name])return primes[name];var prime;if(name==="k256"){prime=new K256}else if(name==="p224"){prime=new P224}else if(name==="p192"){prime=new P192}else if(name==="p25519"){prime=new P25519}else{throw new Error("Unknown prime "+name)}primes[name]=prime;return prime};function Red(m){if(typeof m==="string"){var prime=BN._prime(m);this.m=prime.p;this.prime=prime}else{assert(m.gtn(1),"modulus must be greater than 1");this.m=m;this.prime=null}}Red.prototype._verify1=function _verify1(a){assert(a.negative===0,"red works only with positives");assert(a.red,"red works only with red numbers")};Red.prototype._verify2=function _verify2(a,b){assert((a.negative|b.negative)===0,"red works only with positives");assert(a.red&&a.red===b.red,"red works only with red numbers")};Red.prototype.imod=function imod(a){if(this.prime)return this.prime.ireduce(a)._forceRed(this);move(a,a.umod(this.m)._forceRed(this));return a};Red.prototype.neg=function neg(a){if(a.isZero()){return a.clone()}return this.m.sub(a)._forceRed(this)};Red.prototype.add=function add(a,b){this._verify2(a,b);var res=a.add(b);if(res.cmp(this.m)>=0){res.isub(this.m)}return res._forceRed(this)};Red.prototype.iadd=function iadd(a,b){this._verify2(a,b);var res=a.iadd(b);if(res.cmp(this.m)>=0){res.isub(this.m)}return res};Red.prototype.sub=function sub(a,b){this._verify2(a,b);var res=a.sub(b);if(res.cmpn(0)<0){res.iadd(this.m)}return res._forceRed(this)};Red.prototype.isub=function isub(a,b){this._verify2(a,b);var res=a.isub(b);if(res.cmpn(0)<0){res.iadd(this.m)}return res};Red.prototype.shl=function shl(a,num){this._verify1(a);return this.imod(a.ushln(num))};Red.prototype.imul=function imul(a,b){this._verify2(a,b);return this.imod(a.imul(b))};Red.prototype.mul=function mul(a,b){this._verify2(a,b);return this.imod(a.mul(b))};Red.prototype.isqr=function isqr(a){return this.imul(a,a.clone())};Red.prototype.sqr=function sqr(a){return this.mul(a,a)};Red.prototype.sqrt=function sqrt(a){if(a.isZero())return a.clone();var mod3=this.m.andln(3);assert(mod3%2===1);if(mod3===3){var pow=this.m.add(new BN(1)).iushrn(2);return this.pow(a,pow)}var q=this.m.subn(1);var s=0;while(!q.isZero()&&q.andln(1)===0){s++;q.iushrn(1)}assert(!q.isZero());var one=new BN(1).toRed(this);var nOne=one.redNeg();var lpow=this.m.subn(1).iushrn(1);var z=this.m.bitLength();z=new BN(2*z*z).toRed(this);while(this.pow(z,lpow).cmp(nOne)!==0){z.redIAdd(nOne)}var c=this.pow(z,q);var r=this.pow(a,q.addn(1).iushrn(1));var t=this.pow(a,q);var m=s;while(t.cmp(one)!==0){var tmp=t;for(var i=0;tmp.cmp(one)!==0;i++){tmp=tmp.redSqr()}assert(i<m);var b=this.pow(c,new BN(1).iushln(m-i-1));r=r.redMul(b);c=b.redSqr();t=t.redMul(c);m=i}return r};Red.prototype.invm=function invm(a){var inv=a._invmp(this.m);if(inv.negative!==0){inv.negative=0;return this.imod(inv).redNeg()}else{return this.imod(inv)}};Red.prototype.pow=function pow(a,num){if(num.isZero())return new BN(1).toRed(this);if(num.cmpn(1)===0)return a.clone();var windowSize=4;var wnd=new Array(1<<windowSize);wnd[0]=new BN(1).toRed(this);wnd[1]=a;for(var i=2;i<wnd.length;i++){wnd[i]=this.mul(wnd[i-1],a)}var res=wnd[0];var current=0;var currentLen=0;var start=num.bitLength()%26;if(start===0){start=26}for(i=num.length-1;i>=0;i--){var word=num.words[i];for(var j=start-1;j>=0;j--){var bit=word>>j&1;if(res!==wnd[0]){res=this.sqr(res)}if(bit===0&&current===0){currentLen=0;continue}current<<=1;current|=bit;currentLen++;if(currentLen!==windowSize&&(i!==0||j!==0))continue;res=this.mul(res,wnd[current]);currentLen=0;current=0}start=26}return res};Red.prototype.convertTo=function convertTo(num){var r=num.umod(this.m);return r===num?r.clone():r};Red.prototype.convertFrom=function convertFrom(num){var res=num.clone();res.red=null;return res};BN.mont=function mont(num){return new Mont(num)};function Mont(m){Red.call(this,m);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26}this.r=new BN(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}inherits(Mont,Red);Mont.prototype.convertTo=function convertTo(num){return this.imod(num.ushln(this.shift))};Mont.prototype.convertFrom=function convertFrom(num){var r=this.imod(num.mul(this.rinv));r.red=null;return r};Mont.prototype.imul=function imul(a,b){if(a.isZero()||b.isZero()){a.words[0]=0;a.length=1;return a}var t=a.imul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;if(u.cmp(this.m)>=0){res=u.isub(this.m)}else if(u.cmpn(0)<0){res=u.iadd(this.m)}return res._forceRed(this)};Mont.prototype.mul=function mul(a,b){if(a.isZero()||b.isZero())return new BN(0)._forceRed(this);var t=a.mul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;if(u.cmp(this.m)>=0){res=u.isub(this.m)}else if(u.cmpn(0)<0){res=u.iadd(this.m)}return res._forceRed(this)};Mont.prototype.invm=function invm(a){var res=this.imod(a._invmp(this.m).mul(this.r2));return res._forceRed(this)}})(typeof module==="undefined"||module,this)},{buffer:226}],222:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.deserializeUnchecked=exports.deserialize=exports.serialize=exports.BinaryReader=exports.BinaryWriter=exports.BorshError=exports.baseDecode=exports.baseEncode=void 0;const bn_js_1=__importDefault(require("bn.js"));const bs58_1=__importDefault(require("bs58"));const encoding=__importStar(require("text-encoding-utf-8"));const ResolvedTextDecoder=typeof TextDecoder!=="function"?encoding.TextDecoder:TextDecoder;const textDecoder=new ResolvedTextDecoder("utf-8",{fatal:true});function baseEncode(value){if(typeof value==="string"){value=Buffer.from(value,"utf8")}return bs58_1.default.encode(Buffer.from(value))}exports.baseEncode=baseEncode;function baseDecode(value){return Buffer.from(bs58_1.default.decode(value))}exports.baseDecode=baseDecode;const INITIAL_LENGTH=1024;class BorshError extends Error{constructor(message){super(message);this.fieldPath=[];this.originalMessage=message}addToFieldPath(fieldName){this.fieldPath.splice(0,0,fieldName);this.message=this.originalMessage+": "+this.fieldPath.join(".")}}exports.BorshError=BorshError;class BinaryWriter{constructor(){this.buf=Buffer.alloc(INITIAL_LENGTH);this.length=0}maybeResize(){if(this.buf.length<16+this.length){this.buf=Buffer.concat([this.buf,Buffer.alloc(INITIAL_LENGTH)])}}writeU8(value){this.maybeResize();this.buf.writeUInt8(value,this.length);this.length+=1}writeU16(value){this.maybeResize();this.buf.writeUInt16LE(value,this.length);this.length+=2}writeU32(value){this.maybeResize();this.buf.writeUInt32LE(value,this.length);this.length+=4}writeU64(value){this.maybeResize();this.writeBuffer(Buffer.from(new bn_js_1.default(value).toArray("le",8)))}writeU128(value){this.maybeResize();this.writeBuffer(Buffer.from(new bn_js_1.default(value).toArray("le",16)))}writeU256(value){this.maybeResize();this.writeBuffer(Buffer.from(new bn_js_1.default(value).toArray("le",32)))}writeU512(value){this.maybeResize();this.writeBuffer(Buffer.from(new bn_js_1.default(value).toArray("le",64)))}writeBuffer(buffer){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),buffer,Buffer.alloc(INITIAL_LENGTH)]);this.length+=buffer.length}writeString(str){this.maybeResize();const b=Buffer.from(str,"utf8");this.writeU32(b.length);this.writeBuffer(b)}writeFixedArray(array){this.writeBuffer(Buffer.from(array))}writeArray(array,fn){this.maybeResize();this.writeU32(array.length);for(const elem of array){this.maybeResize();fn(elem)}}toArray(){return this.buf.subarray(0,this.length)}}exports.BinaryWriter=BinaryWriter;function handlingRangeError(target,propertyKey,propertyDescriptor){const originalMethod=propertyDescriptor.value;propertyDescriptor.value=function(...args){try{return originalMethod.apply(this,args)}catch(e){if(e instanceof RangeError){const code=e.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(code)>=0){throw new BorshError("Reached the end of buffer when deserializing")}}throw e}}}class BinaryReader{constructor(buf){this.buf=buf;this.offset=0}readU8(){const value=this.buf.readUInt8(this.offset);this.offset+=1;return value}readU16(){const value=this.buf.readUInt16LE(this.offset);this.offset+=2;return value}readU32(){const value=this.buf.readUInt32LE(this.offset);this.offset+=4;return value}readU64(){const buf=this.readBuffer(8);return new bn_js_1.default(buf,"le")}readU128(){const buf=this.readBuffer(16);return new bn_js_1.default(buf,"le")}readU256(){const buf=this.readBuffer(32);return new bn_js_1.default(buf,"le")}readU512(){const buf=this.readBuffer(64);return new bn_js_1.default(buf,"le")}readBuffer(len){if(this.offset+len>this.buf.length){throw new BorshError(`Expected buffer length ${len} isn't within bounds`)}const result=this.buf.slice(this.offset,this.offset+len);this.offset+=len;return result}readString(){const len=this.readU32();const buf=this.readBuffer(len);try{return textDecoder.decode(buf)}catch(e){throw new BorshError(`Error decoding UTF-8 string: ${e}`)}}readFixedArray(len){return new Uint8Array(this.readBuffer(len))}readArray(fn){const len=this.readU32();const result=Array();for(let i=0;i<len;++i){result.push(fn())}return result}}__decorate([handlingRangeError],BinaryReader.prototype,"readU8",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU16",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU32",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU64",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU128",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU256",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU512",null);__decorate([handlingRangeError],BinaryReader.prototype,"readString",null);__decorate([handlingRangeError],BinaryReader.prototype,"readFixedArray",null);__decorate([handlingRangeError],BinaryReader.prototype,"readArray",null);exports.BinaryReader=BinaryReader;function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1)}function serializeField(schema,fieldName,value,fieldType,writer){try{if(typeof fieldType==="string"){writer[`write${capitalizeFirstLetter(fieldType)}`](value)}else if(fieldType instanceof Array){if(typeof fieldType[0]==="number"){if(value.length!==fieldType[0]){throw new BorshError(`Expecting byte array of length ${fieldType[0]}, but got ${value.length} bytes`)}writer.writeFixedArray(value)}else if(fieldType.length===2&&typeof fieldType[1]==="number"){if(value.length!==fieldType[1]){throw new BorshError(`Expecting byte array of length ${fieldType[1]}, but got ${value.length} bytes`)}for(let i=0;i<fieldType[1];i++){serializeField(schema,null,value[i],fieldType[0],writer)}}else{writer.writeArray(value,item=>{serializeField(schema,fieldName,item,fieldType[0],writer)})}}else if(fieldType.kind!==undefined){switch(fieldType.kind){case"option":{if(value===null||value===undefined){writer.writeU8(0)}else{writer.writeU8(1);serializeField(schema,fieldName,value,fieldType.type,writer)}break}case"map":{writer.writeU32(value.size);value.forEach((val,key)=>{serializeField(schema,fieldName,key,fieldType.key,writer);serializeField(schema,fieldName,val,fieldType.value,writer)});break}default:throw new BorshError(`FieldType ${fieldType} unrecognized`)}}else{serializeStruct(schema,value,writer)}}catch(error){if(error instanceof BorshError){error.addToFieldPath(fieldName)}throw error}}function serializeStruct(schema,obj,writer){if(typeof obj.borshSerialize==="function"){obj.borshSerialize(writer);return}const structSchema=schema.get(obj.constructor);if(!structSchema){throw new BorshError(`Class ${obj.constructor.name} is missing in schema`)}if(structSchema.kind==="struct"){structSchema.fields.map(([fieldName,fieldType])=>{serializeField(schema,fieldName,obj[fieldName],fieldType,writer)})}else if(structSchema.kind==="enum"){const name=obj[structSchema.field];for(let idx=0;idx<structSchema.values.length;++idx){const[fieldName,fieldType]=structSchema.values[idx];if(fieldName===name){writer.writeU8(idx);serializeField(schema,fieldName,obj[fieldName],fieldType,writer);break}}}else{throw new BorshError(`Unexpected schema kind: ${structSchema.kind} for ${obj.constructor.name}`)}}function serialize(schema,obj,Writer=BinaryWriter){const writer=new Writer;serializeStruct(schema,obj,writer);return writer.toArray()}exports.serialize=serialize;function deserializeField(schema,fieldName,fieldType,reader){try{if(typeof fieldType==="string"){return reader[`read${capitalizeFirstLetter(fieldType)}`]()}if(fieldType instanceof Array){if(typeof fieldType[0]==="number"){return reader.readFixedArray(fieldType[0])}else if(typeof fieldType[1]==="number"){const arr=[];for(let i=0;i<fieldType[1];i++){arr.push(deserializeField(schema,null,fieldType[0],reader))}return arr}else{return reader.readArray(()=>deserializeField(schema,fieldName,fieldType[0],reader))}}if(fieldType.kind==="option"){const option=reader.readU8();if(option){return deserializeField(schema,fieldName,fieldType.type,reader)}return undefined}if(fieldType.kind==="map"){let map=new Map;const length=reader.readU32();for(let i=0;i<length;i++){const key=deserializeField(schema,fieldName,fieldType.key,reader);const val=deserializeField(schema,fieldName,fieldType.value,reader);map.set(key,val)}return map}return deserializeStruct(schema,fieldType,reader)}catch(error){if(error instanceof BorshError){error.addToFieldPath(fieldName)}throw error}}function deserializeStruct(schema,classType,reader){if(typeof classType.borshDeserialize==="function"){return classType.borshDeserialize(reader)}const structSchema=schema.get(classType);if(!structSchema){throw new BorshError(`Class ${classType.name} is missing in schema`)}if(structSchema.kind==="struct"){const result={};for(const[fieldName,fieldType]of schema.get(classType).fields){result[fieldName]=deserializeField(schema,fieldName,fieldType,reader)}return new classType(result)}if(structSchema.kind==="enum"){const idx=reader.readU8();if(idx>=structSchema.values.length){throw new BorshError(`Enum index: ${idx} is out of range`)}const[fieldName,fieldType]=structSchema.values[idx];const fieldValue=deserializeField(schema,fieldName,fieldType,reader);return new classType({[fieldName]:fieldValue})}throw new BorshError(`Unexpected schema kind: ${structSchema.kind} for ${classType.constructor.name}`)}function deserialize(schema,classType,buffer,Reader=BinaryReader){const reader=new Reader(buffer);const result=deserializeStruct(schema,classType,reader);if(reader.offset<buffer.length){throw new BorshError(`Unexpected ${buffer.length-reader.offset} bytes after deserialized data`)}return result}exports.deserialize=deserialize;function deserializeUnchecked(schema,classType,buffer,Reader=BinaryReader){const reader=new Reader(buffer);return deserializeStruct(schema,classType,reader)}exports.deserializeUnchecked=deserializeUnchecked}).call(this)}).call(this,require("buffer").Buffer)},{"bn.js":221,bs58:224,buffer:269,"text-encoding-utf-8":813}],223:[function(require,module,exports){arguments[4][23][0].apply(exports,arguments)},{dup:23,"safe-buffer":787}],224:[function(require,module,exports){arguments[4][24][0].apply(exports,arguments)},{"base-x":223,dup:24}],225:[function(require,module,exports){var r;module.exports=function rand(len){if(!r)r=new Rand(null);return r.generate(len)};function Rand(rand){this.rand=rand}module.exports.Rand=Rand;Rand.prototype.generate=function generate(len){return this._rand(len)};Rand.prototype._rand=function _rand(n){if(this.rand.getBytes)return this.rand.getBytes(n);var res=new Uint8Array(n);for(var i=0;i<res.length;i++)res[i]=this.rand.getByte();return res};if(typeof self==="object"){if(self.crypto&&self.crypto.getRandomValues){Rand.prototype._rand=function _rand(n){var arr=new Uint8Array(n);self.crypto.getRandomValues(arr);return arr}}else if(self.msCrypto&&self.msCrypto.getRandomValues){Rand.prototype._rand=function _rand(n){var arr=new Uint8Array(n);self.msCrypto.getRandomValues(arr);return arr}}else if(typeof window==="object"){Rand.prototype._rand=function(){throw new Error("Not implemented yet")}}}else{try{var crypto=require("crypto");if(typeof crypto.randomBytes!=="function")throw new Error("Not supported");Rand.prototype._rand=function _rand(n){return crypto.randomBytes(n)}}catch(e){}}},{crypto:226}],226:[function(require,module,exports){},{}],227:[function(require,module,exports){var Buffer=require("safe-buffer").Buffer;function asUInt32Array(buf){if(!Buffer.isBuffer(buf))buf=Buffer.from(buf);var len=buf.length/4|0;var out=new Array(len);for(var i=0;i<len;i++){out[i]=buf.readUInt32BE(i*4)}return out}function scrubVec(v){for(var i=0;i<v.length;v++){v[i]=0}}function cryptBlock(M,keySchedule,SUB_MIX,SBOX,nRounds){var SUB_MIX0=SUB_MIX[0];var SUB_MIX1=SUB_MIX[1];var SUB_MIX2=SUB_MIX[2];var SUB_MIX3=SUB_MIX[3];var s0=M[0]^keySchedule[0];var s1=M[1]^keySchedule[1];var s2=M[2]^keySchedule[2];var s3=M[3]^keySchedule[3];var t0,t1,t2,t3;var ksRow=4;for(var round=1;round<nRounds;round++){t0=SUB_MIX0[s0>>>24]^SUB_MIX1[s1>>>16&255]^SUB_MIX2[s2>>>8&255]^SUB_MIX3[s3&255]^keySchedule[ksRow++];t1=SUB_MIX0[s1>>>24]^SUB_MIX1[s2>>>16&255]^SUB_MIX2[s3>>>8&255]^SUB_MIX3[s0&255]^keySchedule[ksRow++];t2=SUB_MIX0[s2>>>24]^SUB_MIX1[s3>>>16&255]^SUB_MIX2[s0>>>8&255]^SUB_MIX3[s1&255]^keySchedule[ksRow++];t3=SUB_MIX0[s3>>>24]^SUB_MIX1[s0>>>16&255]^SUB_MIX2[s1>>>8&255]^SUB_MIX3[s2&255]^keySchedule[ksRow++];s0=t0;s1=t1;s2=t2;s3=t3}t0=(SBOX[s0>>>24]<<24|SBOX[s1>>>16&255]<<16|SBOX[s2>>>8&255]<<8|SBOX[s3&255])^keySchedule[ksRow++];t1=(SBOX[s1>>>24]<<24|SBOX[s2>>>16&255]<<16|SBOX[s3>>>8&255]<<8|SBOX[s0&255])^keySchedule[ksRow++];t2=(SBOX[s2>>>24]<<24|SBOX[s3>>>16&255]<<16|SBOX[s0>>>8&255]<<8|SBOX[s1&255])^keySchedule[ksRow++];t3=(SBOX[s3>>>24]<<24|SBOX[s0>>>16&255]<<16|SBOX[s1>>>8&255]<<8|SBOX[s2&255])^keySchedule[ksRow++];t0=t0>>>0;t1=t1>>>0;t2=t2>>>0;t3=t3>>>0;return[t0,t1,t2,t3]}var RCON=[0,1,2,4,8,16,32,64,128,27,54];var G=function(){var d=new Array(256);for(var j=0;j<256;j++){if(j<128){d[j]=j<<1}else{d[j]=j<<1^283}}var SBOX=[];var INV_SBOX=[];var SUB_MIX=[[],[],[],[]];var INV_SUB_MIX=[[],[],[],[]];var x=0;var xi=0;for(var i=0;i<256;++i){var sx=xi^xi<<1^xi<<2^xi<<3^xi<<4;sx=sx>>>8^sx&255^99;SBOX[x]=sx;INV_SBOX[sx]=x;var x2=d[x];var x4=d[x2];var x8=d[x4];var t=d[sx]*257^sx*16843008;SUB_MIX[0][x]=t<<24|t>>>8;SUB_MIX[1][x]=t<<16|t>>>16;SUB_MIX[2][x]=t<<8|t>>>24;SUB_MIX[3][x]=t;t=x8*16843009^x4*65537^x2*257^x*16843008;INV_SUB_MIX[0][sx]=t<<24|t>>>8;INV_SUB_MIX[1][sx]=t<<16|t>>>16;INV_SUB_MIX[2][sx]=t<<8|t>>>24;INV_SUB_MIX[3][sx]=t;if(x===0){x=xi=1}else{x=x2^d[d[d[x8^x2]]];xi^=d[d[xi]]}}return{SBOX:SBOX,INV_SBOX:INV_SBOX,SUB_MIX:SUB_MIX,INV_SUB_MIX:INV_SUB_MIX}}();function AES(key){this._key=asUInt32Array(key);this._reset()}AES.blockSize=4*4;AES.keySize=256/8;AES.prototype.blockSize=AES.blockSize;AES.prototype.keySize=AES.keySize;AES.prototype._reset=function(){var keyWords=this._key;var keySize=keyWords.length;var nRounds=keySize+6;var ksRows=(nRounds+1)*4;var keySchedule=[];for(var k=0;k<keySize;k++){keySchedule[k]=keyWords[k]}for(k=keySize;k<ksRows;k++){var t=keySchedule[k-1];if(k%keySize===0){t=t<<8|t>>>24;t=G.SBOX[t>>>24]<<24|G.SBOX[t>>>16&255]<<16|G.SBOX[t>>>8&255]<<8|G.SBOX[t&255];t^=RCON[k/keySize|0]<<24}else if(keySize>6&&k%keySize===4){t=G.SBOX[t>>>24]<<24|G.SBOX[t>>>16&255]<<16|G.SBOX[t>>>8&255]<<8|G.SBOX[t&255]}keySchedule[k]=keySchedule[k-keySize]^t}var invKeySchedule=[];for(var ik=0;ik<ksRows;ik++){var ksR=ksRows-ik;var tt=keySchedule[ksR-(ik%4?0:4)];if(ik<4||ksR<=4){invKeySchedule[ik]=tt}else{invKeySchedule[ik]=G.INV_SUB_MIX[0][G.SBOX[tt>>>24]]^G.INV_SUB_MIX[1][G.SBOX[tt>>>16&255]]^G.INV_SUB_MIX[2][G.SBOX[tt>>>8&255]]^G.INV_SUB_MIX[3][G.SBOX[tt&255]]}}this._nRounds=nRounds;this._keySchedule=keySchedule;this._invKeySchedule=invKeySchedule};AES.prototype.encryptBlockRaw=function(M){M=asUInt32Array(M);return cryptBlock(M,this._keySchedule,G.SUB_MIX,G.SBOX,this._nRounds)};AES.prototype.encryptBlock=function(M){var out=this.encryptBlockRaw(M);var buf=Buffer.allocUnsafe(16);buf.writeUInt32BE(out[0],0);buf.writeUInt32BE(out[1],4);buf.writeUInt32BE(out[2],8);buf.writeUInt32BE(out[3],12);return buf};AES.prototype.decryptBlock=function(M){M=asUInt32Array(M);var m1=M[1];M[1]=M[3];M[3]=m1;var out=cryptBlock(M,this._invKeySchedule,G.INV_SUB_MIX,G.INV_SBOX,this._nRounds);var buf=Buffer.allocUnsafe(16);buf.writeUInt32BE(out[0],0);buf.writeUInt32BE(out[3],4);buf.writeUInt32BE(out[2],8);buf.writeUInt32BE(out[1],12);return buf};AES.prototype.scrub=function(){scrubVec(this._keySchedule);scrubVec(this._invKeySchedule);scrubVec(this._key)};module.exports.AES=AES},{"safe-buffer":787}],228:[function(require,module,exports){var aes=require("./aes");var Buffer=require("safe-buffer").Buffer;var Transform=require("cipher-base");var inherits=require("inherits");var GHASH=require("./ghash");var xor=require("buffer-xor");var incr32=require("./incr32");function xorTest(a,b){var out=0;if(a.length!==b.length)out++;var len=Math.min(a.length,b.length);for(var i=0;i<len;++i){out+=a[i]^b[i]}return out}function calcIv(self,iv,ck){if(iv.length===12){self._finID=Buffer.concat([iv,Buffer.from([0,0,0,1])]);return Buffer.concat([iv,Buffer.from([0,0,0,2])])}var ghash=new GHASH(ck);var len=iv.length;var toPad=len%16;ghash.update(iv);if(toPad){toPad=16-toPad;ghash.update(Buffer.alloc(toPad,0))}ghash.update(Buffer.alloc(8,0));var ivBits=len*8;var tail=Buffer.alloc(8);tail.writeUIntBE(ivBits,0,8);ghash.update(tail);self._finID=ghash.state;var out=Buffer.from(self._finID);incr32(out);return out}function StreamCipher(mode,key,iv,decrypt){Transform.call(this);var h=Buffer.alloc(4,0);this._cipher=new aes.AES(key);var ck=this._cipher.encryptBlock(h);this._ghash=new GHASH(ck);iv=calcIv(this,iv,ck);this._prev=Buffer.from(iv);this._cache=Buffer.allocUnsafe(0);this._secCache=Buffer.allocUnsafe(0);this._decrypt=decrypt;this._alen=0;this._len=0;this._mode=mode;this._authTag=null;this._called=false}inherits(StreamCipher,Transform);StreamCipher.prototype._update=function(chunk){if(!this._called&&this._alen){var rump=16-this._alen%16;if(rump<16){rump=Buffer.alloc(rump,0);this._ghash.update(rump)}}this._called=true;var out=this._mode.encrypt(this,chunk);if(this._decrypt){this._ghash.update(chunk)}else{this._ghash.update(out)}this._len+=chunk.length;return out};StreamCipher.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var tag=xor(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&xorTest(tag,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=tag;this._cipher.scrub()};StreamCipher.prototype.getAuthTag=function getAuthTag(){if(this._decrypt||!Buffer.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag};StreamCipher.prototype.setAuthTag=function setAuthTag(tag){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=tag};StreamCipher.prototype.setAAD=function setAAD(buf){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(buf);this._alen+=buf.length};module.exports=StreamCipher},{"./aes":227,"./ghash":232,"./incr32":233,"buffer-xor":271,"cipher-base":275,inherits:492,"safe-buffer":787}],229:[function(require,module,exports){var ciphers=require("./encrypter");var deciphers=require("./decrypter");var modes=require("./modes/list.json");function getCiphers(){return Object.keys(modes)}exports.createCipher=exports.Cipher=ciphers.createCipher;exports.createCipheriv=exports.Cipheriv=ciphers.createCipheriv;exports.createDecipher=exports.Decipher=deciphers.createDecipher;exports.createDecipheriv=exports.Decipheriv=deciphers.createDecipheriv;exports.listCiphers=exports.getCiphers=getCiphers},{"./decrypter":230,"./encrypter":231,"./modes/list.json":241}],230:[function(require,module,exports){var AuthCipher=require("./authCipher");var Buffer=require("safe-buffer").Buffer;var MODES=require("./modes");var StreamCipher=require("./streamCipher");var Transform=require("cipher-base");var aes=require("./aes");var ebtk=require("evp_bytestokey");var inherits=require("inherits");function Decipher(mode,key,iv){Transform.call(this);this._cache=new Splitter;this._last=void 0;this._cipher=new aes.AES(key);this._prev=Buffer.from(iv);this._mode=mode;this._autopadding=true}inherits(Decipher,Transform);Decipher.prototype._update=function(data){this._cache.add(data);var chunk;var thing;var out=[];while(chunk=this._cache.get(this._autopadding)){thing=this._mode.decrypt(this,chunk);out.push(thing)}return Buffer.concat(out)};Decipher.prototype._final=function(){var chunk=this._cache.flush();if(this._autopadding){return unpad(this._mode.decrypt(this,chunk))}else if(chunk){throw new Error("data not multiple of block length")}};Decipher.prototype.setAutoPadding=function(setTo){this._autopadding=!!setTo;return this};function Splitter(){this.cache=Buffer.allocUnsafe(0)}Splitter.prototype.add=function(data){this.cache=Buffer.concat([this.cache,data])};Splitter.prototype.get=function(autoPadding){var out;if(autoPadding){if(this.cache.length>16){out=this.cache.slice(0,16);this.cache=this.cache.slice(16);return out}}else{if(this.cache.length>=16){out=this.cache.slice(0,16);this.cache=this.cache.slice(16);return out}}return null};Splitter.prototype.flush=function(){if(this.cache.length)return this.cache};function unpad(last){var padded=last[15];if(padded<1||padded>16){throw new Error("unable to decrypt data")}var i=-1;while(++i<padded){if(last[i+(16-padded)]!==padded){throw new Error("unable to decrypt data")}}if(padded===16)return;return last.slice(0,16-padded)}function createDecipheriv(suite,password,iv){var config=MODES[suite.toLowerCase()];if(!config)throw new TypeError("invalid suite type");if(typeof iv==="string")iv=Buffer.from(iv);if(config.mode!=="GCM"&&iv.length!==config.iv)throw new TypeError("invalid iv length "+iv.length);if(typeof password==="string")password=Buffer.from(password);if(password.length!==config.key/8)throw new TypeError("invalid key length "+password.length);if(config.type==="stream"){return new StreamCipher(config.module,password,iv,true)}else if(config.type==="auth"){return new AuthCipher(config.module,password,iv,true)}return new Decipher(config.module,password,iv)}function createDecipher(suite,password){var config=MODES[suite.toLowerCase()];if(!config)throw new TypeError("invalid suite type");var keys=ebtk(password,false,config.key,config.iv);return createDecipheriv(suite,keys.key,keys.iv)}exports.createDecipher=createDecipher;exports.createDecipheriv=createDecipheriv},{"./aes":227,"./authCipher":228,"./modes":240,"./streamCipher":243,"cipher-base":275,evp_bytestokey:315,inherits:492,"safe-buffer":787}],231:[function(require,module,exports){var MODES=require("./modes");var AuthCipher=require("./authCipher");var Buffer=require("safe-buffer").Buffer;var StreamCipher=require("./streamCipher");var Transform=require("cipher-base");var aes=require("./aes");var ebtk=require("evp_bytestokey");var inherits=require("inherits");function Cipher(mode,key,iv){Transform.call(this);this._cache=new Splitter;this._cipher=new aes.AES(key);this._prev=Buffer.from(iv);this._mode=mode;this._autopadding=true}inherits(Cipher,Transform);Cipher.prototype._update=function(data){this._cache.add(data);var chunk;var thing;var out=[];while(chunk=this._cache.get()){thing=this._mode.encrypt(this,chunk);out.push(thing)}return Buffer.concat(out)};var PADDING=Buffer.alloc(16,16);Cipher.prototype._final=function(){var chunk=this._cache.flush();if(this._autopadding){chunk=this._mode.encrypt(this,chunk);this._cipher.scrub();return chunk}if(!chunk.equals(PADDING)){this._cipher.scrub();throw new Error("data not multiple of block length")}};Cipher.prototype.setAutoPadding=function(setTo){this._autopadding=!!setTo;return this};function Splitter(){this.cache=Buffer.allocUnsafe(0)}Splitter.prototype.add=function(data){this.cache=Buffer.concat([this.cache,data])};Splitter.prototype.get=function(){if(this.cache.length>15){var out=this.cache.slice(0,16);this.cache=this.cache.slice(16);return out}return null};Splitter.prototype.flush=function(){var len=16-this.cache.length;var padBuff=Buffer.allocUnsafe(len);var i=-1;while(++i<len){padBuff.writeUInt8(len,i)}return Buffer.concat([this.cache,padBuff])};function createCipheriv(suite,password,iv){var config=MODES[suite.toLowerCase()];if(!config)throw new TypeError("invalid suite type");if(typeof password==="string")password=Buffer.from(password);if(password.length!==config.key/8)throw new TypeError("invalid key length "+password.length);if(typeof iv==="string")iv=Buffer.from(iv);if(config.mode!=="GCM"&&iv.length!==config.iv)throw new TypeError("invalid iv length "+iv.length);if(config.type==="stream"){return new StreamCipher(config.module,password,iv)}else if(config.type==="auth"){return new AuthCipher(config.module,password,iv)}return new Cipher(config.module,password,iv)}function createCipher(suite,password){var config=MODES[suite.toLowerCase()];if(!config)throw new TypeError("invalid suite type");var keys=ebtk(password,false,config.key,config.iv);return createCipheriv(suite,keys.key,keys.iv)}exports.createCipheriv=createCipheriv;exports.createCipher=createCipher},{"./aes":227,"./authCipher":228,"./modes":240,"./streamCipher":243,"cipher-base":275,evp_bytestokey:315,inherits:492,"safe-buffer":787}],232:[function(require,module,exports){var Buffer=require("safe-buffer").Buffer;var ZEROES=Buffer.alloc(16,0);function toArray(buf){return[buf.readUInt32BE(0),buf.readUInt32BE(4),buf.readUInt32BE(8),buf.readUInt32BE(12)]}function fromArray(out){var buf=Buffer.allocUnsafe(16);buf.writeUInt32BE(out[0]>>>0,0);buf.writeUInt32BE(out[1]>>>0,4);buf.writeUInt32BE(out[2]>>>0,8);buf.writeUInt32BE(out[3]>>>0,12);return buf}function GHASH(key){this.h=key;this.state=Buffer.alloc(16,0);this.cache=Buffer.allocUnsafe(0)}GHASH.prototype.ghash=function(block){var i=-1;while(++i<block.length){this.state[i]^=block[i]}this._multiply()};GHASH.prototype._multiply=function(){var Vi=toArray(this.h);var Zi=[0,0,0,0];var j,xi,lsbVi;var i=-1;while(++i<128){xi=(this.state[~~(i/8)]&1<<7-i%8)!==0;if(xi){Zi[0]^=Vi[0];Zi[1]^=Vi[1];Zi[2]^=Vi[2];Zi[3]^=Vi[3]}lsbVi=(Vi[3]&1)!==0;for(j=3;j>0;j--){Vi[j]=Vi[j]>>>1|(Vi[j-1]&1)<<31}Vi[0]=Vi[0]>>>1;if(lsbVi){Vi[0]=Vi[0]^225<<24}}this.state=fromArray(Zi)};GHASH.prototype.update=function(buf){this.cache=Buffer.concat([this.cache,buf]);var chunk;while(this.cache.length>=16){chunk=this.cache.slice(0,16);this.cache=this.cache.slice(16);this.ghash(chunk)}};GHASH.prototype.final=function(abl,bl){if(this.cache.length){this.ghash(Buffer.concat([this.cache,ZEROES],16))}this.ghash(fromArray([0,abl,0,bl]));return this.state};module.exports=GHASH},{"safe-buffer":787}],233:[function(require,module,exports){function incr32(iv){var len=iv.length;var item;while(len--){item=iv.readUInt8(len);if(item===255){iv.writeUInt8(0,len)}else{item++;iv.writeUInt8(item,len);break}}}module.exports=incr32},{}],234:[function(require,module,exports){var xor=require("buffer-xor");exports.encrypt=function(self,block){var data=xor(block,self._prev);self._prev=self._cipher.encryptBlock(data);return self._prev};exports.decrypt=function(self,block){var pad=self._prev;self._prev=block;var out=self._cipher.decryptBlock(block);return xor(out,pad)}},{"buffer-xor":271}],235:[function(require,module,exports){var Buffer=require("safe-buffer").Buffer;var xor=require("buffer-xor");function encryptStart(self,data,decrypt){var len=data.length;var out=xor(data,self._cache);self._cache=self._cache.slice(len);self._prev=Buffer.concat([self._prev,decrypt?data:out]);return out}exports.encrypt=function(self,data,decrypt){var out=Buffer.allocUnsafe(0);var len;while(data.length){if(self._cache.length===0){self._cache=self._cipher.encryptBlock(self._prev);self._prev=Buffer.allocUnsafe(0)}if(self._cache.length<=data.length){len=self._cache.length;out=Buffer.concat([out,encryptStart(self,data.slice(0,len),decrypt)]);data=data.slice(len)}else{out=Buffer.concat([out,encryptStart(self,data,decrypt)]);break}}return out}},{"buffer-xor":271,"safe-buffer":787}],236:[function(require,module,exports){var Buffer=require("safe-buffer").Buffer;function encryptByte(self,byteParam,decrypt){var pad;var i=-1;var len=8;var out=0;var bit,value;while(++i<len){pad=self._cipher.encryptBlock(self._prev);bit=byteParam&1<<7-i?128:0;value=pad[0]^bit;out+=(value&128)>>i%8;self._prev=shiftIn(self._prev,decrypt?bit:value)}return out}function shiftIn(buffer,value){var len=buffer.length;var i=-1;var out=Buffer.allocUnsafe(buffer.length);buffer=Buffer.concat([buffer,Buffer.from([value])]);while(++i<len){out[i]=buffer[i]<<1|buffer[i+1]>>7}return out}exports.encrypt=function(self,chunk,decrypt){var len=chunk.length;var out=Buffer.allocUnsafe(len);var i=-1;while(++i<len){out[i]=encryptByte(self,chunk[i],decrypt)}return out}},{"safe-buffer":787}],237:[function(require,module,exports){var Buffer=require("safe-buffer").Buffer;function encryptByte(self,byteParam,decrypt){var pad=self._cipher.encryptBlock(self._prev);var out=pad[0]^byteParam;self._prev=Buffer.concat([self._prev.slice(1),Buffer.from([decrypt?byteParam:out])]);return out}exports.encrypt=function(self,chunk,decrypt){var len=chunk.length;var out=Buffer.allocUnsafe(len);var i=-1;while(++i<len){out[i]=encryptByte(self,chunk[i],decrypt)}return out}},{"safe-buffer":787}],238:[function(require,module,exports){var xor=require("buffer-xor");var Buffer=require("safe-buffer").Buffer;var incr32=require("../incr32");function getBlock(self){var out=self._cipher.encryptBlockRaw(self._prev);incr32(self._prev);return out}var blockSize=16;exports.encrypt=function(self,chunk){var chunkNum=Math.ceil(chunk.length/blockSize);var start=self._cache.length;self._cache=Buffer.concat([self._cache,Buffer.allocUnsafe(chunkNum*blockSize)]);for(var i=0;i<chunkNum;i++){var out=getBlock(self);var offset=start+i*blockSize;self._cache.writeUInt32BE(out[0],offset+0);self._cache.writeUInt32BE(out[1],offset+4);self._cache.writeUInt32BE(out[2],offset+8);self._cache.writeUInt32BE(out[3],offset+12)}var pad=self._cache.slice(0,chunk.length);self._cache=self._cache.slice(chunk.length);return xor(chunk,pad)}},{"../incr32":233,"buffer-xor":271,"safe-buffer":787}],239:[function(require,module,exports){exports.encrypt=function(self,block){return self._cipher.encryptBlock(block)};exports.decrypt=function(self,block){return self._cipher.decryptBlock(block)}},{}],240:[function(require,module,exports){var modeModules={ECB:require("./ecb"),CBC:require("./cbc"),CFB:require("./cfb"),CFB8:require("./cfb8"),CFB1:require("./cfb1"),OFB:require("./ofb"),CTR:require("./ctr"),GCM:require("./ctr")};var modes=require("./list.json");for(var key in modes){modes[key].module=modeModules[modes[key].mode]}module.exports=modes},{"./cbc":234,"./cfb":235,"./cfb1":236,"./cfb8":237,"./ctr":238,"./ecb":239,"./list.json":241,"./ofb":242}],241:[function(require,module,exports){module.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],242:[function(require,module,exports){(function(Buffer){(function(){var xor=require("buffer-xor");function getBlock(self){self._prev=self._cipher.encryptBlock(self._prev);return self._prev}exports.encrypt=function(self,chunk){while(self._cache.length<chunk.length){self._cache=Buffer.concat([self._cache,getBlock(self)])}var pad=self._cache.slice(0,chunk.length);self._cache=self._cache.slice(chunk.length);return xor(chunk,pad)}}).call(this)}).call(this,require("buffer").Buffer)},{buffer:269,"buffer-xor":271}],243:[function(require,module,exports){var aes=require("./aes");var Buffer=require("safe-buffer").Buffer;var Transform=require("cipher-base");var inherits=require("inherits");function StreamCipher(mode,key,iv,decrypt){Transform.call(this);this._cipher=new aes.AES(key);this._prev=Buffer.from(iv);this._cache=Buffer.allocUnsafe(0);this._secCache=Buffer.allocUnsafe(0);this._decrypt=decrypt;this._mode=mode}inherits(StreamCipher,Transform);StreamCipher.prototype._update=function(chunk){return this._mode.encrypt(this,chunk,this._decrypt)};StreamCipher.prototype._final=function(){this._cipher.scrub()};module.exports=StreamCipher},{"./aes":227,"cipher-base":275,inherits:492,"safe-buffer":787}],244:[function(require,module,exports){var DES=require("browserify-des");var aes=require("browserify-aes/browser");var aesModes=require("browserify-aes/modes");var desModes=require("browserify-des/modes");var ebtk=require("evp_bytestokey");function createCipher(suite,password){suite=suite.toLowerCase();var keyLen,ivLen;if(aesModes[suite]){keyLen=aesModes[suite].key;ivLen=aesModes[suite].iv}else if(desModes[suite]){keyLen=desModes[suite].key*8;ivLen=desModes[suite].iv}else{throw new TypeError("invalid suite type")}var keys=ebtk(password,false,keyLen,ivLen);return createCipheriv(suite,keys.key,keys.iv)}function createDecipher(suite,password){suite=suite.toLowerCase();var keyLen,ivLen;if(aesModes[suite]){keyLen=aesModes[suite].key;ivLen=aesModes[suite].iv}else if(desModes[suite]){keyLen=desModes[suite].key*8;ivLen=desModes[suite].iv}else{throw new TypeError("invalid suite type")}var keys=ebtk(password,false,keyLen,ivLen);return createDecipheriv(suite,keys.key,keys.iv)}function createCipheriv(suite,key,iv){suite=suite.toLowerCase();if(aesModes[suite])return aes.createCipheriv(suite,key,iv);if(desModes[suite])return new DES({key:key,iv:iv,mode:suite});throw new TypeError("invalid suite type")}function createDecipheriv(suite,key,iv){suite=suite.toLowerCase();if(aesModes[suite])return aes.createDecipheriv(suite,key,iv);if(desModes[suite])return new DES({key:key,iv:iv,mode:suite,decrypt:true});throw new TypeError("invalid suite type")}function getCiphers(){return Object.keys(desModes).concat(aes.getCiphers())}exports.createCipher=exports.Cipher=createCipher;exports.createCipheriv=exports.Cipheriv=createCipheriv;exports.createDecipher=exports.Decipher=createDecipher;exports.createDecipheriv=exports.Decipheriv=createDecipheriv;exports.listCiphers=exports.getCiphers=getCiphers},{"browserify-aes/browser":229,"browserify-aes/modes":240,"browserify-des":245,"browserify-des/modes":246,evp_bytestokey:315}],245:[function(require,module,exports){var CipherBase=require("cipher-base");var des=require("des.js");var inherits=require("inherits");var Buffer=require("safe-buffer").Buffer;var modes={"des-ede3-cbc":des.CBC.instantiate(des.EDE),"des-ede3":des.EDE,"des-ede-cbc":des.CBC.instantiate(des.EDE),"des-ede":des.EDE,"des-cbc":des.CBC.instantiate(des.DES),"des-ecb":des.DES};modes.des=modes["des-cbc"];modes.des3=modes["des-ede3-cbc"];module.exports=DES;inherits(DES,CipherBase);function DES(opts){CipherBase.call(this);var modeName=opts.mode.toLowerCase();var mode=modes[modeName];var type;if(opts.decrypt){type="decrypt"}else{type="encrypt"}var key=opts.key;if(!Buffer.isBuffer(key)){key=Buffer.from(key)}if(modeName==="des-ede"||modeName==="des-ede-cbc"){key=Buffer.concat([key,key.slice(0,8)])}var iv=opts.iv;if(!Buffer.isBuffer(iv)){iv=Buffer.from(iv)}this._des=mode.create({key:key,iv:iv,type:type})}DES.prototype._update=function(data){return Buffer.from(this._des.update(data))};DES.prototype._final=function(){return Buffer.from(this._des.final())}},{"cipher-base":275,"des.js":285,inherits:492,"safe-buffer":787}],246:[function(require,module,exports){exports["des-ecb"]={key:8,iv:0};exports["des-cbc"]=exports.des={key:8,iv:8};exports["des-ede3-cbc"]=exports.des3={key:24,iv:8};exports["des-ede3"]={key:24,iv:0};exports["des-ede-cbc"]={key:16,iv:8};exports["des-ede"]={key:16,iv:0}},{}],247:[function(require,module,exports){(function(Buffer){(function(){var BN=require("bn.js");var randomBytes=require("randombytes");function blind(priv){var r=getr(priv);var blinder=r.toRed(BN.mont(priv.modulus)).redPow(new BN(priv.publicExponent)).fromRed();return{blinder:blinder,unblinder:r.invm(priv.modulus)}}function getr(priv){var len=priv.modulus.byteLength();var r;do{r=new BN(randomBytes(len))}while(r.cmp(priv.modulus)>=0||!r.umod(priv.prime1)||!r.umod(priv.prime2));return r}function crt(msg,priv){var blinds=blind(priv);var len=priv.modulus.byteLength();var blinded=new BN(msg).mul(blinds.blinder).umod(priv.modulus);var c1=blinded.toRed(BN.mont(priv.prime1));var c2=blinded.toRed(BN.mont(priv.prime2));var qinv=priv.coefficient;var p=priv.prime1;var q=priv.prime2;var m1=c1.redPow(priv.exponent1).fromRed();var m2=c2.redPow(priv.exponent2).fromRed();var h=m1.isub(m2).imul(qinv).umod(p).imul(q);return m2.iadd(h).imul(blinds.unblinder).umod(priv.modulus).toArrayLike(Buffer,"be",len)}crt.getr=getr;module.exports=crt}).call(this)}).call(this,require("buffer").Buffer)},{"bn.js":221,buffer:269,randombytes:527}],248:[function(require,module,exports){module.exports=require("./browser/algorithms.json")},{"./browser/algorithms.json":249}],249:[function(require,module,exports){module.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],250:[function(require,module,exports){module.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],251:[function(require,module,exports){var Buffer=require("safe-buffer").Buffer;var createHash=require("create-hash");var stream=require("readable-stream");var inherits=require("inherits");var sign=require("./sign");var verify=require("./verify");var algorithms=require("./algorithms.json");Object.keys(algorithms).forEach(function(key){algorithms[key].id=Buffer.from(algorithms[key].id,"hex");algorithms[key.toLowerCase()]=algorithms[key]});function Sign(algorithm){stream.Writable.call(this);var data=algorithms[algorithm];if(!data)throw new Error("Unknown message digest");this._hashType=data.hash;this._hash=createHash(data.hash);this._tag=data.id;this._signType=data.sign}inherits(Sign,stream.Writable);Sign.prototype._write=function _write(data,_,done){this._hash.update(data);done()};Sign.prototype.update=function update(data,enc){if(typeof data==="string")data=Buffer.from(data,enc);this._hash.update(data);return this};Sign.prototype.sign=function signMethod(key,enc){this.end();var hash=this._hash.digest();var sig=sign(hash,key,this._hashType,this._signType,this._tag);return enc?sig.toString(enc):sig};function Verify(algorithm){stream.Writable.call(this);var data=algorithms[algorithm];if(!data)throw new Error("Unknown message digest");this._hash=createHash(data.hash);this._tag=data.id;this._signType=data.sign}inherits(Verify,stream.Writable);Verify.prototype._write=function _write(data,_,done){this._hash.update(data);done()};Verify.prototype.update=function update(data,enc){if(typeof data==="string")data=Buffer.from(data,enc);this._hash.update(data);return this};Verify.prototype.verify=function verifyMethod(key,sig,enc){if(typeof sig==="string")sig=Buffer.from(sig,enc);this.end();var hash=this._hash.digest();return verify(sig,hash,key,this._signType,this._tag)};function createSign(algorithm){return new Sign(algorithm)}function createVerify(algorithm){return new Verify(algorithm)}module.exports={Sign:createSign,Verify:createVerify,createSign:createSign,createVerify:createVerify}},{"./algorithms.json":249,"./sign":252,"./verify":253,"create-hash":278,inherits:492,"readable-stream":268,"safe-buffer":787}],252:[function(require,module,exports){var Buffer=require("safe-buffer").Buffer;var createHmac=require("create-hmac");var crt=require("browserify-rsa");var EC=require("elliptic").ec;var BN=require("bn.js");var parseKeys=require("parse-asn1");var curves=require("./curves.json");function sign(hash,key,hashType,signType,tag){var priv=parseKeys(key);if(priv.curve){if(signType!=="ecdsa"&&signType!=="ecdsa/rsa")throw new Error("wrong private key type");return ecSign(hash,priv)}else if(priv.type==="dsa"){if(signType!=="dsa")throw new Error("wrong private key type");return dsaSign(hash,priv,hashType)}else{if(signType!=="rsa"&&signType!=="ecdsa/rsa")throw new Error("wrong private key type")}hash=Buffer.concat([tag,hash]);var len=priv.modulus.byteLength();var pad=[0,1];while(hash.length+pad.length+1<len)pad.push(255);pad.push(0);var i=-1;while(++i<hash.length)pad.push(hash[i]);var out=crt(pad,priv);return out}function ecSign(hash,priv){var curveId=curves[priv.curve.join(".")];if(!curveId)throw new Error("unknown curve "+priv.curve.join("."));var curve=new EC(curveId);var key=curve.keyFromPrivate(priv.privateKey);var out=key.sign(hash);return Buffer.from(out.toDER())}function dsaSign(hash,priv,algo){var x=priv.params.priv_key;var p=priv.params.p;var q=priv.params.q;var g=priv.params.g;var r=new BN(0);var k;var H=bits2int(hash,q).mod(q);var s=false;var kv=getKey(x,q,hash,algo);while(s===false){k=makeKey(q,kv,algo);r=makeR(g,k,p,q);s=k.invm(q).imul(H.add(x.mul(r))).mod(q);if(s.cmpn(0)===0){s=false;r=new BN(0)}}return toDER(r,s)}function toDER(r,s){r=r.toArray();s=s.toArray();if(r[0]&128)r=[0].concat(r);if(s[0]&128)s=[0].concat(s);var total=r.length+s.length+4;var res=[48,total,2,r.length];res=res.concat(r,[2,s.length],s);return Buffer.from(res)}function getKey(x,q,hash,algo){x=Buffer.from(x.toArray());if(x.length<q.byteLength()){var zeros=Buffer.alloc(q.byteLength()-x.length);x=Buffer.concat([zeros,x])}var hlen=hash.length;var hbits=bits2octets(hash,q);var v=Buffer.alloc(hlen);v.fill(1);var k=Buffer.alloc(hlen);k=createHmac(algo,k).update(v).update(Buffer.from([0])).update(x).update(hbits).digest();v=createHmac(algo,k).update(v).digest();k=createHmac(algo,k).update(v).update(Buffer.from([1])).update(x).update(hbits).digest();v=createHmac(algo,k).update(v).digest();return{k:k,v:v}}function bits2int(obits,q){var bits=new BN(obits);var shift=(obits.length<<3)-q.bitLength();if(shift>0)bits.ishrn(shift);return bits}function bits2octets(bits,q){bits=bits2int(bits,q);bits=bits.mod(q);var out=Buffer.from(bits.toArray());if(out.length<q.byteLength()){var zeros=Buffer.alloc(q.byteLength()-out.length);out=Buffer.concat([zeros,out])}return out}function makeKey(q,kv,algo){var t;var k;do{t=Buffer.alloc(0);while(t.length*8<q.bitLength()){kv.v=createHmac(algo,kv.k).update(kv.v).digest();t=Buffer.concat([t,kv.v])}k=bits2int(t,q);kv.k=createHmac(algo,kv.k).update(kv.v).update(Buffer.from([0])).digest();kv.v=createHmac(algo,kv.k).update(kv.v).digest()}while(k.cmp(q)!==-1);return k}function makeR(g,k,p,q){return g.toRed(BN.mont(p)).redPow(k).fromRed().mod(q)}module.exports=sign;module.exports.getKey=getKey;module.exports.makeKey=makeKey},{"./curves.json":250,"bn.js":221,"browserify-rsa":247,"create-hmac":280,elliptic:296,"parse-asn1":512,"safe-buffer":787}],253:[function(require,module,exports){var Buffer=require("safe-buffer").Buffer;var BN=require("bn.js");var EC=require("elliptic").ec;var parseKeys=require("parse-asn1");var curves=require("./curves.json");function verify(sig,hash,key,signType,tag){var pub=parseKeys(key);if(pub.type==="ec"){if(signType!=="ecdsa"&&signType!=="ecdsa/rsa")throw new Error("wrong public key type");return ecVerify(sig,hash,pub)}else if(pub.type==="dsa"){if(signType!=="dsa")throw new Error("wrong public key type");return dsaVerify(sig,hash,pub)}else{if(signType!=="rsa"&&signType!=="ecdsa/rsa")throw new Error("wrong public key type")}hash=Buffer.concat([tag,hash]);var len=pub.modulus.byteLength();var pad=[1];var padNum=0;while(hash.length+pad.length+2<len){pad.push(255);padNum++}pad.push(0);var i=-1;while(++i<hash.length){pad.push(hash[i])}pad=Buffer.from(pad);var red=BN.mont(pub.modulus);sig=new BN(sig).toRed(red);sig=sig.redPow(new BN(pub.publicExponent));sig=Buffer.from(sig.fromRed().toArray());var out=padNum<8?1:0;len=Math.min(sig.length,pad.length);if(sig.length!==pad.length)out=1;i=-1;while(++i<len)out|=sig[i]^pad[i];return out===0}function ecVerify(sig,hash,pub){var curveId=curves[pub.data.algorithm.curve.join(".")];if(!curveId)throw new Error("unknown curve "+pub.data.algorithm.curve.join("."));var curve=new EC(curveId);var pubkey=pub.data.subjectPrivateKey.data;return curve.verify(hash,sig,pubkey)}function dsaVerify(sig,hash,pub){var p=pub.data.p;var q=pub.data.q;var g=pub.data.g;var y=pub.data.pub_key;var unpacked=parseKeys.signature.decode(sig,"der");var s=unpacked.s;var r=unpacked.r;checkValue(s,q);checkValue(r,q);var montp=BN.mont(p);var w=s.invm(q);var v=g.toRed(montp).redPow(new BN(hash).mul(w).mod(q)).fromRed().mul(y.toRed(montp).redPow(r.mul(w).mod(q)).fromRed()).mod(p).mod(q);return v.cmp(r)===0}function checkValue(b,q){if(b.cmpn(0)<=0)throw new Error("invalid sig");if(b.cmp(q)>=q)throw new Error("invalid sig")}module.exports=verify},{"./curves.json":250,"bn.js":221,elliptic:296,"parse-asn1":512,"safe-buffer":787}],254:[function(require,module,exports){"use strict";function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass}var codes={};function createErrorType(code,message,Base){if(!Base){Base=Error}function getMessage(arg1,arg2,arg3){if(typeof message==="string"){return message}else{return message(arg1,arg2,arg3)}}var NodeError=function(_Base){_inheritsLoose(NodeError,_Base);function NodeError(arg1,arg2,arg3){return _Base.call(this,getMessage(arg1,arg2,arg3))||this}return NodeError}(Base);NodeError.prototype.name=Base.name;NodeError.prototype.code=code;codes[code]=NodeError}function oneOf(expected,thing){if(Array.isArray(expected)){var len=expected.length;expected=expected.map(function(i){return String(i)});if(len>2){return"one of ".concat(thing," ").concat(expected.slice(0,len-1).join(", "),", or ")+expected[len-1]}else if(len===2){return"one of ".concat(thing," ").concat(expected[0]," or ").concat(expected[1])}else{return"of ".concat(thing," ").concat(expected[0])}}else{return"of ".concat(thing," ").concat(String(expected))}}function startsWith(str,search,pos){return str.substr(!pos||pos<0?0:+pos,search.length)===search}function endsWith(str,search,this_len){if(this_len===undefined||this_len>str.length){this_len=str.length}return str.substring(this_len-search.length,this_len)===search}function includes(str,search,start){if(typeof start!=="number"){start=0}if(start+search.length>str.length){return false}else{return str.indexOf(search,start)!==-1}}createErrorType("ERR_INVALID_OPT_VALUE",function(name,value){return'The value "'+value+'" is invalid for option "'+name+'"'},TypeError);createErrorType("ERR_INVALID_ARG_TYPE",function(name,expected,actual){var determiner;if(typeof expected==="string"&&startsWith(expected,"not ")){determiner="must not be";expected=expected.replace(/^not /,"")}else{determiner="must be"}var msg;if(endsWith(name," argument")){msg="The ".concat(name," ").concat(determiner," ").concat(oneOf(expected,"type"))}else{var type=includes(name,".")?"property":"argument";msg='The "'.concat(name,'" ').concat(type," ").concat(determiner," ").concat(oneOf(expected,"type"))}msg+=". Received type ".concat(typeof actual);return msg},TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(name){return"The "+name+" method is not implemented"});createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",function(name){return"Cannot call "+name+" after a stream was destroyed"});createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",function(arg){return"Unknown encoding: "+arg},TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");module.exports.codes=codes},{}],255:[function(require,module,exports){(function(process){(function(){"use strict";var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var Readable=require("./_stream_readable");var Writable=require("./_stream_writable");require("inherits")(Duplex,Readable);{var keys=objectKeys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method]}}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);this.allowHalfOpen=true;if(options){if(options.readable===false)this.readable=false;if(options.writable===false)this.writable=false;if(options.allowHalfOpen===false){this.allowHalfOpen=false;this.once("end",onend)}}}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:false,get:function get(){return this._writableState.highWaterMark}});Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:false,get:function get(){return this._writableState.length}});function onend(){if(this._writableState.ended)return;process.nextTick(onEndNT,this)}function onEndNT(self){self.end()}Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:false,get:function get(){if(this._readableState===undefined||this._writableState===undefined){return false}return this._readableState.destroyed&&this._writableState.destroyed},set:function set(value){if(this._readableState===undefined||this._writableState===undefined){return}this._readableState.destroyed=value;this._writableState.destroyed=value}})}).call(this)}).call(this,require("_process"))},{"./_stream_readable":257,"./_stream_writable":259,_process:519,inherits:492}],256:[function(require,module,exports){"use strict";module.exports=PassThrough;var Transform=require("./_stream_transform");require("inherits")(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},{"./_stream_transform":258,inherits:492}],257:[function(require,module,exports){(function(process,global){(function(){"use strict";module.exports=Readable;var Duplex;Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter;var EElistenerCount=function EElistenerCount(emitter,type){return emitter.listeners(type).length};var Stream=require("./internal/streams/stream");var Buffer=require("buffer").Buffer;var OurUint8Array=(typeof global!=="undefined"?global:typeof window!=="undefined"?window:typeof self!=="undefined"?self:{}).Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}var debugUtil=require("util");var debug;if(debugUtil&&debugUtil.debuglog){debug=debugUtil.debuglog("stream")}else{debug=function debug(){}}var BufferList=require("./internal/streams/buffer_list");var destroyImpl=require("./internal/streams/destroy");var _require=require("./internal/streams/state"),getHighWaterMark=_require.getHighWaterMark;var _require$codes=require("../errors").codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF=_require$codes.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT=_require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;var StringDecoder;var createReadableStreamAsyncIterator;var from;require("inherits")(Readable,Stream);var errorOrDestroy=destroyImpl.errorOrDestroy;var kProxyEvents=["error","close","destroy","pause","resume"];function prependListener(emitter,event,fn){if(typeof emitter.prependListener==="function")return emitter.prependListener(event,fn);if(!emitter._events||!emitter._events[event])emitter.on(event,fn);else if(Array.isArray(emitter._events[event]))emitter._events[event].unshift(fn);else emitter._events[event]=[fn,emitter._events[event]]}function ReadableState(options,stream,isDuplex){Duplex=Duplex||require("./_stream_duplex");options=options||{};if(typeof isDuplex!=="boolean")isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.readableObjectMode;this.highWaterMark=getHighWaterMark(this,options,"readableHighWaterMark",isDuplex);this.buffer=new BufferList;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.paused=true;this.emitClose=options.emitClose!==false;this.autoDestroy=!!options.autoDestroy;this.destroyed=false;this.defaultEncoding=options.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=require("string_decoder/").StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding}}function Readable(options){Duplex=Duplex||require("./_stream_duplex");if(!(this instanceof Readable))return new Readable(options);var isDuplex=this instanceof Duplex;this._readableState=new ReadableState(options,this,isDuplex);this.readable=true;if(options){if(typeof options.read==="function")this._read=options.read;if(typeof options.destroy==="function")this._destroy=options.destroy}Stream.call(this)}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:false,get:function get(){if(this._readableState===undefined){return false}return this._readableState.destroyed},set:function set(value){if(!this._readableState){return}this._readableState.destroyed=value}});Readable.prototype.destroy=destroyImpl.destroy;Readable.prototype._undestroy=destroyImpl.undestroy;Readable.prototype._destroy=function(err,cb){cb(err)};Readable.prototype.push=function(chunk,encoding){var state=this._readableState;var skipChunkCheck;if(!state.objectMode){if(typeof chunk==="string"){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=Buffer.from(chunk,encoding);encoding=""}skipChunkCheck=true}}else{skipChunkCheck=true}return readableAddChunk(this,chunk,encoding,false,skipChunkCheck)};Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,true,false)};function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){debug("readableAddChunk",chunk);var state=stream._readableState;if(chunk===null){state.reading=false;onEofChunk(stream,state)}else{var er;if(!skipChunkCheck)er=chunkInvalid(state,chunk);if(er){errorOrDestroy(stream,er)}else if(state.objectMode||chunk&&chunk.length>0){if(typeof chunk!=="string"&&!state.objectMode&&Object.getPrototypeOf(chunk)!==Buffer.prototype){chunk=_uint8ArrayToBuffer(chunk)}if(addToFront){if(state.endEmitted)errorOrDestroy(stream,new ERR_STREAM_UNSHIFT_AFTER_END_EVENT);else addChunk(stream,state,chunk,true)}else if(state.ended){errorOrDestroy(stream,new ERR_STREAM_PUSH_AFTER_EOF)}else if(state.destroyed){return false}else{state.reading=false;if(state.decoder&&!encoding){chunk=state.decoder.write(chunk);if(state.objectMode||chunk.length!==0)addChunk(stream,state,chunk,false);else maybeReadMore(stream,state)}else{addChunk(stream,state,chunk,false)}}}else if(!addToFront){state.reading=false;maybeReadMore(stream,state)}}return!state.ended&&(state.length<state.highWaterMark||state.length===0)}function addChunk(stream,state,chunk,addToFront){if(state.flowing&&state.length===0&&!state.sync){state.awaitDrain=0;stream.emit("data",chunk)}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream)}maybeReadMore(stream,state)}function chunkInvalid(state,chunk){var er;if(!_isUint8Array(chunk)&&typeof chunk!=="string"&&chunk!==undefined&&!state.objectMode){er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer","Uint8Array"],chunk)}return er}Readable.prototype.isPaused=function(){return this._readableState.flowing===false};Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=require("string_decoder/").StringDecoder;var decoder=new StringDecoder(enc);this._readableState.decoder=decoder;this._readableState.encoding=this._readableState.decoder.encoding;var p=this._readableState.buffer.head;var content="";while(p!==null){content+=decoder.write(p.data);p=p.next}this._readableState.buffer.clear();if(content!=="")this._readableState.buffer.push(content);this._readableState.length=content.length;return this};var MAX_HWM=1073741824;function computeNewHighWaterMark(n){if(n>=MAX_HWM){n=MAX_HWM}else{n--;n|=n>>>1;n|=n>>>2;n|=n>>>4;n|=n>>>8;n|=n>>>16;n++}return n}function howMuchToRead(n,state){if(n<=0||state.length===0&&state.ended)return 0;if(state.objectMode)return 1;if(n!==n){if(state.flowing&&state.length)return state.buffer.head.data.length;else return state.length}if(n>state.highWaterMark)state.highWaterMark=computeNewHighWaterMark(n);if(n<=state.length)return n;if(!state.ended){state.needReadable=true;return 0}return state.length}Readable.prototype.read=function(n){debug("read",n);n=parseInt(n,10);var state=this._readableState;var nOrig=n;if(n!==0)state.emittedReadable=false;if(n===0&&state.needReadable&&((state.highWaterMark!==0?state.length>=state.highWaterMark:state.length>0)||state.ended)){debug("read: emitReadable",state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null}n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null}var doRead=state.needReadable;debug("need readable",doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug("length less than watermark",doRead)}if(state.ended||state.reading){doRead=false;debug("reading or ended",doRead)}else if(doRead){debug("do read");state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false;if(!state.reading)n=howMuchToRead(nOrig,state)}var ret;if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=state.length<=state.highWaterMark;n=0}else{state.length-=n;state.awaitDrain=0}if(state.length===0){if(!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended)endReadable(this)}if(ret!==null)this.emit("data",ret);return ret};function onEofChunk(stream,state){debug("onEofChunk");if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length}}state.ended=true;if(state.sync){emitReadable(stream)}else{state.needReadable=false;if(!state.emittedReadable){state.emittedReadable=true;emitReadable_(stream)}}}function emitReadable(stream){var state=stream._readableState;debug("emitReadable",state.needReadable,state.emittedReadable);state.needReadable=false;if(!state.emittedReadable){debug("emitReadable",state.flowing);state.emittedReadable=true;process.nextTick(emitReadable_,stream)}}function emitReadable_(stream){var state=stream._readableState;debug("emitReadable_",state.destroyed,state.length,state.ended);if(!state.destroyed&&(state.length||state.ended)){stream.emit("readable");state.emittedReadable=false}state.needReadable=!state.flowing&&!state.ended&&state.length<=state.highWaterMark;flow(stream)}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;process.nextTick(maybeReadMore_,stream,state)}}function maybeReadMore_(stream,state){while(!state.reading&&!state.ended&&(state.length<state.highWaterMark||state.flowing&&state.length===0)){var len=state.length;debug("maybeReadMore read 0");stream.read(0);if(len===state.length)break}state.readingMore=false}Readable.prototype._read=function(n){errorOrDestroy(this,new ERR_METHOD_NOT_IMPLEMENTED("_read()"))};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break}state.pipesCount+=1;debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:unpipe;if(state.endEmitted)process.nextTick(endFn);else src.once("end",endFn);dest.on("unpipe",onunpipe);function onunpipe(readable,unpipeInfo){debug("onunpipe");if(readable===src){if(unpipeInfo&&unpipeInfo.hasUnpiped===false){unpipeInfo.hasUnpiped=true;cleanup()}}}function onend(){debug("onend");dest.end()}var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);var cleanedUp=false;function cleanup(){debug("cleanup");dest.removeListener("close",onclose);dest.removeListener("finish",onfinish);dest.removeListener("drain",ondrain);dest.removeListener("error",onerror);dest.removeListener("unpipe",onunpipe);src.removeListener("end",onend);src.removeListener("end",unpipe);src.removeListener("data",ondata);cleanedUp=true;if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain()}src.on("data",ondata);function ondata(chunk){debug("ondata");var ret=dest.write(chunk);debug("dest.write",ret);if(ret===false){if((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp){debug("false write response, pause",state.awaitDrain);state.awaitDrain++}src.pause()}}function onerror(er){debug("onerror",er);unpipe();dest.removeListener("error",onerror);if(EElistenerCount(dest,"error")===0)errorOrDestroy(dest,er)}prependListener(dest,"error",onerror);function onclose(){dest.removeListener("finish",onfinish);unpipe()}dest.once("close",onclose);function onfinish(){debug("onfinish");dest.removeListener("close",onclose);unpipe()}dest.once("finish",onfinish);function unpipe(){debug("unpipe");src.unpipe(dest)}dest.emit("pipe",src);if(!state.flowing){debug("pipe resume");src.resume()}return dest};function pipeOnDrain(src){return function pipeOnDrainFunctionResult(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EElistenerCount(src,"data")){state.flowing=true;flow(src)}}}Readable.prototype.unpipe=function(dest){var state=this._readableState;var unpipeInfo={hasUnpiped:false};if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit("unpipe",this,unpipeInfo);return this}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,{hasUnpiped:false});return this}var index=indexOf(state.pipes,dest);if(index===-1)return this;state.pipes.splice(index,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit("unpipe",this,unpipeInfo);return this};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);var state=this._readableState;if(ev==="data"){state.readableListening=this.listenerCount("readable")>0;if(state.flowing!==false)this.resume()}else if(ev==="readable"){if(!state.endEmitted&&!state.readableListening){state.readableListening=state.needReadable=true;state.flowing=false;state.emittedReadable=false;debug("on readable",state.length,state.reading);if(state.length){emitReadable(this)}else if(!state.reading){process.nextTick(nReadingNextTick,this)}}}return res};Readable.prototype.addListener=Readable.prototype.on;Readable.prototype.removeListener=function(ev,fn){var res=Stream.prototype.removeListener.call(this,ev,fn);if(ev==="readable"){process.nextTick(updateReadableListening,this)}return res};Readable.prototype.removeAllListeners=function(ev){var res=Stream.prototype.removeAllListeners.apply(this,arguments);if(ev==="readable"||ev===undefined){process.nextTick(updateReadableListening,this)}return res};function updateReadableListening(self){var state=self._readableState;state.readableListening=self.listenerCount("readable")>0;if(state.resumeScheduled&&!state.paused){state.flowing=true}else if(self.listenerCount("data")>0){self.resume()}}function nReadingNextTick(self){debug("readable nexttick read 0");self.read(0)}Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug("resume");state.flowing=!state.readableListening;resume(this,state)}state.paused=false;return this};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;process.nextTick(resume_,stream,state)}}function resume_(stream,state){debug("resume",state.reading);if(!state.reading){stream.read(0)}state.resumeScheduled=false;stream.emit("resume");flow(stream);if(state.flowing&&!state.reading)stream.read(0)}Readable.prototype.pause=function(){debug("call pause flowing=%j",this._readableState.flowing);if(this._readableState.flowing!==false){debug("pause");this._readableState.flowing=false;this.emit("pause")}this._readableState.paused=true;return this};function flow(stream){var state=stream._readableState;debug("flow",state.flowing);while(state.flowing&&stream.read()!==null);}Readable.prototype.wrap=function(stream){var _this=this;var state=this._readableState;var paused=false;stream.on("end",function(){debug("wrapped end");if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)_this.push(chunk)}_this.push(null)});stream.on("data",function(chunk){debug("wrapped data");if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=_this.push(chunk);if(!ret){paused=true;stream.pause()}});for(var i in stream){if(this[i]===undefined&&typeof stream[i]==="function"){this[i]=function methodWrap(method){return function methodWrapReturnFunction(){return stream[method].apply(stream,arguments)}}(i)}}for(var n=0;n<kProxyEvents.length;n++){stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]))}this._read=function(n){debug("wrapped _read",n);if(paused){paused=false;stream.resume()}};return this};if(typeof Symbol==="function"){Readable.prototype[Symbol.asyncIterator]=function(){if(createReadableStreamAsyncIterator===undefined){createReadableStreamAsyncIterator=require("./internal/streams/async_iterator")}return createReadableStreamAsyncIterator(this)}}Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:false,get:function get(){return this._readableState.highWaterMark}});Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:false,get:function get(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:false,get:function get(){return this._readableState.flowing},set:function set(state){if(this._readableState){this._readableState.flowing=state}}});Readable._fromList=fromList;Object.defineProperty(Readable.prototype,"readableLength",{enumerable:false,get:function get(){return this._readableState.length}});function fromList(n,state){if(state.length===0)return null;var ret;if(state.objectMode)ret=state.buffer.shift();else if(!n||n>=state.length){if(state.decoder)ret=state.buffer.join("");else if(state.buffer.length===1)ret=state.buffer.first();else ret=state.buffer.concat(state.length);state.buffer.clear()}else{ret=state.buffer.consume(n,state.decoder)}return ret}function endReadable(stream){var state=stream._readableState;debug("endReadable",state.endEmitted);if(!state.endEmitted){state.ended=true;process.nextTick(endReadableNT,state,stream)}}function endReadableNT(state,stream){debug("endReadableNT",state.endEmitted,state.length);if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit("end");if(state.autoDestroy){var wState=stream._writableState;if(!wState||wState.autoDestroy&&wState.finished){stream.destroy()}}}}if(typeof Symbol==="function"){Readable.from=function(iterable,opts){if(from===undefined){from=require("./internal/streams/from")}return from(Readable,iterable,opts)}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i}return-1}}).call(this)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../errors":254,"./_stream_duplex":255,"./internal/streams/async_iterator":260,"./internal/streams/buffer_list":261,"./internal/streams/destroy":262,"./internal/streams/from":264,"./internal/streams/state":266,"./internal/streams/stream":267,_process:519,buffer:269,events:314,inherits:492,"string_decoder/":812,util:226}],258:[function(require,module,exports){"use strict";module.exports=Transform;var _require$codes=require("../errors").codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes.ERR_TRANSFORM_WITH_LENGTH_0;var Duplex=require("./_stream_duplex");require("inherits")(Transform,Duplex);function afterTransform(er,data){var ts=this._transformState;ts.transforming=false;var cb=ts.writecb;if(cb===null){return this.emit("error",new ERR_MULTIPLE_CALLBACK)}ts.writechunk=null;ts.writecb=null;if(data!=null)this.push(data);cb(er);var rs=this._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){this._read(rs.highWaterMark)}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(options){if(typeof options.transform==="function")this._transform=options.transform;if(typeof options.flush==="function")this._flush=options.flush}this.on("prefinish",prefinish)}function prefinish(){var _this=this;if(typeof this._flush==="function"&&!this._readableState.destroyed){this._flush(function(er,data){done(_this,er,data)})}else{done(this,null,null)}}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding)};Transform.prototype._transform=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark)}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)}else{ts.needTransform=true}};Transform.prototype._destroy=function(err,cb){Duplex.prototype._destroy.call(this,err,function(err2){cb(err2)})};function done(stream,er,data){if(er)return stream.emit("error",er);if(data!=null)stream.push(data);if(stream._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(stream._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return stream.push(null)}},{"../errors":254,"./_stream_duplex":255,inherits:492}],259:[function(require,module,exports){(function(process,global){(function(){"use strict";module.exports=Writable;function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;this.next=null}function CorkedRequest(state){var _this=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(_this,state)}}var Duplex;Writable.WritableState=WritableState;var internalUtil={deprecate:require("util-deprecate")};var Stream=require("./internal/streams/stream");var Buffer=require("buffer").Buffer;var OurUint8Array=(typeof global!=="undefined"?global:typeof window!=="undefined"?window:typeof self!=="undefined"?self:{}).Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}var destroyImpl=require("./internal/streams/destroy");var _require=require("./internal/streams/state"),getHighWaterMark=_require.getHighWaterMark;var _require$codes=require("../errors").codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE=_require$codes.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES=_require$codes.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END=_require$codes.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING=_require$codes.ERR_UNKNOWN_ENCODING;var errorOrDestroy=destroyImpl.errorOrDestroy;require("inherits")(Writable,Stream);function nop(){}function WritableState(options,stream,isDuplex){Duplex=Duplex||require("./_stream_duplex");options=options||{};if(typeof isDuplex!=="boolean")isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.writableObjectMode;this.highWaterMark=getHighWaterMark(this,options,"writableHighWaterMark",isDuplex);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.emitClose=options.emitClose!==false;this.autoDestroy=!!options.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function getBuffer(){var current=this.bufferedRequest;var out=[];while(current){out.push(current);current=current.next}return out};(function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function writableStateBufferGetter(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(_){}})();var realHasInstance;if(typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"){realHasInstance=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(object){if(realHasInstance.call(this,object))return true;if(this!==Writable)return false;return object&&object._writableState instanceof WritableState}})}else{realHasInstance=function realHasInstance(object){return object instanceof this}}function Writable(options){Duplex=Duplex||require("./_stream_duplex");var isDuplex=this instanceof Duplex;if(!isDuplex&&!realHasInstance.call(Writable,this))return new Writable(options);this._writableState=new WritableState(options,this,isDuplex);this.writable=true;if(options){if(typeof options.write==="function")this._write=options.write;if(typeof options.writev==="function")this._writev=options.writev;if(typeof options.destroy==="function")this._destroy=options.destroy;if(typeof options.final==="function")this._final=options.final}Stream.call(this)}Writable.prototype.pipe=function(){errorOrDestroy(this,new ERR_STREAM_CANNOT_PIPE)};function writeAfterEnd(stream,cb){var er=new ERR_STREAM_WRITE_AFTER_END;errorOrDestroy(stream,er);process.nextTick(cb,er)}function validChunk(stream,state,chunk,cb){var er;if(chunk===null){er=new ERR_STREAM_NULL_VALUES}else if(typeof chunk!=="string"&&!state.objectMode){er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer"],chunk)}if(er){errorOrDestroy(stream,er);process.nextTick(cb,er);return false}return true}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;var isBuf=!state.objectMode&&_isUint8Array(chunk);if(isBuf&&!Buffer.isBuffer(chunk)){chunk=_uint8ArrayToBuffer(chunk)}if(typeof encoding==="function"){cb=encoding;encoding=null}if(isBuf)encoding="buffer";else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=="function")cb=nop;if(state.ending)writeAfterEnd(this,cb);else if(isBuf||validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb)}return ret};Writable.prototype.cork=function(){this._writableState.corked++};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest)clearBuffer(this,state)}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==="string")encoding=encoding.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING(encoding);this._writableState.defaultEncoding=encoding;return this};Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer()}});function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==="string"){chunk=Buffer.from(chunk,encoding)}return chunk}Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:false,get:function get(){return this._writableState.highWaterMark}});function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);if(chunk!==newChunk){isBuf=true;encoding="buffer";chunk=newChunk}}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null};if(last){last.next=state.lastBufferedRequest}else{state.bufferedRequest=state.lastBufferedRequest}state.bufferedRequestCount+=1}else{doWrite(stream,state,false,len,chunk,encoding,cb)}return ret}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(state.destroyed)state.onwrite(new ERR_STREAM_DESTROYED("write"));else if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false}function onwriteError(stream,state,sync,er,cb){--state.pendingcb;if(sync){process.nextTick(cb,er);process.nextTick(finishMaybe,stream,state);stream._writableState.errorEmitted=true;errorOrDestroy(stream,er)}else{cb(er);stream._writableState.errorEmitted=true;errorOrDestroy(stream,er);finishMaybe(stream,state)}}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;if(typeof cb!=="function")throw new ERR_MULTIPLE_CALLBACK;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state)||stream.destroyed;if(!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest){clearBuffer(stream,state)}if(sync){process.nextTick(afterWrite,stream,state,finished,cb)}else{afterWrite(stream,state,finished,cb)}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state)}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit("drain")}}function clearBuffer(stream,state){state.bufferProcessing=true;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=new Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;var allBuffers=true;while(entry){buffer[count]=entry;if(!entry.isBuf)allBuffers=false;entry=entry.next;count+=1}buffer.allBuffers=allBuffers;doWrite(stream,state,true,state.length,buffer,"",holder.finish);state.pendingcb++;state.lastBufferedRequest=null;if(holder.next){state.corkedRequestsFree=holder.next;holder.next=null}else{state.corkedRequestsFree=new CorkedRequest(state)}state.bufferedRequestCount=0}else{while(entry){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);entry=entry.next;state.bufferedRequestCount--;if(state.writing){break}}if(entry===null)state.lastBufferedRequest=null}state.bufferedRequest=entry;state.bufferProcessing=false}Writable.prototype._write=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_write()"))};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==="function"){cb=chunk;chunk=null;encoding=null}else if(typeof encoding==="function"){cb=encoding;encoding=null}if(chunk!==null&&chunk!==undefined)this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork()}if(!state.ending)endWritable(this,state,cb);return this};Object.defineProperty(Writable.prototype,"writableLength",{enumerable:false,get:function get(){return this._writableState.length}});function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final(function(err){state.pendingcb--;if(err){errorOrDestroy(stream,err)}state.prefinished=true;stream.emit("prefinish");finishMaybe(stream,state)})}function prefinish(stream,state){if(!state.prefinished&&!state.finalCalled){if(typeof stream._final==="function"&&!state.destroyed){state.pendingcb++;state.finalCalled=true;process.nextTick(callFinal,stream,state)}else{state.prefinished=true;stream.emit("prefinish")}}}function finishMaybe(stream,state){var need=needFinish(state);if(need){prefinish(stream,state);if(state.pendingcb===0){state.finished=true;stream.emit("finish");if(state.autoDestroy){var rState=stream._readableState;if(!rState||rState.autoDestroy&&rState.endEmitted){stream.destroy()}}}}return need}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)process.nextTick(cb);else stream.once("finish",cb)}state.ended=true;stream.writable=false}function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;while(entry){var cb=entry.callback;state.pendingcb--;cb(err);entry=entry.next}state.corkedRequestsFree.next=corkReq}Object.defineProperty(Writable.prototype,"destroyed",{enumerable:false,get:function get(){if(this._writableState===undefined){return false}return this._writableState.destroyed},set:function set(value){if(!this._writableState){return}this._writableState.destroyed=value}});Writable.prototype.destroy=destroyImpl.destroy;Writable.prototype._undestroy=destroyImpl.undestroy;Writable.prototype._destroy=function(err,cb){cb(err)}}).call(this)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../errors":254,"./_stream_duplex":255,"./internal/streams/destroy":262,"./internal/streams/state":266,"./internal/streams/stream":267,_process:519,buffer:269,inherits:492,"util-deprecate":816}],260:[function(require,module,exports){(function(process){(function(){"use strict";var _Object$setPrototypeO;function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var finished=require("./end-of-stream");var kLastResolve=Symbol("lastResolve");var kLastReject=Symbol("lastReject");var kError=Symbol("error");var kEnded=Symbol("ended");var kLastPromise=Symbol("lastPromise");var kHandlePromise=Symbol("handlePromise");var kStream=Symbol("stream");function createIterResult(value,done){return{value:value,done:done}}function readAndResolve(iter){var resolve=iter[kLastResolve];if(resolve!==null){var data=iter[kStream].read();if(data!==null){iter[kLastPromise]=null;iter[kLastResolve]=null;iter[kLastReject]=null;resolve(createIterResult(data,false))}}}function onReadable(iter){process.nextTick(readAndResolve,iter)}function wrapForNext(lastPromise,iter){return function(resolve,reject){lastPromise.then(function(){if(iter[kEnded]){resolve(createIterResult(undefined,true));return}iter[kHandlePromise](resolve,reject)},reject)}}var AsyncIteratorPrototype=Object.getPrototypeOf(function(){});var ReadableStreamAsyncIteratorPrototype=Object.setPrototypeOf((_Object$setPrototypeO={get stream(){return this[kStream]},next:function next(){var _this=this;var error=this[kError];if(error!==null){return Promise.reject(error)}if(this[kEnded]){return Promise.resolve(createIterResult(undefined,true))}if(this[kStream].destroyed){return new Promise(function(resolve,reject){process.nextTick(function(){if(_this[kError]){reject(_this[kError])}else{resolve(createIterResult(undefined,true))}})})}var lastPromise=this[kLastPromise];var promise;if(lastPromise){promise=new Promise(wrapForNext(lastPromise,this))}else{var data=this[kStream].read();if(data!==null){return Promise.resolve(createIterResult(data,false))}promise=new Promise(this[kHandlePromise])}this[kLastPromise]=promise;return promise}},_defineProperty(_Object$setPrototypeO,Symbol.asyncIterator,function(){return this}),_defineProperty(_Object$setPrototypeO,"return",function _return(){var _this2=this;return new Promise(function(resolve,reject){_this2[kStream].destroy(null,function(err){if(err){reject(err);return}resolve(createIterResult(undefined,true))})})}),_Object$setPrototypeO),AsyncIteratorPrototype);var createReadableStreamAsyncIterator=function createReadableStreamAsyncIterator(stream){var _Object$create;var iterator=Object.create(ReadableStreamAsyncIteratorPrototype,(_Object$create={},_defineProperty(_Object$create,kStream,{value:stream,writable:true}),_defineProperty(_Object$create,kLastResolve,{value:null,writable:true}),_defineProperty(_Object$create,kLastReject,{value:null,writable:true}),_defineProperty(_Object$create,kError,{value:null,writable:true}),_defineProperty(_Object$create,kEnded,{value:stream._readableState.endEmitted,writable:true}),_defineProperty(_Object$create,kHandlePromise,{value:function value(resolve,reject){var data=iterator[kStream].read();if(data){iterator[kLastPromise]=null;iterator[kLastResolve]=null;iterator[kLastReject]=null;resolve(createIterResult(data,false))}else{iterator[kLastResolve]=resolve;iterator[kLastReject]=reject}},writable:true}),_Object$create));iterator[kLastPromise]=null;finished(stream,function(err){if(err&&err.code!=="ERR_STREAM_PREMATURE_CLOSE"){var reject=iterator[kLastReject];if(reject!==null){iterator[kLastPromise]=null;iterator[kLastResolve]=null;iterator[kLastReject]=null;reject(err)}iterator[kError]=err;return}var resolve=iterator[kLastResolve];if(resolve!==null){iterator[kLastPromise]=null;iterator[kLastResolve]=null;iterator[kLastReject]=null;resolve(createIterResult(undefined,true))}iterator[kEnded]=true});stream.on("readable",onReadable.bind(null,iterator));return iterator};module.exports=createReadableStreamAsyncIterator}).call(this)}).call(this,require("_process"))},{"./end-of-stream":263,_process:519}],261:[function(require,module,exports){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var _require=require("buffer"),Buffer=_require.Buffer;var _require2=require("util"),inspect=_require2.inspect;var custom=inspect&&inspect.custom||"inspect";function copyBuffer(src,target,offset){Buffer.prototype.copy.call(src,target,offset)}module.exports=function(){function BufferList(){_classCallCheck(this,BufferList);this.head=null;this.tail=null;this.length=0}_createClass(BufferList,[{key:"push",value:function push(v){var entry={data:v,next:null};if(this.length>0)this.tail.next=entry;else this.head=entry;this.tail=entry;++this.length}},{key:"unshift",value:function unshift(v){var entry={data:v,next:this.head};if(this.length===0)this.tail=entry;this.head=entry;++this.length}},{key:"shift",value:function shift(){if(this.length===0)return;var ret=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return ret}},{key:"clear",value:function clear(){this.head=this.tail=null;this.length=0}},{key:"join",value:function join(s){if(this.length===0)return"";var p=this.head;var ret=""+p.data;while(p=p.next)ret+=s+p.data;return ret}},{key:"concat",value:function concat(n){if(this.length===0)return Buffer.alloc(0);var ret=Buffer.allocUnsafe(n>>>0);var p=this.head;var i=0;while(p){copyBuffer(p.data,ret,i);i+=p.data.length;p=p.next}return ret}},{key:"consume",value:function consume(n,hasStrings){var ret;if(n<this.head.data.length){ret=this.head.data.slice(0,n);this.head.data=this.head.data.slice(n)}else if(n===this.head.data.length){ret=this.shift()}else{ret=hasStrings?this._getString(n):this._getBuffer(n)}return ret}},{key:"first",value:function first(){return this.head.data}},{key:"_getString",value:function _getString(n){var p=this.head;var c=1;var ret=p.data;n-=ret.length;while(p=p.next){var str=p.data;var nb=n>str.length?str.length:n;if(nb===str.length)ret+=str;else ret+=str.slice(0,n);n-=nb;if(n===0){if(nb===str.length){++c;if(p.next)this.head=p.next;else this.head=this.tail=null}else{this.head=p;p.data=str.slice(nb)}break}++c}this.length-=c;return ret}},{key:"_getBuffer",value:function _getBuffer(n){var ret=Buffer.allocUnsafe(n);var p=this.head;var c=1;p.data.copy(ret);n-=p.data.length;while(p=p.next){var buf=p.data;var nb=n>buf.length?buf.length:n;buf.copy(ret,ret.length-n,0,nb);n-=nb;if(n===0){if(nb===buf.length){++c;if(p.next)this.head=p.next;else this.head=this.tail=null}else{this.head=p;p.data=buf.slice(nb)}break}++c}this.length-=c;return ret}},{key:custom,value:function value(_,options){return inspect(this,_objectSpread(_objectSpread({},options),{},{depth:0,customInspect:false}))}}]);return BufferList}()},{buffer:269,util:226}],262:[function(require,module,exports){(function(process){(function(){"use strict";function destroy(err,cb){var _this=this;var readableDestroyed=this._readableState&&this._readableState.destroyed;var writableDestroyed=this._writableState&&this._writableState.destroyed;if(readableDestroyed||writableDestroyed){if(cb){cb(err)}else if(err){if(!this._writableState){process.nextTick(emitErrorNT,this,err)}else if(!this._writableState.errorEmitted){this._writableState.errorEmitted=true;process.nextTick(emitErrorNT,this,err)}}return this}if(this._readableState){this._readableState.destroyed=true}if(this._writableState){this._writableState.destroyed=true}this._destroy(err||null,function(err){if(!cb&&err){if(!_this._writableState){process.nextTick(emitErrorAndCloseNT,_this,err)}else if(!_this._writableState.errorEmitted){_this._writableState.errorEmitted=true;process.nextTick(emitErrorAndCloseNT,_this,err)}else{process.nextTick(emitCloseNT,_this)}}else if(cb){process.nextTick(emitCloseNT,_this);cb(err)}else{process.nextTick(emitCloseNT,_this)}});return this}function emitErrorAndCloseNT(self,err){emitErrorNT(self,err);emitCloseNT(self)}function emitCloseNT(self){if(self._writableState&&!self._writableState.emitClose)return;if(self._readableState&&!self._readableState.emitClose)return;self.emit("close")}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finalCalled=false;this._writableState.prefinished=false;this._writableState.finished=false;this._writableState.errorEmitted=false}}function emitErrorNT(self,err){self.emit("error",err)}function errorOrDestroy(stream,err){var rState=stream._readableState;var wState=stream._writableState;if(rState&&rState.autoDestroy||wState&&wState.autoDestroy)stream.destroy(err);else stream.emit("error",err)}module.exports={destroy:destroy,undestroy:undestroy,errorOrDestroy:errorOrDestroy}}).call(this)}).call(this,require("_process"))},{_process:519}],263:[function(require,module,exports){"use strict";var ERR_STREAM_PREMATURE_CLOSE=require("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function once(callback){var called=false;return function(){if(called)return;called=true;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}callback.apply(this,args)}}function noop(){}function isRequest(stream){return stream.setHeader&&typeof stream.abort==="function"}function eos(stream,opts,callback){if(typeof opts==="function")return eos(stream,null,opts);if(!opts)opts={};callback=once(callback||noop);var readable=opts.readable||opts.readable!==false&&stream.readable;var writable=opts.writable||opts.writable!==false&&stream.writable;var onlegacyfinish=function onlegacyfinish(){if(!stream.writable)onfinish()};var writableEnded=stream._writableState&&stream._writableState.finished;var onfinish=function onfinish(){writable=false;writableEnded=true;if(!readable)callback.call(stream)};var readableEnded=stream._readableState&&stream._readableState.endEmitted;var onend=function onend(){readable=false;readableEnded=true;if(!writable)callback.call(stream)};var onerror=function onerror(err){callback.call(stream,err)};var onclose=function onclose(){var err;if(readable&&!readableEnded){if(!stream._readableState||!stream._readableState.ended)err=new ERR_STREAM_PREMATURE_CLOSE;return callback.call(stream,err)}if(writable&&!writableEnded){if(!stream._writableState||!stream._writableState.ended)err=new ERR_STREAM_PREMATURE_CLOSE;return callback.call(stream,err)}};var onrequest=function onrequest(){stream.req.on("finish",onfinish)};if(isRequest(stream)){stream.on("complete",onfinish);stream.on("abort",onclose);if(stream.req)onrequest();else stream.on("request",onrequest)}else if(writable&&!stream._writableState){stream.on("end",onlegacyfinish);stream.on("close",onlegacyfinish)}stream.on("end",onend);stream.on("finish",onfinish);if(opts.error!==false)stream.on("error",onerror);stream.on("close",onclose);return function(){stream.removeListener("complete",onfinish);stream.removeListener("abort",onclose);stream.removeListener("request",onrequest);if(stream.req)stream.req.removeListener("finish",onfinish);stream.removeListener("end",onlegacyfinish);stream.removeListener("close",onlegacyfinish);stream.removeListener("finish",onfinish);stream.removeListener("end",onend);stream.removeListener("error",onerror);stream.removeListener("close",onclose)}}module.exports=eos},{"../../../errors":254}],264:[function(require,module,exports){module.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],265:[function(require,module,exports){"use strict";var eos;function once(callback){var called=false;return function(){if(called)return;called=true;callback.apply(void 0,arguments)}}var _require$codes=require("../../../errors").codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(err){if(err)throw err}function isRequest(stream){return stream.setHeader&&typeof stream.abort==="function"}function destroyer(stream,reading,writing,callback){callback=once(callback);var closed=false;stream.on("close",function(){closed=true});if(eos===undefined)eos=require("./end-of-stream");eos(stream,{readable:reading,writable:writing},function(err){if(err)return callback(err);closed=true;callback()});var destroyed=false;return function(err){if(closed)return;if(destroyed)return;destroyed=true;if(isRequest(stream))return stream.abort();if(typeof stream.destroy==="function")return stream.destroy();callback(err||new ERR_STREAM_DESTROYED("pipe"))}}function call(fn){fn()}function pipe(from,to){return from.pipe(to)}function popCallback(streams){if(!streams.length)return noop;if(typeof streams[streams.length-1]!=="function")return noop;return streams.pop()}function pipeline(){for(var _len=arguments.length,streams=new Array(_len),_key=0;_key<_len;_key++){streams[_key]=arguments[_key]}var callback=popCallback(streams);if(Array.isArray(streams[0]))streams=streams[0];if(streams.length<2){throw new ERR_MISSING_ARGS("streams")}var error;var destroys=streams.map(function(stream,i){var reading=i<streams.length-1;var writing=i>0;return destroyer(stream,reading,writing,function(err){if(!error)error=err;if(err)destroys.forEach(call);if(reading)return;destroys.forEach(call);callback(error)})});return streams.reduce(pipe)}module.exports=pipeline},{"../../../errors":254,"./end-of-stream":263}],266:[function(require,module,exports){"use strict";var ERR_INVALID_OPT_VALUE=require("../../../errors").codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(options,isDuplex,duplexKey){return options.highWaterMark!=null?options.highWaterMark:isDuplex?options[duplexKey]:null}function getHighWaterMark(state,options,duplexKey,isDuplex){var hwm=highWaterMarkFrom(options,isDuplex,duplexKey);if(hwm!=null){if(!(isFinite(hwm)&&Math.floor(hwm)===hwm)||hwm<0){var name=isDuplex?duplexKey:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(name,hwm)}return Math.floor(hwm)}return state.objectMode?16:16*1024}module.exports={getHighWaterMark:getHighWaterMark}},{"../../../errors":254}],267:[function(require,module,exports){module.exports=require("events").EventEmitter},{events:314}],268:[function(require,module,exports){exports=module.exports=require("./lib/_stream_readable.js");exports.Stream=exports;exports.Readable=exports;exports.Writable=require("./lib/_stream_writable.js");exports.Duplex=require("./lib/_stream_duplex.js");exports.Transform=require("./lib/_stream_transform.js");exports.PassThrough=require("./lib/_stream_passthrough.js");exports.finished=require("./lib/internal/streams/end-of-stream.js");exports.pipeline=require("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":255,"./lib/_stream_passthrough.js":256,"./lib/_stream_readable.js":257,"./lib/_stream_transform.js":258,"./lib/_stream_writable.js":259,"./lib/internal/streams/end-of-stream.js":263,"./lib/internal/streams/pipeline.js":265}],269:[function(require,module,exports){(function(Buffer){(function(){"use strict";var base64=require("base64-js");var ieee754=require("ieee754");exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;var K_MAX_LENGTH=2147483647;exports.kMaxLength=K_MAX_LENGTH;Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport();if(!Buffer.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function typedArraySupport(){try{var arr=new Uint8Array(1);arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return arr.foo()===42}catch(e){return false}}Object.defineProperty(Buffer.prototype,"parent",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(Buffer.prototype,"offset",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.byteOffset}});function createBuffer(length){if(length>K_MAX_LENGTH){throw new RangeError('The value "'+length+'" is invalid for option "size"')}var buf=new Uint8Array(length);buf.__proto__=Buffer.prototype;return buf}function Buffer(arg,encodingOrOffset,length){if(typeof arg==="number"){if(typeof encodingOrOffset==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return allocUnsafe(arg)}return from(arg,encodingOrOffset,length)}if(typeof Symbol!=="undefined"&&Symbol.species!=null&&Buffer[Symbol.species]===Buffer){Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}Buffer.poolSize=8192;function from(value,encodingOrOffset,length){if(typeof value==="string"){return fromString(value,encodingOrOffset)}if(ArrayBuffer.isView(value)){return fromArrayLike(value)}if(value==null){throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof value)}if(isInstance(value,ArrayBuffer)||value&&isInstance(value.buffer,ArrayBuffer)){return fromArrayBuffer(value,encodingOrOffset,length)}if(typeof value==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}var valueOf=value.valueOf&&value.valueOf();if(valueOf!=null&&valueOf!==value){return Buffer.from(valueOf,encodingOrOffset,length)}var b=fromObject(value);if(b)return b;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof value[Symbol.toPrimitive]==="function"){return Buffer.from(value[Symbol.toPrimitive]("string"),encodingOrOffset,length)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof value)}Buffer.from=function(value,encodingOrOffset,length){return from(value,encodingOrOffset,length)};Buffer.prototype.__proto__=Uint8Array.prototype;Buffer.__proto__=Uint8Array;function assertSize(size){if(typeof size!=="number"){throw new TypeError('"size" argument must be of type number')}else if(size<0){throw new RangeError('The value "'+size+'" is invalid for option "size"')}}function alloc(size,fill,encoding){assertSize(size);if(size<=0){return createBuffer(size)}if(fill!==undefined){return typeof encoding==="string"?createBuffer(size).fill(fill,encoding):createBuffer(size).fill(fill)}return createBuffer(size)}Buffer.alloc=function(size,fill,encoding){return alloc(size,fill,encoding)};function allocUnsafe(size){assertSize(size);return createBuffer(size<0?0:checked(size)|0)}Buffer.allocUnsafe=function(size){return allocUnsafe(size)};Buffer.allocUnsafeSlow=function(size){return allocUnsafe(size)};function fromString(string,encoding){if(typeof encoding!=="string"||encoding===""){encoding="utf8"}if(!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}var length=byteLength(string,encoding)|0;var buf=createBuffer(length);var actual=buf.write(string,encoding);if(actual!==length){buf=buf.slice(0,actual)}return buf}function fromArrayLike(array){var length=array.length<0?0:checked(array.length)|0;var buf=createBuffer(length);for(var i=0;i<length;i+=1){buf[i]=array[i]&255}return buf}function fromArrayBuffer(array,byteOffset,length){if(byteOffset<0||array.byteLength<byteOffset){throw new RangeError('"offset" is outside of buffer bounds')}if(array.byteLength<byteOffset+(length||0)){throw new RangeError('"length" is outside of buffer bounds')}var buf;if(byteOffset===undefined&&length===undefined){buf=new Uint8Array(array)}else if(length===undefined){buf=new Uint8Array(array,byteOffset)}else{buf=new Uint8Array(array,byteOffset,length)}buf.__proto__=Buffer.prototype;return buf}function fromObject(obj){if(Buffer.isBuffer(obj)){var len=checked(obj.length)|0;var buf=createBuffer(len);if(buf.length===0){return buf}obj.copy(buf,0,0,len);return buf}if(obj.length!==undefined){if(typeof obj.length!=="number"||numberIsNaN(obj.length)){return createBuffer(0)}return fromArrayLike(obj)}if(obj.type==="Buffer"&&Array.isArray(obj.data)){return fromArrayLike(obj.data)}}function checked(length){if(length>=K_MAX_LENGTH){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+K_MAX_LENGTH.toString(16)+" bytes")}return length|0}function SlowBuffer(length){if(+length!=length){length=0}return Buffer.alloc(+length)}Buffer.isBuffer=function isBuffer(b){return b!=null&&b._isBuffer===true&&b!==Buffer.prototype};Buffer.compare=function compare(a,b){if(isInstance(a,Uint8Array))a=Buffer.from(a,a.offset,a.byteLength);if(isInstance(b,Uint8Array))b=Buffer.from(b,b.offset,b.byteLength);if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function concat(list,length){if(!Array.isArray(list)){throw new TypeError('"list" argument must be an Array of Buffers')}if(list.length===0){return Buffer.alloc(0)}var i;if(length===undefined){length=0;for(i=0;i<list.length;++i){length+=list[i].length}}var buffer=Buffer.allocUnsafe(length);var pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(isInstance(buf,Uint8Array)){buf=Buffer.from(buf)}if(!Buffer.isBuffer(buf)){throw new TypeError('"list" argument must be an Array of Buffers')}buf.copy(buffer,pos);pos+=buf.length}return buffer};function byteLength(string,encoding){if(Buffer.isBuffer(string)){return string.length}if(ArrayBuffer.isView(string)||isInstance(string,ArrayBuffer)){return string.byteLength}if(typeof string!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof string)}var len=string.length;var mustMatch=arguments.length>2&&arguments[2]===true;if(!mustMatch&&len===0)return 0;var loweredCase=false;for(;;){switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return len*2;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase){return mustMatch?-1:utf8ToBytes(string).length}encoding=(""+encoding).toLowerCase();loweredCase=true}}}Buffer.byteLength=byteLength;function slowToString(encoding,start,end){var loweredCase=false;if(start===undefined||start<0){start=0}if(start>this.length){return""}if(end===undefined||end>this.length){end=this.length}if(end<=0){return""}end>>>=0;start>>>=0;if(end<=start){return""}if(!encoding)encoding="utf8";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}}Buffer.prototype._isBuffer=true;function swap(b,n,m){var i=b[n];b[n]=b[m];b[m]=i}Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var i=0;i<len;i+=2){swap(this,i,i+1)}return this};Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var i=0;i<len;i+=4){swap(this,i,i+3);swap(this,i+1,i+2)}return this};Buffer.prototype.swap64=function swap64(){var len=this.length;if(len%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var i=0;i<len;i+=8){swap(this,i,i+7);swap(this,i+1,i+6);swap(this,i+2,i+5);swap(this,i+3,i+4)}return this};Buffer.prototype.toString=function toString(){var length=this.length;if(length===0)return"";if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments)};Buffer.prototype.toLocaleString=Buffer.prototype.toString;Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return Buffer.compare(this,b)===0};Buffer.prototype.inspect=function inspect(){var str="";var max=exports.INSPECT_MAX_BYTES;str=this.toString("hex",0,max).replace(/(.{2})/g,"$1 ").trim();if(this.length>max)str+=" ... ";return"<Buffer "+str+">"};Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(isInstance(target,Uint8Array)){target=Buffer.from(target,target.offset,target.byteLength)}if(!Buffer.isBuffer(target)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof target)}if(start===undefined){start=0}if(end===undefined){end=target?target.length:0}if(thisStart===undefined){thisStart=0}if(thisEnd===undefined){thisEnd=this.length}if(start<0||end>target.length||thisStart<0||thisEnd>this.length){throw new RangeError("out of range index")}if(thisStart>=thisEnd&&start>=end){return 0}if(thisStart>=thisEnd){return-1}if(start>=end){return 1}start>>>=0;end>>>=0;thisStart>>>=0;thisEnd>>>=0;if(this===target)return 0;var x=thisEnd-thisStart;var y=end-start;var len=Math.min(x,y);var thisCopy=this.slice(thisStart,thisEnd);var targetCopy=target.slice(start,end);for(var i=0;i<len;++i){if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i];y=targetCopy[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(buffer.length===0)return-1;if(typeof byteOffset==="string"){encoding=byteOffset;byteOffset=0}else if(byteOffset>2147483647){byteOffset=2147483647}else if(byteOffset<-2147483648){byteOffset=-2147483648}byteOffset=+byteOffset;if(numberIsNaN(byteOffset)){byteOffset=dir?0:buffer.length-1}if(byteOffset<0)byteOffset=buffer.length+byteOffset;if(byteOffset>=buffer.length){if(dir)return-1;else byteOffset=buffer.length-1}else if(byteOffset<0){if(dir)byteOffset=0;else return-1}if(typeof val==="string"){val=Buffer.from(val,encoding)}if(Buffer.isBuffer(val)){if(val.length===0){return-1}return arrayIndexOf(buffer,val,byteOffset,encoding,dir)}else if(typeof val==="number"){val=val&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(dir){return Uint8Array.prototype.indexOf.call(buffer,val,byteOffset)}else{return Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset)}}return arrayIndexOf(buffer,[val],byteOffset,encoding,dir)}throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1;var arrLength=arr.length;var valLength=val.length;if(encoding!==undefined){encoding=String(encoding).toLowerCase();if(encoding==="ucs2"||encoding==="ucs-2"||encoding==="utf16le"||encoding==="utf-16le"){if(arr.length<2||val.length<2){return-1}indexSize=2;arrLength/=2;valLength/=2;byteOffset/=2}}function read(buf,i){if(indexSize===1){return buf[i]}else{return buf.readUInt16BE(i*indexSize)}}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++){if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===valLength)return foundIndex*indexSize}else{if(foundIndex!==-1)i-=i-foundIndex;foundIndex=-1}}}else{if(byteOffset+valLength>arrLength)byteOffset=arrLength-valLength;for(i=byteOffset;i>=0;i--){var found=true;for(var j=0;j<valLength;j++){if(read(arr,i+j)!==read(val,j)){found=false;break}}if(found)return i}}return-1}Buffer.prototype.includes=function includes(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1};Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,true)};Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,false)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;if(length>strLen/2){length=strLen/2}for(var i=0;i<length;++i){var parsed=parseInt(string.substr(i*2,2),16);if(numberIsNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding="utf8";length=this.length;offset=0}else if(length===undefined&&typeof offset==="string"){encoding=offset;length=this.length;offset=0}else if(isFinite(offset)){offset=offset>>>0;if(isFinite(length)){length=length>>>0;if(encoding===undefined)encoding="utf8"}else{encoding=length;length=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!encoding)encoding="utf8";var loweredCase=false;for(;;){switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase();loweredCase=true}}};Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;while(i<end){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<128){codePoint=firstByte}break;case 2:secondByte=buf[i+1];if((secondByte&192)===128){tempCodePoint=(firstByte&31)<<6|secondByte&63;if(tempCodePoint>127){codePoint=tempCodePoint}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&192)===128&&(thirdByte&192)===128){tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63;if(tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)){codePoint=tempCodePoint}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128){tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63;if(tempCodePoint>65535&&tempCodePoint<1114112){codePoint=tempCodePoint}}}}if(codePoint===null){codePoint=65533;bytesPerSequence=1}else if(codePoint>65535){codePoint-=65536;res.push(codePoint>>>10&1023|55296);codePoint=56320|codePoint&1023}res.push(codePoint);i+=bytesPerSequence}return decodeCodePointsArray(res)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints)}var res="";var i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH))}return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i]&127)}return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i])}return ret}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;++i){out+=toHex(buf[i])}return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;var newBuf=this.subarray(start,end);newBuf.__proto__=Buffer.prototype;return newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}return val};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){checkOffset(offset,byteLength,this.length)}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=256)){val+=this[offset+--byteLength]*mul}return val};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=256)){val+=this[offset+--i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readInt8=function readInt8(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var mul=1;var i=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var i=byteLength-1;var mul=1;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,255,0);this[offset]=value&255;return offset+1};Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);this[offset]=value&255;this[offset+1]=value>>>8;return offset+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);this[offset]=value>>>8;this[offset+1]=value&255;return offset+2};Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&255;return offset+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255;return offset+4};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0;var mul=1;var sub=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){if(value<0&&sub===0&&this[offset+i-1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1;var mul=1;var sub=0;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){if(value<0&&sub===0&&this[offset+i+1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(value<0)value=255+value+1;this[offset]=value&255;return offset+1};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);this[offset]=value&255;this[offset+1]=value>>>8;return offset+2};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);this[offset]=value>>>8;this[offset+1]=value&255;return offset+2};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);this[offset]=value&255;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24;return offset+4};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255;return offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkIEEE754(buf,value,offset,4,34028234663852886e22,-34028234663852886e22)}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkIEEE754(buf,value,offset,8,17976931348623157e292,-17976931348623157e292)}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!Buffer.isBuffer(target))throw new TypeError("argument should be a Buffer");if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0){throw new RangeError("targetStart out of bounds")}if(start<0||start>=this.length)throw new RangeError("Index out of range");if(end<0)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start}var len=end-start;if(this===target&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(targetStart,start,end)}else if(this===target&&start<targetStart&&targetStart<end){for(var i=len-1;i>=0;--i){target[i+targetStart]=this[i+start]}}else{Uint8Array.prototype.set.call(target,this.subarray(start,end),targetStart)}return len};Buffer.prototype.fill=function fill(val,start,end,encoding){if(typeof val==="string"){if(typeof start==="string"){encoding=start;start=0;end=this.length}else if(typeof end==="string"){encoding=end;end=this.length}if(encoding!==undefined&&typeof encoding!=="string"){throw new TypeError("encoding must be a string")}if(typeof encoding==="string"&&!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}if(val.length===1){var code=val.charCodeAt(0);if(encoding==="utf8"&&code<128||encoding==="latin1"){val=code}}}else if(typeof val==="number"){val=val&255}if(start<0||this.length<start||this.length<end){throw new RangeError("Out of range index")}if(end<=start){return this}start=start>>>0;end=end===undefined?this.length:end>>>0;if(!val)val=0;var i;if(typeof val==="number"){for(i=start;i<end;++i){this[i]=val}}else{var bytes=Buffer.isBuffer(val)?val:Buffer.from(val,encoding);var len=bytes.length;if(len===0){throw new TypeError('The value "'+val+'" is invalid for argument "value"')}for(i=0;i<end-start;++i){this[i+start]=bytes[i%len]}}return this};var INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g;function base64clean(str){str=str.split("=")[0];str=str.trim().replace(INVALID_BASE64_RE,"");if(str.length<2)return"";while(str.length%4!==0){str=str+"="}return str}function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;++i){codePoint=string.charCodeAt(i);if(codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else if(leadSurrogate){if((units-=3)>-1)bytes.push(239,191,189)}leadSurrogate=null;if(codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else{throw new Error("Invalid code point")}}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;++i){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;++i){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;++i){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}function isInstance(obj,type){return obj instanceof type||obj!=null&&obj.constructor!=null&&obj.constructor.name!=null&&obj.constructor.name===type.name}function numberIsNaN(obj){return obj!==obj}}).call(this)}).call(this,require("buffer").Buffer)},{"base64-js":218,buffer:269,ieee754:491}],270:[function(require,module,exports){(function(Buffer){(function(){"use strict";class Layout{constructor(span,property){if(!Number.isInteger(span)){throw new TypeError("span must be an integer")}this.span=span;this.property=property}makeDestinationObject(){return{}}decode(b,offset){throw new Error("Layout is abstract")}encode(src,b,offset){throw new Error("Layout is abstract")}getSpan(b,offset){if(0>this.span){throw new RangeError("indeterminate span")}return this.span}replicate(property){const rv=Object.create(this.constructor.prototype);Object.assign(rv,this);rv.property=property;return rv}fromArray(values){return undefined}}exports.Layout=Layout;function nameWithProperty(name,lo){if(lo.property){return name+"["+lo.property+"]"}return name}exports.nameWithProperty=nameWithProperty;function bindConstructorLayout(Class,layout){if("function"!==typeof Class){throw new TypeError("Class must be constructor")}if(Class.hasOwnProperty("layout_")){throw new Error("Class is already bound to a layout")}if(!(layout&&layout instanceof Layout)){throw new TypeError("layout must be a Layout")}if(layout.hasOwnProperty("boundConstructor_")){throw new Error("layout is already bound to a constructor")}Class.layout_=layout;layout.boundConstructor_=Class;layout.makeDestinationObject=()=>new Class;Object.defineProperty(Class.prototype,"encode",{value:function(b,offset){return layout.encode(this,b,offset)},writable:true});Object.defineProperty(Class,"decode",{value:function(b,offset){return layout.decode(b,offset)},writable:true})}exports.bindConstructorLayout=bindConstructorLayout;class ExternalLayout extends Layout{isCount(){throw new Error("ExternalLayout is abstract")}}class GreedyCount extends ExternalLayout{constructor(elementSpan,property){if(undefined===elementSpan){elementSpan=1}if(!Number.isInteger(elementSpan)||0>=elementSpan){throw new TypeError("elementSpan must be a (positive) integer")}super(-1,property);this.elementSpan=elementSpan}isCount(){return true}decode(b,offset){if(undefined===offset){offset=0}const rem=b.length-offset;return Math.floor(rem/this.elementSpan)}encode(src,b,offset){return 0}}class OffsetLayout extends ExternalLayout{constructor(layout,offset,property){if(!(layout instanceof Layout)){throw new TypeError("layout must be a Layout")}if(undefined===offset){offset=0}else if(!Number.isInteger(offset)){throw new TypeError("offset must be integer or undefined")}super(layout.span,property||layout.property);this.layout=layout;this.offset=offset}isCount(){return this.layout instanceof UInt||this.layout instanceof UIntBE}decode(b,offset){if(undefined===offset){offset=0}return this.layout.decode(b,offset+this.offset)}encode(src,b,offset){if(undefined===offset){offset=0}return this.layout.encode(src,b,offset+this.offset)}}class UInt extends Layout{constructor(span,property){super(span,property);if(6<this.span){throw new RangeError("span must not exceed 6 bytes")}}decode(b,offset){if(undefined===offset){offset=0}return b.readUIntLE(offset,this.span)}encode(src,b,offset){if(undefined===offset){offset=0}b.writeUIntLE(src,offset,this.span);return this.span}}class UIntBE extends Layout{constructor(span,property){super(span,property);if(6<this.span){throw new RangeError("span must not exceed 6 bytes")}}decode(b,offset){if(undefined===offset){offset=0}return b.readUIntBE(offset,this.span)}encode(src,b,offset){if(undefined===offset){offset=0}b.writeUIntBE(src,offset,this.span);return this.span}}class Int extends Layout{constructor(span,property){super(span,property);if(6<this.span){throw new RangeError("span must not exceed 6 bytes")}}decode(b,offset){if(undefined===offset){offset=0}return b.readIntLE(offset,this.span)}encode(src,b,offset){if(undefined===offset){offset=0}b.writeIntLE(src,offset,this.span);return this.span}}class IntBE extends Layout{constructor(span,property){super(span,property);if(6<this.span){throw new RangeError("span must not exceed 6 bytes")}}decode(b,offset){if(undefined===offset){offset=0}return b.readIntBE(offset,this.span)}encode(src,b,offset){if(undefined===offset){offset=0}b.writeIntBE(src,offset,this.span);return this.span}}const V2E32=Math.pow(2,32);function divmodInt64(src){const hi32=Math.floor(src/V2E32);const lo32=src-hi32*V2E32;return{hi32:hi32,lo32:lo32}}function roundedInt64(hi32,lo32){return hi32*V2E32+lo32}class NearUInt64 extends Layout{constructor(property){super(8,property)}decode(b,offset){if(undefined===offset){offset=0}const lo32=b.readUInt32LE(offset);const hi32=b.readUInt32LE(offset+4);return roundedInt64(hi32,lo32)}encode(src,b,offset){if(undefined===offset){offset=0}const split=divmodInt64(src);b.writeUInt32LE(split.lo32,offset);b.writeUInt32LE(split.hi32,offset+4);return 8}}class NearUInt64BE extends Layout{constructor(property){super(8,property)}decode(b,offset){if(undefined===offset){offset=0}const hi32=b.readUInt32BE(offset);const lo32=b.readUInt32BE(offset+4);return roundedInt64(hi32,lo32)}encode(src,b,offset){if(undefined===offset){offset=0}const split=divmodInt64(src);b.writeUInt32BE(split.hi32,offset);b.writeUInt32BE(split.lo32,offset+4);return 8}}class NearInt64 extends Layout{constructor(property){super(8,property)}decode(b,offset){if(undefined===offset){offset=0}const lo32=b.readUInt32LE(offset);const hi32=b.readInt32LE(offset+4);return roundedInt64(hi32,lo32)}encode(src,b,offset){if(undefined===offset){offset=0}const split=divmodInt64(src);b.writeUInt32LE(split.lo32,offset);b.writeInt32LE(split.hi32,offset+4);return 8}}class NearInt64BE extends Layout{constructor(property){super(8,property)}decode(b,offset){if(undefined===offset){offset=0}const hi32=b.readInt32BE(offset);const lo32=b.readUInt32BE(offset+4);return roundedInt64(hi32,lo32)}encode(src,b,offset){if(undefined===offset){offset=0}const split=divmodInt64(src);b.writeInt32BE(split.hi32,offset);b.writeUInt32BE(split.lo32,offset+4);return 8}}class Float extends Layout{constructor(property){super(4,property)}decode(b,offset){if(undefined===offset){offset=0}return b.readFloatLE(offset)}encode(src,b,offset){if(undefined===offset){offset=0}b.writeFloatLE(src,offset);return 4}}class FloatBE extends Layout{constructor(property){super(4,property)}decode(b,offset){if(undefined===offset){offset=0}return b.readFloatBE(offset)}encode(src,b,offset){if(undefined===offset){offset=0}b.writeFloatBE(src,offset);return 4}}class Double extends Layout{constructor(property){super(8,property)}decode(b,offset){if(undefined===offset){offset=0}return b.readDoubleLE(offset)}encode(src,b,offset){if(undefined===offset){offset=0}b.writeDoubleLE(src,offset);return 8}}class DoubleBE extends Layout{constructor(property){super(8,property)}decode(b,offset){if(undefined===offset){offset=0}return b.readDoubleBE(offset)}encode(src,b,offset){if(undefined===offset){offset=0}b.writeDoubleBE(src,offset);return 8}}class Sequence extends Layout{constructor(elementLayout,count,property){if(!(elementLayout instanceof Layout)){throw new TypeError("elementLayout must be a Layout")}if(!(count instanceof ExternalLayout&&count.isCount()||Number.isInteger(count)&&0<=count)){throw new TypeError("count must be non-negative integer "+"or an unsigned integer ExternalLayout")}let span=-1;if(!(count instanceof ExternalLayout)&&0<elementLayout.span){span=count*elementLayout.span}super(span,property);this.elementLayout=elementLayout;this.count=count}getSpan(b,offset){if(0<=this.span){return this.span}if(undefined===offset){offset=0}let span=0;let count=this.count;if(count instanceof ExternalLayout){count=count.decode(b,offset)}if(0<this.elementLayout.span){span=count*this.elementLayout.span}else{let idx=0;while(idx<count){span+=this.elementLayout.getSpan(b,offset+span);++idx}}return span}decode(b,offset){if(undefined===offset){offset=0}const rv=[];let i=0;let count=this.count;if(count instanceof ExternalLayout){count=count.decode(b,offset)}while(i<count){rv.push(this.elementLayout.decode(b,offset));offset+=this.elementLayout.getSpan(b,offset);i+=1}return rv}encode(src,b,offset){if(undefined===offset){offset=0}const elo=this.elementLayout;const span=src.reduce((span,v)=>{return span+elo.encode(v,b,offset+span)},0);if(this.count instanceof ExternalLayout){this.count.encode(src.length,b,offset)}return span}}class Structure extends Layout{constructor(fields,property,decodePrefixes){if(!(Array.isArray(fields)&&fields.reduce((acc,v)=>acc&&v instanceof Layout,true))){throw new TypeError("fields must be array of Layout instances")}if("boolean"===typeof property&&undefined===decodePrefixes){decodePrefixes=property;property=undefined}for(const fd of fields){if(0>fd.span&&undefined===fd.property){throw new Error("fields cannot contain unnamed variable-length layout")}}let span=-1;try{span=fields.reduce((span,fd)=>span+fd.getSpan(),0)}catch(e){}super(span,property);this.fields=fields;this.decodePrefixes=!!decodePrefixes}getSpan(b,offset){if(0<=this.span){return this.span}if(undefined===offset){offset=0}let span=0;try{span=this.fields.reduce((span,fd)=>{const fsp=fd.getSpan(b,offset);offset+=fsp;return span+fsp},0)}catch(e){throw new RangeError("indeterminate span")}return span}decode(b,offset){if(undefined===offset){offset=0}const dest=this.makeDestinationObject();for(const fd of this.fields){if(undefined!==fd.property){dest[fd.property]=fd.decode(b,offset)}offset+=fd.getSpan(b,offset);if(this.decodePrefixes&&b.length===offset){break}}return dest}encode(src,b,offset){if(undefined===offset){offset=0}const firstOffset=offset;let lastOffset=0;let lastWrote=0;for(const fd of this.fields){let span=fd.span;lastWrote=0<span?span:0;if(undefined!==fd.property){const fv=src[fd.property];if(undefined!==fv){lastWrote=fd.encode(fv,b,offset);if(0>span){span=fd.getSpan(b,offset)}}}lastOffset=offset;offset+=span}return lastOffset+lastWrote-firstOffset}fromArray(values){const dest=this.makeDestinationObject();for(const fd of this.fields){if(undefined!==fd.property&&0<values.length){dest[fd.property]=values.shift()}}return dest}layoutFor(property){if("string"!==typeof property){throw new TypeError("property must be string")}for(const fd of this.fields){if(fd.property===property){return fd}}}offsetOf(property){if("string"!==typeof property){throw new TypeError("property must be string")}let offset=0;for(const fd of this.fields){if(fd.property===property){return offset}if(0>fd.span){offset=-1}else if(0<=offset){offset+=fd.span}}}}class UnionDiscriminator{constructor(property){this.property=property}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class UnionLayoutDiscriminator extends UnionDiscriminator{constructor(layout,property){if(!(layout instanceof ExternalLayout&&layout.isCount())){throw new TypeError("layout must be an unsigned integer ExternalLayout")}super(property||layout.property||"variant");this.layout=layout}decode(b,offset){return this.layout.decode(b,offset)}encode(src,b,offset){return this.layout.encode(src,b,offset)}}class Union extends Layout{constructor(discr,defaultLayout,property){const upv=discr instanceof UInt||discr instanceof UIntBE;if(upv){discr=new UnionLayoutDiscriminator(new OffsetLayout(discr))}else if(discr instanceof ExternalLayout&&discr.isCount()){discr=new UnionLayoutDiscriminator(discr)}else if(!(discr instanceof UnionDiscriminator)){throw new TypeError("discr must be a UnionDiscriminator "+"or an unsigned integer layout")}if(undefined===defaultLayout){defaultLayout=null}if(!(null===defaultLayout||defaultLayout instanceof Layout)){throw new TypeError("defaultLayout must be null or a Layout")}if(null!==defaultLayout){if(0>defaultLayout.span){throw new Error("defaultLayout must have constant span")}if(undefined===defaultLayout.property){defaultLayout=defaultLayout.replicate("content")}}let span=-1;if(defaultLayout){span=defaultLayout.span;if(0<=span&&upv){span+=discr.layout.span}}super(span,property);this.discriminator=discr;this.usesPrefixDiscriminator=upv;this.defaultLayout=defaultLayout;this.registry={};let boundGetSourceVariant=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(src){return boundGetSourceVariant(src)};this.configGetSourceVariant=function(gsv){boundGetSourceVariant=gsv.bind(this)}}getSpan(b,offset){if(0<=this.span){return this.span}if(undefined===offset){offset=0}const vlo=this.getVariant(b,offset);if(!vlo){throw new Error("unable to determine span for unrecognized variant")}return vlo.getSpan(b,offset)}defaultGetSourceVariant(src){if(src.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&src.hasOwnProperty(this.defaultLayout.property)){return undefined}const vlo=this.registry[src[this.discriminator.property]];if(vlo&&(!vlo.layout||src.hasOwnProperty(vlo.property))){return vlo}}else{for(const tag in this.registry){const vlo=this.registry[tag];if(src.hasOwnProperty(vlo.property)){return vlo}}}throw new Error("unable to infer src variant")}decode(b,offset){if(undefined===offset){offset=0}let dest;const dlo=this.discriminator;const discr=dlo.decode(b,offset);let clo=this.registry[discr];if(undefined===clo){let contentOffset=0;clo=this.defaultLayout;if(this.usesPrefixDiscriminator){contentOffset=dlo.layout.span}dest=this.makeDestinationObject();dest[dlo.property]=discr;dest[clo.property]=this.defaultLayout.decode(b,offset+contentOffset)}else{dest=clo.decode(b,offset)}return dest}encode(src,b,offset){if(undefined===offset){offset=0}const vlo=this.getSourceVariant(src);if(undefined===vlo){const dlo=this.discriminator;const clo=this.defaultLayout;let contentOffset=0;if(this.usesPrefixDiscriminator){contentOffset=dlo.layout.span}dlo.encode(src[dlo.property],b,offset);return contentOffset+clo.encode(src[clo.property],b,offset+contentOffset)}return vlo.encode(src,b,offset)}addVariant(variant,layout,property){const rv=new VariantLayout(this,variant,layout,property);this.registry[variant]=rv;return rv}getVariant(vb,offset){let variant=vb;if(Buffer.isBuffer(vb)){if(undefined===offset){offset=0}variant=this.discriminator.decode(vb,offset)}return this.registry[variant]}}class VariantLayout extends Layout{constructor(union,variant,layout,property){if(!(union instanceof Union)){throw new TypeError("union must be a Union")}if(!Number.isInteger(variant)||0>variant){throw new TypeError("variant must be a (non-negative) integer")}if("string"===typeof layout&&undefined===property){property=layout;layout=null}if(layout){if(!(layout instanceof Layout)){throw new TypeError("layout must be a Layout")}if(null!==union.defaultLayout&&0<=layout.span&&layout.span>union.defaultLayout.span){throw new Error("variant span exceeds span of containing union")}if("string"!==typeof property){throw new TypeError("variant must have a String property")}}let span=union.span;if(0>union.span){span=layout?layout.span:0;if(0<=span&&union.usesPrefixDiscriminator){span+=union.discriminator.layout.span}}super(span,property);this.union=union;this.variant=variant;this.layout=layout||null}getSpan(b,offset){if(0<=this.span){return this.span}if(undefined===offset){offset=0}let contentOffset=0;if(this.union.usesPrefixDiscriminator){contentOffset=this.union.discriminator.layout.span}return contentOffset+this.layout.getSpan(b,offset+contentOffset)}decode(b,offset){const dest=this.makeDestinationObject();if(undefined===offset){offset=0}if(this!==this.union.getVariant(b,offset)){throw new Error("variant mismatch")}let contentOffset=0;if(this.union.usesPrefixDiscriminator){contentOffset=this.union.discriminator.layout.span}if(this.layout){dest[this.property]=this.layout.decode(b,offset+contentOffset)}else if(this.property){dest[this.property]=true}else if(this.union.usesPrefixDiscriminator){dest[this.union.discriminator.property]=this.variant}return dest}encode(src,b,offset){if(undefined===offset){offset=0}let contentOffset=0;if(this.union.usesPrefixDiscriminator){contentOffset=this.union.discriminator.layout.span}if(this.layout&&!src.hasOwnProperty(this.property)){throw new TypeError("variant lacks property "+this.property)}this.union.discriminator.encode(this.variant,b,offset);let span=contentOffset;if(this.layout){this.layout.encode(src[this.property],b,offset+contentOffset);span+=this.layout.getSpan(b,offset+contentOffset);if(0<=this.union.span&&span>this.union.span){throw new Error("encoded variant overruns containing union")}}return span}fromArray(values){if(this.layout){return this.layout.fromArray(values)}}}function fixBitwiseResult(v){if(0>v){v+=4294967296}return v}class BitStructure extends Layout{constructor(word,msb,property){if(!(word instanceof UInt||word instanceof UIntBE)){throw new TypeError("word must be a UInt or UIntBE layout")}if("string"===typeof msb&&undefined===property){property=msb;msb=undefined}if(4<word.span){throw new RangeError("word cannot exceed 32 bits")}super(word.span,property);this.word=word;this.msb=!!msb;this.fields=[];let value=0;this._packedSetValue=function(v){value=fixBitwiseResult(v);return this};this._packedGetValue=function(){return value}}decode(b,offset){const dest=this.makeDestinationObject();if(undefined===offset){offset=0}const value=this.word.decode(b,offset);this._packedSetValue(value);for(const fd of this.fields){if(undefined!==fd.property){dest[fd.property]=fd.decode(value)}}return dest}encode(src,b,offset){if(undefined===offset){offset=0}const value=this.word.decode(b,offset);this._packedSetValue(value);for(const fd of this.fields){if(undefined!==fd.property){const fv=src[fd.property];if(undefined!==fv){fd.encode(fv)}}}return this.word.encode(this._packedGetValue(),b,offset)}addField(bits,property){const bf=new BitField(this,bits,property);this.fields.push(bf);return bf}addBoolean(property){const bf=new Boolean(this,property);this.fields.push(bf);return bf}fieldFor(property){if("string"!==typeof property){throw new TypeError("property must be string")}for(const fd of this.fields){if(fd.property===property){return fd}}}}class BitField{constructor(container,bits,property){if(!(container instanceof BitStructure)){throw new TypeError("container must be a BitStructure")}if(!Number.isInteger(bits)||0>=bits){throw new TypeError("bits must be positive integer")}const totalBits=8*container.span;const usedBits=container.fields.reduce((sum,fd)=>sum+fd.bits,0);if(bits+usedBits>totalBits){throw new Error("bits too long for span remainder ("+(totalBits-usedBits)+" of "+totalBits+" remain)")}this.container=container;this.bits=bits;this.valueMask=(1<<bits)-1;if(32===bits){this.valueMask=4294967295}this.start=usedBits;if(this.container.msb){this.start=totalBits-usedBits-bits}this.wordMask=fixBitwiseResult(this.valueMask<<this.start);this.property=property}decode(){const word=this.container._packedGetValue();const wordValue=fixBitwiseResult(word&this.wordMask);const value=wordValue>>>this.start;return value}encode(value){if(!Number.isInteger(value)||value!==fixBitwiseResult(value&this.valueMask)){throw new TypeError(nameWithProperty("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask)}const word=this.container._packedGetValue();const wordValue=fixBitwiseResult(value<<this.start);this.container._packedSetValue(fixBitwiseResult(word&~this.wordMask)|wordValue)}}class Boolean extends BitField{constructor(container,property){super(container,1,property)}decode(b,offset){return!!BitField.prototype.decode.call(this,b,offset)}encode(value){if("boolean"===typeof value){value=+value}return BitField.prototype.encode.call(this,value)}}class Blob extends Layout{constructor(length,property){if(!(length instanceof ExternalLayout&&length.isCount()||Number.isInteger(length)&&0<=length)){throw new TypeError("length must be positive integer "+"or an unsigned integer ExternalLayout")}let span=-1;if(!(length instanceof ExternalLayout)){span=length}super(span,property);this.length=length}getSpan(b,offset){let span=this.span;if(0>span){span=this.length.decode(b,offset)}return span}decode(b,offset){if(undefined===offset){offset=0}let span=this.span;if(0>span){span=this.length.decode(b,offset)}return b.slice(offset,offset+span)}encode(src,b,offset){let span=this.length;if(this.length instanceof ExternalLayout){span=src.length}if(!(Buffer.isBuffer(src)&&span===src.length)){throw new TypeError(nameWithProperty("Blob.encode",this)+" requires (length "+span+") Buffer as src")}if(offset+span>b.length){throw new RangeError("encoding overruns Buffer")}b.write(src.toString("hex"),offset,span,"hex");if(this.length instanceof ExternalLayout){this.length.encode(span,b,offset)}return span}}class CString extends Layout{constructor(property){super(-1,property)}getSpan(b,offset){if(!Buffer.isBuffer(b)){throw new TypeError("b must be a Buffer")}if(undefined===offset){offset=0}let idx=offset;while(idx<b.length&&0!==b[idx]){idx+=1}return 1+idx-offset}decode(b,offset,dest){if(undefined===offset){offset=0}let span=this.getSpan(b,offset);return b.slice(offset,offset+span-1).toString("utf-8")}encode(src,b,offset){if(undefined===offset){offset=0}if("string"!==typeof src){src=src.toString()}const srcb=new Buffer(src,"utf8");const span=srcb.length;if(offset+span>b.length){throw new RangeError("encoding overruns Buffer")}srcb.copy(b,offset);b[offset+span]=0;return span+1}}class UTF8 extends Layout{constructor(maxSpan,property){if("string"===typeof maxSpan&&undefined===property){property=maxSpan;maxSpan=undefined}if(undefined===maxSpan){maxSpan=-1}else if(!Number.isInteger(maxSpan)){throw new TypeError("maxSpan must be an integer")}super(-1,property);this.maxSpan=maxSpan}getSpan(b,offset){if(!Buffer.isBuffer(b)){throw new TypeError("b must be a Buffer")}if(undefined===offset){offset=0}return b.length-offset}decode(b,offset,dest){if(undefined===offset){offset=0}let span=this.getSpan(b,offset);if(0<=this.maxSpan&&this.maxSpan<span){throw new RangeError("text length exceeds maxSpan")}return b.slice(offset,offset+span).toString("utf-8")}encode(src,b,offset){if(undefined===offset){offset=0}if("string"!==typeof src){src=src.toString()}const srcb=new Buffer(src,"utf8");const span=srcb.length;if(0<=this.maxSpan&&this.maxSpan<span){throw new RangeError("text length exceeds maxSpan")}if(offset+span>b.length){throw new RangeError("encoding overruns Buffer")}srcb.copy(b,offset);return span}}class Constant extends Layout{constructor(value,property){super(0,property);this.value=value}decode(b,offset,dest){return this.value}encode(src,b,offset){return 0}}exports.ExternalLayout=ExternalLayout;exports.GreedyCount=GreedyCount;exports.OffsetLayout=OffsetLayout;exports.UInt=UInt;exports.UIntBE=UIntBE;exports.Int=Int;exports.IntBE=IntBE;exports.Float=Float;exports.FloatBE=FloatBE;exports.Double=Double;exports.DoubleBE=DoubleBE;exports.Sequence=Sequence;exports.Structure=Structure;exports.UnionDiscriminator=UnionDiscriminator;exports.UnionLayoutDiscriminator=UnionLayoutDiscriminator;exports.Union=Union;exports.VariantLayout=VariantLayout;exports.BitStructure=BitStructure;exports.BitField=BitField;exports.Boolean=Boolean;exports.Blob=Blob;exports.CString=CString;exports.UTF8=UTF8;exports.Constant=Constant;exports.greedy=(elementSpan,property)=>new GreedyCount(elementSpan,property);exports.offset=(layout,offset,property)=>new OffsetLayout(layout,offset,property);exports.u8=property=>new UInt(1,property);exports.u16=property=>new UInt(2,property);exports.u24=property=>new UInt(3,property);exports.u32=property=>new UInt(4,property);exports.u40=property=>new UInt(5,property);exports.u48=property=>new UInt(6,property);exports.nu64=property=>new NearUInt64(property);exports.u16be=property=>new UIntBE(2,property);exports.u24be=property=>new UIntBE(3,property);exports.u32be=property=>new UIntBE(4,property);exports.u40be=property=>new UIntBE(5,property);exports.u48be=property=>new UIntBE(6,property);exports.nu64be=property=>new NearUInt64BE(property);exports.s8=property=>new Int(1,property);exports.s16=property=>new Int(2,property);exports.s24=property=>new Int(3,property);exports.s32=property=>new Int(4,property);exports.s40=property=>new Int(5,property);exports.s48=property=>new Int(6,property);exports.ns64=property=>new NearInt64(property);exports.s16be=property=>new IntBE(2,property);exports.s24be=property=>new IntBE(3,property);exports.s32be=property=>new IntBE(4,property);exports.s40be=property=>new IntBE(5,property);exports.s48be=property=>new IntBE(6,property);exports.ns64be=property=>new NearInt64BE(property);exports.f32=property=>new Float(property);exports.f32be=property=>new FloatBE(property);exports.f64=property=>new Double(property);exports.f64be=property=>new DoubleBE(property);exports.struct=(fields,property,decodePrefixes)=>new Structure(fields,property,decodePrefixes);exports.bits=(word,msb,property)=>new BitStructure(word,msb,property);exports.seq=(elementLayout,count,property)=>new Sequence(elementLayout,count,property);exports.union=(discr,defaultLayout,property)=>new Union(discr,defaultLayout,property);exports.unionLayoutDiscriminator=(layout,property)=>new UnionLayoutDiscriminator(layout,property);exports.blob=(length,property)=>new Blob(length,property);exports.cstr=property=>new CString(property);exports.utf8=(maxSpan,property)=>new UTF8(maxSpan,property);exports.const=(value,property)=>new Constant(value,property)}).call(this)}).call(this,require("buffer").Buffer)},{buffer:269}],271:[function(require,module,exports){(function(Buffer){(function(){module.exports=function xor(a,b){var length=Math.min(a.length,b.length);var buffer=new Buffer(length);for(var i=0;i<length;++i){buffer[i]=a[i]^b[i]}return buffer}}).call(this)}).call(this,require("buffer").Buffer)},{buffer:269}],272:[function(require,module,exports){"use strict";var GetIntrinsic=require("get-intrinsic");var callBind=require("./");var $indexOf=callBind(GetIntrinsic("String.prototype.indexOf"));module.exports=function callBoundIntrinsic(name,allowMissing){var intrinsic=GetIntrinsic(name,!!allowMissing);if(typeof intrinsic==="function"&&$indexOf(name,".prototype.")>-1){return callBind(intrinsic)}return intrinsic}},{"./":273,"get-intrinsic":320}],273:[function(require,module,exports){"use strict";var bind=require("function-bind");var GetIntrinsic=require("get-intrinsic");var $apply=GetIntrinsic("%Function.prototype.apply%");var $call=GetIntrinsic("%Function.prototype.call%");var $reflectApply=GetIntrinsic("%Reflect.apply%",true)||bind.call($call,$apply);var $gOPD=GetIntrinsic("%Object.getOwnPropertyDescriptor%",true);var $defineProperty=GetIntrinsic("%Object.defineProperty%",true);var $max=GetIntrinsic("%Math.max%");if($defineProperty){try{$defineProperty({},"a",{value:1})}catch(e){$defineProperty=null}}module.exports=function callBind(originalFunction){var func=$reflectApply(bind,$call,arguments);if($gOPD&&$defineProperty){var desc=$gOPD(func,"length");if(desc.configurable){$defineProperty(func,"length",{value:1+$max(0,originalFunction.length-(arguments.length-1))})}}return func};var applyBind=function applyBind(){return $reflectApply(bind,$apply,arguments)};if($defineProperty){$defineProperty(module.exports,"apply",{value:applyBind})}else{module.exports.apply=applyBind}},{"function-bind":319,"get-intrinsic":320}],274:[function(require,module,exports){"use strict";const UPPERCASE=/[\p{Lu}]/u;const LOWERCASE=/[\p{Ll}]/u;const LEADING_CAPITAL=/^[\p{Lu}](?![\p{Lu}])/gu;const IDENTIFIER=/([\p{Alpha}\p{N}_]|$)/u;const SEPARATORS=/[_.\- ]+/;const LEADING_SEPARATORS=new RegExp("^"+SEPARATORS.source);const SEPARATORS_AND_IDENTIFIER=new RegExp(SEPARATORS.source+IDENTIFIER.source,"gu");const NUMBERS_AND_IDENTIFIER=new RegExp("\\d+"+IDENTIFIER.source,"gu");const preserveCamelCase=(string,toLowerCase,toUpperCase)=>{let isLastCharLower=false;let isLastCharUpper=false;let isLastLastCharUpper=false;for(let i=0;i<string.length;i++){const character=string[i];if(isLastCharLower&&UPPERCASE.test(character)){string=string.slice(0,i)+"-"+string.slice(i);isLastCharLower=false;isLastLastCharUpper=isLastCharUpper;isLastCharUpper=true;i++}else if(isLastCharUpper&&isLastLastCharUpper&&LOWERCASE.test(character)){string=string.slice(0,i-1)+"-"+string.slice(i-1);isLastLastCharUpper=isLastCharUpper;isLastCharUpper=false;isLastCharLower=true}else{isLastCharLower=toLowerCase(character)===character&&toUpperCase(character)!==character;isLastLastCharUpper=isLastCharUpper;isLastCharUpper=toUpperCase(character)===character&&toLowerCase(character)!==character}}return string};const preserveConsecutiveUppercase=(input,toLowerCase)=>{LEADING_CAPITAL.lastIndex=0;return input.replace(LEADING_CAPITAL,m1=>toLowerCase(m1))};const postProcess=(input,toUpperCase)=>{SEPARATORS_AND_IDENTIFIER.lastIndex=0;NUMBERS_AND_IDENTIFIER.lastIndex=0;return input.replace(SEPARATORS_AND_IDENTIFIER,(_,identifier)=>toUpperCase(identifier)).replace(NUMBERS_AND_IDENTIFIER,m=>toUpperCase(m))};const camelCase=(input,options)=>{if(!(typeof input==="string"||Array.isArray(input))){throw new TypeError("Expected the input to be `string | string[]`")}options={pascalCase:false,preserveConsecutiveUppercase:false,...options};if(Array.isArray(input)){input=input.map(x=>x.trim()).filter(x=>x.length).join("-")}else{input=input.trim()}if(input.length===0){return""}const toLowerCase=options.locale===false?string=>string.toLowerCase():string=>string.toLocaleLowerCase(options.locale);const toUpperCase=options.locale===false?string=>string.toUpperCase():string=>string.toLocaleUpperCase(options.locale);if(input.length===1){return options.pascalCase?toUpperCase(input):toLowerCase(input)}const hasUpperCase=input!==toLowerCase(input);if(hasUpperCase){input=preserveCamelCase(input,toLowerCase,toUpperCase)}input=input.replace(LEADING_SEPARATORS,"");if(options.preserveConsecutiveUppercase){input=preserveConsecutiveUppercase(input,toLowerCase)}else{input=toLowerCase(input)}if(options.pascalCase){input=toUpperCase(input.charAt(0))+input.slice(1)}return postProcess(input,toUpperCase)};module.exports=camelCase;module.exports.default=camelCase},{}],275:[function(require,module,exports){var Buffer=require("safe-buffer").Buffer;var Transform=require("stream").Transform;var StringDecoder=require("string_decoder").StringDecoder;var inherits=require("inherits");function CipherBase(hashMode){Transform.call(this);this.hashMode=typeof hashMode==="string";if(this.hashMode){this[hashMode]=this._finalOrDigest}else{this.final=this._finalOrDigest}if(this._final){this.__final=this._final;this._final=null}this._decoder=null;this._encoding=null}inherits(CipherBase,Transform);CipherBase.prototype.update=function(data,inputEnc,outputEnc){if(typeof data==="string"){data=Buffer.from(data,inputEnc)}var outData=this._update(data);if(this.hashMode)return this;if(outputEnc){outData=this._toString(outData,outputEnc)}return outData};CipherBase.prototype.setAutoPadding=function(){};CipherBase.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};CipherBase.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};CipherBase.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};CipherBase.prototype._transform=function(data,_,next){var err;try{if(this.hashMode){this._update(data)}else{this.push(this._update(data))}}catch(e){err=e}finally{next(err)}};CipherBase.prototype._flush=function(done){var err;try{this.push(this.__final())}catch(e){err=e}done(err)};CipherBase.prototype._finalOrDigest=function(outputEnc){var outData=this.__final()||Buffer.alloc(0);if(outputEnc){outData=this._toString(outData,outputEnc,true)}return outData};CipherBase.prototype._toString=function(value,enc,fin){if(!this._decoder){this._decoder=new StringDecoder(enc);this._encoding=enc}if(this._encoding!==enc)throw new Error("can't switch encodings");var out=this._decoder.write(value);if(fin){out+=this._decoder.end()}return out};module.exports=CipherBase},{inherits:492,"safe-buffer":787,stream:797,string_decoder:812}],276:[function(require,module,exports){(function(Buffer){(function(){var elliptic=require("elliptic");var BN=require("bn.js");module.exports=function createECDH(curve){return new ECDH(curve)};var aliases={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};aliases.p224=aliases.secp224r1;aliases.p256=aliases.secp256r1=aliases.prime256v1;aliases.p192=aliases.secp192r1=aliases.prime192v1;aliases.p384=aliases.secp384r1;aliases.p521=aliases.secp521r1;function ECDH(curve){this.curveType=aliases[curve];if(!this.curveType){this.curveType={name:curve}}this.curve=new elliptic.ec(this.curveType.name);this.keys=void 0}ECDH.prototype.generateKeys=function(enc,format){this.keys=this.curve.genKeyPair();return this.getPublicKey(enc,format)};ECDH.prototype.computeSecret=function(other,inenc,enc){inenc=inenc||"utf8";if(!Buffer.isBuffer(other)){other=new Buffer(other,inenc)}var otherPub=this.curve.keyFromPublic(other).getPublic();var out=otherPub.mul(this.keys.getPrivate()).getX();return formatReturnValue(out,enc,this.curveType.byteLength)};ECDH.prototype.getPublicKey=function(enc,format){var key=this.keys.getPublic(format==="compressed",true);if(format==="hybrid"){if(key[key.length-1]%2){key[0]=7}else{key[0]=6}}return formatReturnValue(key,enc)};ECDH.prototype.getPrivateKey=function(enc){return formatReturnValue(this.keys.getPrivate(),enc)};ECDH.prototype.setPublicKey=function(pub,enc){enc=enc||"utf8";if(!Buffer.isBuffer(pub)){pub=new Buffer(pub,enc)}this.keys._importPublic(pub);return this};ECDH.prototype.setPrivateKey=function(priv,enc){enc=enc||"utf8";if(!Buffer.isBuffer(priv)){priv=new Buffer(priv,enc)}var _priv=new BN(priv);_priv=_priv.toString(16);this.keys=this.curve.genKeyPair();this.keys._importPrivate(_priv);return this};function formatReturnValue(bn,enc,len){if(!Array.isArray(bn)){bn=bn.toArray()}var buf=new Buffer(bn);if(len&&buf.length<len){var zeros=new Buffer(len-buf.length);zeros.fill(0);buf=Buffer.concat([zeros,buf])}if(!enc){return buf}else{return buf.toString(enc)}}}).call(this)}).call(this,require("buffer").Buffer)},{"bn.js":277,buffer:269,elliptic:296}],277:[function(require,module,exports){arguments[4][180][0].apply(exports,arguments)},{buffer:226,dup:180}],278:[function(require,module,exports){"use strict";var inherits=require("inherits");var MD5=require("md5.js");var RIPEMD160=require("ripemd160");var sha=require("sha.js");var Base=require("cipher-base");function Hash(hash){Base.call(this,"digest");this._hash=hash}inherits(Hash,Base);Hash.prototype._update=function(data){this._hash.update(data)};Hash.prototype._final=function(){return this._hash.digest()};module.exports=function createHash(alg){alg=alg.toLowerCase();if(alg==="md5")return new MD5;if(alg==="rmd160"||alg==="ripemd160")return new RIPEMD160;return new Hash(sha(alg))}},{"cipher-base":275,inherits:492,"md5.js":500,ripemd160:561,"sha.js":790}],279:[function(require,module,exports){var MD5=require("md5.js");module.exports=function(buffer){return(new MD5).update(buffer).digest()}},{"md5.js":500}],280:[function(require,module,exports){"use strict";var inherits=require("inherits");var Legacy=require("./legacy");var Base=require("cipher-base");var Buffer=require("safe-buffer").Buffer;var md5=require("create-hash/md5");var RIPEMD160=require("ripemd160");var sha=require("sha.js");var ZEROS=Buffer.alloc(128);function Hmac(alg,key){Base.call(this,"digest");if(typeof key==="string"){key=Buffer.from(key)}var blocksize=alg==="sha512"||alg==="sha384"?128:64;this._alg=alg;this._key=key;if(key.length>blocksize){var hash=alg==="rmd160"?new RIPEMD160:sha(alg);key=hash.update(key).digest()}else if(key.length<blocksize){key=Buffer.concat([key,ZEROS],blocksize)}var ipad=this._ipad=Buffer.allocUnsafe(blocksize);var opad=this._opad=Buffer.allocUnsafe(blocksize);for(var i=0;i<blocksize;i++){ipad[i]=key[i]^54;opad[i]=key[i]^92}this._hash=alg==="rmd160"?new RIPEMD160:sha(alg);this._hash.update(ipad)}inherits(Hmac,Base);Hmac.prototype._update=function(data){this._hash.update(data)};Hmac.prototype._final=function(){var h=this._hash.digest();var hash=this._alg==="rmd160"?new RIPEMD160:sha(this._alg);return hash.update(this._opad).update(h).digest()};module.exports=function createHmac(alg,key){alg=alg.toLowerCase();if(alg==="rmd160"||alg==="ripemd160"){return new Hmac("rmd160",key)}if(alg==="md5"){return new Legacy(md5,key)}return new Hmac(alg,key)}},{"./legacy":281,"cipher-base":275,"create-hash/md5":279,inherits:492,ripemd160:561,"safe-buffer":787,"sha.js":790}],281:[function(require,module,exports){"use strict";var inherits=require("inherits");var Buffer=require("safe-buffer").Buffer;var Base=require("cipher-base");var ZEROS=Buffer.alloc(128);var blocksize=64;function Hmac(alg,key){Base.call(this,"digest");if(typeof key==="string"){key=Buffer.from(key)}this._alg=alg;this._key=key;if(key.length>blocksize){key=alg(key)}else if(key.length<blocksize){key=Buffer.concat([key,ZEROS],blocksize)}var ipad=this._ipad=Buffer.allocUnsafe(blocksize);var opad=this._opad=Buffer.allocUnsafe(blocksize);for(var i=0;i<blocksize;i++){ipad[i]=key[i]^54;opad[i]=key[i]^92}this._hash=[ipad]}inherits(Hmac,Base);Hmac.prototype._update=function(data){this._hash.push(data)};Hmac.prototype._final=function(){var h=this._alg(Buffer.concat(this._hash));return this._alg(Buffer.concat([this._opad,h]))};module.exports=Hmac},{"cipher-base":275,inherits:492,"safe-buffer":787}],282:[function(require,module,exports){"use strict";var global=typeof self!=="undefined"?self:void 0;var __self__=function(){function F(){this.fetch=false;this.DOMException=global.DOMException}F.prototype=global;return new F}();(function(self){var irrelevant=function(exports){var support={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};function isDataView(obj){return obj&&DataView.prototype.isPrototypeOf(obj)}if(support.arrayBuffer){var viewClasses=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];var isArrayBufferView=ArrayBuffer.isView||function(obj){return obj&&viewClasses.indexOf(Object.prototype.toString.call(obj))>-1}}function normalizeName(name){if(typeof name!=="string"){name=String(name)}if(/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(name)){throw new TypeError("Invalid character in header field name")}return name.toLowerCase()}function normalizeValue(value){if(typeof value!=="string"){value=String(value)}return value}function iteratorFor(items){var iterator={next:function(){var value=items.shift();return{done:value===undefined,value:value}}};if(support.iterable){iterator[Symbol.iterator]=function(){return iterator}}return iterator}function Headers(headers){this.map={};if(headers instanceof Headers){headers.forEach(function(value,name){this.append(name,value)},this)}else if(Array.isArray(headers)){headers.forEach(function(header){this.append(header[0],header[1])},this)}else if(headers){Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}}Headers.prototype.append=function(name,value){name=normalizeName(name);value=normalizeValue(value);var oldValue=this.map[name];this.map[name]=oldValue?oldValue+", "+value:value};Headers.prototype["delete"]=function(name){delete this.map[normalizeName(name)]};Headers.prototype.get=function(name){name=normalizeName(name);return this.has(name)?this.map[name]:null};Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))};Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=normalizeValue(value)};Headers.prototype.forEach=function(callback,thisArg){for(var name in this.map){if(this.map.hasOwnProperty(name)){callback.call(thisArg,this.map[name],name,this)}}};Headers.prototype.keys=function(){var items=[];this.forEach(function(value,name){items.push(name)});return iteratorFor(items)};Headers.prototype.values=function(){var items=[];this.forEach(function(value){items.push(value)});return iteratorFor(items)};Headers.prototype.entries=function(){var items=[];this.forEach(function(value,name){items.push([name,value])});return iteratorFor(items)};if(support.iterable){Headers.prototype[Symbol.iterator]=Headers.prototype.entries}function consumed(body){if(body.bodyUsed){return Promise.reject(new TypeError("Already read"))}body.bodyUsed=true}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)};reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader;var promise=fileReaderReady(reader);reader.readAsArrayBuffer(blob);return promise}function readBlobAsText(blob){var reader=new FileReader;var promise=fileReaderReady(reader);reader.readAsText(blob);return promise}function readArrayBufferAsText(buf){var view=new Uint8Array(buf);var chars=new Array(view.length);for(var i=0;i<view.length;i++){chars[i]=String.fromCharCode(view[i])}return chars.join("")}function bufferClone(buf){if(buf.slice){return buf.slice(0)}else{var view=new Uint8Array(buf.byteLength);view.set(new Uint8Array(buf));return view.buffer}}function Body(){this.bodyUsed=false;this._initBody=function(body){this._bodyInit=body;if(!body){this._bodyText=""}else if(typeof body==="string"){this._bodyText=body}else if(support.blob&&Blob.prototype.isPrototypeOf(body)){this._bodyBlob=body}else if(support.formData&&FormData.prototype.isPrototypeOf(body)){this._bodyFormData=body}else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)){this._bodyText=body.toString()}else if(support.arrayBuffer&&support.blob&&isDataView(body)){this._bodyArrayBuffer=bufferClone(body.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else if(support.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(body)||isArrayBufferView(body))){this._bodyArrayBuffer=bufferClone(body)}else{this._bodyText=body=Object.prototype.toString.call(body)}if(!this.headers.get("content-type")){if(typeof body==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};if(support.blob){this.blob=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){return consumed(this)||Promise.resolve(this._bodyArrayBuffer)}else{return this.blob().then(readBlobAsArrayBuffer)}}}this.text=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return readBlobAsText(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}};if(support.formData){this.formData=function(){return this.text().then(decode)}}this.json=function(){return this.text().then(JSON.parse)};return this}var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}function Request(input,options){options=options||{};var body=options.body;if(input instanceof Request){if(input.bodyUsed){throw new TypeError("Already read")}this.url=input.url;this.credentials=input.credentials;if(!options.headers){this.headers=new Headers(input.headers)}this.method=input.method;this.mode=input.mode;this.signal=input.signal;if(!body&&input._bodyInit!=null){body=input._bodyInit;input.bodyUsed=true}}else{this.url=String(input)}this.credentials=options.credentials||this.credentials||"same-origin";if(options.headers||!this.headers){this.headers=new Headers(options.headers)}this.method=normalizeMethod(options.method||this.method||"GET");this.mode=options.mode||this.mode||null;this.signal=options.signal||this.signal;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&body){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(body)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})};function decode(body){var form=new FormData;body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("=");var name=split.shift().replace(/\+/g," ");var value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}});return form}function parseHeaders(rawHeaders){var headers=new Headers;var preProcessedHeaders=rawHeaders.replace(/\r?\n[\t ]+/g," ");preProcessedHeaders.split(/\r?\n/).forEach(function(line){var parts=line.split(":");var key=parts.shift().trim();if(key){var value=parts.join(":").trim();headers.append(key,value)}});return headers}Body.call(Request.prototype);function Response(bodyInit,options){if(!options){options={}}this.type="default";this.status=options.status===undefined?200:options.status;this.ok=this.status>=200&&this.status<300;this.statusText="statusText"in options?options.statusText:"OK";this.headers=new Headers(options.headers);this.url=options.url||"";this._initBody(bodyInit)}Body.call(Response.prototype);Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})};Response.error=function(){var response=new Response(null,{status:0,statusText:""});response.type="error";return response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(redirectStatuses.indexOf(status)===-1){throw new RangeError("Invalid status code")}return new Response(null,{status:status,headers:{location:url}})};exports.DOMException=self.DOMException;try{new exports.DOMException}catch(err){exports.DOMException=function(message,name){this.message=message;this.name=name;var error=Error(message);this.stack=error.stack};exports.DOMException.prototype=Object.create(Error.prototype);exports.DOMException.prototype.constructor=exports.DOMException}function fetch(input,init){return new Promise(function(resolve,reject){var request=new Request(input,init);if(request.signal&&request.signal.aborted){return reject(new exports.DOMException("Aborted","AbortError"))}var xhr=new XMLHttpRequest;function abortXhr(){xhr.abort()}xhr.onload=function(){var options={status:xhr.status,statusText:xhr.statusText,headers:parseHeaders(xhr.getAllResponseHeaders()||"")};options.url="responseURL"in xhr?xhr.responseURL:options.headers.get("X-Request-URL");var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))};xhr.onerror=function(){reject(new TypeError("Network request failed"))};xhr.ontimeout=function(){reject(new TypeError("Network request failed"))};xhr.onabort=function(){reject(new exports.DOMException("Aborted","AbortError"))};xhr.open(request.method,request.url,true);if(request.credentials==="include"){xhr.withCredentials=true}else if(request.credentials==="omit"){xhr.withCredentials=false}if("responseType"in xhr&&support.blob){xhr.responseType="blob"}request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)});if(request.signal){request.signal.addEventListener("abort",abortXhr);xhr.onreadystatechange=function(){if(xhr.readyState===4){request.signal.removeEventListener("abort",abortXhr)}}}xhr.send(typeof request._bodyInit==="undefined"?null:request._bodyInit)})}fetch.polyfill=true;if(!self.fetch){self.fetch=fetch;self.Headers=Headers;self.Request=Request;self.Response=Response}exports.Headers=Headers;exports.Request=Request;exports.Response=Response;exports.fetch=fetch;Object.defineProperty(exports,"__esModule",{value:true});return exports}({})})(__self__);__self__.fetch.ponyfill=true;delete __self__.fetch.polyfill;var ctx=__self__;exports=ctx.fetch;exports.default=ctx.fetch;exports.fetch=ctx.fetch;exports.Headers=ctx.Headers;exports.Request=ctx.Request;exports.Response=ctx.Response;module.exports=exports},{}],283:[function(require,module,exports){"use strict";exports.randomBytes=exports.rng=exports.pseudoRandomBytes=exports.prng=require("randombytes");exports.createHash=exports.Hash=require("create-hash");exports.createHmac=exports.Hmac=require("create-hmac");var algos=require("browserify-sign/algos");var algoKeys=Object.keys(algos);var hashes=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(algoKeys);exports.getHashes=function(){return hashes};var p=require("pbkdf2");exports.pbkdf2=p.pbkdf2;exports.pbkdf2Sync=p.pbkdf2Sync;var aes=require("browserify-cipher");exports.Cipher=aes.Cipher;exports.createCipher=aes.createCipher;exports.Cipheriv=aes.Cipheriv;exports.createCipheriv=aes.createCipheriv;exports.Decipher=aes.Decipher;exports.createDecipher=aes.createDecipher;exports.Decipheriv=aes.Decipheriv;exports.createDecipheriv=aes.createDecipheriv;exports.getCiphers=aes.getCiphers;exports.listCiphers=aes.listCiphers;var dh=require("diffie-hellman");exports.DiffieHellmanGroup=dh.DiffieHellmanGroup;exports.createDiffieHellmanGroup=dh.createDiffieHellmanGroup;exports.getDiffieHellman=dh.getDiffieHellman;exports.createDiffieHellman=dh.createDiffieHellman;exports.DiffieHellman=dh.DiffieHellman;var sign=require("browserify-sign");exports.createSign=sign.createSign;exports.Sign=sign.Sign;exports.createVerify=sign.createVerify;exports.Verify=sign.Verify;exports.createECDH=require("create-ecdh");var publicEncrypt=require("public-encrypt");exports.publicEncrypt=publicEncrypt.publicEncrypt;exports.privateEncrypt=publicEncrypt.privateEncrypt;exports.publicDecrypt=publicEncrypt.publicDecrypt;exports.privateDecrypt=publicEncrypt.privateDecrypt;var rf=require("randomfill");exports.randomFill=rf.randomFill;exports.randomFillSync=rf.randomFillSync;exports.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))};exports.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":244,"browserify-sign":251,"browserify-sign/algos":248,"create-ecdh":276,"create-hash":278,"create-hmac":280,"diffie-hellman":291,pbkdf2:513,"public-encrypt":520,randombytes:527,randomfill:528}],284:[function(require,module,exports){!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,function(){"use strict";var t=1e3,e=6e4,n=36e5,r="millisecond",i="second",s="minute",u="hour",a="day",o="week",f="month",h="quarter",c="year",d="date",l="Invalid Date",$=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},g="en",D={};D[g]=M;var p=function(t){return t instanceof _},S=function t(e,n,r){var i;if(!e)return g;if("string"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split("-");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},w=function(t,e){if(p(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=v;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),l=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return O.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v="set"+(this.$u?"UTC":"");switch(h){case c:return r?l(1,0):l(31,11);case f:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+"Hours",0);case u:return $(v+"Minutes",1);case s:return $(v+"Seconds",2);case i:return $(v+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h="set"+(this.$u?"UTC":""),l=(n={},n[a]=h+"Date",n[d]=h+"Date",n[f]=h+"Month",n[c]=h+"FullYear",n[u]=h+"Hours",n[s]=h+"Minutes",n[i]=h+"Seconds",n[r]=h+"Milliseconds",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,l=this;r=Number(r);var $=O.p(h),y=function(t){var e=w(l);return O.w(e.date(e.date()+Math.round(t*r)),l)};if($===f)return this.set(f,this.$M+r);if($===c)return this.set(c,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=O.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,f=n.months,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},c=function(t){return O.s(s%12||12,t,"0")},d=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},$={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,"0"),MMM:h(n.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,"0"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,o,2),ddd:h(n.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,"0"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,"0"),s:String(this.$s),ss:O.s(this.$s,2,"0"),SSS:O.s(this.$ms,3,"0"),Z:i};return r.replace(y,function(t,e){return e||$[t]||i.replace(":","")})},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,v=this-M,g=O.m(this,M);return g=($={},$[c]=g/12,$[f]=g,$[h]=g/3,$[o]=(v-m)/6048e5,$[a]=(v-m)/864e5,$[u]=v/n,$[s]=v/e,$[i]=v/t,$)[y]||v,l?g:O.a(g)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),T=_.prototype;return w.prototype=T,[["$ms",r],["$s",i],["$m",s],["$H",u],["$W",a],["$M",f],["$y",c],["$D",d]].forEach(function(t){T[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=D[g],w.Ls=D,w.p={},w})},{}],285:[function(require,module,exports){"use strict";exports.utils=require("./des/utils");exports.Cipher=require("./des/cipher");exports.DES=require("./des/des");exports.CBC=require("./des/cbc");exports.EDE=require("./des/ede")},{"./des/cbc":286,"./des/cipher":287,"./des/des":288,"./des/ede":289,"./des/utils":290}],286:[function(require,module,exports){"use strict";var assert=require("minimalistic-assert");var inherits=require("inherits");var proto={};function CBCState(iv){assert.equal(iv.length,8,"Invalid IV length");this.iv=new Array(8);for(var i=0;i<this.iv.length;i++)this.iv[i]=iv[i]}function instantiate(Base){function CBC(options){Base.call(this,options);this._cbcInit()}inherits(CBC,Base);var keys=Object.keys(proto);for(var i=0;i<keys.length;i++){var key=keys[i];CBC.prototype[key]=proto[key]}CBC.create=function create(options){return new CBC(options)};return CBC}exports.instantiate=instantiate;proto._cbcInit=function _cbcInit(){var state=new CBCState(this.options.iv);this._cbcState=state};proto._update=function _update(inp,inOff,out,outOff){var state=this._cbcState;var superProto=this.constructor.super_.prototype;var iv=state.iv;if(this.type==="encrypt"){for(var i=0;i<this.blockSize;i++)iv[i]^=inp[inOff+i];superProto._update.call(this,iv,0,out,outOff);for(var i=0;i<this.blockSize;i++)iv[i]=out[outOff+i]}else{superProto._update.call(this,inp,inOff,out,outOff);for(var i=0;i<this.blockSize;i++)out[outOff+i]^=iv[i];for(var i=0;i<this.blockSize;i++)iv[i]=inp[inOff+i]}}},{inherits:492,"minimalistic-assert":503}],287:[function(require,module,exports){"use strict";var assert=require("minimalistic-assert");function Cipher(options){this.options=options;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=new Array(this.blockSize);this.bufferOff=0}module.exports=Cipher;Cipher.prototype._init=function _init(){};Cipher.prototype.update=function update(data){if(data.length===0)return[];if(this.type==="decrypt")return this._updateDecrypt(data);else return this._updateEncrypt(data)};Cipher.prototype._buffer=function _buffer(data,off){var min=Math.min(this.buffer.length-this.bufferOff,data.length-off);for(var i=0;i<min;i++)this.buffer[this.bufferOff+i]=data[off+i];this.bufferOff+=min;return min};Cipher.prototype._flushBuffer=function _flushBuffer(out,off){this._update(this.buffer,0,out,off);this.bufferOff=0;return this.blockSize};Cipher.prototype._updateEncrypt=function _updateEncrypt(data){var inputOff=0;var outputOff=0;var count=(this.bufferOff+data.length)/this.blockSize|0;var out=new Array(count*this.blockSize);if(this.bufferOff!==0){inputOff+=this._buffer(data,inputOff);if(this.bufferOff===this.buffer.length)outputOff+=this._flushBuffer(out,outputOff)}var max=data.length-(data.length-inputOff)%this.blockSize;for(;inputOff<max;inputOff+=this.blockSize){this._update(data,inputOff,out,outputOff);outputOff+=this.blockSize}for(;inputOff<data.length;inputOff++,this.bufferOff++)this.buffer[this.bufferOff]=data[inputOff];return out};Cipher.prototype._updateDecrypt=function _updateDecrypt(data){var inputOff=0;var outputOff=0;var count=Math.ceil((this.bufferOff+data.length)/this.blockSize)-1;var out=new Array(count*this.blockSize);for(;count>0;count--){inputOff+=this._buffer(data,inputOff);outputOff+=this._flushBuffer(out,outputOff)}inputOff+=this._buffer(data,inputOff);return out};Cipher.prototype.final=function final(buffer){var first;if(buffer)first=this.update(buffer);var last;if(this.type==="encrypt")last=this._finalEncrypt();else last=this._finalDecrypt();if(first)return first.concat(last);else return last};Cipher.prototype._pad=function _pad(buffer,off){if(off===0)return false;while(off<buffer.length)buffer[off++]=0;return true};Cipher.prototype._finalEncrypt=function _finalEncrypt(){if(!this._pad(this.buffer,this.bufferOff))return[];var out=new Array(this.blockSize);this._update(this.buffer,0,out,0);return out};Cipher.prototype._unpad=function _unpad(buffer){return buffer};Cipher.prototype._finalDecrypt=function _finalDecrypt(){assert.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var out=new Array(this.blockSize);this._flushBuffer(out,0);return this._unpad(out)}},{"minimalistic-assert":503}],288:[function(require,module,exports){"use strict";var assert=require("minimalistic-assert");var inherits=require("inherits");var utils=require("./utils");var Cipher=require("./cipher");function DESState(){this.tmp=new Array(2);this.keys=null}function DES(options){Cipher.call(this,options);var state=new DESState;this._desState=state;this.deriveKeys(state,options.key)}inherits(DES,Cipher);module.exports=DES;DES.create=function create(options){return new DES(options)};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES.prototype.deriveKeys=function deriveKeys(state,key){state.keys=new Array(16*2);assert.equal(key.length,this.blockSize,"Invalid key length");var kL=utils.readUInt32BE(key,0);var kR=utils.readUInt32BE(key,4);utils.pc1(kL,kR,state.tmp,0);kL=state.tmp[0];kR=state.tmp[1];for(var i=0;i<state.keys.length;i+=2){var shift=shiftTable[i>>>1];kL=utils.r28shl(kL,shift);kR=utils.r28shl(kR,shift);utils.pc2(kL,kR,state.keys,i)}};DES.prototype._update=function _update(inp,inOff,out,outOff){var state=this._desState;var l=utils.readUInt32BE(inp,inOff);var r=utils.readUInt32BE(inp,inOff+4);utils.ip(l,r,state.tmp,0);l=state.tmp[0];r=state.tmp[1];if(this.type==="encrypt")this._encrypt(state,l,r,state.tmp,0);else this._decrypt(state,l,r,state.tmp,0);l=state.tmp[0];r=state.tmp[1];utils.writeUInt32BE(out,l,outOff);utils.writeUInt32BE(out,r,outOff+4)};DES.prototype._pad=function _pad(buffer,off){var value=buffer.length-off;for(var i=off;i<buffer.length;i++)buffer[i]=value;return true};DES.prototype._unpad=function _unpad(buffer){var pad=buffer[buffer.length-1];for(var i=buffer.length-pad;i<buffer.length;i++)assert.equal(buffer[i],pad);return buffer.slice(0,buffer.length-pad)};DES.prototype._encrypt=function _encrypt(state,lStart,rStart,out,off){var l=lStart;var r=rStart;for(var i=0;i<state.keys.length;i+=2){var keyL=state.keys[i];var keyR=state.keys[i+1];utils.expand(r,state.tmp,0);keyL^=state.tmp[0];keyR^=state.tmp[1];var s=utils.substitute(keyL,keyR);var f=utils.permute(s);var t=r;r=(l^f)>>>0;l=t}utils.rip(r,l,out,off)};DES.prototype._decrypt=function _decrypt(state,lStart,rStart,out,off){var l=rStart;var r=lStart;for(var i=state.keys.length-2;i>=0;i-=2){var keyL=state.keys[i];var keyR=state.keys[i+1];utils.expand(l,state.tmp,0);keyL^=state.tmp[0];keyR^=state.tmp[1];var s=utils.substitute(keyL,keyR);var f=utils.permute(s);var t=l;l=(r^f)>>>0;r=t}utils.rip(l,r,out,off)}},{"./cipher":287,"./utils":290,inherits:492,"minimalistic-assert":503}],289:[function(require,module,exports){"use strict";var assert=require("minimalistic-assert");var inherits=require("inherits");var Cipher=require("./cipher");var DES=require("./des");function EDEState(type,key){assert.equal(key.length,24,"Invalid key length");var k1=key.slice(0,8);var k2=key.slice(8,16);var k3=key.slice(16,24);if(type==="encrypt"){this.ciphers=[DES.create({type:"encrypt",key:k1}),DES.create({type:"decrypt",key:k2}),DES.create({type:"encrypt",key:k3})]}else{this.ciphers=[DES.create({type:"decrypt",key:k3}),DES.create({type:"encrypt",key:k2}),DES.create({type:"decrypt",key:k1})]}}function EDE(options){Cipher.call(this,options);var state=new EDEState(this.type,this.options.key);this._edeState=state}inherits(EDE,Cipher);module.exports=EDE;EDE.create=function create(options){return new EDE(options)};EDE.prototype._update=function _update(inp,inOff,out,outOff){var state=this._edeState;state.ciphers[0]._update(inp,inOff,out,outOff);state.ciphers[1]._update(out,outOff,out,outOff);state.ciphers[2]._update(out,outOff,out,outOff)};EDE.prototype._pad=DES.prototype._pad;EDE.prototype._unpad=DES.prototype._unpad},{"./cipher":287,"./des":288,inherits:492,"minimalistic-assert":503}],290:[function(require,module,exports){"use strict";exports.readUInt32BE=function readUInt32BE(bytes,off){var res=bytes[0+off]<<24|bytes[1+off]<<16|bytes[2+off]<<8|bytes[3+off];return res>>>0};exports.writeUInt32BE=function writeUInt32BE(bytes,value,off){bytes[0+off]=value>>>24;bytes[1+off]=value>>>16&255;bytes[2+off]=value>>>8&255;bytes[3+off]=value&255};exports.ip=function ip(inL,inR,out,off){var outL=0;var outR=0;for(var i=6;i>=0;i-=2){for(var j=0;j<=24;j+=8){outL<<=1;outL|=inR>>>j+i&1}for(var j=0;j<=24;j+=8){outL<<=1;outL|=inL>>>j+i&1}}for(var i=6;i>=0;i-=2){for(var j=1;j<=25;j+=8){outR<<=1;outR|=inR>>>j+i&1}for(var j=1;j<=25;j+=8){outR<<=1;outR|=inL>>>j+i&1}}out[off+0]=outL>>>0;out[off+1]=outR>>>0};exports.rip=function rip(inL,inR,out,off){var outL=0;var outR=0;for(var i=0;i<4;i++){for(var j=24;j>=0;j-=8){outL<<=1;outL|=inR>>>j+i&1;outL<<=1;outL|=inL>>>j+i&1}}for(var i=4;i<8;i++){for(var j=24;j>=0;j-=8){outR<<=1;outR|=inR>>>j+i&1;outR<<=1;outR|=inL>>>j+i&1}}out[off+0]=outL>>>0;out[off+1]=outR>>>0};exports.pc1=function pc1(inL,inR,out,off){var outL=0;var outR=0;for(var i=7;i>=5;i--){for(var j=0;j<=24;j+=8){outL<<=1;outL|=inR>>j+i&1}for(var j=0;j<=24;j+=8){outL<<=1;outL|=inL>>j+i&1}}for(var j=0;j<=24;j+=8){outL<<=1;outL|=inR>>j+i&1}for(var i=1;i<=3;i++){for(var j=0;j<=24;j+=8){outR<<=1;outR|=inR>>j+i&1}for(var j=0;j<=24;j+=8){outR<<=1;outR|=inL>>j+i&1}}for(var j=0;j<=24;j+=8){outR<<=1;outR|=inL>>j+i&1}out[off+0]=outL>>>0;out[off+1]=outR>>>0};exports.r28shl=function r28shl(num,shift){return num<<shift&268435455|num>>>28-shift};var pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];exports.pc2=function pc2(inL,inR,out,off){var outL=0;var outR=0;var len=pc2table.length>>>1;for(var i=0;i<len;i++){outL<<=1;outL|=inL>>>pc2table[i]&1}for(var i=len;i<pc2table.length;i++){outR<<=1;outR|=inR>>>pc2table[i]&1}out[off+0]=outL>>>0;out[off+1]=outR>>>0};exports.expand=function expand(r,out,off){var outL=0;var outR=0;outL=(r&1)<<5|r>>>27;for(var i=23;i>=15;i-=4){outL<<=6;outL|=r>>>i&63}for(var i=11;i>=3;i-=4){outR|=r>>>i&63;outR<<=6}outR|=(r&31)<<1|r>>>31;out[off+0]=outL>>>0;out[off+1]=outR>>>0};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];exports.substitute=function substitute(inL,inR){var out=0;for(var i=0;i<4;i++){var b=inL>>>18-i*6&63;var sb=sTable[i*64+b];out<<=4;out|=sb}for(var i=0;i<4;i++){var b=inR>>>18-i*6&63;var sb=sTable[4*64+i*64+b];out<<=4;out|=sb}return out>>>0};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];exports.permute=function permute(num){var out=0;for(var i=0;i<permuteTable.length;i++){out<<=1;out|=num>>>permuteTable[i]&1}return out>>>0};exports.padSplit=function padSplit(num,size,group){var str=num.toString(2);while(str.length<size)str="0"+str;var out=[];for(var i=0;i<size;i+=group)out.push(str.slice(i,i+group));return out.join(" ")}},{}],291:[function(require,module,exports){(function(Buffer){(function(){var generatePrime=require("./lib/generatePrime");var primes=require("./lib/primes.json");var DH=require("./lib/dh");function getDiffieHellman(mod){var prime=new Buffer(primes[mod].prime,"hex");var gen=new Buffer(primes[mod].gen,"hex");return new DH(prime,gen)}var ENCODINGS={binary:true,hex:true,base64:true};function createDiffieHellman(prime,enc,generator,genc){if(Buffer.isBuffer(enc)||ENCODINGS[enc]===undefined){return createDiffieHellman(prime,"binary",enc,generator)}enc=enc||"binary";genc=genc||"binary";generator=generator||new Buffer([2]);if(!Buffer.isBuffer(generator)){generator=new Buffer(generator,genc)}if(typeof prime==="number"){return new DH(generatePrime(prime,generator),generator,true)}if(!Buffer.isBuffer(prime)){prime=new Buffer(prime,enc)}return new DH(prime,generator,true)}exports.DiffieHellmanGroup=exports.createDiffieHellmanGroup=exports.getDiffieHellman=getDiffieHellman;exports.createDiffieHellman=exports.DiffieHellman=createDiffieHellman}).call(this)}).call(this,require("buffer").Buffer)},{"./lib/dh":292,"./lib/generatePrime":293,"./lib/primes.json":294,buffer:269}],292:[function(require,module,exports){(function(Buffer){(function(){var BN=require("bn.js");var MillerRabin=require("miller-rabin");var millerRabin=new MillerRabin;var TWENTYFOUR=new BN(24);var ELEVEN=new BN(11);var TEN=new BN(10);var THREE=new BN(3);var SEVEN=new BN(7);var primes=require("./generatePrime");var randomBytes=require("randombytes");module.exports=DH;function setPublicKey(pub,enc){enc=enc||"utf8";if(!Buffer.isBuffer(pub)){pub=new Buffer(pub,enc)}this._pub=new BN(pub);return this}function setPrivateKey(priv,enc){enc=enc||"utf8";if(!Buffer.isBuffer(priv)){priv=new Buffer(priv,enc)}this._priv=new BN(priv);return this}var primeCache={};function checkPrime(prime,generator){var gen=generator.toString("hex");var hex=[gen,prime.toString(16)].join("_");if(hex in primeCache){return primeCache[hex]}var error=0;if(prime.isEven()||!primes.simpleSieve||!primes.fermatTest(prime)||!millerRabin.test(prime)){error+=1;if(gen==="02"||gen==="05"){error+=8}else{error+=4}primeCache[hex]=error;return error}if(!millerRabin.test(prime.shrn(1))){error+=2}var rem;switch(gen){case"02":if(prime.mod(TWENTYFOUR).cmp(ELEVEN)){error+=8}break;case"05":rem=prime.mod(TEN);if(rem.cmp(THREE)&&rem.cmp(SEVEN)){error+=8}break;default:error+=4}primeCache[hex]=error;return error}function DH(prime,generator,malleable){this.setGenerator(generator);this.__prime=new BN(prime);this._prime=BN.mont(this.__prime);this._primeLen=prime.length;this._pub=undefined;this._priv=undefined;this._primeCode=undefined;if(malleable){this.setPublicKey=setPublicKey;this.setPrivateKey=setPrivateKey}else{this._primeCode=8}}Object.defineProperty(DH.prototype,"verifyError",{enumerable:true,get:function(){if(typeof this._primeCode!=="number"){this._primeCode=checkPrime(this.__prime,this.__gen)}return this._primeCode}});DH.prototype.generateKeys=function(){if(!this._priv){this._priv=new BN(randomBytes(this._primeLen))}this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed();return this.getPublicKey()};DH.prototype.computeSecret=function(other){other=new BN(other);other=other.toRed(this._prime);var secret=other.redPow(this._priv).fromRed();var out=new Buffer(secret.toArray());var prime=this.getPrime();if(out.length<prime.length){var front=new Buffer(prime.length-out.length);front.fill(0);out=Buffer.concat([front,out])}return out};DH.prototype.getPublicKey=function getPublicKey(enc){return formatReturnValue(this._pub,enc)};DH.prototype.getPrivateKey=function getPrivateKey(enc){return formatReturnValue(this._priv,enc)};DH.prototype.getPrime=function(enc){return formatReturnValue(this.__prime,enc)};DH.prototype.getGenerator=function(enc){return formatReturnValue(this._gen,enc)};DH.prototype.setGenerator=function(gen,enc){enc=enc||"utf8";if(!Buffer.isBuffer(gen)){gen=new Buffer(gen,enc)}this.__gen=gen;this._gen=new BN(gen);return this};function formatReturnValue(bn,enc){var buf=new Buffer(bn.toArray());if(!enc){return buf}else{return buf.toString(enc)}}}).call(this)}).call(this,require("buffer").Buffer)},{"./generatePrime":293,"bn.js":295,buffer:269,"miller-rabin":501,randombytes:527}],293:[function(require,module,exports){var randomBytes=require("randombytes");module.exports=findPrime;findPrime.simpleSieve=simpleSieve;findPrime.fermatTest=fermatTest;var BN=require("bn.js");var TWENTYFOUR=new BN(24);var MillerRabin=require("miller-rabin");var millerRabin=new MillerRabin;var ONE=new BN(1);var TWO=new BN(2);var FIVE=new BN(5);var SIXTEEN=new BN(16);var EIGHT=new BN(8);var TEN=new BN(10);var THREE=new BN(3);var SEVEN=new BN(7);var ELEVEN=new BN(11);var FOUR=new BN(4);var TWELVE=new BN(12);var primes=null;function _getPrimes(){if(primes!==null)return primes;var limit=1048576;var res=[];res[0]=2;for(var i=1,k=3;k<limit;k+=2){var sqrt=Math.ceil(Math.sqrt(k));for(var j=0;j<i&&res[j]<=sqrt;j++)if(k%res[j]===0)break;if(i!==j&&res[j]<=sqrt)continue;res[i++]=k}primes=res;return res}function simpleSieve(p){var primes=_getPrimes();for(var i=0;i<primes.length;i++)if(p.modn(primes[i])===0){if(p.cmpn(primes[i])===0){return true}else{return false}}return true}function fermatTest(p){var red=BN.mont(p);return TWO.toRed(red).redPow(p.subn(1)).fromRed().cmpn(1)===0}function findPrime(bits,gen){if(bits<16){if(gen===2||gen===5){return new BN([140,123])}else{return new BN([140,39])}}gen=new BN(gen);var num,n2;while(true){num=new BN(randomBytes(Math.ceil(bits/8)));while(num.bitLength()>bits){num.ishrn(1)}if(num.isEven()){num.iadd(ONE)}if(!num.testn(1)){num.iadd(TWO)}if(!gen.cmp(TWO)){while(num.mod(TWENTYFOUR).cmp(ELEVEN)){num.iadd(FOUR)}}else if(!gen.cmp(FIVE)){while(num.mod(TEN).cmp(THREE)){num.iadd(FOUR)}}n2=num.shrn(1);if(simpleSieve(n2)&&simpleSieve(num)&&fermatTest(n2)&&fermatTest(num)&&millerRabin.test(n2)&&millerRabin.test(num)){return num}}}},{"bn.js":295,"miller-rabin":501,randombytes:527}],294:[function(require,module,exports){module.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],295:[function(require,module,exports){arguments[4][180][0].apply(exports,arguments)},{buffer:226,dup:180}],296:[function(require,module,exports){"use strict";var elliptic=exports;elliptic.version=require("../package.json").version;elliptic.utils=require("./elliptic/utils");elliptic.rand=require("brorand");elliptic.curve=require("./elliptic/curve");elliptic.curves=require("./elliptic/curves");elliptic.ec=require("./elliptic/ec");elliptic.eddsa=require("./elliptic/eddsa")},{"../package.json":312,"./elliptic/curve":299,"./elliptic/curves":302,"./elliptic/ec":303,"./elliptic/eddsa":306,"./elliptic/utils":310,brorand:225}],297:[function(require,module,exports){"use strict";var BN=require("bn.js");var utils=require("../utils");var getNAF=utils.getNAF;var getJSF=utils.getJSF;var assert=utils.assert;function BaseCurve(type,conf){this.type=type;this.p=new BN(conf.p,16);this.red=conf.prime?BN.red(conf.prime):BN.mont(this.p);this.zero=new BN(0).toRed(this.red);this.one=new BN(1).toRed(this.red);this.two=new BN(2).toRed(this.red);this.n=conf.n&&new BN(conf.n,16);this.g=conf.g&&this.pointFromJSON(conf.g,conf.gRed);this._wnafT1=new Array(4);this._wnafT2=new Array(4);this._wnafT3=new Array(4);this._wnafT4=new Array(4);this._bitLength=this.n?this.n.bitLength():0;var adjustCount=this.n&&this.p.div(this.n);if(!adjustCount||adjustCount.cmpn(100)>0){this.redN=null}else{this._maxwellTrick=true;this.redN=this.n.toRed(this.red)}}module.exports=BaseCurve;BaseCurve.prototype.point=function point(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function validate(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function _fixedNafMul(p,k){assert(p.precomputed);var doubles=p._getDoubles();var naf=getNAF(k,1,this._bitLength);var I=(1<<doubles.step+1)-(doubles.step%2===0?2:1);I/=3;var repr=[];var j;var nafW;for(j=0;j<naf.length;j+=doubles.step){nafW=0;for(var l=j+doubles.step-1;l>=j;l--)nafW=(nafW<<1)+naf[l];repr.push(nafW)}var a=this.jpoint(null,null,null);var b=this.jpoint(null,null,null);for(var i=I;i>0;i--){for(j=0;j<repr.length;j++){nafW=repr[j];if(nafW===i)b=b.mixedAdd(doubles.points[j]);else if(nafW===-i)b=b.mixedAdd(doubles.points[j].neg())}a=a.add(b)}return a.toP()};BaseCurve.prototype._wnafMul=function _wnafMul(p,k){var w=4;var nafPoints=p._getNAFPoints(w);w=nafPoints.wnd;var wnd=nafPoints.points;var naf=getNAF(k,w,this._bitLength);var acc=this.jpoint(null,null,null);for(var i=naf.length-1;i>=0;i--){for(var l=0;i>=0&&naf[i]===0;i--)l++;if(i>=0)l++;acc=acc.dblp(l);if(i<0)break;var z=naf[i];assert(z!==0);if(p.type==="affine"){if(z>0)acc=acc.mixedAdd(wnd[z-1>>1]);else acc=acc.mixedAdd(wnd[-z-1>>1].neg())}else{if(z>0)acc=acc.add(wnd[z-1>>1]);else acc=acc.add(wnd[-z-1>>1].neg())}}return p.type==="affine"?acc.toP():acc};BaseCurve.prototype._wnafMulAdd=function _wnafMulAdd(defW,points,coeffs,len,jacobianResult){var wndWidth=this._wnafT1;var wnd=this._wnafT2;var naf=this._wnafT3;var max=0;var i;var j;var p;for(i=0;i<len;i++){p=points[i];var nafPoints=p._getNAFPoints(defW);wndWidth[i]=nafPoints.wnd;wnd[i]=nafPoints.points}for(i=len-1;i>=1;i-=2){var a=i-1;var b=i;if(wndWidth[a]!==1||wndWidth[b]!==1){naf[a]=getNAF(coeffs[a],wndWidth[a],this._bitLength);naf[b]=getNAF(coeffs[b],wndWidth[b],this._bitLength);max=Math.max(naf[a].length,max);max=Math.max(naf[b].length,max);continue}var comb=[points[a],null,null,points[b]];if(points[a].y.cmp(points[b].y)===0){comb[1]=points[a].add(points[b]);comb[2]=points[a].toJ().mixedAdd(points[b].neg())}else if(points[a].y.cmp(points[b].y.redNeg())===0){comb[1]=points[a].toJ().mixedAdd(points[b]);comb[2]=points[a].add(points[b].neg())}else{comb[1]=points[a].toJ().mixedAdd(points[b]);comb[2]=points[a].toJ().mixedAdd(points[b].neg())}var index=[-3,-1,-5,-7,0,7,5,1,3];var jsf=getJSF(coeffs[a],coeffs[b]);max=Math.max(jsf[0].length,max);naf[a]=new Array(max);naf[b]=new Array(max);for(j=0;j<max;j++){var ja=jsf[0][j]|0;var jb=jsf[1][j]|0;naf[a][j]=index[(ja+1)*3+(jb+1)];naf[b][j]=0;wnd[a]=comb}}var acc=this.jpoint(null,null,null);var tmp=this._wnafT4;for(i=max;i>=0;i--){var k=0;while(i>=0){var zero=true;for(j=0;j<len;j++){tmp[j]=naf[j][i]|0;if(tmp[j]!==0)zero=false}if(!zero)break;k++;i--}if(i>=0)k++;acc=acc.dblp(k);if(i<0)break;for(j=0;j<len;j++){var z=tmp[j];p;if(z===0)continue;else if(z>0)p=wnd[j][z-1>>1];else if(z<0)p=wnd[j][-z-1>>1].neg();if(p.type==="affine")acc=acc.mixedAdd(p);else acc=acc.add(p)}}for(i=0;i<len;i++)wnd[i]=null;if(jacobianResult)return acc;else return acc.toP()};function BasePoint(curve,type){this.curve=curve;this.type=type;this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function eq(){throw new Error("Not implemented")};BasePoint.prototype.validate=function validate(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function decodePoint(bytes,enc){bytes=utils.toArray(bytes,enc);var len=this.p.byteLength();if((bytes[0]===4||bytes[0]===6||bytes[0]===7)&&bytes.length-1===2*len){if(bytes[0]===6)assert(bytes[bytes.length-1]%2===0);else if(bytes[0]===7)assert(bytes[bytes.length-1]%2===1);var res=this.point(bytes.slice(1,1+len),bytes.slice(1+len,1+2*len));return res}else if((bytes[0]===2||bytes[0]===3)&&bytes.length-1===len){return this.pointFromX(bytes.slice(1,1+len),bytes[0]===3)}throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function encodeCompressed(enc){return this.encode(enc,true)};BasePoint.prototype._encode=function _encode(compact){var len=this.curve.p.byteLength();var x=this.getX().toArray("be",len);if(compact)return[this.getY().isEven()?2:3].concat(x);return[4].concat(x,this.getY().toArray("be",len))};BasePoint.prototype.encode=function encode(enc,compact){return utils.encode(this._encode(compact),enc)};BasePoint.prototype.precompute=function precompute(power){if(this.precomputed)return this;var precomputed={doubles:null,naf:null,beta:null};precomputed.naf=this._getNAFPoints(8);precomputed.doubles=this._getDoubles(4,power);precomputed.beta=this._getBeta();this.precomputed=precomputed;return this};BasePoint.prototype._hasDoubles=function _hasDoubles(k){if(!this.precomputed)return false;var doubles=this.precomputed.doubles;if(!doubles)return false;return doubles.points.length>=Math.ceil((k.bitLength()+1)/doubles.step)};BasePoint.prototype._getDoubles=function _getDoubles(step,power){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var doubles=[this];var acc=this;for(var i=0;i<power;i+=step){for(var j=0;j<step;j++)acc=acc.dbl();doubles.push(acc)}return{step:step,points:doubles}};BasePoint.prototype._getNAFPoints=function _getNAFPoints(wnd){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var res=[this];var max=(1<<wnd)-1;var dbl=max===1?null:this.dbl();for(var i=1;i<max;i++)res[i]=res[i-1].add(dbl);return{wnd:wnd,points:res}};BasePoint.prototype._getBeta=function _getBeta(){return null};BasePoint.prototype.dblp=function dblp(k){var r=this;for(var i=0;i<k;i++)r=r.dbl();return r}},{"../utils":310,"bn.js":311}],298:[function(require,module,exports){"use strict";var utils=require("../utils");var BN=require("bn.js");var inherits=require("inherits");var Base=require("./base");var assert=utils.assert;function EdwardsCurve(conf){this.twisted=(conf.a|0)!==1;this.mOneA=this.twisted&&(conf.a|0)===-1;this.extended=this.mOneA;Base.call(this,"edwards",conf);this.a=new BN(conf.a,16).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=new BN(conf.c,16).toRed(this.red);this.c2=this.c.redSqr();this.d=new BN(conf.d,16).toRed(this.red);this.dd=this.d.redAdd(this.d);assert(!this.twisted||this.c.fromRed().cmpn(1)===0);this.oneC=(conf.c|0)===1}inherits(EdwardsCurve,Base);module.exports=EdwardsCurve;EdwardsCurve.prototype._mulA=function _mulA(num){if(this.mOneA)return num.redNeg();else return this.a.redMul(num)};EdwardsCurve.prototype._mulC=function _mulC(num){if(this.oneC)return num;else return this.c.redMul(num)};EdwardsCurve.prototype.jpoint=function jpoint(x,y,z,t){return this.point(x,y,z,t)};EdwardsCurve.prototype.pointFromX=function pointFromX(x,odd){x=new BN(x,16);if(!x.red)x=x.toRed(this.red);var x2=x.redSqr();var rhs=this.c2.redSub(this.a.redMul(x2));var lhs=this.one.redSub(this.c2.redMul(this.d).redMul(x2));var y2=rhs.redMul(lhs.redInvm());var y=y2.redSqrt();if(y.redSqr().redSub(y2).cmp(this.zero)!==0)throw new Error("invalid point");var isOdd=y.fromRed().isOdd();if(odd&&!isOdd||!odd&&isOdd)y=y.redNeg();return this.point(x,y)};EdwardsCurve.prototype.pointFromY=function pointFromY(y,odd){y=new BN(y,16);if(!y.red)y=y.toRed(this.red);var y2=y.redSqr();var lhs=y2.redSub(this.c2);var rhs=y2.redMul(this.d).redMul(this.c2).redSub(this.a);var x2=lhs.redMul(rhs.redInvm());if(x2.cmp(this.zero)===0){if(odd)throw new Error("invalid point");else return this.point(this.zero,y)}var x=x2.redSqrt();if(x.redSqr().redSub(x2).cmp(this.zero)!==0)throw new Error("invalid point");if(x.fromRed().isOdd()!==odd)x=x.redNeg();return this.point(x,y)};EdwardsCurve.prototype.validate=function validate(point){if(point.isInfinity())return true;point.normalize();var x2=point.x.redSqr();var y2=point.y.redSqr();var lhs=x2.redMul(this.a).redAdd(y2);var rhs=this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));return lhs.cmp(rhs)===0};function Point(curve,x,y,z,t){Base.BasePoint.call(this,curve,"projective");if(x===null&&y===null&&z===null){this.x=this.curve.zero;this.y=this.curve.one;this.z=this.curve.one;this.t=this.curve.zero;this.zOne=true}else{this.x=new BN(x,16);this.y=new BN(y,16);this.z=z?new BN(z,16):this.curve.one;this.t=t&&new BN(t,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);if(this.t&&!this.t.red)this.t=this.t.toRed(this.curve.red);this.zOne=this.z===this.curve.one;if(this.curve.extended&&!this.t){this.t=this.x.redMul(this.y);if(!this.zOne)this.t=this.t.redMul(this.z.redInvm())}}}inherits(Point,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function pointFromJSON(obj){return Point.fromJSON(this,obj)};EdwardsCurve.prototype.point=function point(x,y,z,t){return new Point(this,x,y,z,t)};Point.fromJSON=function fromJSON(curve,obj){return new Point(curve,obj[0],obj[1],obj[2])};Point.prototype.inspect=function inspect(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function isInfinity(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Point.prototype._extDbl=function _extDbl(){var a=this.x.redSqr();var b=this.y.redSqr();var c=this.z.redSqr();c=c.redIAdd(c);var d=this.curve._mulA(a);var e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(b);var g=d.redAdd(b);var f=g.redSub(c);var h=d.redSub(b);var nx=e.redMul(f);var ny=g.redMul(h);var nt=e.redMul(h);var nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt)};Point.prototype._projDbl=function _projDbl(){var b=this.x.redAdd(this.y).redSqr();var c=this.x.redSqr();var d=this.y.redSqr();var nx;var ny;var nz;var e;var h;var j;if(this.curve.twisted){e=this.curve._mulA(c);var f=e.redAdd(d);if(this.zOne){nx=b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two));ny=f.redMul(e.redSub(d));nz=f.redSqr().redSub(f).redSub(f)}else{h=this.z.redSqr();j=f.redSub(h).redISub(h);nx=b.redSub(c).redISub(d).redMul(j);ny=f.redMul(e.redSub(d));nz=f.redMul(j)}}else{e=c.redAdd(d);h=this.curve._mulC(this.z).redSqr();j=e.redSub(h).redSub(h);nx=this.curve._mulC(b.redISub(e)).redMul(j);ny=this.curve._mulC(e).redMul(c.redISub(d));nz=e.redMul(j)}return this.curve.point(nx,ny,nz)};Point.prototype.dbl=function dbl(){if(this.isInfinity())return this;if(this.curve.extended)return this._extDbl();else return this._projDbl()};Point.prototype._extAdd=function _extAdd(p){var a=this.y.redSub(this.x).redMul(p.y.redSub(p.x));var b=this.y.redAdd(this.x).redMul(p.y.redAdd(p.x));var c=this.t.redMul(this.curve.dd).redMul(p.t);var d=this.z.redMul(p.z.redAdd(p.z));var e=b.redSub(a);var f=d.redSub(c);var g=d.redAdd(c);var h=b.redAdd(a);var nx=e.redMul(f);var ny=g.redMul(h);var nt=e.redMul(h);var nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt)};Point.prototype._projAdd=function _projAdd(p){var a=this.z.redMul(p.z);var b=a.redSqr();var c=this.x.redMul(p.x);var d=this.y.redMul(p.y);var e=this.curve.d.redMul(c).redMul(d);var f=b.redSub(e);var g=b.redAdd(e);var tmp=this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(c).redISub(d);var nx=a.redMul(f).redMul(tmp);var ny;var nz;if(this.curve.twisted){ny=a.redMul(g).redMul(d.redSub(this.curve._mulA(c)));nz=f.redMul(g)}else{ny=a.redMul(g).redMul(d.redSub(c));nz=this.curve._mulC(f).redMul(g)}return this.curve.point(nx,ny,nz)};Point.prototype.add=function add(p){if(this.isInfinity())return p;if(p.isInfinity())return this;if(this.curve.extended)return this._extAdd(p);else return this._projAdd(p)};Point.prototype.mul=function mul(k){if(this._hasDoubles(k))return this.curve._fixedNafMul(this,k);else return this.curve._wnafMul(this,k)};Point.prototype.mulAdd=function mulAdd(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2,false)};Point.prototype.jmulAdd=function jmulAdd(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2,true)};Point.prototype.normalize=function normalize(){if(this.zOne)return this;var zi=this.z.redInvm();this.x=this.x.redMul(zi);this.y=this.y.redMul(zi);if(this.t)this.t=this.t.redMul(zi);this.z=this.curve.one;this.zOne=true;return this};Point.prototype.neg=function neg(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point.prototype.getX=function getX(){this.normalize();return this.x.fromRed()};Point.prototype.getY=function getY(){this.normalize();return this.y.fromRed()};Point.prototype.eq=function eq(other){return this===other||this.getX().cmp(other.getX())===0&&this.getY().cmp(other.getY())===0};Point.prototype.eqXToP=function eqXToP(x){var rx=x.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(rx)===0)return true;var xc=x.clone();var t=this.curve.redN.redMul(this.z);for(;;){xc.iadd(this.curve.n);if(xc.cmp(this.curve.p)>=0)return false;rx.redIAdd(t);if(this.x.cmp(rx)===0)return true}};Point.prototype.toP=Point.prototype.normalize;Point.prototype.mixedAdd=Point.prototype.add},{"../utils":310,"./base":297,"bn.js":311,inherits:492}],299:[function(require,module,exports){"use strict";var curve=exports;curve.base=require("./base");curve.short=require("./short");curve.mont=require("./mont");curve.edwards=require("./edwards")},{"./base":297,"./edwards":298,"./mont":300,"./short":301}],300:[function(require,module,exports){"use strict";var BN=require("bn.js");var inherits=require("inherits");var Base=require("./base");var utils=require("../utils");function MontCurve(conf){Base.call(this,"mont",conf);this.a=new BN(conf.a,16).toRed(this.red);this.b=new BN(conf.b,16).toRed(this.red);this.i4=new BN(4).toRed(this.red).redInvm();this.two=new BN(2).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits(MontCurve,Base);module.exports=MontCurve;MontCurve.prototype.validate=function validate(point){var x=point.normalize().x;var x2=x.redSqr();var rhs=x2.redMul(x).redAdd(x2.redMul(this.a)).redAdd(x);var y=rhs.redSqrt();return y.redSqr().cmp(rhs)===0};function Point(curve,x,z){Base.BasePoint.call(this,curve,"projective");if(x===null&&z===null){this.x=this.curve.one;this.z=this.curve.zero}else{this.x=new BN(x,16);this.z=new BN(z,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red)}}inherits(Point,Base.BasePoint);MontCurve.prototype.decodePoint=function decodePoint(bytes,enc){return this.point(utils.toArray(bytes,enc),1)};MontCurve.prototype.point=function point(x,z){return new Point(this,x,z)};MontCurve.prototype.pointFromJSON=function pointFromJSON(obj){return Point.fromJSON(this,obj)};Point.prototype.precompute=function precompute(){};Point.prototype._encode=function _encode(){return this.getX().toArray("be",this.curve.p.byteLength())};Point.fromJSON=function fromJSON(curve,obj){return new Point(curve,obj[0],obj[1]||curve.one)};Point.prototype.inspect=function inspect(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function isInfinity(){return this.z.cmpn(0)===0};Point.prototype.dbl=function dbl(){var a=this.x.redAdd(this.z);var aa=a.redSqr();var b=this.x.redSub(this.z);var bb=b.redSqr();var c=aa.redSub(bb);var nx=aa.redMul(bb);var nz=c.redMul(bb.redAdd(this.curve.a24.redMul(c)));return this.curve.point(nx,nz)};Point.prototype.add=function add(){throw new Error("Not supported on Montgomery curve")};Point.prototype.diffAdd=function diffAdd(p,diff){var a=this.x.redAdd(this.z);var b=this.x.redSub(this.z);var c=p.x.redAdd(p.z);var d=p.x.redSub(p.z);var da=d.redMul(a);var cb=c.redMul(b);var nx=diff.z.redMul(da.redAdd(cb).redSqr());var nz=diff.x.redMul(da.redISub(cb).redSqr());return this.curve.point(nx,nz)};Point.prototype.mul=function mul(k){var t=k.clone();var a=this;var b=this.curve.point(null,null);var c=this;for(var bits=[];t.cmpn(0)!==0;t.iushrn(1))bits.push(t.andln(1));for(var i=bits.length-1;i>=0;i--){if(bits[i]===0){a=a.diffAdd(b,c);b=b.dbl()}else{b=a.diffAdd(b,c);a=a.dbl()}}return b};Point.prototype.mulAdd=function mulAdd(){throw new Error("Not supported on Montgomery curve")};Point.prototype.jumlAdd=function jumlAdd(){throw new Error("Not supported on Montgomery curve")};Point.prototype.eq=function eq(other){return this.getX().cmp(other.getX())===0};Point.prototype.normalize=function normalize(){this.x=this.x.redMul(this.z.redInvm());this.z=this.curve.one;return this};Point.prototype.getX=function getX(){this.normalize();return this.x.fromRed()}},{"../utils":310,"./base":297,"bn.js":311,inherits:492}],301:[function(require,module,exports){"use strict";var utils=require("../utils");var BN=require("bn.js");var inherits=require("inherits");var Base=require("./base");var assert=utils.assert;function ShortCurve(conf){Base.call(this,"short",conf);this.a=new BN(conf.a,16).toRed(this.red);this.b=new BN(conf.b,16).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=this.a.fromRed().cmpn(0)===0;this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0;this.endo=this._getEndomorphism(conf);this._endoWnafT1=new Array(4);this._endoWnafT2=new Array(4)}inherits(ShortCurve,Base);module.exports=ShortCurve;ShortCurve.prototype._getEndomorphism=function _getEndomorphism(conf){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var beta;var lambda;if(conf.beta){beta=new BN(conf.beta,16).toRed(this.red)}else{var betas=this._getEndoRoots(this.p);beta=betas[0].cmp(betas[1])<0?betas[0]:betas[1];beta=beta.toRed(this.red)}if(conf.lambda){lambda=new BN(conf.lambda,16)}else{var lambdas=this._getEndoRoots(this.n);if(this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta))===0){lambda=lambdas[0]}else{lambda=lambdas[1];assert(this.g.mul(lambda).x.cmp(this.g.x.redMul(beta))===0)}}var basis;if(conf.basis){basis=conf.basis.map(function(vec){return{a:new BN(vec.a,16),b:new BN(vec.b,16)}})}else{basis=this._getEndoBasis(lambda)}return{beta:beta,lambda:lambda,basis:basis}};ShortCurve.prototype._getEndoRoots=function _getEndoRoots(num){var red=num===this.p?this.red:BN.mont(num);var tinv=new BN(2).toRed(red).redInvm();var ntinv=tinv.redNeg();var s=new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv);var l1=ntinv.redAdd(s).fromRed();var l2=ntinv.redSub(s).fromRed();return[l1,l2]};ShortCurve.prototype._getEndoBasis=function _getEndoBasis(lambda){var aprxSqrt=this.n.ushrn(Math.floor(this.n.bitLength()/2));var u=lambda;var v=this.n.clone();var x1=new BN(1);var y1=new BN(0);var x2=new BN(0);var y2=new BN(1);var a0;var b0;var a1;var b1;var a2;var b2;var prevR;var i=0;var r;var x;while(u.cmpn(0)!==0){var q=v.div(u);r=v.sub(q.mul(u));x=x2.sub(q.mul(x1));var y=y2.sub(q.mul(y1));if(!a1&&r.cmp(aprxSqrt)<0){a0=prevR.neg();b0=x1;a1=r.neg();b1=x}else if(a1&&++i===2){break}prevR=r;v=u;u=r;x2=x1;x1=x;y2=y1;y1=y}a2=r.neg();b2=x;var len1=a1.sqr().add(b1.sqr());var len2=a2.sqr().add(b2.sqr());if(len2.cmp(len1)>=0){a2=a0;b2=b0}if(a1.negative){a1=a1.neg();b1=b1.neg()}if(a2.negative){a2=a2.neg();b2=b2.neg()}return[{a:a1,b:b1},{a:a2,b:b2}]};ShortCurve.prototype._endoSplit=function _endoSplit(k){var basis=this.endo.basis;var v1=basis[0];var v2=basis[1];var c1=v2.b.mul(k).divRound(this.n);var c2=v1.b.neg().mul(k).divRound(this.n);var p1=c1.mul(v1.a);var p2=c2.mul(v2.a);var q1=c1.mul(v1.b);var q2=c2.mul(v2.b);var k1=k.sub(p1).sub(p2);var k2=q1.add(q2).neg();return{k1:k1,k2:k2}};ShortCurve.prototype.pointFromX=function pointFromX(x,odd){x=new BN(x,16);if(!x.red)x=x.toRed(this.red);var y2=x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b);var y=y2.redSqrt();if(y.redSqr().redSub(y2).cmp(this.zero)!==0)throw new Error("invalid point");var isOdd=y.fromRed().isOdd();if(odd&&!isOdd||!odd&&isOdd)y=y.redNeg();return this.point(x,y)};ShortCurve.prototype.validate=function validate(point){if(point.inf)return true;var x=point.x;var y=point.y;var ax=this.a.redMul(x);var rhs=x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);return y.redSqr().redISub(rhs).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function _endoWnafMulAdd(points,coeffs,jacobianResult){var npoints=this._endoWnafT1;var ncoeffs=this._endoWnafT2;for(var i=0;i<points.length;i++){var split=this._endoSplit(coeffs[i]);var p=points[i];var beta=p._getBeta();if(split.k1.negative){split.k1.ineg();p=p.neg(true)}if(split.k2.negative){split.k2.ineg();beta=beta.neg(true)}npoints[i*2]=p;npoints[i*2+1]=beta;ncoeffs[i*2]=split.k1;ncoeffs[i*2+1]=split.k2}var res=this._wnafMulAdd(1,npoints,ncoeffs,i*2,jacobianResult);for(var j=0;j<i*2;j++){npoints[j]=null;ncoeffs[j]=null}return res};function Point(curve,x,y,isRed){Base.BasePoint.call(this,curve,"affine");if(x===null&&y===null){this.x=null;this.y=null;this.inf=true}else{this.x=new BN(x,16);this.y=new BN(y,16);if(isRed){this.x.forceRed(this.curve.red);this.y.forceRed(this.curve.red)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=false}}inherits(Point,Base.BasePoint);ShortCurve.prototype.point=function point(x,y,isRed){return new Point(this,x,y,isRed)};ShortCurve.prototype.pointFromJSON=function pointFromJSON(obj,red){return Point.fromJSON(this,obj,red)};Point.prototype._getBeta=function _getBeta(){if(!this.curve.endo)return;var pre=this.precomputed;if(pre&&pre.beta)return pre.beta;var beta=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(pre){var curve=this.curve;var endoMul=function(p){return curve.point(p.x.redMul(curve.endo.beta),p.y)};pre.beta=beta;beta.precomputed={beta:null,naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(endoMul)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(endoMul)}}}return beta};Point.prototype.toJSON=function toJSON(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]};Point.fromJSON=function fromJSON(curve,obj,red){if(typeof obj==="string")obj=JSON.parse(obj);var res=curve.point(obj[0],obj[1],red);if(!obj[2])return res;function obj2point(obj){return curve.point(obj[0],obj[1],red)}var pre=obj[2];res.precomputed={beta:null,doubles:pre.doubles&&{step:pre.doubles.step,points:[res].concat(pre.doubles.points.map(obj2point))},naf:pre.naf&&{wnd:pre.naf.wnd,points:[res].concat(pre.naf.points.map(obj2point))}};return res};Point.prototype.inspect=function inspect(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function isInfinity(){return this.inf};Point.prototype.add=function add(p){if(this.inf)return p;if(p.inf)return this;if(this.eq(p))return this.dbl();if(this.neg().eq(p))return this.curve.point(null,null);if(this.x.cmp(p.x)===0)return this.curve.point(null,null);var c=this.y.redSub(p.y);if(c.cmpn(0)!==0)c=c.redMul(this.x.redSub(p.x).redInvm());var nx=c.redSqr().redISub(this.x).redISub(p.x);var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny)};Point.prototype.dbl=function dbl(){if(this.inf)return this;var ys1=this.y.redAdd(this.y);if(ys1.cmpn(0)===0)return this.curve.point(null,null);var a=this.curve.a;var x2=this.x.redSqr();var dyinv=ys1.redInvm();var c=x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv);var nx=c.redSqr().redISub(this.x.redAdd(this.x));var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny)};Point.prototype.getX=function getX(){return this.x.fromRed()};Point.prototype.getY=function getY(){return this.y.fromRed()};Point.prototype.mul=function mul(k){k=new BN(k,16);if(this.isInfinity())return this;else if(this._hasDoubles(k))return this.curve._fixedNafMul(this,k);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[k]);else return this.curve._wnafMul(this,k)};Point.prototype.mulAdd=function mulAdd(k1,p2,k2){var points=[this,p2];var coeffs=[k1,k2];if(this.curve.endo)return this.curve._endoWnafMulAdd(points,coeffs);else return this.curve._wnafMulAdd(1,points,coeffs,2)};Point.prototype.jmulAdd=function jmulAdd(k1,p2,k2){var points=[this,p2];var coeffs=[k1,k2];if(this.curve.endo)return this.curve._endoWnafMulAdd(points,coeffs,true);else return this.curve._wnafMulAdd(1,points,coeffs,2,true)};Point.prototype.eq=function eq(p){return this===p||this.inf===p.inf&&(this.inf||this.x.cmp(p.x)===0&&this.y.cmp(p.y)===0)};Point.prototype.neg=function neg(_precompute){if(this.inf)return this;var res=this.curve.point(this.x,this.y.redNeg());if(_precompute&&this.precomputed){var pre=this.precomputed;var negate=function(p){return p.neg()};res.precomputed={naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(negate)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(negate)}}}return res};Point.prototype.toJ=function toJ(){if(this.inf)return this.curve.jpoint(null,null,null);var res=this.curve.jpoint(this.x,this.y,this.curve.one);return res};function JPoint(curve,x,y,z){Base.BasePoint.call(this,curve,"jacobian");if(x===null&&y===null&&z===null){this.x=this.curve.one;this.y=this.curve.one;this.z=new BN(0)}else{this.x=new BN(x,16);this.y=new BN(y,16);this.z=new BN(z,16)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one}inherits(JPoint,Base.BasePoint);ShortCurve.prototype.jpoint=function jpoint(x,y,z){return new JPoint(this,x,y,z)};JPoint.prototype.toP=function toP(){if(this.isInfinity())return this.curve.point(null,null);var zinv=this.z.redInvm();var zinv2=zinv.redSqr();var ax=this.x.redMul(zinv2);var ay=this.y.redMul(zinv2).redMul(zinv);return this.curve.point(ax,ay)};JPoint.prototype.neg=function neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function add(p){if(this.isInfinity())return p;if(p.isInfinity())return this;var pz2=p.z.redSqr();var z2=this.z.redSqr();var u1=this.x.redMul(pz2);var u2=p.x.redMul(z2);var s1=this.y.redMul(pz2.redMul(p.z));var s2=p.y.redMul(z2.redMul(this.z));var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0){if(r.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(p.z).redMul(h);return this.curve.jpoint(nx,ny,nz)};JPoint.prototype.mixedAdd=function mixedAdd(p){if(this.isInfinity())return p.toJ();if(p.isInfinity())return this;var z2=this.z.redSqr();var u1=this.x;var u2=p.x.redMul(z2);var s1=this.y;var s2=p.y.redMul(z2).redMul(this.z);var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0){if(r.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(h);return this.curve.jpoint(nx,ny,nz)};JPoint.prototype.dblp=function dblp(pow){if(pow===0)return this;if(this.isInfinity())return this;if(!pow)return this.dbl();var i;if(this.curve.zeroA||this.curve.threeA){var r=this;for(i=0;i<pow;i++)r=r.dbl();return r}var a=this.curve.a;var tinv=this.curve.tinv;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jyd=jy.redAdd(jy);for(i=0;i<pow;i++){var jx2=jx.redSqr();var jyd2=jyd.redSqr();var jyd4=jyd2.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var t1=jx.redMul(jyd2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var dny=c.redMul(t2);dny=dny.redIAdd(dny).redISub(jyd4);var nz=jyd.redMul(jz);if(i+1<pow)jz4=jz4.redMul(jyd4);jx=nx;jz=nz;jyd=dny}return this.curve.jpoint(jx,jyd.redMul(tinv),jz)};JPoint.prototype.dbl=function dbl(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl()};JPoint.prototype._zeroDbl=function _zeroDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx);var t=m.redSqr().redISub(s).redISub(s);var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8);yyyy8=yyyy8.redIAdd(yyyy8);nx=t;ny=m.redMul(s.redISub(t)).redISub(yyyy8);nz=this.y.redAdd(this.y)}else{var a=this.x.redSqr();var b=this.y.redSqr();var c=b.redSqr();var d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a);var f=e.redSqr();var c8=c.redIAdd(c);c8=c8.redIAdd(c8);c8=c8.redIAdd(c8);nx=f.redISub(d).redISub(d);ny=e.redMul(d.redISub(nx)).redISub(c8);nz=this.y.redMul(this.z);nz=nz.redIAdd(nz)}return this.curve.jpoint(nx,ny,nz)};JPoint.prototype._threeDbl=function _threeDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a);var t=m.redSqr().redISub(s).redISub(s);nx=t;var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8);yyyy8=yyyy8.redIAdd(yyyy8);ny=m.redMul(s.redISub(t)).redISub(yyyy8);nz=this.y.redAdd(this.y)}else{var delta=this.z.redSqr();var gamma=this.y.redSqr();var beta=this.x.redMul(gamma);var alpha=this.x.redSub(delta).redMul(this.x.redAdd(delta));alpha=alpha.redAdd(alpha).redIAdd(alpha);var beta4=beta.redIAdd(beta);beta4=beta4.redIAdd(beta4);var beta8=beta4.redAdd(beta4);nx=alpha.redSqr().redISub(beta8);nz=this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);var ggamma8=gamma.redSqr();ggamma8=ggamma8.redIAdd(ggamma8);ggamma8=ggamma8.redIAdd(ggamma8);ggamma8=ggamma8.redIAdd(ggamma8);ny=alpha.redMul(beta4.redISub(nx)).redISub(ggamma8)}return this.curve.jpoint(nx,ny,nz)};JPoint.prototype._dbl=function _dbl(){var a=this.curve.a;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jx2=jx.redSqr();var jy2=jy.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var jxd4=jx.redAdd(jx);jxd4=jxd4.redIAdd(jxd4);var t1=jxd4.redMul(jy2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var jyd8=jy2.redSqr();jyd8=jyd8.redIAdd(jyd8);jyd8=jyd8.redIAdd(jyd8);jyd8=jyd8.redIAdd(jyd8);var ny=c.redMul(t2).redISub(jyd8);var nz=jy.redAdd(jy).redMul(jz);return this.curve.jpoint(nx,ny,nz)};JPoint.prototype.trpl=function trpl(){if(!this.curve.zeroA)return this.dbl().add(this);var xx=this.x.redSqr();var yy=this.y.redSqr();var zz=this.z.redSqr();var yyyy=yy.redSqr();var m=xx.redAdd(xx).redIAdd(xx);var mm=m.redSqr();var e=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);e=e.redIAdd(e);e=e.redAdd(e).redIAdd(e);e=e.redISub(mm);var ee=e.redSqr();var t=yyyy.redIAdd(yyyy);t=t.redIAdd(t);t=t.redIAdd(t);t=t.redIAdd(t);var u=m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t);var yyu4=yy.redMul(u);yyu4=yyu4.redIAdd(yyu4);yyu4=yyu4.redIAdd(yyu4);var nx=this.x.redMul(ee).redISub(yyu4);nx=nx.redIAdd(nx);nx=nx.redIAdd(nx);var ny=this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));ny=ny.redIAdd(ny);ny=ny.redIAdd(ny);ny=ny.redIAdd(ny);var nz=this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);return this.curve.jpoint(nx,ny,nz)};JPoint.prototype.mul=function mul(k,kbase){k=new BN(k,kbase);return this.curve._wnafMul(this,k)};JPoint.prototype.eq=function eq(p){if(p.type==="affine")return this.eq(p.toJ());if(this===p)return true;var z2=this.z.redSqr();var pz2=p.z.redSqr();if(this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0)!==0)return false;var z3=z2.redMul(this.z);var pz3=pz2.redMul(p.z);return this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0)===0};JPoint.prototype.eqXToP=function eqXToP(x){var zs=this.z.redSqr();var rx=x.toRed(this.curve.red).redMul(zs);if(this.x.cmp(rx)===0)return true;var xc=x.clone();var t=this.curve.redN.redMul(zs);for(;;){xc.iadd(this.curve.n);if(xc.cmp(this.curve.p)>=0)return false;rx.redIAdd(t);if(this.x.cmp(rx)===0)return true}};JPoint.prototype.inspect=function inspect(){if(this.isInfinity())return"<EC JPoint Infinity>";return"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function isInfinity(){return this.z.cmpn(0)===0}},{"../utils":310,"./base":297,"bn.js":311,inherits:492}],302:[function(require,module,exports){"use strict";var curves=exports;var hash=require("hash.js");var curve=require("./curve");var utils=require("./utils");var assert=utils.assert;function PresetCurve(options){if(options.type==="short")this.curve=new curve.short(options);else if(options.type==="edwards")this.curve=new curve.edwards(options);else this.curve=new curve.mont(options);this.g=this.curve.g;this.n=this.curve.n;this.hash=options.hash;assert(this.g.validate(),"Invalid curve");assert(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}curves.PresetCurve=PresetCurve;function defineCurve(name,options){Object.defineProperty(curves,name,{configurable:true,enumerable:true,get:function(){var curve=new PresetCurve(options);Object.defineProperty(curves,name,{configurable:true,enumerable:true,value:curve});return curve}})}defineCurve("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash.sha256,gRed:false,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});defineCurve("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash.sha256,gRed:false,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});defineCurve("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash.sha256,gRed:false,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});defineCurve("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f "+"5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 "+"f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash.sha384,gRed:false,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 "+"5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 "+"0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});defineCurve("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b "+"99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd "+"3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 "+"f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash.sha512,gRed:false,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 "+"053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 "+"a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 "+"579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 "+"3fad0761 353c7086 a272c240 88be9476 9fd16650"]});defineCurve("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash.sha256,gRed:false,g:["9"]});defineCurve("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash.sha256,gRed:false,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var pre;try{pre=require("./precomputed/secp256k1")}catch(e){pre=undefined}defineCurve("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:false,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",pre]})},{"./curve":299,"./precomputed/secp256k1":309,"./utils":310,"hash.js":478}],303:[function(require,module,exports){"use strict";var BN=require("bn.js");var HmacDRBG=require("hmac-drbg");var utils=require("../utils");var curves=require("../curves");var rand=require("brorand");var assert=utils.assert;var KeyPair=require("./key");var Signature=require("./signature");function EC(options){if(!(this instanceof EC))return new EC(options);if(typeof options==="string"){assert(Object.prototype.hasOwnProperty.call(curves,options),"Unknown curve "+options);options=curves[options]}if(options instanceof curves.PresetCurve)options={curve:options};this.curve=options.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=options.curve.g;this.g.precompute(options.curve.n.bitLength()+1);this.hash=options.hash||options.curve.hash}module.exports=EC;EC.prototype.keyPair=function keyPair(options){return new KeyPair(this,options)};EC.prototype.keyFromPrivate=function keyFromPrivate(priv,enc){return KeyPair.fromPrivate(this,priv,enc)};EC.prototype.keyFromPublic=function keyFromPublic(pub,enc){return KeyPair.fromPublic(this,pub,enc)};EC.prototype.genKeyPair=function genKeyPair(options){if(!options)options={};var drbg=new HmacDRBG({hash:this.hash,pers:options.pers,persEnc:options.persEnc||"utf8",entropy:options.entropy||rand(this.hash.hmacStrength),entropyEnc:options.entropy&&options.entropyEnc||"utf8",nonce:this.n.toArray()});var bytes=this.n.byteLength();var ns2=this.n.sub(new BN(2));for(;;){var priv=new BN(drbg.generate(bytes));if(priv.cmp(ns2)>0)continue;priv.iaddn(1);return this.keyFromPrivate(priv)}};EC.prototype._truncateToN=function _truncateToN(msg,truncOnly){var delta=msg.byteLength()*8-this.n.bitLength();if(delta>0)msg=msg.ushrn(delta);if(!truncOnly&&msg.cmp(this.n)>=0)return msg.sub(this.n);else return msg};EC.prototype.sign=function sign(msg,key,enc,options){if(typeof enc==="object"){options=enc;enc=null}if(!options)options={};key=this.keyFromPrivate(key,enc);msg=this._truncateToN(new BN(msg,16));var bytes=this.n.byteLength();var bkey=key.getPrivate().toArray("be",bytes);var nonce=msg.toArray("be",bytes);var drbg=new HmacDRBG({hash:this.hash,entropy:bkey,nonce:nonce,pers:options.pers,persEnc:options.persEnc||"utf8"});var ns1=this.n.sub(new BN(1));for(var iter=0;;iter++){var k=options.k?options.k(iter):new BN(drbg.generate(this.n.byteLength()));k=this._truncateToN(k,true);if(k.cmpn(1)<=0||k.cmp(ns1)>=0)continue;var kp=this.g.mul(k);if(kp.isInfinity())continue;var kpX=kp.getX();var r=kpX.umod(this.n);if(r.cmpn(0)===0)continue;var s=k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));s=s.umod(this.n);if(s.cmpn(0)===0)continue;var recoveryParam=(kp.getY().isOdd()?1:0)|(kpX.cmp(r)!==0?2:0);if(options.canonical&&s.cmp(this.nh)>0){s=this.n.sub(s);recoveryParam^=1}return new Signature({r:r,s:s,recoveryParam:recoveryParam})}};EC.prototype.verify=function verify(msg,signature,key,enc){msg=this._truncateToN(new BN(msg,16));key=this.keyFromPublic(key,enc);signature=new Signature(signature,"hex");var r=signature.r;var s=signature.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return false;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return false;var sinv=s.invm(this.n);var u1=sinv.mul(msg).umod(this.n);var u2=sinv.mul(r).umod(this.n);var p;if(!this.curve._maxwellTrick){p=this.g.mulAdd(u1,key.getPublic(),u2);if(p.isInfinity())return false;return p.getX().umod(this.n).cmp(r)===0}p=this.g.jmulAdd(u1,key.getPublic(),u2);if(p.isInfinity())return false;return p.eqXToP(r)};EC.prototype.recoverPubKey=function(msg,signature,j,enc){assert((3&j)===j,"The recovery param is more than two bits");signature=new Signature(signature,enc);var n=this.n;var e=new BN(msg);var r=signature.r;var s=signature.s;var isYOdd=j&1;var isSecondKey=j>>1;if(r.cmp(this.curve.p.umod(this.curve.n))>=0&&isSecondKey)throw new Error("Unable to find sencond key candinate");if(isSecondKey)r=this.curve.pointFromX(r.add(this.curve.n),isYOdd);else r=this.curve.pointFromX(r,isYOdd);var rInv=signature.r.invm(n);var s1=n.sub(e).mul(rInv).umod(n);var s2=s.mul(rInv).umod(n);return this.g.mulAdd(s1,r,s2)};EC.prototype.getKeyRecoveryParam=function(e,signature,Q,enc){signature=new Signature(signature,enc);if(signature.recoveryParam!==null)return signature.recoveryParam;for(var i=0;i<4;i++){var Qprime;try{Qprime=this.recoverPubKey(e,signature,i)}catch(e){continue}if(Qprime.eq(Q))return i}throw new Error("Unable to find valid recovery factor")}},{"../curves":302,"../utils":310,"./key":304,"./signature":305,"bn.js":311,brorand:225,"hmac-drbg":490}],304:[function(require,module,exports){"use strict";var BN=require("bn.js");var utils=require("../utils");var assert=utils.assert;function KeyPair(ec,options){this.ec=ec;this.priv=null;this.pub=null;if(options.priv)this._importPrivate(options.priv,options.privEnc);if(options.pub)this._importPublic(options.pub,options.pubEnc)}module.exports=KeyPair;KeyPair.fromPublic=function fromPublic(ec,pub,enc){if(pub instanceof KeyPair)return pub;return new KeyPair(ec,{pub:pub,pubEnc:enc})};KeyPair.fromPrivate=function fromPrivate(ec,priv,enc){if(priv instanceof KeyPair)return priv;return new KeyPair(ec,{priv:priv,privEnc:enc})};KeyPair.prototype.validate=function validate(){var pub=this.getPublic();if(pub.isInfinity())return{result:false,reason:"Invalid public key"};if(!pub.validate())return{result:false,reason:"Public key is not a point"};if(!pub.mul(this.ec.curve.n).isInfinity())return{result:false,reason:"Public key * N != O"};return{result:true,reason:null}};KeyPair.prototype.getPublic=function getPublic(compact,enc){if(typeof compact==="string"){enc=compact;compact=null}if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(!enc)return this.pub;return this.pub.encode(enc,compact)};KeyPair.prototype.getPrivate=function getPrivate(enc){if(enc==="hex")return this.priv.toString(16,2);else return this.priv};KeyPair.prototype._importPrivate=function _importPrivate(key,enc){this.priv=new BN(key,enc||16);this.priv=this.priv.umod(this.ec.curve.n)};KeyPair.prototype._importPublic=function _importPublic(key,enc){if(key.x||key.y){if(this.ec.curve.type==="mont"){assert(key.x,"Need x coordinate")}else if(this.ec.curve.type==="short"||this.ec.curve.type==="edwards"){assert(key.x&&key.y,"Need both x and y coordinate")}this.pub=this.ec.curve.point(key.x,key.y);return}this.pub=this.ec.curve.decodePoint(key,enc)};KeyPair.prototype.derive=function derive(pub){if(!pub.validate()){assert(pub.validate(),"public point not validated")}return pub.mul(this.priv).getX()};KeyPair.prototype.sign=function sign(msg,enc,options){return this.ec.sign(msg,this,enc,options)};KeyPair.prototype.verify=function verify(msg,signature){return this.ec.verify(msg,signature,this)};KeyPair.prototype.inspect=function inspect(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":310,"bn.js":311}],305:[function(require,module,exports){"use strict";var BN=require("bn.js");var utils=require("../utils");var assert=utils.assert;function Signature(options,enc){if(options instanceof Signature)return options;if(this._importDER(options,enc))return;assert(options.r&&options.s,"Signature without r or s");this.r=new BN(options.r,16);this.s=new BN(options.s,16);if(options.recoveryParam===undefined)this.recoveryParam=null;else this.recoveryParam=options.recoveryParam}module.exports=Signature;function Position(){this.place=0}function getLength(buf,p){var initial=buf[p.place++];if(!(initial&128)){return initial}var octetLen=initial&15;if(octetLen===0||octetLen>4){return false}var val=0;for(var i=0,off=p.place;i<octetLen;i++,off++){val<<=8;val|=buf[off];val>>>=0}if(val<=127){return false}p.place=off;return val}function rmPadding(buf){var i=0;var len=buf.length-1;while(!buf[i]&&!(buf[i+1]&128)&&i<len){i++}if(i===0){return buf}return buf.slice(i)}Signature.prototype._importDER=function _importDER(data,enc){data=utils.toArray(data,enc);var p=new Position;if(data[p.place++]!==48){return false}var len=getLength(data,p);if(len===false){return false}if(len+p.place!==data.length){return false}if(data[p.place++]!==2){return false}var rlen=getLength(data,p);if(rlen===false){return false}var r=data.slice(p.place,rlen+p.place);p.place+=rlen;if(data[p.place++]!==2){return false}var slen=getLength(data,p);if(slen===false){return false}if(data.length!==slen+p.place){return false}var s=data.slice(p.place,slen+p.place);if(r[0]===0){if(r[1]&128){r=r.slice(1)}else{return false}}if(s[0]===0){if(s[1]&128){s=s.slice(1)}else{return false}}this.r=new BN(r);this.s=new BN(s);this.recoveryParam=null;return true};function constructLength(arr,len){if(len<128){arr.push(len);return}var octets=1+(Math.log(len)/Math.LN2>>>3);arr.push(octets|128);while(--octets){arr.push(len>>>(octets<<3)&255)}arr.push(len)}Signature.prototype.toDER=function toDER(enc){var r=this.r.toArray();var s=this.s.toArray();if(r[0]&128)r=[0].concat(r);if(s[0]&128)s=[0].concat(s);r=rmPadding(r);s=rmPadding(s);while(!s[0]&&!(s[1]&128)){s=s.slice(1)}var arr=[2];constructLength(arr,r.length);arr=arr.concat(r);arr.push(2);constructLength(arr,s.length);var backHalf=arr.concat(s);var res=[48];constructLength(res,backHalf.length);res=res.concat(backHalf);return utils.encode(res,enc)}},{"../utils":310,"bn.js":311}],306:[function(require,module,exports){"use strict";var hash=require("hash.js");var curves=require("../curves");var utils=require("../utils");var assert=utils.assert;var parseBytes=utils.parseBytes;var KeyPair=require("./key");var Signature=require("./signature");function EDDSA(curve){assert(curve==="ed25519","only tested with ed25519 so far");if(!(this instanceof EDDSA))return new EDDSA(curve);curve=curves[curve].curve;this.curve=curve;this.g=curve.g;this.g.precompute(curve.n.bitLength()+1);this.pointClass=curve.point().constructor;this.encodingLength=Math.ceil(curve.n.bitLength()/8);this.hash=hash.sha512}module.exports=EDDSA;EDDSA.prototype.sign=function sign(message,secret){message=parseBytes(message);var key=this.keyFromSecret(secret);var r=this.hashInt(key.messagePrefix(),message);var R=this.g.mul(r);var Rencoded=this.encodePoint(R);var s_=this.hashInt(Rencoded,key.pubBytes(),message).mul(key.priv());var S=r.add(s_).umod(this.curve.n);return this.makeSignature({R:R,S:S,Rencoded:Rencoded})};EDDSA.prototype.verify=function verify(message,sig,pub){message=parseBytes(message);sig=this.makeSignature(sig);var key=this.keyFromPublic(pub);var h=this.hashInt(sig.Rencoded(),key.pubBytes(),message);var SG=this.g.mul(sig.S());var RplusAh=sig.R().add(key.pub().mul(h));return RplusAh.eq(SG)};EDDSA.prototype.hashInt=function hashInt(){var hash=this.hash();for(var i=0;i<arguments.length;i++)hash.update(arguments[i]);return utils.intFromLE(hash.digest()).umod(this.curve.n)};EDDSA.prototype.keyFromPublic=function keyFromPublic(pub){return KeyPair.fromPublic(this,pub)};EDDSA.prototype.keyFromSecret=function keyFromSecret(secret){return KeyPair.fromSecret(this,secret)};EDDSA.prototype.makeSignature=function makeSignature(sig){if(sig instanceof Signature)return sig;return new Signature(this,sig)};EDDSA.prototype.encodePoint=function encodePoint(point){var enc=point.getY().toArray("le",this.encodingLength);enc[this.encodingLength-1]|=point.getX().isOdd()?128:0;return enc};EDDSA.prototype.decodePoint=function decodePoint(bytes){bytes=utils.parseBytes(bytes);var lastIx=bytes.length-1;var normed=bytes.slice(0,lastIx).concat(bytes[lastIx]&~128);var xIsOdd=(bytes[lastIx]&128)!==0;var y=utils.intFromLE(normed);return this.curve.pointFromY(y,xIsOdd)};EDDSA.prototype.encodeInt=function encodeInt(num){return num.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function decodeInt(bytes){return utils.intFromLE(bytes)};EDDSA.prototype.isPoint=function isPoint(val){return val instanceof this.pointClass}},{"../curves":302,"../utils":310,"./key":307,"./signature":308,"hash.js":478}],307:[function(require,module,exports){"use strict";var utils=require("../utils");var assert=utils.assert;var parseBytes=utils.parseBytes;var cachedProperty=utils.cachedProperty;function KeyPair(eddsa,params){this.eddsa=eddsa;this._secret=parseBytes(params.secret);if(eddsa.isPoint(params.pub))this._pub=params.pub;else this._pubBytes=parseBytes(params.pub)}KeyPair.fromPublic=function fromPublic(eddsa,pub){if(pub instanceof KeyPair)return pub;return new KeyPair(eddsa,{pub:pub})};KeyPair.fromSecret=function fromSecret(eddsa,secret){if(secret instanceof KeyPair)return secret;return new KeyPair(eddsa,{secret:secret})};KeyPair.prototype.secret=function secret(){return this._secret};cachedProperty(KeyPair,"pubBytes",function pubBytes(){return this.eddsa.encodePoint(this.pub())});cachedProperty(KeyPair,"pub",function pub(){if(this._pubBytes)return this.eddsa.decodePoint(this._pubBytes);return this.eddsa.g.mul(this.priv())});cachedProperty(KeyPair,"privBytes",function privBytes(){var eddsa=this.eddsa;var hash=this.hash();var lastIx=eddsa.encodingLength-1;var a=hash.slice(0,eddsa.encodingLength);a[0]&=248;a[lastIx]&=127;a[lastIx]|=64;return a});cachedProperty(KeyPair,"priv",function priv(){return this.eddsa.decodeInt(this.privBytes())});cachedProperty(KeyPair,"hash",function hash(){return this.eddsa.hash().update(this.secret()).digest()});cachedProperty(KeyPair,"messagePrefix",function messagePrefix(){return this.hash().slice(this.eddsa.encodingLength)});KeyPair.prototype.sign=function sign(message){assert(this._secret,"KeyPair can only verify");return this.eddsa.sign(message,this)};KeyPair.prototype.verify=function verify(message,sig){return this.eddsa.verify(message,sig,this)};KeyPair.prototype.getSecret=function getSecret(enc){assert(this._secret,"KeyPair is public only");return utils.encode(this.secret(),enc)};KeyPair.prototype.getPublic=function getPublic(enc){return utils.encode(this.pubBytes(),enc)};module.exports=KeyPair},{"../utils":310}],308:[function(require,module,exports){"use strict";var BN=require("bn.js");var utils=require("../utils");var assert=utils.assert;var cachedProperty=utils.cachedProperty;var parseBytes=utils.parseBytes;function Signature(eddsa,sig){this.eddsa=eddsa;if(typeof sig!=="object")sig=parseBytes(sig);if(Array.isArray(sig)){sig={R:sig.slice(0,eddsa.encodingLength),S:sig.slice(eddsa.encodingLength)}}assert(sig.R&&sig.S,"Signature without R or S");if(eddsa.isPoint(sig.R))this._R=sig.R;if(sig.S instanceof BN)this._S=sig.S;this._Rencoded=Array.isArray(sig.R)?sig.R:sig.Rencoded;this._Sencoded=Array.isArray(sig.S)?sig.S:sig.Sencoded}cachedProperty(Signature,"S",function S(){return this.eddsa.decodeInt(this.Sencoded())});cachedProperty(Signature,"R",function R(){return this.eddsa.decodePoint(this.Rencoded())});cachedProperty(Signature,"Rencoded",function Rencoded(){return this.eddsa.encodePoint(this.R())});cachedProperty(Signature,"Sencoded",function Sencoded(){return this.eddsa.encodeInt(this.S())});Signature.prototype.toBytes=function toBytes(){return this.Rencoded().concat(this.Sencoded())};Signature.prototype.toHex=function toHex(){return utils.encode(this.toBytes(),"hex").toUpperCase()};module.exports=Signature},{"../utils":310,"bn.js":311}],309:[function(require,module,exports){module.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],310:[function(require,module,exports){"use strict";var utils=exports;var BN=require("bn.js");var minAssert=require("minimalistic-assert");var minUtils=require("minimalistic-crypto-utils");utils.assert=minAssert;utils.toArray=minUtils.toArray;utils.zero2=minUtils.zero2;utils.toHex=minUtils.toHex;utils.encode=minUtils.encode;function getNAF(num,w,bits){var naf=new Array(Math.max(num.bitLength(),bits)+1);naf.fill(0);var ws=1<<w+1;var k=num.clone();for(var i=0;i<naf.length;i++){var z;var mod=k.andln(ws-1);if(k.isOdd()){if(mod>(ws>>1)-1)z=(ws>>1)-mod;else z=mod;k.isubn(z)}else{z=0}naf[i]=z;k.iushrn(1)}return naf}utils.getNAF=getNAF;function getJSF(k1,k2){var jsf=[[],[]];k1=k1.clone();k2=k2.clone();var d1=0;var d2=0;var m8;while(k1.cmpn(-d1)>0||k2.cmpn(-d2)>0){var m14=k1.andln(3)+d1&3;var m24=k2.andln(3)+d2&3;if(m14===3)m14=-1;if(m24===3)m24=-1;var u1;if((m14&1)===0){u1=0}else{m8=k1.andln(7)+d1&7;if((m8===3||m8===5)&&m24===2)u1=-m14;else u1=m14}jsf[0].push(u1);var u2;if((m24&1)===0){u2=0}else{m8=k2.andln(7)+d2&7;if((m8===3||m8===5)&&m14===2)u2=-m24;else u2=m24}jsf[1].push(u2);if(2*d1===u1+1)d1=1-d1;if(2*d2===u2+1)d2=1-d2;k1.iushrn(1);k2.iushrn(1)}return jsf}utils.getJSF=getJSF;function cachedProperty(obj,name,computer){var key="_"+name;obj.prototype[name]=function cachedProperty(){return this[key]!==undefined?this[key]:this[key]=computer.call(this)}}utils.cachedProperty=cachedProperty;function parseBytes(bytes){return typeof bytes==="string"?utils.toArray(bytes,"hex"):bytes}utils.parseBytes=parseBytes;function intFromLE(bytes){return new BN(bytes,"hex","le")}utils.intFromLE=intFromLE},{"bn.js":311,"minimalistic-assert":503,"minimalistic-crypto-utils":504}],311:[function(require,module,exports){arguments[4][180][0].apply(exports,arguments)},{buffer:226,dup:180}],312:[function(require,module,exports){module.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],313:[function(require,module,exports){"use strict";var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}if(Object.create){Events.prototype=Object.create(null);if(!(new Events).__proto__)prefix=false}function EE(fn,context,once){this.fn=fn;this.context=context;this.once=once||false}function addListener(emitter,event,fn,context,once){if(typeof fn!=="function"){throw new TypeError("The listener must be a function")}var listener=new EE(fn,context||emitter,once),evt=prefix?prefix+event:event;if(!emitter._events[evt])emitter._events[evt]=listener,emitter._eventsCount++;else if(!emitter._events[evt].fn)emitter._events[evt].push(listener);else emitter._events[evt]=[emitter._events[evt],listener];return emitter}function clearEvent(emitter,evt){if(--emitter._eventsCount===0)emitter._events=new Events;else delete emitter._events[evt]}function EventEmitter(){this._events=new Events;this._eventsCount=0}EventEmitter.prototype.eventNames=function eventNames(){var names=[],events,name;if(this._eventsCount===0)return names;for(name in events=this._events){if(has.call(events,name))names.push(prefix?name.slice(1):name)}if(Object.getOwnPropertySymbols){return names.concat(Object.getOwnPropertySymbols(events))}return names};EventEmitter.prototype.listeners=function listeners(event){var evt=prefix?prefix+event:event,handlers=this._events[evt];if(!handlers)return[];if(handlers.fn)return[handlers.fn];for(var i=0,l=handlers.length,ee=new Array(l);i<l;i++){ee[i]=handlers[i].fn}return ee};EventEmitter.prototype.listenerCount=function listenerCount(event){var evt=prefix?prefix+event:event,listeners=this._events[evt];if(!listeners)return 0;if(listeners.fn)return 1;return listeners.length};EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return false;var listeners=this._events[evt],len=arguments.length,args,i;if(listeners.fn){if(listeners.once)this.removeListener(event,listeners.fn,undefined,true);switch(len){case 1:return listeners.fn.call(listeners.context),true;case 2:return listeners.fn.call(listeners.context,a1),true;case 3:return listeners.fn.call(listeners.context,a1,a2),true;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),true;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),true;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),true}for(i=1,args=new Array(len-1);i<len;i++){args[i-1]=arguments[i]}listeners.fn.apply(listeners.context,args)}else{var length=listeners.length,j;for(i=0;i<length;i++){if(listeners[i].once)this.removeListener(event,listeners[i].fn,undefined,true);switch(len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++){args[j-1]=arguments[j]}listeners[i].fn.apply(listeners[i].context,args)}}}return true};EventEmitter.prototype.on=function on(event,fn,context){return addListener(this,event,fn,context,false)};EventEmitter.prototype.once=function once(event,fn,context){return addListener(this,event,fn,context,true)};EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn){clearEvent(this,evt);return this}var listeners=this._events[evt];if(listeners.fn){if(listeners.fn===fn&&(!once||listeners.once)&&(!context||listeners.context===context)){clearEvent(this,evt)}}else{for(var i=0,events=[],length=listeners.length;i<length;i++){if(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context){events.push(listeners[i])}}if(events.length)this._events[evt]=events.length===1?events[0]:events;else clearEvent(this,evt)}return this};EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){var evt;if(event){evt=prefix?prefix+event:event;if(this._events[evt])clearEvent(this,evt)}else{this._events=new Events;this._eventsCount=0}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prefixed=prefix;EventEmitter.EventEmitter=EventEmitter;if("undefined"!==typeof module){module.exports=EventEmitter}},{}],314:[function(require,module,exports){"use strict";var R=typeof Reflect==="object"?Reflect:null;var ReflectApply=R&&typeof R.apply==="function"?R.apply:function ReflectApply(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};var ReflectOwnKeys;if(R&&typeof R.ownKeys==="function"){ReflectOwnKeys=R.ownKeys}else if(Object.getOwnPropertySymbols){ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}}else{ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target)}}function ProcessEmitWarning(warning){if(console&&console.warn)console.warn(warning)}var NumberIsNaN=Number.isNaN||function NumberIsNaN(value){return value!==value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter;module.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=undefined;var defaultMaxListeners=10;function checkListener(listener){if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:true,get:function(){return defaultMaxListeners},set:function(arg){if(typeof arg!=="number"||arg<0||NumberIsNaN(arg)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".")}defaultMaxListeners=arg}});EventEmitter.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if(typeof n!=="number"||n<0||NumberIsNaN(n)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".")}this._maxListeners=n;return this};function _getMaxListeners(that){if(that._maxListeners===undefined)return EventEmitter.defaultMaxListeners;return that._maxListeners}EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function emit(type){var args=[];for(var i=1;i<arguments.length;i++)args.push(arguments[i]);var doError=type==="error";var events=this._events;if(events!==undefined)doError=doError&&events.error===undefined;else if(!doError)return false;if(doError){var er;if(args.length>0)er=args[0];if(er instanceof Error){throw er}var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));err.context=er;throw err}var handler=events[type];if(handler===undefined)return false;if(typeof handler==="function"){ReflectApply(handler,this,args)}else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return true};function _addListener(target,type,listener,prepend){var m;var events;var existing;checkListener(listener);events=target._events;if(events===undefined){events=target._events=Object.create(null);target._eventsCount=0}else{if(events.newListener!==undefined){target.emit("newListener",type,listener.listener?listener.listener:listener);events=target._events}existing=events[type]}if(existing===undefined){existing=events[type]=listener;++target._eventsCount}else{if(typeof existing==="function"){existing=events[type]=prepend?[listener,existing]:[existing,listener]}else if(prepend){existing.unshift(listener)}else{existing.push(listener)}m=_getMaxListeners(target);if(m>0&&existing.length>m&&!existing.warned){existing.warned=true;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");w.name="MaxListenersExceededWarning";w.emitter=target;w.type=type;w.count=existing.length;ProcessEmitWarning(w)}}return target}EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,false)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,true)};function onceWrapper(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;if(arguments.length===0)return this.listener.call(this.target);return this.listener.apply(this.target,arguments)}}function _onceWrap(target,type,listener){var state={fired:false,wrapFn:undefined,target:target,type:type,listener:listener};var wrapped=onceWrapper.bind(state);wrapped.listener=listener;state.wrapFn=wrapped;return wrapped}EventEmitter.prototype.once=function once(type,listener){checkListener(listener);this.on(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){checkListener(listener);this.prependListener(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;checkListener(listener);events=this._events;if(events===undefined)return this;list=events[type];if(list===undefined)return this;if(list===listener||list.listener===listener){if(--this._eventsCount===0)this._events=Object.create(null);else{delete events[type];if(events.removeListener)this.emit("removeListener",type,list.listener||listener)}}else if(typeof list!=="function"){position=-1;for(i=list.length-1;i>=0;i--){if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener;position=i;break}}if(position<0)return this;if(position===0)list.shift();else{spliceOne(list,position)}if(list.length===1)events[type]=list[0];if(events.removeListener!==undefined)this.emit("removeListener",type,originalListener||listener)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;events=this._events;if(events===undefined)return this;if(events.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(events[type]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete events[type]}return this}if(arguments.length===0){var keys=Object.keys(events);var key;for(i=0;i<keys.length;++i){key=keys[i];if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}listeners=events[type];if(typeof listeners==="function"){this.removeListener(type,listeners)}else if(listeners!==undefined){for(i=listeners.length-1;i>=0;i--){this.removeListener(type,listeners[i])}}return this};function _listeners(target,type,unwrap){var events=target._events;if(events===undefined)return[];var evlistener=events[type];if(evlistener===undefined)return[];if(typeof evlistener==="function")return unwrap?[evlistener.listener||evlistener]:[evlistener];return unwrap?unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length)}EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,true)};EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,false)};EventEmitter.listenerCount=function(emitter,type){if(typeof emitter.listenerCount==="function"){return emitter.listenerCount(type)}else{return listenerCount.call(emitter,type)}};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(type){var events=this._events;if(events!==undefined){var evlistener=events[type];if(typeof evlistener==="function"){return 1}else if(evlistener!==undefined){return evlistener.length}}return 0}EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(arr,n){var copy=new Array(n);for(var i=0;i<n;++i)copy[i]=arr[i];return copy}function spliceOne(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}function unwrapListeners(arr){var ret=new Array(arr.length);for(var i=0;i<ret.length;++i){ret[i]=arr[i].listener||arr[i]}return ret}function once(emitter,name){return new Promise(function(resolve,reject){function errorListener(err){emitter.removeListener(name,resolver);reject(err)}function resolver(){if(typeof emitter.removeListener==="function"){emitter.removeListener("error",errorListener)}resolve([].slice.call(arguments))}eventTargetAgnosticAddListener(emitter,name,resolver,{once:true});if(name!=="error"){addErrorHandlerIfEventEmitter(emitter,errorListener,{once:true})}})}function addErrorHandlerIfEventEmitter(emitter,handler,flags){if(typeof emitter.on==="function"){eventTargetAgnosticAddListener(emitter,"error",handler,flags)}}function eventTargetAgnosticAddListener(emitter,name,listener,flags){if(typeof emitter.on==="function"){if(flags.once){emitter.once(name,listener)}else{emitter.on(name,listener)}}else if(typeof emitter.addEventListener==="function"){emitter.addEventListener(name,function wrapListener(arg){if(flags.once){emitter.removeEventListener(name,wrapListener)}listener(arg)})}else{throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof emitter)}}},{}],315:[function(require,module,exports){var Buffer=require("safe-buffer").Buffer;var MD5=require("md5.js");function EVP_BytesToKey(password,salt,keyBits,ivLen){if(!Buffer.isBuffer(password))password=Buffer.from(password,"binary");if(salt){if(!Buffer.isBuffer(salt))salt=Buffer.from(salt,"binary");if(salt.length!==8)throw new RangeError("salt should be Buffer with 8 byte length")}var keyLen=keyBits/8;var key=Buffer.alloc(keyLen);var iv=Buffer.alloc(ivLen||0);var tmp=Buffer.alloc(0);while(keyLen>0||ivLen>0){var hash=new MD5;hash.update(tmp);hash.update(password);if(salt)hash.update(salt);tmp=hash.digest();var used=0;if(keyLen>0){var keyStart=key.length-keyLen;used=Math.min(keyLen,tmp.length);tmp.copy(key,keyStart,0,used);keyLen-=used}if(used<tmp.length&&ivLen>0){var ivStart=iv.length-ivLen;var length=Math.min(ivLen,tmp.length-used);tmp.copy(iv,ivStart,used,used+length);ivLen-=length}}tmp.fill(0);return{key:key,iv:iv}}module.exports=EVP_BytesToKey},{"md5.js":500,"safe-buffer":787}],316:[function(require,module,exports){"use strict";var isCallable=require("is-callable");var toStr=Object.prototype.toString;var hasOwnProperty=Object.prototype.hasOwnProperty;var forEachArray=function forEachArray(array,iterator,receiver){for(var i=0,len=array.length;i<len;i++){if(hasOwnProperty.call(array,i)){if(receiver==null){iterator(array[i],i,array)}else{iterator.call(receiver,array[i],i,array)}}}};var forEachString=function forEachString(string,iterator,receiver){for(var i=0,len=string.length;i<len;i++){if(receiver==null){iterator(string.charAt(i),i,string)}else{iterator.call(receiver,string.charAt(i),i,string)}}};var forEachObject=function forEachObject(object,iterator,receiver){for(var k in object){if(hasOwnProperty.call(object,k)){if(receiver==null){iterator(object[k],k,object)}else{iterator.call(receiver,object[k],k,object)}}}};var forEach=function forEach(list,iterator,thisArg){if(!isCallable(iterator)){throw new TypeError("iterator must be a function")}var receiver;if(arguments.length>=3){receiver=thisArg}if(toStr.call(list)==="[object Array]"){forEachArray(list,iterator,receiver)}else if(typeof list==="string"){forEachString(list,iterator,receiver)}else{forEachObject(list,iterator,receiver)}};module.exports=forEach},{"is-callable":494}],317:[function(require,module,exports){module.exports=typeof self=="object"?self.FormData:window.FormData},{}],318:[function(require,module,exports){"use strict";var ERROR_MESSAGE="Function.prototype.bind called on incompatible ";var slice=Array.prototype.slice;var toStr=Object.prototype.toString;var funcType="[object Function]";module.exports=function bind(that){var target=this;if(typeof target!=="function"||toStr.call(target)!==funcType){throw new TypeError(ERROR_MESSAGE+target)}var args=slice.call(arguments,1);var bound;var binder=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));if(Object(result)===result){return result}return this}else{return target.apply(that,args.concat(slice.call(arguments)))}};var boundLength=Math.max(0,target.length-args.length);var boundArgs=[];for(var i=0;i<boundLength;i++){boundArgs.push("$"+i)}bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")(binder);if(target.prototype){var Empty=function Empty(){};Empty.prototype=target.prototype;bound.prototype=new Empty;Empty.prototype=null}return bound}},{}],319:[function(require,module,exports){"use strict";var implementation=require("./implementation");module.exports=Function.prototype.bind||implementation},{"./implementation":318}],320:[function(require,module,exports){"use strict";var undefined;var $SyntaxError=SyntaxError;var $Function=Function;var $TypeError=TypeError;var getEvalledConstructor=function(expressionSyntax){try{return $Function('"use strict"; return ('+expressionSyntax+").constructor;")()}catch(e){}};var $gOPD=Object.getOwnPropertyDescriptor;if($gOPD){try{$gOPD({},"")}catch(e){$gOPD=null}}var throwTypeError=function(){throw new $TypeError};var ThrowTypeError=$gOPD?function(){try{arguments.callee;return throwTypeError}catch(calleeThrows){try{return $gOPD(arguments,"callee").get}catch(gOPDthrows){return throwTypeError}}}():throwTypeError;var hasSymbols=require("has-symbols")();var getProto=Object.getPrototypeOf||function(x){return x.__proto__};var needsEval={};var TypedArray=typeof Uint8Array==="undefined"?undefined:getProto(Uint8Array);var INTRINSICS={"%AggregateError%":typeof AggregateError==="undefined"?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer==="undefined"?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics==="undefined"?undefined:Atomics,"%BigInt%":typeof BigInt==="undefined"?undefined:BigInt,"%BigInt64Array%":typeof BigInt64Array==="undefined"?undefined:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array==="undefined"?undefined:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView==="undefined"?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array==="undefined"?undefined:Float32Array,"%Float64Array%":typeof Float64Array==="undefined"?undefined:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry==="undefined"?undefined:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array==="undefined"?undefined:Int8Array,"%Int16Array%":typeof Int16Array==="undefined"?undefined:Int16Array,"%Int32Array%":typeof Int32Array==="undefined"?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):undefined,"%JSON%":typeof JSON==="object"?JSON:undefined,"%Map%":typeof Map==="undefined"?undefined:Map,"%MapIteratorPrototype%":typeof Map==="undefined"||!hasSymbols?undefined:getProto((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise==="undefined"?undefined:Promise,"%Proxy%":typeof Proxy==="undefined"?undefined:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect==="undefined"?undefined:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set==="undefined"?undefined:Set,"%SetIteratorPrototype%":typeof Set==="undefined"||!hasSymbols?undefined:getProto((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer==="undefined"?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):undefined,"%Symbol%":hasSymbols?Symbol:undefined,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError,"%Uint8Array%":typeof Uint8Array==="undefined"?undefined:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray==="undefined"?undefined:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array==="undefined"?undefined:Uint16Array,"%Uint32Array%":typeof Uint32Array==="undefined"?undefined:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap==="undefined"?undefined:WeakMap,"%WeakRef%":typeof WeakRef==="undefined"?undefined:WeakRef,"%WeakSet%":typeof WeakSet==="undefined"?undefined:WeakSet};try{null.error}catch(e){var errorProto=getProto(getProto(e));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function doEval(name){var value;if(name==="%AsyncFunction%"){value=getEvalledConstructor("async function () {}")}else if(name==="%GeneratorFunction%"){value=getEvalledConstructor("function* () {}")}else if(name==="%AsyncGeneratorFunction%"){value=getEvalledConstructor("async function* () {}")}else if(name==="%AsyncGenerator%"){var fn=doEval("%AsyncGeneratorFunction%");if(fn){value=fn.prototype}}else if(name==="%AsyncIteratorPrototype%"){var gen=doEval("%AsyncGenerator%");if(gen){value=getProto(gen.prototype)}}INTRINSICS[name]=value;return value};var LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]};var bind=require("function-bind");var hasOwn=require("has");var $concat=bind.call(Function.call,Array.prototype.concat);var $spliceApply=bind.call(Function.apply,Array.prototype.splice);var $replace=bind.call(Function.call,String.prototype.replace);var $strSlice=bind.call(Function.call,String.prototype.slice);var $exec=bind.call(Function.call,RegExp.prototype.exec);var rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=function stringToPath(string){var first=$strSlice(string,0,1);var last=$strSlice(string,-1);if(first==="%"&&last!=="%"){throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`")}else if(last==="%"&&first!=="%"){throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`")}var result=[];$replace(string,rePropName,function(match,number,quote,subString){result[result.length]=quote?$replace(subString,reEscapeChar,"$1"):number||match});return result};var getBaseIntrinsic=function getBaseIntrinsic(name,allowMissing){var intrinsicName=name;var alias;if(hasOwn(LEGACY_ALIASES,intrinsicName)){alias=LEGACY_ALIASES[intrinsicName];intrinsicName="%"+alias[0]+"%"}if(hasOwn(INTRINSICS,intrinsicName)){var value=INTRINSICS[intrinsicName];if(value===needsEval){value=doEval(intrinsicName)}if(typeof value==="undefined"&&!allowMissing){throw new $TypeError("intrinsic "+name+" exists, but is not available. Please file an issue!")}return{alias:alias,name:intrinsicName,value:value}}throw new $SyntaxError("intrinsic "+name+" does not exist!")};module.exports=function GetIntrinsic(name,allowMissing){if(typeof name!=="string"||name.length===0){throw new $TypeError("intrinsic name must be a non-empty string")}if(arguments.length>1&&typeof allowMissing!=="boolean"){throw new $TypeError('"allowMissing" argument must be a boolean')}if($exec(/^%?[^%]*%?$/,name)===null){throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name")}var parts=stringToPath(name);var intrinsicBaseName=parts.length>0?parts[0]:"";var intrinsic=getBaseIntrinsic("%"+intrinsicBaseName+"%",allowMissing);var intrinsicRealName=intrinsic.name;var value=intrinsic.value;var skipFurtherCaching=false;var alias=intrinsic.alias;if(alias){intrinsicBaseName=alias[0];$spliceApply(parts,$concat([0,1],alias))}for(var i=1,isOwn=true;i<parts.length;i+=1){var part=parts[i];var first=$strSlice(part,0,1);var last=$strSlice(part,-1);if((first==='"'||first==="'"||first==="`"||(last==='"'||last==="'"||last==="`"))&&first!==last){throw new $SyntaxError("property names with quotes must have matching quotes")}if(part==="constructor"||!isOwn){skipFurtherCaching=true}intrinsicBaseName+="."+part;intrinsicRealName="%"+intrinsicBaseName+"%";if(hasOwn(INTRINSICS,intrinsicRealName)){value=INTRINSICS[intrinsicRealName]}else if(value!=null){if(!(part in value)){if(!allowMissing){throw new $TypeError("base intrinsic for "+name+" exists, but the property is not available.")}return void undefined}if($gOPD&&i+1>=parts.length){var desc=$gOPD(value,part);isOwn=!!desc;if(isOwn&&"get"in desc&&!("originalValue"in desc.get)){value=desc.get}else{value=value[part]}}else{isOwn=hasOwn(value,part);value=value[part]}if(isOwn&&!skipFurtherCaching){INTRINSICS[intrinsicRealName]=value}}}return value}},{"function-bind":319,has:461,"has-symbols":458}],321:[function(require,module,exports){"use strict";var GetIntrinsic=require("get-intrinsic");var $gOPD=GetIntrinsic("%Object.getOwnPropertyDescriptor%",true);if($gOPD){try{$gOPD([],"length")}catch(e){$gOPD=null}}module.exports=$gOPD},{"get-intrinsic":320}],322:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});const defaultJsonSerializer_js_1=require("./defaultJsonSerializer.js");const extract_files_1=require("extract-files");const form_data_1=__importDefault(require("form-data"));const isExtractableFileEnhanced=value=>(0,extract_files_1.isExtractableFile)(value)||value!==null&&typeof value===`object`&&typeof value.pipe===`function`;const createRequestBody=(query,variables,operationName,jsonSerializer=defaultJsonSerializer_js_1.defaultJsonSerializer)=>{const{clone,files}=(0,extract_files_1.extractFiles)({query:query,variables:variables,operationName:operationName},``,isExtractableFileEnhanced);if(files.size===0){if(!Array.isArray(query)){return jsonSerializer.stringify(clone)}if(typeof variables!==`undefined`&&!Array.isArray(variables)){throw new Error(`Cannot create request body with given variable type, array expected`)}const payload=query.reduce((accu,currentQuery,index)=>{accu.push({query:currentQuery,variables:variables?variables[index]:undefined});return accu},[]);return jsonSerializer.stringify(payload)}const Form=typeof FormData===`undefined`?form_data_1.default:FormData;const form=new Form;form.append(`operations`,jsonSerializer.stringify(clone));const map={};let i=0;files.forEach(paths=>{map[++i]=paths});form.append(`map`,jsonSerializer.stringify(map));i=0;files.forEach((paths,file)=>{form.append(`${++i}`,file)});return form};exports.default=createRequestBody},{"./defaultJsonSerializer.js":323,"extract-files":332,"form-data":334}],323:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultJsonSerializer=void 0;exports.defaultJsonSerializer={parse:JSON.parse,stringify:JSON.stringify}},{}],324:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GraphQLWebSocketClient=void 0;const resolveRequestDocument_js_1=require("./resolveRequestDocument.js");const types_js_1=require("./types.js");const CONNECTION_INIT=`connection_init`;const CONNECTION_ACK=`connection_ack`;const PING=`ping`;const PONG=`pong`;const SUBSCRIBE=`subscribe`;const NEXT=`next`;const ERROR=`error`;const COMPLETE=`complete`;class GraphQLWebSocketMessage{get type(){return this._type}get id(){return this._id}get payload(){return this._payload}constructor(type,payload,id){this._type=type;this._payload=payload;this._id=id}get text(){const result={type:this.type};if(this.id!=null&&this.id!=undefined)result.id=this.id;if(this.payload!=null&&this.payload!=undefined)result.payload=this.payload;return JSON.stringify(result)}static parse(data,f){const{type,payload,id}=JSON.parse(data);return new GraphQLWebSocketMessage(type,f(payload),id)}}class GraphQLWebSocketClient{constructor(socket,{onInit,onAcknowledged,onPing,onPong}){this.socketState={acknowledged:false,lastRequestId:0,subscriptions:{}};this.socket=socket;socket.onopen=async e=>{this.socketState.acknowledged=false;this.socketState.subscriptions={};socket.send(ConnectionInit(onInit?await onInit():null).text)};socket.onclose=e=>{this.socketState.acknowledged=false;this.socketState.subscriptions={}};socket.onerror=e=>{console.error(e)};socket.onmessage=e=>{try{const message=parseMessage(e.data);switch(message.type){case CONNECTION_ACK:{if(this.socketState.acknowledged){console.warn(`Duplicate CONNECTION_ACK message ignored`)}else{this.socketState.acknowledged=true;if(onAcknowledged)onAcknowledged(message.payload)}return}case PING:{if(onPing)onPing(message.payload).then(r=>socket.send(Pong(r).text));else socket.send(Pong(null).text);return}case PONG:{if(onPong)onPong(message.payload);return}}if(!this.socketState.acknowledged){return}if(message.id===undefined||message.id===null||!this.socketState.subscriptions[message.id]){return}const{query,variables,subscriber}=this.socketState.subscriptions[message.id];switch(message.type){case NEXT:{if(!message.payload.errors&&message.payload.data){subscriber.next&&subscriber.next(message.payload.data)}if(message.payload.errors){subscriber.error&&subscriber.error(new types_js_1.ClientError({...message.payload,status:200},{query:query,variables:variables}))}else{}return}case ERROR:{subscriber.error&&subscriber.error(new types_js_1.ClientError({errors:message.payload,status:200},{query:query,variables:variables}));return}case COMPLETE:{subscriber.complete&&subscriber.complete();delete this.socketState.subscriptions[message.id];return}}}catch(e){console.error(e);socket.close(1006)}socket.close(4400,`Unknown graphql-ws message.`)}}makeSubscribe(query,operationName,subscriber,variables){const subscriptionId=(this.socketState.lastRequestId++).toString();this.socketState.subscriptions[subscriptionId]={query:query,variables:variables,subscriber:subscriber};this.socket.send(Subscribe(subscriptionId,{query:query,operationName:operationName,variables:variables}).text);return()=>{this.socket.send(Complete(subscriptionId).text);delete this.socketState.subscriptions[subscriptionId]}}rawRequest(query,variables){return new Promise((resolve,reject)=>{let result;this.rawSubscribe(query,{next:(data,extensions)=>result={data:data,extensions:extensions},error:reject,complete:()=>resolve(result)},variables)})}request(document,variables){return new Promise((resolve,reject)=>{let result;this.subscribe(document,{next:data=>result=data,error:reject,complete:()=>resolve(result)},variables)})}subscribe(document,subscriber,variables){const{query,operationName}=(0,resolveRequestDocument_js_1.resolveRequestDocument)(document);return this.makeSubscribe(query,operationName,subscriber,variables)}rawSubscribe(query,subscriber,variables){return this.makeSubscribe(query,undefined,subscriber,variables)}ping(payload){this.socket.send(Ping(payload).text)}close(){this.socket.close(1e3)}}exports.GraphQLWebSocketClient=GraphQLWebSocketClient;GraphQLWebSocketClient.PROTOCOL=`graphql-transport-ws`;function parseMessage(data,f=a=>a){const m=GraphQLWebSocketMessage.parse(data,f);return m}function ConnectionInit(payload){return new GraphQLWebSocketMessage(CONNECTION_INIT,payload)}function Ping(payload){return new GraphQLWebSocketMessage(PING,payload,undefined)}function Pong(payload){return new GraphQLWebSocketMessage(PONG,payload,undefined)}function Subscribe(id,payload){return new GraphQLWebSocketMessage(SUBSCRIBE,payload,id)}function Complete(id){return new GraphQLWebSocketMessage(COMPLETE,undefined,id)}},{"./resolveRequestDocument.js":328,"./types.js":329}],325:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HeadersInstanceToPlainObject=exports.uppercase=void 0;const uppercase=str=>str.toUpperCase();exports.uppercase=uppercase;const HeadersInstanceToPlainObject=headers=>{const o={};headers.forEach((v,k)=>{o[k]=v});return o};exports.HeadersInstanceToPlainObject=HeadersInstanceToPlainObject},{}],326:[function(require,module,exports){"use strict";var __createBinding=void 0&&(void 0).__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=void 0&&(void 0).__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=void 0&&(void 0).__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __importDefault=void 0&&(void 0).__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.resolveRequestDocument=exports.GraphQLWebSocketClient=exports.gql=exports.batchRequests=exports.request=exports.rawRequest=exports.GraphQLClient=exports.ClientError=void 0;const createRequestBody_js_1=__importDefault(require("./createRequestBody.js"));const defaultJsonSerializer_js_1=require("./defaultJsonSerializer.js");const helpers_js_1=require("./helpers.js");const parseArgs_js_1=require("./parseArgs.js");const resolveRequestDocument_js_1=require("./resolveRequestDocument.js");const types_js_1=require("./types.js");Object.defineProperty(exports,"ClientError",{enumerable:true,get:function(){return types_js_1.ClientError}});const cross_fetch_1=__importStar(require("cross-fetch")),CrossFetch=cross_fetch_1;const resolveHeaders=headers=>{let oHeaders={};if(headers){if(typeof Headers!==`undefined`&&headers instanceof Headers||CrossFetch&&CrossFetch.Headers&&headers instanceof CrossFetch.Headers){oHeaders=(0,helpers_js_1.HeadersInstanceToPlainObject)(headers)}else if(Array.isArray(headers)){headers.forEach(([name,value])=>{if(name&&value!==undefined){oHeaders[name]=value}})}else{oHeaders=headers}}return oHeaders};const cleanQuery=str=>str.replace(/([\s,]|#[^\n\r]+)+/g,` `).trim();const buildRequestConfig=params=>{if(!Array.isArray(params.query)){const params_=params;const search=[`query=${encodeURIComponent(cleanQuery(params_.query))}`];if(params.variables){search.push(`variables=${encodeURIComponent(params_.jsonSerializer.stringify(params_.variables))}`)}if(params_.operationName){search.push(`operationName=${encodeURIComponent(params_.operationName)}`)}return search.join(`&`)}if(typeof params.variables!==`undefined`&&!Array.isArray(params.variables)){throw new Error(`Cannot create query with given variable type, array expected`)}const params_=params;const payload=params.query.reduce((acc,currentQuery,index)=>{acc.push({query:cleanQuery(currentQuery),variables:params_.variables?params_.jsonSerializer.stringify(params_.variables[index]):undefined});return acc},[]);return`query=${encodeURIComponent(params_.jsonSerializer.stringify(payload))}`};const createHttpMethodFetcher=method=>async params=>{const{url,query,variables,operationName,fetch,fetchOptions,middleware}=params;const headers={...params.headers};let queryParams=``;let body=undefined;if(method===`POST`){body=(0,createRequestBody_js_1.default)(query,variables,operationName,fetchOptions.jsonSerializer);if(typeof body===`string`){headers[`Content-Type`]=`application/json`}}else{queryParams=buildRequestConfig({query:query,variables:variables,operationName:operationName,jsonSerializer:fetchOptions.jsonSerializer??defaultJsonSerializer_js_1.defaultJsonSerializer})}const init={method:method,headers:headers,body:body,...fetchOptions};let urlResolved=url;let initResolved=init;if(middleware){const result=await Promise.resolve(middleware({...init,url:url,operationName:operationName,variables:variables}));const{url:urlNew,...initNew}=result;urlResolved=urlNew;initResolved=initNew}if(queryParams){urlResolved=`${urlResolved}?${queryParams}`}return await fetch(urlResolved,initResolved)};class GraphQLClient{constructor(url,requestConfig={}){this.url=url;this.requestConfig=requestConfig;this.rawRequest=async(...args)=>{const[queryOrOptions,variables,requestHeaders]=args;const rawRequestOptions=(0,parseArgs_js_1.parseRawRequestArgs)(queryOrOptions,variables,requestHeaders);const{headers,fetch=cross_fetch_1.default,method=`POST`,requestMiddleware,responseMiddleware,...fetchOptions}=this.requestConfig;const{url}=this;if(rawRequestOptions.signal!==undefined){fetchOptions.signal=rawRequestOptions.signal}const{operationName}=(0,resolveRequestDocument_js_1.resolveRequestDocument)(rawRequestOptions.query);return makeRequest({url:url,query:rawRequestOptions.query,variables:rawRequestOptions.variables,headers:{...resolveHeaders(callOrIdentity(headers)),...resolveHeaders(rawRequestOptions.requestHeaders)},operationName:operationName,fetch:fetch,method:method,fetchOptions:fetchOptions,middleware:requestMiddleware}).then(response=>{if(responseMiddleware){responseMiddleware(response)}return response}).catch(error=>{if(responseMiddleware){responseMiddleware(error)}throw error})}}async request(documentOrOptions,...variablesAndRequestHeaders){const[variables,requestHeaders]=variablesAndRequestHeaders;const requestOptions=(0,parseArgs_js_1.parseRequestArgs)(documentOrOptions,variables,requestHeaders);const{headers,fetch=cross_fetch_1.default,method=`POST`,requestMiddleware,responseMiddleware,...fetchOptions}=this.requestConfig;const{url}=this;if(requestOptions.signal!==undefined){fetchOptions.signal=requestOptions.signal}const{query,operationName}=(0,resolveRequestDocument_js_1.resolveRequestDocument)(requestOptions.document);return makeRequest({url:url,query:query,variables:requestOptions.variables,headers:{...resolveHeaders(callOrIdentity(headers)),...resolveHeaders(requestOptions.requestHeaders)},operationName:operationName,fetch:fetch,method:method,fetchOptions:fetchOptions,middleware:requestMiddleware}).then(response=>{if(responseMiddleware){responseMiddleware(response)}return response.data}).catch(error=>{if(responseMiddleware){responseMiddleware(error)}throw error})}batchRequests(documentsOrOptions,requestHeaders){const batchRequestOptions=(0,parseArgs_js_1.parseBatchRequestArgs)(documentsOrOptions,requestHeaders);const{headers,...fetchOptions}=this.requestConfig;if(batchRequestOptions.signal!==undefined){fetchOptions.signal=batchRequestOptions.signal}const queries=batchRequestOptions.documents.map(({document})=>(0,resolveRequestDocument_js_1.resolveRequestDocument)(document).query);const variables=batchRequestOptions.documents.map(({variables})=>variables);return makeRequest({url:this.url,query:queries,variables:variables,headers:{...resolveHeaders(callOrIdentity(headers)),...resolveHeaders(batchRequestOptions.requestHeaders)},operationName:undefined,fetch:this.requestConfig.fetch??cross_fetch_1.default,method:this.requestConfig.method||`POST`,fetchOptions:fetchOptions,middleware:this.requestConfig.requestMiddleware}).then(response=>{if(this.requestConfig.responseMiddleware){this.requestConfig.responseMiddleware(response)}return response.data}).catch(error=>{if(this.requestConfig.responseMiddleware){this.requestConfig.responseMiddleware(error)}throw error})}setHeaders(headers){this.requestConfig.headers=headers;return this}setHeader(key,value){const{headers}=this.requestConfig;if(headers){headers[key]=value}else{this.requestConfig.headers={[key]:value}}return this}setEndpoint(value){this.url=value;return this}}exports.GraphQLClient=GraphQLClient;const makeRequest=async params=>{const{query,variables,fetchOptions}=params;const fetcher=createHttpMethodFetcher((0,helpers_js_1.uppercase)(params.method??`post`));const isBatchingQuery=Array.isArray(params.query);const response=await fetcher(params);const result=await getResult(response,fetchOptions.jsonSerializer??defaultJsonSerializer_js_1.defaultJsonSerializer);const successfullyReceivedData=Array.isArray(result)?!result.some(({data})=>!data):Boolean(result.data);const successfullyPassedErrorPolicy=Array.isArray(result)||!result.errors||Array.isArray(result.errors)&&!result.errors.length||fetchOptions.errorPolicy===`all`||fetchOptions.errorPolicy===`ignore`;if(response.ok&&successfullyPassedErrorPolicy&&successfullyReceivedData){const{errors,...rest}=Array.isArray(result)?result:result;const data=fetchOptions.errorPolicy===`ignore`?rest:result;const dataEnvelope=isBatchingQuery?{data:data}:data;return{...dataEnvelope,headers:response.headers,status:response.status}}else{const errorResult=typeof result===`string`?{error:result}:result;throw new types_js_1.ClientError({...errorResult,status:response.status,headers:response.headers},{query:query,variables:variables})}};const rawRequest=async(...args)=>{const[urlOrOptions,query,...variablesAndRequestHeaders]=args;const requestOptions=(0,parseArgs_js_1.parseRawRequestExtendedArgs)(urlOrOptions,query,...variablesAndRequestHeaders);const client=new GraphQLClient(requestOptions.url);return client.rawRequest({...requestOptions})};exports.rawRequest=rawRequest;async function request(urlOrOptions,document,...variablesAndRequestHeaders){const requestOptions=(0,parseArgs_js_1.parseRequestExtendedArgs)(urlOrOptions,document,...variablesAndRequestHeaders);const client=new GraphQLClient(requestOptions.url);return client.request({...requestOptions})}exports.request=request;const batchRequests=async(...args)=>{const params=parseBatchRequestsArgsExtended(args);const client=new GraphQLClient(params.url);return client.batchRequests(params)};exports.batchRequests=batchRequests;const parseBatchRequestsArgsExtended=args=>{if(args.length===1){return args[0]}else{return{url:args[0],documents:args[1],requestHeaders:args[2],signal:undefined}}};exports.default=request;const getResult=async(response,jsonSerializer)=>{let contentType;response.headers.forEach((value,key)=>{if(key.toLowerCase()===`content-type`){contentType=value}});if(contentType&&(contentType.toLowerCase().startsWith(`application/json`)||contentType.toLowerCase().startsWith(`application/graphql+json`)||contentType.toLowerCase().startsWith(`application/graphql-response+json`))){return jsonSerializer.parse(await response.text())}else{return response.text()}};const callOrIdentity=value=>{return typeof value===`function`?value():value};const gql=(chunks,...variables)=>{return chunks.reduce((accumulator,chunk,index)=>`${accumulator}${chunk}${index in variables?variables[index]:``}`,``)};exports.gql=gql;var graphql_ws_js_1=require("./graphql-ws.js");Object.defineProperty(exports,"GraphQLWebSocketClient",{enumerable:true,get:function(){return graphql_ws_js_1.GraphQLWebSocketClient}});var resolveRequestDocument_js_2=require("./resolveRequestDocument.js");Object.defineProperty(exports,"resolveRequestDocument",{enumerable:true,get:function(){return resolveRequestDocument_js_2.resolveRequestDocument}})},{"./createRequestBody.js":322,"./defaultJsonSerializer.js":323,"./graphql-ws.js":324,"./helpers.js":325,"./parseArgs.js":327,"./resolveRequestDocument.js":328,"./types.js":329,"cross-fetch":282}],327:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseRawRequestExtendedArgs=exports.parseRequestExtendedArgs=exports.parseBatchRequestArgs=exports.parseRawRequestArgs=exports.parseRequestArgs=void 0;const parseRequestArgs=(documentOrOptions,variables,requestHeaders)=>{return documentOrOptions.document?documentOrOptions:{document:documentOrOptions,variables:variables,requestHeaders:requestHeaders,signal:undefined}};exports.parseRequestArgs=parseRequestArgs;const parseRawRequestArgs=(queryOrOptions,variables,requestHeaders)=>{return queryOrOptions.query?queryOrOptions:{query:queryOrOptions,variables:variables,requestHeaders:requestHeaders,signal:undefined}};exports.parseRawRequestArgs=parseRawRequestArgs;const parseBatchRequestArgs=(documentsOrOptions,requestHeaders)=>{return documentsOrOptions.documents?documentsOrOptions:{documents:documentsOrOptions,requestHeaders:requestHeaders,signal:undefined}};exports.parseBatchRequestArgs=parseBatchRequestArgs;const parseRequestExtendedArgs=(urlOrOptions,document,...variablesAndRequestHeaders)=>{const[variables,requestHeaders]=variablesAndRequestHeaders;return urlOrOptions.document?urlOrOptions:{url:urlOrOptions,document:document,variables:variables,requestHeaders:requestHeaders,signal:undefined}};exports.parseRequestExtendedArgs=parseRequestExtendedArgs;const parseRawRequestExtendedArgs=(urlOrOptions,query,...variablesAndRequestHeaders)=>{const[variables,requestHeaders]=variablesAndRequestHeaders;return urlOrOptions.query?urlOrOptions:{url:urlOrOptions,query:query,variables:variables,requestHeaders:requestHeaders,signal:undefined}};exports.parseRawRequestExtendedArgs=parseRawRequestExtendedArgs},{}],328:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.resolveRequestDocument=void 0;const graphql_1=require("graphql");const extractOperationName=document=>{let operationName=undefined;const operationDefinitions=document.definitions.filter(definition=>definition.kind===`OperationDefinition`);if(operationDefinitions.length===1){operationName=operationDefinitions[0]?.name?.value}return operationName};const resolveRequestDocument=document=>{if(typeof document===`string`){let operationName=undefined;try{const parsedDocument=(0,graphql_1.parse)(document);operationName=extractOperationName(parsedDocument)}catch(err){}return{query:document,operationName:operationName}}const operationName=extractOperationName(document);return{query:(0,graphql_1.print)(document),operationName:operationName}};exports.resolveRequestDocument=resolveRequestDocument},{graphql:346}],329:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ClientError=void 0;class ClientError extends Error{constructor(response,request){const message=`${ClientError.extractMessage(response)}: ${JSON.stringify({response:response,request:request})}`;super(message);Object.setPrototypeOf(this,ClientError.prototype);this.response=response;this.request=request;if(typeof Error.captureStackTrace===`function`){Error.captureStackTrace(this,ClientError)}}static extractMessage(response){return response.errors?.[0]?.message??`GraphQL Error (Code: ${response.status})`}}exports.ClientError=ClientError},{}],330:[function(require,module,exports){"use strict";module.exports=function ReactNativeFile(_ref){var uri=_ref.uri,name=_ref.name,type=_ref.type;this.uri=uri;this.name=name;this.type=type}},{}],331:[function(require,module,exports){"use strict";var defaultIsExtractableFile=require("./isExtractableFile");module.exports=function extractFiles(value,path,isExtractableFile){if(path===void 0){path=""}if(isExtractableFile===void 0){isExtractableFile=defaultIsExtractableFile}var clone;var files=new Map;function addFile(paths,file){var storedPaths=files.get(file);if(storedPaths)storedPaths.push.apply(storedPaths,paths);else files.set(file,paths)}if(isExtractableFile(value)){clone=null;addFile([path],value)}else{var prefix=path?path+".":"";if(typeof FileList!=="undefined"&&value instanceof FileList)clone=Array.prototype.map.call(value,function(file,i){addFile([""+prefix+i],file);return null});else if(Array.isArray(value))clone=value.map(function(child,i){var result=extractFiles(child,""+prefix+i,isExtractableFile);result.files.forEach(addFile);return result.clone});else if(value&&value.constructor===Object){clone={};for(var i in value){var result=extractFiles(value[i],""+prefix+i,isExtractableFile);result.files.forEach(addFile);clone[i]=result.clone}}else clone=value}return{clone:clone,files:files}}},{"./isExtractableFile":333}],332:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ReactNativeFile",{enumerable:true,get:function(){return _ReactNativeFile.default}});Object.defineProperty(exports,"extractFiles",{enumerable:true,get:function(){return _extractFiles.default}});Object.defineProperty(exports,"isExtractableFile",{enumerable:true,get:function(){return _isExtractableFile.default}});var _ReactNativeFile=_interopRequireDefault(require("./ReactNativeFile.js"));var _extractFiles=_interopRequireDefault(require("./extractFiles.js"));var _isExtractableFile=_interopRequireDefault(require("./isExtractableFile.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./ReactNativeFile.js":330,"./extractFiles.js":331,"./isExtractableFile.js":333}],333:[function(require,module,exports){"use strict";var ReactNativeFile=require("./ReactNativeFile");module.exports=function isExtractableFile(value){return typeof File!=="undefined"&&value instanceof File||typeof Blob!=="undefined"&&value instanceof Blob||value instanceof ReactNativeFile}},{"./ReactNativeFile":330}],334:[function(require,module,exports){arguments[4][317][0].apply(exports,arguments)},{dup:317}],335:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GraphQLError=void 0;exports.formatError=formatError;exports.printError=printError;var _isObjectLike=require("../jsutils/isObjectLike.mjs");var _location=require("../language/location.mjs");var _printLocation=require("../language/printLocation.mjs");function toNormalizedOptions(args){const firstArg=args[0];if(firstArg==null||"kind"in firstArg||"length"in firstArg){return{nodes:firstArg,source:args[1],positions:args[2],path:args[3],originalError:args[4],extensions:args[5]}}return firstArg}class GraphQLError extends Error{constructor(message,...rawArgs){var _this$nodes,_nodeLocations$,_ref;const{nodes,source,positions,path,originalError,extensions}=toNormalizedOptions(rawArgs);super(message);this.name="GraphQLError";this.path=path!==null&&path!==void 0?path:undefined;this.originalError=originalError!==null&&originalError!==void 0?originalError:undefined;this.nodes=undefinedIfEmpty(Array.isArray(nodes)?nodes:nodes?[nodes]:undefined);const nodeLocations=undefinedIfEmpty((_this$nodes=this.nodes)===null||_this$nodes===void 0?void 0:_this$nodes.map(node=>node.loc).filter(loc=>loc!=null));this.source=source!==null&&source!==void 0?source:nodeLocations===null||nodeLocations===void 0?void 0:(_nodeLocations$=nodeLocations[0])===null||_nodeLocations$===void 0?void 0:_nodeLocations$.source;this.positions=positions!==null&&positions!==void 0?positions:nodeLocations===null||nodeLocations===void 0?void 0:nodeLocations.map(loc=>loc.start);this.locations=positions&&source?positions.map(pos=>(0,_location.getLocation)(source,pos)):nodeLocations===null||nodeLocations===void 0?void 0:nodeLocations.map(loc=>(0,_location.getLocation)(loc.source,loc.start));const originalExtensions=(0,_isObjectLike.isObjectLike)(originalError===null||originalError===void 0?void 0:originalError.extensions)?originalError===null||originalError===void 0?void 0:originalError.extensions:undefined;this.extensions=(_ref=extensions!==null&&extensions!==void 0?extensions:originalExtensions)!==null&&_ref!==void 0?_ref:Object.create(null);Object.defineProperties(this,{message:{writable:true,enumerable:true},name:{enumerable:false},nodes:{enumerable:false},source:{enumerable:false},positions:{enumerable:false},originalError:{enumerable:false}});if(originalError!==null&&originalError!==void 0&&originalError.stack){Object.defineProperty(this,"stack",{value:originalError.stack,writable:true,configurable:true})}else if(Error.captureStackTrace){Error.captureStackTrace(this,GraphQLError)}else{Object.defineProperty(this,"stack",{value:Error().stack,writable:true,configurable:true})}}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let output=this.message;if(this.nodes){for(const node of this.nodes){if(node.loc){output+="\n\n"+(0,_printLocation.printLocation)(node.loc)}}}else if(this.source&&this.locations){for(const location of this.locations){output+="\n\n"+(0,_printLocation.printSourceLocation)(this.source,location)}}return output}toJSON(){const formattedError={message:this.message};if(this.locations!=null){formattedError.locations=this.locations}if(this.path!=null){formattedError.path=this.path}if(this.extensions!=null&&Object.keys(this.extensions).length>0){formattedError.extensions=this.extensions}return formattedError}}exports.GraphQLError=GraphQLError;function undefinedIfEmpty(array){return array===undefined||array.length===0?undefined:array}function printError(error){return error.toString()}function formatError(error){return error.toJSON()}},{"../jsutils/isObjectLike.mjs":357,"../language/location.mjs":377,"../language/printLocation.mjs":380}],336:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"GraphQLError",{enumerable:true,get:function(){return _GraphQLError.GraphQLError}});Object.defineProperty(exports,"formatError",{enumerable:true,get:function(){return _GraphQLError.formatError}});Object.defineProperty(exports,"locatedError",{enumerable:true,get:function(){return _locatedError.locatedError}});Object.defineProperty(exports,"printError",{enumerable:true,get:function(){return _GraphQLError.printError}});Object.defineProperty(exports,"syntaxError",{enumerable:true,get:function(){return _syntaxError.syntaxError}});var _GraphQLError=require("./GraphQLError.mjs");var _syntaxError=require("./syntaxError.mjs");var _locatedError=require("./locatedError.mjs")},{"./GraphQLError.mjs":335,"./locatedError.mjs":337,"./syntaxError.mjs":338}],337:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.locatedError=locatedError;var _toError=require("../jsutils/toError.mjs");var _GraphQLError=require("./GraphQLError.mjs");function locatedError(rawOriginalError,nodes,path){var _nodes;const originalError=(0,_toError.toError)(rawOriginalError);if(isLocatedGraphQLError(originalError)){return originalError}return new _GraphQLError.GraphQLError(originalError.message,{nodes:(_nodes=originalError.nodes)!==null&&_nodes!==void 0?_nodes:nodes,source:originalError.source,positions:originalError.positions,path:path,originalError:originalError})}function isLocatedGraphQLError(error){return Array.isArray(error.path)}},{"../jsutils/toError.mjs":368,"./GraphQLError.mjs":335}],338:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.syntaxError=syntaxError;var _GraphQLError=require("./GraphQLError.mjs");function syntaxError(source,position,description){return new _GraphQLError.GraphQLError(`Syntax Error: ${description}`,{source:source,positions:[position]})}},{"./GraphQLError.mjs":335}],339:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.collectFields=collectFields;exports.collectSubfields=collectSubfields;var _kinds=require("../language/kinds.mjs");var _definition=require("../type/definition.mjs");var _directives=require("../type/directives.mjs");var _typeFromAST=require("../utilities/typeFromAST.mjs");var _values=require("./values.mjs");function collectFields(schema,fragments,variableValues,runtimeType,selectionSet){const fields=new Map;collectFieldsImpl(schema,fragments,variableValues,runtimeType,selectionSet,fields,new Set);return fields}function collectSubfields(schema,fragments,variableValues,returnType,fieldNodes){const subFieldNodes=new Map;const visitedFragmentNames=new Set;for(const node of fieldNodes){if(node.selectionSet){collectFieldsImpl(schema,fragments,variableValues,returnType,node.selectionSet,subFieldNodes,visitedFragmentNames)}}return subFieldNodes}function collectFieldsImpl(schema,fragments,variableValues,runtimeType,selectionSet,fields,visitedFragmentNames){for(const selection of selectionSet.selections){switch(selection.kind){case _kinds.Kind.FIELD:{if(!shouldIncludeNode(variableValues,selection)){continue}const name=getFieldEntryKey(selection);const fieldList=fields.get(name);if(fieldList!==undefined){fieldList.push(selection)}else{fields.set(name,[selection])}break}case _kinds.Kind.INLINE_FRAGMENT:{if(!shouldIncludeNode(variableValues,selection)||!doesFragmentConditionMatch(schema,selection,runtimeType)){continue}collectFieldsImpl(schema,fragments,variableValues,runtimeType,selection.selectionSet,fields,visitedFragmentNames);break}case _kinds.Kind.FRAGMENT_SPREAD:{const fragName=selection.name.value;if(visitedFragmentNames.has(fragName)||!shouldIncludeNode(variableValues,selection)){continue}visitedFragmentNames.add(fragName);const fragment=fragments[fragName];if(!fragment||!doesFragmentConditionMatch(schema,fragment,runtimeType)){continue}collectFieldsImpl(schema,fragments,variableValues,runtimeType,fragment.selectionSet,fields,visitedFragmentNames);break}}}}function shouldIncludeNode(variableValues,node){const skip=(0,_values.getDirectiveValues)(_directives.GraphQLSkipDirective,node,variableValues);if((skip===null||skip===void 0?void 0:skip.if)===true){return false}const include=(0,_values.getDirectiveValues)(_directives.GraphQLIncludeDirective,node,variableValues);if((include===null||include===void 0?void 0:include.if)===false){return false}return true}function doesFragmentConditionMatch(schema,fragment,type){const typeConditionNode=fragment.typeCondition;if(!typeConditionNode){return true}const conditionalType=(0,_typeFromAST.typeFromAST)(schema,typeConditionNode);if(conditionalType===type){return true}if((0,_definition.isAbstractType)(conditionalType)){return schema.isSubType(conditionalType,type)}return false}function getFieldEntryKey(node){return node.alias?node.alias.value:node.name.value}},{"../language/kinds.mjs":375,"../type/definition.mjs":387,"../type/directives.mjs":388,"../utilities/typeFromAST.mjs":414,"./values.mjs":344}],340:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.assertValidExecutionArguments=assertValidExecutionArguments;exports.buildExecutionContext=buildExecutionContext;exports.buildResolveInfo=buildResolveInfo;exports.defaultTypeResolver=exports.defaultFieldResolver=void 0;exports.execute=execute;exports.executeSync=executeSync;exports.getFieldDef=getFieldDef;var _devAssert=require("../jsutils/devAssert.mjs");var _inspect=require("../jsutils/inspect.mjs");var _invariant=require("../jsutils/invariant.mjs");var _isIterableObject=require("../jsutils/isIterableObject.mjs");var _isObjectLike=require("../jsutils/isObjectLike.mjs");var _isPromise=require("../jsutils/isPromise.mjs");var _memoize=require("../jsutils/memoize3.mjs");var _Path=require("../jsutils/Path.mjs");var _promiseForObject=require("../jsutils/promiseForObject.mjs");var _promiseReduce=require("../jsutils/promiseReduce.mjs");var _GraphQLError=require("../error/GraphQLError.mjs");var _locatedError=require("../error/locatedError.mjs");var _ast=require("../language/ast.mjs");var _kinds=require("../language/kinds.mjs");var _definition=require("../type/definition.mjs");var _introspection=require("../type/introspection.mjs");var _validate=require("../type/validate.mjs");var _collectFields=require("./collectFields.mjs");var _values=require("./values.mjs");const collectSubfields=(0,_memoize.memoize3)((exeContext,returnType,fieldNodes)=>(0,_collectFields.collectSubfields)(exeContext.schema,exeContext.fragments,exeContext.variableValues,returnType,fieldNodes));function execute(args){arguments.length<2||(0,_devAssert.devAssert)(false,"graphql@16 dropped long-deprecated support for positional arguments, please pass an object instead.");const{schema,document,variableValues,rootValue}=args;assertValidExecutionArguments(schema,document,variableValues);const exeContext=buildExecutionContext(args);if(!("schema"in exeContext)){return{errors:exeContext}}try{const{operation}=exeContext;const result=executeOperation(exeContext,operation,rootValue);if((0,_isPromise.isPromise)(result)){return result.then(data=>buildResponse(data,exeContext.errors),error=>{exeContext.errors.push(error);return buildResponse(null,exeContext.errors)})}return buildResponse(result,exeContext.errors)}catch(error){exeContext.errors.push(error);return buildResponse(null,exeContext.errors)}}function executeSync(args){const result=execute(args);if((0,_isPromise.isPromise)(result)){throw new Error("GraphQL execution failed to complete synchronously.")}return result}function buildResponse(data,errors){return errors.length===0?{data:data}:{errors:errors,data:data}}function assertValidExecutionArguments(schema,document,rawVariableValues){document||(0,_devAssert.devAssert)(false,"Must provide document.");(0,_validate.assertValidSchema)(schema);rawVariableValues==null||(0,_isObjectLike.isObjectLike)(rawVariableValues)||(0,_devAssert.devAssert)(false,"Variables must be provided as an Object where each property is a variable value. Perhaps look to see if an unparsed JSON string was provided.")}function buildExecutionContext(args){var _definition$name,_operation$variableDe;const{schema,document,rootValue,contextValue,variableValues:rawVariableValues,operationName,fieldResolver,typeResolver,subscribeFieldResolver}=args;let operation;const fragments=Object.create(null);for(const definition of document.definitions){switch(definition.kind){case _kinds.Kind.OPERATION_DEFINITION:if(operationName==null){if(operation!==undefined){return[new _GraphQLError.GraphQLError("Must provide operation name if query contains multiple operations.")]}operation=definition}else if(((_definition$name=definition.name)===null||_definition$name===void 0?void 0:_definition$name.value)===operationName){operation=definition}break;case _kinds.Kind.FRAGMENT_DEFINITION:fragments[definition.name.value]=definition;break;default:}}if(!operation){if(operationName!=null){return[new _GraphQLError.GraphQLError(`Unknown operation named "${operationName}".`)]}return[new _GraphQLError.GraphQLError("Must provide an operation.")]}const variableDefinitions=(_operation$variableDe=operation.variableDefinitions)!==null&&_operation$variableDe!==void 0?_operation$variableDe:[];const coercedVariableValues=(0,_values.getVariableValues)(schema,variableDefinitions,rawVariableValues!==null&&rawVariableValues!==void 0?rawVariableValues:{},{maxErrors:50});if(coercedVariableValues.errors){return coercedVariableValues.errors}return{schema:schema,fragments:fragments,rootValue:rootValue,contextValue:contextValue,operation:operation,variableValues:coercedVariableValues.coerced,fieldResolver:fieldResolver!==null&&fieldResolver!==void 0?fieldResolver:defaultFieldResolver,typeResolver:typeResolver!==null&&typeResolver!==void 0?typeResolver:defaultTypeResolver,subscribeFieldResolver:subscribeFieldResolver!==null&&subscribeFieldResolver!==void 0?subscribeFieldResolver:defaultFieldResolver,errors:[]}}function executeOperation(exeContext,operation,rootValue){const rootType=exeContext.schema.getRootType(operation.operation);if(rootType==null){throw new _GraphQLError.GraphQLError(`Schema is not configured to execute ${operation.operation} operation.`,{nodes:operation})}const rootFields=(0,_collectFields.collectFields)(exeContext.schema,exeContext.fragments,exeContext.variableValues,rootType,operation.selectionSet);const path=undefined;switch(operation.operation){case _ast.OperationTypeNode.QUERY:return executeFields(exeContext,rootType,rootValue,path,rootFields);case _ast.OperationTypeNode.MUTATION:return executeFieldsSerially(exeContext,rootType,rootValue,path,rootFields);case _ast.OperationTypeNode.SUBSCRIPTION:return executeFields(exeContext,rootType,rootValue,path,rootFields)}}function executeFieldsSerially(exeContext,parentType,sourceValue,path,fields){return(0,_promiseReduce.promiseReduce)(fields.entries(),(results,[responseName,fieldNodes])=>{const fieldPath=(0,_Path.addPath)(path,responseName,parentType.name);const result=executeField(exeContext,parentType,sourceValue,fieldNodes,fieldPath);if(result===undefined){return results}if((0,_isPromise.isPromise)(result)){return result.then(resolvedResult=>{results[responseName]=resolvedResult;return results})}results[responseName]=result;return results},Object.create(null))}function executeFields(exeContext,parentType,sourceValue,path,fields){const results=Object.create(null);let containsPromise=false;for(const[responseName,fieldNodes]of fields.entries()){const fieldPath=(0,_Path.addPath)(path,responseName,parentType.name);const result=executeField(exeContext,parentType,sourceValue,fieldNodes,fieldPath);if(result!==undefined){results[responseName]=result;if((0,_isPromise.isPromise)(result)){containsPromise=true}}}if(!containsPromise){return results}return(0,_promiseForObject.promiseForObject)(results)}function executeField(exeContext,parentType,source,fieldNodes,path){var _fieldDef$resolve;const fieldDef=getFieldDef(exeContext.schema,parentType,fieldNodes[0]);if(!fieldDef){return}const returnType=fieldDef.type;const resolveFn=(_fieldDef$resolve=fieldDef.resolve)!==null&&_fieldDef$resolve!==void 0?_fieldDef$resolve:exeContext.fieldResolver;const info=buildResolveInfo(exeContext,fieldDef,fieldNodes,parentType,path);try{const args=(0,_values.getArgumentValues)(fieldDef,fieldNodes[0],exeContext.variableValues);const contextValue=exeContext.contextValue;const result=resolveFn(source,args,contextValue,info);let completed;if((0,_isPromise.isPromise)(result)){completed=result.then(resolved=>completeValue(exeContext,returnType,fieldNodes,info,path,resolved))}else{completed=completeValue(exeContext,returnType,fieldNodes,info,path,result)}if((0,_isPromise.isPromise)(completed)){return completed.then(undefined,rawError=>{const error=(0,_locatedError.locatedError)(rawError,fieldNodes,(0,_Path.pathToArray)(path));return handleFieldError(error,returnType,exeContext)})}return completed}catch(rawError){const error=(0,_locatedError.locatedError)(rawError,fieldNodes,(0,_Path.pathToArray)(path));return handleFieldError(error,returnType,exeContext)}}function buildResolveInfo(exeContext,fieldDef,fieldNodes,parentType,path){return{fieldName:fieldDef.name,fieldNodes:fieldNodes,returnType:fieldDef.type,parentType:parentType,path:path,schema:exeContext.schema,fragments:exeContext.fragments,rootValue:exeContext.rootValue,operation:exeContext.operation,variableValues:exeContext.variableValues}}function handleFieldError(error,returnType,exeContext){if((0,_definition.isNonNullType)(returnType)){throw error}exeContext.errors.push(error);return null}function completeValue(exeContext,returnType,fieldNodes,info,path,result){if(result instanceof Error){throw result}if((0,_definition.isNonNullType)(returnType)){const completed=completeValue(exeContext,returnType.ofType,fieldNodes,info,path,result);if(completed===null){throw new Error(`Cannot return null for non-nullable field ${info.parentType.name}.${info.fieldName}.`)}return completed}if(result==null){return null}if((0,_definition.isListType)(returnType)){return completeListValue(exeContext,returnType,fieldNodes,info,path,result)}if((0,_definition.isLeafType)(returnType)){return completeLeafValue(returnType,result)}if((0,_definition.isAbstractType)(returnType)){return completeAbstractValue(exeContext,returnType,fieldNodes,info,path,result)}if((0,_definition.isObjectType)(returnType)){return completeObjectValue(exeContext,returnType,fieldNodes,info,path,result)}false||(0,_invariant.invariant)(false,"Cannot complete value of unexpected output type: "+(0,_inspect.inspect)(returnType))}function completeListValue(exeContext,returnType,fieldNodes,info,path,result){if(!(0,_isIterableObject.isIterableObject)(result)){throw new _GraphQLError.GraphQLError(`Expected Iterable, but did not find one for field "${info.parentType.name}.${info.fieldName}".`)}const itemType=returnType.ofType;let containsPromise=false;const completedResults=Array.from(result,(item,index)=>{const itemPath=(0,_Path.addPath)(path,index,undefined);try{let completedItem;if((0,_isPromise.isPromise)(item)){completedItem=item.then(resolved=>completeValue(exeContext,itemType,fieldNodes,info,itemPath,resolved))}else{completedItem=completeValue(exeContext,itemType,fieldNodes,info,itemPath,item)}if((0,_isPromise.isPromise)(completedItem)){containsPromise=true;return completedItem.then(undefined,rawError=>{const error=(0,_locatedError.locatedError)(rawError,fieldNodes,(0,_Path.pathToArray)(itemPath));return handleFieldError(error,itemType,exeContext)})}return completedItem}catch(rawError){const error=(0,_locatedError.locatedError)(rawError,fieldNodes,(0,_Path.pathToArray)(itemPath));return handleFieldError(error,itemType,exeContext)}});return containsPromise?Promise.all(completedResults):completedResults}function completeLeafValue(returnType,result){const serializedResult=returnType.serialize(result);if(serializedResult==null){throw new Error(`Expected \`${(0,_inspect.inspect)(returnType)}.serialize(${(0,_inspect.inspect)(result)})\` to `+`return non-nullable value, returned: ${(0,_inspect.inspect)(serializedResult)}`)}return serializedResult}function completeAbstractValue(exeContext,returnType,fieldNodes,info,path,result){var _returnType$resolveTy;const resolveTypeFn=(_returnType$resolveTy=returnType.resolveType)!==null&&_returnType$resolveTy!==void 0?_returnType$resolveTy:exeContext.typeResolver;const contextValue=exeContext.contextValue;const runtimeType=resolveTypeFn(result,contextValue,info,returnType);if((0,_isPromise.isPromise)(runtimeType)){return runtimeType.then(resolvedRuntimeType=>completeObjectValue(exeContext,ensureValidRuntimeType(resolvedRuntimeType,exeContext,returnType,fieldNodes,info,result),fieldNodes,info,path,result))}return completeObjectValue(exeContext,ensureValidRuntimeType(runtimeType,exeContext,returnType,fieldNodes,info,result),fieldNodes,info,path,result)}function ensureValidRuntimeType(runtimeTypeName,exeContext,returnType,fieldNodes,info,result){if(runtimeTypeName==null){throw new _GraphQLError.GraphQLError(`Abstract type "${returnType.name}" must resolve to an Object type at runtime for field "${info.parentType.name}.${info.fieldName}". Either the "${returnType.name}" type should provide a "resolveType" function or each possible type should provide an "isTypeOf" function.`,fieldNodes)}if((0,_definition.isObjectType)(runtimeTypeName)){throw new _GraphQLError.GraphQLError("Support for returning GraphQLObjectType from resolveType was removed in graphql-js@16.0.0 please return type name instead.")}if(typeof runtimeTypeName!=="string"){throw new _GraphQLError.GraphQLError(`Abstract type "${returnType.name}" must resolve to an Object type at runtime for field "${info.parentType.name}.${info.fieldName}" with `+`value ${(0,_inspect.inspect)(result)}, received "${(0,_inspect.inspect)(runtimeTypeName)}".`)}const runtimeType=exeContext.schema.getType(runtimeTypeName);if(runtimeType==null){throw new _GraphQLError.GraphQLError(`Abstract type "${returnType.name}" was resolved to a type "${runtimeTypeName}" that does not exist inside the schema.`,{nodes:fieldNodes})}if(!(0,_definition.isObjectType)(runtimeType)){throw new _GraphQLError.GraphQLError(`Abstract type "${returnType.name}" was resolved to a non-object type "${runtimeTypeName}".`,{nodes:fieldNodes})}if(!exeContext.schema.isSubType(returnType,runtimeType)){throw new _GraphQLError.GraphQLError(`Runtime Object type "${runtimeType.name}" is not a possible type for "${returnType.name}".`,{nodes:fieldNodes})}return runtimeType}function completeObjectValue(exeContext,returnType,fieldNodes,info,path,result){const subFieldNodes=collectSubfields(exeContext,returnType,fieldNodes);if(returnType.isTypeOf){const isTypeOf=returnType.isTypeOf(result,exeContext.contextValue,info);if((0,_isPromise.isPromise)(isTypeOf)){return isTypeOf.then(resolvedIsTypeOf=>{if(!resolvedIsTypeOf){throw invalidReturnTypeError(returnType,result,fieldNodes)}return executeFields(exeContext,returnType,result,path,subFieldNodes)})}if(!isTypeOf){throw invalidReturnTypeError(returnType,result,fieldNodes)}}return executeFields(exeContext,returnType,result,path,subFieldNodes)}function invalidReturnTypeError(returnType,result,fieldNodes){return new _GraphQLError.GraphQLError(`Expected value of type "${returnType.name}" but got: ${(0,_inspect.inspect)(result)}.`,{nodes:fieldNodes})}const defaultTypeResolver=function(value,contextValue,info,abstractType){if((0,_isObjectLike.isObjectLike)(value)&&typeof value.__typename==="string"){return value.__typename}const possibleTypes=info.schema.getPossibleTypes(abstractType);const promisedIsTypeOfResults=[];for(let i=0;i<possibleTypes.length;i++){const type=possibleTypes[i];if(type.isTypeOf){const isTypeOfResult=type.isTypeOf(value,contextValue,info);if((0,_isPromise.isPromise)(isTypeOfResult)){promisedIsTypeOfResults[i]=isTypeOfResult}else if(isTypeOfResult){return type.name}}}if(promisedIsTypeOfResults.length){return Promise.all(promisedIsTypeOfResults).then(isTypeOfResults=>{for(let i=0;i<isTypeOfResults.length;i++){if(isTypeOfResults[i]){return possibleTypes[i].name}}})}};exports.defaultTypeResolver=defaultTypeResolver;const defaultFieldResolver=function(source,args,contextValue,info){if((0,_isObjectLike.isObjectLike)(source)||typeof source==="function"){const property=source[info.fieldName];if(typeof property==="function"){return source[info.fieldName](args,contextValue,info)}return property}};exports.defaultFieldResolver=defaultFieldResolver;function getFieldDef(schema,parentType,fieldNode){const fieldName=fieldNode.name.value;if(fieldName===_introspection.SchemaMetaFieldDef.name&&schema.getQueryType()===parentType){return _introspection.SchemaMetaFieldDef}else if(fieldName===_introspection.TypeMetaFieldDef.name&&schema.getQueryType()===parentType){return _introspection.TypeMetaFieldDef}else if(fieldName===_introspection.TypeNameMetaFieldDef.name){return _introspection.TypeNameMetaFieldDef}return parentType.getFields()[fieldName]}},{"../error/GraphQLError.mjs":335,"../error/locatedError.mjs":337,"../jsutils/Path.mjs":347,"../jsutils/devAssert.mjs":348,"../jsutils/inspect.mjs":352,"../jsutils/invariant.mjs":354,"../jsutils/isIterableObject.mjs":356,"../jsutils/isObjectLike.mjs":357,"../jsutils/isPromise.mjs":358,"../jsutils/memoize3.mjs":362,"../jsutils/promiseForObject.mjs":365,"../jsutils/promiseReduce.mjs":366,"../language/ast.mjs":370,"../language/kinds.mjs":375,"../type/definition.mjs":387,"../type/introspection.mjs":390,"../type/validate.mjs":393,"./collectFields.mjs":339,"./values.mjs":344}],341:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"createSourceEventStream",{enumerable:true,get:function(){return _subscribe.createSourceEventStream}});Object.defineProperty(exports,"defaultFieldResolver",{enumerable:true,get:function(){return _execute.defaultFieldResolver}});Object.defineProperty(exports,"defaultTypeResolver",{enumerable:true,get:function(){return _execute.defaultTypeResolver}});Object.defineProperty(exports,"execute",{enumerable:true,get:function(){return _execute.execute}});Object.defineProperty(exports,"executeSync",{enumerable:true,get:function(){return _execute.executeSync}});Object.defineProperty(exports,"getArgumentValues",{enumerable:true,get:function(){return _values.getArgumentValues}});Object.defineProperty(exports,"getDirectiveValues",{enumerable:true,get:function(){return _values.getDirectiveValues}});Object.defineProperty(exports,"getVariableValues",{enumerable:true,get:function(){return _values.getVariableValues}});Object.defineProperty(exports,"responsePathAsArray",{enumerable:true,get:function(){return _Path.pathToArray}});Object.defineProperty(exports,"subscribe",{enumerable:true,get:function(){return _subscribe.subscribe}});var _Path=require("../jsutils/Path.mjs");var _execute=require("./execute.mjs");var _subscribe=require("./subscribe.mjs");var _values=require("./values.mjs")},{"../jsutils/Path.mjs":347,"./execute.mjs":340,"./subscribe.mjs":343,"./values.mjs":344}],342:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapAsyncIterator=mapAsyncIterator;function mapAsyncIterator(iterable,callback){const iterator=iterable[Symbol.asyncIterator]();async function mapResult(result){if(result.done){return result}try{return{value:await callback(result.value),done:false}}catch(error){if(typeof iterator.return==="function"){try{await iterator.return()}catch(_e){}}throw error}}return{async next(){return mapResult(await iterator.next())},async return(){return typeof iterator.return==="function"?mapResult(await iterator.return()):{value:undefined,done:true}},async throw(error){if(typeof iterator.throw==="function"){return mapResult(await iterator.throw(error))}throw error},[Symbol.asyncIterator](){return this}}}},{}],343:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSourceEventStream=createSourceEventStream;exports.subscribe=subscribe;var _devAssert=require("../jsutils/devAssert.mjs");var _inspect=require("../jsutils/inspect.mjs");var _isAsyncIterable=require("../jsutils/isAsyncIterable.mjs");var _Path=require("../jsutils/Path.mjs");var _GraphQLError=require("../error/GraphQLError.mjs");var _locatedError=require("../error/locatedError.mjs");var _collectFields=require("./collectFields.mjs");var _execute=require("./execute.mjs");var _mapAsyncIterator=require("./mapAsyncIterator.mjs");var _values=require("./values.mjs");async function subscribe(args){arguments.length<2||(0,_devAssert.devAssert)(false,"graphql@16 dropped long-deprecated support for positional arguments, please pass an object instead.");const resultOrStream=await createSourceEventStream(args);if(!(0,_isAsyncIterable.isAsyncIterable)(resultOrStream)){return resultOrStream}const mapSourceToResponse=payload=>(0,_execute.execute)({...args,rootValue:payload});return(0,_mapAsyncIterator.mapAsyncIterator)(resultOrStream,mapSourceToResponse)}function toNormalizedArgs(args){const firstArg=args[0];if(firstArg&&"document"in firstArg){return firstArg}return{schema:firstArg,document:args[1],rootValue:args[2],contextValue:args[3],variableValues:args[4],operationName:args[5],subscribeFieldResolver:args[6]}}async function createSourceEventStream(...rawArgs){const args=toNormalizedArgs(rawArgs);const{schema,document,variableValues}=args;(0,_execute.assertValidExecutionArguments)(schema,document,variableValues);const exeContext=(0,_execute.buildExecutionContext)(args);if(!("schema"in exeContext)){return{errors:exeContext}}try{const eventStream=await executeSubscription(exeContext);if(!(0,_isAsyncIterable.isAsyncIterable)(eventStream)){throw new Error("Subscription field must return Async Iterable. "+`Received: ${(0,_inspect.inspect)(eventStream)}.`)}return eventStream}catch(error){if(error instanceof _GraphQLError.GraphQLError){return{errors:[error]}}throw error}}async function executeSubscription(exeContext){const{schema,fragments,operation,variableValues,rootValue}=exeContext;const rootType=schema.getSubscriptionType();if(rootType==null){throw new _GraphQLError.GraphQLError("Schema is not configured to execute subscription operation.",{nodes:operation})}const rootFields=(0,_collectFields.collectFields)(schema,fragments,variableValues,rootType,operation.selectionSet);const[responseName,fieldNodes]=[...rootFields.entries()][0];const fieldDef=(0,_execute.getFieldDef)(schema,rootType,fieldNodes[0]);if(!fieldDef){const fieldName=fieldNodes[0].name.value;throw new _GraphQLError.GraphQLError(`The subscription field "${fieldName}" is not defined.`,{nodes:fieldNodes})}const path=(0,_Path.addPath)(undefined,responseName,rootType.name);const info=(0,_execute.buildResolveInfo)(exeContext,fieldDef,fieldNodes,rootType,path);try{var _fieldDef$subscribe;const args=(0,_values.getArgumentValues)(fieldDef,fieldNodes[0],variableValues);const contextValue=exeContext.contextValue;const resolveFn=(_fieldDef$subscribe=fieldDef.subscribe)!==null&&_fieldDef$subscribe!==void 0?_fieldDef$subscribe:exeContext.subscribeFieldResolver;const eventStream=await resolveFn(rootValue,args,contextValue,info);if(eventStream instanceof Error){throw eventStream}return eventStream}catch(error){throw(0,_locatedError.locatedError)(error,fieldNodes,(0,_Path.pathToArray)(path))}}},{"../error/GraphQLError.mjs":335,"../error/locatedError.mjs":337,"../jsutils/Path.mjs":347,"../jsutils/devAssert.mjs":348,"../jsutils/inspect.mjs":352,"../jsutils/isAsyncIterable.mjs":355,"./collectFields.mjs":339,"./execute.mjs":340,"./mapAsyncIterator.mjs":342,"./values.mjs":344}],344:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getArgumentValues=getArgumentValues;exports.getDirectiveValues=getDirectiveValues;exports.getVariableValues=getVariableValues;var _inspect=require("../jsutils/inspect.mjs");var _keyMap=require("../jsutils/keyMap.mjs");var _printPathArray=require("../jsutils/printPathArray.mjs");var _GraphQLError=require("../error/GraphQLError.mjs");var _kinds=require("../language/kinds.mjs");var _printer=require("../language/printer.mjs");var _definition=require("../type/definition.mjs");var _coerceInputValue=require("../utilities/coerceInputValue.mjs");var _typeFromAST=require("../utilities/typeFromAST.mjs");var _valueFromAST=require("../utilities/valueFromAST.mjs");function getVariableValues(schema,varDefNodes,inputs,options){const errors=[];const maxErrors=options===null||options===void 0?void 0:options.maxErrors;try{const coerced=coerceVariableValues(schema,varDefNodes,inputs,error=>{if(maxErrors!=null&&errors.length>=maxErrors){throw new _GraphQLError.GraphQLError("Too many errors processing variables, error limit reached. Execution aborted.")}errors.push(error)});if(errors.length===0){return{coerced:coerced}}}catch(error){errors.push(error)}return{errors:errors}}function coerceVariableValues(schema,varDefNodes,inputs,onError){const coercedValues={};for(const varDefNode of varDefNodes){const varName=varDefNode.variable.name.value;const varType=(0,_typeFromAST.typeFromAST)(schema,varDefNode.type);if(!(0,_definition.isInputType)(varType)){const varTypeStr=(0,_printer.print)(varDefNode.type);onError(new _GraphQLError.GraphQLError(`Variable "$${varName}" expected value of type "${varTypeStr}" which cannot be used as an input type.`,{nodes:varDefNode.type}));continue}if(!hasOwnProperty(inputs,varName)){if(varDefNode.defaultValue){coercedValues[varName]=(0,_valueFromAST.valueFromAST)(varDefNode.defaultValue,varType)}else if((0,_definition.isNonNullType)(varType)){const varTypeStr=(0,_inspect.inspect)(varType);onError(new _GraphQLError.GraphQLError(`Variable "$${varName}" of required type "${varTypeStr}" was not provided.`,{nodes:varDefNode}))}continue}const value=inputs[varName];if(value===null&&(0,_definition.isNonNullType)(varType)){const varTypeStr=(0,_inspect.inspect)(varType);onError(new _GraphQLError.GraphQLError(`Variable "$${varName}" of non-null type "${varTypeStr}" must not be null.`,{nodes:varDefNode}));continue}coercedValues[varName]=(0,_coerceInputValue.coerceInputValue)(value,varType,(path,invalidValue,error)=>{let prefix=`Variable "$${varName}" got invalid value `+(0,_inspect.inspect)(invalidValue);if(path.length>0){prefix+=` at "${varName}${(0,_printPathArray.printPathArray)(path)}"`}onError(new _GraphQLError.GraphQLError(prefix+"; "+error.message,{nodes:varDefNode,originalError:error.originalError}))})}return coercedValues}function getArgumentValues(def,node,variableValues){var _node$arguments;const coercedValues={};const argumentNodes=(_node$arguments=node.arguments)!==null&&_node$arguments!==void 0?_node$arguments:[];const argNodeMap=(0,_keyMap.keyMap)(argumentNodes,arg=>arg.name.value);for(const argDef of def.args){const name=argDef.name;const argType=argDef.type;const argumentNode=argNodeMap[name];if(!argumentNode){if(argDef.defaultValue!==undefined){coercedValues[name]=argDef.defaultValue}else if((0,_definition.isNonNullType)(argType)){throw new _GraphQLError.GraphQLError(`Argument "${name}" of required type "${(0,_inspect.inspect)(argType)}" `+"was not provided.",{nodes:node})}continue}const valueNode=argumentNode.value;let isNull=valueNode.kind===_kinds.Kind.NULL;if(valueNode.kind===_kinds.Kind.VARIABLE){const variableName=valueNode.name.value;if(variableValues==null||!hasOwnProperty(variableValues,variableName)){if(argDef.defaultValue!==undefined){coercedValues[name]=argDef.defaultValue}else if((0,_definition.isNonNullType)(argType)){throw new _GraphQLError.GraphQLError(`Argument "${name}" of required type "${(0,_inspect.inspect)(argType)}" `+`was provided the variable "$${variableName}" which was not provided a runtime value.`,{nodes:valueNode})}continue}isNull=variableValues[variableName]==null}if(isNull&&(0,_definition.isNonNullType)(argType)){throw new _GraphQLError.GraphQLError(`Argument "${name}" of non-null type "${(0,_inspect.inspect)(argType)}" `+"must not be null.",{nodes:valueNode})}const coercedValue=(0,_valueFromAST.valueFromAST)(valueNode,argType,variableValues);if(coercedValue===undefined){throw new _GraphQLError.GraphQLError(`Argument "${name}" has invalid value ${(0,_printer.print)(valueNode)}.`,{nodes:valueNode})}coercedValues[name]=coercedValue}return coercedValues}function getDirectiveValues(directiveDef,node,variableValues){var _node$directives;const directiveNode=(_node$directives=node.directives)===null||_node$directives===void 0?void 0:_node$directives.find(directive=>directive.name.value===directiveDef.name);if(directiveNode){return getArgumentValues(directiveDef,directiveNode,variableValues)}}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}},{"../error/GraphQLError.mjs":335,"../jsutils/inspect.mjs":352,"../jsutils/keyMap.mjs":359,"../jsutils/printPathArray.mjs":364,"../language/kinds.mjs":375,"../language/printer.mjs":382,"../type/definition.mjs":387,"../utilities/coerceInputValue.mjs":399,"../utilities/typeFromAST.mjs":414,"../utilities/valueFromAST.mjs":415}],345:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.graphql=graphql;exports.graphqlSync=graphqlSync;var _devAssert=require("./jsutils/devAssert.mjs");var _isPromise=require("./jsutils/isPromise.mjs");var _parser=require("./language/parser.mjs");var _validate=require("./type/validate.mjs");var _validate2=require("./validation/validate.mjs");var _execute=require("./execution/execute.mjs");function graphql(args){return new Promise(resolve=>resolve(graphqlImpl(args)))}function graphqlSync(args){const result=graphqlImpl(args);if((0,_isPromise.isPromise)(result)){throw new Error("GraphQL execution failed to complete synchronously.")}return result}function graphqlImpl(args){arguments.length<2||(0,_devAssert.devAssert)(false,"graphql@16 dropped long-deprecated support for positional arguments, please pass an object instead.");const{schema,source,rootValue,contextValue,variableValues,operationName,fieldResolver,typeResolver}=args;const schemaValidationErrors=(0,_validate.validateSchema)(schema);if(schemaValidationErrors.length>0){return{errors:schemaValidationErrors}}let document;try{document=(0,_parser.parse)(source)}catch(syntaxError){return{errors:[syntaxError]}}const validationErrors=(0,_validate2.validate)(schema,document);if(validationErrors.length>0){return{errors:validationErrors}}return(0,_execute.execute)({schema:schema,document:document,rootValue:rootValue,contextValue:contextValue,variableValues:variableValues,operationName:operationName,fieldResolver:fieldResolver,typeResolver:typeResolver})}},{"./execution/execute.mjs":340,"./jsutils/devAssert.mjs":348,"./jsutils/isPromise.mjs":358,"./language/parser.mjs":378,"./type/validate.mjs":393,"./validation/validate.mjs":456}],346:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"BREAK",{enumerable:true,get:function(){return _index2.BREAK}});Object.defineProperty(exports,"BreakingChangeType",{enumerable:true,get:function(){return _index6.BreakingChangeType}});Object.defineProperty(exports,"DEFAULT_DEPRECATION_REASON",{enumerable:true,get:function(){return _index.DEFAULT_DEPRECATION_REASON}});Object.defineProperty(exports,"DangerousChangeType",{enumerable:true,get:function(){return _index6.DangerousChangeType}});Object.defineProperty(exports,"DirectiveLocation",{enumerable:true,get:function(){return _index2.DirectiveLocation}});Object.defineProperty(exports,"ExecutableDefinitionsRule",{enumerable:true,get:function(){return _index4.ExecutableDefinitionsRule}});Object.defineProperty(exports,"FieldsOnCorrectTypeRule",{enumerable:true,get:function(){return _index4.FieldsOnCorrectTypeRule}});Object.defineProperty(exports,"FragmentsOnCompositeTypesRule",{enumerable:true,get:function(){return _index4.FragmentsOnCompositeTypesRule}});Object.defineProperty(exports,"GRAPHQL_MAX_INT",{enumerable:true,get:function(){return _index.GRAPHQL_MAX_INT}});Object.defineProperty(exports,"GRAPHQL_MIN_INT",{enumerable:true,get:function(){return _index.GRAPHQL_MIN_INT}});Object.defineProperty(exports,"GraphQLBoolean",{enumerable:true,get:function(){return _index.GraphQLBoolean}});Object.defineProperty(exports,"GraphQLDeprecatedDirective",{enumerable:true,get:function(){return _index.GraphQLDeprecatedDirective}});Object.defineProperty(exports,"GraphQLDirective",{enumerable:true,get:function(){return _index.GraphQLDirective}});Object.defineProperty(exports,"GraphQLEnumType",{enumerable:true,get:function(){return _index.GraphQLEnumType}});Object.defineProperty(exports,"GraphQLError",{enumerable:true,get:function(){return _index5.GraphQLError}});Object.defineProperty(exports,"GraphQLFloat",{enumerable:true,get:function(){return _index.GraphQLFloat}});Object.defineProperty(exports,"GraphQLID",{enumerable:true,get:function(){return _index.GraphQLID}});Object.defineProperty(exports,"GraphQLIncludeDirective",{enumerable:true,get:function(){return _index.GraphQLIncludeDirective}});Object.defineProperty(exports,"GraphQLInputObjectType",{enumerable:true,get:function(){return _index.GraphQLInputObjectType}});Object.defineProperty(exports,"GraphQLInt",{enumerable:true,get:function(){return _index.GraphQLInt}});Object.defineProperty(exports,"GraphQLInterfaceType",{enumerable:true,get:function(){return _index.GraphQLInterfaceType}});Object.defineProperty(exports,"GraphQLList",{enumerable:true,get:function(){return _index.GraphQLList}});Object.defineProperty(exports,"GraphQLNonNull",{enumerable:true,get:function(){return _index.GraphQLNonNull}});Object.defineProperty(exports,"GraphQLObjectType",{enumerable:true,get:function(){return _index.GraphQLObjectType}});Object.defineProperty(exports,"GraphQLScalarType",{enumerable:true,get:function(){return _index.GraphQLScalarType}});Object.defineProperty(exports,"GraphQLSchema",{enumerable:true,get:function(){return _index.GraphQLSchema}});Object.defineProperty(exports,"GraphQLSkipDirective",{enumerable:true,get:function(){return _index.GraphQLSkipDirective}});Object.defineProperty(exports,"GraphQLSpecifiedByDirective",{enumerable:true,get:function(){return _index.GraphQLSpecifiedByDirective}});Object.defineProperty(exports,"GraphQLString",{enumerable:true,get:function(){return _index.GraphQLString}});Object.defineProperty(exports,"GraphQLUnionType",{enumerable:true,get:function(){return _index.GraphQLUnionType}});Object.defineProperty(exports,"Kind",{enumerable:true,get:function(){return _index2.Kind}});Object.defineProperty(exports,"KnownArgumentNamesRule",{enumerable:true,get:function(){return _index4.KnownArgumentNamesRule}});Object.defineProperty(exports,"KnownDirectivesRule",{enumerable:true,get:function(){return _index4.KnownDirectivesRule}});Object.defineProperty(exports,"KnownFragmentNamesRule",{enumerable:true,get:function(){return _index4.KnownFragmentNamesRule}});Object.defineProperty(exports,"KnownTypeNamesRule",{enumerable:true,get:function(){return _index4.KnownTypeNamesRule}});Object.defineProperty(exports,"Lexer",{enumerable:true,get:function(){return _index2.Lexer}});Object.defineProperty(exports,"Location",{enumerable:true,get:function(){return _index2.Location}});Object.defineProperty(exports,"LoneAnonymousOperationRule",{enumerable:true,get:function(){return _index4.LoneAnonymousOperationRule}});Object.defineProperty(exports,"LoneSchemaDefinitionRule",{enumerable:true,get:function(){return _index4.LoneSchemaDefinitionRule}});Object.defineProperty(exports,"NoDeprecatedCustomRule",{enumerable:true,get:function(){return _index4.NoDeprecatedCustomRule}});Object.defineProperty(exports,"NoFragmentCyclesRule",{enumerable:true,get:function(){return _index4.NoFragmentCyclesRule}});Object.defineProperty(exports,"NoSchemaIntrospectionCustomRule",{enumerable:true,get:function(){return _index4.NoSchemaIntrospectionCustomRule}});Object.defineProperty(exports,"NoUndefinedVariablesRule",{enumerable:true,get:function(){return _index4.NoUndefinedVariablesRule}});Object.defineProperty(exports,"NoUnusedFragmentsRule",{enumerable:true,get:function(){return _index4.NoUnusedFragmentsRule}});Object.defineProperty(exports,"NoUnusedVariablesRule",{enumerable:true,get:function(){return _index4.NoUnusedVariablesRule}});Object.defineProperty(exports,"OperationTypeNode",{enumerable:true,get:function(){return _index2.OperationTypeNode}});Object.defineProperty(exports,"OverlappingFieldsCanBeMergedRule",{enumerable:true,get:function(){return _index4.OverlappingFieldsCanBeMergedRule}});Object.defineProperty(exports,"PossibleFragmentSpreadsRule",{enumerable:true,get:function(){return _index4.PossibleFragmentSpreadsRule}});Object.defineProperty(exports,"PossibleTypeExtensionsRule",{enumerable:true,get:function(){return _index4.PossibleTypeExtensionsRule}});Object.defineProperty(exports,"ProvidedRequiredArgumentsRule",{enumerable:true,get:function(){return _index4.ProvidedRequiredArgumentsRule}});Object.defineProperty(exports,"ScalarLeafsRule",{enumerable:true,get:function(){return _index4.ScalarLeafsRule}});Object.defineProperty(exports,"SchemaMetaFieldDef",{enumerable:true,get:function(){return _index.SchemaMetaFieldDef}});Object.defineProperty(exports,"SingleFieldSubscriptionsRule",{enumerable:true,get:function(){return _index4.SingleFieldSubscriptionsRule}});Object.defineProperty(exports,"Source",{enumerable:true,get:function(){return _index2.Source}});Object.defineProperty(exports,"Token",{enumerable:true,get:function(){return _index2.Token}});Object.defineProperty(exports,"TokenKind",{enumerable:true,get:function(){return _index2.TokenKind}});Object.defineProperty(exports,"TypeInfo",{enumerable:true,get:function(){return _index6.TypeInfo}});Object.defineProperty(exports,"TypeKind",{enumerable:true,get:function(){return _index.TypeKind}});Object.defineProperty(exports,"TypeMetaFieldDef",{enumerable:true,get:function(){return _index.TypeMetaFieldDef}});Object.defineProperty(exports,"TypeNameMetaFieldDef",{enumerable:true,get:function(){return _index.TypeNameMetaFieldDef}});Object.defineProperty(exports,"UniqueArgumentDefinitionNamesRule",{enumerable:true,get:function(){return _index4.UniqueArgumentDefinitionNamesRule}});Object.defineProperty(exports,"UniqueArgumentNamesRule",{enumerable:true,get:function(){return _index4.UniqueArgumentNamesRule}});Object.defineProperty(exports,"UniqueDirectiveNamesRule",{enumerable:true,get:function(){return _index4.UniqueDirectiveNamesRule}});Object.defineProperty(exports,"UniqueDirectivesPerLocationRule",{enumerable:true,get:function(){return _index4.UniqueDirectivesPerLocationRule}});Object.defineProperty(exports,"UniqueEnumValueNamesRule",{enumerable:true,get:function(){return _index4.UniqueEnumValueNamesRule}});Object.defineProperty(exports,"UniqueFieldDefinitionNamesRule",{enumerable:true,get:function(){return _index4.UniqueFieldDefinitionNamesRule}});Object.defineProperty(exports,"UniqueFragmentNamesRule",{enumerable:true,get:function(){return _index4.UniqueFragmentNamesRule}});Object.defineProperty(exports,"UniqueInputFieldNamesRule",{enumerable:true,get:function(){return _index4.UniqueInputFieldNamesRule}});Object.defineProperty(exports,"UniqueOperationNamesRule",{enumerable:true,get:function(){return _index4.UniqueOperationNamesRule}});Object.defineProperty(exports,"UniqueOperationTypesRule",{enumerable:true,get:function(){return _index4.UniqueOperationTypesRule}});Object.defineProperty(exports,"UniqueTypeNamesRule",{enumerable:true,get:function(){return _index4.UniqueTypeNamesRule}});Object.defineProperty(exports,"UniqueVariableNamesRule",{enumerable:true,get:function(){return _index4.UniqueVariableNamesRule}});Object.defineProperty(exports,"ValidationContext",{enumerable:true,get:function(){return _index4.ValidationContext}});Object.defineProperty(exports,"ValuesOfCorrectTypeRule",{enumerable:true,get:function(){return _index4.ValuesOfCorrectTypeRule}});Object.defineProperty(exports,"VariablesAreInputTypesRule",{enumerable:true,get:function(){return _index4.VariablesAreInputTypesRule}});Object.defineProperty(exports,"VariablesInAllowedPositionRule",{enumerable:true,get:function(){return _index4.VariablesInAllowedPositionRule}});Object.defineProperty(exports,"__Directive",{enumerable:true,get:function(){return _index.__Directive}});Object.defineProperty(exports,"__DirectiveLocation",{enumerable:true,get:function(){return _index.__DirectiveLocation}});Object.defineProperty(exports,"__EnumValue",{enumerable:true,get:function(){return _index.__EnumValue}});Object.defineProperty(exports,"__Field",{enumerable:true,get:function(){return _index.__Field}});Object.defineProperty(exports,"__InputValue",{enumerable:true,get:function(){return _index.__InputValue}});Object.defineProperty(exports,"__Schema",{enumerable:true,get:function(){return _index.__Schema}});Object.defineProperty(exports,"__Type",{enumerable:true,get:function(){return _index.__Type}});Object.defineProperty(exports,"__TypeKind",{enumerable:true,get:function(){return _index.__TypeKind}});Object.defineProperty(exports,"assertAbstractType",{enumerable:true,get:function(){return _index.assertAbstractType}});Object.defineProperty(exports,"assertCompositeType",{enumerable:true,get:function(){return _index.assertCompositeType}});Object.defineProperty(exports,"assertDirective",{enumerable:true,get:function(){return _index.assertDirective}});Object.defineProperty(exports,"assertEnumType",{enumerable:true,get:function(){return _index.assertEnumType}});Object.defineProperty(exports,"assertEnumValueName",{enumerable:true,get:function(){return _index.assertEnumValueName}});Object.defineProperty(exports,"assertInputObjectType",{enumerable:true,get:function(){return _index.assertInputObjectType}});Object.defineProperty(exports,"assertInputType",{enumerable:true,get:function(){return _index.assertInputType}});Object.defineProperty(exports,"assertInterfaceType",{enumerable:true,get:function(){return _index.assertInterfaceType}});Object.defineProperty(exports,"assertLeafType",{enumerable:true,get:function(){return _index.assertLeafType}});Object.defineProperty(exports,"assertListType",{enumerable:true,get:function(){return _index.assertListType}});Object.defineProperty(exports,"assertName",{enumerable:true,get:function(){return _index.assertName}});Object.defineProperty(exports,"assertNamedType",{enumerable:true,get:function(){return _index.assertNamedType}});Object.defineProperty(exports,"assertNonNullType",{enumerable:true,get:function(){return _index.assertNonNullType}});Object.defineProperty(exports,"assertNullableType",{enumerable:true,get:function(){return _index.assertNullableType}});Object.defineProperty(exports,"assertObjectType",{enumerable:true,get:function(){return _index.assertObjectType}});Object.defineProperty(exports,"assertOutputType",{enumerable:true,get:function(){return _index.assertOutputType}});Object.defineProperty(exports,"assertScalarType",{enumerable:true,get:function(){return _index.assertScalarType}});Object.defineProperty(exports,"assertSchema",{enumerable:true,get:function(){return _index.assertSchema}});Object.defineProperty(exports,"assertType",{enumerable:true,get:function(){return _index.assertType}});Object.defineProperty(exports,"assertUnionType",{enumerable:true,get:function(){return _index.assertUnionType}});Object.defineProperty(exports,"assertValidName",{enumerable:true,get:function(){return _index6.assertValidName}});Object.defineProperty(exports,"assertValidSchema",{enumerable:true,get:function(){return _index.assertValidSchema}});Object.defineProperty(exports,"assertWrappingType",{enumerable:true,get:function(){return _index.assertWrappingType}});Object.defineProperty(exports,"astFromValue",{enumerable:true,get:function(){return _index6.astFromValue}});Object.defineProperty(exports,"buildASTSchema",{enumerable:true,get:function(){return _index6.buildASTSchema}});Object.defineProperty(exports,"buildClientSchema",{enumerable:true,get:function(){return _index6.buildClientSchema}});Object.defineProperty(exports,"buildSchema",{enumerable:true,get:function(){return _index6.buildSchema}});Object.defineProperty(exports,"coerceInputValue",{enumerable:true,get:function(){return _index6.coerceInputValue}});Object.defineProperty(exports,"concatAST",{enumerable:true,get:function(){return _index6.concatAST}});Object.defineProperty(exports,"createSourceEventStream",{enumerable:true,get:function(){return _index3.createSourceEventStream}});Object.defineProperty(exports,"defaultFieldResolver",{enumerable:true,get:function(){return _index3.defaultFieldResolver}});Object.defineProperty(exports,"defaultTypeResolver",{enumerable:true,get:function(){return _index3.defaultTypeResolver}});Object.defineProperty(exports,"doTypesOverlap",{enumerable:true,get:function(){return _index6.doTypesOverlap}});Object.defineProperty(exports,"execute",{enumerable:true,get:function(){return _index3.execute}});Object.defineProperty(exports,"executeSync",{enumerable:true,get:function(){return _index3.executeSync}});Object.defineProperty(exports,"extendSchema",{enumerable:true,get:function(){return _index6.extendSchema}});Object.defineProperty(exports,"findBreakingChanges",{enumerable:true,get:function(){return _index6.findBreakingChanges}});Object.defineProperty(exports,"findDangerousChanges",{enumerable:true,get:function(){return _index6.findDangerousChanges}});Object.defineProperty(exports,"formatError",{enumerable:true,get:function(){return _index5.formatError}});Object.defineProperty(exports,"getArgumentValues",{enumerable:true,get:function(){return _index3.getArgumentValues}});Object.defineProperty(exports,"getDirectiveValues",{enumerable:true,get:function(){return _index3.getDirectiveValues}});Object.defineProperty(exports,"getEnterLeaveForKind",{enumerable:true,get:function(){return _index2.getEnterLeaveForKind}});Object.defineProperty(exports,"getIntrospectionQuery",{enumerable:true,get:function(){return _index6.getIntrospectionQuery}});Object.defineProperty(exports,"getLocation",{enumerable:true,get:function(){return _index2.getLocation}});Object.defineProperty(exports,"getNamedType",{enumerable:true,get:function(){return _index.getNamedType}});Object.defineProperty(exports,"getNullableType",{enumerable:true,get:function(){return _index.getNullableType}});Object.defineProperty(exports,"getOperationAST",{enumerable:true,get:function(){return _index6.getOperationAST}});Object.defineProperty(exports,"getOperationRootType",{enumerable:true,get:function(){return _index6.getOperationRootType}});Object.defineProperty(exports,"getVariableValues",{enumerable:true,get:function(){return _index3.getVariableValues}});Object.defineProperty(exports,"getVisitFn",{enumerable:true,get:function(){return _index2.getVisitFn}});Object.defineProperty(exports,"graphql",{enumerable:true,get:function(){return _graphql.graphql}});Object.defineProperty(exports,"graphqlSync",{enumerable:true,get:function(){return _graphql.graphqlSync}});Object.defineProperty(exports,"introspectionFromSchema",{enumerable:true,get:function(){return _index6.introspectionFromSchema}});Object.defineProperty(exports,"introspectionTypes",{enumerable:true,get:function(){return _index.introspectionTypes}});Object.defineProperty(exports,"isAbstractType",{enumerable:true,get:function(){return _index.isAbstractType}});Object.defineProperty(exports,"isCompositeType",{enumerable:true,get:function(){return _index.isCompositeType}});Object.defineProperty(exports,"isConstValueNode",{enumerable:true,get:function(){return _index2.isConstValueNode}});Object.defineProperty(exports,"isDefinitionNode",{enumerable:true,get:function(){return _index2.isDefinitionNode}});Object.defineProperty(exports,"isDirective",{enumerable:true,get:function(){return _index.isDirective}});Object.defineProperty(exports,"isEnumType",{enumerable:true,get:function(){return _index.isEnumType}});Object.defineProperty(exports,"isEqualType",{enumerable:true,get:function(){return _index6.isEqualType}});Object.defineProperty(exports,"isExecutableDefinitionNode",{enumerable:true,get:function(){return _index2.isExecutableDefinitionNode}});Object.defineProperty(exports,"isInputObjectType",{enumerable:true,get:function(){return _index.isInputObjectType}});Object.defineProperty(exports,"isInputType",{enumerable:true,get:function(){return _index.isInputType}});Object.defineProperty(exports,"isInterfaceType",{enumerable:true,get:function(){return _index.isInterfaceType}});Object.defineProperty(exports,"isIntrospectionType",{enumerable:true,get:function(){return _index.isIntrospectionType}});Object.defineProperty(exports,"isLeafType",{enumerable:true,get:function(){return _index.isLeafType}});Object.defineProperty(exports,"isListType",{enumerable:true,get:function(){return _index.isListType}});Object.defineProperty(exports,"isNamedType",{enumerable:true,get:function(){return _index.isNamedType}});Object.defineProperty(exports,"isNonNullType",{enumerable:true,get:function(){return _index.isNonNullType}});Object.defineProperty(exports,"isNullableType",{enumerable:true,get:function(){return _index.isNullableType}});Object.defineProperty(exports,"isObjectType",{enumerable:true,get:function(){return _index.isObjectType}});Object.defineProperty(exports,"isOutputType",{enumerable:true,get:function(){return _index.isOutputType}});Object.defineProperty(exports,"isRequiredArgument",{enumerable:true,get:function(){return _index.isRequiredArgument}});Object.defineProperty(exports,"isRequiredInputField",{enumerable:true,get:function(){return _index.isRequiredInputField}});Object.defineProperty(exports,"isScalarType",{enumerable:true,get:function(){return _index.isScalarType}});Object.defineProperty(exports,"isSchema",{enumerable:true,get:function(){return _index.isSchema}});Object.defineProperty(exports,"isSelectionNode",{enumerable:true,get:function(){return _index2.isSelectionNode}});Object.defineProperty(exports,"isSpecifiedDirective",{enumerable:true,get:function(){return _index.isSpecifiedDirective}});Object.defineProperty(exports,"isSpecifiedScalarType",{enumerable:true,get:function(){return _index.isSpecifiedScalarType}});Object.defineProperty(exports,"isType",{enumerable:true,get:function(){return _index.isType}});Object.defineProperty(exports,"isTypeDefinitionNode",{enumerable:true,get:function(){return _index2.isTypeDefinitionNode}});Object.defineProperty(exports,"isTypeExtensionNode",{enumerable:true,get:function(){return _index2.isTypeExtensionNode}});Object.defineProperty(exports,"isTypeNode",{enumerable:true,get:function(){return _index2.isTypeNode}});Object.defineProperty(exports,"isTypeSubTypeOf",{enumerable:true,get:function(){return _index6.isTypeSubTypeOf}});Object.defineProperty(exports,"isTypeSystemDefinitionNode",{enumerable:true,get:function(){return _index2.isTypeSystemDefinitionNode}});Object.defineProperty(exports,"isTypeSystemExtensionNode",{enumerable:true,get:function(){return _index2.isTypeSystemExtensionNode}});Object.defineProperty(exports,"isUnionType",{enumerable:true,get:function(){return _index.isUnionType}});Object.defineProperty(exports,"isValidNameError",{enumerable:true,get:function(){return _index6.isValidNameError}});Object.defineProperty(exports,"isValueNode",{enumerable:true,get:function(){return _index2.isValueNode}});Object.defineProperty(exports,"isWrappingType",{enumerable:true,get:function(){return _index.isWrappingType}});Object.defineProperty(exports,"lexicographicSortSchema",{enumerable:true,get:function(){return _index6.lexicographicSortSchema}});Object.defineProperty(exports,"locatedError",{enumerable:true,get:function(){return _index5.locatedError}});Object.defineProperty(exports,"parse",{enumerable:true,get:function(){return _index2.parse}});Object.defineProperty(exports,"parseConstValue",{enumerable:true,get:function(){return _index2.parseConstValue}});Object.defineProperty(exports,"parseType",{enumerable:true,get:function(){return _index2.parseType}});Object.defineProperty(exports,"parseValue",{enumerable:true,get:function(){return _index2.parseValue}});Object.defineProperty(exports,"print",{enumerable:true,get:function(){return _index2.print}});Object.defineProperty(exports,"printError",{enumerable:true,get:function(){return _index5.printError}});Object.defineProperty(exports,"printIntrospectionSchema",{enumerable:true,get:function(){return _index6.printIntrospectionSchema}});Object.defineProperty(exports,"printLocation",{enumerable:true,get:function(){return _index2.printLocation}});Object.defineProperty(exports,"printSchema",{enumerable:true,get:function(){return _index6.printSchema}});Object.defineProperty(exports,"printSourceLocation",{enumerable:true,get:function(){return _index2.printSourceLocation}});Object.defineProperty(exports,"printType",{enumerable:true,get:function(){return _index6.printType}});Object.defineProperty(exports,"resolveObjMapThunk",{enumerable:true,get:function(){return _index.resolveObjMapThunk}});Object.defineProperty(exports,"resolveReadonlyArrayThunk",{enumerable:true,get:function(){return _index.resolveReadonlyArrayThunk}});Object.defineProperty(exports,"responsePathAsArray",{enumerable:true,get:function(){return _index3.responsePathAsArray}});Object.defineProperty(exports,"separateOperations",{enumerable:true,get:function(){return _index6.separateOperations}});Object.defineProperty(exports,"specifiedDirectives",{enumerable:true,get:function(){return _index.specifiedDirectives}});Object.defineProperty(exports,"specifiedRules",{enumerable:true,get:function(){return _index4.specifiedRules}});Object.defineProperty(exports,"specifiedScalarTypes",{enumerable:true,get:function(){return _index.specifiedScalarTypes}});Object.defineProperty(exports,"stripIgnoredCharacters",{enumerable:true,get:function(){return _index6.stripIgnoredCharacters}});Object.defineProperty(exports,"subscribe",{enumerable:true,get:function(){return _index3.subscribe}});Object.defineProperty(exports,"syntaxError",{enumerable:true,get:function(){return _index5.syntaxError}});Object.defineProperty(exports,"typeFromAST",{enumerable:true,get:function(){return _index6.typeFromAST}});Object.defineProperty(exports,"validate",{enumerable:true,get:function(){return _index4.validate}});Object.defineProperty(exports,"validateSchema",{enumerable:true,get:function(){return _index.validateSchema}});Object.defineProperty(exports,"valueFromAST",{enumerable:true,get:function(){return _index6.valueFromAST}});Object.defineProperty(exports,"valueFromASTUntyped",{enumerable:true,get:function(){return _index6.valueFromASTUntyped}});Object.defineProperty(exports,"version",{enumerable:true,get:function(){return _version.version}});Object.defineProperty(exports,"versionInfo",{enumerable:true,get:function(){return _version.versionInfo}});Object.defineProperty(exports,"visit",{enumerable:true,get:function(){return _index2.visit}});Object.defineProperty(exports,"visitInParallel",{enumerable:true,get:function(){return _index2.visitInParallel}});Object.defineProperty(exports,"visitWithTypeInfo",{enumerable:true,get:function(){return _index6.visitWithTypeInfo}});var _version=require("./version.mjs");var _graphql=require("./graphql.mjs");var _index=require("./type/index.mjs");var _index2=require("./language/index.mjs");var _index3=require("./execution/index.mjs");var _index4=require("./validation/index.mjs");var _index5=require("./error/index.mjs");var _index6=require("./utilities/index.mjs")},{"./error/index.mjs":336,"./execution/index.mjs":341,"./graphql.mjs":345,"./language/index.mjs":374,"./type/index.mjs":389,"./utilities/index.mjs":406,"./validation/index.mjs":418,"./version.mjs":457}],347:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addPath=addPath;exports.pathToArray=pathToArray;function addPath(prev,key,typename){return{prev:prev,key:key,typename:typename}}function pathToArray(path){const flattened=[];let curr=path;while(curr){flattened.push(curr.key);curr=curr.prev}return flattened.reverse()}},{}],348:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.devAssert=devAssert;function devAssert(condition,message){const booleanCondition=Boolean(condition);if(!booleanCondition){throw new Error(message)}}},{}],349:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.didYouMean=didYouMean;const MAX_SUGGESTIONS=5;function didYouMean(firstArg,secondArg){const[subMessage,suggestionsArg]=secondArg?[firstArg,secondArg]:[undefined,firstArg];let message=" Did you mean ";if(subMessage){message+=subMessage+" "}const suggestions=suggestionsArg.map(x=>`"${x}"`);switch(suggestions.length){case 0:return"";case 1:return message+suggestions[0]+"?";case 2:return message+suggestions[0]+" or "+suggestions[1]+"?"}const selected=suggestions.slice(0,MAX_SUGGESTIONS);const lastItem=selected.pop();return message+selected.join(", ")+", or "+lastItem+"?"}},{}],350:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.groupBy=groupBy;function groupBy(list,keyFn){const result=new Map;for(const item of list){const key=keyFn(item);const group=result.get(key);if(group===undefined){result.set(key,[item])}else{group.push(item)}}return result}},{}],351:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.identityFunc=identityFunc;function identityFunc(x){return x}},{}],352:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.inspect=inspect;const MAX_ARRAY_LENGTH=10;const MAX_RECURSIVE_DEPTH=2;function inspect(value){return formatValue(value,[])}function formatValue(value,seenValues){switch(typeof value){case"string":return JSON.stringify(value);case"function":return value.name?`[function ${value.name}]`:"[function]";case"object":return formatObjectValue(value,seenValues);default:return String(value)}}function formatObjectValue(value,previouslySeenValues){if(value===null){return"null"}if(previouslySeenValues.includes(value)){return"[Circular]"}const seenValues=[...previouslySeenValues,value];if(isJSONable(value)){const jsonValue=value.toJSON();if(jsonValue!==value){return typeof jsonValue==="string"?jsonValue:formatValue(jsonValue,seenValues)}}else if(Array.isArray(value)){return formatArray(value,seenValues)}return formatObject(value,seenValues)}function isJSONable(value){return typeof value.toJSON==="function"}function formatObject(object,seenValues){const entries=Object.entries(object);if(entries.length===0){return"{}"}if(seenValues.length>MAX_RECURSIVE_DEPTH){return"["+getObjectTag(object)+"]"}const properties=entries.map(([key,value])=>key+": "+formatValue(value,seenValues));return"{ "+properties.join(", ")+" }"}function formatArray(array,seenValues){if(array.length===0){return"[]"}if(seenValues.length>MAX_RECURSIVE_DEPTH){return"[Array]"}const len=Math.min(MAX_ARRAY_LENGTH,array.length);const remaining=array.length-len;const items=[];for(let i=0;i<len;++i){items.push(formatValue(array[i],seenValues))}if(remaining===1){items.push("... 1 more item")}else if(remaining>1){items.push(`... ${remaining} more items`)}return"["+items.join(", ")+"]"}function getObjectTag(object){const tag=Object.prototype.toString.call(object).replace(/^\[object /,"").replace(/]$/,"");if(tag==="Object"&&typeof object.constructor==="function"){const name=object.constructor.name;if(typeof name==="string"&&name!==""){return name}}return tag}},{}],353:[function(require,module,exports){(function(process){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.instanceOf=void 0;var _inspect=require("./inspect.mjs");const instanceOf=process.env.NODE_ENV==="production"?function instanceOf(value,constructor){return value instanceof constructor}:function instanceOf(value,constructor){if(value instanceof constructor){return true}if(typeof value==="object"&&value!==null){var _value$constructor;const className=constructor.prototype[Symbol.toStringTag];const valueClassName=Symbol.toStringTag in value?value[Symbol.toStringTag]:(_value$constructor=value.constructor)===null||_value$constructor===void 0?void 0:_value$constructor.name;if(className===valueClassName){const stringifiedValue=(0,_inspect.inspect)(value);throw new Error(`Cannot use ${className} "${stringifiedValue}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return false};exports.instanceOf=instanceOf}).call(this)}).call(this,require("_process"))},{"./inspect.mjs":352,_process:519}],354:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.invariant=invariant;function invariant(condition,message){const booleanCondition=Boolean(condition);if(!booleanCondition){throw new Error(message!=null?message:"Unexpected invariant triggered.")}}},{}],355:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isAsyncIterable=isAsyncIterable;function isAsyncIterable(maybeAsyncIterable){return typeof(maybeAsyncIterable===null||maybeAsyncIterable===void 0?void 0:maybeAsyncIterable[Symbol.asyncIterator])==="function"}},{}],356:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isIterableObject=isIterableObject;function isIterableObject(maybeIterable){return typeof maybeIterable==="object"&&typeof(maybeIterable===null||maybeIterable===void 0?void 0:maybeIterable[Symbol.iterator])==="function"}},{}],357:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isObjectLike=isObjectLike;function isObjectLike(value){return typeof value=="object"&&value!==null}},{}],358:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isPromise=isPromise;function isPromise(value){return typeof(value===null||value===void 0?void 0:value.then)==="function"}},{}],359:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.keyMap=keyMap;function keyMap(list,keyFn){const result=Object.create(null);for(const item of list){result[keyFn(item)]=item}return result}},{}],360:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.keyValMap=keyValMap;function keyValMap(list,keyFn,valFn){const result=Object.create(null);for(const item of list){result[keyFn(item)]=valFn(item)}return result}},{}],361:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapValue=mapValue;function mapValue(map,fn){const result=Object.create(null);for(const key of Object.keys(map)){result[key]=fn(map[key],key)}return result}},{}],362:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.memoize3=memoize3;function memoize3(fn){let cache0;return function memoized(a1,a2,a3){if(cache0===undefined){cache0=new WeakMap}let cache1=cache0.get(a1);if(cache1===undefined){cache1=new WeakMap;cache0.set(a1,cache1)}let cache2=cache1.get(a2);if(cache2===undefined){cache2=new WeakMap;cache1.set(a2,cache2)}let fnResult=cache2.get(a3);if(fnResult===undefined){fnResult=fn(a1,a2,a3);cache2.set(a3,fnResult)}return fnResult}}},{}],363:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.naturalCompare=naturalCompare;function naturalCompare(aStr,bStr){let aIndex=0;let bIndex=0;while(aIndex<aStr.length&&bIndex<bStr.length){let aChar=aStr.charCodeAt(aIndex);let bChar=bStr.charCodeAt(bIndex);if(isDigit(aChar)&&isDigit(bChar)){let aNum=0;do{++aIndex;aNum=aNum*10+aChar-DIGIT_0;aChar=aStr.charCodeAt(aIndex)}while(isDigit(aChar)&&aNum>0);let bNum=0;do{++bIndex;bNum=bNum*10+bChar-DIGIT_0;bChar=bStr.charCodeAt(bIndex)}while(isDigit(bChar)&&bNum>0);if(aNum<bNum){return-1}if(aNum>bNum){return 1}}else{if(aChar<bChar){return-1}if(aChar>bChar){return 1}++aIndex;++bIndex}}return aStr.length-bStr.length}const DIGIT_0=48;const DIGIT_9=57;function isDigit(code){return!isNaN(code)&&DIGIT_0<=code&&code<=DIGIT_9}},{}],364:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.printPathArray=printPathArray;function printPathArray(path){return path.map(key=>typeof key==="number"?"["+key.toString()+"]":"."+key).join("")}},{}],365:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.promiseForObject=promiseForObject;function promiseForObject(object){return Promise.all(Object.values(object)).then(resolvedValues=>{const resolvedObject=Object.create(null);for(const[i,key]of Object.keys(object).entries()){resolvedObject[key]=resolvedValues[i]}return resolvedObject})}},{}],366:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.promiseReduce=promiseReduce;var _isPromise=require("./isPromise.mjs");function promiseReduce(values,callbackFn,initialValue){let accumulator=initialValue;for(const value of values){accumulator=(0,_isPromise.isPromise)(accumulator)?accumulator.then(resolved=>callbackFn(resolved,value)):callbackFn(accumulator,value)}return accumulator}},{"./isPromise.mjs":358}],367:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.suggestionList=suggestionList;var _naturalCompare=require("./naturalCompare.mjs");function suggestionList(input,options){const optionsByDistance=Object.create(null);const lexicalDistance=new LexicalDistance(input);const threshold=Math.floor(input.length*.4)+1;for(const option of options){const distance=lexicalDistance.measure(option,threshold);if(distance!==undefined){optionsByDistance[option]=distance}}return Object.keys(optionsByDistance).sort((a,b)=>{const distanceDiff=optionsByDistance[a]-optionsByDistance[b];return distanceDiff!==0?distanceDiff:(0,_naturalCompare.naturalCompare)(a,b)})}class LexicalDistance{constructor(input){this._input=input;this._inputLowerCase=input.toLowerCase();this._inputArray=stringToArray(this._inputLowerCase);this._rows=[new Array(input.length+1).fill(0),new Array(input.length+1).fill(0),new Array(input.length+1).fill(0)]}measure(option,threshold){if(this._input===option){return 0}const optionLowerCase=option.toLowerCase();if(this._inputLowerCase===optionLowerCase){return 1}let a=stringToArray(optionLowerCase);let b=this._inputArray;if(a.length<b.length){const tmp=a;a=b;b=tmp}const aLength=a.length;const bLength=b.length;if(aLength-bLength>threshold){return undefined}const rows=this._rows;for(let j=0;j<=bLength;j++){rows[0][j]=j}for(let i=1;i<=aLength;i++){const upRow=rows[(i-1)%3];const currentRow=rows[i%3];let smallestCell=currentRow[0]=i;for(let j=1;j<=bLength;j++){const cost=a[i-1]===b[j-1]?0:1;let currentCell=Math.min(upRow[j]+1,currentRow[j-1]+1,upRow[j-1]+cost);if(i>1&&j>1&&a[i-1]===b[j-2]&&a[i-2]===b[j-1]){const doubleDiagonalCell=rows[(i-2)%3][j-2];currentCell=Math.min(currentCell,doubleDiagonalCell+1)}if(currentCell<smallestCell){smallestCell=currentCell}currentRow[j]=currentCell}if(smallestCell>threshold){return undefined}}const distance=rows[aLength%3][bLength];return distance<=threshold?distance:undefined}}function stringToArray(str){const strLength=str.length;const array=new Array(strLength);for(let i=0;i<strLength;++i){array[i]=str.charCodeAt(i)}return array}},{"./naturalCompare.mjs":363}],368:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toError=toError;var _inspect=require("./inspect.mjs");function toError(thrownValue){return thrownValue instanceof Error?thrownValue:new NonErrorThrown(thrownValue)}class NonErrorThrown extends Error{constructor(thrownValue){super("Unexpected error value: "+(0,_inspect.inspect)(thrownValue));this.name="NonErrorThrown";this.thrownValue=thrownValue}}},{"./inspect.mjs":352}],369:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toObjMap=toObjMap;function toObjMap(obj){if(obj==null){return Object.create(null)}if(Object.getPrototypeOf(obj)===null){return obj}const map=Object.create(null);for(const[key,value]of Object.entries(obj)){map[key]=value}return map}},{}],370:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Token=exports.QueryDocumentKeys=exports.OperationTypeNode=exports.Location=void 0;exports.isNode=isNode;class Location{constructor(startToken,endToken,source){this.start=startToken.start;this.end=endToken.end;this.startToken=startToken;this.endToken=endToken;this.source=source}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}exports.Location=Location;class Token{constructor(kind,start,end,line,column,value){this.kind=kind;this.start=start;this.end=end;this.line=line;this.column=column;this.value=value;this.prev=null;this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}exports.Token=Token;const QueryDocumentKeys={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};exports.QueryDocumentKeys=QueryDocumentKeys;const kindValues=new Set(Object.keys(QueryDocumentKeys));function isNode(maybeNode){const maybeKind=maybeNode===null||maybeNode===void 0?void 0:maybeNode.kind;return typeof maybeKind==="string"&&kindValues.has(maybeKind)}var OperationTypeNode;exports.OperationTypeNode=OperationTypeNode;(function(OperationTypeNode){OperationTypeNode["QUERY"]="query";OperationTypeNode["MUTATION"]="mutation";OperationTypeNode["SUBSCRIPTION"]="subscription"})(OperationTypeNode||(exports.OperationTypeNode=OperationTypeNode={}))},{}],371:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dedentBlockStringLines=dedentBlockStringLines;exports.isPrintableAsBlockString=isPrintableAsBlockString;exports.printBlockString=printBlockString;var _characterClasses=require("./characterClasses.mjs");function dedentBlockStringLines(lines){var _firstNonEmptyLine2;let commonIndent=Number.MAX_SAFE_INTEGER;let firstNonEmptyLine=null;let lastNonEmptyLine=-1;for(let i=0;i<lines.length;++i){var _firstNonEmptyLine;const line=lines[i];const indent=leadingWhitespace(line);if(indent===line.length){continue}firstNonEmptyLine=(_firstNonEmptyLine=firstNonEmptyLine)!==null&&_firstNonEmptyLine!==void 0?_firstNonEmptyLine:i;lastNonEmptyLine=i;if(i!==0&&indent<commonIndent){commonIndent=indent}}return lines.map((line,i)=>i===0?line:line.slice(commonIndent)).slice((_firstNonEmptyLine2=firstNonEmptyLine)!==null&&_firstNonEmptyLine2!==void 0?_firstNonEmptyLine2:0,lastNonEmptyLine+1)}function leadingWhitespace(str){let i=0;while(i<str.length&&(0,_characterClasses.isWhiteSpace)(str.charCodeAt(i))){++i}return i}function isPrintableAsBlockString(value){if(value===""){return true}let isEmptyLine=true;let hasIndent=false;let hasCommonIndent=true;let seenNonEmptyLine=false;for(let i=0;i<value.length;++i){switch(value.codePointAt(i)){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 11:case 12:case 14:case 15:return false;case 13:return false;case 10:if(isEmptyLine&&!seenNonEmptyLine){return false}seenNonEmptyLine=true;isEmptyLine=true;hasIndent=false;break;case 9:case 32:hasIndent||(hasIndent=isEmptyLine);break;default:hasCommonIndent&&(hasCommonIndent=hasIndent);isEmptyLine=false}}if(isEmptyLine){return false}if(hasCommonIndent&&seenNonEmptyLine){return false}return true}function printBlockString(value,options){const escapedValue=value.replace(/"""/g,'\\"""');const lines=escapedValue.split(/\r\n|[\n\r]/g);const isSingleLine=lines.length===1;const forceLeadingNewLine=lines.length>1&&lines.slice(1).every(line=>line.length===0||(0,_characterClasses.isWhiteSpace)(line.charCodeAt(0)));const hasTrailingTripleQuotes=escapedValue.endsWith('\\"""');const hasTrailingQuote=value.endsWith('"')&&!hasTrailingTripleQuotes;const hasTrailingSlash=value.endsWith("\\");const forceTrailingNewline=hasTrailingQuote||hasTrailingSlash;const printAsMultipleLines=!(options!==null&&options!==void 0&&options.minimize)&&(!isSingleLine||value.length>70||forceTrailingNewline||forceLeadingNewLine||hasTrailingTripleQuotes);let result="";const skipLeadingNewLine=isSingleLine&&(0,_characterClasses.isWhiteSpace)(value.charCodeAt(0));if(printAsMultipleLines&&!skipLeadingNewLine||forceLeadingNewLine){result+="\n"}result+=escapedValue;if(printAsMultipleLines||forceTrailingNewline){result+="\n"}return'"""'+result+'"""'}},{"./characterClasses.mjs":372}],372:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDigit=isDigit;exports.isLetter=isLetter;exports.isNameContinue=isNameContinue;exports.isNameStart=isNameStart;exports.isWhiteSpace=isWhiteSpace;function isWhiteSpace(code){return code===9||code===32}function isDigit(code){return code>=48&&code<=57}function isLetter(code){return code>=97&&code<=122||code>=65&&code<=90}function isNameStart(code){return isLetter(code)||code===95}function isNameContinue(code){return isLetter(code)||isDigit(code)||code===95}},{}],373:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DirectiveLocation=void 0;var DirectiveLocation;exports.DirectiveLocation=DirectiveLocation;(function(DirectiveLocation){DirectiveLocation["QUERY"]="QUERY";DirectiveLocation["MUTATION"]="MUTATION";DirectiveLocation["SUBSCRIPTION"]="SUBSCRIPTION";DirectiveLocation["FIELD"]="FIELD";DirectiveLocation["FRAGMENT_DEFINITION"]="FRAGMENT_DEFINITION";DirectiveLocation["FRAGMENT_SPREAD"]="FRAGMENT_SPREAD";DirectiveLocation["INLINE_FRAGMENT"]="INLINE_FRAGMENT";DirectiveLocation["VARIABLE_DEFINITION"]="VARIABLE_DEFINITION";DirectiveLocation["SCHEMA"]="SCHEMA";DirectiveLocation["SCALAR"]="SCALAR";DirectiveLocation["OBJECT"]="OBJECT";DirectiveLocation["FIELD_DEFINITION"]="FIELD_DEFINITION";DirectiveLocation["ARGUMENT_DEFINITION"]="ARGUMENT_DEFINITION";DirectiveLocation["INTERFACE"]="INTERFACE";DirectiveLocation["UNION"]="UNION";DirectiveLocation["ENUM"]="ENUM";DirectiveLocation["ENUM_VALUE"]="ENUM_VALUE";DirectiveLocation["INPUT_OBJECT"]="INPUT_OBJECT";DirectiveLocation["INPUT_FIELD_DEFINITION"]="INPUT_FIELD_DEFINITION"})(DirectiveLocation||(exports.DirectiveLocation=DirectiveLocation={}))},{}],374:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"BREAK",{enumerable:true,get:function(){return _visitor.BREAK}});Object.defineProperty(exports,"DirectiveLocation",{enumerable:true,get:function(){return _directiveLocation.DirectiveLocation}});Object.defineProperty(exports,"Kind",{enumerable:true,get:function(){return _kinds.Kind}});Object.defineProperty(exports,"Lexer",{enumerable:true,get:function(){return _lexer.Lexer}});Object.defineProperty(exports,"Location",{enumerable:true,get:function(){return _ast.Location}});Object.defineProperty(exports,"OperationTypeNode",{enumerable:true,get:function(){return _ast.OperationTypeNode}});Object.defineProperty(exports,"Source",{enumerable:true,get:function(){return _source.Source}});Object.defineProperty(exports,"Token",{enumerable:true,get:function(){return _ast.Token}});Object.defineProperty(exports,"TokenKind",{enumerable:true,get:function(){return _tokenKind.TokenKind}});Object.defineProperty(exports,"getEnterLeaveForKind",{enumerable:true,get:function(){return _visitor.getEnterLeaveForKind}});Object.defineProperty(exports,"getLocation",{enumerable:true,get:function(){return _location.getLocation}});Object.defineProperty(exports,"getVisitFn",{enumerable:true,get:function(){return _visitor.getVisitFn}});Object.defineProperty(exports,"isConstValueNode",{enumerable:true,get:function(){return _predicates.isConstValueNode}});Object.defineProperty(exports,"isDefinitionNode",{enumerable:true,get:function(){return _predicates.isDefinitionNode}});Object.defineProperty(exports,"isExecutableDefinitionNode",{enumerable:true,get:function(){return _predicates.isExecutableDefinitionNode}});Object.defineProperty(exports,"isSelectionNode",{enumerable:true,get:function(){return _predicates.isSelectionNode}});Object.defineProperty(exports,"isTypeDefinitionNode",{enumerable:true,get:function(){return _predicates.isTypeDefinitionNode}});Object.defineProperty(exports,"isTypeExtensionNode",{enumerable:true,get:function(){return _predicates.isTypeExtensionNode}});Object.defineProperty(exports,"isTypeNode",{enumerable:true,get:function(){return _predicates.isTypeNode}});Object.defineProperty(exports,"isTypeSystemDefinitionNode",{enumerable:true,get:function(){return _predicates.isTypeSystemDefinitionNode}});Object.defineProperty(exports,"isTypeSystemExtensionNode",{enumerable:true,get:function(){return _predicates.isTypeSystemExtensionNode}});Object.defineProperty(exports,"isValueNode",{enumerable:true,get:function(){return _predicates.isValueNode}});Object.defineProperty(exports,"parse",{enumerable:true,get:function(){return _parser.parse}});Object.defineProperty(exports,"parseConstValue",{enumerable:true,get:function(){return _parser.parseConstValue}});Object.defineProperty(exports,"parseType",{enumerable:true,get:function(){return _parser.parseType}});Object.defineProperty(exports,"parseValue",{enumerable:true,get:function(){return _parser.parseValue}});Object.defineProperty(exports,"print",{enumerable:true,get:function(){return _printer.print}});Object.defineProperty(exports,"printLocation",{enumerable:true,get:function(){return _printLocation.printLocation}});Object.defineProperty(exports,"printSourceLocation",{enumerable:true,get:function(){return _printLocation.printSourceLocation}});Object.defineProperty(exports,"visit",{enumerable:true,get:function(){return _visitor.visit}});Object.defineProperty(exports,"visitInParallel",{enumerable:true,get:function(){return _visitor.visitInParallel}});var _source=require("./source.mjs");var _location=require("./location.mjs");var _printLocation=require("./printLocation.mjs");var _kinds=require("./kinds.mjs");var _tokenKind=require("./tokenKind.mjs");var _lexer=require("./lexer.mjs");var _parser=require("./parser.mjs");var _printer=require("./printer.mjs");var _visitor=require("./visitor.mjs");var _ast=require("./ast.mjs");var _predicates=require("./predicates.mjs");var _directiveLocation=require("./directiveLocation.mjs")},{"./ast.mjs":370,"./directiveLocation.mjs":373,"./kinds.mjs":375,"./lexer.mjs":376,"./location.mjs":377,"./parser.mjs":378,"./predicates.mjs":379,"./printLocation.mjs":380,"./printer.mjs":382,"./source.mjs":383,"./tokenKind.mjs":384,"./visitor.mjs":385}],375:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Kind=void 0;var Kind;exports.Kind=Kind;(function(Kind){Kind["NAME"]="Name";Kind["DOCUMENT"]="Document";Kind["OPERATION_DEFINITION"]="OperationDefinition";Kind["VARIABLE_DEFINITION"]="VariableDefinition";Kind["SELECTION_SET"]="SelectionSet";Kind["FIELD"]="Field";Kind["ARGUMENT"]="Argument";Kind["FRAGMENT_SPREAD"]="FragmentSpread";Kind["INLINE_FRAGMENT"]="InlineFragment";Kind["FRAGMENT_DEFINITION"]="FragmentDefinition";Kind["VARIABLE"]="Variable";Kind["INT"]="IntValue";Kind["FLOAT"]="FloatValue";Kind["STRING"]="StringValue";Kind["BOOLEAN"]="BooleanValue";Kind["NULL"]="NullValue";Kind["ENUM"]="EnumValue";Kind["LIST"]="ListValue";Kind["OBJECT"]="ObjectValue";Kind["OBJECT_FIELD"]="ObjectField";Kind["DIRECTIVE"]="Directive";Kind["NAMED_TYPE"]="NamedType";Kind["LIST_TYPE"]="ListType";Kind["NON_NULL_TYPE"]="NonNullType";Kind["SCHEMA_DEFINITION"]="SchemaDefinition";Kind["OPERATION_TYPE_DEFINITION"]="OperationTypeDefinition";Kind["SCALAR_TYPE_DEFINITION"]="ScalarTypeDefinition";Kind["OBJECT_TYPE_DEFINITION"]="ObjectTypeDefinition";Kind["FIELD_DEFINITION"]="FieldDefinition";Kind["INPUT_VALUE_DEFINITION"]="InputValueDefinition";Kind["INTERFACE_TYPE_DEFINITION"]="InterfaceTypeDefinition";Kind["UNION_TYPE_DEFINITION"]="UnionTypeDefinition";Kind["ENUM_TYPE_DEFINITION"]="EnumTypeDefinition";Kind["ENUM_VALUE_DEFINITION"]="EnumValueDefinition";Kind["INPUT_OBJECT_TYPE_DEFINITION"]="InputObjectTypeDefinition";Kind["DIRECTIVE_DEFINITION"]="DirectiveDefinition";Kind["SCHEMA_EXTENSION"]="SchemaExtension";Kind["SCALAR_TYPE_EXTENSION"]="ScalarTypeExtension";Kind["OBJECT_TYPE_EXTENSION"]="ObjectTypeExtension";Kind["INTERFACE_TYPE_EXTENSION"]="InterfaceTypeExtension";Kind["UNION_TYPE_EXTENSION"]="UnionTypeExtension";Kind["ENUM_TYPE_EXTENSION"]="EnumTypeExtension";Kind["INPUT_OBJECT_TYPE_EXTENSION"]="InputObjectTypeExtension"})(Kind||(exports.Kind=Kind={}))},{}],376:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Lexer=void 0;exports.isPunctuatorTokenKind=isPunctuatorTokenKind;var _syntaxError=require("../error/syntaxError.mjs");var _ast=require("./ast.mjs");var _blockString=require("./blockString.mjs");var _characterClasses=require("./characterClasses.mjs");var _tokenKind=require("./tokenKind.mjs");class Lexer{constructor(source){const startOfFileToken=new _ast.Token(_tokenKind.TokenKind.SOF,0,0,0,0);this.source=source;this.lastToken=startOfFileToken;this.token=startOfFileToken;this.line=1;this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){this.lastToken=this.token;const token=this.token=this.lookahead();return token}lookahead(){let token=this.token;if(token.kind!==_tokenKind.TokenKind.EOF){do{if(token.next){token=token.next}else{const nextToken=readNextToken(this,token.end);token.next=nextToken;nextToken.prev=token;token=nextToken}}while(token.kind===_tokenKind.TokenKind.COMMENT)}return token}}exports.Lexer=Lexer;function isPunctuatorTokenKind(kind){return kind===_tokenKind.TokenKind.BANG||kind===_tokenKind.TokenKind.DOLLAR||kind===_tokenKind.TokenKind.AMP||kind===_tokenKind.TokenKind.PAREN_L||kind===_tokenKind.TokenKind.PAREN_R||kind===_tokenKind.TokenKind.SPREAD||kind===_tokenKind.TokenKind.COLON||kind===_tokenKind.TokenKind.EQUALS||kind===_tokenKind.TokenKind.AT||kind===_tokenKind.TokenKind.BRACKET_L||kind===_tokenKind.TokenKind.BRACKET_R||kind===_tokenKind.TokenKind.BRACE_L||kind===_tokenKind.TokenKind.PIPE||kind===_tokenKind.TokenKind.BRACE_R}function isUnicodeScalarValue(code){return code>=0&&code<=55295||code>=57344&&code<=1114111}function isSupplementaryCodePoint(body,location){return isLeadingSurrogate(body.charCodeAt(location))&&isTrailingSurrogate(body.charCodeAt(location+1))}function isLeadingSurrogate(code){return code>=55296&&code<=56319}function isTrailingSurrogate(code){return code>=56320&&code<=57343}function printCodePointAt(lexer,location){const code=lexer.source.body.codePointAt(location);if(code===undefined){return _tokenKind.TokenKind.EOF}else if(code>=32&&code<=126){const char=String.fromCodePoint(code);return char==='"'?"'\"'":`"${char}"`}return"U+"+code.toString(16).toUpperCase().padStart(4,"0")}function createToken(lexer,kind,start,end,value){const line=lexer.line;const col=1+start-lexer.lineStart;return new _ast.Token(kind,start,end,line,col,value)}function readNextToken(lexer,start){const body=lexer.source.body;const bodyLength=body.length;let position=start;while(position<bodyLength){const code=body.charCodeAt(position);switch(code){case 65279:case 9:case 32:case 44:++position;continue;case 10:++position;++lexer.line;lexer.lineStart=position;continue;case 13:if(body.charCodeAt(position+1)===10){position+=2}else{++position}++lexer.line;lexer.lineStart=position;continue;case 35:return readComment(lexer,position);case 33:return createToken(lexer,_tokenKind.TokenKind.BANG,position,position+1);case 36:return createToken(lexer,_tokenKind.TokenKind.DOLLAR,position,position+1);case 38:return createToken(lexer,_tokenKind.TokenKind.AMP,position,position+1);case 40:return createToken(lexer,_tokenKind.TokenKind.PAREN_L,position,position+1);case 41:return createToken(lexer,_tokenKind.TokenKind.PAREN_R,position,position+1);case 46:if(body.charCodeAt(position+1)===46&&body.charCodeAt(position+2)===46){return createToken(lexer,_tokenKind.TokenKind.SPREAD,position,position+3)}break;case 58:return createToken(lexer,_tokenKind.TokenKind.COLON,position,position+1);case 61:return createToken(lexer,_tokenKind.TokenKind.EQUALS,position,position+1);case 64:return createToken(lexer,_tokenKind.TokenKind.AT,position,position+1);case 91:return createToken(lexer,_tokenKind.TokenKind.BRACKET_L,position,position+1);case 93:return createToken(lexer,_tokenKind.TokenKind.BRACKET_R,position,position+1);case 123:return createToken(lexer,_tokenKind.TokenKind.BRACE_L,position,position+1);case 124:return createToken(lexer,_tokenKind.TokenKind.PIPE,position,position+1);case 125:return createToken(lexer,_tokenKind.TokenKind.BRACE_R,position,position+1);case 34:if(body.charCodeAt(position+1)===34&&body.charCodeAt(position+2)===34){return readBlockString(lexer,position)}return readString(lexer,position)}if((0,_characterClasses.isDigit)(code)||code===45){return readNumber(lexer,position,code)}if((0,_characterClasses.isNameStart)(code)){return readName(lexer,position)}throw(0,_syntaxError.syntaxError)(lexer.source,position,code===39?"Unexpected single quote character ('), did you mean to use a double quote (\")?":isUnicodeScalarValue(code)||isSupplementaryCodePoint(body,position)?`Unexpected character: ${printCodePointAt(lexer,position)}.`:`Invalid character: ${printCodePointAt(lexer,position)}.`)}return createToken(lexer,_tokenKind.TokenKind.EOF,bodyLength,bodyLength)}function readComment(lexer,start){const body=lexer.source.body;const bodyLength=body.length;let position=start+1;while(position<bodyLength){const code=body.charCodeAt(position);if(code===10||code===13){break}if(isUnicodeScalarValue(code)){++position}else if(isSupplementaryCodePoint(body,position)){position+=2}else{break}}return createToken(lexer,_tokenKind.TokenKind.COMMENT,start,position,body.slice(start+1,position))}function readNumber(lexer,start,firstCode){const body=lexer.source.body;let position=start;let code=firstCode;let isFloat=false;if(code===45){code=body.charCodeAt(++position)}if(code===48){code=body.charCodeAt(++position);if((0,_characterClasses.isDigit)(code)){throw(0,_syntaxError.syntaxError)(lexer.source,position,`Invalid number, unexpected digit after 0: ${printCodePointAt(lexer,position)}.`)}}else{position=readDigits(lexer,position,code);code=body.charCodeAt(position)}if(code===46){isFloat=true;code=body.charCodeAt(++position);position=readDigits(lexer,position,code);code=body.charCodeAt(position)}if(code===69||code===101){isFloat=true;code=body.charCodeAt(++position);if(code===43||code===45){code=body.charCodeAt(++position)}position=readDigits(lexer,position,code);code=body.charCodeAt(position)}if(code===46||(0,_characterClasses.isNameStart)(code)){throw(0,_syntaxError.syntaxError)(lexer.source,position,`Invalid number, expected digit but got: ${printCodePointAt(lexer,position)}.`)}return createToken(lexer,isFloat?_tokenKind.TokenKind.FLOAT:_tokenKind.TokenKind.INT,start,position,body.slice(start,position))}function readDigits(lexer,start,firstCode){if(!(0,_characterClasses.isDigit)(firstCode)){throw(0,_syntaxError.syntaxError)(lexer.source,start,`Invalid number, expected digit but got: ${printCodePointAt(lexer,start)}.`)}const body=lexer.source.body;let position=start+1;while((0,_characterClasses.isDigit)(body.charCodeAt(position))){++position}return position}function readString(lexer,start){const body=lexer.source.body;const bodyLength=body.length;let position=start+1;let chunkStart=position;let value="";while(position<bodyLength){const code=body.charCodeAt(position);if(code===34){value+=body.slice(chunkStart,position);return createToken(lexer,_tokenKind.TokenKind.STRING,start,position+1,value)}if(code===92){value+=body.slice(chunkStart,position);const escape=body.charCodeAt(position+1)===117?body.charCodeAt(position+2)===123?readEscapedUnicodeVariableWidth(lexer,position):readEscapedUnicodeFixedWidth(lexer,position):readEscapedCharacter(lexer,position);value+=escape.value;position+=escape.size;chunkStart=position;continue}if(code===10||code===13){break}if(isUnicodeScalarValue(code)){++position}else if(isSupplementaryCodePoint(body,position)){position+=2}else{throw(0,_syntaxError.syntaxError)(lexer.source,position,`Invalid character within String: ${printCodePointAt(lexer,position)}.`)}}throw(0,_syntaxError.syntaxError)(lexer.source,position,"Unterminated string.")}function readEscapedUnicodeVariableWidth(lexer,position){const body=lexer.source.body;let point=0;let size=3;while(size<12){const code=body.charCodeAt(position+size++);if(code===125){if(size<5||!isUnicodeScalarValue(point)){break}return{value:String.fromCodePoint(point),size:size}}point=point<<4|readHexDigit(code);if(point<0){break}}throw(0,_syntaxError.syntaxError)(lexer.source,position,`Invalid Unicode escape sequence: "${body.slice(position,position+size)}".`)}function readEscapedUnicodeFixedWidth(lexer,position){const body=lexer.source.body;const code=read16BitHexCode(body,position+2);if(isUnicodeScalarValue(code)){return{value:String.fromCodePoint(code),size:6}}if(isLeadingSurrogate(code)){if(body.charCodeAt(position+6)===92&&body.charCodeAt(position+7)===117){const trailingCode=read16BitHexCode(body,position+8);if(isTrailingSurrogate(trailingCode)){return{value:String.fromCodePoint(code,trailingCode),size:12}}}}throw(0,_syntaxError.syntaxError)(lexer.source,position,`Invalid Unicode escape sequence: "${body.slice(position,position+6)}".`)}function read16BitHexCode(body,position){return readHexDigit(body.charCodeAt(position))<<12|readHexDigit(body.charCodeAt(position+1))<<8|readHexDigit(body.charCodeAt(position+2))<<4|readHexDigit(body.charCodeAt(position+3))}function readHexDigit(code){return code>=48&&code<=57?code-48:code>=65&&code<=70?code-55:code>=97&&code<=102?code-87:-1}function readEscapedCharacter(lexer,position){const body=lexer.source.body;const code=body.charCodeAt(position+1);switch(code){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:"\n",size:2};case 114:return{value:"\r",size:2};case 116:return{value:"\t",size:2}}throw(0,_syntaxError.syntaxError)(lexer.source,position,`Invalid character escape sequence: "${body.slice(position,position+2)}".`)}function readBlockString(lexer,start){const body=lexer.source.body;const bodyLength=body.length;let lineStart=lexer.lineStart;let position=start+3;let chunkStart=position;let currentLine="";const blockLines=[];while(position<bodyLength){const code=body.charCodeAt(position);if(code===34&&body.charCodeAt(position+1)===34&&body.charCodeAt(position+2)===34){currentLine+=body.slice(chunkStart,position);blockLines.push(currentLine);const token=createToken(lexer,_tokenKind.TokenKind.BLOCK_STRING,start,position+3,(0,_blockString.dedentBlockStringLines)(blockLines).join("\n"));lexer.line+=blockLines.length-1;lexer.lineStart=lineStart;return token}if(code===92&&body.charCodeAt(position+1)===34&&body.charCodeAt(position+2)===34&&body.charCodeAt(position+3)===34){currentLine+=body.slice(chunkStart,position);chunkStart=position+1;position+=4;continue}if(code===10||code===13){currentLine+=body.slice(chunkStart,position);blockLines.push(currentLine);if(code===13&&body.charCodeAt(position+1)===10){position+=2}else{++position}currentLine="";chunkStart=position;lineStart=position;continue}if(isUnicodeScalarValue(code)){++position}else if(isSupplementaryCodePoint(body,position)){position+=2}else{throw(0,_syntaxError.syntaxError)(lexer.source,position,`Invalid character within String: ${printCodePointAt(lexer,position)}.`)}}throw(0,_syntaxError.syntaxError)(lexer.source,position,"Unterminated string.")}function readName(lexer,start){const body=lexer.source.body;const bodyLength=body.length;let position=start+1;while(position<bodyLength){const code=body.charCodeAt(position);if((0,_characterClasses.isNameContinue)(code)){++position}else{break}}return createToken(lexer,_tokenKind.TokenKind.NAME,start,position,body.slice(start,position))}},{"../error/syntaxError.mjs":338,"./ast.mjs":370,"./blockString.mjs":371,"./characterClasses.mjs":372,"./tokenKind.mjs":384}],377:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLocation=getLocation;var _invariant=require("../jsutils/invariant.mjs");const LineRegExp=/\r\n|[\n\r]/g;function getLocation(source,position){let lastLineStart=0;let line=1;for(const match of source.body.matchAll(LineRegExp)){typeof match.index==="number"||(0,_invariant.invariant)(false);if(match.index>=position){break}lastLineStart=match.index+match[0].length;line+=1}return{line:line,column:position+1-lastLineStart}}},{"../jsutils/invariant.mjs":354}],378:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Parser=void 0;exports.parse=parse;exports.parseConstValue=parseConstValue;exports.parseType=parseType;exports.parseValue=parseValue;var _syntaxError=require("../error/syntaxError.mjs");var _ast=require("./ast.mjs");var _directiveLocation=require("./directiveLocation.mjs");var _kinds=require("./kinds.mjs");var _lexer=require("./lexer.mjs");var _source=require("./source.mjs");var _tokenKind=require("./tokenKind.mjs");function parse(source,options){const parser=new Parser(source,options);return parser.parseDocument()}function parseValue(source,options){const parser=new Parser(source,options);parser.expectToken(_tokenKind.TokenKind.SOF);const value=parser.parseValueLiteral(false);parser.expectToken(_tokenKind.TokenKind.EOF);return value}function parseConstValue(source,options){const parser=new Parser(source,options);parser.expectToken(_tokenKind.TokenKind.SOF);const value=parser.parseConstValueLiteral();parser.expectToken(_tokenKind.TokenKind.EOF);return value}function parseType(source,options){const parser=new Parser(source,options);parser.expectToken(_tokenKind.TokenKind.SOF);const type=parser.parseTypeReference();parser.expectToken(_tokenKind.TokenKind.EOF);return type}class Parser{constructor(source,options={}){const sourceObj=(0,_source.isSource)(source)?source:new _source.Source(source);this._lexer=new _lexer.Lexer(sourceObj);this._options=options;this._tokenCounter=0}parseName(){const token=this.expectToken(_tokenKind.TokenKind.NAME);return this.node(token,{kind:_kinds.Kind.NAME,value:token.value})}parseDocument(){return this.node(this._lexer.token,{kind:_kinds.Kind.DOCUMENT,definitions:this.many(_tokenKind.TokenKind.SOF,this.parseDefinition,_tokenKind.TokenKind.EOF)})}parseDefinition(){if(this.peek(_tokenKind.TokenKind.BRACE_L)){return this.parseOperationDefinition()}const hasDescription=this.peekDescription();const keywordToken=hasDescription?this._lexer.lookahead():this._lexer.token;if(keywordToken.kind===_tokenKind.TokenKind.NAME){switch(keywordToken.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(hasDescription){throw(0,_syntaxError.syntaxError)(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.")}switch(keywordToken.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(keywordToken)}parseOperationDefinition(){const start=this._lexer.token;if(this.peek(_tokenKind.TokenKind.BRACE_L)){return this.node(start,{kind:_kinds.Kind.OPERATION_DEFINITION,operation:_ast.OperationTypeNode.QUERY,name:undefined,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()})}const operation=this.parseOperationType();let name;if(this.peek(_tokenKind.TokenKind.NAME)){name=this.parseName()}return this.node(start,{kind:_kinds.Kind.OPERATION_DEFINITION,operation:operation,name:name,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(false),selectionSet:this.parseSelectionSet()})}parseOperationType(){const operationToken=this.expectToken(_tokenKind.TokenKind.NAME);switch(operationToken.value){case"query":return _ast.OperationTypeNode.QUERY;case"mutation":return _ast.OperationTypeNode.MUTATION;case"subscription":return _ast.OperationTypeNode.SUBSCRIPTION}throw this.unexpected(operationToken)}parseVariableDefinitions(){return this.optionalMany(_tokenKind.TokenKind.PAREN_L,this.parseVariableDefinition,_tokenKind.TokenKind.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:_kinds.Kind.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(_tokenKind.TokenKind.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(_tokenKind.TokenKind.EQUALS)?this.parseConstValueLiteral():undefined,directives:this.parseConstDirectives()})}parseVariable(){const start=this._lexer.token;this.expectToken(_tokenKind.TokenKind.DOLLAR);return this.node(start,{kind:_kinds.Kind.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:_kinds.Kind.SELECTION_SET,selections:this.many(_tokenKind.TokenKind.BRACE_L,this.parseSelection,_tokenKind.TokenKind.BRACE_R)})}parseSelection(){return this.peek(_tokenKind.TokenKind.SPREAD)?this.parseFragment():this.parseField()}parseField(){const start=this._lexer.token;const nameOrAlias=this.parseName();let alias;let name;if(this.expectOptionalToken(_tokenKind.TokenKind.COLON)){alias=nameOrAlias;name=this.parseName()}else{name=nameOrAlias}return this.node(start,{kind:_kinds.Kind.FIELD,alias:alias,name:name,arguments:this.parseArguments(false),directives:this.parseDirectives(false),selectionSet:this.peek(_tokenKind.TokenKind.BRACE_L)?this.parseSelectionSet():undefined})}parseArguments(isConst){const item=isConst?this.parseConstArgument:this.parseArgument;return this.optionalMany(_tokenKind.TokenKind.PAREN_L,item,_tokenKind.TokenKind.PAREN_R)}parseArgument(isConst=false){const start=this._lexer.token;const name=this.parseName();this.expectToken(_tokenKind.TokenKind.COLON);return this.node(start,{kind:_kinds.Kind.ARGUMENT,name:name,value:this.parseValueLiteral(isConst)})}parseConstArgument(){return this.parseArgument(true)}parseFragment(){const start=this._lexer.token;this.expectToken(_tokenKind.TokenKind.SPREAD);const hasTypeCondition=this.expectOptionalKeyword("on");if(!hasTypeCondition&&this.peek(_tokenKind.TokenKind.NAME)){return this.node(start,{kind:_kinds.Kind.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(false)})}return this.node(start,{kind:_kinds.Kind.INLINE_FRAGMENT,typeCondition:hasTypeCondition?this.parseNamedType():undefined,directives:this.parseDirectives(false),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const start=this._lexer.token;this.expectKeyword("fragment");if(this._options.allowLegacyFragmentVariables===true){return this.node(start,{kind:_kinds.Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(false),selectionSet:this.parseSelectionSet()})}return this.node(start,{kind:_kinds.Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(false),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on"){throw this.unexpected()}return this.parseName()}parseValueLiteral(isConst){const token=this._lexer.token;switch(token.kind){case _tokenKind.TokenKind.BRACKET_L:return this.parseList(isConst);case _tokenKind.TokenKind.BRACE_L:return this.parseObject(isConst);case _tokenKind.TokenKind.INT:this.advanceLexer();return this.node(token,{kind:_kinds.Kind.INT,value:token.value});case _tokenKind.TokenKind.FLOAT:this.advanceLexer();return this.node(token,{kind:_kinds.Kind.FLOAT,value:token.value});case _tokenKind.TokenKind.STRING:case _tokenKind.TokenKind.BLOCK_STRING:return this.parseStringLiteral();case _tokenKind.TokenKind.NAME:this.advanceLexer();switch(token.value){case"true":return this.node(token,{kind:_kinds.Kind.BOOLEAN,value:true});case"false":return this.node(token,{kind:_kinds.Kind.BOOLEAN,value:false});case"null":return this.node(token,{kind:_kinds.Kind.NULL});default:return this.node(token,{kind:_kinds.Kind.ENUM,value:token.value})}case _tokenKind.TokenKind.DOLLAR:if(isConst){this.expectToken(_tokenKind.TokenKind.DOLLAR);if(this._lexer.token.kind===_tokenKind.TokenKind.NAME){const varName=this._lexer.token.value;throw(0,_syntaxError.syntaxError)(this._lexer.source,token.start,`Unexpected variable "$${varName}" in constant value.`)}else{throw this.unexpected(token)}}return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(true)}parseStringLiteral(){const token=this._lexer.token;this.advanceLexer();return this.node(token,{kind:_kinds.Kind.STRING,value:token.value,block:token.kind===_tokenKind.TokenKind.BLOCK_STRING})}parseList(isConst){const item=()=>this.parseValueLiteral(isConst);return this.node(this._lexer.token,{kind:_kinds.Kind.LIST,values:this.any(_tokenKind.TokenKind.BRACKET_L,item,_tokenKind.TokenKind.BRACKET_R)})}parseObject(isConst){const item=()=>this.parseObjectField(isConst);return this.node(this._lexer.token,{kind:_kinds.Kind.OBJECT,fields:this.any(_tokenKind.TokenKind.BRACE_L,item,_tokenKind.TokenKind.BRACE_R)})}parseObjectField(isConst){const start=this._lexer.token;const name=this.parseName();this.expectToken(_tokenKind.TokenKind.COLON);return this.node(start,{kind:_kinds.Kind.OBJECT_FIELD,name:name,value:this.parseValueLiteral(isConst)})}parseDirectives(isConst){const directives=[];while(this.peek(_tokenKind.TokenKind.AT)){directives.push(this.parseDirective(isConst))}return directives}parseConstDirectives(){return this.parseDirectives(true)}parseDirective(isConst){const start=this._lexer.token;this.expectToken(_tokenKind.TokenKind.AT);return this.node(start,{kind:_kinds.Kind.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(isConst)})}parseTypeReference(){const start=this._lexer.token;let type;if(this.expectOptionalToken(_tokenKind.TokenKind.BRACKET_L)){const innerType=this.parseTypeReference();this.expectToken(_tokenKind.TokenKind.BRACKET_R);type=this.node(start,{kind:_kinds.Kind.LIST_TYPE,type:innerType})}else{type=this.parseNamedType()}if(this.expectOptionalToken(_tokenKind.TokenKind.BANG)){return this.node(start,{kind:_kinds.Kind.NON_NULL_TYPE,type:type})}return type}parseNamedType(){return this.node(this._lexer.token,{kind:_kinds.Kind.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(_tokenKind.TokenKind.STRING)||this.peek(_tokenKind.TokenKind.BLOCK_STRING)}parseDescription(){if(this.peekDescription()){return this.parseStringLiteral()}}parseSchemaDefinition(){const start=this._lexer.token;const description=this.parseDescription();this.expectKeyword("schema");const directives=this.parseConstDirectives();const operationTypes=this.many(_tokenKind.TokenKind.BRACE_L,this.parseOperationTypeDefinition,_tokenKind.TokenKind.BRACE_R);return this.node(start,{kind:_kinds.Kind.SCHEMA_DEFINITION,description:description,directives:directives,operationTypes:operationTypes})}parseOperationTypeDefinition(){const start=this._lexer.token;const operation=this.parseOperationType();this.expectToken(_tokenKind.TokenKind.COLON);const type=this.parseNamedType();return this.node(start,{kind:_kinds.Kind.OPERATION_TYPE_DEFINITION,operation:operation,type:type})}parseScalarTypeDefinition(){const start=this._lexer.token;const description=this.parseDescription();this.expectKeyword("scalar");const name=this.parseName();const directives=this.parseConstDirectives();return this.node(start,{kind:_kinds.Kind.SCALAR_TYPE_DEFINITION,description:description,name:name,directives:directives})}parseObjectTypeDefinition(){const start=this._lexer.token;const description=this.parseDescription();this.expectKeyword("type");const name=this.parseName();const interfaces=this.parseImplementsInterfaces();const directives=this.parseConstDirectives();const fields=this.parseFieldsDefinition();return this.node(start,{kind:_kinds.Kind.OBJECT_TYPE_DEFINITION,description:description,name:name,interfaces:interfaces,directives:directives,fields:fields})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(_tokenKind.TokenKind.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(_tokenKind.TokenKind.BRACE_L,this.parseFieldDefinition,_tokenKind.TokenKind.BRACE_R)}parseFieldDefinition(){const start=this._lexer.token;const description=this.parseDescription();const name=this.parseName();const args=this.parseArgumentDefs();this.expectToken(_tokenKind.TokenKind.COLON);const type=this.parseTypeReference();const directives=this.parseConstDirectives();return this.node(start,{kind:_kinds.Kind.FIELD_DEFINITION,description:description,name:name,arguments:args,type:type,directives:directives})}parseArgumentDefs(){return this.optionalMany(_tokenKind.TokenKind.PAREN_L,this.parseInputValueDef,_tokenKind.TokenKind.PAREN_R)}parseInputValueDef(){const start=this._lexer.token;const description=this.parseDescription();const name=this.parseName();this.expectToken(_tokenKind.TokenKind.COLON);const type=this.parseTypeReference();let defaultValue;if(this.expectOptionalToken(_tokenKind.TokenKind.EQUALS)){defaultValue=this.parseConstValueLiteral()}const directives=this.parseConstDirectives();return this.node(start,{kind:_kinds.Kind.INPUT_VALUE_DEFINITION,description:description,name:name,type:type,defaultValue:defaultValue,directives:directives})}parseInterfaceTypeDefinition(){const start=this._lexer.token;const description=this.parseDescription();this.expectKeyword("interface");const name=this.parseName();const interfaces=this.parseImplementsInterfaces();const directives=this.parseConstDirectives();const fields=this.parseFieldsDefinition();return this.node(start,{kind:_kinds.Kind.INTERFACE_TYPE_DEFINITION,description:description,name:name,interfaces:interfaces,directives:directives,fields:fields})}parseUnionTypeDefinition(){const start=this._lexer.token;const description=this.parseDescription();this.expectKeyword("union");const name=this.parseName();const directives=this.parseConstDirectives();const types=this.parseUnionMemberTypes();return this.node(start,{kind:_kinds.Kind.UNION_TYPE_DEFINITION,description:description,name:name,directives:directives,types:types})}parseUnionMemberTypes(){return this.expectOptionalToken(_tokenKind.TokenKind.EQUALS)?this.delimitedMany(_tokenKind.TokenKind.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const start=this._lexer.token;const description=this.parseDescription();this.expectKeyword("enum");const name=this.parseName();const directives=this.parseConstDirectives();const values=this.parseEnumValuesDefinition();return this.node(start,{kind:_kinds.Kind.ENUM_TYPE_DEFINITION,description:description,name:name,directives:directives,values:values})}parseEnumValuesDefinition(){return this.optionalMany(_tokenKind.TokenKind.BRACE_L,this.parseEnumValueDefinition,_tokenKind.TokenKind.BRACE_R)}parseEnumValueDefinition(){const start=this._lexer.token;const description=this.parseDescription();const name=this.parseEnumValueName();const directives=this.parseConstDirectives();return this.node(start,{kind:_kinds.Kind.ENUM_VALUE_DEFINITION,description:description,name:name,directives:directives})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null"){throw(0,_syntaxError.syntaxError)(this._lexer.source,this._lexer.token.start,`${getTokenDesc(this._lexer.token)} is reserved and cannot be used for an enum value.`)}return this.parseName()}parseInputObjectTypeDefinition(){const start=this._lexer.token;const description=this.parseDescription();this.expectKeyword("input");const name=this.parseName();const directives=this.parseConstDirectives();const fields=this.parseInputFieldsDefinition();return this.node(start,{kind:_kinds.Kind.INPUT_OBJECT_TYPE_DEFINITION,description:description,name:name,directives:directives,fields:fields})}parseInputFieldsDefinition(){return this.optionalMany(_tokenKind.TokenKind.BRACE_L,this.parseInputValueDef,_tokenKind.TokenKind.BRACE_R)}parseTypeSystemExtension(){const keywordToken=this._lexer.lookahead();if(keywordToken.kind===_tokenKind.TokenKind.NAME){switch(keywordToken.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}}throw this.unexpected(keywordToken)}parseSchemaExtension(){const start=this._lexer.token;this.expectKeyword("extend");this.expectKeyword("schema");const directives=this.parseConstDirectives();const operationTypes=this.optionalMany(_tokenKind.TokenKind.BRACE_L,this.parseOperationTypeDefinition,_tokenKind.TokenKind.BRACE_R);if(directives.length===0&&operationTypes.length===0){throw this.unexpected()}return this.node(start,{kind:_kinds.Kind.SCHEMA_EXTENSION,directives:directives,operationTypes:operationTypes})}parseScalarTypeExtension(){const start=this._lexer.token;this.expectKeyword("extend");this.expectKeyword("scalar");const name=this.parseName();const directives=this.parseConstDirectives();if(directives.length===0){throw this.unexpected()}return this.node(start,{kind:_kinds.Kind.SCALAR_TYPE_EXTENSION,name:name,directives:directives})}parseObjectTypeExtension(){const start=this._lexer.token;this.expectKeyword("extend");this.expectKeyword("type");const name=this.parseName();const interfaces=this.parseImplementsInterfaces();const directives=this.parseConstDirectives();const fields=this.parseFieldsDefinition();if(interfaces.length===0&&directives.length===0&&fields.length===0){throw this.unexpected()}return this.node(start,{kind:_kinds.Kind.OBJECT_TYPE_EXTENSION,name:name,interfaces:interfaces,directives:directives,fields:fields})}parseInterfaceTypeExtension(){const start=this._lexer.token;this.expectKeyword("extend");this.expectKeyword("interface");const name=this.parseName();const interfaces=this.parseImplementsInterfaces();const directives=this.parseConstDirectives();const fields=this.parseFieldsDefinition();if(interfaces.length===0&&directives.length===0&&fields.length===0){throw this.unexpected()}return this.node(start,{kind:_kinds.Kind.INTERFACE_TYPE_EXTENSION,name:name,interfaces:interfaces,directives:directives,fields:fields})}parseUnionTypeExtension(){const start=this._lexer.token;this.expectKeyword("extend");this.expectKeyword("union");const name=this.parseName();const directives=this.parseConstDirectives();const types=this.parseUnionMemberTypes();if(directives.length===0&&types.length===0){throw this.unexpected()}return this.node(start,{kind:_kinds.Kind.UNION_TYPE_EXTENSION,name:name,directives:directives,types:types})}parseEnumTypeExtension(){const start=this._lexer.token;this.expectKeyword("extend");this.expectKeyword("enum");const name=this.parseName();const directives=this.parseConstDirectives();const values=this.parseEnumValuesDefinition();if(directives.length===0&&values.length===0){throw this.unexpected()}return this.node(start,{kind:_kinds.Kind.ENUM_TYPE_EXTENSION,name:name,directives:directives,values:values})}parseInputObjectTypeExtension(){const start=this._lexer.token;this.expectKeyword("extend");this.expectKeyword("input");const name=this.parseName();const directives=this.parseConstDirectives();const fields=this.parseInputFieldsDefinition();if(directives.length===0&&fields.length===0){throw this.unexpected()}return this.node(start,{kind:_kinds.Kind.INPUT_OBJECT_TYPE_EXTENSION,name:name,directives:directives,fields:fields})}parseDirectiveDefinition(){const start=this._lexer.token;const description=this.parseDescription();this.expectKeyword("directive");this.expectToken(_tokenKind.TokenKind.AT);const name=this.parseName();const args=this.parseArgumentDefs();const repeatable=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const locations=this.parseDirectiveLocations();return this.node(start,{kind:_kinds.Kind.DIRECTIVE_DEFINITION,description:description,name:name,arguments:args,repeatable:repeatable,locations:locations})}parseDirectiveLocations(){return this.delimitedMany(_tokenKind.TokenKind.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const start=this._lexer.token;const name=this.parseName();if(Object.prototype.hasOwnProperty.call(_directiveLocation.DirectiveLocation,name.value)){return name}throw this.unexpected(start)}node(startToken,node){if(this._options.noLocation!==true){node.loc=new _ast.Location(startToken,this._lexer.lastToken,this._lexer.source)}return node}peek(kind){return this._lexer.token.kind===kind}expectToken(kind){const token=this._lexer.token;if(token.kind===kind){this.advanceLexer();return token}throw(0,_syntaxError.syntaxError)(this._lexer.source,token.start,`Expected ${getTokenKindDesc(kind)}, found ${getTokenDesc(token)}.`)}expectOptionalToken(kind){const token=this._lexer.token;if(token.kind===kind){this.advanceLexer();return true}return false}expectKeyword(value){const token=this._lexer.token;if(token.kind===_tokenKind.TokenKind.NAME&&token.value===value){this.advanceLexer()}else{throw(0,_syntaxError.syntaxError)(this._lexer.source,token.start,`Expected "${value}", found ${getTokenDesc(token)}.`)}}expectOptionalKeyword(value){const token=this._lexer.token;if(token.kind===_tokenKind.TokenKind.NAME&&token.value===value){this.advanceLexer();return true}return false}unexpected(atToken){const token=atToken!==null&&atToken!==void 0?atToken:this._lexer.token;return(0,_syntaxError.syntaxError)(this._lexer.source,token.start,`Unexpected ${getTokenDesc(token)}.`)}any(openKind,parseFn,closeKind){this.expectToken(openKind);const nodes=[];while(!this.expectOptionalToken(closeKind)){nodes.push(parseFn.call(this))}return nodes}optionalMany(openKind,parseFn,closeKind){if(this.expectOptionalToken(openKind)){const nodes=[];do{nodes.push(parseFn.call(this))}while(!this.expectOptionalToken(closeKind));return nodes}return[]}many(openKind,parseFn,closeKind){this.expectToken(openKind);const nodes=[];do{nodes.push(parseFn.call(this))}while(!this.expectOptionalToken(closeKind));return nodes}delimitedMany(delimiterKind,parseFn){this.expectOptionalToken(delimiterKind);const nodes=[];do{nodes.push(parseFn.call(this))}while(this.expectOptionalToken(delimiterKind));return nodes}advanceLexer(){const{maxTokens}=this._options;const token=this._lexer.advance();if(maxTokens!==undefined&&token.kind!==_tokenKind.TokenKind.EOF){++this._tokenCounter;if(this._tokenCounter>maxTokens){throw(0,_syntaxError.syntaxError)(this._lexer.source,token.start,`Document contains more that ${maxTokens} tokens. Parsing aborted.`)}}}}exports.Parser=Parser;function getTokenDesc(token){const value=token.value;return getTokenKindDesc(token.kind)+(value!=null?` "${value}"`:"")}function getTokenKindDesc(kind){return(0,_lexer.isPunctuatorTokenKind)(kind)?`"${kind}"`:kind}},{"../error/syntaxError.mjs":338,"./ast.mjs":370,"./directiveLocation.mjs":373,"./kinds.mjs":375,"./lexer.mjs":376,"./source.mjs":383,"./tokenKind.mjs":384}],379:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isConstValueNode=isConstValueNode;exports.isDefinitionNode=isDefinitionNode;exports.isExecutableDefinitionNode=isExecutableDefinitionNode;exports.isSelectionNode=isSelectionNode;exports.isTypeDefinitionNode=isTypeDefinitionNode;exports.isTypeExtensionNode=isTypeExtensionNode;exports.isTypeNode=isTypeNode;exports.isTypeSystemDefinitionNode=isTypeSystemDefinitionNode;exports.isTypeSystemExtensionNode=isTypeSystemExtensionNode;exports.isValueNode=isValueNode;var _kinds=require("./kinds.mjs");function isDefinitionNode(node){return isExecutableDefinitionNode(node)||isTypeSystemDefinitionNode(node)||isTypeSystemExtensionNode(node)}function isExecutableDefinitionNode(node){return node.kind===_kinds.Kind.OPERATION_DEFINITION||node.kind===_kinds.Kind.FRAGMENT_DEFINITION}function isSelectionNode(node){return node.kind===_kinds.Kind.FIELD||node.kind===_kinds.Kind.FRAGMENT_SPREAD||node.kind===_kinds.Kind.INLINE_FRAGMENT}function isValueNode(node){return node.kind===_kinds.Kind.VARIABLE||node.kind===_kinds.Kind.INT||node.kind===_kinds.Kind.FLOAT||node.kind===_kinds.Kind.STRING||node.kind===_kinds.Kind.BOOLEAN||node.kind===_kinds.Kind.NULL||node.kind===_kinds.Kind.ENUM||node.kind===_kinds.Kind.LIST||node.kind===_kinds.Kind.OBJECT}function isConstValueNode(node){return isValueNode(node)&&(node.kind===_kinds.Kind.LIST?node.values.some(isConstValueNode):node.kind===_kinds.Kind.OBJECT?node.fields.some(field=>isConstValueNode(field.value)):node.kind!==_kinds.Kind.VARIABLE)}function isTypeNode(node){return node.kind===_kinds.Kind.NAMED_TYPE||node.kind===_kinds.Kind.LIST_TYPE||node.kind===_kinds.Kind.NON_NULL_TYPE}function isTypeSystemDefinitionNode(node){return node.kind===_kinds.Kind.SCHEMA_DEFINITION||isTypeDefinitionNode(node)||node.kind===_kinds.Kind.DIRECTIVE_DEFINITION}function isTypeDefinitionNode(node){return node.kind===_kinds.Kind.SCALAR_TYPE_DEFINITION||node.kind===_kinds.Kind.OBJECT_TYPE_DEFINITION||node.kind===_kinds.Kind.INTERFACE_TYPE_DEFINITION||node.kind===_kinds.Kind.UNION_TYPE_DEFINITION||node.kind===_kinds.Kind.ENUM_TYPE_DEFINITION||node.kind===_kinds.Kind.INPUT_OBJECT_TYPE_DEFINITION}function isTypeSystemExtensionNode(node){return node.kind===_kinds.Kind.SCHEMA_EXTENSION||isTypeExtensionNode(node)}function isTypeExtensionNode(node){return node.kind===_kinds.Kind.SCALAR_TYPE_EXTENSION||node.kind===_kinds.Kind.OBJECT_TYPE_EXTENSION||node.kind===_kinds.Kind.INTERFACE_TYPE_EXTENSION||node.kind===_kinds.Kind.UNION_TYPE_EXTENSION||node.kind===_kinds.Kind.ENUM_TYPE_EXTENSION||node.kind===_kinds.Kind.INPUT_OBJECT_TYPE_EXTENSION}},{"./kinds.mjs":375}],380:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.printLocation=printLocation;exports.printSourceLocation=printSourceLocation;var _location=require("./location.mjs");function printLocation(location){return printSourceLocation(location.source,(0,_location.getLocation)(location.source,location.start))}function printSourceLocation(source,sourceLocation){const firstLineColumnOffset=source.locationOffset.column-1;const body="".padStart(firstLineColumnOffset)+source.body;const lineIndex=sourceLocation.line-1;const lineOffset=source.locationOffset.line-1;const lineNum=sourceLocation.line+lineOffset;const columnOffset=sourceLocation.line===1?firstLineColumnOffset:0;const columnNum=sourceLocation.column+columnOffset;const locationStr=`${source.name}:${lineNum}:${columnNum}\n`;const lines=body.split(/\r\n|[\n\r]/g);const locationLine=lines[lineIndex];if(locationLine.length>120){const subLineIndex=Math.floor(columnNum/80);const subLineColumnNum=columnNum%80;const subLines=[];for(let i=0;i<locationLine.length;i+=80){subLines.push(locationLine.slice(i,i+80))}return locationStr+printPrefixedLines([[`${lineNum} |`,subLines[0]],...subLines.slice(1,subLineIndex+1).map(subLine=>["|",subLine]),["|","^".padStart(subLineColumnNum)],["|",subLines[subLineIndex+1]]])}return locationStr+printPrefixedLines([[`${lineNum-1} |`,lines[lineIndex-1]],[`${lineNum} |`,locationLine],["|","^".padStart(columnNum)],[`${lineNum+1} |`,lines[lineIndex+1]]])}function printPrefixedLines(lines){const existingLines=lines.filter(([_,line])=>line!==undefined);const padLen=Math.max(...existingLines.map(([prefix])=>prefix.length));return existingLines.map(([prefix,line])=>prefix.padStart(padLen)+(line?" "+line:"")).join("\n")}},{"./location.mjs":377}],381:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.printString=printString;function printString(str){return`"${str.replace(escapedRegExp,escapedReplacer)}"`}const escapedRegExp=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function escapedReplacer(str){return escapeSequences[str.charCodeAt(0)]}const escapeSequences=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"]},{}],382:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.print=print;var _blockString=require("./blockString.mjs");var _printString=require("./printString.mjs");var _visitor=require("./visitor.mjs");function print(ast){return(0,_visitor.visit)(ast,printDocASTReducer)}const MAX_LINE_LENGTH=80;const printDocASTReducer={Name:{leave:node=>node.value},Variable:{leave:node=>"$"+node.name},Document:{leave:node=>join(node.definitions,"\n\n")},OperationDefinition:{leave(node){const varDefs=wrap("(",join(node.variableDefinitions,", "),")");const prefix=join([node.operation,join([node.name,varDefs]),join(node.directives," ")]," ");return(prefix==="query"?"":prefix+" ")+node.selectionSet}},VariableDefinition:{leave:({variable,type,defaultValue,directives})=>variable+": "+type+wrap(" = ",defaultValue)+wrap(" ",join(directives," "))},SelectionSet:{leave:({selections})=>block(selections)},Field:{leave({alias,name,arguments:args,directives,selectionSet}){const prefix=wrap("",alias,": ")+name;let argsLine=prefix+wrap("(",join(args,", "),")");if(argsLine.length>MAX_LINE_LENGTH){argsLine=prefix+wrap("(\n",indent(join(args,"\n")),"\n)")}return join([argsLine,join(directives," "),selectionSet]," ")}},Argument:{leave:({name,value})=>name+": "+value},FragmentSpread:{leave:({name,directives})=>"..."+name+wrap(" ",join(directives," "))},InlineFragment:{leave:({typeCondition,directives,selectionSet})=>join(["...",wrap("on ",typeCondition),join(directives," "),selectionSet]," ")},FragmentDefinition:{leave:({name,typeCondition,variableDefinitions,directives,selectionSet})=>`fragment ${name}${wrap("(",join(variableDefinitions,", "),")")} `+`on ${typeCondition} ${wrap("",join(directives," ")," ")}`+selectionSet},IntValue:{leave:({value})=>value},FloatValue:{leave:({value})=>value},StringValue:{leave:({value,block:isBlockString})=>isBlockString?(0,_blockString.printBlockString)(value):(0,_printString.printString)(value)},BooleanValue:{leave:({value})=>value?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value})=>value},ListValue:{leave:({values})=>"["+join(values,", ")+"]"},ObjectValue:{leave:({fields})=>"{"+join(fields,", ")+"}"},ObjectField:{leave:({name,value})=>name+": "+value},Directive:{leave:({name,arguments:args})=>"@"+name+wrap("(",join(args,", "),")")},NamedType:{leave:({name})=>name},ListType:{leave:({type})=>"["+type+"]"},NonNullType:{leave:({type})=>type+"!"},SchemaDefinition:{leave:({description,directives,operationTypes})=>wrap("",description,"\n")+join(["schema",join(directives," "),block(operationTypes)]," ")},OperationTypeDefinition:{leave:({operation,type})=>operation+": "+type},ScalarTypeDefinition:{leave:({description,name,directives})=>wrap("",description,"\n")+join(["scalar",name,join(directives," ")]," ")},ObjectTypeDefinition:{leave:({description,name,interfaces,directives,fields})=>wrap("",description,"\n")+join(["type",name,wrap("implements ",join(interfaces," & ")),join(directives," "),block(fields)]," ")},FieldDefinition:{leave:({description,name,arguments:args,type,directives})=>wrap("",description,"\n")+name+(hasMultilineItems(args)?wrap("(\n",indent(join(args,"\n")),"\n)"):wrap("(",join(args,", "),")"))+": "+type+wrap(" ",join(directives," "))},InputValueDefinition:{leave:({description,name,type,defaultValue,directives})=>wrap("",description,"\n")+join([name+": "+type,wrap("= ",defaultValue),join(directives," ")]," ")},InterfaceTypeDefinition:{leave:({description,name,interfaces,directives,fields})=>wrap("",description,"\n")+join(["interface",name,wrap("implements ",join(interfaces," & ")),join(directives," "),block(fields)]," ")},UnionTypeDefinition:{leave:({description,name,directives,types})=>wrap("",description,"\n")+join(["union",name,join(directives," "),wrap("= ",join(types," | "))]," ")},EnumTypeDefinition:{leave:({description,name,directives,values})=>wrap("",description,"\n")+join(["enum",name,join(directives," "),block(values)]," ")},EnumValueDefinition:{leave:({description,name,directives})=>wrap("",description,"\n")+join([name,join(directives," ")]," ")},InputObjectTypeDefinition:{leave:({description,name,directives,fields})=>wrap("",description,"\n")+join(["input",name,join(directives," "),block(fields)]," ")},DirectiveDefinition:{leave:({description,name,arguments:args,repeatable,locations})=>wrap("",description,"\n")+"directive @"+name+(hasMultilineItems(args)?wrap("(\n",indent(join(args,"\n")),"\n)"):wrap("(",join(args,", "),")"))+(repeatable?" repeatable":"")+" on "+join(locations," | ")},SchemaExtension:{leave:({directives,operationTypes})=>join(["extend schema",join(directives," "),block(operationTypes)]," ")},ScalarTypeExtension:{leave:({name,directives})=>join(["extend scalar",name,join(directives," ")]," ")},ObjectTypeExtension:{leave:({name,interfaces,directives,fields})=>join(["extend type",name,wrap("implements ",join(interfaces," & ")),join(directives," "),block(fields)]," ")},InterfaceTypeExtension:{leave:({name,interfaces,directives,fields})=>join(["extend interface",name,wrap("implements ",join(interfaces," & ")),join(directives," "),block(fields)]," ")},UnionTypeExtension:{leave:({name,directives,types})=>join(["extend union",name,join(directives," "),wrap("= ",join(types," | "))]," ")},EnumTypeExtension:{leave:({name,directives,values})=>join(["extend enum",name,join(directives," "),block(values)]," ")},InputObjectTypeExtension:{leave:({name,directives,fields})=>join(["extend input",name,join(directives," "),block(fields)]," ")}};function join(maybeArray,separator=""){var _maybeArray$filter$jo;return(_maybeArray$filter$jo=maybeArray===null||maybeArray===void 0?void 0:maybeArray.filter(x=>x).join(separator))!==null&&_maybeArray$filter$jo!==void 0?_maybeArray$filter$jo:""}function block(array){return wrap("{\n",indent(join(array,"\n")),"\n}")}function wrap(start,maybeString,end=""){return maybeString!=null&&maybeString!==""?start+maybeString+end:""}function indent(str){return wrap("  ",str.replace(/\n/g,"\n  "))}function hasMultilineItems(maybeArray){var _maybeArray$some;return(_maybeArray$some=maybeArray===null||maybeArray===void 0?void 0:maybeArray.some(str=>str.includes("\n")))!==null&&_maybeArray$some!==void 0?_maybeArray$some:false}},{"./blockString.mjs":371,"./printString.mjs":381,"./visitor.mjs":385}],383:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Source=void 0;exports.isSource=isSource;var _devAssert=require("../jsutils/devAssert.mjs");var _inspect=require("../jsutils/inspect.mjs");var _instanceOf=require("../jsutils/instanceOf.mjs");class Source{constructor(body,name="GraphQL request",locationOffset={line:1,column:1}){typeof body==="string"||(0,_devAssert.devAssert)(false,`Body must be a string. Received: ${(0,_inspect.inspect)(body)}.`);this.body=body;this.name=name;this.locationOffset=locationOffset;this.locationOffset.line>0||(0,_devAssert.devAssert)(false,"line in locationOffset is 1-indexed and must be positive.");this.locationOffset.column>0||(0,_devAssert.devAssert)(false,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}exports.Source=Source;function isSource(source){return(0,_instanceOf.instanceOf)(source,Source)}},{"../jsutils/devAssert.mjs":348,"../jsutils/inspect.mjs":352,"../jsutils/instanceOf.mjs":353}],384:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TokenKind=void 0;var TokenKind;exports.TokenKind=TokenKind;(function(TokenKind){TokenKind["SOF"]="<SOF>";TokenKind["EOF"]="<EOF>";TokenKind["BANG"]="!";TokenKind["DOLLAR"]="$";TokenKind["AMP"]="&";TokenKind["PAREN_L"]="(";TokenKind["PAREN_R"]=")";TokenKind["SPREAD"]="...";TokenKind["COLON"]=":";TokenKind["EQUALS"]="=";TokenKind["AT"]="@";TokenKind["BRACKET_L"]="[";TokenKind["BRACKET_R"]="]";TokenKind["BRACE_L"]="{";TokenKind["PIPE"]="|";TokenKind["BRACE_R"]="}";TokenKind["NAME"]="Name";TokenKind["INT"]="Int";TokenKind["FLOAT"]="Float";TokenKind["STRING"]="String";TokenKind["BLOCK_STRING"]="BlockString";TokenKind["COMMENT"]="Comment"})(TokenKind||(exports.TokenKind=TokenKind={}))},{}],385:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BREAK=void 0;exports.getEnterLeaveForKind=getEnterLeaveForKind;exports.getVisitFn=getVisitFn;exports.visit=visit;exports.visitInParallel=visitInParallel;var _devAssert=require("../jsutils/devAssert.mjs");var _inspect=require("../jsutils/inspect.mjs");var _ast=require("./ast.mjs");var _kinds=require("./kinds.mjs");const BREAK=Object.freeze({});exports.BREAK=BREAK;function visit(root,visitor,visitorKeys=_ast.QueryDocumentKeys){const enterLeaveMap=new Map;for(const kind of Object.values(_kinds.Kind)){enterLeaveMap.set(kind,getEnterLeaveForKind(visitor,kind))}let stack=undefined;let inArray=Array.isArray(root);let keys=[root];let index=-1;let edits=[];let node=root;let key=undefined;let parent=undefined;const path=[];const ancestors=[];do{index++;const isLeaving=index===keys.length;const isEdited=isLeaving&&edits.length!==0;if(isLeaving){key=ancestors.length===0?undefined:path[path.length-1];node=parent;parent=ancestors.pop();if(isEdited){if(inArray){node=node.slice();let editOffset=0;for(const[editKey,editValue]of edits){const arrayKey=editKey-editOffset;if(editValue===null){node.splice(arrayKey,1);editOffset++}else{node[arrayKey]=editValue}}}else{node=Object.defineProperties({},Object.getOwnPropertyDescriptors(node));for(const[editKey,editValue]of edits){node[editKey]=editValue}}}index=stack.index;keys=stack.keys;edits=stack.edits;inArray=stack.inArray;stack=stack.prev}else if(parent){key=inArray?index:keys[index];node=parent[key];if(node===null||node===undefined){continue}path.push(key)}let result;if(!Array.isArray(node)){var _enterLeaveMap$get,_enterLeaveMap$get2;(0,_ast.isNode)(node)||(0,_devAssert.devAssert)(false,`Invalid AST Node: ${(0,_inspect.inspect)(node)}.`);const visitFn=isLeaving?(_enterLeaveMap$get=enterLeaveMap.get(node.kind))===null||_enterLeaveMap$get===void 0?void 0:_enterLeaveMap$get.leave:(_enterLeaveMap$get2=enterLeaveMap.get(node.kind))===null||_enterLeaveMap$get2===void 0?void 0:_enterLeaveMap$get2.enter;result=visitFn===null||visitFn===void 0?void 0:visitFn.call(visitor,node,key,parent,path,ancestors);if(result===BREAK){break}if(result===false){if(!isLeaving){path.pop();continue}}else if(result!==undefined){edits.push([key,result]);if(!isLeaving){if((0,_ast.isNode)(result)){node=result}else{path.pop();continue}}}}if(result===undefined&&isEdited){edits.push([key,node])}if(isLeaving){path.pop()}else{var _node$kind;stack={inArray:inArray,index:index,keys:keys,edits:edits,prev:stack};inArray=Array.isArray(node);keys=inArray?node:(_node$kind=visitorKeys[node.kind])!==null&&_node$kind!==void 0?_node$kind:[];index=-1;edits=[];if(parent){ancestors.push(parent)}parent=node}}while(stack!==undefined);if(edits.length!==0){return edits[edits.length-1][1]}return root}function visitInParallel(visitors){const skipping=new Array(visitors.length).fill(null);const mergedVisitor=Object.create(null);for(const kind of Object.values(_kinds.Kind)){let hasVisitor=false;const enterList=new Array(visitors.length).fill(undefined);const leaveList=new Array(visitors.length).fill(undefined);for(let i=0;i<visitors.length;++i){const{enter,leave}=getEnterLeaveForKind(visitors[i],kind);hasVisitor||(hasVisitor=enter!=null||leave!=null);enterList[i]=enter;leaveList[i]=leave}if(!hasVisitor){continue}const mergedEnterLeave={enter(...args){const node=args[0];for(let i=0;i<visitors.length;i++){if(skipping[i]===null){var _enterList$i;const result=(_enterList$i=enterList[i])===null||_enterList$i===void 0?void 0:_enterList$i.apply(visitors[i],args);if(result===false){skipping[i]=node}else if(result===BREAK){skipping[i]=BREAK}else if(result!==undefined){return result}}}},leave(...args){const node=args[0];for(let i=0;i<visitors.length;i++){if(skipping[i]===null){var _leaveList$i;const result=(_leaveList$i=leaveList[i])===null||_leaveList$i===void 0?void 0:_leaveList$i.apply(visitors[i],args);if(result===BREAK){skipping[i]=BREAK}else if(result!==undefined&&result!==false){return result}}else if(skipping[i]===node){skipping[i]=null}}}};mergedVisitor[kind]=mergedEnterLeave}return mergedVisitor}function getEnterLeaveForKind(visitor,kind){const kindVisitor=visitor[kind];if(typeof kindVisitor==="object"){return kindVisitor}else if(typeof kindVisitor==="function"){return{enter:kindVisitor,leave:undefined}}return{enter:visitor.enter,leave:visitor.leave}}function getVisitFn(visitor,kind,isLeaving){const{enter,leave}=getEnterLeaveForKind(visitor,kind);return isLeaving?leave:enter}},{"../jsutils/devAssert.mjs":348,"../jsutils/inspect.mjs":352,"./ast.mjs":370,"./kinds.mjs":375}],386:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.assertEnumValueName=assertEnumValueName;exports.assertName=assertName;var _devAssert=require("../jsutils/devAssert.mjs");var _GraphQLError=require("../error/GraphQLError.mjs");var _characterClasses=require("../language/characterClasses.mjs");function assertName(name){name!=null||(0,_devAssert.devAssert)(false,"Must provide name.");typeof name==="string"||(0,_devAssert.devAssert)(false,"Expected name to be a string.");if(name.length===0){throw new _GraphQLError.GraphQLError("Expected name to be a non-empty string.")}for(let i=1;i<name.length;++i){if(!(0,_characterClasses.isNameContinue)(name.charCodeAt(i))){throw new _GraphQLError.GraphQLError(`Names must only contain [_a-zA-Z0-9] but "${name}" does not.`)}}if(!(0,_characterClasses.isNameStart)(name.charCodeAt(0))){throw new _GraphQLError.GraphQLError(`Names must start with [_a-zA-Z] but "${name}" does not.`)}return name}function assertEnumValueName(name){if(name==="true"||name==="false"||name==="null"){throw new _GraphQLError.GraphQLError(`Enum values cannot be named: ${name}`)}return assertName(name)}},{"../error/GraphQLError.mjs":335,"../jsutils/devAssert.mjs":348,"../language/characterClasses.mjs":372}],387:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GraphQLUnionType=exports.GraphQLScalarType=exports.GraphQLObjectType=exports.GraphQLNonNull=exports.GraphQLList=exports.GraphQLInterfaceType=exports.GraphQLInputObjectType=exports.GraphQLEnumType=void 0;exports.argsToArgsConfig=argsToArgsConfig;exports.assertAbstractType=assertAbstractType;exports.assertCompositeType=assertCompositeType;exports.assertEnumType=assertEnumType;exports.assertInputObjectType=assertInputObjectType;exports.assertInputType=assertInputType;exports.assertInterfaceType=assertInterfaceType;exports.assertLeafType=assertLeafType;exports.assertListType=assertListType;exports.assertNamedType=assertNamedType;exports.assertNonNullType=assertNonNullType;exports.assertNullableType=assertNullableType;exports.assertObjectType=assertObjectType;exports.assertOutputType=assertOutputType;exports.assertScalarType=assertScalarType;exports.assertType=assertType;exports.assertUnionType=assertUnionType;exports.assertWrappingType=assertWrappingType;exports.defineArguments=defineArguments;exports.getNamedType=getNamedType;exports.getNullableType=getNullableType;exports.isAbstractType=isAbstractType;exports.isCompositeType=isCompositeType;exports.isEnumType=isEnumType;exports.isInputObjectType=isInputObjectType;exports.isInputType=isInputType;exports.isInterfaceType=isInterfaceType;exports.isLeafType=isLeafType;exports.isListType=isListType;exports.isNamedType=isNamedType;exports.isNonNullType=isNonNullType;exports.isNullableType=isNullableType;exports.isObjectType=isObjectType;exports.isOutputType=isOutputType;exports.isRequiredArgument=isRequiredArgument;exports.isRequiredInputField=isRequiredInputField;exports.isScalarType=isScalarType;exports.isType=isType;exports.isUnionType=isUnionType;exports.isWrappingType=isWrappingType;exports.resolveObjMapThunk=resolveObjMapThunk;exports.resolveReadonlyArrayThunk=resolveReadonlyArrayThunk;var _devAssert=require("../jsutils/devAssert.mjs");var _didYouMean=require("../jsutils/didYouMean.mjs");var _identityFunc=require("../jsutils/identityFunc.mjs");var _inspect=require("../jsutils/inspect.mjs");var _instanceOf=require("../jsutils/instanceOf.mjs");var _isObjectLike=require("../jsutils/isObjectLike.mjs");var _keyMap=require("../jsutils/keyMap.mjs");var _keyValMap=require("../jsutils/keyValMap.mjs");var _mapValue=require("../jsutils/mapValue.mjs");var _suggestionList=require("../jsutils/suggestionList.mjs");var _toObjMap=require("../jsutils/toObjMap.mjs");var _GraphQLError=require("../error/GraphQLError.mjs");var _kinds=require("../language/kinds.mjs");var _printer=require("../language/printer.mjs");var _valueFromASTUntyped=require("../utilities/valueFromASTUntyped.mjs");var _assertName=require("./assertName.mjs");function isType(type){return isScalarType(type)||isObjectType(type)||isInterfaceType(type)||isUnionType(type)||isEnumType(type)||isInputObjectType(type)||isListType(type)||isNonNullType(type)}function assertType(type){if(!isType(type)){throw new Error(`Expected ${(0,_inspect.inspect)(type)} to be a GraphQL type.`)}return type}function isScalarType(type){return(0,_instanceOf.instanceOf)(type,GraphQLScalarType)}function assertScalarType(type){if(!isScalarType(type)){throw new Error(`Expected ${(0,_inspect.inspect)(type)} to be a GraphQL Scalar type.`)}return type}function isObjectType(type){return(0,_instanceOf.instanceOf)(type,GraphQLObjectType)}function assertObjectType(type){if(!isObjectType(type)){throw new Error(`Expected ${(0,_inspect.inspect)(type)} to be a GraphQL Object type.`)}return type}function isInterfaceType(type){return(0,_instanceOf.instanceOf)(type,GraphQLInterfaceType)}function assertInterfaceType(type){if(!isInterfaceType(type)){throw new Error(`Expected ${(0,_inspect.inspect)(type)} to be a GraphQL Interface type.`)}return type}function isUnionType(type){return(0,_instanceOf.instanceOf)(type,GraphQLUnionType)}function assertUnionType(type){if(!isUnionType(type)){throw new Error(`Expected ${(0,_inspect.inspect)(type)} to be a GraphQL Union type.`)}return type}function isEnumType(type){return(0,_instanceOf.instanceOf)(type,GraphQLEnumType)}function assertEnumType(type){if(!isEnumType(type)){throw new Error(`Expected ${(0,_inspect.inspect)(type)} to be a GraphQL Enum type.`)}return type}function isInputObjectType(type){return(0,_instanceOf.instanceOf)(type,GraphQLInputObjectType)}function assertInputObjectType(type){if(!isInputObjectType(type)){throw new Error(`Expected ${(0,_inspect.inspect)(type)} to be a GraphQL Input Object type.`)}return type}function isListType(type){return(0,_instanceOf.instanceOf)(type,GraphQLList)}function assertListType(type){if(!isListType(type)){throw new Error(`Expected ${(0,_inspect.inspect)(type)} to be a GraphQL List type.`)}return type}function isNonNullType(type){return(0,_instanceOf.instanceOf)(type,GraphQLNonNull)}function assertNonNullType(type){if(!isNonNullType(type)){throw new Error(`Expected ${(0,_inspect.inspect)(type)} to be a GraphQL Non-Null type.`)}return type}function isInputType(type){return isScalarType(type)||isEnumType(type)||isInputObjectType(type)||isWrappingType(type)&&isInputType(type.ofType)}function assertInputType(type){if(!isInputType(type)){throw new Error(`Expected ${(0,_inspect.inspect)(type)} to be a GraphQL input type.`)}return type}function isOutputType(type){return isScalarType(type)||isObjectType(type)||isInterfaceType(type)||isUnionType(type)||isEnumType(type)||isWrappingType(type)&&isOutputType(type.ofType)}function assertOutputType(type){if(!isOutputType(type)){throw new Error(`Expected ${(0,_inspect.inspect)(type)} to be a GraphQL output type.`)}return type}function isLeafType(type){return isScalarType(type)||isEnumType(type)}function assertLeafType(type){if(!isLeafType(type)){throw new Error(`Expected ${(0,_inspect.inspect)(type)} to be a GraphQL leaf type.`)}return type}function isCompositeType(type){return isObjectType(type)||isInterfaceType(type)||isUnionType(type)}function assertCompositeType(type){if(!isCompositeType(type)){throw new Error(`Expected ${(0,_inspect.inspect)(type)} to be a GraphQL composite type.`)}return type}function isAbstractType(type){return isInterfaceType(type)||isUnionType(type)}function assertAbstractType(type){if(!isAbstractType(type)){throw new Error(`Expected ${(0,_inspect.inspect)(type)} to be a GraphQL abstract type.`)}return type}class GraphQLList{constructor(ofType){isType(ofType)||(0,_devAssert.devAssert)(false,`Expected ${(0,_inspect.inspect)(ofType)} to be a GraphQL type.`);this.ofType=ofType}get[Symbol.toStringTag](){return"GraphQLList"}toString(){return"["+String(this.ofType)+"]"}toJSON(){return this.toString()}}exports.GraphQLList=GraphQLList;class GraphQLNonNull{constructor(ofType){isNullableType(ofType)||(0,_devAssert.devAssert)(false,`Expected ${(0,_inspect.inspect)(ofType)} to be a GraphQL nullable type.`);this.ofType=ofType}get[Symbol.toStringTag](){return"GraphQLNonNull"}toString(){return String(this.ofType)+"!"}toJSON(){return this.toString()}}exports.GraphQLNonNull=GraphQLNonNull;function isWrappingType(type){return isListType(type)||isNonNullType(type)}function assertWrappingType(type){if(!isWrappingType(type)){throw new Error(`Expected ${(0,_inspect.inspect)(type)} to be a GraphQL wrapping type.`)}return type}function isNullableType(type){return isType(type)&&!isNonNullType(type)}function assertNullableType(type){if(!isNullableType(type)){throw new Error(`Expected ${(0,_inspect.inspect)(type)} to be a GraphQL nullable type.`)}return type}function getNullableType(type){if(type){return isNonNullType(type)?type.ofType:type}}function isNamedType(type){return isScalarType(type)||isObjectType(type)||isInterfaceType(type)||isUnionType(type)||isEnumType(type)||isInputObjectType(type)}function assertNamedType(type){if(!isNamedType(type)){throw new Error(`Expected ${(0,_inspect.inspect)(type)} to be a GraphQL named type.`)}return type}function getNamedType(type){if(type){let unwrappedType=type;while(isWrappingType(unwrappedType)){unwrappedType=unwrappedType.ofType}return unwrappedType}}function resolveReadonlyArrayThunk(thunk){return typeof thunk==="function"?thunk():thunk}function resolveObjMapThunk(thunk){return typeof thunk==="function"?thunk():thunk}class GraphQLScalarType{constructor(config){var _config$parseValue,_config$serialize,_config$parseLiteral,_config$extensionASTN;const parseValue=(_config$parseValue=config.parseValue)!==null&&_config$parseValue!==void 0?_config$parseValue:_identityFunc.identityFunc;this.name=(0,_assertName.assertName)(config.name);this.description=config.description;this.specifiedByURL=config.specifiedByURL;this.serialize=(_config$serialize=config.serialize)!==null&&_config$serialize!==void 0?_config$serialize:_identityFunc.identityFunc;this.parseValue=parseValue;this.parseLiteral=(_config$parseLiteral=config.parseLiteral)!==null&&_config$parseLiteral!==void 0?_config$parseLiteral:(node,variables)=>parseValue((0,_valueFromASTUntyped.valueFromASTUntyped)(node,variables));this.extensions=(0,_toObjMap.toObjMap)(config.extensions);this.astNode=config.astNode;this.extensionASTNodes=(_config$extensionASTN=config.extensionASTNodes)!==null&&_config$extensionASTN!==void 0?_config$extensionASTN:[];config.specifiedByURL==null||typeof config.specifiedByURL==="string"||(0,_devAssert.devAssert)(false,`${this.name} must provide "specifiedByURL" as a string, `+`but got: ${(0,_inspect.inspect)(config.specifiedByURL)}.`);config.serialize==null||typeof config.serialize==="function"||(0,_devAssert.devAssert)(false,`${this.name} must provide "serialize" function. If this custom Scalar is also used as an input type, ensure "parseValue" and "parseLiteral" functions are also provided.`);if(config.parseLiteral){typeof config.parseValue==="function"&&typeof config.parseLiteral==="function"||(0,_devAssert.devAssert)(false,`${this.name} must provide both "parseValue" and "parseLiteral" functions.`)}}get[Symbol.toStringTag](){return"GraphQLScalarType"}toConfig(){return{name:this.name,description:this.description,specifiedByURL:this.specifiedByURL,serialize:this.serialize,parseValue:this.parseValue,parseLiteral:this.parseLiteral,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}exports.GraphQLScalarType=GraphQLScalarType;class GraphQLObjectType{constructor(config){var _config$extensionASTN2;this.name=(0,_assertName.assertName)(config.name);this.description=config.description;this.isTypeOf=config.isTypeOf;this.extensions=(0,_toObjMap.toObjMap)(config.extensions);this.astNode=config.astNode;this.extensionASTNodes=(_config$extensionASTN2=config.extensionASTNodes)!==null&&_config$extensionASTN2!==void 0?_config$extensionASTN2:[];this._fields=()=>defineFieldMap(config);this._interfaces=()=>defineInterfaces(config);config.isTypeOf==null||typeof config.isTypeOf==="function"||(0,_devAssert.devAssert)(false,`${this.name} must provide "isTypeOf" as a function, `+`but got: ${(0,_inspect.inspect)(config.isTypeOf)}.`)}get[Symbol.toStringTag](){return"GraphQLObjectType"}getFields(){if(typeof this._fields==="function"){this._fields=this._fields()}return this._fields}getInterfaces(){if(typeof this._interfaces==="function"){this._interfaces=this._interfaces()}return this._interfaces}toConfig(){return{name:this.name,description:this.description,interfaces:this.getInterfaces(),fields:fieldsToFieldsConfig(this.getFields()),isTypeOf:this.isTypeOf,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}exports.GraphQLObjectType=GraphQLObjectType;function defineInterfaces(config){var _config$interfaces;const interfaces=resolveReadonlyArrayThunk((_config$interfaces=config.interfaces)!==null&&_config$interfaces!==void 0?_config$interfaces:[]);Array.isArray(interfaces)||(0,_devAssert.devAssert)(false,`${config.name} interfaces must be an Array or a function which returns an Array.`);return interfaces}function defineFieldMap(config){const fieldMap=resolveObjMapThunk(config.fields);isPlainObj(fieldMap)||(0,_devAssert.devAssert)(false,`${config.name} fields must be an object with field names as keys or a function which returns such an object.`);return(0,_mapValue.mapValue)(fieldMap,(fieldConfig,fieldName)=>{var _fieldConfig$args;isPlainObj(fieldConfig)||(0,_devAssert.devAssert)(false,`${config.name}.${fieldName} field config must be an object.`);fieldConfig.resolve==null||typeof fieldConfig.resolve==="function"||(0,_devAssert.devAssert)(false,`${config.name}.${fieldName} field resolver must be a function if `+`provided, but got: ${(0,_inspect.inspect)(fieldConfig.resolve)}.`);const argsConfig=(_fieldConfig$args=fieldConfig.args)!==null&&_fieldConfig$args!==void 0?_fieldConfig$args:{};isPlainObj(argsConfig)||(0,_devAssert.devAssert)(false,`${config.name}.${fieldName} args must be an object with argument names as keys.`);return{name:(0,_assertName.assertName)(fieldName),description:fieldConfig.description,type:fieldConfig.type,args:defineArguments(argsConfig),resolve:fieldConfig.resolve,subscribe:fieldConfig.subscribe,deprecationReason:fieldConfig.deprecationReason,extensions:(0,_toObjMap.toObjMap)(fieldConfig.extensions),astNode:fieldConfig.astNode}})}function defineArguments(config){return Object.entries(config).map(([argName,argConfig])=>({name:(0,_assertName.assertName)(argName),description:argConfig.description,type:argConfig.type,defaultValue:argConfig.defaultValue,deprecationReason:argConfig.deprecationReason,extensions:(0,_toObjMap.toObjMap)(argConfig.extensions),astNode:argConfig.astNode}))}function isPlainObj(obj){return(0,_isObjectLike.isObjectLike)(obj)&&!Array.isArray(obj)}function fieldsToFieldsConfig(fields){return(0,_mapValue.mapValue)(fields,field=>({description:field.description,type:field.type,args:argsToArgsConfig(field.args),resolve:field.resolve,subscribe:field.subscribe,deprecationReason:field.deprecationReason,extensions:field.extensions,astNode:field.astNode}))}function argsToArgsConfig(args){return(0,_keyValMap.keyValMap)(args,arg=>arg.name,arg=>({description:arg.description,type:arg.type,defaultValue:arg.defaultValue,deprecationReason:arg.deprecationReason,extensions:arg.extensions,astNode:arg.astNode}))}function isRequiredArgument(arg){return isNonNullType(arg.type)&&arg.defaultValue===undefined}class GraphQLInterfaceType{constructor(config){var _config$extensionASTN3;this.name=(0,_assertName.assertName)(config.name);this.description=config.description;this.resolveType=config.resolveType;this.extensions=(0,_toObjMap.toObjMap)(config.extensions);this.astNode=config.astNode;this.extensionASTNodes=(_config$extensionASTN3=config.extensionASTNodes)!==null&&_config$extensionASTN3!==void 0?_config$extensionASTN3:[];this._fields=defineFieldMap.bind(undefined,config);this._interfaces=defineInterfaces.bind(undefined,config);config.resolveType==null||typeof config.resolveType==="function"||(0,_devAssert.devAssert)(false,`${this.name} must provide "resolveType" as a function, `+`but got: ${(0,_inspect.inspect)(config.resolveType)}.`)}get[Symbol.toStringTag](){return"GraphQLInterfaceType"}getFields(){if(typeof this._fields==="function"){this._fields=this._fields()}return this._fields}getInterfaces(){if(typeof this._interfaces==="function"){this._interfaces=this._interfaces()}return this._interfaces}toConfig(){return{name:this.name,description:this.description,interfaces:this.getInterfaces(),fields:fieldsToFieldsConfig(this.getFields()),resolveType:this.resolveType,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}exports.GraphQLInterfaceType=GraphQLInterfaceType;class GraphQLUnionType{constructor(config){var _config$extensionASTN4;this.name=(0,_assertName.assertName)(config.name);this.description=config.description;this.resolveType=config.resolveType;this.extensions=(0,_toObjMap.toObjMap)(config.extensions);this.astNode=config.astNode;this.extensionASTNodes=(_config$extensionASTN4=config.extensionASTNodes)!==null&&_config$extensionASTN4!==void 0?_config$extensionASTN4:[];this._types=defineTypes.bind(undefined,config);config.resolveType==null||typeof config.resolveType==="function"||(0,_devAssert.devAssert)(false,`${this.name} must provide "resolveType" as a function, `+`but got: ${(0,_inspect.inspect)(config.resolveType)}.`)}get[Symbol.toStringTag](){return"GraphQLUnionType"}getTypes(){if(typeof this._types==="function"){this._types=this._types()}return this._types}toConfig(){return{name:this.name,description:this.description,types:this.getTypes(),resolveType:this.resolveType,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}exports.GraphQLUnionType=GraphQLUnionType;function defineTypes(config){const types=resolveReadonlyArrayThunk(config.types);Array.isArray(types)||(0,_devAssert.devAssert)(false,`Must provide Array of types or a function which returns such an array for Union ${config.name}.`);return types}class GraphQLEnumType{constructor(config){var _config$extensionASTN5;this.name=(0,_assertName.assertName)(config.name);this.description=config.description;this.extensions=(0,_toObjMap.toObjMap)(config.extensions);this.astNode=config.astNode;this.extensionASTNodes=(_config$extensionASTN5=config.extensionASTNodes)!==null&&_config$extensionASTN5!==void 0?_config$extensionASTN5:[];this._values=defineEnumValues(this.name,config.values);this._valueLookup=new Map(this._values.map(enumValue=>[enumValue.value,enumValue]));this._nameLookup=(0,_keyMap.keyMap)(this._values,value=>value.name)}get[Symbol.toStringTag](){return"GraphQLEnumType"}getValues(){return this._values}getValue(name){return this._nameLookup[name]}serialize(outputValue){const enumValue=this._valueLookup.get(outputValue);if(enumValue===undefined){throw new _GraphQLError.GraphQLError(`Enum "${this.name}" cannot represent value: ${(0,_inspect.inspect)(outputValue)}`)}return enumValue.name}parseValue(inputValue){if(typeof inputValue!=="string"){const valueStr=(0,_inspect.inspect)(inputValue);throw new _GraphQLError.GraphQLError(`Enum "${this.name}" cannot represent non-string value: ${valueStr}.`+didYouMeanEnumValue(this,valueStr))}const enumValue=this.getValue(inputValue);if(enumValue==null){throw new _GraphQLError.GraphQLError(`Value "${inputValue}" does not exist in "${this.name}" enum.`+didYouMeanEnumValue(this,inputValue))}return enumValue.value}parseLiteral(valueNode,_variables){if(valueNode.kind!==_kinds.Kind.ENUM){const valueStr=(0,_printer.print)(valueNode);throw new _GraphQLError.GraphQLError(`Enum "${this.name}" cannot represent non-enum value: ${valueStr}.`+didYouMeanEnumValue(this,valueStr),{nodes:valueNode})}const enumValue=this.getValue(valueNode.value);if(enumValue==null){const valueStr=(0,_printer.print)(valueNode);throw new _GraphQLError.GraphQLError(`Value "${valueStr}" does not exist in "${this.name}" enum.`+didYouMeanEnumValue(this,valueStr),{nodes:valueNode})}return enumValue.value}toConfig(){const values=(0,_keyValMap.keyValMap)(this.getValues(),value=>value.name,value=>({description:value.description,value:value.value,deprecationReason:value.deprecationReason,extensions:value.extensions,astNode:value.astNode}));return{name:this.name,description:this.description,values:values,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}exports.GraphQLEnumType=GraphQLEnumType;function didYouMeanEnumValue(enumType,unknownValueStr){const allNames=enumType.getValues().map(value=>value.name);const suggestedValues=(0,_suggestionList.suggestionList)(unknownValueStr,allNames);return(0,_didYouMean.didYouMean)("the enum value",suggestedValues)}function defineEnumValues(typeName,valueMap){isPlainObj(valueMap)||(0,_devAssert.devAssert)(false,`${typeName} values must be an object with value names as keys.`);return Object.entries(valueMap).map(([valueName,valueConfig])=>{isPlainObj(valueConfig)||(0,_devAssert.devAssert)(false,`${typeName}.${valueName} must refer to an object with a "value" key `+`representing an internal value but got: ${(0,_inspect.inspect)(valueConfig)}.`);return{name:(0,_assertName.assertEnumValueName)(valueName),description:valueConfig.description,value:valueConfig.value!==undefined?valueConfig.value:valueName,deprecationReason:valueConfig.deprecationReason,extensions:(0,_toObjMap.toObjMap)(valueConfig.extensions),astNode:valueConfig.astNode}})}class GraphQLInputObjectType{constructor(config){var _config$extensionASTN6;this.name=(0,_assertName.assertName)(config.name);this.description=config.description;this.extensions=(0,_toObjMap.toObjMap)(config.extensions);this.astNode=config.astNode;this.extensionASTNodes=(_config$extensionASTN6=config.extensionASTNodes)!==null&&_config$extensionASTN6!==void 0?_config$extensionASTN6:[];this._fields=defineInputFieldMap.bind(undefined,config)}get[Symbol.toStringTag](){return"GraphQLInputObjectType"}getFields(){if(typeof this._fields==="function"){this._fields=this._fields()}return this._fields}toConfig(){const fields=(0,_mapValue.mapValue)(this.getFields(),field=>({description:field.description,type:field.type,defaultValue:field.defaultValue,deprecationReason:field.deprecationReason,extensions:field.extensions,astNode:field.astNode}));return{name:this.name,description:this.description,fields:fields,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}exports.GraphQLInputObjectType=GraphQLInputObjectType;function defineInputFieldMap(config){const fieldMap=resolveObjMapThunk(config.fields);isPlainObj(fieldMap)||(0,_devAssert.devAssert)(false,`${config.name} fields must be an object with field names as keys or a function which returns such an object.`);return(0,_mapValue.mapValue)(fieldMap,(fieldConfig,fieldName)=>{!("resolve"in fieldConfig)||(0,_devAssert.devAssert)(false,`${config.name}.${fieldName} field has a resolve property, but Input Types cannot define resolvers.`);return{name:(0,_assertName.assertName)(fieldName),description:fieldConfig.description,type:fieldConfig.type,defaultValue:fieldConfig.defaultValue,deprecationReason:fieldConfig.deprecationReason,extensions:(0,_toObjMap.toObjMap)(fieldConfig.extensions),astNode:fieldConfig.astNode}})}function isRequiredInputField(field){return isNonNullType(field.type)&&field.defaultValue===undefined}},{"../error/GraphQLError.mjs":335,"../jsutils/devAssert.mjs":348,"../jsutils/didYouMean.mjs":349,"../jsutils/identityFunc.mjs":351,"../jsutils/inspect.mjs":352,"../jsutils/instanceOf.mjs":353,"../jsutils/isObjectLike.mjs":357,"../jsutils/keyMap.mjs":359,"../jsutils/keyValMap.mjs":360,"../jsutils/mapValue.mjs":361,"../jsutils/suggestionList.mjs":367,"../jsutils/toObjMap.mjs":369,"../language/kinds.mjs":375,"../language/printer.mjs":382,"../utilities/valueFromASTUntyped.mjs":416,"./assertName.mjs":386}],388:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GraphQLSpecifiedByDirective=exports.GraphQLSkipDirective=exports.GraphQLIncludeDirective=exports.GraphQLDirective=exports.GraphQLDeprecatedDirective=exports.DEFAULT_DEPRECATION_REASON=void 0;exports.assertDirective=assertDirective;exports.isDirective=isDirective;exports.isSpecifiedDirective=isSpecifiedDirective;exports.specifiedDirectives=void 0;var _devAssert=require("../jsutils/devAssert.mjs");var _inspect=require("../jsutils/inspect.mjs");var _instanceOf=require("../jsutils/instanceOf.mjs");var _isObjectLike=require("../jsutils/isObjectLike.mjs");var _toObjMap=require("../jsutils/toObjMap.mjs");var _directiveLocation=require("../language/directiveLocation.mjs");var _assertName=require("./assertName.mjs");var _definition=require("./definition.mjs");var _scalars=require("./scalars.mjs");function isDirective(directive){return(0,_instanceOf.instanceOf)(directive,GraphQLDirective)}function assertDirective(directive){if(!isDirective(directive)){throw new Error(`Expected ${(0,_inspect.inspect)(directive)} to be a GraphQL directive.`)}return directive}class GraphQLDirective{constructor(config){var _config$isRepeatable,_config$args;this.name=(0,_assertName.assertName)(config.name);this.description=config.description;this.locations=config.locations;this.isRepeatable=(_config$isRepeatable=config.isRepeatable)!==null&&_config$isRepeatable!==void 0?_config$isRepeatable:false;this.extensions=(0,_toObjMap.toObjMap)(config.extensions);this.astNode=config.astNode;Array.isArray(config.locations)||(0,_devAssert.devAssert)(false,`@${config.name} locations must be an Array.`);const args=(_config$args=config.args)!==null&&_config$args!==void 0?_config$args:{};(0,_isObjectLike.isObjectLike)(args)&&!Array.isArray(args)||(0,_devAssert.devAssert)(false,`@${config.name} args must be an object with argument names as keys.`);this.args=(0,_definition.defineArguments)(args)}get[Symbol.toStringTag](){return"GraphQLDirective"}toConfig(){return{name:this.name,description:this.description,locations:this.locations,args:(0,_definition.argsToArgsConfig)(this.args),isRepeatable:this.isRepeatable,extensions:this.extensions,astNode:this.astNode}}toString(){return"@"+this.name}toJSON(){return this.toString()}}exports.GraphQLDirective=GraphQLDirective;const GraphQLIncludeDirective=new GraphQLDirective({name:"include",description:"Directs the executor to include this field or fragment only when the `if` argument is true.",locations:[_directiveLocation.DirectiveLocation.FIELD,_directiveLocation.DirectiveLocation.FRAGMENT_SPREAD,_directiveLocation.DirectiveLocation.INLINE_FRAGMENT],args:{if:{type:new _definition.GraphQLNonNull(_scalars.GraphQLBoolean),description:"Included when true."}}});exports.GraphQLIncludeDirective=GraphQLIncludeDirective;const GraphQLSkipDirective=new GraphQLDirective({name:"skip",description:"Directs the executor to skip this field or fragment when the `if` argument is true.",locations:[_directiveLocation.DirectiveLocation.FIELD,_directiveLocation.DirectiveLocation.FRAGMENT_SPREAD,_directiveLocation.DirectiveLocation.INLINE_FRAGMENT],args:{if:{type:new _definition.GraphQLNonNull(_scalars.GraphQLBoolean),description:"Skipped when true."}}});exports.GraphQLSkipDirective=GraphQLSkipDirective;const DEFAULT_DEPRECATION_REASON="No longer supported";exports.DEFAULT_DEPRECATION_REASON=DEFAULT_DEPRECATION_REASON;const GraphQLDeprecatedDirective=new GraphQLDirective({name:"deprecated",description:"Marks an element of a GraphQL schema as no longer supported.",locations:[_directiveLocation.DirectiveLocation.FIELD_DEFINITION,_directiveLocation.DirectiveLocation.ARGUMENT_DEFINITION,_directiveLocation.DirectiveLocation.INPUT_FIELD_DEFINITION,_directiveLocation.DirectiveLocation.ENUM_VALUE],args:{reason:{type:_scalars.GraphQLString,description:"Explains why this element was deprecated, usually also including a suggestion for how to access supported similar data. Formatted using the Markdown syntax, as specified by [CommonMark](https://commonmark.org/).",defaultValue:DEFAULT_DEPRECATION_REASON}}});exports.GraphQLDeprecatedDirective=GraphQLDeprecatedDirective;const GraphQLSpecifiedByDirective=new GraphQLDirective({name:"specifiedBy",description:"Exposes a URL that specifies the behavior of this scalar.",locations:[_directiveLocation.DirectiveLocation.SCALAR],args:{url:{type:new _definition.GraphQLNonNull(_scalars.GraphQLString),description:"The URL that specifies the behavior of this scalar."}}});exports.GraphQLSpecifiedByDirective=GraphQLSpecifiedByDirective;const specifiedDirectives=Object.freeze([GraphQLIncludeDirective,GraphQLSkipDirective,GraphQLDeprecatedDirective,GraphQLSpecifiedByDirective]);exports.specifiedDirectives=specifiedDirectives;function isSpecifiedDirective(directive){return specifiedDirectives.some(({name})=>name===directive.name)}},{"../jsutils/devAssert.mjs":348,"../jsutils/inspect.mjs":352,"../jsutils/instanceOf.mjs":353,"../jsutils/isObjectLike.mjs":357,"../jsutils/toObjMap.mjs":369,"../language/directiveLocation.mjs":373,"./assertName.mjs":386,"./definition.mjs":387,"./scalars.mjs":391}],389:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DEFAULT_DEPRECATION_REASON",{enumerable:true,get:function(){return _directives.DEFAULT_DEPRECATION_REASON}});Object.defineProperty(exports,"GRAPHQL_MAX_INT",{enumerable:true,get:function(){return _scalars.GRAPHQL_MAX_INT}});Object.defineProperty(exports,"GRAPHQL_MIN_INT",{enumerable:true,get:function(){return _scalars.GRAPHQL_MIN_INT}});Object.defineProperty(exports,"GraphQLBoolean",{enumerable:true,get:function(){return _scalars.GraphQLBoolean}});Object.defineProperty(exports,"GraphQLDeprecatedDirective",{enumerable:true,get:function(){return _directives.GraphQLDeprecatedDirective}});Object.defineProperty(exports,"GraphQLDirective",{enumerable:true,get:function(){return _directives.GraphQLDirective}});Object.defineProperty(exports,"GraphQLEnumType",{enumerable:true,get:function(){return _definition.GraphQLEnumType}});Object.defineProperty(exports,"GraphQLFloat",{enumerable:true,get:function(){return _scalars.GraphQLFloat}});Object.defineProperty(exports,"GraphQLID",{enumerable:true,get:function(){return _scalars.GraphQLID}});Object.defineProperty(exports,"GraphQLIncludeDirective",{enumerable:true,get:function(){return _directives.GraphQLIncludeDirective}});Object.defineProperty(exports,"GraphQLInputObjectType",{enumerable:true,get:function(){return _definition.GraphQLInputObjectType}});Object.defineProperty(exports,"GraphQLInt",{enumerable:true,get:function(){return _scalars.GraphQLInt}});Object.defineProperty(exports,"GraphQLInterfaceType",{enumerable:true,get:function(){return _definition.GraphQLInterfaceType}});Object.defineProperty(exports,"GraphQLList",{enumerable:true,get:function(){return _definition.GraphQLList}});Object.defineProperty(exports,"GraphQLNonNull",{enumerable:true,get:function(){return _definition.GraphQLNonNull}});Object.defineProperty(exports,"GraphQLObjectType",{enumerable:true,get:function(){return _definition.GraphQLObjectType}});Object.defineProperty(exports,"GraphQLScalarType",{enumerable:true,get:function(){return _definition.GraphQLScalarType}});Object.defineProperty(exports,"GraphQLSchema",{enumerable:true,get:function(){return _schema.GraphQLSchema}});Object.defineProperty(exports,"GraphQLSkipDirective",{enumerable:true,get:function(){return _directives.GraphQLSkipDirective}});Object.defineProperty(exports,"GraphQLSpecifiedByDirective",{enumerable:true,get:function(){return _directives.GraphQLSpecifiedByDirective}});Object.defineProperty(exports,"GraphQLString",{enumerable:true,get:function(){return _scalars.GraphQLString}});Object.defineProperty(exports,"GraphQLUnionType",{enumerable:true,get:function(){return _definition.GraphQLUnionType}});Object.defineProperty(exports,"SchemaMetaFieldDef",{enumerable:true,get:function(){return _introspection.SchemaMetaFieldDef}});Object.defineProperty(exports,"TypeKind",{enumerable:true,get:function(){return _introspection.TypeKind}});Object.defineProperty(exports,"TypeMetaFieldDef",{enumerable:true,get:function(){return _introspection.TypeMetaFieldDef}});Object.defineProperty(exports,"TypeNameMetaFieldDef",{enumerable:true,get:function(){return _introspection.TypeNameMetaFieldDef}});Object.defineProperty(exports,"__Directive",{enumerable:true,get:function(){return _introspection.__Directive}});Object.defineProperty(exports,"__DirectiveLocation",{enumerable:true,get:function(){return _introspection.__DirectiveLocation}});Object.defineProperty(exports,"__EnumValue",{enumerable:true,get:function(){return _introspection.__EnumValue}});Object.defineProperty(exports,"__Field",{enumerable:true,get:function(){return _introspection.__Field}});Object.defineProperty(exports,"__InputValue",{enumerable:true,get:function(){return _introspection.__InputValue}});Object.defineProperty(exports,"__Schema",{enumerable:true,get:function(){return _introspection.__Schema}});Object.defineProperty(exports,"__Type",{enumerable:true,get:function(){return _introspection.__Type}});Object.defineProperty(exports,"__TypeKind",{enumerable:true,get:function(){return _introspection.__TypeKind}});Object.defineProperty(exports,"assertAbstractType",{enumerable:true,get:function(){return _definition.assertAbstractType}});Object.defineProperty(exports,"assertCompositeType",{enumerable:true,get:function(){return _definition.assertCompositeType}});Object.defineProperty(exports,"assertDirective",{enumerable:true,get:function(){return _directives.assertDirective}});Object.defineProperty(exports,"assertEnumType",{enumerable:true,get:function(){return _definition.assertEnumType}});Object.defineProperty(exports,"assertEnumValueName",{enumerable:true,get:function(){return _assertName.assertEnumValueName}});Object.defineProperty(exports,"assertInputObjectType",{enumerable:true,get:function(){return _definition.assertInputObjectType}});Object.defineProperty(exports,"assertInputType",{enumerable:true,get:function(){return _definition.assertInputType}});Object.defineProperty(exports,"assertInterfaceType",{enumerable:true,get:function(){return _definition.assertInterfaceType}});Object.defineProperty(exports,"assertLeafType",{enumerable:true,get:function(){return _definition.assertLeafType}});Object.defineProperty(exports,"assertListType",{enumerable:true,get:function(){return _definition.assertListType}});Object.defineProperty(exports,"assertName",{enumerable:true,get:function(){return _assertName.assertName}});Object.defineProperty(exports,"assertNamedType",{enumerable:true,get:function(){return _definition.assertNamedType}});Object.defineProperty(exports,"assertNonNullType",{enumerable:true,get:function(){return _definition.assertNonNullType}});Object.defineProperty(exports,"assertNullableType",{enumerable:true,get:function(){return _definition.assertNullableType}});Object.defineProperty(exports,"assertObjectType",{enumerable:true,get:function(){return _definition.assertObjectType}});Object.defineProperty(exports,"assertOutputType",{enumerable:true,get:function(){return _definition.assertOutputType}});Object.defineProperty(exports,"assertScalarType",{enumerable:true,get:function(){return _definition.assertScalarType}});Object.defineProperty(exports,"assertSchema",{enumerable:true,get:function(){return _schema.assertSchema}});Object.defineProperty(exports,"assertType",{enumerable:true,get:function(){return _definition.assertType}});Object.defineProperty(exports,"assertUnionType",{enumerable:true,get:function(){return _definition.assertUnionType}});Object.defineProperty(exports,"assertValidSchema",{enumerable:true,get:function(){return _validate.assertValidSchema}});Object.defineProperty(exports,"assertWrappingType",{enumerable:true,get:function(){return _definition.assertWrappingType}});Object.defineProperty(exports,"getNamedType",{enumerable:true,get:function(){return _definition.getNamedType}});Object.defineProperty(exports,"getNullableType",{enumerable:true,get:function(){return _definition.getNullableType}});Object.defineProperty(exports,"introspectionTypes",{enumerable:true,get:function(){return _introspection.introspectionTypes}});Object.defineProperty(exports,"isAbstractType",{enumerable:true,get:function(){return _definition.isAbstractType}});Object.defineProperty(exports,"isCompositeType",{enumerable:true,get:function(){return _definition.isCompositeType}});Object.defineProperty(exports,"isDirective",{enumerable:true,get:function(){return _directives.isDirective}});Object.defineProperty(exports,"isEnumType",{enumerable:true,get:function(){return _definition.isEnumType}});Object.defineProperty(exports,"isInputObjectType",{enumerable:true,get:function(){return _definition.isInputObjectType}});Object.defineProperty(exports,"isInputType",{enumerable:true,get:function(){return _definition.isInputType}});Object.defineProperty(exports,"isInterfaceType",{enumerable:true,get:function(){return _definition.isInterfaceType}});Object.defineProperty(exports,"isIntrospectionType",{enumerable:true,get:function(){return _introspection.isIntrospectionType}});Object.defineProperty(exports,"isLeafType",{enumerable:true,get:function(){return _definition.isLeafType}});Object.defineProperty(exports,"isListType",{enumerable:true,get:function(){return _definition.isListType}});Object.defineProperty(exports,"isNamedType",{enumerable:true,get:function(){return _definition.isNamedType}});Object.defineProperty(exports,"isNonNullType",{enumerable:true,get:function(){return _definition.isNonNullType}});Object.defineProperty(exports,"isNullableType",{enumerable:true,get:function(){return _definition.isNullableType}});Object.defineProperty(exports,"isObjectType",{enumerable:true,get:function(){return _definition.isObjectType}});Object.defineProperty(exports,"isOutputType",{enumerable:true,get:function(){return _definition.isOutputType}});Object.defineProperty(exports,"isRequiredArgument",{enumerable:true,get:function(){return _definition.isRequiredArgument}});Object.defineProperty(exports,"isRequiredInputField",{enumerable:true,get:function(){return _definition.isRequiredInputField}});Object.defineProperty(exports,"isScalarType",{enumerable:true,get:function(){return _definition.isScalarType}});Object.defineProperty(exports,"isSchema",{enumerable:true,get:function(){return _schema.isSchema}});Object.defineProperty(exports,"isSpecifiedDirective",{enumerable:true,get:function(){return _directives.isSpecifiedDirective}});Object.defineProperty(exports,"isSpecifiedScalarType",{enumerable:true,get:function(){return _scalars.isSpecifiedScalarType}});Object.defineProperty(exports,"isType",{enumerable:true,get:function(){return _definition.isType}});Object.defineProperty(exports,"isUnionType",{enumerable:true,get:function(){return _definition.isUnionType}});Object.defineProperty(exports,"isWrappingType",{enumerable:true,get:function(){return _definition.isWrappingType}});Object.defineProperty(exports,"resolveObjMapThunk",{enumerable:true,get:function(){return _definition.resolveObjMapThunk}});Object.defineProperty(exports,"resolveReadonlyArrayThunk",{enumerable:true,get:function(){return _definition.resolveReadonlyArrayThunk}});Object.defineProperty(exports,"specifiedDirectives",{enumerable:true,get:function(){return _directives.specifiedDirectives}});Object.defineProperty(exports,"specifiedScalarTypes",{enumerable:true,get:function(){return _scalars.specifiedScalarTypes}});Object.defineProperty(exports,"validateSchema",{enumerable:true,get:function(){return _validate.validateSchema}});var _schema=require("./schema.mjs");var _definition=require("./definition.mjs");var _directives=require("./directives.mjs");var _scalars=require("./scalars.mjs");var _introspection=require("./introspection.mjs");var _validate=require("./validate.mjs");var _assertName=require("./assertName.mjs")},{"./assertName.mjs":386,"./definition.mjs":387,"./directives.mjs":388,"./introspection.mjs":390,"./scalars.mjs":391,"./schema.mjs":392,"./validate.mjs":393}],390:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.introspectionTypes=exports.__TypeKind=exports.__Type=exports.__Schema=exports.__InputValue=exports.__Field=exports.__EnumValue=exports.__DirectiveLocation=exports.__Directive=exports.TypeNameMetaFieldDef=exports.TypeMetaFieldDef=exports.TypeKind=exports.SchemaMetaFieldDef=void 0;exports.isIntrospectionType=isIntrospectionType;var _inspect=require("../jsutils/inspect.mjs");var _invariant=require("../jsutils/invariant.mjs");var _directiveLocation=require("../language/directiveLocation.mjs");var _printer=require("../language/printer.mjs");var _astFromValue=require("../utilities/astFromValue.mjs");var _definition=require("./definition.mjs");var _scalars=require("./scalars.mjs");const __Schema=new _definition.GraphQLObjectType({name:"__Schema",description:"A GraphQL Schema defines the capabilities of a GraphQL server. It exposes all available types and directives on the server, as well as the entry points for query, mutation, and subscription operations.",fields:()=>({description:{type:_scalars.GraphQLString,resolve:schema=>schema.description},types:{description:"A list of all types supported by this server.",type:new _definition.GraphQLNonNull(new _definition.GraphQLList(new _definition.GraphQLNonNull(__Type))),resolve(schema){return Object.values(schema.getTypeMap())}},queryType:{description:"The type that query operations will be rooted at.",type:new _definition.GraphQLNonNull(__Type),resolve:schema=>schema.getQueryType()},mutationType:{description:"If this server supports mutation, the type that mutation operations will be rooted at.",type:__Type,resolve:schema=>schema.getMutationType()},subscriptionType:{description:"If this server support subscription, the type that subscription operations will be rooted at.",type:__Type,resolve:schema=>schema.getSubscriptionType()},directives:{description:"A list of all directives supported by this server.",type:new _definition.GraphQLNonNull(new _definition.GraphQLList(new _definition.GraphQLNonNull(__Directive))),resolve:schema=>schema.getDirectives()}})});exports.__Schema=__Schema;const __Directive=new _definition.GraphQLObjectType({name:"__Directive",description:"A Directive provides a way to describe alternate runtime execution and type validation behavior in a GraphQL document.\n\nIn some cases, you need to provide options to alter GraphQL's execution behavior in ways field arguments will not suffice, such as conditionally including or skipping a field. Directives provide this by describing additional information to the executor.",fields:()=>({name:{type:new _definition.GraphQLNonNull(_scalars.GraphQLString),resolve:directive=>directive.name},description:{type:_scalars.GraphQLString,resolve:directive=>directive.description},isRepeatable:{type:new _definition.GraphQLNonNull(_scalars.GraphQLBoolean),resolve:directive=>directive.isRepeatable},locations:{type:new _definition.GraphQLNonNull(new _definition.GraphQLList(new _definition.GraphQLNonNull(__DirectiveLocation))),resolve:directive=>directive.locations},args:{type:new _definition.GraphQLNonNull(new _definition.GraphQLList(new _definition.GraphQLNonNull(__InputValue))),args:{includeDeprecated:{type:_scalars.GraphQLBoolean,defaultValue:false}},resolve(field,{includeDeprecated}){return includeDeprecated?field.args:field.args.filter(arg=>arg.deprecationReason==null)}}})});exports.__Directive=__Directive;const __DirectiveLocation=new _definition.GraphQLEnumType({name:"__DirectiveLocation",description:"A Directive can be adjacent to many parts of the GraphQL language, a __DirectiveLocation describes one such possible adjacencies.",values:{QUERY:{value:_directiveLocation.DirectiveLocation.QUERY,description:"Location adjacent to a query operation."},MUTATION:{value:_directiveLocation.DirectiveLocation.MUTATION,description:"Location adjacent to a mutation operation."},SUBSCRIPTION:{value:_directiveLocation.DirectiveLocation.SUBSCRIPTION,description:"Location adjacent to a subscription operation."},FIELD:{value:_directiveLocation.DirectiveLocation.FIELD,description:"Location adjacent to a field."},FRAGMENT_DEFINITION:{value:_directiveLocation.DirectiveLocation.FRAGMENT_DEFINITION,description:"Location adjacent to a fragment definition."},FRAGMENT_SPREAD:{value:_directiveLocation.DirectiveLocation.FRAGMENT_SPREAD,description:"Location adjacent to a fragment spread."},INLINE_FRAGMENT:{value:_directiveLocation.DirectiveLocation.INLINE_FRAGMENT,description:"Location adjacent to an inline fragment."},VARIABLE_DEFINITION:{value:_directiveLocation.DirectiveLocation.VARIABLE_DEFINITION,description:"Location adjacent to a variable definition."},SCHEMA:{value:_directiveLocation.DirectiveLocation.SCHEMA,description:"Location adjacent to a schema definition."},SCALAR:{value:_directiveLocation.DirectiveLocation.SCALAR,description:"Location adjacent to a scalar definition."},OBJECT:{value:_directiveLocation.DirectiveLocation.OBJECT,description:"Location adjacent to an object type definition."},FIELD_DEFINITION:{value:_directiveLocation.DirectiveLocation.FIELD_DEFINITION,description:"Location adjacent to a field definition."},ARGUMENT_DEFINITION:{value:_directiveLocation.DirectiveLocation.ARGUMENT_DEFINITION,description:"Location adjacent to an argument definition."},INTERFACE:{value:_directiveLocation.DirectiveLocation.INTERFACE,description:"Location adjacent to an interface definition."},UNION:{value:_directiveLocation.DirectiveLocation.UNION,description:"Location adjacent to a union definition."},ENUM:{value:_directiveLocation.DirectiveLocation.ENUM,description:"Location adjacent to an enum definition."},ENUM_VALUE:{value:_directiveLocation.DirectiveLocation.ENUM_VALUE,description:"Location adjacent to an enum value definition."},INPUT_OBJECT:{value:_directiveLocation.DirectiveLocation.INPUT_OBJECT,description:"Location adjacent to an input object type definition."},INPUT_FIELD_DEFINITION:{value:_directiveLocation.DirectiveLocation.INPUT_FIELD_DEFINITION,description:"Location adjacent to an input object field definition."}}});exports.__DirectiveLocation=__DirectiveLocation;const __Type=new _definition.GraphQLObjectType({name:"__Type",description:"The fundamental unit of any GraphQL Schema is the type. There are many kinds of types in GraphQL as represented by the `__TypeKind` enum.\n\nDepending on the kind of a type, certain fields describe information about that type. Scalar types provide no information beyond a name, description and optional `specifiedByURL`, while Enum types provide their values. Object and Interface types provide the fields they describe. Abstract types, Union and Interface, provide the Object types possible at runtime. List and NonNull types compose other types.",fields:()=>({kind:{type:new _definition.GraphQLNonNull(__TypeKind),resolve(type){if((0,_definition.isScalarType)(type)){return TypeKind.SCALAR}if((0,_definition.isObjectType)(type)){return TypeKind.OBJECT}if((0,_definition.isInterfaceType)(type)){return TypeKind.INTERFACE}if((0,_definition.isUnionType)(type)){return TypeKind.UNION}if((0,_definition.isEnumType)(type)){return TypeKind.ENUM}if((0,_definition.isInputObjectType)(type)){return TypeKind.INPUT_OBJECT}if((0,_definition.isListType)(type)){return TypeKind.LIST}if((0,_definition.isNonNullType)(type)){return TypeKind.NON_NULL}false||(0,_invariant.invariant)(false,`Unexpected type: "${(0,_inspect.inspect)(type)}".`)}},name:{type:_scalars.GraphQLString,resolve:type=>"name"in type?type.name:undefined},description:{type:_scalars.GraphQLString,resolve:type=>"description"in type?type.description:undefined},specifiedByURL:{type:_scalars.GraphQLString,resolve:obj=>"specifiedByURL"in obj?obj.specifiedByURL:undefined},fields:{type:new _definition.GraphQLList(new _definition.GraphQLNonNull(__Field)),args:{includeDeprecated:{type:_scalars.GraphQLBoolean,defaultValue:false}},resolve(type,{includeDeprecated}){if((0,_definition.isObjectType)(type)||(0,_definition.isInterfaceType)(type)){const fields=Object.values(type.getFields());return includeDeprecated?fields:fields.filter(field=>field.deprecationReason==null)}}},interfaces:{type:new _definition.GraphQLList(new _definition.GraphQLNonNull(__Type)),resolve(type){if((0,_definition.isObjectType)(type)||(0,_definition.isInterfaceType)(type)){return type.getInterfaces()}}},possibleTypes:{type:new _definition.GraphQLList(new _definition.GraphQLNonNull(__Type)),resolve(type,_args,_context,{schema}){if((0,_definition.isAbstractType)(type)){return schema.getPossibleTypes(type)}}},enumValues:{type:new _definition.GraphQLList(new _definition.GraphQLNonNull(__EnumValue)),args:{includeDeprecated:{type:_scalars.GraphQLBoolean,defaultValue:false}},resolve(type,{includeDeprecated}){if((0,_definition.isEnumType)(type)){const values=type.getValues();return includeDeprecated?values:values.filter(field=>field.deprecationReason==null)}}},inputFields:{type:new _definition.GraphQLList(new _definition.GraphQLNonNull(__InputValue)),args:{includeDeprecated:{type:_scalars.GraphQLBoolean,defaultValue:false}},resolve(type,{includeDeprecated}){if((0,_definition.isInputObjectType)(type)){const values=Object.values(type.getFields());return includeDeprecated?values:values.filter(field=>field.deprecationReason==null)}}},ofType:{type:__Type,resolve:type=>"ofType"in type?type.ofType:undefined}})});exports.__Type=__Type;const __Field=new _definition.GraphQLObjectType({name:"__Field",description:"Object and Interface types are described by a list of Fields, each of which has a name, potentially a list of arguments, and a return type.",fields:()=>({name:{type:new _definition.GraphQLNonNull(_scalars.GraphQLString),resolve:field=>field.name},description:{type:_scalars.GraphQLString,resolve:field=>field.description},args:{type:new _definition.GraphQLNonNull(new _definition.GraphQLList(new _definition.GraphQLNonNull(__InputValue))),args:{includeDeprecated:{type:_scalars.GraphQLBoolean,defaultValue:false}},resolve(field,{includeDeprecated}){return includeDeprecated?field.args:field.args.filter(arg=>arg.deprecationReason==null)}},type:{type:new _definition.GraphQLNonNull(__Type),resolve:field=>field.type},isDeprecated:{type:new _definition.GraphQLNonNull(_scalars.GraphQLBoolean),resolve:field=>field.deprecationReason!=null},deprecationReason:{type:_scalars.GraphQLString,resolve:field=>field.deprecationReason}})});exports.__Field=__Field;const __InputValue=new _definition.GraphQLObjectType({name:"__InputValue",description:"Arguments provided to Fields or Directives and the input fields of an InputObject are represented as Input Values which describe their type and optionally a default value.",fields:()=>({name:{type:new _definition.GraphQLNonNull(_scalars.GraphQLString),resolve:inputValue=>inputValue.name},description:{type:_scalars.GraphQLString,resolve:inputValue=>inputValue.description},type:{type:new _definition.GraphQLNonNull(__Type),resolve:inputValue=>inputValue.type},defaultValue:{type:_scalars.GraphQLString,description:"A GraphQL-formatted string representing the default value for this input value.",resolve(inputValue){const{type,defaultValue}=inputValue;const valueAST=(0,_astFromValue.astFromValue)(defaultValue,type);return valueAST?(0,_printer.print)(valueAST):null}},isDeprecated:{type:new _definition.GraphQLNonNull(_scalars.GraphQLBoolean),resolve:field=>field.deprecationReason!=null},deprecationReason:{type:_scalars.GraphQLString,resolve:obj=>obj.deprecationReason}})});exports.__InputValue=__InputValue;const __EnumValue=new _definition.GraphQLObjectType({name:"__EnumValue",description:"One possible value for a given Enum. Enum values are unique values, not a placeholder for a string or numeric value. However an Enum value is returned in a JSON response as a string.",fields:()=>({name:{type:new _definition.GraphQLNonNull(_scalars.GraphQLString),resolve:enumValue=>enumValue.name},description:{type:_scalars.GraphQLString,resolve:enumValue=>enumValue.description},isDeprecated:{type:new _definition.GraphQLNonNull(_scalars.GraphQLBoolean),resolve:enumValue=>enumValue.deprecationReason!=null},deprecationReason:{type:_scalars.GraphQLString,resolve:enumValue=>enumValue.deprecationReason}})});exports.__EnumValue=__EnumValue;var TypeKind;exports.TypeKind=TypeKind;(function(TypeKind){TypeKind["SCALAR"]="SCALAR";TypeKind["OBJECT"]="OBJECT";TypeKind["INTERFACE"]="INTERFACE";TypeKind["UNION"]="UNION";TypeKind["ENUM"]="ENUM";TypeKind["INPUT_OBJECT"]="INPUT_OBJECT";TypeKind["LIST"]="LIST";TypeKind["NON_NULL"]="NON_NULL"})(TypeKind||(exports.TypeKind=TypeKind={}));const __TypeKind=new _definition.GraphQLEnumType({name:"__TypeKind",description:"An enum describing what kind of type a given `__Type` is.",values:{SCALAR:{value:TypeKind.SCALAR,description:"Indicates this type is a scalar."},OBJECT:{value:TypeKind.OBJECT,description:"Indicates this type is an object. `fields` and `interfaces` are valid fields."},INTERFACE:{value:TypeKind.INTERFACE,description:"Indicates this type is an interface. `fields`, `interfaces`, and `possibleTypes` are valid fields."},UNION:{value:TypeKind.UNION,description:"Indicates this type is a union. `possibleTypes` is a valid field."},ENUM:{value:TypeKind.ENUM,description:"Indicates this type is an enum. `enumValues` is a valid field."},INPUT_OBJECT:{value:TypeKind.INPUT_OBJECT,description:"Indicates this type is an input object. `inputFields` is a valid field."},LIST:{value:TypeKind.LIST,description:"Indicates this type is a list. `ofType` is a valid field."},NON_NULL:{value:TypeKind.NON_NULL,description:"Indicates this type is a non-null. `ofType` is a valid field."}}});exports.__TypeKind=__TypeKind;const SchemaMetaFieldDef={name:"__schema",type:new _definition.GraphQLNonNull(__Schema),description:"Access the current type schema of this server.",args:[],resolve:(_source,_args,_context,{schema})=>schema,deprecationReason:undefined,extensions:Object.create(null),astNode:undefined};exports.SchemaMetaFieldDef=SchemaMetaFieldDef;const TypeMetaFieldDef={name:"__type",type:__Type,description:"Request the type information of a single type.",args:[{name:"name",description:undefined,type:new _definition.GraphQLNonNull(_scalars.GraphQLString),defaultValue:undefined,deprecationReason:undefined,extensions:Object.create(null),astNode:undefined}],resolve:(_source,{name},_context,{schema})=>schema.getType(name),deprecationReason:undefined,extensions:Object.create(null),astNode:undefined};exports.TypeMetaFieldDef=TypeMetaFieldDef;const TypeNameMetaFieldDef={name:"__typename",type:new _definition.GraphQLNonNull(_scalars.GraphQLString),description:"The name of the current Object type at runtime.",args:[],resolve:(_source,_args,_context,{parentType})=>parentType.name,deprecationReason:undefined,extensions:Object.create(null),astNode:undefined};exports.TypeNameMetaFieldDef=TypeNameMetaFieldDef;const introspectionTypes=Object.freeze([__Schema,__Directive,__DirectiveLocation,__Type,__Field,__InputValue,__EnumValue,__TypeKind]);exports.introspectionTypes=introspectionTypes;function isIntrospectionType(type){return introspectionTypes.some(({name})=>type.name===name)}},{"../jsutils/inspect.mjs":352,"../jsutils/invariant.mjs":354,"../language/directiveLocation.mjs":373,"../language/printer.mjs":382,"../utilities/astFromValue.mjs":396,"./definition.mjs":387,"./scalars.mjs":391}],391:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GraphQLString=exports.GraphQLInt=exports.GraphQLID=exports.GraphQLFloat=exports.GraphQLBoolean=exports.GRAPHQL_MIN_INT=exports.GRAPHQL_MAX_INT=void 0;exports.isSpecifiedScalarType=isSpecifiedScalarType;exports.specifiedScalarTypes=void 0;var _inspect=require("../jsutils/inspect.mjs");var _isObjectLike=require("../jsutils/isObjectLike.mjs");var _GraphQLError=require("../error/GraphQLError.mjs");var _kinds=require("../language/kinds.mjs");var _printer=require("../language/printer.mjs");var _definition=require("./definition.mjs");const GRAPHQL_MAX_INT=2147483647;exports.GRAPHQL_MAX_INT=GRAPHQL_MAX_INT;const GRAPHQL_MIN_INT=-2147483648;exports.GRAPHQL_MIN_INT=GRAPHQL_MIN_INT;const GraphQLInt=new _definition.GraphQLScalarType({name:"Int",description:"The `Int` scalar type represents non-fractional signed whole numeric values. Int can represent values between -(2^31) and 2^31 - 1.",serialize(outputValue){const coercedValue=serializeObject(outputValue);if(typeof coercedValue==="boolean"){return coercedValue?1:0}let num=coercedValue;if(typeof coercedValue==="string"&&coercedValue!==""){num=Number(coercedValue)}if(typeof num!=="number"||!Number.isInteger(num)){throw new _GraphQLError.GraphQLError(`Int cannot represent non-integer value: ${(0,_inspect.inspect)(coercedValue)}`)}if(num>GRAPHQL_MAX_INT||num<GRAPHQL_MIN_INT){throw new _GraphQLError.GraphQLError("Int cannot represent non 32-bit signed integer value: "+(0,_inspect.inspect)(coercedValue))}return num},parseValue(inputValue){if(typeof inputValue!=="number"||!Number.isInteger(inputValue)){throw new _GraphQLError.GraphQLError(`Int cannot represent non-integer value: ${(0,_inspect.inspect)(inputValue)}`)}if(inputValue>GRAPHQL_MAX_INT||inputValue<GRAPHQL_MIN_INT){throw new _GraphQLError.GraphQLError(`Int cannot represent non 32-bit signed integer value: ${inputValue}`)}return inputValue},parseLiteral(valueNode){if(valueNode.kind!==_kinds.Kind.INT){throw new _GraphQLError.GraphQLError(`Int cannot represent non-integer value: ${(0,_printer.print)(valueNode)}`,{nodes:valueNode})}const num=parseInt(valueNode.value,10);if(num>GRAPHQL_MAX_INT||num<GRAPHQL_MIN_INT){throw new _GraphQLError.GraphQLError(`Int cannot represent non 32-bit signed integer value: ${valueNode.value}`,{nodes:valueNode})}return num}});exports.GraphQLInt=GraphQLInt;const GraphQLFloat=new _definition.GraphQLScalarType({name:"Float",description:"The `Float` scalar type represents signed double-precision fractional values as specified by [IEEE 754](https://en.wikipedia.org/wiki/IEEE_floating_point).",serialize(outputValue){const coercedValue=serializeObject(outputValue);if(typeof coercedValue==="boolean"){return coercedValue?1:0}let num=coercedValue;if(typeof coercedValue==="string"&&coercedValue!==""){num=Number(coercedValue)}if(typeof num!=="number"||!Number.isFinite(num)){throw new _GraphQLError.GraphQLError(`Float cannot represent non numeric value: ${(0,_inspect.inspect)(coercedValue)}`)}return num},parseValue(inputValue){if(typeof inputValue!=="number"||!Number.isFinite(inputValue)){throw new _GraphQLError.GraphQLError(`Float cannot represent non numeric value: ${(0,_inspect.inspect)(inputValue)}`)}return inputValue},parseLiteral(valueNode){if(valueNode.kind!==_kinds.Kind.FLOAT&&valueNode.kind!==_kinds.Kind.INT){throw new _GraphQLError.GraphQLError(`Float cannot represent non numeric value: ${(0,_printer.print)(valueNode)}`,valueNode)}return parseFloat(valueNode.value)}});exports.GraphQLFloat=GraphQLFloat;const GraphQLString=new _definition.GraphQLScalarType({name:"String",description:"The `String` scalar type represents textual data, represented as UTF-8 character sequences. The String type is most often used by GraphQL to represent free-form human-readable text.",serialize(outputValue){const coercedValue=serializeObject(outputValue);if(typeof coercedValue==="string"){return coercedValue}if(typeof coercedValue==="boolean"){return coercedValue?"true":"false"}if(typeof coercedValue==="number"&&Number.isFinite(coercedValue)){return coercedValue.toString()}throw new _GraphQLError.GraphQLError(`String cannot represent value: ${(0,_inspect.inspect)(outputValue)}`)},parseValue(inputValue){if(typeof inputValue!=="string"){throw new _GraphQLError.GraphQLError(`String cannot represent a non string value: ${(0,_inspect.inspect)(inputValue)}`)}return inputValue},parseLiteral(valueNode){if(valueNode.kind!==_kinds.Kind.STRING){throw new _GraphQLError.GraphQLError(`String cannot represent a non string value: ${(0,_printer.print)(valueNode)}`,{nodes:valueNode})}return valueNode.value}});exports.GraphQLString=GraphQLString;const GraphQLBoolean=new _definition.GraphQLScalarType({name:"Boolean",description:"The `Boolean` scalar type represents `true` or `false`.",serialize(outputValue){const coercedValue=serializeObject(outputValue);if(typeof coercedValue==="boolean"){return coercedValue}if(Number.isFinite(coercedValue)){return coercedValue!==0}throw new _GraphQLError.GraphQLError(`Boolean cannot represent a non boolean value: ${(0,_inspect.inspect)(coercedValue)}`)},parseValue(inputValue){if(typeof inputValue!=="boolean"){throw new _GraphQLError.GraphQLError(`Boolean cannot represent a non boolean value: ${(0,_inspect.inspect)(inputValue)}`)}return inputValue},parseLiteral(valueNode){if(valueNode.kind!==_kinds.Kind.BOOLEAN){throw new _GraphQLError.GraphQLError(`Boolean cannot represent a non boolean value: ${(0,_printer.print)(valueNode)}`,{nodes:valueNode})}return valueNode.value}});exports.GraphQLBoolean=GraphQLBoolean;const GraphQLID=new _definition.GraphQLScalarType({name:"ID",description:'The `ID` scalar type represents a unique identifier, often used to refetch an object or as key for a cache. The ID type appears in a JSON response as a String; however, it is not intended to be human-readable. When expected as an input type, any string (such as `"4"`) or integer (such as `4`) input value will be accepted as an ID.',serialize(outputValue){const coercedValue=serializeObject(outputValue);if(typeof coercedValue==="string"){return coercedValue}if(Number.isInteger(coercedValue)){return String(coercedValue)}throw new _GraphQLError.GraphQLError(`ID cannot represent value: ${(0,_inspect.inspect)(outputValue)}`)},parseValue(inputValue){if(typeof inputValue==="string"){return inputValue}if(typeof inputValue==="number"&&Number.isInteger(inputValue)){return inputValue.toString()}throw new _GraphQLError.GraphQLError(`ID cannot represent value: ${(0,_inspect.inspect)(inputValue)}`)},parseLiteral(valueNode){if(valueNode.kind!==_kinds.Kind.STRING&&valueNode.kind!==_kinds.Kind.INT){throw new _GraphQLError.GraphQLError("ID cannot represent a non-string and non-integer value: "+(0,_printer.print)(valueNode),{nodes:valueNode})}return valueNode.value}});exports.GraphQLID=GraphQLID;const specifiedScalarTypes=Object.freeze([GraphQLString,GraphQLInt,GraphQLFloat,GraphQLBoolean,GraphQLID]);exports.specifiedScalarTypes=specifiedScalarTypes;function isSpecifiedScalarType(type){return specifiedScalarTypes.some(({name})=>type.name===name)}function serializeObject(outputValue){if((0,_isObjectLike.isObjectLike)(outputValue)){if(typeof outputValue.valueOf==="function"){const valueOfResult=outputValue.valueOf();if(!(0,_isObjectLike.isObjectLike)(valueOfResult)){return valueOfResult}}if(typeof outputValue.toJSON==="function"){return outputValue.toJSON()}}return outputValue}},{"../error/GraphQLError.mjs":335,"../jsutils/inspect.mjs":352,"../jsutils/isObjectLike.mjs":357,"../language/kinds.mjs":375,"../language/printer.mjs":382,"./definition.mjs":387}],392:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GraphQLSchema=void 0;exports.assertSchema=assertSchema;exports.isSchema=isSchema;var _devAssert=require("../jsutils/devAssert.mjs");var _inspect=require("../jsutils/inspect.mjs");var _instanceOf=require("../jsutils/instanceOf.mjs");var _isObjectLike=require("../jsutils/isObjectLike.mjs");var _toObjMap=require("../jsutils/toObjMap.mjs");var _ast=require("../language/ast.mjs");var _definition=require("./definition.mjs");var _directives=require("./directives.mjs");var _introspection=require("./introspection.mjs");function isSchema(schema){return(0,_instanceOf.instanceOf)(schema,GraphQLSchema)}function assertSchema(schema){if(!isSchema(schema)){throw new Error(`Expected ${(0,_inspect.inspect)(schema)} to be a GraphQL schema.`)}return schema}class GraphQLSchema{constructor(config){var _config$extensionASTN,_config$directives;this.__validationErrors=config.assumeValid===true?[]:undefined;(0,_isObjectLike.isObjectLike)(config)||(0,_devAssert.devAssert)(false,"Must provide configuration object.");!config.types||Array.isArray(config.types)||(0,_devAssert.devAssert)(false,`"types" must be Array if provided but got: ${(0,_inspect.inspect)(config.types)}.`);!config.directives||Array.isArray(config.directives)||(0,_devAssert.devAssert)(false,'"directives" must be Array if provided but got: '+`${(0,_inspect.inspect)(config.directives)}.`);this.description=config.description;this.extensions=(0,_toObjMap.toObjMap)(config.extensions);this.astNode=config.astNode;this.extensionASTNodes=(_config$extensionASTN=config.extensionASTNodes)!==null&&_config$extensionASTN!==void 0?_config$extensionASTN:[];this._queryType=config.query;this._mutationType=config.mutation;this._subscriptionType=config.subscription;this._directives=(_config$directives=config.directives)!==null&&_config$directives!==void 0?_config$directives:_directives.specifiedDirectives;const allReferencedTypes=new Set(config.types);if(config.types!=null){for(const type of config.types){allReferencedTypes.delete(type);collectReferencedTypes(type,allReferencedTypes)}}if(this._queryType!=null){collectReferencedTypes(this._queryType,allReferencedTypes)}if(this._mutationType!=null){collectReferencedTypes(this._mutationType,allReferencedTypes)}if(this._subscriptionType!=null){collectReferencedTypes(this._subscriptionType,allReferencedTypes)}for(const directive of this._directives){if((0,_directives.isDirective)(directive)){for(const arg of directive.args){collectReferencedTypes(arg.type,allReferencedTypes)}}}collectReferencedTypes(_introspection.__Schema,allReferencedTypes);this._typeMap=Object.create(null);this._subTypeMap=Object.create(null);this._implementationsMap=Object.create(null);for(const namedType of allReferencedTypes){if(namedType==null){continue}const typeName=namedType.name;typeName||(0,_devAssert.devAssert)(false,"One of the provided types for building the Schema is missing a name.");if(this._typeMap[typeName]!==undefined){throw new Error(`Schema must contain uniquely named types but contains multiple types named "${typeName}".`)}this._typeMap[typeName]=namedType;if((0,_definition.isInterfaceType)(namedType)){for(const iface of namedType.getInterfaces()){if((0,_definition.isInterfaceType)(iface)){let implementations=this._implementationsMap[iface.name];if(implementations===undefined){implementations=this._implementationsMap[iface.name]={objects:[],interfaces:[]}}implementations.interfaces.push(namedType)}}}else if((0,_definition.isObjectType)(namedType)){for(const iface of namedType.getInterfaces()){if((0,_definition.isInterfaceType)(iface)){let implementations=this._implementationsMap[iface.name];if(implementations===undefined){implementations=this._implementationsMap[iface.name]={objects:[],interfaces:[]}}implementations.objects.push(namedType)}}}}}get[Symbol.toStringTag](){return"GraphQLSchema"}getQueryType(){return this._queryType}getMutationType(){return this._mutationType}getSubscriptionType(){return this._subscriptionType}getRootType(operation){switch(operation){case _ast.OperationTypeNode.QUERY:return this.getQueryType();case _ast.OperationTypeNode.MUTATION:return this.getMutationType();case _ast.OperationTypeNode.SUBSCRIPTION:return this.getSubscriptionType()}}getTypeMap(){return this._typeMap}getType(name){return this.getTypeMap()[name]}getPossibleTypes(abstractType){return(0,_definition.isUnionType)(abstractType)?abstractType.getTypes():this.getImplementations(abstractType).objects}getImplementations(interfaceType){const implementations=this._implementationsMap[interfaceType.name];return implementations!==null&&implementations!==void 0?implementations:{objects:[],interfaces:[]}}isSubType(abstractType,maybeSubType){let map=this._subTypeMap[abstractType.name];if(map===undefined){map=Object.create(null);if((0,_definition.isUnionType)(abstractType)){for(const type of abstractType.getTypes()){map[type.name]=true}}else{const implementations=this.getImplementations(abstractType);for(const type of implementations.objects){map[type.name]=true}for(const type of implementations.interfaces){map[type.name]=true}}this._subTypeMap[abstractType.name]=map}return map[maybeSubType.name]!==undefined}getDirectives(){return this._directives}getDirective(name){return this.getDirectives().find(directive=>directive.name===name)}toConfig(){return{description:this.description,query:this.getQueryType(),mutation:this.getMutationType(),subscription:this.getSubscriptionType(),types:Object.values(this.getTypeMap()),directives:this.getDirectives(),extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes,assumeValid:this.__validationErrors!==undefined}}}exports.GraphQLSchema=GraphQLSchema;function collectReferencedTypes(type,typeSet){const namedType=(0,_definition.getNamedType)(type);if(!typeSet.has(namedType)){typeSet.add(namedType);if((0,_definition.isUnionType)(namedType)){for(const memberType of namedType.getTypes()){collectReferencedTypes(memberType,typeSet)}}else if((0,_definition.isObjectType)(namedType)||(0,_definition.isInterfaceType)(namedType)){for(const interfaceType of namedType.getInterfaces()){collectReferencedTypes(interfaceType,typeSet)}for(const field of Object.values(namedType.getFields())){collectReferencedTypes(field.type,typeSet);for(const arg of field.args){collectReferencedTypes(arg.type,typeSet)}}}else if((0,_definition.isInputObjectType)(namedType)){for(const field of Object.values(namedType.getFields())){collectReferencedTypes(field.type,typeSet)}}}return typeSet}},{"../jsutils/devAssert.mjs":348,"../jsutils/inspect.mjs":352,"../jsutils/instanceOf.mjs":353,"../jsutils/isObjectLike.mjs":357,"../jsutils/toObjMap.mjs":369,"../language/ast.mjs":370,"./definition.mjs":387,"./directives.mjs":388,"./introspection.mjs":390}],393:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.assertValidSchema=assertValidSchema;exports.validateSchema=validateSchema;var _inspect=require("../jsutils/inspect.mjs");var _GraphQLError=require("../error/GraphQLError.mjs");var _ast=require("../language/ast.mjs");var _typeComparators=require("../utilities/typeComparators.mjs");var _definition=require("./definition.mjs");var _directives=require("./directives.mjs");var _introspection=require("./introspection.mjs");var _schema=require("./schema.mjs");function validateSchema(schema){(0,_schema.assertSchema)(schema);if(schema.__validationErrors){return schema.__validationErrors}const context=new SchemaValidationContext(schema);validateRootTypes(context);validateDirectives(context);validateTypes(context);const errors=context.getErrors();schema.__validationErrors=errors;return errors}function assertValidSchema(schema){const errors=validateSchema(schema);if(errors.length!==0){throw new Error(errors.map(error=>error.message).join("\n\n"))}}class SchemaValidationContext{constructor(schema){this._errors=[];this.schema=schema}reportError(message,nodes){const _nodes=Array.isArray(nodes)?nodes.filter(Boolean):nodes;this._errors.push(new _GraphQLError.GraphQLError(message,{nodes:_nodes}))}getErrors(){return this._errors}}function validateRootTypes(context){const schema=context.schema;const queryType=schema.getQueryType();if(!queryType){context.reportError("Query root type must be provided.",schema.astNode)}else if(!(0,_definition.isObjectType)(queryType)){var _getOperationTypeNode;context.reportError(`Query root type must be Object type, it cannot be ${(0,_inspect.inspect)(queryType)}.`,(_getOperationTypeNode=getOperationTypeNode(schema,_ast.OperationTypeNode.QUERY))!==null&&_getOperationTypeNode!==void 0?_getOperationTypeNode:queryType.astNode)}const mutationType=schema.getMutationType();if(mutationType&&!(0,_definition.isObjectType)(mutationType)){var _getOperationTypeNode2;context.reportError("Mutation root type must be Object type if provided, it cannot be "+`${(0,_inspect.inspect)(mutationType)}.`,(_getOperationTypeNode2=getOperationTypeNode(schema,_ast.OperationTypeNode.MUTATION))!==null&&_getOperationTypeNode2!==void 0?_getOperationTypeNode2:mutationType.astNode)}const subscriptionType=schema.getSubscriptionType();if(subscriptionType&&!(0,_definition.isObjectType)(subscriptionType)){var _getOperationTypeNode3;context.reportError("Subscription root type must be Object type if provided, it cannot be "+`${(0,_inspect.inspect)(subscriptionType)}.`,(_getOperationTypeNode3=getOperationTypeNode(schema,_ast.OperationTypeNode.SUBSCRIPTION))!==null&&_getOperationTypeNode3!==void 0?_getOperationTypeNode3:subscriptionType.astNode)}}function getOperationTypeNode(schema,operation){var _flatMap$find;return(_flatMap$find=[schema.astNode,...schema.extensionASTNodes].flatMap(schemaNode=>{var _schemaNode$operation;return(_schemaNode$operation=schemaNode===null||schemaNode===void 0?void 0:schemaNode.operationTypes)!==null&&_schemaNode$operation!==void 0?_schemaNode$operation:[]}).find(operationNode=>operationNode.operation===operation))===null||_flatMap$find===void 0?void 0:_flatMap$find.type}function validateDirectives(context){for(const directive of context.schema.getDirectives()){if(!(0,_directives.isDirective)(directive)){context.reportError(`Expected directive but got: ${(0,_inspect.inspect)(directive)}.`,directive===null||directive===void 0?void 0:directive.astNode);continue}validateName(context,directive);for(const arg of directive.args){validateName(context,arg);if(!(0,_definition.isInputType)(arg.type)){context.reportError(`The type of @${directive.name}(${arg.name}:) must be Input Type `+`but got: ${(0,_inspect.inspect)(arg.type)}.`,arg.astNode)}if((0,_definition.isRequiredArgument)(arg)&&arg.deprecationReason!=null){var _arg$astNode;context.reportError(`Required argument @${directive.name}(${arg.name}:) cannot be deprecated.`,[getDeprecatedDirectiveNode(arg.astNode),(_arg$astNode=arg.astNode)===null||_arg$astNode===void 0?void 0:_arg$astNode.type])}}}}function validateName(context,node){if(node.name.startsWith("__")){context.reportError(`Name "${node.name}" must not begin with "__", which is reserved by GraphQL introspection.`,node.astNode)}}function validateTypes(context){const validateInputObjectCircularRefs=createInputObjectCircularRefsValidator(context);const typeMap=context.schema.getTypeMap();for(const type of Object.values(typeMap)){if(!(0,_definition.isNamedType)(type)){context.reportError(`Expected GraphQL named type but got: ${(0,_inspect.inspect)(type)}.`,type.astNode);continue}if(!(0,_introspection.isIntrospectionType)(type)){validateName(context,type)}if((0,_definition.isObjectType)(type)){validateFields(context,type);validateInterfaces(context,type)}else if((0,_definition.isInterfaceType)(type)){validateFields(context,type);validateInterfaces(context,type)}else if((0,_definition.isUnionType)(type)){validateUnionMembers(context,type)}else if((0,_definition.isEnumType)(type)){validateEnumValues(context,type)}else if((0,_definition.isInputObjectType)(type)){validateInputFields(context,type);validateInputObjectCircularRefs(type)}}}function validateFields(context,type){const fields=Object.values(type.getFields());if(fields.length===0){context.reportError(`Type ${type.name} must define one or more fields.`,[type.astNode,...type.extensionASTNodes])}for(const field of fields){validateName(context,field);if(!(0,_definition.isOutputType)(field.type)){var _field$astNode;context.reportError(`The type of ${type.name}.${field.name} must be Output Type `+`but got: ${(0,_inspect.inspect)(field.type)}.`,(_field$astNode=field.astNode)===null||_field$astNode===void 0?void 0:_field$astNode.type)}for(const arg of field.args){const argName=arg.name;validateName(context,arg);if(!(0,_definition.isInputType)(arg.type)){var _arg$astNode2;context.reportError(`The type of ${type.name}.${field.name}(${argName}:) must be Input `+`Type but got: ${(0,_inspect.inspect)(arg.type)}.`,(_arg$astNode2=arg.astNode)===null||_arg$astNode2===void 0?void 0:_arg$astNode2.type)}if((0,_definition.isRequiredArgument)(arg)&&arg.deprecationReason!=null){var _arg$astNode3;context.reportError(`Required argument ${type.name}.${field.name}(${argName}:) cannot be deprecated.`,[getDeprecatedDirectiveNode(arg.astNode),(_arg$astNode3=arg.astNode)===null||_arg$astNode3===void 0?void 0:_arg$astNode3.type])}}}}function validateInterfaces(context,type){const ifaceTypeNames=Object.create(null);for(const iface of type.getInterfaces()){if(!(0,_definition.isInterfaceType)(iface)){context.reportError(`Type ${(0,_inspect.inspect)(type)} must only implement Interface types, `+`it cannot implement ${(0,_inspect.inspect)(iface)}.`,getAllImplementsInterfaceNodes(type,iface));continue}if(type===iface){context.reportError(`Type ${type.name} cannot implement itself because it would create a circular reference.`,getAllImplementsInterfaceNodes(type,iface));continue}if(ifaceTypeNames[iface.name]){context.reportError(`Type ${type.name} can only implement ${iface.name} once.`,getAllImplementsInterfaceNodes(type,iface));continue}ifaceTypeNames[iface.name]=true;validateTypeImplementsAncestors(context,type,iface);validateTypeImplementsInterface(context,type,iface)}}function validateTypeImplementsInterface(context,type,iface){const typeFieldMap=type.getFields();for(const ifaceField of Object.values(iface.getFields())){const fieldName=ifaceField.name;const typeField=typeFieldMap[fieldName];if(!typeField){context.reportError(`Interface field ${iface.name}.${fieldName} expected but ${type.name} does not provide it.`,[ifaceField.astNode,type.astNode,...type.extensionASTNodes]);continue}if(!(0,_typeComparators.isTypeSubTypeOf)(context.schema,typeField.type,ifaceField.type)){var _ifaceField$astNode,_typeField$astNode;context.reportError(`Interface field ${iface.name}.${fieldName} expects type `+`${(0,_inspect.inspect)(ifaceField.type)} but ${type.name}.${fieldName} `+`is type ${(0,_inspect.inspect)(typeField.type)}.`,[(_ifaceField$astNode=ifaceField.astNode)===null||_ifaceField$astNode===void 0?void 0:_ifaceField$astNode.type,(_typeField$astNode=typeField.astNode)===null||_typeField$astNode===void 0?void 0:_typeField$astNode.type])}for(const ifaceArg of ifaceField.args){const argName=ifaceArg.name;const typeArg=typeField.args.find(arg=>arg.name===argName);if(!typeArg){context.reportError(`Interface field argument ${iface.name}.${fieldName}(${argName}:) expected but ${type.name}.${fieldName} does not provide it.`,[ifaceArg.astNode,typeField.astNode]);continue}if(!(0,_typeComparators.isEqualType)(ifaceArg.type,typeArg.type)){var _ifaceArg$astNode,_typeArg$astNode;context.reportError(`Interface field argument ${iface.name}.${fieldName}(${argName}:) `+`expects type ${(0,_inspect.inspect)(ifaceArg.type)} but `+`${type.name}.${fieldName}(${argName}:) is type `+`${(0,_inspect.inspect)(typeArg.type)}.`,[(_ifaceArg$astNode=ifaceArg.astNode)===null||_ifaceArg$astNode===void 0?void 0:_ifaceArg$astNode.type,(_typeArg$astNode=typeArg.astNode)===null||_typeArg$astNode===void 0?void 0:_typeArg$astNode.type])}}for(const typeArg of typeField.args){const argName=typeArg.name;const ifaceArg=ifaceField.args.find(arg=>arg.name===argName);if(!ifaceArg&&(0,_definition.isRequiredArgument)(typeArg)){context.reportError(`Object field ${type.name}.${fieldName} includes required argument ${argName} that is missing from the Interface field ${iface.name}.${fieldName}.`,[typeArg.astNode,ifaceField.astNode])}}}}function validateTypeImplementsAncestors(context,type,iface){const ifaceInterfaces=type.getInterfaces();for(const transitive of iface.getInterfaces()){if(!ifaceInterfaces.includes(transitive)){context.reportError(transitive===type?`Type ${type.name} cannot implement ${iface.name} because it would create a circular reference.`:`Type ${type.name} must implement ${transitive.name} because it is implemented by ${iface.name}.`,[...getAllImplementsInterfaceNodes(iface,transitive),...getAllImplementsInterfaceNodes(type,iface)])}}}function validateUnionMembers(context,union){const memberTypes=union.getTypes();if(memberTypes.length===0){context.reportError(`Union type ${union.name} must define one or more member types.`,[union.astNode,...union.extensionASTNodes])}const includedTypeNames=Object.create(null);for(const memberType of memberTypes){if(includedTypeNames[memberType.name]){context.reportError(`Union type ${union.name} can only include type ${memberType.name} once.`,getUnionMemberTypeNodes(union,memberType.name));continue}includedTypeNames[memberType.name]=true;if(!(0,_definition.isObjectType)(memberType)){context.reportError(`Union type ${union.name} can only include Object types, `+`it cannot include ${(0,_inspect.inspect)(memberType)}.`,getUnionMemberTypeNodes(union,String(memberType)))}}}function validateEnumValues(context,enumType){const enumValues=enumType.getValues();if(enumValues.length===0){context.reportError(`Enum type ${enumType.name} must define one or more values.`,[enumType.astNode,...enumType.extensionASTNodes])}for(const enumValue of enumValues){validateName(context,enumValue)}}function validateInputFields(context,inputObj){const fields=Object.values(inputObj.getFields());if(fields.length===0){context.reportError(`Input Object type ${inputObj.name} must define one or more fields.`,[inputObj.astNode,...inputObj.extensionASTNodes])}for(const field of fields){validateName(context,field);if(!(0,_definition.isInputType)(field.type)){var _field$astNode2;context.reportError(`The type of ${inputObj.name}.${field.name} must be Input Type `+`but got: ${(0,_inspect.inspect)(field.type)}.`,(_field$astNode2=field.astNode)===null||_field$astNode2===void 0?void 0:_field$astNode2.type)}if((0,_definition.isRequiredInputField)(field)&&field.deprecationReason!=null){var _field$astNode3;context.reportError(`Required input field ${inputObj.name}.${field.name} cannot be deprecated.`,[getDeprecatedDirectiveNode(field.astNode),(_field$astNode3=field.astNode)===null||_field$astNode3===void 0?void 0:_field$astNode3.type])}}}function createInputObjectCircularRefsValidator(context){const visitedTypes=Object.create(null);const fieldPath=[];const fieldPathIndexByTypeName=Object.create(null);return detectCycleRecursive;function detectCycleRecursive(inputObj){if(visitedTypes[inputObj.name]){return}visitedTypes[inputObj.name]=true;fieldPathIndexByTypeName[inputObj.name]=fieldPath.length;const fields=Object.values(inputObj.getFields());for(const field of fields){if((0,_definition.isNonNullType)(field.type)&&(0,_definition.isInputObjectType)(field.type.ofType)){const fieldType=field.type.ofType;const cycleIndex=fieldPathIndexByTypeName[fieldType.name];fieldPath.push(field);if(cycleIndex===undefined){detectCycleRecursive(fieldType)}else{const cyclePath=fieldPath.slice(cycleIndex);const pathStr=cyclePath.map(fieldObj=>fieldObj.name).join(".");context.reportError(`Cannot reference Input Object "${fieldType.name}" within itself through a series of non-null fields: "${pathStr}".`,cyclePath.map(fieldObj=>fieldObj.astNode))}fieldPath.pop()}}fieldPathIndexByTypeName[inputObj.name]=undefined}}function getAllImplementsInterfaceNodes(type,iface){const{astNode,extensionASTNodes}=type;const nodes=astNode!=null?[astNode,...extensionASTNodes]:extensionASTNodes;return nodes.flatMap(typeNode=>{var _typeNode$interfaces;return(_typeNode$interfaces=typeNode.interfaces)!==null&&_typeNode$interfaces!==void 0?_typeNode$interfaces:[]}).filter(ifaceNode=>ifaceNode.name.value===iface.name)}function getUnionMemberTypeNodes(union,typeName){const{astNode,extensionASTNodes}=union;const nodes=astNode!=null?[astNode,...extensionASTNodes]:extensionASTNodes;return nodes.flatMap(unionNode=>{var _unionNode$types;return(_unionNode$types=unionNode.types)!==null&&_unionNode$types!==void 0?_unionNode$types:[]}).filter(typeNode=>typeNode.name.value===typeName)}function getDeprecatedDirectiveNode(definitionNode){var _definitionNode$direc;return definitionNode===null||definitionNode===void 0?void 0:(_definitionNode$direc=definitionNode.directives)===null||_definitionNode$direc===void 0?void 0:_definitionNode$direc.find(node=>node.name.value===_directives.GraphQLDeprecatedDirective.name)}},{"../error/GraphQLError.mjs":335,"../jsutils/inspect.mjs":352,"../language/ast.mjs":370,"../utilities/typeComparators.mjs":413,"./definition.mjs":387,"./directives.mjs":388,"./introspection.mjs":390,"./schema.mjs":392}],394:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TypeInfo=void 0;exports.visitWithTypeInfo=visitWithTypeInfo;var _ast=require("../language/ast.mjs");var _kinds=require("../language/kinds.mjs");var _visitor=require("../language/visitor.mjs");var _definition=require("../type/definition.mjs");var _introspection=require("../type/introspection.mjs");var _typeFromAST=require("./typeFromAST.mjs");class TypeInfo{constructor(schema,initialType,getFieldDefFn){this._schema=schema;this._typeStack=[];this._parentTypeStack=[];this._inputTypeStack=[];this._fieldDefStack=[];this._defaultValueStack=[];this._directive=null;this._argument=null;this._enumValue=null;this._getFieldDef=getFieldDefFn!==null&&getFieldDefFn!==void 0?getFieldDefFn:getFieldDef;if(initialType){if((0,_definition.isInputType)(initialType)){this._inputTypeStack.push(initialType)}if((0,_definition.isCompositeType)(initialType)){this._parentTypeStack.push(initialType)}if((0,_definition.isOutputType)(initialType)){this._typeStack.push(initialType)}}}get[Symbol.toStringTag](){return"TypeInfo"}getType(){if(this._typeStack.length>0){return this._typeStack[this._typeStack.length-1]}}getParentType(){if(this._parentTypeStack.length>0){return this._parentTypeStack[this._parentTypeStack.length-1]}}getInputType(){if(this._inputTypeStack.length>0){return this._inputTypeStack[this._inputTypeStack.length-1]}}getParentInputType(){if(this._inputTypeStack.length>1){return this._inputTypeStack[this._inputTypeStack.length-2]}}getFieldDef(){if(this._fieldDefStack.length>0){return this._fieldDefStack[this._fieldDefStack.length-1]}}getDefaultValue(){if(this._defaultValueStack.length>0){return this._defaultValueStack[this._defaultValueStack.length-1]}}getDirective(){return this._directive}getArgument(){return this._argument}getEnumValue(){return this._enumValue}enter(node){const schema=this._schema;switch(node.kind){case _kinds.Kind.SELECTION_SET:{const namedType=(0,_definition.getNamedType)(this.getType());this._parentTypeStack.push((0,_definition.isCompositeType)(namedType)?namedType:undefined);break}case _kinds.Kind.FIELD:{const parentType=this.getParentType();let fieldDef;let fieldType;if(parentType){fieldDef=this._getFieldDef(schema,parentType,node);if(fieldDef){fieldType=fieldDef.type}}this._fieldDefStack.push(fieldDef);this._typeStack.push((0,_definition.isOutputType)(fieldType)?fieldType:undefined);break}case _kinds.Kind.DIRECTIVE:this._directive=schema.getDirective(node.name.value);break;case _kinds.Kind.OPERATION_DEFINITION:{const rootType=schema.getRootType(node.operation);this._typeStack.push((0,_definition.isObjectType)(rootType)?rootType:undefined);break}case _kinds.Kind.INLINE_FRAGMENT:case _kinds.Kind.FRAGMENT_DEFINITION:{const typeConditionAST=node.typeCondition;const outputType=typeConditionAST?(0,_typeFromAST.typeFromAST)(schema,typeConditionAST):(0,_definition.getNamedType)(this.getType());this._typeStack.push((0,_definition.isOutputType)(outputType)?outputType:undefined);break}case _kinds.Kind.VARIABLE_DEFINITION:{const inputType=(0,_typeFromAST.typeFromAST)(schema,node.type);this._inputTypeStack.push((0,_definition.isInputType)(inputType)?inputType:undefined);break}case _kinds.Kind.ARGUMENT:{var _this$getDirective;let argDef;let argType;const fieldOrDirective=(_this$getDirective=this.getDirective())!==null&&_this$getDirective!==void 0?_this$getDirective:this.getFieldDef();if(fieldOrDirective){argDef=fieldOrDirective.args.find(arg=>arg.name===node.name.value);if(argDef){argType=argDef.type}}this._argument=argDef;this._defaultValueStack.push(argDef?argDef.defaultValue:undefined);this._inputTypeStack.push((0,_definition.isInputType)(argType)?argType:undefined);break}case _kinds.Kind.LIST:{const listType=(0,_definition.getNullableType)(this.getInputType());const itemType=(0,_definition.isListType)(listType)?listType.ofType:listType;this._defaultValueStack.push(undefined);this._inputTypeStack.push((0,_definition.isInputType)(itemType)?itemType:undefined);break}case _kinds.Kind.OBJECT_FIELD:{const objectType=(0,_definition.getNamedType)(this.getInputType());let inputFieldType;let inputField;if((0,_definition.isInputObjectType)(objectType)){inputField=objectType.getFields()[node.name.value];if(inputField){inputFieldType=inputField.type}}this._defaultValueStack.push(inputField?inputField.defaultValue:undefined);this._inputTypeStack.push((0,_definition.isInputType)(inputFieldType)?inputFieldType:undefined);break}case _kinds.Kind.ENUM:{const enumType=(0,_definition.getNamedType)(this.getInputType());let enumValue;if((0,_definition.isEnumType)(enumType)){enumValue=enumType.getValue(node.value)}this._enumValue=enumValue;break}default:}}leave(node){switch(node.kind){case _kinds.Kind.SELECTION_SET:this._parentTypeStack.pop();break;case _kinds.Kind.FIELD:this._fieldDefStack.pop();this._typeStack.pop();break;case _kinds.Kind.DIRECTIVE:this._directive=null;break;case _kinds.Kind.OPERATION_DEFINITION:case _kinds.Kind.INLINE_FRAGMENT:case _kinds.Kind.FRAGMENT_DEFINITION:this._typeStack.pop();break;case _kinds.Kind.VARIABLE_DEFINITION:this._inputTypeStack.pop();break;case _kinds.Kind.ARGUMENT:this._argument=null;this._defaultValueStack.pop();this._inputTypeStack.pop();break;case _kinds.Kind.LIST:case _kinds.Kind.OBJECT_FIELD:this._defaultValueStack.pop();this._inputTypeStack.pop();break;case _kinds.Kind.ENUM:this._enumValue=null;break;default:}}}exports.TypeInfo=TypeInfo;function getFieldDef(schema,parentType,fieldNode){const name=fieldNode.name.value;if(name===_introspection.SchemaMetaFieldDef.name&&schema.getQueryType()===parentType){return _introspection.SchemaMetaFieldDef}if(name===_introspection.TypeMetaFieldDef.name&&schema.getQueryType()===parentType){return _introspection.TypeMetaFieldDef}if(name===_introspection.TypeNameMetaFieldDef.name&&(0,_definition.isCompositeType)(parentType)){return _introspection.TypeNameMetaFieldDef}if((0,_definition.isObjectType)(parentType)||(0,_definition.isInterfaceType)(parentType)){return parentType.getFields()[name]}}function visitWithTypeInfo(typeInfo,visitor){return{enter(...args){const node=args[0];typeInfo.enter(node);const fn=(0,_visitor.getEnterLeaveForKind)(visitor,node.kind).enter;if(fn){const result=fn.apply(visitor,args);if(result!==undefined){typeInfo.leave(node);if((0,_ast.isNode)(result)){typeInfo.enter(result)}}return result}},leave(...args){const node=args[0];const fn=(0,_visitor.getEnterLeaveForKind)(visitor,node.kind).leave;let result;if(fn){result=fn.apply(visitor,args)}typeInfo.leave(node);return result}}}},{"../language/ast.mjs":370,"../language/kinds.mjs":375,"../language/visitor.mjs":385,"../type/definition.mjs":387,"../type/introspection.mjs":390,"./typeFromAST.mjs":414}],395:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.assertValidName=assertValidName;exports.isValidNameError=isValidNameError;var _devAssert=require("../jsutils/devAssert.mjs");var _GraphQLError=require("../error/GraphQLError.mjs");var _assertName=require("../type/assertName.mjs");function assertValidName(name){const error=isValidNameError(name);if(error){throw error}return name}function isValidNameError(name){typeof name==="string"||(0,_devAssert.devAssert)(false,"Expected name to be a string.");if(name.startsWith("__")){return new _GraphQLError.GraphQLError(`Name "${name}" must not begin with "__", which is reserved by GraphQL introspection.`)}try{(0,_assertName.assertName)(name)}catch(error){return error}}},{"../error/GraphQLError.mjs":335,"../jsutils/devAssert.mjs":348,"../type/assertName.mjs":386}],396:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.astFromValue=astFromValue;var _inspect=require("../jsutils/inspect.mjs");var _invariant=require("../jsutils/invariant.mjs");var _isIterableObject=require("../jsutils/isIterableObject.mjs");var _isObjectLike=require("../jsutils/isObjectLike.mjs");var _kinds=require("../language/kinds.mjs");var _definition=require("../type/definition.mjs");var _scalars=require("../type/scalars.mjs");function astFromValue(value,type){if((0,_definition.isNonNullType)(type)){const astValue=astFromValue(value,type.ofType);if((astValue===null||astValue===void 0?void 0:astValue.kind)===_kinds.Kind.NULL){return null}return astValue}if(value===null){return{kind:_kinds.Kind.NULL}}if(value===undefined){return null}if((0,_definition.isListType)(type)){const itemType=type.ofType;if((0,_isIterableObject.isIterableObject)(value)){const valuesNodes=[];for(const item of value){const itemNode=astFromValue(item,itemType);if(itemNode!=null){valuesNodes.push(itemNode)}}return{kind:_kinds.Kind.LIST,values:valuesNodes}}return astFromValue(value,itemType)}if((0,_definition.isInputObjectType)(type)){if(!(0,_isObjectLike.isObjectLike)(value)){return null}const fieldNodes=[];for(const field of Object.values(type.getFields())){const fieldValue=astFromValue(value[field.name],field.type);if(fieldValue){fieldNodes.push({kind:_kinds.Kind.OBJECT_FIELD,name:{kind:_kinds.Kind.NAME,value:field.name},value:fieldValue})}}return{kind:_kinds.Kind.OBJECT,fields:fieldNodes}}if((0,_definition.isLeafType)(type)){const serialized=type.serialize(value);if(serialized==null){return null}if(typeof serialized==="boolean"){return{kind:_kinds.Kind.BOOLEAN,value:serialized}}if(typeof serialized==="number"&&Number.isFinite(serialized)){const stringNum=String(serialized);return integerStringRegExp.test(stringNum)?{kind:_kinds.Kind.INT,value:stringNum}:{kind:_kinds.Kind.FLOAT,value:stringNum}}if(typeof serialized==="string"){if((0,_definition.isEnumType)(type)){return{kind:_kinds.Kind.ENUM,value:serialized}}if(type===_scalars.GraphQLID&&integerStringRegExp.test(serialized)){return{kind:_kinds.Kind.INT,value:serialized}}return{kind:_kinds.Kind.STRING,value:serialized}}throw new TypeError(`Cannot convert value to AST: ${(0,_inspect.inspect)(serialized)}.`)}false||(0,_invariant.invariant)(false,"Unexpected input type: "+(0,_inspect.inspect)(type))}const integerStringRegExp=/^-?(?:0|[1-9][0-9]*)$/},{"../jsutils/inspect.mjs":352,"../jsutils/invariant.mjs":354,"../jsutils/isIterableObject.mjs":356,"../jsutils/isObjectLike.mjs":357,"../language/kinds.mjs":375,"../type/definition.mjs":387,"../type/scalars.mjs":391}],397:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildASTSchema=buildASTSchema;exports.buildSchema=buildSchema;var _devAssert=require("../jsutils/devAssert.mjs");var _kinds=require("../language/kinds.mjs");var _parser=require("../language/parser.mjs");var _directives=require("../type/directives.mjs");var _schema=require("../type/schema.mjs");var _validate=require("../validation/validate.mjs");var _extendSchema=require("./extendSchema.mjs");function buildASTSchema(documentAST,options){documentAST!=null&&documentAST.kind===_kinds.Kind.DOCUMENT||(0,_devAssert.devAssert)(false,"Must provide valid Document AST.");if((options===null||options===void 0?void 0:options.assumeValid)!==true&&(options===null||options===void 0?void 0:options.assumeValidSDL)!==true){(0,_validate.assertValidSDL)(documentAST)}const emptySchemaConfig={description:undefined,types:[],directives:[],extensions:Object.create(null),extensionASTNodes:[],assumeValid:false};const config=(0,_extendSchema.extendSchemaImpl)(emptySchemaConfig,documentAST,options);if(config.astNode==null){for(const type of config.types){switch(type.name){case"Query":config.query=type;break;case"Mutation":config.mutation=type;break;case"Subscription":config.subscription=type;break}}}const directives=[...config.directives,..._directives.specifiedDirectives.filter(stdDirective=>config.directives.every(directive=>directive.name!==stdDirective.name))];return new _schema.GraphQLSchema({...config,directives:directives})}function buildSchema(source,options){const document=(0,_parser.parse)(source,{noLocation:options===null||options===void 0?void 0:options.noLocation,allowLegacyFragmentVariables:options===null||options===void 0?void 0:options.allowLegacyFragmentVariables});return buildASTSchema(document,{assumeValidSDL:options===null||options===void 0?void 0:options.assumeValidSDL,assumeValid:options===null||options===void 0?void 0:options.assumeValid})}},{"../jsutils/devAssert.mjs":348,"../language/kinds.mjs":375,"../language/parser.mjs":378,"../type/directives.mjs":388,"../type/schema.mjs":392,"../validation/validate.mjs":456,"./extendSchema.mjs":401}],398:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildClientSchema=buildClientSchema;var _devAssert=require("../jsutils/devAssert.mjs");var _inspect=require("../jsutils/inspect.mjs");var _isObjectLike=require("../jsutils/isObjectLike.mjs");var _keyValMap=require("../jsutils/keyValMap.mjs");var _parser=require("../language/parser.mjs");var _definition=require("../type/definition.mjs");var _directives=require("../type/directives.mjs");var _introspection=require("../type/introspection.mjs");var _scalars=require("../type/scalars.mjs");var _schema=require("../type/schema.mjs");var _valueFromAST=require("./valueFromAST.mjs");function buildClientSchema(introspection,options){(0,_isObjectLike.isObjectLike)(introspection)&&(0,_isObjectLike.isObjectLike)(introspection.__schema)||(0,_devAssert.devAssert)(false,`Invalid or incomplete introspection result. Ensure that you are passing "data" property of introspection response and no "errors" was returned alongside: ${(0,_inspect.inspect)(introspection)}.`);const schemaIntrospection=introspection.__schema;const typeMap=(0,_keyValMap.keyValMap)(schemaIntrospection.types,typeIntrospection=>typeIntrospection.name,typeIntrospection=>buildType(typeIntrospection));for(const stdType of[..._scalars.specifiedScalarTypes,..._introspection.introspectionTypes]){if(typeMap[stdType.name]){typeMap[stdType.name]=stdType}}const queryType=schemaIntrospection.queryType?getObjectType(schemaIntrospection.queryType):null;const mutationType=schemaIntrospection.mutationType?getObjectType(schemaIntrospection.mutationType):null;const subscriptionType=schemaIntrospection.subscriptionType?getObjectType(schemaIntrospection.subscriptionType):null;const directives=schemaIntrospection.directives?schemaIntrospection.directives.map(buildDirective):[];return new _schema.GraphQLSchema({description:schemaIntrospection.description,query:queryType,mutation:mutationType,subscription:subscriptionType,types:Object.values(typeMap),directives:directives,assumeValid:options===null||options===void 0?void 0:options.assumeValid});function getType(typeRef){if(typeRef.kind===_introspection.TypeKind.LIST){const itemRef=typeRef.ofType;if(!itemRef){throw new Error("Decorated type deeper than introspection query.")}return new _definition.GraphQLList(getType(itemRef))}if(typeRef.kind===_introspection.TypeKind.NON_NULL){const nullableRef=typeRef.ofType;if(!nullableRef){throw new Error("Decorated type deeper than introspection query.")}const nullableType=getType(nullableRef);return new _definition.GraphQLNonNull((0,_definition.assertNullableType)(nullableType))}return getNamedType(typeRef)}function getNamedType(typeRef){const typeName=typeRef.name;if(!typeName){throw new Error(`Unknown type reference: ${(0,_inspect.inspect)(typeRef)}.`)}const type=typeMap[typeName];if(!type){throw new Error(`Invalid or incomplete schema, unknown type: ${typeName}. Ensure that a full introspection query is used in order to build a client schema.`)}return type}function getObjectType(typeRef){return(0,_definition.assertObjectType)(getNamedType(typeRef))}function getInterfaceType(typeRef){return(0,_definition.assertInterfaceType)(getNamedType(typeRef))}function buildType(type){if(type!=null&&type.name!=null&&type.kind!=null){switch(type.kind){case _introspection.TypeKind.SCALAR:return buildScalarDef(type);case _introspection.TypeKind.OBJECT:return buildObjectDef(type);case _introspection.TypeKind.INTERFACE:return buildInterfaceDef(type);case _introspection.TypeKind.UNION:return buildUnionDef(type);case _introspection.TypeKind.ENUM:return buildEnumDef(type);case _introspection.TypeKind.INPUT_OBJECT:return buildInputObjectDef(type)}}const typeStr=(0,_inspect.inspect)(type);throw new Error(`Invalid or incomplete introspection result. Ensure that a full introspection query is used in order to build a client schema: ${typeStr}.`)}function buildScalarDef(scalarIntrospection){return new _definition.GraphQLScalarType({name:scalarIntrospection.name,description:scalarIntrospection.description,specifiedByURL:scalarIntrospection.specifiedByURL})}function buildImplementationsList(implementingIntrospection){if(implementingIntrospection.interfaces===null&&implementingIntrospection.kind===_introspection.TypeKind.INTERFACE){return[]}if(!implementingIntrospection.interfaces){const implementingIntrospectionStr=(0,_inspect.inspect)(implementingIntrospection);throw new Error(`Introspection result missing interfaces: ${implementingIntrospectionStr}.`)}return implementingIntrospection.interfaces.map(getInterfaceType)}function buildObjectDef(objectIntrospection){return new _definition.GraphQLObjectType({name:objectIntrospection.name,description:objectIntrospection.description,interfaces:()=>buildImplementationsList(objectIntrospection),fields:()=>buildFieldDefMap(objectIntrospection)})}function buildInterfaceDef(interfaceIntrospection){return new _definition.GraphQLInterfaceType({name:interfaceIntrospection.name,description:interfaceIntrospection.description,interfaces:()=>buildImplementationsList(interfaceIntrospection),fields:()=>buildFieldDefMap(interfaceIntrospection)})}function buildUnionDef(unionIntrospection){if(!unionIntrospection.possibleTypes){const unionIntrospectionStr=(0,_inspect.inspect)(unionIntrospection);throw new Error(`Introspection result missing possibleTypes: ${unionIntrospectionStr}.`)}return new _definition.GraphQLUnionType({name:unionIntrospection.name,description:unionIntrospection.description,types:()=>unionIntrospection.possibleTypes.map(getObjectType)})}function buildEnumDef(enumIntrospection){if(!enumIntrospection.enumValues){const enumIntrospectionStr=(0,_inspect.inspect)(enumIntrospection);throw new Error(`Introspection result missing enumValues: ${enumIntrospectionStr}.`)}return new _definition.GraphQLEnumType({name:enumIntrospection.name,description:enumIntrospection.description,values:(0,_keyValMap.keyValMap)(enumIntrospection.enumValues,valueIntrospection=>valueIntrospection.name,valueIntrospection=>({description:valueIntrospection.description,deprecationReason:valueIntrospection.deprecationReason}))})}function buildInputObjectDef(inputObjectIntrospection){if(!inputObjectIntrospection.inputFields){const inputObjectIntrospectionStr=(0,_inspect.inspect)(inputObjectIntrospection);throw new Error(`Introspection result missing inputFields: ${inputObjectIntrospectionStr}.`)}return new _definition.GraphQLInputObjectType({name:inputObjectIntrospection.name,description:inputObjectIntrospection.description,fields:()=>buildInputValueDefMap(inputObjectIntrospection.inputFields)})}function buildFieldDefMap(typeIntrospection){if(!typeIntrospection.fields){throw new Error(`Introspection result missing fields: ${(0,_inspect.inspect)(typeIntrospection)}.`)}return(0,_keyValMap.keyValMap)(typeIntrospection.fields,fieldIntrospection=>fieldIntrospection.name,buildField)}function buildField(fieldIntrospection){const type=getType(fieldIntrospection.type);if(!(0,_definition.isOutputType)(type)){const typeStr=(0,_inspect.inspect)(type);throw new Error(`Introspection must provide output type for fields, but received: ${typeStr}.`)}if(!fieldIntrospection.args){const fieldIntrospectionStr=(0,_inspect.inspect)(fieldIntrospection);throw new Error(`Introspection result missing field args: ${fieldIntrospectionStr}.`)}return{description:fieldIntrospection.description,deprecationReason:fieldIntrospection.deprecationReason,type:type,args:buildInputValueDefMap(fieldIntrospection.args)}}function buildInputValueDefMap(inputValueIntrospections){return(0,_keyValMap.keyValMap)(inputValueIntrospections,inputValue=>inputValue.name,buildInputValue)}function buildInputValue(inputValueIntrospection){const type=getType(inputValueIntrospection.type);if(!(0,_definition.isInputType)(type)){const typeStr=(0,_inspect.inspect)(type);throw new Error(`Introspection must provide input type for arguments, but received: ${typeStr}.`)}const defaultValue=inputValueIntrospection.defaultValue!=null?(0,_valueFromAST.valueFromAST)((0,_parser.parseValue)(inputValueIntrospection.defaultValue),type):undefined;return{description:inputValueIntrospection.description,type:type,defaultValue:defaultValue,deprecationReason:inputValueIntrospection.deprecationReason}}function buildDirective(directiveIntrospection){if(!directiveIntrospection.args){const directiveIntrospectionStr=(0,_inspect.inspect)(directiveIntrospection);throw new Error(`Introspection result missing directive args: ${directiveIntrospectionStr}.`)}if(!directiveIntrospection.locations){const directiveIntrospectionStr=(0,_inspect.inspect)(directiveIntrospection);throw new Error(`Introspection result missing directive locations: ${directiveIntrospectionStr}.`)}return new _directives.GraphQLDirective({name:directiveIntrospection.name,description:directiveIntrospection.description,isRepeatable:directiveIntrospection.isRepeatable,locations:directiveIntrospection.locations.slice(),args:buildInputValueDefMap(directiveIntrospection.args)})}}},{"../jsutils/devAssert.mjs":348,"../jsutils/inspect.mjs":352,"../jsutils/isObjectLike.mjs":357,"../jsutils/keyValMap.mjs":360,"../language/parser.mjs":378,"../type/definition.mjs":387,"../type/directives.mjs":388,"../type/introspection.mjs":390,"../type/scalars.mjs":391,"../type/schema.mjs":392,"./valueFromAST.mjs":415}],399:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.coerceInputValue=coerceInputValue;var _didYouMean=require("../jsutils/didYouMean.mjs");var _inspect=require("../jsutils/inspect.mjs");var _invariant=require("../jsutils/invariant.mjs");var _isIterableObject=require("../jsutils/isIterableObject.mjs");var _isObjectLike=require("../jsutils/isObjectLike.mjs");var _Path=require("../jsutils/Path.mjs");var _printPathArray=require("../jsutils/printPathArray.mjs");var _suggestionList=require("../jsutils/suggestionList.mjs");var _GraphQLError=require("../error/GraphQLError.mjs");var _definition=require("../type/definition.mjs");function coerceInputValue(inputValue,type,onError=defaultOnError){return coerceInputValueImpl(inputValue,type,onError,undefined)}function defaultOnError(path,invalidValue,error){let errorPrefix="Invalid value "+(0,_inspect.inspect)(invalidValue);if(path.length>0){errorPrefix+=` at "value${(0,_printPathArray.printPathArray)(path)}"`}error.message=errorPrefix+": "+error.message;throw error}function coerceInputValueImpl(inputValue,type,onError,path){if((0,_definition.isNonNullType)(type)){if(inputValue!=null){return coerceInputValueImpl(inputValue,type.ofType,onError,path)}onError((0,_Path.pathToArray)(path),inputValue,new _GraphQLError.GraphQLError(`Expected non-nullable type "${(0,_inspect.inspect)(type)}" not to be null.`));return}if(inputValue==null){return null}if((0,_definition.isListType)(type)){const itemType=type.ofType;if((0,_isIterableObject.isIterableObject)(inputValue)){return Array.from(inputValue,(itemValue,index)=>{const itemPath=(0,_Path.addPath)(path,index,undefined);return coerceInputValueImpl(itemValue,itemType,onError,itemPath)})}return[coerceInputValueImpl(inputValue,itemType,onError,path)]}if((0,_definition.isInputObjectType)(type)){if(!(0,_isObjectLike.isObjectLike)(inputValue)){onError((0,_Path.pathToArray)(path),inputValue,new _GraphQLError.GraphQLError(`Expected type "${type.name}" to be an object.`));return}const coercedValue={};const fieldDefs=type.getFields();for(const field of Object.values(fieldDefs)){const fieldValue=inputValue[field.name];if(fieldValue===undefined){if(field.defaultValue!==undefined){coercedValue[field.name]=field.defaultValue}else if((0,_definition.isNonNullType)(field.type)){const typeStr=(0,_inspect.inspect)(field.type);onError((0,_Path.pathToArray)(path),inputValue,new _GraphQLError.GraphQLError(`Field "${field.name}" of required type "${typeStr}" was not provided.`))}continue}coercedValue[field.name]=coerceInputValueImpl(fieldValue,field.type,onError,(0,_Path.addPath)(path,field.name,type.name))}for(const fieldName of Object.keys(inputValue)){if(!fieldDefs[fieldName]){const suggestions=(0,_suggestionList.suggestionList)(fieldName,Object.keys(type.getFields()));onError((0,_Path.pathToArray)(path),inputValue,new _GraphQLError.GraphQLError(`Field "${fieldName}" is not defined by type "${type.name}".`+(0,_didYouMean.didYouMean)(suggestions)))}}return coercedValue}if((0,_definition.isLeafType)(type)){let parseResult;try{parseResult=type.parseValue(inputValue)}catch(error){if(error instanceof _GraphQLError.GraphQLError){onError((0,_Path.pathToArray)(path),inputValue,error)}else{onError((0,_Path.pathToArray)(path),inputValue,new _GraphQLError.GraphQLError(`Expected type "${type.name}". `+error.message,{originalError:error}))}return}if(parseResult===undefined){onError((0,_Path.pathToArray)(path),inputValue,new _GraphQLError.GraphQLError(`Expected type "${type.name}".`))}return parseResult}false||(0,_invariant.invariant)(false,"Unexpected input type: "+(0,_inspect.inspect)(type))}},{"../error/GraphQLError.mjs":335,"../jsutils/Path.mjs":347,"../jsutils/didYouMean.mjs":349,"../jsutils/inspect.mjs":352,"../jsutils/invariant.mjs":354,"../jsutils/isIterableObject.mjs":356,"../jsutils/isObjectLike.mjs":357,"../jsutils/printPathArray.mjs":364,"../jsutils/suggestionList.mjs":367,"../type/definition.mjs":387}],400:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.concatAST=concatAST;var _kinds=require("../language/kinds.mjs");function concatAST(documents){const definitions=[];for(const doc of documents){definitions.push(...doc.definitions)}return{kind:_kinds.Kind.DOCUMENT,definitions:definitions}}},{"../language/kinds.mjs":375}],401:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extendSchema=extendSchema;exports.extendSchemaImpl=extendSchemaImpl;var _devAssert=require("../jsutils/devAssert.mjs");var _inspect=require("../jsutils/inspect.mjs");var _invariant=require("../jsutils/invariant.mjs");var _keyMap=require("../jsutils/keyMap.mjs");var _mapValue=require("../jsutils/mapValue.mjs");var _kinds=require("../language/kinds.mjs");var _predicates=require("../language/predicates.mjs");var _definition=require("../type/definition.mjs");var _directives=require("../type/directives.mjs");var _introspection=require("../type/introspection.mjs");var _scalars=require("../type/scalars.mjs");var _schema=require("../type/schema.mjs");var _validate=require("../validation/validate.mjs");var _values=require("../execution/values.mjs");var _valueFromAST=require("./valueFromAST.mjs");function extendSchema(schema,documentAST,options){(0,_schema.assertSchema)(schema);documentAST!=null&&documentAST.kind===_kinds.Kind.DOCUMENT||(0,_devAssert.devAssert)(false,"Must provide valid Document AST.");if((options===null||options===void 0?void 0:options.assumeValid)!==true&&(options===null||options===void 0?void 0:options.assumeValidSDL)!==true){(0,_validate.assertValidSDLExtension)(documentAST,schema)}const schemaConfig=schema.toConfig();const extendedConfig=extendSchemaImpl(schemaConfig,documentAST,options);return schemaConfig===extendedConfig?schema:new _schema.GraphQLSchema(extendedConfig)}function extendSchemaImpl(schemaConfig,documentAST,options){var _schemaDef,_schemaDef$descriptio,_schemaDef2,_options$assumeValid;const typeDefs=[];const typeExtensionsMap=Object.create(null);const directiveDefs=[];let schemaDef;const schemaExtensions=[];for(const def of documentAST.definitions){if(def.kind===_kinds.Kind.SCHEMA_DEFINITION){schemaDef=def}else if(def.kind===_kinds.Kind.SCHEMA_EXTENSION){schemaExtensions.push(def)}else if((0,_predicates.isTypeDefinitionNode)(def)){typeDefs.push(def)}else if((0,_predicates.isTypeExtensionNode)(def)){const extendedTypeName=def.name.value;const existingTypeExtensions=typeExtensionsMap[extendedTypeName];typeExtensionsMap[extendedTypeName]=existingTypeExtensions?existingTypeExtensions.concat([def]):[def]}else if(def.kind===_kinds.Kind.DIRECTIVE_DEFINITION){directiveDefs.push(def)}}if(Object.keys(typeExtensionsMap).length===0&&typeDefs.length===0&&directiveDefs.length===0&&schemaExtensions.length===0&&schemaDef==null){return schemaConfig}const typeMap=Object.create(null);for(const existingType of schemaConfig.types){typeMap[existingType.name]=extendNamedType(existingType)}for(const typeNode of typeDefs){var _stdTypeMap$name;const name=typeNode.name.value;typeMap[name]=(_stdTypeMap$name=stdTypeMap[name])!==null&&_stdTypeMap$name!==void 0?_stdTypeMap$name:buildType(typeNode)}const operationTypes={query:schemaConfig.query&&replaceNamedType(schemaConfig.query),mutation:schemaConfig.mutation&&replaceNamedType(schemaConfig.mutation),subscription:schemaConfig.subscription&&replaceNamedType(schemaConfig.subscription),...schemaDef&&getOperationTypes([schemaDef]),...getOperationTypes(schemaExtensions)};return{description:(_schemaDef=schemaDef)===null||_schemaDef===void 0?void 0:(_schemaDef$descriptio=_schemaDef.description)===null||_schemaDef$descriptio===void 0?void 0:_schemaDef$descriptio.value,...operationTypes,types:Object.values(typeMap),directives:[...schemaConfig.directives.map(replaceDirective),...directiveDefs.map(buildDirective)],extensions:Object.create(null),astNode:(_schemaDef2=schemaDef)!==null&&_schemaDef2!==void 0?_schemaDef2:schemaConfig.astNode,extensionASTNodes:schemaConfig.extensionASTNodes.concat(schemaExtensions),assumeValid:(_options$assumeValid=options===null||options===void 0?void 0:options.assumeValid)!==null&&_options$assumeValid!==void 0?_options$assumeValid:false};function replaceType(type){if((0,_definition.isListType)(type)){return new _definition.GraphQLList(replaceType(type.ofType))}if((0,_definition.isNonNullType)(type)){return new _definition.GraphQLNonNull(replaceType(type.ofType))}return replaceNamedType(type)}function replaceNamedType(type){return typeMap[type.name]}function replaceDirective(directive){const config=directive.toConfig();return new _directives.GraphQLDirective({...config,args:(0,_mapValue.mapValue)(config.args,extendArg)})}function extendNamedType(type){if((0,_introspection.isIntrospectionType)(type)||(0,_scalars.isSpecifiedScalarType)(type)){return type}if((0,_definition.isScalarType)(type)){return extendScalarType(type)}if((0,_definition.isObjectType)(type)){return extendObjectType(type)}if((0,_definition.isInterfaceType)(type)){return extendInterfaceType(type)}if((0,_definition.isUnionType)(type)){return extendUnionType(type)}if((0,_definition.isEnumType)(type)){return extendEnumType(type)}if((0,_definition.isInputObjectType)(type)){return extendInputObjectType(type)}false||(0,_invariant.invariant)(false,"Unexpected type: "+(0,_inspect.inspect)(type))}function extendInputObjectType(type){var _typeExtensionsMap$co;const config=type.toConfig();const extensions=(_typeExtensionsMap$co=typeExtensionsMap[config.name])!==null&&_typeExtensionsMap$co!==void 0?_typeExtensionsMap$co:[];return new _definition.GraphQLInputObjectType({...config,fields:()=>({...(0,_mapValue.mapValue)(config.fields,field=>({...field,type:replaceType(field.type)})),...buildInputFieldMap(extensions)}),extensionASTNodes:config.extensionASTNodes.concat(extensions)})}function extendEnumType(type){var _typeExtensionsMap$ty;const config=type.toConfig();const extensions=(_typeExtensionsMap$ty=typeExtensionsMap[type.name])!==null&&_typeExtensionsMap$ty!==void 0?_typeExtensionsMap$ty:[];return new _definition.GraphQLEnumType({...config,values:{...config.values,...buildEnumValueMap(extensions)},extensionASTNodes:config.extensionASTNodes.concat(extensions)})}function extendScalarType(type){var _typeExtensionsMap$co2;const config=type.toConfig();const extensions=(_typeExtensionsMap$co2=typeExtensionsMap[config.name])!==null&&_typeExtensionsMap$co2!==void 0?_typeExtensionsMap$co2:[];let specifiedByURL=config.specifiedByURL;for(const extensionNode of extensions){var _getSpecifiedByURL;specifiedByURL=(_getSpecifiedByURL=getSpecifiedByURL(extensionNode))!==null&&_getSpecifiedByURL!==void 0?_getSpecifiedByURL:specifiedByURL}return new _definition.GraphQLScalarType({...config,specifiedByURL:specifiedByURL,extensionASTNodes:config.extensionASTNodes.concat(extensions)})}function extendObjectType(type){var _typeExtensionsMap$co3;const config=type.toConfig();const extensions=(_typeExtensionsMap$co3=typeExtensionsMap[config.name])!==null&&_typeExtensionsMap$co3!==void 0?_typeExtensionsMap$co3:[];return new _definition.GraphQLObjectType({...config,interfaces:()=>[...type.getInterfaces().map(replaceNamedType),...buildInterfaces(extensions)],fields:()=>({...(0,_mapValue.mapValue)(config.fields,extendField),...buildFieldMap(extensions)}),extensionASTNodes:config.extensionASTNodes.concat(extensions)})}function extendInterfaceType(type){var _typeExtensionsMap$co4;const config=type.toConfig();const extensions=(_typeExtensionsMap$co4=typeExtensionsMap[config.name])!==null&&_typeExtensionsMap$co4!==void 0?_typeExtensionsMap$co4:[];return new _definition.GraphQLInterfaceType({...config,interfaces:()=>[...type.getInterfaces().map(replaceNamedType),...buildInterfaces(extensions)],fields:()=>({...(0,_mapValue.mapValue)(config.fields,extendField),...buildFieldMap(extensions)}),extensionASTNodes:config.extensionASTNodes.concat(extensions)})}function extendUnionType(type){var _typeExtensionsMap$co5;const config=type.toConfig();const extensions=(_typeExtensionsMap$co5=typeExtensionsMap[config.name])!==null&&_typeExtensionsMap$co5!==void 0?_typeExtensionsMap$co5:[];return new _definition.GraphQLUnionType({...config,types:()=>[...type.getTypes().map(replaceNamedType),...buildUnionTypes(extensions)],extensionASTNodes:config.extensionASTNodes.concat(extensions)})}function extendField(field){return{...field,type:replaceType(field.type),args:field.args&&(0,_mapValue.mapValue)(field.args,extendArg)}}function extendArg(arg){return{...arg,type:replaceType(arg.type)}}function getOperationTypes(nodes){const opTypes={};for(const node of nodes){var _node$operationTypes;const operationTypesNodes=(_node$operationTypes=node.operationTypes)!==null&&_node$operationTypes!==void 0?_node$operationTypes:[];for(const operationType of operationTypesNodes){opTypes[operationType.operation]=getNamedType(operationType.type)}}return opTypes}function getNamedType(node){var _stdTypeMap$name2;const name=node.name.value;const type=(_stdTypeMap$name2=stdTypeMap[name])!==null&&_stdTypeMap$name2!==void 0?_stdTypeMap$name2:typeMap[name];if(type===undefined){throw new Error(`Unknown type: "${name}".`)}return type}function getWrappedType(node){if(node.kind===_kinds.Kind.LIST_TYPE){return new _definition.GraphQLList(getWrappedType(node.type))}if(node.kind===_kinds.Kind.NON_NULL_TYPE){return new _definition.GraphQLNonNull(getWrappedType(node.type))}return getNamedType(node)}function buildDirective(node){var _node$description;return new _directives.GraphQLDirective({name:node.name.value,description:(_node$description=node.description)===null||_node$description===void 0?void 0:_node$description.value,locations:node.locations.map(({value})=>value),isRepeatable:node.repeatable,args:buildArgumentMap(node.arguments),astNode:node})}function buildFieldMap(nodes){const fieldConfigMap=Object.create(null);for(const node of nodes){var _node$fields;const nodeFields=(_node$fields=node.fields)!==null&&_node$fields!==void 0?_node$fields:[];for(const field of nodeFields){var _field$description;fieldConfigMap[field.name.value]={type:getWrappedType(field.type),description:(_field$description=field.description)===null||_field$description===void 0?void 0:_field$description.value,args:buildArgumentMap(field.arguments),deprecationReason:getDeprecationReason(field),astNode:field}}}return fieldConfigMap}function buildArgumentMap(args){const argsNodes=args!==null&&args!==void 0?args:[];const argConfigMap=Object.create(null);for(const arg of argsNodes){var _arg$description;const type=getWrappedType(arg.type);argConfigMap[arg.name.value]={type:type,description:(_arg$description=arg.description)===null||_arg$description===void 0?void 0:_arg$description.value,defaultValue:(0,_valueFromAST.valueFromAST)(arg.defaultValue,type),deprecationReason:getDeprecationReason(arg),astNode:arg}}return argConfigMap}function buildInputFieldMap(nodes){const inputFieldMap=Object.create(null);for(const node of nodes){var _node$fields2;const fieldsNodes=(_node$fields2=node.fields)!==null&&_node$fields2!==void 0?_node$fields2:[];for(const field of fieldsNodes){var _field$description2;const type=getWrappedType(field.type);inputFieldMap[field.name.value]={type:type,description:(_field$description2=field.description)===null||_field$description2===void 0?void 0:_field$description2.value,defaultValue:(0,_valueFromAST.valueFromAST)(field.defaultValue,type),deprecationReason:getDeprecationReason(field),astNode:field}}}return inputFieldMap}function buildEnumValueMap(nodes){const enumValueMap=Object.create(null);for(const node of nodes){var _node$values;const valuesNodes=(_node$values=node.values)!==null&&_node$values!==void 0?_node$values:[];for(const value of valuesNodes){var _value$description;enumValueMap[value.name.value]={description:(_value$description=value.description)===null||_value$description===void 0?void 0:_value$description.value,deprecationReason:getDeprecationReason(value),astNode:value}}}return enumValueMap}function buildInterfaces(nodes){return nodes.flatMap(node=>{var _node$interfaces$map,_node$interfaces;return(_node$interfaces$map=(_node$interfaces=node.interfaces)===null||_node$interfaces===void 0?void 0:_node$interfaces.map(getNamedType))!==null&&_node$interfaces$map!==void 0?_node$interfaces$map:[]})}function buildUnionTypes(nodes){return nodes.flatMap(node=>{var _node$types$map,_node$types;return(_node$types$map=(_node$types=node.types)===null||_node$types===void 0?void 0:_node$types.map(getNamedType))!==null&&_node$types$map!==void 0?_node$types$map:[]})}function buildType(astNode){var _typeExtensionsMap$na;const name=astNode.name.value;const extensionASTNodes=(_typeExtensionsMap$na=typeExtensionsMap[name])!==null&&_typeExtensionsMap$na!==void 0?_typeExtensionsMap$na:[];switch(astNode.kind){case _kinds.Kind.OBJECT_TYPE_DEFINITION:{var _astNode$description;const allNodes=[astNode,...extensionASTNodes];return new _definition.GraphQLObjectType({name:name,description:(_astNode$description=astNode.description)===null||_astNode$description===void 0?void 0:_astNode$description.value,interfaces:()=>buildInterfaces(allNodes),fields:()=>buildFieldMap(allNodes),astNode:astNode,extensionASTNodes:extensionASTNodes})}case _kinds.Kind.INTERFACE_TYPE_DEFINITION:{var _astNode$description2;const allNodes=[astNode,...extensionASTNodes];return new _definition.GraphQLInterfaceType({name:name,description:(_astNode$description2=astNode.description)===null||_astNode$description2===void 0?void 0:_astNode$description2.value,interfaces:()=>buildInterfaces(allNodes),fields:()=>buildFieldMap(allNodes),astNode:astNode,extensionASTNodes:extensionASTNodes})}case _kinds.Kind.ENUM_TYPE_DEFINITION:{var _astNode$description3;const allNodes=[astNode,...extensionASTNodes];return new _definition.GraphQLEnumType({name:name,description:(_astNode$description3=astNode.description)===null||_astNode$description3===void 0?void 0:_astNode$description3.value,values:buildEnumValueMap(allNodes),astNode:astNode,extensionASTNodes:extensionASTNodes})}case _kinds.Kind.UNION_TYPE_DEFINITION:{var _astNode$description4;const allNodes=[astNode,...extensionASTNodes];return new _definition.GraphQLUnionType({name:name,description:(_astNode$description4=astNode.description)===null||_astNode$description4===void 0?void 0:_astNode$description4.value,types:()=>buildUnionTypes(allNodes),astNode:astNode,extensionASTNodes:extensionASTNodes})}case _kinds.Kind.SCALAR_TYPE_DEFINITION:{var _astNode$description5;return new _definition.GraphQLScalarType({name:name,description:(_astNode$description5=astNode.description)===null||_astNode$description5===void 0?void 0:_astNode$description5.value,specifiedByURL:getSpecifiedByURL(astNode),astNode:astNode,extensionASTNodes:extensionASTNodes})}case _kinds.Kind.INPUT_OBJECT_TYPE_DEFINITION:{var _astNode$description6;const allNodes=[astNode,...extensionASTNodes];return new _definition.GraphQLInputObjectType({name:name,description:(_astNode$description6=astNode.description)===null||_astNode$description6===void 0?void 0:_astNode$description6.value,fields:()=>buildInputFieldMap(allNodes),astNode:astNode,extensionASTNodes:extensionASTNodes})}}}}const stdTypeMap=(0,_keyMap.keyMap)([..._scalars.specifiedScalarTypes,..._introspection.introspectionTypes],type=>type.name);function getDeprecationReason(node){const deprecated=(0,_values.getDirectiveValues)(_directives.GraphQLDeprecatedDirective,node);return deprecated===null||deprecated===void 0?void 0:deprecated.reason}function getSpecifiedByURL(node){const specifiedBy=(0,_values.getDirectiveValues)(_directives.GraphQLSpecifiedByDirective,node);return specifiedBy===null||specifiedBy===void 0?void 0:specifiedBy.url}},{"../execution/values.mjs":344,"../jsutils/devAssert.mjs":348,"../jsutils/inspect.mjs":352,"../jsutils/invariant.mjs":354,"../jsutils/keyMap.mjs":359,"../jsutils/mapValue.mjs":361,"../language/kinds.mjs":375,"../language/predicates.mjs":379,"../type/definition.mjs":387,"../type/directives.mjs":388,"../type/introspection.mjs":390,"../type/scalars.mjs":391,"../type/schema.mjs":392,"../validation/validate.mjs":456,"./valueFromAST.mjs":415}],402:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DangerousChangeType=exports.BreakingChangeType=void 0;exports.findBreakingChanges=findBreakingChanges;exports.findDangerousChanges=findDangerousChanges;var _inspect=require("../jsutils/inspect.mjs");var _invariant=require("../jsutils/invariant.mjs");var _keyMap=require("../jsutils/keyMap.mjs");var _printer=require("../language/printer.mjs");var _definition=require("../type/definition.mjs");var _scalars=require("../type/scalars.mjs");var _astFromValue=require("./astFromValue.mjs");var _sortValueNode=require("./sortValueNode.mjs");var BreakingChangeType;exports.BreakingChangeType=BreakingChangeType;(function(BreakingChangeType){BreakingChangeType["TYPE_REMOVED"]="TYPE_REMOVED";BreakingChangeType["TYPE_CHANGED_KIND"]="TYPE_CHANGED_KIND";BreakingChangeType["TYPE_REMOVED_FROM_UNION"]="TYPE_REMOVED_FROM_UNION";BreakingChangeType["VALUE_REMOVED_FROM_ENUM"]="VALUE_REMOVED_FROM_ENUM";BreakingChangeType["REQUIRED_INPUT_FIELD_ADDED"]="REQUIRED_INPUT_FIELD_ADDED";BreakingChangeType["IMPLEMENTED_INTERFACE_REMOVED"]="IMPLEMENTED_INTERFACE_REMOVED";BreakingChangeType["FIELD_REMOVED"]="FIELD_REMOVED";BreakingChangeType["FIELD_CHANGED_KIND"]="FIELD_CHANGED_KIND";BreakingChangeType["REQUIRED_ARG_ADDED"]="REQUIRED_ARG_ADDED";BreakingChangeType["ARG_REMOVED"]="ARG_REMOVED";BreakingChangeType["ARG_CHANGED_KIND"]="ARG_CHANGED_KIND";BreakingChangeType["DIRECTIVE_REMOVED"]="DIRECTIVE_REMOVED";BreakingChangeType["DIRECTIVE_ARG_REMOVED"]="DIRECTIVE_ARG_REMOVED";BreakingChangeType["REQUIRED_DIRECTIVE_ARG_ADDED"]="REQUIRED_DIRECTIVE_ARG_ADDED";BreakingChangeType["DIRECTIVE_REPEATABLE_REMOVED"]="DIRECTIVE_REPEATABLE_REMOVED";BreakingChangeType["DIRECTIVE_LOCATION_REMOVED"]="DIRECTIVE_LOCATION_REMOVED"})(BreakingChangeType||(exports.BreakingChangeType=BreakingChangeType={}));var DangerousChangeType;exports.DangerousChangeType=DangerousChangeType;(function(DangerousChangeType){DangerousChangeType["VALUE_ADDED_TO_ENUM"]="VALUE_ADDED_TO_ENUM";DangerousChangeType["TYPE_ADDED_TO_UNION"]="TYPE_ADDED_TO_UNION";DangerousChangeType["OPTIONAL_INPUT_FIELD_ADDED"]="OPTIONAL_INPUT_FIELD_ADDED";DangerousChangeType["OPTIONAL_ARG_ADDED"]="OPTIONAL_ARG_ADDED";DangerousChangeType["IMPLEMENTED_INTERFACE_ADDED"]="IMPLEMENTED_INTERFACE_ADDED";DangerousChangeType["ARG_DEFAULT_VALUE_CHANGE"]="ARG_DEFAULT_VALUE_CHANGE"})(DangerousChangeType||(exports.DangerousChangeType=DangerousChangeType={}));function findBreakingChanges(oldSchema,newSchema){return findSchemaChanges(oldSchema,newSchema).filter(change=>change.type in BreakingChangeType)}function findDangerousChanges(oldSchema,newSchema){return findSchemaChanges(oldSchema,newSchema).filter(change=>change.type in DangerousChangeType)}function findSchemaChanges(oldSchema,newSchema){return[...findTypeChanges(oldSchema,newSchema),...findDirectiveChanges(oldSchema,newSchema)]}function findDirectiveChanges(oldSchema,newSchema){const schemaChanges=[];const directivesDiff=diff(oldSchema.getDirectives(),newSchema.getDirectives());for(const oldDirective of directivesDiff.removed){schemaChanges.push({type:BreakingChangeType.DIRECTIVE_REMOVED,description:`${oldDirective.name} was removed.`})}for(const[oldDirective,newDirective]of directivesDiff.persisted){const argsDiff=diff(oldDirective.args,newDirective.args);for(const newArg of argsDiff.added){if((0,_definition.isRequiredArgument)(newArg)){schemaChanges.push({type:BreakingChangeType.REQUIRED_DIRECTIVE_ARG_ADDED,description:`A required arg ${newArg.name} on directive ${oldDirective.name} was added.`})}}for(const oldArg of argsDiff.removed){schemaChanges.push({type:BreakingChangeType.DIRECTIVE_ARG_REMOVED,description:`${oldArg.name} was removed from ${oldDirective.name}.`})}if(oldDirective.isRepeatable&&!newDirective.isRepeatable){schemaChanges.push({type:BreakingChangeType.DIRECTIVE_REPEATABLE_REMOVED,description:`Repeatable flag was removed from ${oldDirective.name}.`})}for(const location of oldDirective.locations){if(!newDirective.locations.includes(location)){schemaChanges.push({type:BreakingChangeType.DIRECTIVE_LOCATION_REMOVED,description:`${location} was removed from ${oldDirective.name}.`})}}}return schemaChanges}function findTypeChanges(oldSchema,newSchema){const schemaChanges=[];const typesDiff=diff(Object.values(oldSchema.getTypeMap()),Object.values(newSchema.getTypeMap()));for(const oldType of typesDiff.removed){schemaChanges.push({type:BreakingChangeType.TYPE_REMOVED,description:(0,_scalars.isSpecifiedScalarType)(oldType)?`Standard scalar ${oldType.name} was removed because it is not referenced anymore.`:`${oldType.name} was removed.`})}for(const[oldType,newType]of typesDiff.persisted){if((0,_definition.isEnumType)(oldType)&&(0,_definition.isEnumType)(newType)){schemaChanges.push(...findEnumTypeChanges(oldType,newType))}else if((0,_definition.isUnionType)(oldType)&&(0,_definition.isUnionType)(newType)){schemaChanges.push(...findUnionTypeChanges(oldType,newType))}else if((0,_definition.isInputObjectType)(oldType)&&(0,_definition.isInputObjectType)(newType)){schemaChanges.push(...findInputObjectTypeChanges(oldType,newType))}else if((0,_definition.isObjectType)(oldType)&&(0,_definition.isObjectType)(newType)){schemaChanges.push(...findFieldChanges(oldType,newType),...findImplementedInterfacesChanges(oldType,newType))}else if((0,_definition.isInterfaceType)(oldType)&&(0,_definition.isInterfaceType)(newType)){schemaChanges.push(...findFieldChanges(oldType,newType),...findImplementedInterfacesChanges(oldType,newType))}else if(oldType.constructor!==newType.constructor){schemaChanges.push({type:BreakingChangeType.TYPE_CHANGED_KIND,description:`${oldType.name} changed from `+`${typeKindName(oldType)} to ${typeKindName(newType)}.`})}}return schemaChanges}function findInputObjectTypeChanges(oldType,newType){const schemaChanges=[];const fieldsDiff=diff(Object.values(oldType.getFields()),Object.values(newType.getFields()));for(const newField of fieldsDiff.added){if((0,_definition.isRequiredInputField)(newField)){schemaChanges.push({type:BreakingChangeType.REQUIRED_INPUT_FIELD_ADDED,description:`A required field ${newField.name} on input type ${oldType.name} was added.`})}else{schemaChanges.push({type:DangerousChangeType.OPTIONAL_INPUT_FIELD_ADDED,description:`An optional field ${newField.name} on input type ${oldType.name} was added.`})}}for(const oldField of fieldsDiff.removed){schemaChanges.push({type:BreakingChangeType.FIELD_REMOVED,description:`${oldType.name}.${oldField.name} was removed.`})}for(const[oldField,newField]of fieldsDiff.persisted){const isSafe=isChangeSafeForInputObjectFieldOrFieldArg(oldField.type,newField.type);if(!isSafe){schemaChanges.push({type:BreakingChangeType.FIELD_CHANGED_KIND,description:`${oldType.name}.${oldField.name} changed type from `+`${String(oldField.type)} to ${String(newField.type)}.`})}}return schemaChanges}function findUnionTypeChanges(oldType,newType){const schemaChanges=[];const possibleTypesDiff=diff(oldType.getTypes(),newType.getTypes());for(const newPossibleType of possibleTypesDiff.added){schemaChanges.push({type:DangerousChangeType.TYPE_ADDED_TO_UNION,description:`${newPossibleType.name} was added to union type ${oldType.name}.`})}for(const oldPossibleType of possibleTypesDiff.removed){schemaChanges.push({type:BreakingChangeType.TYPE_REMOVED_FROM_UNION,description:`${oldPossibleType.name} was removed from union type ${oldType.name}.`})}return schemaChanges}function findEnumTypeChanges(oldType,newType){const schemaChanges=[];const valuesDiff=diff(oldType.getValues(),newType.getValues());for(const newValue of valuesDiff.added){schemaChanges.push({type:DangerousChangeType.VALUE_ADDED_TO_ENUM,description:`${newValue.name} was added to enum type ${oldType.name}.`})}for(const oldValue of valuesDiff.removed){schemaChanges.push({type:BreakingChangeType.VALUE_REMOVED_FROM_ENUM,description:`${oldValue.name} was removed from enum type ${oldType.name}.`})}return schemaChanges}function findImplementedInterfacesChanges(oldType,newType){const schemaChanges=[];const interfacesDiff=diff(oldType.getInterfaces(),newType.getInterfaces());for(const newInterface of interfacesDiff.added){schemaChanges.push({type:DangerousChangeType.IMPLEMENTED_INTERFACE_ADDED,description:`${newInterface.name} added to interfaces implemented by ${oldType.name}.`})}for(const oldInterface of interfacesDiff.removed){schemaChanges.push({type:BreakingChangeType.IMPLEMENTED_INTERFACE_REMOVED,description:`${oldType.name} no longer implements interface ${oldInterface.name}.`})}return schemaChanges}function findFieldChanges(oldType,newType){const schemaChanges=[];const fieldsDiff=diff(Object.values(oldType.getFields()),Object.values(newType.getFields()));for(const oldField of fieldsDiff.removed){schemaChanges.push({type:BreakingChangeType.FIELD_REMOVED,description:`${oldType.name}.${oldField.name} was removed.`})}for(const[oldField,newField]of fieldsDiff.persisted){schemaChanges.push(...findArgChanges(oldType,oldField,newField));const isSafe=isChangeSafeForObjectOrInterfaceField(oldField.type,newField.type);if(!isSafe){schemaChanges.push({type:BreakingChangeType.FIELD_CHANGED_KIND,description:`${oldType.name}.${oldField.name} changed type from `+`${String(oldField.type)} to ${String(newField.type)}.`})}}return schemaChanges}function findArgChanges(oldType,oldField,newField){const schemaChanges=[];const argsDiff=diff(oldField.args,newField.args);for(const oldArg of argsDiff.removed){schemaChanges.push({type:BreakingChangeType.ARG_REMOVED,description:`${oldType.name}.${oldField.name} arg ${oldArg.name} was removed.`})}for(const[oldArg,newArg]of argsDiff.persisted){const isSafe=isChangeSafeForInputObjectFieldOrFieldArg(oldArg.type,newArg.type);if(!isSafe){schemaChanges.push({type:BreakingChangeType.ARG_CHANGED_KIND,description:`${oldType.name}.${oldField.name} arg ${oldArg.name} has changed type from `+`${String(oldArg.type)} to ${String(newArg.type)}.`})}else if(oldArg.defaultValue!==undefined){if(newArg.defaultValue===undefined){schemaChanges.push({type:DangerousChangeType.ARG_DEFAULT_VALUE_CHANGE,description:`${oldType.name}.${oldField.name} arg ${oldArg.name} defaultValue was removed.`})}else{const oldValueStr=stringifyValue(oldArg.defaultValue,oldArg.type);const newValueStr=stringifyValue(newArg.defaultValue,newArg.type);if(oldValueStr!==newValueStr){schemaChanges.push({type:DangerousChangeType.ARG_DEFAULT_VALUE_CHANGE,description:`${oldType.name}.${oldField.name} arg ${oldArg.name} has changed defaultValue from ${oldValueStr} to ${newValueStr}.`})}}}}for(const newArg of argsDiff.added){if((0,_definition.isRequiredArgument)(newArg)){schemaChanges.push({type:BreakingChangeType.REQUIRED_ARG_ADDED,description:`A required arg ${newArg.name} on ${oldType.name}.${oldField.name} was added.`})}else{schemaChanges.push({type:DangerousChangeType.OPTIONAL_ARG_ADDED,description:`An optional arg ${newArg.name} on ${oldType.name}.${oldField.name} was added.`})}}return schemaChanges}function isChangeSafeForObjectOrInterfaceField(oldType,newType){if((0,_definition.isListType)(oldType)){return(0,_definition.isListType)(newType)&&isChangeSafeForObjectOrInterfaceField(oldType.ofType,newType.ofType)||(0,_definition.isNonNullType)(newType)&&isChangeSafeForObjectOrInterfaceField(oldType,newType.ofType)}if((0,_definition.isNonNullType)(oldType)){return(0,_definition.isNonNullType)(newType)&&isChangeSafeForObjectOrInterfaceField(oldType.ofType,newType.ofType)}return(0,_definition.isNamedType)(newType)&&oldType.name===newType.name||(0,_definition.isNonNullType)(newType)&&isChangeSafeForObjectOrInterfaceField(oldType,newType.ofType)}function isChangeSafeForInputObjectFieldOrFieldArg(oldType,newType){if((0,_definition.isListType)(oldType)){return(0,_definition.isListType)(newType)&&isChangeSafeForInputObjectFieldOrFieldArg(oldType.ofType,newType.ofType)}if((0,_definition.isNonNullType)(oldType)){return(0,_definition.isNonNullType)(newType)&&isChangeSafeForInputObjectFieldOrFieldArg(oldType.ofType,newType.ofType)||!(0,_definition.isNonNullType)(newType)&&isChangeSafeForInputObjectFieldOrFieldArg(oldType.ofType,newType)}return(0,_definition.isNamedType)(newType)&&oldType.name===newType.name}function typeKindName(type){if((0,_definition.isScalarType)(type)){return"a Scalar type"}if((0,_definition.isObjectType)(type)){return"an Object type"}if((0,_definition.isInterfaceType)(type)){return"an Interface type"}if((0,_definition.isUnionType)(type)){return"a Union type"}if((0,_definition.isEnumType)(type)){return"an Enum type"}if((0,_definition.isInputObjectType)(type)){return"an Input type"}false||(0,_invariant.invariant)(false,"Unexpected type: "+(0,_inspect.inspect)(type))}function stringifyValue(value,type){const ast=(0,_astFromValue.astFromValue)(value,type);ast!=null||(0,_invariant.invariant)(false);return(0,_printer.print)((0,_sortValueNode.sortValueNode)(ast))}function diff(oldArray,newArray){const added=[];const removed=[];const persisted=[];const oldMap=(0,_keyMap.keyMap)(oldArray,({name})=>name);const newMap=(0,_keyMap.keyMap)(newArray,({name})=>name);for(const oldItem of oldArray){const newItem=newMap[oldItem.name];if(newItem===undefined){removed.push(oldItem)}else{persisted.push([oldItem,newItem])}}for(const newItem of newArray){if(oldMap[newItem.name]===undefined){added.push(newItem)}}return{added:added,persisted:persisted,removed:removed}}},{"../jsutils/inspect.mjs":352,"../jsutils/invariant.mjs":354,"../jsutils/keyMap.mjs":359,"../language/printer.mjs":382,"../type/definition.mjs":387,"../type/scalars.mjs":391,"./astFromValue.mjs":396,"./sortValueNode.mjs":411}],403:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getIntrospectionQuery=getIntrospectionQuery;function getIntrospectionQuery(options){const optionsWithDefault={descriptions:true,specifiedByUrl:false,directiveIsRepeatable:false,schemaDescription:false,inputValueDeprecation:false,...options};const descriptions=optionsWithDefault.descriptions?"description":"";const specifiedByUrl=optionsWithDefault.specifiedByUrl?"specifiedByURL":"";const directiveIsRepeatable=optionsWithDefault.directiveIsRepeatable?"isRepeatable":"";const schemaDescription=optionsWithDefault.schemaDescription?descriptions:"";function inputDeprecation(str){return optionsWithDefault.inputValueDeprecation?str:""}return`
    query IntrospectionQuery {
      __schema {
        ${schemaDescription}
        queryType { name }
        mutationType { name }
        subscriptionType { name }
        types {
          ...FullType
        }
        directives {
          name
          ${descriptions}
          ${directiveIsRepeatable}
          locations
          args${inputDeprecation("(includeDeprecated: true)")} {
            ...InputValue
          }
        }
      }
    }

    fragment FullType on __Type {
      kind
      name
      ${descriptions}
      ${specifiedByUrl}
      fields(includeDeprecated: true) {
        name
        ${descriptions}
        args${inputDeprecation("(includeDeprecated: true)")} {
          ...InputValue
        }
        type {
          ...TypeRef
        }
        isDeprecated
        deprecationReason
      }
      inputFields${inputDeprecation("(includeDeprecated: true)")} {
        ...InputValue
      }
      interfaces {
        ...TypeRef
      }
      enumValues(includeDeprecated: true) {
        name
        ${descriptions}
        isDeprecated
        deprecationReason
      }
      possibleTypes {
        ...TypeRef
      }
    }

    fragment InputValue on __InputValue {
      name
      ${descriptions}
      type { ...TypeRef }
      defaultValue
      ${inputDeprecation("isDeprecated")}
      ${inputDeprecation("deprecationReason")}
    }

    fragment TypeRef on __Type {
      kind
      name
      ofType {
        kind
        name
        ofType {
          kind
          name
          ofType {
            kind
            name
            ofType {
              kind
              name
              ofType {
                kind
                name
                ofType {
                  kind
                  name
                  ofType {
                    kind
                    name
                  }
                }
              }
            }
          }
        }
      }
    }
  `}},{}],404:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getOperationAST=getOperationAST;var _kinds=require("../language/kinds.mjs");function getOperationAST(documentAST,operationName){let operation=null;for(const definition of documentAST.definitions){if(definition.kind===_kinds.Kind.OPERATION_DEFINITION){var _definition$name;if(operationName==null){if(operation){return null}operation=definition}else if(((_definition$name=definition.name)===null||_definition$name===void 0?void 0:_definition$name.value)===operationName){return definition}}}return operation}},{"../language/kinds.mjs":375}],405:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getOperationRootType=getOperationRootType;var _GraphQLError=require("../error/GraphQLError.mjs");function getOperationRootType(schema,operation){if(operation.operation==="query"){const queryType=schema.getQueryType();if(!queryType){throw new _GraphQLError.GraphQLError("Schema does not define the required query root type.",{nodes:operation})}return queryType}if(operation.operation==="mutation"){const mutationType=schema.getMutationType();if(!mutationType){throw new _GraphQLError.GraphQLError("Schema is not configured for mutations.",{nodes:operation})}return mutationType}if(operation.operation==="subscription"){const subscriptionType=schema.getSubscriptionType();if(!subscriptionType){throw new _GraphQLError.GraphQLError("Schema is not configured for subscriptions.",{nodes:operation})}return subscriptionType}throw new _GraphQLError.GraphQLError("Can only have query, mutation and subscription operations.",{nodes:operation})}},{"../error/GraphQLError.mjs":335}],406:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"BreakingChangeType",{enumerable:true,get:function(){return _findBreakingChanges.BreakingChangeType}});Object.defineProperty(exports,"DangerousChangeType",{enumerable:true,get:function(){return _findBreakingChanges.DangerousChangeType}});Object.defineProperty(exports,"TypeInfo",{enumerable:true,get:function(){return _TypeInfo.TypeInfo}});Object.defineProperty(exports,"assertValidName",{enumerable:true,get:function(){return _assertValidName.assertValidName}});Object.defineProperty(exports,"astFromValue",{enumerable:true,get:function(){return _astFromValue.astFromValue}});Object.defineProperty(exports,"buildASTSchema",{enumerable:true,get:function(){return _buildASTSchema.buildASTSchema}});Object.defineProperty(exports,"buildClientSchema",{enumerable:true,get:function(){return _buildClientSchema.buildClientSchema}});Object.defineProperty(exports,"buildSchema",{enumerable:true,get:function(){return _buildASTSchema.buildSchema}});Object.defineProperty(exports,"coerceInputValue",{enumerable:true,get:function(){return _coerceInputValue.coerceInputValue}});Object.defineProperty(exports,"concatAST",{enumerable:true,get:function(){return _concatAST.concatAST}});Object.defineProperty(exports,"doTypesOverlap",{enumerable:true,get:function(){return _typeComparators.doTypesOverlap}});Object.defineProperty(exports,"extendSchema",{enumerable:true,get:function(){return _extendSchema.extendSchema}});Object.defineProperty(exports,"findBreakingChanges",{enumerable:true,get:function(){return _findBreakingChanges.findBreakingChanges}});Object.defineProperty(exports,"findDangerousChanges",{enumerable:true,get:function(){return _findBreakingChanges.findDangerousChanges}});Object.defineProperty(exports,"getIntrospectionQuery",{enumerable:true,get:function(){return _getIntrospectionQuery.getIntrospectionQuery}});Object.defineProperty(exports,"getOperationAST",{enumerable:true,get:function(){return _getOperationAST.getOperationAST}});Object.defineProperty(exports,"getOperationRootType",{enumerable:true,get:function(){return _getOperationRootType.getOperationRootType}});Object.defineProperty(exports,"introspectionFromSchema",{enumerable:true,get:function(){return _introspectionFromSchema.introspectionFromSchema}});Object.defineProperty(exports,"isEqualType",{enumerable:true,get:function(){return _typeComparators.isEqualType}});Object.defineProperty(exports,"isTypeSubTypeOf",{enumerable:true,get:function(){return _typeComparators.isTypeSubTypeOf}});Object.defineProperty(exports,"isValidNameError",{enumerable:true,get:function(){return _assertValidName.isValidNameError}});Object.defineProperty(exports,"lexicographicSortSchema",{enumerable:true,get:function(){return _lexicographicSortSchema.lexicographicSortSchema}});Object.defineProperty(exports,"printIntrospectionSchema",{enumerable:true,get:function(){return _printSchema.printIntrospectionSchema}});Object.defineProperty(exports,"printSchema",{enumerable:true,get:function(){return _printSchema.printSchema}});Object.defineProperty(exports,"printType",{enumerable:true,get:function(){return _printSchema.printType}});Object.defineProperty(exports,"separateOperations",{enumerable:true,get:function(){return _separateOperations.separateOperations}});Object.defineProperty(exports,"stripIgnoredCharacters",{enumerable:true,get:function(){return _stripIgnoredCharacters.stripIgnoredCharacters}});Object.defineProperty(exports,"typeFromAST",{enumerable:true,get:function(){return _typeFromAST.typeFromAST}});Object.defineProperty(exports,"valueFromAST",{enumerable:true,get:function(){return _valueFromAST.valueFromAST}});Object.defineProperty(exports,"valueFromASTUntyped",{enumerable:true,get:function(){return _valueFromASTUntyped.valueFromASTUntyped}});Object.defineProperty(exports,"visitWithTypeInfo",{enumerable:true,get:function(){return _TypeInfo.visitWithTypeInfo}});var _getIntrospectionQuery=require("./getIntrospectionQuery.mjs");var _getOperationAST=require("./getOperationAST.mjs");var _getOperationRootType=require("./getOperationRootType.mjs");var _introspectionFromSchema=require("./introspectionFromSchema.mjs");var _buildClientSchema=require("./buildClientSchema.mjs");var _buildASTSchema=require("./buildASTSchema.mjs");var _extendSchema=require("./extendSchema.mjs");var _lexicographicSortSchema=require("./lexicographicSortSchema.mjs");var _printSchema=require("./printSchema.mjs");var _typeFromAST=require("./typeFromAST.mjs");var _valueFromAST=require("./valueFromAST.mjs");var _valueFromASTUntyped=require("./valueFromASTUntyped.mjs");var _astFromValue=require("./astFromValue.mjs");var _TypeInfo=require("./TypeInfo.mjs");var _coerceInputValue=require("./coerceInputValue.mjs");var _concatAST=require("./concatAST.mjs");var _separateOperations=require("./separateOperations.mjs");var _stripIgnoredCharacters=require("./stripIgnoredCharacters.mjs");var _typeComparators=require("./typeComparators.mjs");var _assertValidName=require("./assertValidName.mjs");var _findBreakingChanges=require("./findBreakingChanges.mjs")},{"./TypeInfo.mjs":394,"./assertValidName.mjs":395,"./astFromValue.mjs":396,"./buildASTSchema.mjs":397,"./buildClientSchema.mjs":398,"./coerceInputValue.mjs":399,"./concatAST.mjs":400,"./extendSchema.mjs":401,"./findBreakingChanges.mjs":402,"./getIntrospectionQuery.mjs":403,"./getOperationAST.mjs":404,"./getOperationRootType.mjs":405,"./introspectionFromSchema.mjs":407,"./lexicographicSortSchema.mjs":408,"./printSchema.mjs":409,"./separateOperations.mjs":410,"./stripIgnoredCharacters.mjs":412,"./typeComparators.mjs":413,"./typeFromAST.mjs":414,"./valueFromAST.mjs":415,"./valueFromASTUntyped.mjs":416}],407:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.introspectionFromSchema=introspectionFromSchema;var _invariant=require("../jsutils/invariant.mjs");var _parser=require("../language/parser.mjs");var _execute=require("../execution/execute.mjs");var _getIntrospectionQuery=require("./getIntrospectionQuery.mjs");function introspectionFromSchema(schema,options){const optionsWithDefaults={specifiedByUrl:true,directiveIsRepeatable:true,schemaDescription:true,inputValueDeprecation:true,...options};const document=(0,_parser.parse)((0,_getIntrospectionQuery.getIntrospectionQuery)(optionsWithDefaults));const result=(0,_execute.executeSync)({schema:schema,document:document});!result.errors&&result.data||(0,_invariant.invariant)(false);return result.data}},{"../execution/execute.mjs":340,"../jsutils/invariant.mjs":354,"../language/parser.mjs":378,"./getIntrospectionQuery.mjs":403}],408:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.lexicographicSortSchema=lexicographicSortSchema;var _inspect=require("../jsutils/inspect.mjs");var _invariant=require("../jsutils/invariant.mjs");var _keyValMap=require("../jsutils/keyValMap.mjs");var _naturalCompare=require("../jsutils/naturalCompare.mjs");var _definition=require("../type/definition.mjs");var _directives=require("../type/directives.mjs");var _introspection=require("../type/introspection.mjs");var _schema=require("../type/schema.mjs");function lexicographicSortSchema(schema){const schemaConfig=schema.toConfig();const typeMap=(0,_keyValMap.keyValMap)(sortByName(schemaConfig.types),type=>type.name,sortNamedType);return new _schema.GraphQLSchema({...schemaConfig,types:Object.values(typeMap),directives:sortByName(schemaConfig.directives).map(sortDirective),query:replaceMaybeType(schemaConfig.query),mutation:replaceMaybeType(schemaConfig.mutation),subscription:replaceMaybeType(schemaConfig.subscription)});function replaceType(type){if((0,_definition.isListType)(type)){return new _definition.GraphQLList(replaceType(type.ofType))}else if((0,_definition.isNonNullType)(type)){return new _definition.GraphQLNonNull(replaceType(type.ofType))}return replaceNamedType(type)}function replaceNamedType(type){return typeMap[type.name]}function replaceMaybeType(maybeType){return maybeType&&replaceNamedType(maybeType)}function sortDirective(directive){const config=directive.toConfig();return new _directives.GraphQLDirective({...config,locations:sortBy(config.locations,x=>x),args:sortArgs(config.args)})}function sortArgs(args){return sortObjMap(args,arg=>({...arg,type:replaceType(arg.type)}))}function sortFields(fieldsMap){return sortObjMap(fieldsMap,field=>({...field,type:replaceType(field.type),args:field.args&&sortArgs(field.args)}))}function sortInputFields(fieldsMap){return sortObjMap(fieldsMap,field=>({...field,type:replaceType(field.type)}))}function sortTypes(array){return sortByName(array).map(replaceNamedType)}function sortNamedType(type){if((0,_definition.isScalarType)(type)||(0,_introspection.isIntrospectionType)(type)){return type}if((0,_definition.isObjectType)(type)){const config=type.toConfig();return new _definition.GraphQLObjectType({...config,interfaces:()=>sortTypes(config.interfaces),fields:()=>sortFields(config.fields)})}if((0,_definition.isInterfaceType)(type)){const config=type.toConfig();return new _definition.GraphQLInterfaceType({...config,interfaces:()=>sortTypes(config.interfaces),fields:()=>sortFields(config.fields)})}if((0,_definition.isUnionType)(type)){const config=type.toConfig();return new _definition.GraphQLUnionType({...config,types:()=>sortTypes(config.types)})}if((0,_definition.isEnumType)(type)){const config=type.toConfig();return new _definition.GraphQLEnumType({...config,values:sortObjMap(config.values,value=>value)})}if((0,_definition.isInputObjectType)(type)){const config=type.toConfig();return new _definition.GraphQLInputObjectType({...config,fields:()=>sortInputFields(config.fields)})}false||(0,_invariant.invariant)(false,"Unexpected type: "+(0,_inspect.inspect)(type))}}function sortObjMap(map,sortValueFn){const sortedMap=Object.create(null);for(const key of Object.keys(map).sort(_naturalCompare.naturalCompare)){sortedMap[key]=sortValueFn(map[key])}return sortedMap}function sortByName(array){return sortBy(array,obj=>obj.name)}function sortBy(array,mapToKey){return array.slice().sort((obj1,obj2)=>{const key1=mapToKey(obj1);const key2=mapToKey(obj2);return(0,_naturalCompare.naturalCompare)(key1,key2)})}},{"../jsutils/inspect.mjs":352,"../jsutils/invariant.mjs":354,"../jsutils/keyValMap.mjs":360,"../jsutils/naturalCompare.mjs":363,"../type/definition.mjs":387,"../type/directives.mjs":388,"../type/introspection.mjs":390,"../type/schema.mjs":392}],409:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.printIntrospectionSchema=printIntrospectionSchema;exports.printSchema=printSchema;exports.printType=printType;var _inspect=require("../jsutils/inspect.mjs");var _invariant=require("../jsutils/invariant.mjs");var _blockString=require("../language/blockString.mjs");var _kinds=require("../language/kinds.mjs");var _printer=require("../language/printer.mjs");var _definition=require("../type/definition.mjs");var _directives=require("../type/directives.mjs");var _introspection=require("../type/introspection.mjs");var _scalars=require("../type/scalars.mjs");var _astFromValue=require("./astFromValue.mjs");function printSchema(schema){return printFilteredSchema(schema,n=>!(0,_directives.isSpecifiedDirective)(n),isDefinedType)}function printIntrospectionSchema(schema){return printFilteredSchema(schema,_directives.isSpecifiedDirective,_introspection.isIntrospectionType)}function isDefinedType(type){return!(0,_scalars.isSpecifiedScalarType)(type)&&!(0,_introspection.isIntrospectionType)(type)}function printFilteredSchema(schema,directiveFilter,typeFilter){const directives=schema.getDirectives().filter(directiveFilter);const types=Object.values(schema.getTypeMap()).filter(typeFilter);return[printSchemaDefinition(schema),...directives.map(directive=>printDirective(directive)),...types.map(type=>printType(type))].filter(Boolean).join("\n\n")}function printSchemaDefinition(schema){if(schema.description==null&&isSchemaOfCommonNames(schema)){return}const operationTypes=[];const queryType=schema.getQueryType();if(queryType){operationTypes.push(`  query: ${queryType.name}`)}const mutationType=schema.getMutationType();if(mutationType){operationTypes.push(`  mutation: ${mutationType.name}`)}const subscriptionType=schema.getSubscriptionType();if(subscriptionType){operationTypes.push(`  subscription: ${subscriptionType.name}`)}return printDescription(schema)+`schema {\n${operationTypes.join("\n")}\n}`}function isSchemaOfCommonNames(schema){const queryType=schema.getQueryType();if(queryType&&queryType.name!=="Query"){return false}const mutationType=schema.getMutationType();if(mutationType&&mutationType.name!=="Mutation"){return false}const subscriptionType=schema.getSubscriptionType();if(subscriptionType&&subscriptionType.name!=="Subscription"){return false}return true}function printType(type){if((0,_definition.isScalarType)(type)){return printScalar(type)}if((0,_definition.isObjectType)(type)){return printObject(type)}if((0,_definition.isInterfaceType)(type)){return printInterface(type)}if((0,_definition.isUnionType)(type)){return printUnion(type)}if((0,_definition.isEnumType)(type)){return printEnum(type)}if((0,_definition.isInputObjectType)(type)){return printInputObject(type)}false||(0,_invariant.invariant)(false,"Unexpected type: "+(0,_inspect.inspect)(type))}function printScalar(type){return printDescription(type)+`scalar ${type.name}`+printSpecifiedByURL(type)}function printImplementedInterfaces(type){const interfaces=type.getInterfaces();return interfaces.length?" implements "+interfaces.map(i=>i.name).join(" & "):""}function printObject(type){return printDescription(type)+`type ${type.name}`+printImplementedInterfaces(type)+printFields(type)}function printInterface(type){return printDescription(type)+`interface ${type.name}`+printImplementedInterfaces(type)+printFields(type)}function printUnion(type){const types=type.getTypes();const possibleTypes=types.length?" = "+types.join(" | "):"";return printDescription(type)+"union "+type.name+possibleTypes}function printEnum(type){const values=type.getValues().map((value,i)=>printDescription(value,"  ",!i)+"  "+value.name+printDeprecated(value.deprecationReason));return printDescription(type)+`enum ${type.name}`+printBlock(values)}function printInputObject(type){const fields=Object.values(type.getFields()).map((f,i)=>printDescription(f,"  ",!i)+"  "+printInputValue(f));return printDescription(type)+`input ${type.name}`+printBlock(fields)}function printFields(type){const fields=Object.values(type.getFields()).map((f,i)=>printDescription(f,"  ",!i)+"  "+f.name+printArgs(f.args,"  ")+": "+String(f.type)+printDeprecated(f.deprecationReason));return printBlock(fields)}function printBlock(items){return items.length!==0?" {\n"+items.join("\n")+"\n}":""}function printArgs(args,indentation=""){if(args.length===0){return""}if(args.every(arg=>!arg.description)){return"("+args.map(printInputValue).join(", ")+")"}return"(\n"+args.map((arg,i)=>printDescription(arg,"  "+indentation,!i)+"  "+indentation+printInputValue(arg)).join("\n")+"\n"+indentation+")"}function printInputValue(arg){const defaultAST=(0,_astFromValue.astFromValue)(arg.defaultValue,arg.type);let argDecl=arg.name+": "+String(arg.type);if(defaultAST){argDecl+=` = ${(0,_printer.print)(defaultAST)}`}return argDecl+printDeprecated(arg.deprecationReason)}function printDirective(directive){return printDescription(directive)+"directive @"+directive.name+printArgs(directive.args)+(directive.isRepeatable?" repeatable":"")+" on "+directive.locations.join(" | ")}function printDeprecated(reason){if(reason==null){return""}if(reason!==_directives.DEFAULT_DEPRECATION_REASON){const astValue=(0,_printer.print)({kind:_kinds.Kind.STRING,value:reason});return` @deprecated(reason: ${astValue})`}return" @deprecated"}function printSpecifiedByURL(scalar){if(scalar.specifiedByURL==null){return""}const astValue=(0,_printer.print)({kind:_kinds.Kind.STRING,value:scalar.specifiedByURL});return` @specifiedBy(url: ${astValue})`}function printDescription(def,indentation="",firstInBlock=true){const{description}=def;if(description==null){return""}const blockString=(0,_printer.print)({kind:_kinds.Kind.STRING,value:description,block:(0,_blockString.isPrintableAsBlockString)(description)});const prefix=indentation&&!firstInBlock?"\n"+indentation:indentation;return prefix+blockString.replace(/\n/g,"\n"+indentation)+"\n"}},{"../jsutils/inspect.mjs":352,"../jsutils/invariant.mjs":354,"../language/blockString.mjs":371,"../language/kinds.mjs":375,"../language/printer.mjs":382,"../type/definition.mjs":387,"../type/directives.mjs":388,"../type/introspection.mjs":390,"../type/scalars.mjs":391,"./astFromValue.mjs":396}],410:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.separateOperations=separateOperations;var _kinds=require("../language/kinds.mjs");var _visitor=require("../language/visitor.mjs");function separateOperations(documentAST){const operations=[];const depGraph=Object.create(null);for(const definitionNode of documentAST.definitions){switch(definitionNode.kind){case _kinds.Kind.OPERATION_DEFINITION:operations.push(definitionNode);break;case _kinds.Kind.FRAGMENT_DEFINITION:depGraph[definitionNode.name.value]=collectDependencies(definitionNode.selectionSet);break;default:}}const separatedDocumentASTs=Object.create(null);for(const operation of operations){const dependencies=new Set;for(const fragmentName of collectDependencies(operation.selectionSet)){collectTransitiveDependencies(dependencies,depGraph,fragmentName)}const operationName=operation.name?operation.name.value:"";separatedDocumentASTs[operationName]={kind:_kinds.Kind.DOCUMENT,definitions:documentAST.definitions.filter(node=>node===operation||node.kind===_kinds.Kind.FRAGMENT_DEFINITION&&dependencies.has(node.name.value))}}return separatedDocumentASTs}function collectTransitiveDependencies(collected,depGraph,fromName){if(!collected.has(fromName)){collected.add(fromName);const immediateDeps=depGraph[fromName];if(immediateDeps!==undefined){for(const toName of immediateDeps){collectTransitiveDependencies(collected,depGraph,toName)}}}}function collectDependencies(selectionSet){const dependencies=[];(0,_visitor.visit)(selectionSet,{FragmentSpread(node){dependencies.push(node.name.value)}});return dependencies}},{"../language/kinds.mjs":375,"../language/visitor.mjs":385}],411:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sortValueNode=sortValueNode;var _naturalCompare=require("../jsutils/naturalCompare.mjs");var _kinds=require("../language/kinds.mjs");function sortValueNode(valueNode){switch(valueNode.kind){case _kinds.Kind.OBJECT:return{...valueNode,fields:sortFields(valueNode.fields)};case _kinds.Kind.LIST:return{...valueNode,values:valueNode.values.map(sortValueNode)};case _kinds.Kind.INT:case _kinds.Kind.FLOAT:case _kinds.Kind.STRING:case _kinds.Kind.BOOLEAN:case _kinds.Kind.NULL:case _kinds.Kind.ENUM:case _kinds.Kind.VARIABLE:return valueNode}}function sortFields(fields){return fields.map(fieldNode=>({...fieldNode,value:sortValueNode(fieldNode.value)})).sort((fieldA,fieldB)=>(0,_naturalCompare.naturalCompare)(fieldA.name.value,fieldB.name.value))}},{"../jsutils/naturalCompare.mjs":363,"../language/kinds.mjs":375}],412:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.stripIgnoredCharacters=stripIgnoredCharacters;var _blockString=require("../language/blockString.mjs");var _lexer=require("../language/lexer.mjs");var _source=require("../language/source.mjs");var _tokenKind=require("../language/tokenKind.mjs");function stripIgnoredCharacters(source){const sourceObj=(0,_source.isSource)(source)?source:new _source.Source(source);const body=sourceObj.body;const lexer=new _lexer.Lexer(sourceObj);let strippedBody="";let wasLastAddedTokenNonPunctuator=false;while(lexer.advance().kind!==_tokenKind.TokenKind.EOF){const currentToken=lexer.token;const tokenKind=currentToken.kind;const isNonPunctuator=!(0,_lexer.isPunctuatorTokenKind)(currentToken.kind);if(wasLastAddedTokenNonPunctuator){if(isNonPunctuator||currentToken.kind===_tokenKind.TokenKind.SPREAD){strippedBody+=" "}}const tokenBody=body.slice(currentToken.start,currentToken.end);if(tokenKind===_tokenKind.TokenKind.BLOCK_STRING){strippedBody+=(0,_blockString.printBlockString)(currentToken.value,{minimize:true})}else{strippedBody+=tokenBody}wasLastAddedTokenNonPunctuator=isNonPunctuator}return strippedBody}},{"../language/blockString.mjs":371,"../language/lexer.mjs":376,"../language/source.mjs":383,"../language/tokenKind.mjs":384}],413:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.doTypesOverlap=doTypesOverlap;exports.isEqualType=isEqualType;exports.isTypeSubTypeOf=isTypeSubTypeOf;var _definition=require("../type/definition.mjs");function isEqualType(typeA,typeB){if(typeA===typeB){return true}if((0,_definition.isNonNullType)(typeA)&&(0,_definition.isNonNullType)(typeB)){return isEqualType(typeA.ofType,typeB.ofType)}if((0,_definition.isListType)(typeA)&&(0,_definition.isListType)(typeB)){return isEqualType(typeA.ofType,typeB.ofType)}return false}function isTypeSubTypeOf(schema,maybeSubType,superType){if(maybeSubType===superType){return true}if((0,_definition.isNonNullType)(superType)){if((0,_definition.isNonNullType)(maybeSubType)){return isTypeSubTypeOf(schema,maybeSubType.ofType,superType.ofType)}return false}if((0,_definition.isNonNullType)(maybeSubType)){return isTypeSubTypeOf(schema,maybeSubType.ofType,superType)}if((0,_definition.isListType)(superType)){if((0,_definition.isListType)(maybeSubType)){return isTypeSubTypeOf(schema,maybeSubType.ofType,superType.ofType)}return false}if((0,_definition.isListType)(maybeSubType)){return false}return(0,_definition.isAbstractType)(superType)&&((0,_definition.isInterfaceType)(maybeSubType)||(0,_definition.isObjectType)(maybeSubType))&&schema.isSubType(superType,maybeSubType)}function doTypesOverlap(schema,typeA,typeB){if(typeA===typeB){return true}if((0,_definition.isAbstractType)(typeA)){if((0,_definition.isAbstractType)(typeB)){return schema.getPossibleTypes(typeA).some(type=>schema.isSubType(typeB,type))}return schema.isSubType(typeA,typeB)}if((0,_definition.isAbstractType)(typeB)){return schema.isSubType(typeB,typeA)}return false}},{"../type/definition.mjs":387}],414:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.typeFromAST=typeFromAST;var _kinds=require("../language/kinds.mjs");var _definition=require("../type/definition.mjs");function typeFromAST(schema,typeNode){switch(typeNode.kind){case _kinds.Kind.LIST_TYPE:{const innerType=typeFromAST(schema,typeNode.type);return innerType&&new _definition.GraphQLList(innerType)}case _kinds.Kind.NON_NULL_TYPE:{const innerType=typeFromAST(schema,typeNode.type);return innerType&&new _definition.GraphQLNonNull(innerType)}case _kinds.Kind.NAMED_TYPE:return schema.getType(typeNode.name.value)}}},{"../language/kinds.mjs":375,"../type/definition.mjs":387}],415:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.valueFromAST=valueFromAST;var _inspect=require("../jsutils/inspect.mjs");var _invariant=require("../jsutils/invariant.mjs");var _keyMap=require("../jsutils/keyMap.mjs");var _kinds=require("../language/kinds.mjs");var _definition=require("../type/definition.mjs");function valueFromAST(valueNode,type,variables){if(!valueNode){return}if(valueNode.kind===_kinds.Kind.VARIABLE){const variableName=valueNode.name.value;if(variables==null||variables[variableName]===undefined){return}const variableValue=variables[variableName];if(variableValue===null&&(0,_definition.isNonNullType)(type)){return}return variableValue}if((0,_definition.isNonNullType)(type)){if(valueNode.kind===_kinds.Kind.NULL){return}return valueFromAST(valueNode,type.ofType,variables)}if(valueNode.kind===_kinds.Kind.NULL){return null}if((0,_definition.isListType)(type)){const itemType=type.ofType;if(valueNode.kind===_kinds.Kind.LIST){const coercedValues=[];for(const itemNode of valueNode.values){if(isMissingVariable(itemNode,variables)){if((0,_definition.isNonNullType)(itemType)){return}coercedValues.push(null)}else{const itemValue=valueFromAST(itemNode,itemType,variables);if(itemValue===undefined){return}coercedValues.push(itemValue)}}return coercedValues}const coercedValue=valueFromAST(valueNode,itemType,variables);if(coercedValue===undefined){return}return[coercedValue]}if((0,_definition.isInputObjectType)(type)){if(valueNode.kind!==_kinds.Kind.OBJECT){return}const coercedObj=Object.create(null);const fieldNodes=(0,_keyMap.keyMap)(valueNode.fields,field=>field.name.value);for(const field of Object.values(type.getFields())){const fieldNode=fieldNodes[field.name];if(!fieldNode||isMissingVariable(fieldNode.value,variables)){if(field.defaultValue!==undefined){coercedObj[field.name]=field.defaultValue}else if((0,_definition.isNonNullType)(field.type)){return}continue}const fieldValue=valueFromAST(fieldNode.value,field.type,variables);if(fieldValue===undefined){return}coercedObj[field.name]=fieldValue}return coercedObj}if((0,_definition.isLeafType)(type)){let result;try{result=type.parseLiteral(valueNode,variables)}catch(_error){return}if(result===undefined){return}return result}false||(0,_invariant.invariant)(false,"Unexpected input type: "+(0,_inspect.inspect)(type))}function isMissingVariable(valueNode,variables){return valueNode.kind===_kinds.Kind.VARIABLE&&(variables==null||variables[valueNode.name.value]===undefined)}},{"../jsutils/inspect.mjs":352,"../jsutils/invariant.mjs":354,"../jsutils/keyMap.mjs":359,"../language/kinds.mjs":375,"../type/definition.mjs":387}],416:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.valueFromASTUntyped=valueFromASTUntyped;var _keyValMap=require("../jsutils/keyValMap.mjs");var _kinds=require("../language/kinds.mjs");function valueFromASTUntyped(valueNode,variables){switch(valueNode.kind){case _kinds.Kind.NULL:return null;case _kinds.Kind.INT:return parseInt(valueNode.value,10);case _kinds.Kind.FLOAT:return parseFloat(valueNode.value);case _kinds.Kind.STRING:case _kinds.Kind.ENUM:case _kinds.Kind.BOOLEAN:return valueNode.value;case _kinds.Kind.LIST:return valueNode.values.map(node=>valueFromASTUntyped(node,variables));case _kinds.Kind.OBJECT:return(0,_keyValMap.keyValMap)(valueNode.fields,field=>field.name.value,field=>valueFromASTUntyped(field.value,variables));case _kinds.Kind.VARIABLE:return variables===null||variables===void 0?void 0:variables[valueNode.name.value]}}},{"../jsutils/keyValMap.mjs":360,"../language/kinds.mjs":375}],417:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ValidationContext=exports.SDLValidationContext=exports.ASTValidationContext=void 0;var _kinds=require("../language/kinds.mjs");var _visitor=require("../language/visitor.mjs");var _TypeInfo=require("../utilities/TypeInfo.mjs");class ASTValidationContext{constructor(ast,onError){this._ast=ast;this._fragments=undefined;this._fragmentSpreads=new Map;this._recursivelyReferencedFragments=new Map;this._onError=onError}get[Symbol.toStringTag](){return"ASTValidationContext"}reportError(error){this._onError(error)}getDocument(){return this._ast}getFragment(name){let fragments;if(this._fragments){fragments=this._fragments}else{fragments=Object.create(null);for(const defNode of this.getDocument().definitions){if(defNode.kind===_kinds.Kind.FRAGMENT_DEFINITION){fragments[defNode.name.value]=defNode}}this._fragments=fragments}return fragments[name]}getFragmentSpreads(node){let spreads=this._fragmentSpreads.get(node);if(!spreads){spreads=[];const setsToVisit=[node];let set;while(set=setsToVisit.pop()){for(const selection of set.selections){if(selection.kind===_kinds.Kind.FRAGMENT_SPREAD){spreads.push(selection)}else if(selection.selectionSet){setsToVisit.push(selection.selectionSet)}}}this._fragmentSpreads.set(node,spreads)}return spreads}getRecursivelyReferencedFragments(operation){let fragments=this._recursivelyReferencedFragments.get(operation);if(!fragments){fragments=[];const collectedNames=Object.create(null);const nodesToVisit=[operation.selectionSet];let node;while(node=nodesToVisit.pop()){for(const spread of this.getFragmentSpreads(node)){const fragName=spread.name.value;if(collectedNames[fragName]!==true){collectedNames[fragName]=true;const fragment=this.getFragment(fragName);if(fragment){fragments.push(fragment);nodesToVisit.push(fragment.selectionSet)}}}}this._recursivelyReferencedFragments.set(operation,fragments)}return fragments}}exports.ASTValidationContext=ASTValidationContext;class SDLValidationContext extends ASTValidationContext{constructor(ast,schema,onError){super(ast,onError);this._schema=schema}get[Symbol.toStringTag](){return"SDLValidationContext"}getSchema(){return this._schema}}exports.SDLValidationContext=SDLValidationContext;class ValidationContext extends ASTValidationContext{constructor(schema,ast,typeInfo,onError){super(ast,onError);this._schema=schema;this._typeInfo=typeInfo;this._variableUsages=new Map;this._recursiveVariableUsages=new Map}get[Symbol.toStringTag](){return"ValidationContext"}getSchema(){return this._schema}getVariableUsages(node){let usages=this._variableUsages.get(node);if(!usages){const newUsages=[];const typeInfo=new _TypeInfo.TypeInfo(this._schema);(0,_visitor.visit)(node,(0,_TypeInfo.visitWithTypeInfo)(typeInfo,{VariableDefinition:()=>false,Variable(variable){newUsages.push({node:variable,type:typeInfo.getInputType(),defaultValue:typeInfo.getDefaultValue()})}}));usages=newUsages;this._variableUsages.set(node,usages)}return usages}getRecursiveVariableUsages(operation){let usages=this._recursiveVariableUsages.get(operation);if(!usages){usages=this.getVariableUsages(operation);for(const frag of this.getRecursivelyReferencedFragments(operation)){usages=usages.concat(this.getVariableUsages(frag))}this._recursiveVariableUsages.set(operation,usages)}return usages}getType(){return this._typeInfo.getType()}getParentType(){return this._typeInfo.getParentType()}getInputType(){return this._typeInfo.getInputType()}getParentInputType(){return this._typeInfo.getParentInputType()}getFieldDef(){return this._typeInfo.getFieldDef()}getDirective(){return this._typeInfo.getDirective()}getArgument(){return this._typeInfo.getArgument()}getEnumValue(){return this._typeInfo.getEnumValue()}}exports.ValidationContext=ValidationContext},{"../language/kinds.mjs":375,"../language/visitor.mjs":385,"../utilities/TypeInfo.mjs":394}],418:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ExecutableDefinitionsRule",{enumerable:true,get:function(){return _ExecutableDefinitionsRule.ExecutableDefinitionsRule}});Object.defineProperty(exports,"FieldsOnCorrectTypeRule",{enumerable:true,get:function(){return _FieldsOnCorrectTypeRule.FieldsOnCorrectTypeRule}});Object.defineProperty(exports,"FragmentsOnCompositeTypesRule",{enumerable:true,get:function(){return _FragmentsOnCompositeTypesRule.FragmentsOnCompositeTypesRule}});Object.defineProperty(exports,"KnownArgumentNamesRule",{enumerable:true,get:function(){return _KnownArgumentNamesRule.KnownArgumentNamesRule}});Object.defineProperty(exports,"KnownDirectivesRule",{enumerable:true,get:function(){return _KnownDirectivesRule.KnownDirectivesRule}});Object.defineProperty(exports,"KnownFragmentNamesRule",{enumerable:true,get:function(){return _KnownFragmentNamesRule.KnownFragmentNamesRule}});Object.defineProperty(exports,"KnownTypeNamesRule",{enumerable:true,get:function(){return _KnownTypeNamesRule.KnownTypeNamesRule}});Object.defineProperty(exports,"LoneAnonymousOperationRule",{enumerable:true,get:function(){return _LoneAnonymousOperationRule.LoneAnonymousOperationRule}});Object.defineProperty(exports,"LoneSchemaDefinitionRule",{enumerable:true,get:function(){return _LoneSchemaDefinitionRule.LoneSchemaDefinitionRule}});Object.defineProperty(exports,"NoDeprecatedCustomRule",{enumerable:true,get:function(){return _NoDeprecatedCustomRule.NoDeprecatedCustomRule}});Object.defineProperty(exports,"NoFragmentCyclesRule",{enumerable:true,get:function(){return _NoFragmentCyclesRule.NoFragmentCyclesRule}});Object.defineProperty(exports,"NoSchemaIntrospectionCustomRule",{enumerable:true,get:function(){return _NoSchemaIntrospectionCustomRule.NoSchemaIntrospectionCustomRule}});Object.defineProperty(exports,"NoUndefinedVariablesRule",{enumerable:true,get:function(){return _NoUndefinedVariablesRule.NoUndefinedVariablesRule}});Object.defineProperty(exports,"NoUnusedFragmentsRule",{enumerable:true,get:function(){return _NoUnusedFragmentsRule.NoUnusedFragmentsRule}});Object.defineProperty(exports,"NoUnusedVariablesRule",{enumerable:true,get:function(){return _NoUnusedVariablesRule.NoUnusedVariablesRule}});Object.defineProperty(exports,"OverlappingFieldsCanBeMergedRule",{enumerable:true,get:function(){return _OverlappingFieldsCanBeMergedRule.OverlappingFieldsCanBeMergedRule}});Object.defineProperty(exports,"PossibleFragmentSpreadsRule",{enumerable:true,get:function(){return _PossibleFragmentSpreadsRule.PossibleFragmentSpreadsRule}});Object.defineProperty(exports,"PossibleTypeExtensionsRule",{enumerable:true,get:function(){return _PossibleTypeExtensionsRule.PossibleTypeExtensionsRule}});Object.defineProperty(exports,"ProvidedRequiredArgumentsRule",{enumerable:true,get:function(){return _ProvidedRequiredArgumentsRule.ProvidedRequiredArgumentsRule}});Object.defineProperty(exports,"ScalarLeafsRule",{enumerable:true,get:function(){return _ScalarLeafsRule.ScalarLeafsRule}});Object.defineProperty(exports,"SingleFieldSubscriptionsRule",{enumerable:true,get:function(){return _SingleFieldSubscriptionsRule.SingleFieldSubscriptionsRule}});Object.defineProperty(exports,"UniqueArgumentDefinitionNamesRule",{enumerable:true,get:function(){return _UniqueArgumentDefinitionNamesRule.UniqueArgumentDefinitionNamesRule}});Object.defineProperty(exports,"UniqueArgumentNamesRule",{enumerable:true,get:function(){return _UniqueArgumentNamesRule.UniqueArgumentNamesRule}});Object.defineProperty(exports,"UniqueDirectiveNamesRule",{enumerable:true,get:function(){return _UniqueDirectiveNamesRule.UniqueDirectiveNamesRule}});Object.defineProperty(exports,"UniqueDirectivesPerLocationRule",{enumerable:true,get:function(){return _UniqueDirectivesPerLocationRule.UniqueDirectivesPerLocationRule}});Object.defineProperty(exports,"UniqueEnumValueNamesRule",{enumerable:true,get:function(){return _UniqueEnumValueNamesRule.UniqueEnumValueNamesRule}});Object.defineProperty(exports,"UniqueFieldDefinitionNamesRule",{enumerable:true,get:function(){return _UniqueFieldDefinitionNamesRule.UniqueFieldDefinitionNamesRule}});Object.defineProperty(exports,"UniqueFragmentNamesRule",{enumerable:true,get:function(){return _UniqueFragmentNamesRule.UniqueFragmentNamesRule}});Object.defineProperty(exports,"UniqueInputFieldNamesRule",{enumerable:true,get:function(){return _UniqueInputFieldNamesRule.UniqueInputFieldNamesRule}});Object.defineProperty(exports,"UniqueOperationNamesRule",{enumerable:true,get:function(){return _UniqueOperationNamesRule.UniqueOperationNamesRule}});Object.defineProperty(exports,"UniqueOperationTypesRule",{enumerable:true,get:function(){return _UniqueOperationTypesRule.UniqueOperationTypesRule}});Object.defineProperty(exports,"UniqueTypeNamesRule",{enumerable:true,get:function(){return _UniqueTypeNamesRule.UniqueTypeNamesRule}});Object.defineProperty(exports,"UniqueVariableNamesRule",{enumerable:true,get:function(){return _UniqueVariableNamesRule.UniqueVariableNamesRule}});Object.defineProperty(exports,"ValidationContext",{enumerable:true,get:function(){return _ValidationContext.ValidationContext}});Object.defineProperty(exports,"ValuesOfCorrectTypeRule",{enumerable:true,get:function(){return _ValuesOfCorrectTypeRule.ValuesOfCorrectTypeRule}});Object.defineProperty(exports,"VariablesAreInputTypesRule",{enumerable:true,get:function(){return _VariablesAreInputTypesRule.VariablesAreInputTypesRule}});Object.defineProperty(exports,"VariablesInAllowedPositionRule",{enumerable:true,get:function(){return _VariablesInAllowedPositionRule.VariablesInAllowedPositionRule}});Object.defineProperty(exports,"specifiedRules",{enumerable:true,get:function(){return _specifiedRules.specifiedRules}});Object.defineProperty(exports,"validate",{enumerable:true,get:function(){return _validate.validate}});var _validate=require("./validate.mjs");var _ValidationContext=require("./ValidationContext.mjs");var _specifiedRules=require("./specifiedRules.mjs");var _ExecutableDefinitionsRule=require("./rules/ExecutableDefinitionsRule.mjs");var _FieldsOnCorrectTypeRule=require("./rules/FieldsOnCorrectTypeRule.mjs");var _FragmentsOnCompositeTypesRule=require("./rules/FragmentsOnCompositeTypesRule.mjs");var _KnownArgumentNamesRule=require("./rules/KnownArgumentNamesRule.mjs");var _KnownDirectivesRule=require("./rules/KnownDirectivesRule.mjs");var _KnownFragmentNamesRule=require("./rules/KnownFragmentNamesRule.mjs");var _KnownTypeNamesRule=require("./rules/KnownTypeNamesRule.mjs");var _LoneAnonymousOperationRule=require("./rules/LoneAnonymousOperationRule.mjs");var _NoFragmentCyclesRule=require("./rules/NoFragmentCyclesRule.mjs");var _NoUndefinedVariablesRule=require("./rules/NoUndefinedVariablesRule.mjs");var _NoUnusedFragmentsRule=require("./rules/NoUnusedFragmentsRule.mjs");var _NoUnusedVariablesRule=require("./rules/NoUnusedVariablesRule.mjs");var _OverlappingFieldsCanBeMergedRule=require("./rules/OverlappingFieldsCanBeMergedRule.mjs");var _PossibleFragmentSpreadsRule=require("./rules/PossibleFragmentSpreadsRule.mjs");var _ProvidedRequiredArgumentsRule=require("./rules/ProvidedRequiredArgumentsRule.mjs");var _ScalarLeafsRule=require("./rules/ScalarLeafsRule.mjs");var _SingleFieldSubscriptionsRule=require("./rules/SingleFieldSubscriptionsRule.mjs");var _UniqueArgumentNamesRule=require("./rules/UniqueArgumentNamesRule.mjs");var _UniqueDirectivesPerLocationRule=require("./rules/UniqueDirectivesPerLocationRule.mjs");var _UniqueFragmentNamesRule=require("./rules/UniqueFragmentNamesRule.mjs");var _UniqueInputFieldNamesRule=require("./rules/UniqueInputFieldNamesRule.mjs");var _UniqueOperationNamesRule=require("./rules/UniqueOperationNamesRule.mjs");var _UniqueVariableNamesRule=require("./rules/UniqueVariableNamesRule.mjs");var _ValuesOfCorrectTypeRule=require("./rules/ValuesOfCorrectTypeRule.mjs");var _VariablesAreInputTypesRule=require("./rules/VariablesAreInputTypesRule.mjs");var _VariablesInAllowedPositionRule=require("./rules/VariablesInAllowedPositionRule.mjs");var _LoneSchemaDefinitionRule=require("./rules/LoneSchemaDefinitionRule.mjs");var _UniqueOperationTypesRule=require("./rules/UniqueOperationTypesRule.mjs");var _UniqueTypeNamesRule=require("./rules/UniqueTypeNamesRule.mjs");var _UniqueEnumValueNamesRule=require("./rules/UniqueEnumValueNamesRule.mjs");var _UniqueFieldDefinitionNamesRule=require("./rules/UniqueFieldDefinitionNamesRule.mjs");var _UniqueArgumentDefinitionNamesRule=require("./rules/UniqueArgumentDefinitionNamesRule.mjs");var _UniqueDirectiveNamesRule=require("./rules/UniqueDirectiveNamesRule.mjs");var _PossibleTypeExtensionsRule=require("./rules/PossibleTypeExtensionsRule.mjs");var _NoDeprecatedCustomRule=require("./rules/custom/NoDeprecatedCustomRule.mjs");var _NoSchemaIntrospectionCustomRule=require("./rules/custom/NoSchemaIntrospectionCustomRule.mjs")},{"./ValidationContext.mjs":417,"./rules/ExecutableDefinitionsRule.mjs":419,"./rules/FieldsOnCorrectTypeRule.mjs":420,"./rules/FragmentsOnCompositeTypesRule.mjs":421,"./rules/KnownArgumentNamesRule.mjs":422,"./rules/KnownDirectivesRule.mjs":423,"./rules/KnownFragmentNamesRule.mjs":424,"./rules/KnownTypeNamesRule.mjs":425,"./rules/LoneAnonymousOperationRule.mjs":426,"./rules/LoneSchemaDefinitionRule.mjs":427,"./rules/NoFragmentCyclesRule.mjs":428,"./rules/NoUndefinedVariablesRule.mjs":429,"./rules/NoUnusedFragmentsRule.mjs":430,"./rules/NoUnusedVariablesRule.mjs":431,"./rules/OverlappingFieldsCanBeMergedRule.mjs":432,"./rules/PossibleFragmentSpreadsRule.mjs":433,"./rules/PossibleTypeExtensionsRule.mjs":434,"./rules/ProvidedRequiredArgumentsRule.mjs":435,"./rules/ScalarLeafsRule.mjs":436,"./rules/SingleFieldSubscriptionsRule.mjs":437,"./rules/UniqueArgumentDefinitionNamesRule.mjs":438,"./rules/UniqueArgumentNamesRule.mjs":439,"./rules/UniqueDirectiveNamesRule.mjs":440,"./rules/UniqueDirectivesPerLocationRule.mjs":441,"./rules/UniqueEnumValueNamesRule.mjs":442,"./rules/UniqueFieldDefinitionNamesRule.mjs":443,"./rules/UniqueFragmentNamesRule.mjs":444,"./rules/UniqueInputFieldNamesRule.mjs":445,"./rules/UniqueOperationNamesRule.mjs":446,"./rules/UniqueOperationTypesRule.mjs":447,"./rules/UniqueTypeNamesRule.mjs":448,"./rules/UniqueVariableNamesRule.mjs":449,"./rules/ValuesOfCorrectTypeRule.mjs":450,"./rules/VariablesAreInputTypesRule.mjs":451,"./rules/VariablesInAllowedPositionRule.mjs":452,"./rules/custom/NoDeprecatedCustomRule.mjs":453,"./rules/custom/NoSchemaIntrospectionCustomRule.mjs":454,"./specifiedRules.mjs":455,"./validate.mjs":456}],419:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExecutableDefinitionsRule=ExecutableDefinitionsRule;var _GraphQLError=require("../../error/GraphQLError.mjs");var _kinds=require("../../language/kinds.mjs");var _predicates=require("../../language/predicates.mjs");function ExecutableDefinitionsRule(context){return{Document(node){for(const definition of node.definitions){if(!(0,_predicates.isExecutableDefinitionNode)(definition)){const defName=definition.kind===_kinds.Kind.SCHEMA_DEFINITION||definition.kind===_kinds.Kind.SCHEMA_EXTENSION?"schema":'"'+definition.name.value+'"';context.reportError(new _GraphQLError.GraphQLError(`The ${defName} definition is not executable.`,{nodes:definition}))}}return false}}}},{"../../error/GraphQLError.mjs":335,"../../language/kinds.mjs":375,"../../language/predicates.mjs":379}],420:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldsOnCorrectTypeRule=FieldsOnCorrectTypeRule;var _didYouMean=require("../../jsutils/didYouMean.mjs");var _naturalCompare=require("../../jsutils/naturalCompare.mjs");var _suggestionList=require("../../jsutils/suggestionList.mjs");var _GraphQLError=require("../../error/GraphQLError.mjs");var _definition=require("../../type/definition.mjs");function FieldsOnCorrectTypeRule(context){return{Field(node){const type=context.getParentType();if(type){const fieldDef=context.getFieldDef();if(!fieldDef){const schema=context.getSchema();const fieldName=node.name.value;let suggestion=(0,_didYouMean.didYouMean)("to use an inline fragment on",getSuggestedTypeNames(schema,type,fieldName));if(suggestion===""){suggestion=(0,_didYouMean.didYouMean)(getSuggestedFieldNames(type,fieldName))}context.reportError(new _GraphQLError.GraphQLError(`Cannot query field "${fieldName}" on type "${type.name}".`+suggestion,{nodes:node}))}}}}}function getSuggestedTypeNames(schema,type,fieldName){if(!(0,_definition.isAbstractType)(type)){return[]}const suggestedTypes=new Set;const usageCount=Object.create(null);for(const possibleType of schema.getPossibleTypes(type)){if(!possibleType.getFields()[fieldName]){continue}suggestedTypes.add(possibleType);usageCount[possibleType.name]=1;for(const possibleInterface of possibleType.getInterfaces()){var _usageCount$possibleI;if(!possibleInterface.getFields()[fieldName]){continue}suggestedTypes.add(possibleInterface);usageCount[possibleInterface.name]=((_usageCount$possibleI=usageCount[possibleInterface.name])!==null&&_usageCount$possibleI!==void 0?_usageCount$possibleI:0)+1}}return[...suggestedTypes].sort((typeA,typeB)=>{const usageCountDiff=usageCount[typeB.name]-usageCount[typeA.name];if(usageCountDiff!==0){return usageCountDiff}if((0,_definition.isInterfaceType)(typeA)&&schema.isSubType(typeA,typeB)){return-1}if((0,_definition.isInterfaceType)(typeB)&&schema.isSubType(typeB,typeA)){return 1}return(0,_naturalCompare.naturalCompare)(typeA.name,typeB.name)}).map(x=>x.name)}function getSuggestedFieldNames(type,fieldName){if((0,_definition.isObjectType)(type)||(0,_definition.isInterfaceType)(type)){const possibleFieldNames=Object.keys(type.getFields());return(0,_suggestionList.suggestionList)(fieldName,possibleFieldNames)}return[]}},{"../../error/GraphQLError.mjs":335,"../../jsutils/didYouMean.mjs":349,"../../jsutils/naturalCompare.mjs":363,"../../jsutils/suggestionList.mjs":367,"../../type/definition.mjs":387}],421:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FragmentsOnCompositeTypesRule=FragmentsOnCompositeTypesRule;var _GraphQLError=require("../../error/GraphQLError.mjs");var _printer=require("../../language/printer.mjs");var _definition=require("../../type/definition.mjs");var _typeFromAST=require("../../utilities/typeFromAST.mjs");function FragmentsOnCompositeTypesRule(context){return{InlineFragment(node){const typeCondition=node.typeCondition;if(typeCondition){const type=(0,_typeFromAST.typeFromAST)(context.getSchema(),typeCondition);if(type&&!(0,_definition.isCompositeType)(type)){const typeStr=(0,_printer.print)(typeCondition);context.reportError(new _GraphQLError.GraphQLError(`Fragment cannot condition on non composite type "${typeStr}".`,{nodes:typeCondition}))}}},FragmentDefinition(node){const type=(0,_typeFromAST.typeFromAST)(context.getSchema(),node.typeCondition);if(type&&!(0,_definition.isCompositeType)(type)){const typeStr=(0,_printer.print)(node.typeCondition);context.reportError(new _GraphQLError.GraphQLError(`Fragment "${node.name.value}" cannot condition on non composite type "${typeStr}".`,{nodes:node.typeCondition}))}}}}},{"../../error/GraphQLError.mjs":335,"../../language/printer.mjs":382,"../../type/definition.mjs":387,"../../utilities/typeFromAST.mjs":414}],422:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KnownArgumentNamesOnDirectivesRule=KnownArgumentNamesOnDirectivesRule;exports.KnownArgumentNamesRule=KnownArgumentNamesRule;var _didYouMean=require("../../jsutils/didYouMean.mjs");var _suggestionList=require("../../jsutils/suggestionList.mjs");var _GraphQLError=require("../../error/GraphQLError.mjs");var _kinds=require("../../language/kinds.mjs");var _directives=require("../../type/directives.mjs");function KnownArgumentNamesRule(context){return{...KnownArgumentNamesOnDirectivesRule(context),Argument(argNode){const argDef=context.getArgument();const fieldDef=context.getFieldDef();const parentType=context.getParentType();if(!argDef&&fieldDef&&parentType){const argName=argNode.name.value;const knownArgsNames=fieldDef.args.map(arg=>arg.name);const suggestions=(0,_suggestionList.suggestionList)(argName,knownArgsNames);context.reportError(new _GraphQLError.GraphQLError(`Unknown argument "${argName}" on field "${parentType.name}.${fieldDef.name}".`+(0,_didYouMean.didYouMean)(suggestions),{nodes:argNode}))}}}}function KnownArgumentNamesOnDirectivesRule(context){const directiveArgs=Object.create(null);const schema=context.getSchema();const definedDirectives=schema?schema.getDirectives():_directives.specifiedDirectives;for(const directive of definedDirectives){directiveArgs[directive.name]=directive.args.map(arg=>arg.name)}const astDefinitions=context.getDocument().definitions;for(const def of astDefinitions){if(def.kind===_kinds.Kind.DIRECTIVE_DEFINITION){var _def$arguments;const argsNodes=(_def$arguments=def.arguments)!==null&&_def$arguments!==void 0?_def$arguments:[];directiveArgs[def.name.value]=argsNodes.map(arg=>arg.name.value)}}return{Directive(directiveNode){const directiveName=directiveNode.name.value;const knownArgs=directiveArgs[directiveName];if(directiveNode.arguments&&knownArgs){for(const argNode of directiveNode.arguments){const argName=argNode.name.value;if(!knownArgs.includes(argName)){const suggestions=(0,_suggestionList.suggestionList)(argName,knownArgs);context.reportError(new _GraphQLError.GraphQLError(`Unknown argument "${argName}" on directive "@${directiveName}".`+(0,_didYouMean.didYouMean)(suggestions),{nodes:argNode}))}}}return false}}}},{"../../error/GraphQLError.mjs":335,"../../jsutils/didYouMean.mjs":349,"../../jsutils/suggestionList.mjs":367,"../../language/kinds.mjs":375,"../../type/directives.mjs":388}],423:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KnownDirectivesRule=KnownDirectivesRule;var _inspect=require("../../jsutils/inspect.mjs");var _invariant=require("../../jsutils/invariant.mjs");var _GraphQLError=require("../../error/GraphQLError.mjs");var _ast=require("../../language/ast.mjs");var _directiveLocation=require("../../language/directiveLocation.mjs");var _kinds=require("../../language/kinds.mjs");var _directives=require("../../type/directives.mjs");function KnownDirectivesRule(context){const locationsMap=Object.create(null);const schema=context.getSchema();const definedDirectives=schema?schema.getDirectives():_directives.specifiedDirectives;for(const directive of definedDirectives){locationsMap[directive.name]=directive.locations}const astDefinitions=context.getDocument().definitions;for(const def of astDefinitions){if(def.kind===_kinds.Kind.DIRECTIVE_DEFINITION){locationsMap[def.name.value]=def.locations.map(name=>name.value)}}return{Directive(node,_key,_parent,_path,ancestors){const name=node.name.value;const locations=locationsMap[name];if(!locations){context.reportError(new _GraphQLError.GraphQLError(`Unknown directive "@${name}".`,{nodes:node}));return}const candidateLocation=getDirectiveLocationForASTPath(ancestors);if(candidateLocation&&!locations.includes(candidateLocation)){context.reportError(new _GraphQLError.GraphQLError(`Directive "@${name}" may not be used on ${candidateLocation}.`,{nodes:node}))}}}}function getDirectiveLocationForASTPath(ancestors){const appliedTo=ancestors[ancestors.length-1];"kind"in appliedTo||(0,_invariant.invariant)(false);switch(appliedTo.kind){case _kinds.Kind.OPERATION_DEFINITION:return getDirectiveLocationForOperation(appliedTo.operation);case _kinds.Kind.FIELD:return _directiveLocation.DirectiveLocation.FIELD;case _kinds.Kind.FRAGMENT_SPREAD:return _directiveLocation.DirectiveLocation.FRAGMENT_SPREAD;case _kinds.Kind.INLINE_FRAGMENT:return _directiveLocation.DirectiveLocation.INLINE_FRAGMENT;case _kinds.Kind.FRAGMENT_DEFINITION:return _directiveLocation.DirectiveLocation.FRAGMENT_DEFINITION;case _kinds.Kind.VARIABLE_DEFINITION:return _directiveLocation.DirectiveLocation.VARIABLE_DEFINITION;case _kinds.Kind.SCHEMA_DEFINITION:case _kinds.Kind.SCHEMA_EXTENSION:return _directiveLocation.DirectiveLocation.SCHEMA;case _kinds.Kind.SCALAR_TYPE_DEFINITION:case _kinds.Kind.SCALAR_TYPE_EXTENSION:return _directiveLocation.DirectiveLocation.SCALAR;case _kinds.Kind.OBJECT_TYPE_DEFINITION:case _kinds.Kind.OBJECT_TYPE_EXTENSION:return _directiveLocation.DirectiveLocation.OBJECT;case _kinds.Kind.FIELD_DEFINITION:return _directiveLocation.DirectiveLocation.FIELD_DEFINITION;case _kinds.Kind.INTERFACE_TYPE_DEFINITION:case _kinds.Kind.INTERFACE_TYPE_EXTENSION:return _directiveLocation.DirectiveLocation.INTERFACE;case _kinds.Kind.UNION_TYPE_DEFINITION:case _kinds.Kind.UNION_TYPE_EXTENSION:return _directiveLocation.DirectiveLocation.UNION;case _kinds.Kind.ENUM_TYPE_DEFINITION:case _kinds.Kind.ENUM_TYPE_EXTENSION:return _directiveLocation.DirectiveLocation.ENUM;case _kinds.Kind.ENUM_VALUE_DEFINITION:return _directiveLocation.DirectiveLocation.ENUM_VALUE;case _kinds.Kind.INPUT_OBJECT_TYPE_DEFINITION:case _kinds.Kind.INPUT_OBJECT_TYPE_EXTENSION:return _directiveLocation.DirectiveLocation.INPUT_OBJECT;case _kinds.Kind.INPUT_VALUE_DEFINITION:{const parentNode=ancestors[ancestors.length-3];"kind"in parentNode||(0,_invariant.invariant)(false);return parentNode.kind===_kinds.Kind.INPUT_OBJECT_TYPE_DEFINITION?_directiveLocation.DirectiveLocation.INPUT_FIELD_DEFINITION:_directiveLocation.DirectiveLocation.ARGUMENT_DEFINITION}default:false||(0,_invariant.invariant)(false,"Unexpected kind: "+(0,_inspect.inspect)(appliedTo.kind))}}function getDirectiveLocationForOperation(operation){switch(operation){case _ast.OperationTypeNode.QUERY:return _directiveLocation.DirectiveLocation.QUERY;case _ast.OperationTypeNode.MUTATION:return _directiveLocation.DirectiveLocation.MUTATION;case _ast.OperationTypeNode.SUBSCRIPTION:return _directiveLocation.DirectiveLocation.SUBSCRIPTION}}},{"../../error/GraphQLError.mjs":335,"../../jsutils/inspect.mjs":352,"../../jsutils/invariant.mjs":354,"../../language/ast.mjs":370,"../../language/directiveLocation.mjs":373,"../../language/kinds.mjs":375,"../../type/directives.mjs":388}],424:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KnownFragmentNamesRule=KnownFragmentNamesRule;var _GraphQLError=require("../../error/GraphQLError.mjs");function KnownFragmentNamesRule(context){return{FragmentSpread(node){const fragmentName=node.name.value;const fragment=context.getFragment(fragmentName);if(!fragment){context.reportError(new _GraphQLError.GraphQLError(`Unknown fragment "${fragmentName}".`,{nodes:node.name}))}}}}},{"../../error/GraphQLError.mjs":335}],425:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KnownTypeNamesRule=KnownTypeNamesRule;var _didYouMean=require("../../jsutils/didYouMean.mjs");var _suggestionList=require("../../jsutils/suggestionList.mjs");var _GraphQLError=require("../../error/GraphQLError.mjs");var _predicates=require("../../language/predicates.mjs");var _introspection=require("../../type/introspection.mjs");var _scalars=require("../../type/scalars.mjs");function KnownTypeNamesRule(context){const schema=context.getSchema();const existingTypesMap=schema?schema.getTypeMap():Object.create(null);const definedTypes=Object.create(null);for(const def of context.getDocument().definitions){if((0,_predicates.isTypeDefinitionNode)(def)){definedTypes[def.name.value]=true}}const typeNames=[...Object.keys(existingTypesMap),...Object.keys(definedTypes)];return{NamedType(node,_1,parent,_2,ancestors){const typeName=node.name.value;if(!existingTypesMap[typeName]&&!definedTypes[typeName]){var _ancestors$;const definitionNode=(_ancestors$=ancestors[2])!==null&&_ancestors$!==void 0?_ancestors$:parent;const isSDL=definitionNode!=null&&isSDLNode(definitionNode);if(isSDL&&standardTypeNames.includes(typeName)){return}const suggestedTypes=(0,_suggestionList.suggestionList)(typeName,isSDL?standardTypeNames.concat(typeNames):typeNames);context.reportError(new _GraphQLError.GraphQLError(`Unknown type "${typeName}".`+(0,_didYouMean.didYouMean)(suggestedTypes),{nodes:node}))}}}}const standardTypeNames=[..._scalars.specifiedScalarTypes,..._introspection.introspectionTypes].map(type=>type.name);function isSDLNode(value){return"kind"in value&&((0,_predicates.isTypeSystemDefinitionNode)(value)||(0,_predicates.isTypeSystemExtensionNode)(value))}},{"../../error/GraphQLError.mjs":335,"../../jsutils/didYouMean.mjs":349,"../../jsutils/suggestionList.mjs":367,"../../language/predicates.mjs":379,"../../type/introspection.mjs":390,"../../type/scalars.mjs":391}],426:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoneAnonymousOperationRule=LoneAnonymousOperationRule;var _GraphQLError=require("../../error/GraphQLError.mjs");var _kinds=require("../../language/kinds.mjs");function LoneAnonymousOperationRule(context){let operationCount=0;return{Document(node){operationCount=node.definitions.filter(definition=>definition.kind===_kinds.Kind.OPERATION_DEFINITION).length},OperationDefinition(node){if(!node.name&&operationCount>1){context.reportError(new _GraphQLError.GraphQLError("This anonymous operation must be the only defined operation.",{nodes:node}))}}}}},{"../../error/GraphQLError.mjs":335,"../../language/kinds.mjs":375}],427:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoneSchemaDefinitionRule=LoneSchemaDefinitionRule;var _GraphQLError=require("../../error/GraphQLError.mjs");function LoneSchemaDefinitionRule(context){var _ref,_ref2,_oldSchema$astNode;const oldSchema=context.getSchema();const alreadyDefined=(_ref=(_ref2=(_oldSchema$astNode=oldSchema===null||oldSchema===void 0?void 0:oldSchema.astNode)!==null&&_oldSchema$astNode!==void 0?_oldSchema$astNode:oldSchema===null||oldSchema===void 0?void 0:oldSchema.getQueryType())!==null&&_ref2!==void 0?_ref2:oldSchema===null||oldSchema===void 0?void 0:oldSchema.getMutationType())!==null&&_ref!==void 0?_ref:oldSchema===null||oldSchema===void 0?void 0:oldSchema.getSubscriptionType();let schemaDefinitionsCount=0;return{SchemaDefinition(node){if(alreadyDefined){context.reportError(new _GraphQLError.GraphQLError("Cannot define a new schema within a schema extension.",{nodes:node}));return}if(schemaDefinitionsCount>0){context.reportError(new _GraphQLError.GraphQLError("Must provide only one schema definition.",{nodes:node}))}++schemaDefinitionsCount}}}},{"../../error/GraphQLError.mjs":335}],428:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoFragmentCyclesRule=NoFragmentCyclesRule;var _GraphQLError=require("../../error/GraphQLError.mjs");function NoFragmentCyclesRule(context){const visitedFrags=Object.create(null);const spreadPath=[];const spreadPathIndexByName=Object.create(null);return{OperationDefinition:()=>false,FragmentDefinition(node){detectCycleRecursive(node);return false}};function detectCycleRecursive(fragment){if(visitedFrags[fragment.name.value]){return}const fragmentName=fragment.name.value;visitedFrags[fragmentName]=true;const spreadNodes=context.getFragmentSpreads(fragment.selectionSet);if(spreadNodes.length===0){return}spreadPathIndexByName[fragmentName]=spreadPath.length;for(const spreadNode of spreadNodes){const spreadName=spreadNode.name.value;const cycleIndex=spreadPathIndexByName[spreadName];spreadPath.push(spreadNode);if(cycleIndex===undefined){const spreadFragment=context.getFragment(spreadName);if(spreadFragment){detectCycleRecursive(spreadFragment)}}else{const cyclePath=spreadPath.slice(cycleIndex);const viaPath=cyclePath.slice(0,-1).map(s=>'"'+s.name.value+'"').join(", ");context.reportError(new _GraphQLError.GraphQLError(`Cannot spread fragment "${spreadName}" within itself`+(viaPath!==""?` via ${viaPath}.`:"."),{nodes:cyclePath}))}spreadPath.pop()}spreadPathIndexByName[fragmentName]=undefined}}},{"../../error/GraphQLError.mjs":335}],429:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoUndefinedVariablesRule=NoUndefinedVariablesRule;var _GraphQLError=require("../../error/GraphQLError.mjs");function NoUndefinedVariablesRule(context){let variableNameDefined=Object.create(null);return{OperationDefinition:{enter(){variableNameDefined=Object.create(null)},leave(operation){const usages=context.getRecursiveVariableUsages(operation);for(const{node}of usages){const varName=node.name.value;if(variableNameDefined[varName]!==true){context.reportError(new _GraphQLError.GraphQLError(operation.name?`Variable "$${varName}" is not defined by operation "${operation.name.value}".`:`Variable "$${varName}" is not defined.`,{nodes:[node,operation]}))}}}},VariableDefinition(node){variableNameDefined[node.variable.name.value]=true}}}},{"../../error/GraphQLError.mjs":335}],430:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoUnusedFragmentsRule=NoUnusedFragmentsRule;var _GraphQLError=require("../../error/GraphQLError.mjs");function NoUnusedFragmentsRule(context){const operationDefs=[];const fragmentDefs=[];return{OperationDefinition(node){operationDefs.push(node);return false},FragmentDefinition(node){fragmentDefs.push(node);return false},Document:{leave(){const fragmentNameUsed=Object.create(null);for(const operation of operationDefs){for(const fragment of context.getRecursivelyReferencedFragments(operation)){fragmentNameUsed[fragment.name.value]=true}}for(const fragmentDef of fragmentDefs){const fragName=fragmentDef.name.value;if(fragmentNameUsed[fragName]!==true){context.reportError(new _GraphQLError.GraphQLError(`Fragment "${fragName}" is never used.`,{nodes:fragmentDef}))}}}}}}},{"../../error/GraphQLError.mjs":335}],431:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoUnusedVariablesRule=NoUnusedVariablesRule;var _GraphQLError=require("../../error/GraphQLError.mjs");function NoUnusedVariablesRule(context){let variableDefs=[];return{OperationDefinition:{enter(){variableDefs=[]},leave(operation){const variableNameUsed=Object.create(null);const usages=context.getRecursiveVariableUsages(operation);for(const{node}of usages){variableNameUsed[node.name.value]=true}for(const variableDef of variableDefs){const variableName=variableDef.variable.name.value;if(variableNameUsed[variableName]!==true){context.reportError(new _GraphQLError.GraphQLError(operation.name?`Variable "$${variableName}" is never used in operation "${operation.name.value}".`:`Variable "$${variableName}" is never used.`,{nodes:variableDef}))}}}},VariableDefinition(def){variableDefs.push(def)}}}},{"../../error/GraphQLError.mjs":335}],432:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OverlappingFieldsCanBeMergedRule=OverlappingFieldsCanBeMergedRule;var _inspect=require("../../jsutils/inspect.mjs");var _GraphQLError=require("../../error/GraphQLError.mjs");var _kinds=require("../../language/kinds.mjs");var _printer=require("../../language/printer.mjs");var _definition=require("../../type/definition.mjs");var _sortValueNode=require("../../utilities/sortValueNode.mjs");var _typeFromAST=require("../../utilities/typeFromAST.mjs");function reasonMessage(reason){if(Array.isArray(reason)){return reason.map(([responseName,subReason])=>`subfields "${responseName}" conflict because `+reasonMessage(subReason)).join(" and ")}return reason}function OverlappingFieldsCanBeMergedRule(context){const comparedFragmentPairs=new PairSet;const cachedFieldsAndFragmentNames=new Map;return{SelectionSet(selectionSet){const conflicts=findConflictsWithinSelectionSet(context,cachedFieldsAndFragmentNames,comparedFragmentPairs,context.getParentType(),selectionSet);for(const[[responseName,reason],fields1,fields2]of conflicts){const reasonMsg=reasonMessage(reason);context.reportError(new _GraphQLError.GraphQLError(`Fields "${responseName}" conflict because ${reasonMsg}. Use different aliases on the fields to fetch both if this was intentional.`,{nodes:fields1.concat(fields2)}))}}}}function findConflictsWithinSelectionSet(context,cachedFieldsAndFragmentNames,comparedFragmentPairs,parentType,selectionSet){const conflicts=[];const[fieldMap,fragmentNames]=getFieldsAndFragmentNames(context,cachedFieldsAndFragmentNames,parentType,selectionSet);collectConflictsWithin(context,conflicts,cachedFieldsAndFragmentNames,comparedFragmentPairs,fieldMap);if(fragmentNames.length!==0){for(let i=0;i<fragmentNames.length;i++){collectConflictsBetweenFieldsAndFragment(context,conflicts,cachedFieldsAndFragmentNames,comparedFragmentPairs,false,fieldMap,fragmentNames[i]);for(let j=i+1;j<fragmentNames.length;j++){collectConflictsBetweenFragments(context,conflicts,cachedFieldsAndFragmentNames,comparedFragmentPairs,false,fragmentNames[i],fragmentNames[j])}}}return conflicts}function collectConflictsBetweenFieldsAndFragment(context,conflicts,cachedFieldsAndFragmentNames,comparedFragmentPairs,areMutuallyExclusive,fieldMap,fragmentName){const fragment=context.getFragment(fragmentName);if(!fragment){return}const[fieldMap2,referencedFragmentNames]=getReferencedFieldsAndFragmentNames(context,cachedFieldsAndFragmentNames,fragment);if(fieldMap===fieldMap2){return}collectConflictsBetween(context,conflicts,cachedFieldsAndFragmentNames,comparedFragmentPairs,areMutuallyExclusive,fieldMap,fieldMap2);for(const referencedFragmentName of referencedFragmentNames){if(comparedFragmentPairs.has(referencedFragmentName,fragmentName,areMutuallyExclusive)){continue}comparedFragmentPairs.add(referencedFragmentName,fragmentName,areMutuallyExclusive);collectConflictsBetweenFieldsAndFragment(context,conflicts,cachedFieldsAndFragmentNames,comparedFragmentPairs,areMutuallyExclusive,fieldMap,referencedFragmentName)}}function collectConflictsBetweenFragments(context,conflicts,cachedFieldsAndFragmentNames,comparedFragmentPairs,areMutuallyExclusive,fragmentName1,fragmentName2){if(fragmentName1===fragmentName2){return}if(comparedFragmentPairs.has(fragmentName1,fragmentName2,areMutuallyExclusive)){return}comparedFragmentPairs.add(fragmentName1,fragmentName2,areMutuallyExclusive);const fragment1=context.getFragment(fragmentName1);const fragment2=context.getFragment(fragmentName2);if(!fragment1||!fragment2){return}const[fieldMap1,referencedFragmentNames1]=getReferencedFieldsAndFragmentNames(context,cachedFieldsAndFragmentNames,fragment1);const[fieldMap2,referencedFragmentNames2]=getReferencedFieldsAndFragmentNames(context,cachedFieldsAndFragmentNames,fragment2);collectConflictsBetween(context,conflicts,cachedFieldsAndFragmentNames,comparedFragmentPairs,areMutuallyExclusive,fieldMap1,fieldMap2);for(const referencedFragmentName2 of referencedFragmentNames2){collectConflictsBetweenFragments(context,conflicts,cachedFieldsAndFragmentNames,comparedFragmentPairs,areMutuallyExclusive,fragmentName1,referencedFragmentName2)}for(const referencedFragmentName1 of referencedFragmentNames1){collectConflictsBetweenFragments(context,conflicts,cachedFieldsAndFragmentNames,comparedFragmentPairs,areMutuallyExclusive,referencedFragmentName1,fragmentName2)}}function findConflictsBetweenSubSelectionSets(context,cachedFieldsAndFragmentNames,comparedFragmentPairs,areMutuallyExclusive,parentType1,selectionSet1,parentType2,selectionSet2){const conflicts=[];const[fieldMap1,fragmentNames1]=getFieldsAndFragmentNames(context,cachedFieldsAndFragmentNames,parentType1,selectionSet1);const[fieldMap2,fragmentNames2]=getFieldsAndFragmentNames(context,cachedFieldsAndFragmentNames,parentType2,selectionSet2);collectConflictsBetween(context,conflicts,cachedFieldsAndFragmentNames,comparedFragmentPairs,areMutuallyExclusive,fieldMap1,fieldMap2);for(const fragmentName2 of fragmentNames2){collectConflictsBetweenFieldsAndFragment(context,conflicts,cachedFieldsAndFragmentNames,comparedFragmentPairs,areMutuallyExclusive,fieldMap1,fragmentName2)}for(const fragmentName1 of fragmentNames1){collectConflictsBetweenFieldsAndFragment(context,conflicts,cachedFieldsAndFragmentNames,comparedFragmentPairs,areMutuallyExclusive,fieldMap2,fragmentName1)}for(const fragmentName1 of fragmentNames1){for(const fragmentName2 of fragmentNames2){collectConflictsBetweenFragments(context,conflicts,cachedFieldsAndFragmentNames,comparedFragmentPairs,areMutuallyExclusive,fragmentName1,fragmentName2)}}return conflicts}function collectConflictsWithin(context,conflicts,cachedFieldsAndFragmentNames,comparedFragmentPairs,fieldMap){for(const[responseName,fields]of Object.entries(fieldMap)){if(fields.length>1){for(let i=0;i<fields.length;i++){for(let j=i+1;j<fields.length;j++){const conflict=findConflict(context,cachedFieldsAndFragmentNames,comparedFragmentPairs,false,responseName,fields[i],fields[j]);if(conflict){conflicts.push(conflict)}}}}}}function collectConflictsBetween(context,conflicts,cachedFieldsAndFragmentNames,comparedFragmentPairs,parentFieldsAreMutuallyExclusive,fieldMap1,fieldMap2){for(const[responseName,fields1]of Object.entries(fieldMap1)){const fields2=fieldMap2[responseName];if(fields2){for(const field1 of fields1){for(const field2 of fields2){const conflict=findConflict(context,cachedFieldsAndFragmentNames,comparedFragmentPairs,parentFieldsAreMutuallyExclusive,responseName,field1,field2);if(conflict){conflicts.push(conflict)}}}}}}function findConflict(context,cachedFieldsAndFragmentNames,comparedFragmentPairs,parentFieldsAreMutuallyExclusive,responseName,field1,field2){const[parentType1,node1,def1]=field1;const[parentType2,node2,def2]=field2;const areMutuallyExclusive=parentFieldsAreMutuallyExclusive||parentType1!==parentType2&&(0,_definition.isObjectType)(parentType1)&&(0,_definition.isObjectType)(parentType2);if(!areMutuallyExclusive){const name1=node1.name.value;const name2=node2.name.value;if(name1!==name2){return[[responseName,`"${name1}" and "${name2}" are different fields`],[node1],[node2]]}if(stringifyArguments(node1)!==stringifyArguments(node2)){return[[responseName,"they have differing arguments"],[node1],[node2]]}}const type1=def1===null||def1===void 0?void 0:def1.type;const type2=def2===null||def2===void 0?void 0:def2.type;if(type1&&type2&&doTypesConflict(type1,type2)){return[[responseName,`they return conflicting types "${(0,_inspect.inspect)(type1)}" and "${(0,_inspect.inspect)(type2)}"`],[node1],[node2]]}const selectionSet1=node1.selectionSet;const selectionSet2=node2.selectionSet;if(selectionSet1&&selectionSet2){const conflicts=findConflictsBetweenSubSelectionSets(context,cachedFieldsAndFragmentNames,comparedFragmentPairs,areMutuallyExclusive,(0,_definition.getNamedType)(type1),selectionSet1,(0,_definition.getNamedType)(type2),selectionSet2);return subfieldConflicts(conflicts,responseName,node1,node2)}}function stringifyArguments(fieldNode){var _fieldNode$arguments;const args=(_fieldNode$arguments=fieldNode.arguments)!==null&&_fieldNode$arguments!==void 0?_fieldNode$arguments:[];const inputObjectWithArgs={kind:_kinds.Kind.OBJECT,fields:args.map(argNode=>({kind:_kinds.Kind.OBJECT_FIELD,name:argNode.name,value:argNode.value}))};return(0,_printer.print)((0,_sortValueNode.sortValueNode)(inputObjectWithArgs))}function doTypesConflict(type1,type2){if((0,_definition.isListType)(type1)){return(0,_definition.isListType)(type2)?doTypesConflict(type1.ofType,type2.ofType):true}if((0,_definition.isListType)(type2)){return true}if((0,_definition.isNonNullType)(type1)){return(0,_definition.isNonNullType)(type2)?doTypesConflict(type1.ofType,type2.ofType):true}if((0,_definition.isNonNullType)(type2)){return true}if((0,_definition.isLeafType)(type1)||(0,_definition.isLeafType)(type2)){return type1!==type2}return false}function getFieldsAndFragmentNames(context,cachedFieldsAndFragmentNames,parentType,selectionSet){const cached=cachedFieldsAndFragmentNames.get(selectionSet);if(cached){return cached}const nodeAndDefs=Object.create(null);const fragmentNames=Object.create(null);_collectFieldsAndFragmentNames(context,parentType,selectionSet,nodeAndDefs,fragmentNames);const result=[nodeAndDefs,Object.keys(fragmentNames)];cachedFieldsAndFragmentNames.set(selectionSet,result);return result}function getReferencedFieldsAndFragmentNames(context,cachedFieldsAndFragmentNames,fragment){const cached=cachedFieldsAndFragmentNames.get(fragment.selectionSet);if(cached){return cached}const fragmentType=(0,_typeFromAST.typeFromAST)(context.getSchema(),fragment.typeCondition);return getFieldsAndFragmentNames(context,cachedFieldsAndFragmentNames,fragmentType,fragment.selectionSet)}function _collectFieldsAndFragmentNames(context,parentType,selectionSet,nodeAndDefs,fragmentNames){for(const selection of selectionSet.selections){switch(selection.kind){case _kinds.Kind.FIELD:{const fieldName=selection.name.value;let fieldDef;if((0,_definition.isObjectType)(parentType)||(0,_definition.isInterfaceType)(parentType)){fieldDef=parentType.getFields()[fieldName]}const responseName=selection.alias?selection.alias.value:fieldName;if(!nodeAndDefs[responseName]){nodeAndDefs[responseName]=[]}nodeAndDefs[responseName].push([parentType,selection,fieldDef]);break}case _kinds.Kind.FRAGMENT_SPREAD:fragmentNames[selection.name.value]=true;break;case _kinds.Kind.INLINE_FRAGMENT:{const typeCondition=selection.typeCondition;const inlineFragmentType=typeCondition?(0,_typeFromAST.typeFromAST)(context.getSchema(),typeCondition):parentType;_collectFieldsAndFragmentNames(context,inlineFragmentType,selection.selectionSet,nodeAndDefs,fragmentNames);break}}}}function subfieldConflicts(conflicts,responseName,node1,node2){if(conflicts.length>0){return[[responseName,conflicts.map(([reason])=>reason)],[node1,...conflicts.map(([,fields1])=>fields1).flat()],[node2,...conflicts.map(([,,fields2])=>fields2).flat()]]}}class PairSet{constructor(){this._data=new Map}has(a,b,areMutuallyExclusive){var _this$_data$get;const[key1,key2]=a<b?[a,b]:[b,a];const result=(_this$_data$get=this._data.get(key1))===null||_this$_data$get===void 0?void 0:_this$_data$get.get(key2);if(result===undefined){return false}return areMutuallyExclusive?true:areMutuallyExclusive===result}add(a,b,areMutuallyExclusive){const[key1,key2]=a<b?[a,b]:[b,a];const map=this._data.get(key1);if(map===undefined){this._data.set(key1,new Map([[key2,areMutuallyExclusive]]))}else{map.set(key2,areMutuallyExclusive)}}}},{"../../error/GraphQLError.mjs":335,"../../jsutils/inspect.mjs":352,"../../language/kinds.mjs":375,"../../language/printer.mjs":382,"../../type/definition.mjs":387,"../../utilities/sortValueNode.mjs":411,"../../utilities/typeFromAST.mjs":414}],433:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PossibleFragmentSpreadsRule=PossibleFragmentSpreadsRule;var _inspect=require("../../jsutils/inspect.mjs");var _GraphQLError=require("../../error/GraphQLError.mjs");var _definition=require("../../type/definition.mjs");var _typeComparators=require("../../utilities/typeComparators.mjs");var _typeFromAST=require("../../utilities/typeFromAST.mjs");function PossibleFragmentSpreadsRule(context){return{InlineFragment(node){const fragType=context.getType();const parentType=context.getParentType();if((0,_definition.isCompositeType)(fragType)&&(0,_definition.isCompositeType)(parentType)&&!(0,_typeComparators.doTypesOverlap)(context.getSchema(),fragType,parentType)){const parentTypeStr=(0,_inspect.inspect)(parentType);const fragTypeStr=(0,_inspect.inspect)(fragType);context.reportError(new _GraphQLError.GraphQLError(`Fragment cannot be spread here as objects of type "${parentTypeStr}" can never be of type "${fragTypeStr}".`,{nodes:node}))}},FragmentSpread(node){const fragName=node.name.value;const fragType=getFragmentType(context,fragName);const parentType=context.getParentType();if(fragType&&parentType&&!(0,_typeComparators.doTypesOverlap)(context.getSchema(),fragType,parentType)){const parentTypeStr=(0,_inspect.inspect)(parentType);const fragTypeStr=(0,_inspect.inspect)(fragType);context.reportError(new _GraphQLError.GraphQLError(`Fragment "${fragName}" cannot be spread here as objects of type "${parentTypeStr}" can never be of type "${fragTypeStr}".`,{nodes:node}))}}}}function getFragmentType(context,name){const frag=context.getFragment(name);if(frag){const type=(0,_typeFromAST.typeFromAST)(context.getSchema(),frag.typeCondition);if((0,_definition.isCompositeType)(type)){return type}}}},{"../../error/GraphQLError.mjs":335,"../../jsutils/inspect.mjs":352,"../../type/definition.mjs":387,"../../utilities/typeComparators.mjs":413,"../../utilities/typeFromAST.mjs":414}],434:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PossibleTypeExtensionsRule=PossibleTypeExtensionsRule;var _didYouMean=require("../../jsutils/didYouMean.mjs");var _inspect=require("../../jsutils/inspect.mjs");var _invariant=require("../../jsutils/invariant.mjs");var _suggestionList=require("../../jsutils/suggestionList.mjs");var _GraphQLError=require("../../error/GraphQLError.mjs");var _kinds=require("../../language/kinds.mjs");var _predicates=require("../../language/predicates.mjs");var _definition=require("../../type/definition.mjs");function PossibleTypeExtensionsRule(context){const schema=context.getSchema();const definedTypes=Object.create(null);for(const def of context.getDocument().definitions){if((0,_predicates.isTypeDefinitionNode)(def)){definedTypes[def.name.value]=def}}return{ScalarTypeExtension:checkExtension,ObjectTypeExtension:checkExtension,InterfaceTypeExtension:checkExtension,UnionTypeExtension:checkExtension,EnumTypeExtension:checkExtension,InputObjectTypeExtension:checkExtension};function checkExtension(node){const typeName=node.name.value;const defNode=definedTypes[typeName];const existingType=schema===null||schema===void 0?void 0:schema.getType(typeName);let expectedKind;if(defNode){expectedKind=defKindToExtKind[defNode.kind]}else if(existingType){expectedKind=typeToExtKind(existingType)}if(expectedKind){if(expectedKind!==node.kind){const kindStr=extensionKindToTypeName(node.kind);context.reportError(new _GraphQLError.GraphQLError(`Cannot extend non-${kindStr} type "${typeName}".`,{nodes:defNode?[defNode,node]:node}))}}else{const allTypeNames=Object.keys({...definedTypes,...schema===null||schema===void 0?void 0:schema.getTypeMap()});const suggestedTypes=(0,_suggestionList.suggestionList)(typeName,allTypeNames);context.reportError(new _GraphQLError.GraphQLError(`Cannot extend type "${typeName}" because it is not defined.`+(0,_didYouMean.didYouMean)(suggestedTypes),{nodes:node.name}))}}}const defKindToExtKind={[_kinds.Kind.SCALAR_TYPE_DEFINITION]:_kinds.Kind.SCALAR_TYPE_EXTENSION,[_kinds.Kind.OBJECT_TYPE_DEFINITION]:_kinds.Kind.OBJECT_TYPE_EXTENSION,[_kinds.Kind.INTERFACE_TYPE_DEFINITION]:_kinds.Kind.INTERFACE_TYPE_EXTENSION,[_kinds.Kind.UNION_TYPE_DEFINITION]:_kinds.Kind.UNION_TYPE_EXTENSION,[_kinds.Kind.ENUM_TYPE_DEFINITION]:_kinds.Kind.ENUM_TYPE_EXTENSION,[_kinds.Kind.INPUT_OBJECT_TYPE_DEFINITION]:_kinds.Kind.INPUT_OBJECT_TYPE_EXTENSION};function typeToExtKind(type){if((0,_definition.isScalarType)(type)){return _kinds.Kind.SCALAR_TYPE_EXTENSION}if((0,_definition.isObjectType)(type)){return _kinds.Kind.OBJECT_TYPE_EXTENSION}if((0,_definition.isInterfaceType)(type)){return _kinds.Kind.INTERFACE_TYPE_EXTENSION}if((0,_definition.isUnionType)(type)){return _kinds.Kind.UNION_TYPE_EXTENSION}if((0,_definition.isEnumType)(type)){return _kinds.Kind.ENUM_TYPE_EXTENSION}if((0,_definition.isInputObjectType)(type)){return _kinds.Kind.INPUT_OBJECT_TYPE_EXTENSION}false||(0,_invariant.invariant)(false,"Unexpected type: "+(0,_inspect.inspect)(type))}function extensionKindToTypeName(kind){switch(kind){case _kinds.Kind.SCALAR_TYPE_EXTENSION:return"scalar";case _kinds.Kind.OBJECT_TYPE_EXTENSION:return"object";case _kinds.Kind.INTERFACE_TYPE_EXTENSION:return"interface";case _kinds.Kind.UNION_TYPE_EXTENSION:return"union";case _kinds.Kind.ENUM_TYPE_EXTENSION:return"enum";case _kinds.Kind.INPUT_OBJECT_TYPE_EXTENSION:return"input object";default:false||(0,_invariant.invariant)(false,"Unexpected kind: "+(0,_inspect.inspect)(kind))}}},{"../../error/GraphQLError.mjs":335,"../../jsutils/didYouMean.mjs":349,"../../jsutils/inspect.mjs":352,"../../jsutils/invariant.mjs":354,"../../jsutils/suggestionList.mjs":367,"../../language/kinds.mjs":375,"../../language/predicates.mjs":379,"../../type/definition.mjs":387}],435:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ProvidedRequiredArgumentsOnDirectivesRule=ProvidedRequiredArgumentsOnDirectivesRule;exports.ProvidedRequiredArgumentsRule=ProvidedRequiredArgumentsRule;var _inspect=require("../../jsutils/inspect.mjs");var _keyMap=require("../../jsutils/keyMap.mjs");var _GraphQLError=require("../../error/GraphQLError.mjs");var _kinds=require("../../language/kinds.mjs");var _printer=require("../../language/printer.mjs");var _definition=require("../../type/definition.mjs");var _directives=require("../../type/directives.mjs");function ProvidedRequiredArgumentsRule(context){return{...ProvidedRequiredArgumentsOnDirectivesRule(context),Field:{leave(fieldNode){var _fieldNode$arguments;const fieldDef=context.getFieldDef();if(!fieldDef){return false}const providedArgs=new Set((_fieldNode$arguments=fieldNode.arguments)===null||_fieldNode$arguments===void 0?void 0:_fieldNode$arguments.map(arg=>arg.name.value));for(const argDef of fieldDef.args){if(!providedArgs.has(argDef.name)&&(0,_definition.isRequiredArgument)(argDef)){const argTypeStr=(0,_inspect.inspect)(argDef.type);context.reportError(new _GraphQLError.GraphQLError(`Field "${fieldDef.name}" argument "${argDef.name}" of type "${argTypeStr}" is required, but it was not provided.`,{nodes:fieldNode}))}}}}}}function ProvidedRequiredArgumentsOnDirectivesRule(context){var _schema$getDirectives;const requiredArgsMap=Object.create(null);const schema=context.getSchema();const definedDirectives=(_schema$getDirectives=schema===null||schema===void 0?void 0:schema.getDirectives())!==null&&_schema$getDirectives!==void 0?_schema$getDirectives:_directives.specifiedDirectives;for(const directive of definedDirectives){requiredArgsMap[directive.name]=(0,_keyMap.keyMap)(directive.args.filter(_definition.isRequiredArgument),arg=>arg.name)}const astDefinitions=context.getDocument().definitions;for(const def of astDefinitions){if(def.kind===_kinds.Kind.DIRECTIVE_DEFINITION){var _def$arguments;const argNodes=(_def$arguments=def.arguments)!==null&&_def$arguments!==void 0?_def$arguments:[];requiredArgsMap[def.name.value]=(0,_keyMap.keyMap)(argNodes.filter(isRequiredArgumentNode),arg=>arg.name.value)}}return{Directive:{leave(directiveNode){const directiveName=directiveNode.name.value;const requiredArgs=requiredArgsMap[directiveName];if(requiredArgs){var _directiveNode$argume;const argNodes=(_directiveNode$argume=directiveNode.arguments)!==null&&_directiveNode$argume!==void 0?_directiveNode$argume:[];const argNodeMap=new Set(argNodes.map(arg=>arg.name.value));for(const[argName,argDef]of Object.entries(requiredArgs)){if(!argNodeMap.has(argName)){const argType=(0,_definition.isType)(argDef.type)?(0,_inspect.inspect)(argDef.type):(0,_printer.print)(argDef.type);context.reportError(new _GraphQLError.GraphQLError(`Directive "@${directiveName}" argument "${argName}" of type "${argType}" is required, but it was not provided.`,{nodes:directiveNode}))}}}}}}}function isRequiredArgumentNode(arg){return arg.type.kind===_kinds.Kind.NON_NULL_TYPE&&arg.defaultValue==null}},{"../../error/GraphQLError.mjs":335,"../../jsutils/inspect.mjs":352,"../../jsutils/keyMap.mjs":359,"../../language/kinds.mjs":375,"../../language/printer.mjs":382,"../../type/definition.mjs":387,"../../type/directives.mjs":388}],436:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScalarLeafsRule=ScalarLeafsRule;var _inspect=require("../../jsutils/inspect.mjs");var _GraphQLError=require("../../error/GraphQLError.mjs");var _definition=require("../../type/definition.mjs");function ScalarLeafsRule(context){return{Field(node){const type=context.getType();const selectionSet=node.selectionSet;if(type){if((0,_definition.isLeafType)((0,_definition.getNamedType)(type))){if(selectionSet){const fieldName=node.name.value;const typeStr=(0,_inspect.inspect)(type);context.reportError(new _GraphQLError.GraphQLError(`Field "${fieldName}" must not have a selection since type "${typeStr}" has no subfields.`,{nodes:selectionSet}))}}else if(!selectionSet){const fieldName=node.name.value;const typeStr=(0,_inspect.inspect)(type);context.reportError(new _GraphQLError.GraphQLError(`Field "${fieldName}" of type "${typeStr}" must have a selection of subfields. Did you mean "${fieldName} { ... }"?`,{nodes:node}))}}}}}},{"../../error/GraphQLError.mjs":335,"../../jsutils/inspect.mjs":352,"../../type/definition.mjs":387}],437:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SingleFieldSubscriptionsRule=SingleFieldSubscriptionsRule;var _GraphQLError=require("../../error/GraphQLError.mjs");var _kinds=require("../../language/kinds.mjs");var _collectFields=require("../../execution/collectFields.mjs");function SingleFieldSubscriptionsRule(context){return{OperationDefinition(node){if(node.operation==="subscription"){const schema=context.getSchema();const subscriptionType=schema.getSubscriptionType();if(subscriptionType){const operationName=node.name?node.name.value:null;const variableValues=Object.create(null);const document=context.getDocument();const fragments=Object.create(null);for(const definition of document.definitions){if(definition.kind===_kinds.Kind.FRAGMENT_DEFINITION){fragments[definition.name.value]=definition}}const fields=(0,_collectFields.collectFields)(schema,fragments,variableValues,subscriptionType,node.selectionSet);if(fields.size>1){const fieldSelectionLists=[...fields.values()];const extraFieldSelectionLists=fieldSelectionLists.slice(1);const extraFieldSelections=extraFieldSelectionLists.flat();context.reportError(new _GraphQLError.GraphQLError(operationName!=null?`Subscription "${operationName}" must select only one top level field.`:"Anonymous Subscription must select only one top level field.",{nodes:extraFieldSelections}))}for(const fieldNodes of fields.values()){const field=fieldNodes[0];const fieldName=field.name.value;if(fieldName.startsWith("__")){context.reportError(new _GraphQLError.GraphQLError(operationName!=null?`Subscription "${operationName}" must not select an introspection top level field.`:"Anonymous Subscription must not select an introspection top level field.",{nodes:fieldNodes}))}}}}}}}},{"../../error/GraphQLError.mjs":335,"../../execution/collectFields.mjs":339,"../../language/kinds.mjs":375}],438:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UniqueArgumentDefinitionNamesRule=UniqueArgumentDefinitionNamesRule;var _groupBy=require("../../jsutils/groupBy.mjs");var _GraphQLError=require("../../error/GraphQLError.mjs");function UniqueArgumentDefinitionNamesRule(context){return{DirectiveDefinition(directiveNode){var _directiveNode$argume;const argumentNodes=(_directiveNode$argume=directiveNode.arguments)!==null&&_directiveNode$argume!==void 0?_directiveNode$argume:[];return checkArgUniqueness(`@${directiveNode.name.value}`,argumentNodes)},InterfaceTypeDefinition:checkArgUniquenessPerField,InterfaceTypeExtension:checkArgUniquenessPerField,ObjectTypeDefinition:checkArgUniquenessPerField,ObjectTypeExtension:checkArgUniquenessPerField};function checkArgUniquenessPerField(typeNode){var _typeNode$fields;const typeName=typeNode.name.value;const fieldNodes=(_typeNode$fields=typeNode.fields)!==null&&_typeNode$fields!==void 0?_typeNode$fields:[];for(const fieldDef of fieldNodes){var _fieldDef$arguments;const fieldName=fieldDef.name.value;const argumentNodes=(_fieldDef$arguments=fieldDef.arguments)!==null&&_fieldDef$arguments!==void 0?_fieldDef$arguments:[];checkArgUniqueness(`${typeName}.${fieldName}`,argumentNodes)}return false}function checkArgUniqueness(parentName,argumentNodes){const seenArgs=(0,_groupBy.groupBy)(argumentNodes,arg=>arg.name.value);for(const[argName,argNodes]of seenArgs){if(argNodes.length>1){context.reportError(new _GraphQLError.GraphQLError(`Argument "${parentName}(${argName}:)" can only be defined once.`,{nodes:argNodes.map(node=>node.name)}))}}return false}}},{"../../error/GraphQLError.mjs":335,"../../jsutils/groupBy.mjs":350}],439:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UniqueArgumentNamesRule=UniqueArgumentNamesRule;var _groupBy=require("../../jsutils/groupBy.mjs");var _GraphQLError=require("../../error/GraphQLError.mjs");function UniqueArgumentNamesRule(context){return{Field:checkArgUniqueness,Directive:checkArgUniqueness};function checkArgUniqueness(parentNode){var _parentNode$arguments;const argumentNodes=(_parentNode$arguments=parentNode.arguments)!==null&&_parentNode$arguments!==void 0?_parentNode$arguments:[];const seenArgs=(0,_groupBy.groupBy)(argumentNodes,arg=>arg.name.value);for(const[argName,argNodes]of seenArgs){if(argNodes.length>1){context.reportError(new _GraphQLError.GraphQLError(`There can be only one argument named "${argName}".`,{nodes:argNodes.map(node=>node.name)}))}}}}},{"../../error/GraphQLError.mjs":335,"../../jsutils/groupBy.mjs":350}],440:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UniqueDirectiveNamesRule=UniqueDirectiveNamesRule;var _GraphQLError=require("../../error/GraphQLError.mjs");function UniqueDirectiveNamesRule(context){const knownDirectiveNames=Object.create(null);const schema=context.getSchema();return{DirectiveDefinition(node){const directiveName=node.name.value;if(schema!==null&&schema!==void 0&&schema.getDirective(directiveName)){context.reportError(new _GraphQLError.GraphQLError(`Directive "@${directiveName}" already exists in the schema. It cannot be redefined.`,{nodes:node.name}));return}if(knownDirectiveNames[directiveName]){context.reportError(new _GraphQLError.GraphQLError(`There can be only one directive named "@${directiveName}".`,{nodes:[knownDirectiveNames[directiveName],node.name]}))}else{knownDirectiveNames[directiveName]=node.name}return false}}}},{"../../error/GraphQLError.mjs":335}],441:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UniqueDirectivesPerLocationRule=UniqueDirectivesPerLocationRule;var _GraphQLError=require("../../error/GraphQLError.mjs");var _kinds=require("../../language/kinds.mjs");var _predicates=require("../../language/predicates.mjs");var _directives=require("../../type/directives.mjs");function UniqueDirectivesPerLocationRule(context){const uniqueDirectiveMap=Object.create(null);const schema=context.getSchema();const definedDirectives=schema?schema.getDirectives():_directives.specifiedDirectives;for(const directive of definedDirectives){uniqueDirectiveMap[directive.name]=!directive.isRepeatable}const astDefinitions=context.getDocument().definitions;for(const def of astDefinitions){if(def.kind===_kinds.Kind.DIRECTIVE_DEFINITION){uniqueDirectiveMap[def.name.value]=!def.repeatable}}const schemaDirectives=Object.create(null);const typeDirectivesMap=Object.create(null);return{enter(node){if(!("directives"in node)||!node.directives){return}let seenDirectives;if(node.kind===_kinds.Kind.SCHEMA_DEFINITION||node.kind===_kinds.Kind.SCHEMA_EXTENSION){seenDirectives=schemaDirectives}else if((0,_predicates.isTypeDefinitionNode)(node)||(0,_predicates.isTypeExtensionNode)(node)){const typeName=node.name.value;seenDirectives=typeDirectivesMap[typeName];if(seenDirectives===undefined){typeDirectivesMap[typeName]=seenDirectives=Object.create(null)}}else{seenDirectives=Object.create(null)}for(const directive of node.directives){const directiveName=directive.name.value;if(uniqueDirectiveMap[directiveName]){if(seenDirectives[directiveName]){context.reportError(new _GraphQLError.GraphQLError(`The directive "@${directiveName}" can only be used once at this location.`,{nodes:[seenDirectives[directiveName],directive]}))}else{seenDirectives[directiveName]=directive}}}}}}},{"../../error/GraphQLError.mjs":335,"../../language/kinds.mjs":375,"../../language/predicates.mjs":379,"../../type/directives.mjs":388}],442:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UniqueEnumValueNamesRule=UniqueEnumValueNamesRule;var _GraphQLError=require("../../error/GraphQLError.mjs");var _definition=require("../../type/definition.mjs");function UniqueEnumValueNamesRule(context){const schema=context.getSchema();const existingTypeMap=schema?schema.getTypeMap():Object.create(null);const knownValueNames=Object.create(null);return{EnumTypeDefinition:checkValueUniqueness,EnumTypeExtension:checkValueUniqueness};function checkValueUniqueness(node){var _node$values;const typeName=node.name.value;if(!knownValueNames[typeName]){knownValueNames[typeName]=Object.create(null)}const valueNodes=(_node$values=node.values)!==null&&_node$values!==void 0?_node$values:[];const valueNames=knownValueNames[typeName];for(const valueDef of valueNodes){const valueName=valueDef.name.value;const existingType=existingTypeMap[typeName];if((0,_definition.isEnumType)(existingType)&&existingType.getValue(valueName)){context.reportError(new _GraphQLError.GraphQLError(`Enum value "${typeName}.${valueName}" already exists in the schema. It cannot also be defined in this type extension.`,{nodes:valueDef.name}))}else if(valueNames[valueName]){context.reportError(new _GraphQLError.GraphQLError(`Enum value "${typeName}.${valueName}" can only be defined once.`,{nodes:[valueNames[valueName],valueDef.name]}))}else{valueNames[valueName]=valueDef.name}}return false}}},{"../../error/GraphQLError.mjs":335,"../../type/definition.mjs":387}],443:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UniqueFieldDefinitionNamesRule=UniqueFieldDefinitionNamesRule;var _GraphQLError=require("../../error/GraphQLError.mjs");var _definition=require("../../type/definition.mjs");function UniqueFieldDefinitionNamesRule(context){const schema=context.getSchema();const existingTypeMap=schema?schema.getTypeMap():Object.create(null);const knownFieldNames=Object.create(null);return{InputObjectTypeDefinition:checkFieldUniqueness,InputObjectTypeExtension:checkFieldUniqueness,InterfaceTypeDefinition:checkFieldUniqueness,InterfaceTypeExtension:checkFieldUniqueness,ObjectTypeDefinition:checkFieldUniqueness,ObjectTypeExtension:checkFieldUniqueness};function checkFieldUniqueness(node){var _node$fields;const typeName=node.name.value;if(!knownFieldNames[typeName]){knownFieldNames[typeName]=Object.create(null)}const fieldNodes=(_node$fields=node.fields)!==null&&_node$fields!==void 0?_node$fields:[];const fieldNames=knownFieldNames[typeName];for(const fieldDef of fieldNodes){const fieldName=fieldDef.name.value;if(hasField(existingTypeMap[typeName],fieldName)){context.reportError(new _GraphQLError.GraphQLError(`Field "${typeName}.${fieldName}" already exists in the schema. It cannot also be defined in this type extension.`,{nodes:fieldDef.name}))}else if(fieldNames[fieldName]){context.reportError(new _GraphQLError.GraphQLError(`Field "${typeName}.${fieldName}" can only be defined once.`,{nodes:[fieldNames[fieldName],fieldDef.name]}))}else{fieldNames[fieldName]=fieldDef.name}}return false}}function hasField(type,fieldName){if((0,_definition.isObjectType)(type)||(0,_definition.isInterfaceType)(type)||(0,_definition.isInputObjectType)(type)){return type.getFields()[fieldName]!=null}return false}},{"../../error/GraphQLError.mjs":335,"../../type/definition.mjs":387}],444:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UniqueFragmentNamesRule=UniqueFragmentNamesRule;var _GraphQLError=require("../../error/GraphQLError.mjs");function UniqueFragmentNamesRule(context){const knownFragmentNames=Object.create(null);return{OperationDefinition:()=>false,FragmentDefinition(node){const fragmentName=node.name.value;if(knownFragmentNames[fragmentName]){context.reportError(new _GraphQLError.GraphQLError(`There can be only one fragment named "${fragmentName}".`,{nodes:[knownFragmentNames[fragmentName],node.name]}))}else{knownFragmentNames[fragmentName]=node.name}return false}}}},{"../../error/GraphQLError.mjs":335}],445:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UniqueInputFieldNamesRule=UniqueInputFieldNamesRule;var _invariant=require("../../jsutils/invariant.mjs");var _GraphQLError=require("../../error/GraphQLError.mjs");function UniqueInputFieldNamesRule(context){const knownNameStack=[];let knownNames=Object.create(null);return{ObjectValue:{enter(){knownNameStack.push(knownNames);knownNames=Object.create(null)},leave(){const prevKnownNames=knownNameStack.pop();prevKnownNames||(0,_invariant.invariant)(false);knownNames=prevKnownNames}},ObjectField(node){const fieldName=node.name.value;if(knownNames[fieldName]){context.reportError(new _GraphQLError.GraphQLError(`There can be only one input field named "${fieldName}".`,{nodes:[knownNames[fieldName],node.name]}))}else{knownNames[fieldName]=node.name}}}}},{"../../error/GraphQLError.mjs":335,"../../jsutils/invariant.mjs":354}],446:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UniqueOperationNamesRule=UniqueOperationNamesRule;var _GraphQLError=require("../../error/GraphQLError.mjs");function UniqueOperationNamesRule(context){const knownOperationNames=Object.create(null);return{OperationDefinition(node){const operationName=node.name;if(operationName){if(knownOperationNames[operationName.value]){context.reportError(new _GraphQLError.GraphQLError(`There can be only one operation named "${operationName.value}".`,{nodes:[knownOperationNames[operationName.value],operationName]}))}else{knownOperationNames[operationName.value]=operationName}}return false},FragmentDefinition:()=>false}}},{"../../error/GraphQLError.mjs":335}],447:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UniqueOperationTypesRule=UniqueOperationTypesRule;var _GraphQLError=require("../../error/GraphQLError.mjs");function UniqueOperationTypesRule(context){const schema=context.getSchema();const definedOperationTypes=Object.create(null);const existingOperationTypes=schema?{query:schema.getQueryType(),mutation:schema.getMutationType(),subscription:schema.getSubscriptionType()}:{};return{SchemaDefinition:checkOperationTypes,SchemaExtension:checkOperationTypes};function checkOperationTypes(node){var _node$operationTypes;const operationTypesNodes=(_node$operationTypes=node.operationTypes)!==null&&_node$operationTypes!==void 0?_node$operationTypes:[];for(const operationType of operationTypesNodes){const operation=operationType.operation;const alreadyDefinedOperationType=definedOperationTypes[operation];if(existingOperationTypes[operation]){context.reportError(new _GraphQLError.GraphQLError(`Type for ${operation} already defined in the schema. It cannot be redefined.`,{nodes:operationType}))}else if(alreadyDefinedOperationType){context.reportError(new _GraphQLError.GraphQLError(`There can be only one ${operation} type in schema.`,{nodes:[alreadyDefinedOperationType,operationType]}))}else{definedOperationTypes[operation]=operationType}}return false}}},{"../../error/GraphQLError.mjs":335}],448:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UniqueTypeNamesRule=UniqueTypeNamesRule;var _GraphQLError=require("../../error/GraphQLError.mjs");function UniqueTypeNamesRule(context){const knownTypeNames=Object.create(null);const schema=context.getSchema();return{ScalarTypeDefinition:checkTypeName,ObjectTypeDefinition:checkTypeName,InterfaceTypeDefinition:checkTypeName,UnionTypeDefinition:checkTypeName,EnumTypeDefinition:checkTypeName,InputObjectTypeDefinition:checkTypeName};function checkTypeName(node){const typeName=node.name.value;if(schema!==null&&schema!==void 0&&schema.getType(typeName)){context.reportError(new _GraphQLError.GraphQLError(`Type "${typeName}" already exists in the schema. It cannot also be defined in this type definition.`,{nodes:node.name}));return}if(knownTypeNames[typeName]){context.reportError(new _GraphQLError.GraphQLError(`There can be only one type named "${typeName}".`,{nodes:[knownTypeNames[typeName],node.name]}))}else{knownTypeNames[typeName]=node.name}return false}}},{"../../error/GraphQLError.mjs":335}],449:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UniqueVariableNamesRule=UniqueVariableNamesRule;var _groupBy=require("../../jsutils/groupBy.mjs");var _GraphQLError=require("../../error/GraphQLError.mjs");function UniqueVariableNamesRule(context){return{OperationDefinition(operationNode){var _operationNode$variab;const variableDefinitions=(_operationNode$variab=operationNode.variableDefinitions)!==null&&_operationNode$variab!==void 0?_operationNode$variab:[];const seenVariableDefinitions=(0,_groupBy.groupBy)(variableDefinitions,node=>node.variable.name.value);for(const[variableName,variableNodes]of seenVariableDefinitions){if(variableNodes.length>1){context.reportError(new _GraphQLError.GraphQLError(`There can be only one variable named "$${variableName}".`,{nodes:variableNodes.map(node=>node.variable.name)}))}}}}}},{"../../error/GraphQLError.mjs":335,"../../jsutils/groupBy.mjs":350}],450:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ValuesOfCorrectTypeRule=ValuesOfCorrectTypeRule;var _didYouMean=require("../../jsutils/didYouMean.mjs");var _inspect=require("../../jsutils/inspect.mjs");var _keyMap=require("../../jsutils/keyMap.mjs");var _suggestionList=require("../../jsutils/suggestionList.mjs");var _GraphQLError=require("../../error/GraphQLError.mjs");var _printer=require("../../language/printer.mjs");var _definition=require("../../type/definition.mjs");function ValuesOfCorrectTypeRule(context){return{ListValue(node){const type=(0,_definition.getNullableType)(context.getParentInputType());if(!(0,_definition.isListType)(type)){isValidValueNode(context,node);return false}},ObjectValue(node){const type=(0,_definition.getNamedType)(context.getInputType());if(!(0,_definition.isInputObjectType)(type)){isValidValueNode(context,node);return false}const fieldNodeMap=(0,_keyMap.keyMap)(node.fields,field=>field.name.value);for(const fieldDef of Object.values(type.getFields())){const fieldNode=fieldNodeMap[fieldDef.name];if(!fieldNode&&(0,_definition.isRequiredInputField)(fieldDef)){const typeStr=(0,_inspect.inspect)(fieldDef.type);context.reportError(new _GraphQLError.GraphQLError(`Field "${type.name}.${fieldDef.name}" of required type "${typeStr}" was not provided.`,{nodes:node}))}}},ObjectField(node){const parentType=(0,_definition.getNamedType)(context.getParentInputType());const fieldType=context.getInputType();if(!fieldType&&(0,_definition.isInputObjectType)(parentType)){const suggestions=(0,_suggestionList.suggestionList)(node.name.value,Object.keys(parentType.getFields()));context.reportError(new _GraphQLError.GraphQLError(`Field "${node.name.value}" is not defined by type "${parentType.name}".`+(0,_didYouMean.didYouMean)(suggestions),{nodes:node}))}},NullValue(node){const type=context.getInputType();if((0,_definition.isNonNullType)(type)){context.reportError(new _GraphQLError.GraphQLError(`Expected value of type "${(0,_inspect.inspect)(type)}", found ${(0,_printer.print)(node)}.`,{nodes:node}))}},EnumValue:node=>isValidValueNode(context,node),IntValue:node=>isValidValueNode(context,node),FloatValue:node=>isValidValueNode(context,node),StringValue:node=>isValidValueNode(context,node),BooleanValue:node=>isValidValueNode(context,node)}}function isValidValueNode(context,node){const locationType=context.getInputType();if(!locationType){return}const type=(0,_definition.getNamedType)(locationType);if(!(0,_definition.isLeafType)(type)){const typeStr=(0,_inspect.inspect)(locationType);context.reportError(new _GraphQLError.GraphQLError(`Expected value of type "${typeStr}", found ${(0,_printer.print)(node)}.`,{nodes:node}));return}try{const parseResult=type.parseLiteral(node,undefined);if(parseResult===undefined){const typeStr=(0,_inspect.inspect)(locationType);context.reportError(new _GraphQLError.GraphQLError(`Expected value of type "${typeStr}", found ${(0,_printer.print)(node)}.`,{nodes:node}))}}catch(error){const typeStr=(0,_inspect.inspect)(locationType);if(error instanceof _GraphQLError.GraphQLError){context.reportError(error)}else{context.reportError(new _GraphQLError.GraphQLError(`Expected value of type "${typeStr}", found ${(0,_printer.print)(node)}; `+error.message,{nodes:node,originalError:error}))}}}},{"../../error/GraphQLError.mjs":335,"../../jsutils/didYouMean.mjs":349,"../../jsutils/inspect.mjs":352,"../../jsutils/keyMap.mjs":359,"../../jsutils/suggestionList.mjs":367,"../../language/printer.mjs":382,"../../type/definition.mjs":387}],451:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VariablesAreInputTypesRule=VariablesAreInputTypesRule;var _GraphQLError=require("../../error/GraphQLError.mjs");var _printer=require("../../language/printer.mjs");var _definition=require("../../type/definition.mjs");var _typeFromAST=require("../../utilities/typeFromAST.mjs");function VariablesAreInputTypesRule(context){return{VariableDefinition(node){const type=(0,_typeFromAST.typeFromAST)(context.getSchema(),node.type);if(type!==undefined&&!(0,_definition.isInputType)(type)){const variableName=node.variable.name.value;const typeName=(0,_printer.print)(node.type);context.reportError(new _GraphQLError.GraphQLError(`Variable "$${variableName}" cannot be non-input type "${typeName}".`,{nodes:node.type}))}}}}},{"../../error/GraphQLError.mjs":335,"../../language/printer.mjs":382,"../../type/definition.mjs":387,"../../utilities/typeFromAST.mjs":414}],452:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VariablesInAllowedPositionRule=VariablesInAllowedPositionRule;var _inspect=require("../../jsutils/inspect.mjs");var _GraphQLError=require("../../error/GraphQLError.mjs");var _kinds=require("../../language/kinds.mjs");var _definition=require("../../type/definition.mjs");var _typeComparators=require("../../utilities/typeComparators.mjs");var _typeFromAST=require("../../utilities/typeFromAST.mjs");function VariablesInAllowedPositionRule(context){let varDefMap=Object.create(null);return{OperationDefinition:{enter(){varDefMap=Object.create(null)},leave(operation){const usages=context.getRecursiveVariableUsages(operation);for(const{node,type,defaultValue}of usages){const varName=node.name.value;const varDef=varDefMap[varName];if(varDef&&type){const schema=context.getSchema();const varType=(0,_typeFromAST.typeFromAST)(schema,varDef.type);if(varType&&!allowedVariableUsage(schema,varType,varDef.defaultValue,type,defaultValue)){const varTypeStr=(0,_inspect.inspect)(varType);const typeStr=(0,_inspect.inspect)(type);context.reportError(new _GraphQLError.GraphQLError(`Variable "$${varName}" of type "${varTypeStr}" used in position expecting type "${typeStr}".`,{nodes:[varDef,node]}))}}}}},VariableDefinition(node){varDefMap[node.variable.name.value]=node}}}function allowedVariableUsage(schema,varType,varDefaultValue,locationType,locationDefaultValue){if((0,_definition.isNonNullType)(locationType)&&!(0,_definition.isNonNullType)(varType)){const hasNonNullVariableDefaultValue=varDefaultValue!=null&&varDefaultValue.kind!==_kinds.Kind.NULL;const hasLocationDefaultValue=locationDefaultValue!==undefined;if(!hasNonNullVariableDefaultValue&&!hasLocationDefaultValue){return false}const nullableLocationType=locationType.ofType;return(0,_typeComparators.isTypeSubTypeOf)(schema,varType,nullableLocationType)}return(0,_typeComparators.isTypeSubTypeOf)(schema,varType,locationType)}},{"../../error/GraphQLError.mjs":335,"../../jsutils/inspect.mjs":352,"../../language/kinds.mjs":375,"../../type/definition.mjs":387,"../../utilities/typeComparators.mjs":413,"../../utilities/typeFromAST.mjs":414}],453:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoDeprecatedCustomRule=NoDeprecatedCustomRule;var _invariant=require("../../../jsutils/invariant.mjs");var _GraphQLError=require("../../../error/GraphQLError.mjs");var _definition=require("../../../type/definition.mjs");function NoDeprecatedCustomRule(context){return{Field(node){const fieldDef=context.getFieldDef();const deprecationReason=fieldDef===null||fieldDef===void 0?void 0:fieldDef.deprecationReason;if(fieldDef&&deprecationReason!=null){const parentType=context.getParentType();parentType!=null||(0,_invariant.invariant)(false);context.reportError(new _GraphQLError.GraphQLError(`The field ${parentType.name}.${fieldDef.name} is deprecated. ${deprecationReason}`,{nodes:node}))}},Argument(node){const argDef=context.getArgument();const deprecationReason=argDef===null||argDef===void 0?void 0:argDef.deprecationReason;if(argDef&&deprecationReason!=null){const directiveDef=context.getDirective();if(directiveDef!=null){context.reportError(new _GraphQLError.GraphQLError(`Directive "@${directiveDef.name}" argument "${argDef.name}" is deprecated. ${deprecationReason}`,{nodes:node}))}else{const parentType=context.getParentType();const fieldDef=context.getFieldDef();parentType!=null&&fieldDef!=null||(0,_invariant.invariant)(false);context.reportError(new _GraphQLError.GraphQLError(`Field "${parentType.name}.${fieldDef.name}" argument "${argDef.name}" is deprecated. ${deprecationReason}`,{nodes:node}))}}},ObjectField(node){const inputObjectDef=(0,_definition.getNamedType)(context.getParentInputType());if((0,_definition.isInputObjectType)(inputObjectDef)){const inputFieldDef=inputObjectDef.getFields()[node.name.value];const deprecationReason=inputFieldDef===null||inputFieldDef===void 0?void 0:inputFieldDef.deprecationReason;if(deprecationReason!=null){context.reportError(new _GraphQLError.GraphQLError(`The input field ${inputObjectDef.name}.${inputFieldDef.name} is deprecated. ${deprecationReason}`,{nodes:node}))}}},EnumValue(node){const enumValueDef=context.getEnumValue();const deprecationReason=enumValueDef===null||enumValueDef===void 0?void 0:enumValueDef.deprecationReason;if(enumValueDef&&deprecationReason!=null){const enumTypeDef=(0,_definition.getNamedType)(context.getInputType());enumTypeDef!=null||(0,_invariant.invariant)(false);context.reportError(new _GraphQLError.GraphQLError(`The enum value "${enumTypeDef.name}.${enumValueDef.name}" is deprecated. ${deprecationReason}`,{nodes:node}))}}}}},{"../../../error/GraphQLError.mjs":335,"../../../jsutils/invariant.mjs":354,"../../../type/definition.mjs":387}],454:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoSchemaIntrospectionCustomRule=NoSchemaIntrospectionCustomRule;var _GraphQLError=require("../../../error/GraphQLError.mjs");var _definition=require("../../../type/definition.mjs");var _introspection=require("../../../type/introspection.mjs");function NoSchemaIntrospectionCustomRule(context){return{Field(node){const type=(0,_definition.getNamedType)(context.getType());if(type&&(0,_introspection.isIntrospectionType)(type)){context.reportError(new _GraphQLError.GraphQLError(`GraphQL introspection has been disabled, but the requested query contained the field "${node.name.value}".`,{nodes:node}))}}}}},{"../../../error/GraphQLError.mjs":335,"../../../type/definition.mjs":387,"../../../type/introspection.mjs":390}],455:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.specifiedSDLRules=exports.specifiedRules=void 0;var _ExecutableDefinitionsRule=require("./rules/ExecutableDefinitionsRule.mjs");var _FieldsOnCorrectTypeRule=require("./rules/FieldsOnCorrectTypeRule.mjs");var _FragmentsOnCompositeTypesRule=require("./rules/FragmentsOnCompositeTypesRule.mjs");var _KnownArgumentNamesRule=require("./rules/KnownArgumentNamesRule.mjs");var _KnownDirectivesRule=require("./rules/KnownDirectivesRule.mjs");var _KnownFragmentNamesRule=require("./rules/KnownFragmentNamesRule.mjs");var _KnownTypeNamesRule=require("./rules/KnownTypeNamesRule.mjs");var _LoneAnonymousOperationRule=require("./rules/LoneAnonymousOperationRule.mjs");var _LoneSchemaDefinitionRule=require("./rules/LoneSchemaDefinitionRule.mjs");var _NoFragmentCyclesRule=require("./rules/NoFragmentCyclesRule.mjs");var _NoUndefinedVariablesRule=require("./rules/NoUndefinedVariablesRule.mjs");var _NoUnusedFragmentsRule=require("./rules/NoUnusedFragmentsRule.mjs");var _NoUnusedVariablesRule=require("./rules/NoUnusedVariablesRule.mjs");var _OverlappingFieldsCanBeMergedRule=require("./rules/OverlappingFieldsCanBeMergedRule.mjs");var _PossibleFragmentSpreadsRule=require("./rules/PossibleFragmentSpreadsRule.mjs");var _PossibleTypeExtensionsRule=require("./rules/PossibleTypeExtensionsRule.mjs");var _ProvidedRequiredArgumentsRule=require("./rules/ProvidedRequiredArgumentsRule.mjs");var _ScalarLeafsRule=require("./rules/ScalarLeafsRule.mjs");var _SingleFieldSubscriptionsRule=require("./rules/SingleFieldSubscriptionsRule.mjs");var _UniqueArgumentDefinitionNamesRule=require("./rules/UniqueArgumentDefinitionNamesRule.mjs");var _UniqueArgumentNamesRule=require("./rules/UniqueArgumentNamesRule.mjs");var _UniqueDirectiveNamesRule=require("./rules/UniqueDirectiveNamesRule.mjs");var _UniqueDirectivesPerLocationRule=require("./rules/UniqueDirectivesPerLocationRule.mjs");var _UniqueEnumValueNamesRule=require("./rules/UniqueEnumValueNamesRule.mjs");var _UniqueFieldDefinitionNamesRule=require("./rules/UniqueFieldDefinitionNamesRule.mjs");var _UniqueFragmentNamesRule=require("./rules/UniqueFragmentNamesRule.mjs");var _UniqueInputFieldNamesRule=require("./rules/UniqueInputFieldNamesRule.mjs");var _UniqueOperationNamesRule=require("./rules/UniqueOperationNamesRule.mjs");var _UniqueOperationTypesRule=require("./rules/UniqueOperationTypesRule.mjs");var _UniqueTypeNamesRule=require("./rules/UniqueTypeNamesRule.mjs");var _UniqueVariableNamesRule=require("./rules/UniqueVariableNamesRule.mjs");var _ValuesOfCorrectTypeRule=require("./rules/ValuesOfCorrectTypeRule.mjs");var _VariablesAreInputTypesRule=require("./rules/VariablesAreInputTypesRule.mjs");var _VariablesInAllowedPositionRule=require("./rules/VariablesInAllowedPositionRule.mjs");const specifiedRules=Object.freeze([_ExecutableDefinitionsRule.ExecutableDefinitionsRule,_UniqueOperationNamesRule.UniqueOperationNamesRule,_LoneAnonymousOperationRule.LoneAnonymousOperationRule,_SingleFieldSubscriptionsRule.SingleFieldSubscriptionsRule,_KnownTypeNamesRule.KnownTypeNamesRule,_FragmentsOnCompositeTypesRule.FragmentsOnCompositeTypesRule,_VariablesAreInputTypesRule.VariablesAreInputTypesRule,_ScalarLeafsRule.ScalarLeafsRule,_FieldsOnCorrectTypeRule.FieldsOnCorrectTypeRule,_UniqueFragmentNamesRule.UniqueFragmentNamesRule,_KnownFragmentNamesRule.KnownFragmentNamesRule,_NoUnusedFragmentsRule.NoUnusedFragmentsRule,_PossibleFragmentSpreadsRule.PossibleFragmentSpreadsRule,_NoFragmentCyclesRule.NoFragmentCyclesRule,_UniqueVariableNamesRule.UniqueVariableNamesRule,_NoUndefinedVariablesRule.NoUndefinedVariablesRule,_NoUnusedVariablesRule.NoUnusedVariablesRule,_KnownDirectivesRule.KnownDirectivesRule,_UniqueDirectivesPerLocationRule.UniqueDirectivesPerLocationRule,_KnownArgumentNamesRule.KnownArgumentNamesRule,_UniqueArgumentNamesRule.UniqueArgumentNamesRule,_ValuesOfCorrectTypeRule.ValuesOfCorrectTypeRule,_ProvidedRequiredArgumentsRule.ProvidedRequiredArgumentsRule,_VariablesInAllowedPositionRule.VariablesInAllowedPositionRule,_OverlappingFieldsCanBeMergedRule.OverlappingFieldsCanBeMergedRule,_UniqueInputFieldNamesRule.UniqueInputFieldNamesRule]);exports.specifiedRules=specifiedRules;const specifiedSDLRules=Object.freeze([_LoneSchemaDefinitionRule.LoneSchemaDefinitionRule,_UniqueOperationTypesRule.UniqueOperationTypesRule,_UniqueTypeNamesRule.UniqueTypeNamesRule,_UniqueEnumValueNamesRule.UniqueEnumValueNamesRule,_UniqueFieldDefinitionNamesRule.UniqueFieldDefinitionNamesRule,_UniqueArgumentDefinitionNamesRule.UniqueArgumentDefinitionNamesRule,_UniqueDirectiveNamesRule.UniqueDirectiveNamesRule,_KnownTypeNamesRule.KnownTypeNamesRule,_KnownDirectivesRule.KnownDirectivesRule,_UniqueDirectivesPerLocationRule.UniqueDirectivesPerLocationRule,_PossibleTypeExtensionsRule.PossibleTypeExtensionsRule,_KnownArgumentNamesRule.KnownArgumentNamesOnDirectivesRule,_UniqueArgumentNamesRule.UniqueArgumentNamesRule,_UniqueInputFieldNamesRule.UniqueInputFieldNamesRule,_ProvidedRequiredArgumentsRule.ProvidedRequiredArgumentsOnDirectivesRule]);exports.specifiedSDLRules=specifiedSDLRules},{"./rules/ExecutableDefinitionsRule.mjs":419,"./rules/FieldsOnCorrectTypeRule.mjs":420,"./rules/FragmentsOnCompositeTypesRule.mjs":421,"./rules/KnownArgumentNamesRule.mjs":422,"./rules/KnownDirectivesRule.mjs":423,"./rules/KnownFragmentNamesRule.mjs":424,"./rules/KnownTypeNamesRule.mjs":425,"./rules/LoneAnonymousOperationRule.mjs":426,"./rules/LoneSchemaDefinitionRule.mjs":427,"./rules/NoFragmentCyclesRule.mjs":428,"./rules/NoUndefinedVariablesRule.mjs":429,"./rules/NoUnusedFragmentsRule.mjs":430,"./rules/NoUnusedVariablesRule.mjs":431,"./rules/OverlappingFieldsCanBeMergedRule.mjs":432,"./rules/PossibleFragmentSpreadsRule.mjs":433,"./rules/PossibleTypeExtensionsRule.mjs":434,"./rules/ProvidedRequiredArgumentsRule.mjs":435,"./rules/ScalarLeafsRule.mjs":436,"./rules/SingleFieldSubscriptionsRule.mjs":437,"./rules/UniqueArgumentDefinitionNamesRule.mjs":438,"./rules/UniqueArgumentNamesRule.mjs":439,"./rules/UniqueDirectiveNamesRule.mjs":440,"./rules/UniqueDirectivesPerLocationRule.mjs":441,"./rules/UniqueEnumValueNamesRule.mjs":442,"./rules/UniqueFieldDefinitionNamesRule.mjs":443,"./rules/UniqueFragmentNamesRule.mjs":444,"./rules/UniqueInputFieldNamesRule.mjs":445,"./rules/UniqueOperationNamesRule.mjs":446,"./rules/UniqueOperationTypesRule.mjs":447,"./rules/UniqueTypeNamesRule.mjs":448,"./rules/UniqueVariableNamesRule.mjs":449,"./rules/ValuesOfCorrectTypeRule.mjs":450,"./rules/VariablesAreInputTypesRule.mjs":451,"./rules/VariablesInAllowedPositionRule.mjs":452}],456:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.assertValidSDL=assertValidSDL;exports.assertValidSDLExtension=assertValidSDLExtension;exports.validate=validate;exports.validateSDL=validateSDL;var _devAssert=require("../jsutils/devAssert.mjs");var _GraphQLError=require("../error/GraphQLError.mjs");var _visitor=require("../language/visitor.mjs");var _validate=require("../type/validate.mjs");var _TypeInfo=require("../utilities/TypeInfo.mjs");var _specifiedRules=require("./specifiedRules.mjs");var _ValidationContext=require("./ValidationContext.mjs");function validate(schema,documentAST,rules=_specifiedRules.specifiedRules,options,typeInfo=new _TypeInfo.TypeInfo(schema)){var _options$maxErrors;const maxErrors=(_options$maxErrors=options===null||options===void 0?void 0:options.maxErrors)!==null&&_options$maxErrors!==void 0?_options$maxErrors:100;documentAST||(0,_devAssert.devAssert)(false,"Must provide document.");(0,_validate.assertValidSchema)(schema);const abortObj=Object.freeze({});const errors=[];const context=new _ValidationContext.ValidationContext(schema,documentAST,typeInfo,error=>{if(errors.length>=maxErrors){errors.push(new _GraphQLError.GraphQLError("Too many validation errors, error limit reached. Validation aborted."));throw abortObj}errors.push(error)});const visitor=(0,_visitor.visitInParallel)(rules.map(rule=>rule(context)));try{(0,_visitor.visit)(documentAST,(0,_TypeInfo.visitWithTypeInfo)(typeInfo,visitor))}catch(e){if(e!==abortObj){throw e}}return errors}function validateSDL(documentAST,schemaToExtend,rules=_specifiedRules.specifiedSDLRules){const errors=[];const context=new _ValidationContext.SDLValidationContext(documentAST,schemaToExtend,error=>{errors.push(error)});const visitors=rules.map(rule=>rule(context));(0,_visitor.visit)(documentAST,(0,_visitor.visitInParallel)(visitors));return errors}function assertValidSDL(documentAST){const errors=validateSDL(documentAST);if(errors.length!==0){throw new Error(errors.map(error=>error.message).join("\n\n"))}}function assertValidSDLExtension(documentAST,schema){const errors=validateSDL(documentAST,schema);if(errors.length!==0){throw new Error(errors.map(error=>error.message).join("\n\n"))}}},{"../error/GraphQLError.mjs":335,"../jsutils/devAssert.mjs":348,"../language/visitor.mjs":385,"../type/validate.mjs":393,"../utilities/TypeInfo.mjs":394,"./ValidationContext.mjs":417,"./specifiedRules.mjs":455}],457:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.versionInfo=exports.version=void 0;const version="16.6.0";exports.version=version;const versionInfo=Object.freeze({major:16,minor:6,patch:0,preReleaseTag:null});exports.versionInfo=versionInfo},{}],458:[function(require,module,exports){"use strict";var origSymbol=typeof Symbol!=="undefined"&&Symbol;var hasSymbolSham=require("./shams");module.exports=function hasNativeSymbols(){if(typeof origSymbol!=="function"){return false}if(typeof Symbol!=="function"){return false}if(typeof origSymbol("foo")!=="symbol"){return false}if(typeof Symbol("bar")!=="symbol"){return false}return hasSymbolSham()}},{"./shams":459}],459:[function(require,module,exports){"use strict";module.exports=function hasSymbols(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function"){return false}if(typeof Symbol.iterator==="symbol"){return true}var obj={};var sym=Symbol("test");var symObj=Object(sym);if(typeof sym==="string"){return false}if(Object.prototype.toString.call(sym)!=="[object Symbol]"){return false}if(Object.prototype.toString.call(symObj)!=="[object Symbol]"){return false}var symVal=42;obj[sym]=symVal;for(sym in obj){return false}if(typeof Object.keys==="function"&&Object.keys(obj).length!==0){return false}if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(obj).length!==0){return false}var syms=Object.getOwnPropertySymbols(obj);if(syms.length!==1||syms[0]!==sym){return false}if(!Object.prototype.propertyIsEnumerable.call(obj,sym)){return false}if(typeof Object.getOwnPropertyDescriptor==="function"){var descriptor=Object.getOwnPropertyDescriptor(obj,sym);if(descriptor.value!==symVal||descriptor.enumerable!==true){return false}}return true}},{}],460:[function(require,module,exports){"use strict";var hasSymbols=require("has-symbols/shams");module.exports=function hasToStringTagShams(){return hasSymbols()&&!!Symbol.toStringTag}},{"has-symbols/shams":459}],461:[function(require,module,exports){"use strict";var bind=require("function-bind");module.exports=bind.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":319}],462:[function(require,module,exports){"use strict";var Buffer=require("safe-buffer").Buffer;var Transform=require("readable-stream").Transform;var inherits=require("inherits");function throwIfNotStringOrBuffer(val,prefix){if(!Buffer.isBuffer(val)&&typeof val!=="string"){throw new TypeError(prefix+" must be a string or a buffer")}}function HashBase(blockSize){Transform.call(this);this._block=Buffer.allocUnsafe(blockSize);this._blockSize=blockSize;this._blockOffset=0;this._length=[0,0,0,0];this._finalized=false}inherits(HashBase,Transform);HashBase.prototype._transform=function(chunk,encoding,callback){var error=null;try{this.update(chunk,encoding)}catch(err){error=err}callback(error)};HashBase.prototype._flush=function(callback){var error=null;try{this.push(this.digest())}catch(err){error=err}callback(error)};HashBase.prototype.update=function(data,encoding){throwIfNotStringOrBuffer(data,"Data");if(this._finalized)throw new Error("Digest already called");if(!Buffer.isBuffer(data))data=Buffer.from(data,encoding);var block=this._block;var offset=0;while(this._blockOffset+data.length-offset>=this._blockSize){for(var i=this._blockOffset;i<this._blockSize;)block[i++]=data[offset++];this._update();this._blockOffset=0}while(offset<data.length)block[this._blockOffset++]=data[offset++];for(var j=0,carry=data.length*8;carry>0;++j){this._length[j]+=carry;carry=this._length[j]/4294967296|0;if(carry>0)this._length[j]-=4294967296*carry}return this};HashBase.prototype._update=function(){throw new Error("_update is not implemented")};HashBase.prototype.digest=function(encoding){if(this._finalized)throw new Error("Digest already called");this._finalized=true;var digest=this._digest();if(encoding!==undefined)digest=digest.toString(encoding);this._block.fill(0);this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return digest};HashBase.prototype._digest=function(){throw new Error("_digest is not implemented")};module.exports=HashBase},{inherits:492,"readable-stream":477,"safe-buffer":787}],463:[function(require,module,exports){arguments[4][254][0].apply(exports,arguments)},{dup:254}],464:[function(require,module,exports){arguments[4][255][0].apply(exports,arguments)},{"./_stream_readable":466,"./_stream_writable":468,_process:519,dup:255,inherits:492}],465:[function(require,module,exports){arguments[4][256][0].apply(exports,arguments)},{"./_stream_transform":467,dup:256,inherits:492}],466:[function(require,module,exports){arguments[4][257][0].apply(exports,arguments)},{"../errors":463,"./_stream_duplex":464,"./internal/streams/async_iterator":469,"./internal/streams/buffer_list":470,"./internal/streams/destroy":471,"./internal/streams/from":473,"./internal/streams/state":475,"./internal/streams/stream":476,_process:519,buffer:269,dup:257,events:314,inherits:492,"string_decoder/":812,util:226}],467:[function(require,module,exports){arguments[4][258][0].apply(exports,arguments)},{"../errors":463,"./_stream_duplex":464,dup:258,inherits:492}],468:[function(require,module,exports){arguments[4][259][0].apply(exports,arguments)},{"../errors":463,"./_stream_duplex":464,"./internal/streams/destroy":471,"./internal/streams/state":475,"./internal/streams/stream":476,_process:519,buffer:269,dup:259,inherits:492,"util-deprecate":816}],469:[function(require,module,exports){arguments[4][260][0].apply(exports,arguments)},{"./end-of-stream":472,_process:519,dup:260}],470:[function(require,module,exports){arguments[4][261][0].apply(exports,arguments)},{buffer:269,dup:261,util:226}],471:[function(require,module,exports){arguments[4][262][0].apply(exports,arguments)},{_process:519,dup:262}],472:[function(require,module,exports){arguments[4][263][0].apply(exports,arguments)},{"../../../errors":463,dup:263}],473:[function(require,module,exports){arguments[4][264][0].apply(exports,arguments)},{dup:264}],474:[function(require,module,exports){arguments[4][265][0].apply(exports,arguments)},{"../../../errors":463,"./end-of-stream":472,dup:265}],475:[function(require,module,exports){arguments[4][266][0].apply(exports,arguments)},{"../../../errors":463,dup:266}],476:[function(require,module,exports){arguments[4][267][0].apply(exports,arguments)},{dup:267,events:314}],477:[function(require,module,exports){arguments[4][268][0].apply(exports,arguments)},{"./lib/_stream_duplex.js":464,"./lib/_stream_passthrough.js":465,"./lib/_stream_readable.js":466,"./lib/_stream_transform.js":467,"./lib/_stream_writable.js":468,"./lib/internal/streams/end-of-stream.js":472,"./lib/internal/streams/pipeline.js":474,dup:268}],478:[function(require,module,exports){var hash=exports;hash.utils=require("./hash/utils");hash.common=require("./hash/common");hash.sha=require("./hash/sha");hash.ripemd=require("./hash/ripemd");hash.hmac=require("./hash/hmac");hash.sha1=hash.sha.sha1;hash.sha256=hash.sha.sha256;hash.sha224=hash.sha.sha224;hash.sha384=hash.sha.sha384;hash.sha512=hash.sha.sha512;hash.ripemd160=hash.ripemd.ripemd160},{"./hash/common":479,"./hash/hmac":480,"./hash/ripemd":481,"./hash/sha":482,"./hash/utils":489}],479:[function(require,module,exports){"use strict";var utils=require("./utils");var assert=require("minimalistic-assert");function BlockHash(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}exports.BlockHash=BlockHash;BlockHash.prototype.update=function update(msg,enc){msg=utils.toArray(msg,enc);if(!this.pending)this.pending=msg;else this.pending=this.pending.concat(msg);this.pendingTotal+=msg.length;if(this.pending.length>=this._delta8){msg=this.pending;var r=msg.length%this._delta8;this.pending=msg.slice(msg.length-r,msg.length);if(this.pending.length===0)this.pending=null;msg=utils.join32(msg,0,msg.length-r,this.endian);for(var i=0;i<msg.length;i+=this._delta32)this._update(msg,i,i+this._delta32)}return this};BlockHash.prototype.digest=function digest(enc){this.update(this._pad());assert(this.pending===null);return this._digest(enc)};BlockHash.prototype._pad=function pad(){var len=this.pendingTotal;var bytes=this._delta8;var k=bytes-(len+this.padLength)%bytes;var res=new Array(k+this.padLength);res[0]=128;for(var i=1;i<k;i++)res[i]=0;len<<=3;if(this.endian==="big"){for(var t=8;t<this.padLength;t++)res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=len>>>24&255;res[i++]=len>>>16&255;res[i++]=len>>>8&255;res[i++]=len&255}else{res[i++]=len&255;res[i++]=len>>>8&255;res[i++]=len>>>16&255;res[i++]=len>>>24&255;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;for(t=8;t<this.padLength;t++)res[i++]=0}return res}},{"./utils":489,"minimalistic-assert":503}],480:[function(require,module,exports){"use strict";var utils=require("./utils");var assert=require("minimalistic-assert");function Hmac(hash,key,enc){if(!(this instanceof Hmac))return new Hmac(hash,key,enc);this.Hash=hash;this.blockSize=hash.blockSize/8;this.outSize=hash.outSize/8;this.inner=null;this.outer=null;this._init(utils.toArray(key,enc))}module.exports=Hmac;Hmac.prototype._init=function init(key){if(key.length>this.blockSize)key=(new this.Hash).update(key).digest();assert(key.length<=this.blockSize);for(var i=key.length;i<this.blockSize;i++)key.push(0);for(i=0;i<key.length;i++)key[i]^=54;this.inner=(new this.Hash).update(key);for(i=0;i<key.length;i++)key[i]^=106;this.outer=(new this.Hash).update(key)};Hmac.prototype.update=function update(msg,enc){this.inner.update(msg,enc);return this};Hmac.prototype.digest=function digest(enc){this.outer.update(this.inner.digest());return this.outer.digest(enc)}},{"./utils":489,"minimalistic-assert":503}],481:[function(require,module,exports){"use strict";var utils=require("./utils");var common=require("./common");var rotl32=utils.rotl32;var sum32=utils.sum32;var sum32_3=utils.sum32_3;var sum32_4=utils.sum32_4;var BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}utils.inherits(RIPEMD160,BlockHash);exports.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function update(msg,start){var A=this.h[0];var B=this.h[1];var C=this.h[2];var D=this.h[3];var E=this.h[4];var Ah=A;var Bh=B;var Ch=C;var Dh=D;var Eh=E;for(var j=0;j<80;j++){var T=sum32(rotl32(sum32_4(A,f(j,B,C,D),msg[r[j]+start],K(j)),s[j]),E);A=E;E=D;D=rotl32(C,10);C=B;B=T;T=sum32(rotl32(sum32_4(Ah,f(79-j,Bh,Ch,Dh),msg[rh[j]+start],Kh(j)),sh[j]),Eh);Ah=Eh;Eh=Dh;Dh=rotl32(Ch,10);Ch=Bh;Bh=T}T=sum32_3(this.h[1],C,Dh);this.h[1]=sum32_3(this.h[2],D,Eh);this.h[2]=sum32_3(this.h[3],E,Ah);this.h[3]=sum32_3(this.h[4],A,Bh);this.h[4]=sum32_3(this.h[0],B,Ch);this.h[0]=T};RIPEMD160.prototype._digest=function digest(enc){if(enc==="hex")return utils.toHex32(this.h,"little");else return utils.split32(this.h,"little")};function f(j,x,y,z){if(j<=15)return x^y^z;else if(j<=31)return x&y|~x&z;else if(j<=47)return(x|~y)^z;else if(j<=63)return x&z|y&~z;else return x^(y|~z)}function K(j){if(j<=15)return 0;else if(j<=31)return 1518500249;else if(j<=47)return 1859775393;else if(j<=63)return 2400959708;else return 2840853838}function Kh(j){if(j<=15)return 1352829926;else if(j<=31)return 1548603684;else if(j<=47)return 1836072691;else if(j<=63)return 2053994217;else return 0}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":479,"./utils":489}],482:[function(require,module,exports){"use strict";exports.sha1=require("./sha/1");exports.sha224=require("./sha/224");exports.sha256=require("./sha/256");exports.sha384=require("./sha/384");exports.sha512=require("./sha/512")},{"./sha/1":483,"./sha/224":484,"./sha/256":485,"./sha/384":486,"./sha/512":487}],483:[function(require,module,exports){"use strict";var utils=require("../utils");var common=require("../common");var shaCommon=require("./common");var rotl32=utils.rotl32;var sum32=utils.sum32;var sum32_5=utils.sum32_5;var ft_1=shaCommon.ft_1;var BlockHash=common.BlockHash;var sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=new Array(80)}utils.inherits(SHA1,BlockHash);module.exports=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function _update(msg,start){var W=this.W;for(var i=0;i<16;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=rotl32(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);var a=this.h[0];var b=this.h[1];var c=this.h[2];var d=this.h[3];var e=this.h[4];for(i=0;i<W.length;i++){var s=~~(i/20);var t=sum32_5(rotl32(a,5),ft_1(s,b,c,d),e,W[i],sha1_K[s]);e=d;d=c;c=rotl32(b,30);b=a;a=t}this.h[0]=sum32(this.h[0],a);this.h[1]=sum32(this.h[1],b);this.h[2]=sum32(this.h[2],c);this.h[3]=sum32(this.h[3],d);this.h[4]=sum32(this.h[4],e)};SHA1.prototype._digest=function digest(enc){if(enc==="hex")return utils.toHex32(this.h,"big");else return utils.split32(this.h,"big")}},{"../common":479,"../utils":489,"./common":488}],484:[function(require,module,exports){"use strict";var utils=require("../utils");var SHA256=require("./256");function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils.inherits(SHA224,SHA256);module.exports=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function digest(enc){if(enc==="hex")return utils.toHex32(this.h.slice(0,7),"big");else return utils.split32(this.h.slice(0,7),"big")}},{"../utils":489,"./256":485}],485:[function(require,module,exports){"use strict";var utils=require("../utils");var common=require("../common");var shaCommon=require("./common");var assert=require("minimalistic-assert");var sum32=utils.sum32;var sum32_4=utils.sum32_4;var sum32_5=utils.sum32_5;var ch32=shaCommon.ch32;var maj32=shaCommon.maj32;var s0_256=shaCommon.s0_256;var s1_256=shaCommon.s1_256;var g0_256=shaCommon.g0_256;var g1_256=shaCommon.g1_256;var BlockHash=common.BlockHash;var sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256(){if(!(this instanceof SHA256))return new SHA256;BlockHash.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];this.k=sha256_K;this.W=new Array(64)}utils.inherits(SHA256,BlockHash);module.exports=SHA256;SHA256.blockSize=512;SHA256.outSize=256;SHA256.hmacStrength=192;SHA256.padLength=64;SHA256.prototype._update=function _update(msg,start){var W=this.W;for(var i=0;i<16;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=sum32_4(g1_256(W[i-2]),W[i-7],g0_256(W[i-15]),W[i-16]);var a=this.h[0];var b=this.h[1];var c=this.h[2];var d=this.h[3];var e=this.h[4];var f=this.h[5];var g=this.h[6];var h=this.h[7];assert(this.k.length===W.length);for(i=0;i<W.length;i++){var T1=sum32_5(h,s1_256(e),ch32(e,f,g),this.k[i],W[i]);var T2=sum32(s0_256(a),maj32(a,b,c));h=g;g=f;f=e;e=sum32(d,T1);d=c;c=b;b=a;a=sum32(T1,T2)}this.h[0]=sum32(this.h[0],a);this.h[1]=sum32(this.h[1],b);this.h[2]=sum32(this.h[2],c);this.h[3]=sum32(this.h[3],d);this.h[4]=sum32(this.h[4],e);this.h[5]=sum32(this.h[5],f);this.h[6]=sum32(this.h[6],g);this.h[7]=sum32(this.h[7],h)};SHA256.prototype._digest=function digest(enc){if(enc==="hex")return utils.toHex32(this.h,"big");else return utils.split32(this.h,"big")}},{"../common":479,"../utils":489,"./common":488,"minimalistic-assert":503}],486:[function(require,module,exports){"use strict";var utils=require("../utils");var SHA512=require("./512");function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils.inherits(SHA384,SHA512);module.exports=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function digest(enc){if(enc==="hex")return utils.toHex32(this.h.slice(0,12),"big");else return utils.split32(this.h.slice(0,12),"big")}},{"../utils":489,"./512":487}],487:[function(require,module,exports){"use strict";var utils=require("../utils");var common=require("../common");var assert=require("minimalistic-assert");var rotr64_hi=utils.rotr64_hi;var rotr64_lo=utils.rotr64_lo;var shr64_hi=utils.shr64_hi;var shr64_lo=utils.shr64_lo;var sum64=utils.sum64;var sum64_hi=utils.sum64_hi;var sum64_lo=utils.sum64_lo;var sum64_4_hi=utils.sum64_4_hi;var sum64_4_lo=utils.sum64_4_lo;var sum64_5_hi=utils.sum64_5_hi;var sum64_5_lo=utils.sum64_5_lo;var BlockHash=common.BlockHash;var sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512(){if(!(this instanceof SHA512))return new SHA512;BlockHash.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=sha512_K;this.W=new Array(160)}utils.inherits(SHA512,BlockHash);module.exports=SHA512;SHA512.blockSize=1024;SHA512.outSize=512;SHA512.hmacStrength=192;SHA512.padLength=128;SHA512.prototype._prepareBlock=function _prepareBlock(msg,start){var W=this.W;for(var i=0;i<32;i++)W[i]=msg[start+i];for(;i<W.length;i+=2){var c0_hi=g1_512_hi(W[i-4],W[i-3]);var c0_lo=g1_512_lo(W[i-4],W[i-3]);var c1_hi=W[i-14];var c1_lo=W[i-13];var c2_hi=g0_512_hi(W[i-30],W[i-29]);var c2_lo=g0_512_lo(W[i-30],W[i-29]);var c3_hi=W[i-32];var c3_lo=W[i-31];W[i]=sum64_4_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo);W[i+1]=sum64_4_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo)}};SHA512.prototype._update=function _update(msg,start){this._prepareBlock(msg,start);var W=this.W;var ah=this.h[0];var al=this.h[1];var bh=this.h[2];var bl=this.h[3];var ch=this.h[4];var cl=this.h[5];var dh=this.h[6];var dl=this.h[7];var eh=this.h[8];var el=this.h[9];var fh=this.h[10];var fl=this.h[11];var gh=this.h[12];var gl=this.h[13];var hh=this.h[14];var hl=this.h[15];assert(this.k.length===W.length);for(var i=0;i<W.length;i+=2){var c0_hi=hh;var c0_lo=hl;var c1_hi=s1_512_hi(eh,el);var c1_lo=s1_512_lo(eh,el);var c2_hi=ch64_hi(eh,el,fh,fl,gh,gl);var c2_lo=ch64_lo(eh,el,fh,fl,gh,gl);var c3_hi=this.k[i];var c3_lo=this.k[i+1];var c4_hi=W[i];var c4_lo=W[i+1];var T1_hi=sum64_5_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);var T1_lo=sum64_5_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);c0_hi=s0_512_hi(ah,al);c0_lo=s0_512_lo(ah,al);c1_hi=maj64_hi(ah,al,bh,bl,ch,cl);c1_lo=maj64_lo(ah,al,bh,bl,ch,cl);var T2_hi=sum64_hi(c0_hi,c0_lo,c1_hi,c1_lo);var T2_lo=sum64_lo(c0_hi,c0_lo,c1_hi,c1_lo);hh=gh;hl=gl;gh=fh;gl=fl;fh=eh;fl=el;eh=sum64_hi(dh,dl,T1_hi,T1_lo);el=sum64_lo(dl,dl,T1_hi,T1_lo);dh=ch;dl=cl;ch=bh;cl=bl;bh=ah;bl=al;ah=sum64_hi(T1_hi,T1_lo,T2_hi,T2_lo);al=sum64_lo(T1_hi,T1_lo,T2_hi,T2_lo)}sum64(this.h,0,ah,al);sum64(this.h,2,bh,bl);sum64(this.h,4,ch,cl);sum64(this.h,6,dh,dl);sum64(this.h,8,eh,el);sum64(this.h,10,fh,fl);sum64(this.h,12,gh,gl);sum64(this.h,14,hh,hl)};SHA512.prototype._digest=function digest(enc){if(enc==="hex")return utils.toHex32(this.h,"big");else return utils.split32(this.h,"big")};function ch64_hi(xh,xl,yh,yl,zh){var r=xh&yh^~xh&zh;if(r<0)r+=4294967296;return r}function ch64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^~xl&zl;if(r<0)r+=4294967296;return r}function maj64_hi(xh,xl,yh,yl,zh){var r=xh&yh^xh&zh^yh&zh;if(r<0)r+=4294967296;return r}function maj64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^xl&zl^yl&zl;if(r<0)r+=4294967296;return r}function s0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,28);var c1_hi=rotr64_hi(xl,xh,2);var c2_hi=rotr64_hi(xl,xh,7);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=4294967296;return r}function s0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,28);var c1_lo=rotr64_lo(xl,xh,2);var c2_lo=rotr64_lo(xl,xh,7);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=4294967296;return r}function s1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,14);var c1_hi=rotr64_hi(xh,xl,18);var c2_hi=rotr64_hi(xl,xh,9);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=4294967296;return r}function s1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,14);var c1_lo=rotr64_lo(xh,xl,18);var c2_lo=rotr64_lo(xl,xh,9);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=4294967296;return r}function g0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,1);var c1_hi=rotr64_hi(xh,xl,8);var c2_hi=shr64_hi(xh,xl,7);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=4294967296;return r}function g0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,1);var c1_lo=rotr64_lo(xh,xl,8);var c2_lo=shr64_lo(xh,xl,7);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=4294967296;return r}function g1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,19);var c1_hi=rotr64_hi(xl,xh,29);var c2_hi=shr64_hi(xh,xl,6);var r=c0_hi^c1_hi^c2_hi;if(r<0)r+=4294967296;return r}function g1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,19);var c1_lo=rotr64_lo(xl,xh,29);var c2_lo=shr64_lo(xh,xl,6);var r=c0_lo^c1_lo^c2_lo;if(r<0)r+=4294967296;return r}},{"../common":479,"../utils":489,"minimalistic-assert":503}],488:[function(require,module,exports){"use strict";var utils=require("../utils");var rotr32=utils.rotr32;function ft_1(s,x,y,z){if(s===0)return ch32(x,y,z);if(s===1||s===3)return p32(x,y,z);if(s===2)return maj32(x,y,z)}exports.ft_1=ft_1;function ch32(x,y,z){return x&y^~x&z}exports.ch32=ch32;function maj32(x,y,z){return x&y^x&z^y&z}exports.maj32=maj32;function p32(x,y,z){return x^y^z}exports.p32=p32;function s0_256(x){return rotr32(x,2)^rotr32(x,13)^rotr32(x,22)}exports.s0_256=s0_256;function s1_256(x){return rotr32(x,6)^rotr32(x,11)^rotr32(x,25)}exports.s1_256=s1_256;function g0_256(x){return rotr32(x,7)^rotr32(x,18)^x>>>3}exports.g0_256=g0_256;function g1_256(x){return rotr32(x,17)^rotr32(x,19)^x>>>10}exports.g1_256=g1_256},{"../utils":489}],489:[function(require,module,exports){"use strict";var assert=require("minimalistic-assert");var inherits=require("inherits");exports.inherits=inherits;function isSurrogatePair(msg,i){if((msg.charCodeAt(i)&64512)!==55296){return false}if(i<0||i+1>=msg.length){return false}return(msg.charCodeAt(i+1)&64512)===56320}function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if(typeof msg==="string"){if(!enc){var p=0;for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i);if(c<128){res[p++]=c}else if(c<2048){res[p++]=c>>6|192;res[p++]=c&63|128}else if(isSurrogatePair(msg,i)){c=65536+((c&1023)<<10)+(msg.charCodeAt(++i)&1023);res[p++]=c>>18|240;res[p++]=c>>12&63|128;res[p++]=c>>6&63|128;res[p++]=c&63|128}else{res[p++]=c>>12|224;res[p++]=c>>6&63|128;res[p++]=c&63|128}}}else if(enc==="hex"){msg=msg.replace(/[^a-z0-9]+/gi,"");if(msg.length%2!==0)msg="0"+msg;for(i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16))}}else{for(i=0;i<msg.length;i++)res[i]=msg[i]|0}return res}exports.toArray=toArray;function toHex(msg){var res="";for(var i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res}exports.toHex=toHex;function htonl(w){var res=w>>>24|w>>>8&65280|w<<8&16711680|(w&255)<<24;return res>>>0}exports.htonl=htonl;function toHex32(msg,endian){var res="";for(var i=0;i<msg.length;i++){var w=msg[i];if(endian==="little")w=htonl(w);res+=zero8(w.toString(16))}return res}exports.toHex32=toHex32;function zero2(word){if(word.length===1)return"0"+word;else return word}exports.zero2=zero2;function zero8(word){if(word.length===7)return"0"+word;else if(word.length===6)return"00"+word;else if(word.length===5)return"000"+word;else if(word.length===4)return"0000"+word;else if(word.length===3)return"00000"+word;else if(word.length===2)return"000000"+word;else if(word.length===1)return"0000000"+word;else return word}exports.zero8=zero8;function join32(msg,start,end,endian){var len=end-start;assert(len%4===0);var res=new Array(len/4);for(var i=0,k=start;i<res.length;i++,k+=4){var w;if(endian==="big")w=msg[k]<<24|msg[k+1]<<16|msg[k+2]<<8|msg[k+3];else w=msg[k+3]<<24|msg[k+2]<<16|msg[k+1]<<8|msg[k];res[i]=w>>>0}return res}exports.join32=join32;function split32(msg,endian){var res=new Array(msg.length*4);for(var i=0,k=0;i<msg.length;i++,k+=4){var m=msg[i];if(endian==="big"){res[k]=m>>>24;res[k+1]=m>>>16&255;res[k+2]=m>>>8&255;res[k+3]=m&255}else{res[k+3]=m>>>24;res[k+2]=m>>>16&255;res[k+1]=m>>>8&255;res[k]=m&255}}return res}exports.split32=split32;function rotr32(w,b){return w>>>b|w<<32-b}exports.rotr32=rotr32;function rotl32(w,b){return w<<b|w>>>32-b}exports.rotl32=rotl32;function sum32(a,b){return a+b>>>0}exports.sum32=sum32;function sum32_3(a,b,c){return a+b+c>>>0}exports.sum32_3=sum32_3;function sum32_4(a,b,c,d){return a+b+c+d>>>0}exports.sum32_4=sum32_4;function sum32_5(a,b,c,d,e){return a+b+c+d+e>>>0}exports.sum32_5=sum32_5;function sum64(buf,pos,ah,al){var bh=buf[pos];var bl=buf[pos+1];var lo=al+bl>>>0;var hi=(lo<al?1:0)+ah+bh;buf[pos]=hi>>>0;buf[pos+1]=lo}exports.sum64=sum64;function sum64_hi(ah,al,bh,bl){var lo=al+bl>>>0;var hi=(lo<al?1:0)+ah+bh;return hi>>>0}exports.sum64_hi=sum64_hi;function sum64_lo(ah,al,bh,bl){var lo=al+bl;return lo>>>0}exports.sum64_lo=sum64_lo;function sum64_4_hi(ah,al,bh,bl,ch,cl,dh,dl){var carry=0;var lo=al;lo=lo+bl>>>0;carry+=lo<al?1:0;lo=lo+cl>>>0;carry+=lo<cl?1:0;lo=lo+dl>>>0;carry+=lo<dl?1:0;var hi=ah+bh+ch+dh+carry;return hi>>>0}exports.sum64_4_hi=sum64_4_hi;function sum64_4_lo(ah,al,bh,bl,ch,cl,dh,dl){var lo=al+bl+cl+dl;return lo>>>0}exports.sum64_4_lo=sum64_4_lo;function sum64_5_hi(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var carry=0;var lo=al;lo=lo+bl>>>0;carry+=lo<al?1:0;lo=lo+cl>>>0;carry+=lo<cl?1:0;lo=lo+dl>>>0;carry+=lo<dl?1:0;lo=lo+el>>>0;carry+=lo<el?1:0;var hi=ah+bh+ch+dh+eh+carry;return hi>>>0}exports.sum64_5_hi=sum64_5_hi;function sum64_5_lo(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var lo=al+bl+cl+dl+el;return lo>>>0}exports.sum64_5_lo=sum64_5_lo;function rotr64_hi(ah,al,num){var r=al<<32-num|ah>>>num;return r>>>0}exports.rotr64_hi=rotr64_hi;function rotr64_lo(ah,al,num){var r=ah<<32-num|al>>>num;return r>>>0}exports.rotr64_lo=rotr64_lo;function shr64_hi(ah,al,num){return ah>>>num}exports.shr64_hi=shr64_hi;function shr64_lo(ah,al,num){var r=ah<<32-num|al>>>num;return r>>>0}exports.shr64_lo=shr64_lo},{inherits:492,"minimalistic-assert":503}],490:[function(require,module,exports){"use strict";var hash=require("hash.js");var utils=require("minimalistic-crypto-utils");var assert=require("minimalistic-assert");function HmacDRBG(options){if(!(this instanceof HmacDRBG))return new HmacDRBG(options);this.hash=options.hash;this.predResist=!!options.predResist;this.outLen=this.hash.outSize;this.minEntropy=options.minEntropy||this.hash.hmacStrength;this._reseed=null;this.reseedInterval=null;this.K=null;this.V=null;var entropy=utils.toArray(options.entropy,options.entropyEnc||"hex");var nonce=utils.toArray(options.nonce,options.nonceEnc||"hex");var pers=utils.toArray(options.pers,options.persEnc||"hex");assert(entropy.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(entropy,nonce,pers)}module.exports=HmacDRBG;HmacDRBG.prototype._init=function init(entropy,nonce,pers){var seed=entropy.concat(nonce).concat(pers);this.K=new Array(this.outLen/8);this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++){this.K[i]=0;this.V[i]=1}this._update(seed);this._reseed=1;this.reseedInterval=281474976710656};HmacDRBG.prototype._hmac=function hmac(){return new hash.hmac(this.hash,this.K)};HmacDRBG.prototype._update=function update(seed){var kmac=this._hmac().update(this.V).update([0]);if(seed)kmac=kmac.update(seed);this.K=kmac.digest();this.V=this._hmac().update(this.V).digest();if(!seed)return;this.K=this._hmac().update(this.V).update([1]).update(seed).digest();this.V=this._hmac().update(this.V).digest()};HmacDRBG.prototype.reseed=function reseed(entropy,entropyEnc,add,addEnc){if(typeof entropyEnc!=="string"){addEnc=add;add=entropyEnc;entropyEnc=null}entropy=utils.toArray(entropy,entropyEnc);add=utils.toArray(add,addEnc);assert(entropy.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(entropy.concat(add||[]));this._reseed=1};HmacDRBG.prototype.generate=function generate(len,enc,add,addEnc){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");if(typeof enc!=="string"){addEnc=add;add=enc;enc=null}if(add){add=utils.toArray(add,addEnc||"hex");this._update(add)}var temp=[];while(temp.length<len){this.V=this._hmac().update(this.V).digest();temp=temp.concat(this.V)}var res=temp.slice(0,len);this._update(add);this._reseed++;return utils.encode(res,enc)}},{"hash.js":478,"minimalistic-assert":503,"minimalistic-crypto-utils":504}],491:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128}},{}],492:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}}else{module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}}},{}],493:[function(require,module,exports){"use strict";var hasToStringTag=require("has-tostringtag/shams")();var callBound=require("call-bind/callBound");var $toString=callBound("Object.prototype.toString");var isStandardArguments=function isArguments(value){if(hasToStringTag&&value&&typeof value==="object"&&Symbol.toStringTag in value){return false}return $toString(value)==="[object Arguments]"};var isLegacyArguments=function isArguments(value){if(isStandardArguments(value)){return true}return value!==null&&typeof value==="object"&&typeof value.length==="number"&&value.length>=0&&$toString(value)!=="[object Array]"&&$toString(value.callee)==="[object Function]"};var supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;module.exports=supportsStandardArguments?isStandardArguments:isLegacyArguments},{"call-bind/callBound":272,"has-tostringtag/shams":460}],494:[function(require,module,exports){"use strict";var fnToStr=Function.prototype.toString;var reflectApply=typeof Reflect==="object"&&Reflect!==null&&Reflect.apply;var badArrayLike;var isCallableMarker;if(typeof reflectApply==="function"&&typeof Object.defineProperty==="function"){try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}});isCallableMarker={};reflectApply(function(){throw 42},null,badArrayLike)}catch(_){if(_!==isCallableMarker){reflectApply=null}}}else{reflectApply=null}var constructorRegex=/^\s*class\b/;var isES6ClassFn=function isES6ClassFunction(value){try{var fnStr=fnToStr.call(value);return constructorRegex.test(fnStr)}catch(e){return false}};var tryFunctionObject=function tryFunctionToStr(value){try{if(isES6ClassFn(value)){return false}fnToStr.call(value);return true}catch(e){return false}};var toStr=Object.prototype.toString;var objectClass="[object Object]";var fnClass="[object Function]";var genClass="[object GeneratorFunction]";var ddaClass="[object HTMLAllCollection]";var ddaClass2="[object HTML document.all class]";var ddaClass3="[object HTMLCollection]";var hasToStringTag=typeof Symbol==="function"&&!!Symbol.toStringTag;var isIE68=!(0 in[,]);var isDDA=function isDocumentDotAll(){return false};if(typeof document==="object"){var all=document.all;if(toStr.call(all)===toStr.call(document.all)){isDDA=function isDocumentDotAll(value){if((isIE68||!value)&&(typeof value==="undefined"||typeof value==="object")){try{var str=toStr.call(value);return(str===ddaClass||str===ddaClass2||str===ddaClass3||str===objectClass)&&value("")==null}catch(e){}}return false}}}module.exports=reflectApply?function isCallable(value){if(isDDA(value)){return true}if(!value){return false}if(typeof value!=="function"&&typeof value!=="object"){return false}try{reflectApply(value,null,badArrayLike)}catch(e){if(e!==isCallableMarker){return false}}return!isES6ClassFn(value)&&tryFunctionObject(value)}:function isCallable(value){if(isDDA(value)){return true}if(!value){return false}if(typeof value!=="function"&&typeof value!=="object"){return false}if(hasToStringTag){return tryFunctionObject(value)}if(isES6ClassFn(value)){return false}var strClass=toStr.call(value);if(strClass!==fnClass&&strClass!==genClass&&!/^\[object HTML/.test(strClass)){return false}return tryFunctionObject(value)}},{}],495:[function(require,module,exports){"use strict";var toStr=Object.prototype.toString;var fnToStr=Function.prototype.toString;var isFnRegex=/^\s*(?:function)?\*/;var hasToStringTag=require("has-tostringtag/shams")();var getProto=Object.getPrototypeOf;var getGeneratorFunc=function(){if(!hasToStringTag){return false}try{return Function("return function*() {}")()}catch(e){}};var GeneratorFunction;module.exports=function isGeneratorFunction(fn){if(typeof fn!=="function"){return false}if(isFnRegex.test(fnToStr.call(fn))){return true}if(!hasToStringTag){var str=toStr.call(fn);return str==="[object GeneratorFunction]"}if(!getProto){return false}if(typeof GeneratorFunction==="undefined"){var generatorFunc=getGeneratorFunc();GeneratorFunction=generatorFunc?getProto(generatorFunc):false}return getProto(fn)===GeneratorFunction}},{"has-tostringtag/shams":460}],496:[function(require,module,exports){(function(global){(function(){"use strict";var forEach=require("for-each");var availableTypedArrays=require("available-typed-arrays");var callBound=require("call-bind/callBound");var $toString=callBound("Object.prototype.toString");var hasToStringTag=require("has-tostringtag/shams")();var gOPD=require("gopd");var g=typeof globalThis==="undefined"?global:globalThis;var typedArrays=availableTypedArrays();var $indexOf=callBound("Array.prototype.indexOf",true)||function indexOf(array,value){for(var i=0;i<array.length;i+=1){if(array[i]===value){return i}}return-1};var $slice=callBound("String.prototype.slice");var toStrTags={};var getPrototypeOf=Object.getPrototypeOf;if(hasToStringTag&&gOPD&&getPrototypeOf){forEach(typedArrays,function(typedArray){var arr=new g[typedArray];if(Symbol.toStringTag in arr){var proto=getPrototypeOf(arr);var descriptor=gOPD(proto,Symbol.toStringTag);if(!descriptor){var superProto=getPrototypeOf(proto);descriptor=gOPD(superProto,Symbol.toStringTag)}toStrTags[typedArray]=descriptor.get}})}var tryTypedArrays=function tryAllTypedArrays(value){var anyTrue=false;forEach(toStrTags,function(getter,typedArray){if(!anyTrue){try{anyTrue=getter.call(value)===typedArray}catch(e){}}});return anyTrue};module.exports=function isTypedArray(value){if(!value||typeof value!=="object"){return false}if(!hasToStringTag||!(Symbol.toStringTag in value)){var tag=$slice($toString(value),8,-1);return $indexOf(typedArrays,tag)>-1}if(!gOPD){return false}return tryTypedArrays(value)}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"available-typed-arrays":185,"call-bind/callBound":272,"for-each":316,gopd:321,"has-tostringtag/shams":460}],497:[function(require,module,exports){"use strict";const uuid=require("uuid").v4;const generateRequest=require("../../generateRequest");const ClientBrowser=function(callServer,options){if(!(this instanceof ClientBrowser)){return new ClientBrowser(callServer,options)}if(!options){options={}}this.options={reviver:typeof options.reviver!=="undefined"?options.reviver:null,replacer:typeof options.replacer!=="undefined"?options.replacer:null,generator:typeof options.generator!=="undefined"?options.generator:function(){return uuid()},version:typeof options.version!=="undefined"?options.version:2,notificationIdNull:typeof options.notificationIdNull==="boolean"?options.notificationIdNull:false};this.callServer=callServer};module.exports=ClientBrowser;ClientBrowser.prototype.request=function(method,params,id,callback){const self=this;let request=null;const isBatch=Array.isArray(method)&&typeof params==="function";if(this.options.version===1&&isBatch){throw new TypeError("JSON-RPC 1.0 does not support batching")}const isRaw=!isBatch&&method&&typeof method==="object"&&typeof params==="function";if(isBatch||isRaw){callback=params;request=method}else{if(typeof id==="function"){callback=id;id=undefined}const hasCallback=typeof callback==="function";try{request=generateRequest(method,params,id,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(err){if(hasCallback){return callback(err)}throw err}if(!hasCallback){return request}}let message;try{message=JSON.stringify(request,this.options.replacer)}catch(err){return callback(err)}this.callServer(message,function(err,response){self._parseResponse(err,response,callback)});return request};ClientBrowser.prototype._parseResponse=function(err,responseText,callback){if(err){callback(err);return}if(!responseText){return callback()}let response;try{response=JSON.parse(responseText,this.options.reviver)}catch(err){return callback(err)}if(callback.length===3){if(Array.isArray(response)){const isError=function(res){return typeof res.error!=="undefined"};const isNotError=function(res){return!isError(res)};return callback(null,response.filter(isError),response.filter(isNotError))}else{return callback(null,response.error,response.result)}}callback(null,response)}},{"../../generateRequest":498,uuid:820}],498:[function(require,module,exports){"use strict";const uuid=require("uuid").v4;const generateRequest=function(method,params,id,options){if(typeof method!=="string"){throw new TypeError(method+" must be a string")}options=options||{};const version=typeof options.version==="number"?options.version:2;if(version!==1&&version!==2){throw new TypeError(version+" must be 1 or 2")}const request={method:method};if(version===2){request.jsonrpc="2.0"}if(params){if(typeof params!=="object"&&!Array.isArray(params)){throw new TypeError(params+" must be an object, array or omitted")}request.params=params}if(typeof id==="undefined"){const generator=typeof options.generator==="function"?options.generator:function(){return uuid()};request.id=generator(request,options)}else if(version===2&&id===null){if(options.notificationIdNull){request.id=null}}else{request.id=id}return request};module.exports=generateRequest},{uuid:820}],499:[function(require,module,exports){(function(process,global){(function(){(function(){"use strict";var ERROR="input is invalid type";var WINDOW=typeof window==="object";var root=WINDOW?window:{};if(root.JS_SHA256_NO_WINDOW){WINDOW=false}var WEB_WORKER=!WINDOW&&typeof self==="object";var NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process==="object"&&process.versions&&process.versions.node;if(NODE_JS){root=global}else if(WEB_WORKER){root=self}var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&typeof module==="object"&&module.exports;var AMD=typeof define==="function"&&define.amd;var ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer!=="undefined";var HEX_CHARS="0123456789abcdef".split("");var EXTRA=[-2147483648,8388608,32768,128];var SHIFT=[24,16,8,0];var K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var OUTPUT_TYPES=["hex","array","digest","arrayBuffer"];var blocks=[];if(root.JS_SHA256_NO_NODE_JS||!Array.isArray){Array.isArray=function(obj){return Object.prototype.toString.call(obj)==="[object Array]"}}if(ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)){ArrayBuffer.isView=function(obj){return typeof obj==="object"&&obj.buffer&&obj.buffer.constructor===ArrayBuffer}}var createOutputMethod=function(outputType,is224){return function(message){return new Sha256(is224,true).update(message)[outputType]()}};var createMethod=function(is224){var method=createOutputMethod("hex",is224);if(NODE_JS){method=nodeWrap(method,is224)}method.create=function(){return new Sha256(is224)};method.update=function(message){return method.create().update(message)};for(var i=0;i<OUTPUT_TYPES.length;++i){var type=OUTPUT_TYPES[i];method[type]=createOutputMethod(type,is224)}return method};var nodeWrap=function(method,is224){var crypto=eval("require('crypto')");var Buffer=eval("require('buffer').Buffer");var algorithm=is224?"sha224":"sha256";var nodeMethod=function(message){if(typeof message==="string"){return crypto.createHash(algorithm).update(message,"utf8").digest("hex")}else{if(message===null||message===undefined){throw new Error(ERROR)}else if(message.constructor===ArrayBuffer){message=new Uint8Array(message)}}if(Array.isArray(message)||ArrayBuffer.isView(message)||message.constructor===Buffer){return crypto.createHash(algorithm).update(new Buffer(message)).digest("hex")}else{return method(message)}};return nodeMethod};var createHmacOutputMethod=function(outputType,is224){return function(key,message){return new HmacSha256(key,is224,true).update(message)[outputType]()}};var createHmacMethod=function(is224){var method=createHmacOutputMethod("hex",is224);method.create=function(key){return new HmacSha256(key,is224)};method.update=function(key,message){return method.create(key).update(message)};for(var i=0;i<OUTPUT_TYPES.length;++i){var type=OUTPUT_TYPES[i];method[type]=createHmacOutputMethod(type,is224)}return method};function Sha256(is224,sharedMemory){if(sharedMemory){blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0;this.blocks=blocks}else{this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}if(is224){this.h0=3238371032;this.h1=914150663;this.h2=812702999;this.h3=4144912697;this.h4=4290775857;this.h5=1750603025;this.h6=1694076839;this.h7=3204075428}else{this.h0=1779033703;this.h1=3144134277;this.h2=1013904242;this.h3=2773480762;this.h4=1359893119;this.h5=2600822924;this.h6=528734635;this.h7=1541459225}this.block=this.start=this.bytes=this.hBytes=0;this.finalized=this.hashed=false;this.first=true;this.is224=is224}Sha256.prototype.update=function(message){if(this.finalized){return}var notString,type=typeof message;if(type!=="string"){if(type==="object"){if(message===null){throw new Error(ERROR)}else if(ARRAY_BUFFER&&message.constructor===ArrayBuffer){message=new Uint8Array(message)}else if(!Array.isArray(message)){if(!ARRAY_BUFFER||!ArrayBuffer.isView(message)){throw new Error(ERROR)}}}else{throw new Error(ERROR)}notString=true}var code,index=0,i,length=message.length,blocks=this.blocks;while(index<length){if(this.hashed){this.hashed=false;blocks[0]=this.block;blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0}if(notString){for(i=this.start;index<length&&i<64;++index){blocks[i>>2]|=message[index]<<SHIFT[i++&3]}}else{for(i=this.start;index<length&&i<64;++index){code=message.charCodeAt(index);if(code<128){blocks[i>>2]|=code<<SHIFT[i++&3]}else if(code<2048){blocks[i>>2]|=(192|code>>6)<<SHIFT[i++&3];blocks[i>>2]|=(128|code&63)<<SHIFT[i++&3]}else if(code<55296||code>=57344){blocks[i>>2]|=(224|code>>12)<<SHIFT[i++&3];blocks[i>>2]|=(128|code>>6&63)<<SHIFT[i++&3];blocks[i>>2]|=(128|code&63)<<SHIFT[i++&3]}else{code=65536+((code&1023)<<10|message.charCodeAt(++index)&1023);blocks[i>>2]|=(240|code>>18)<<SHIFT[i++&3];blocks[i>>2]|=(128|code>>12&63)<<SHIFT[i++&3];blocks[i>>2]|=(128|code>>6&63)<<SHIFT[i++&3];blocks[i>>2]|=(128|code&63)<<SHIFT[i++&3]}}}this.lastByteIndex=i;this.bytes+=i-this.start;if(i>=64){this.block=blocks[16];this.start=i-64;this.hash();this.hashed=true}else{this.start=i}}if(this.bytes>4294967295){this.hBytes+=this.bytes/4294967296<<0;this.bytes=this.bytes%4294967296}return this};Sha256.prototype.finalize=function(){if(this.finalized){return}this.finalized=true;var blocks=this.blocks,i=this.lastByteIndex;blocks[16]=this.block;blocks[i>>2]|=EXTRA[i&3];this.block=blocks[16];if(i>=56){if(!this.hashed){this.hash()}blocks[0]=this.block;blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0}blocks[14]=this.hBytes<<3|this.bytes>>>29;blocks[15]=this.bytes<<3;this.hash()};Sha256.prototype.hash=function(){var a=this.h0,b=this.h1,c=this.h2,d=this.h3,e=this.h4,f=this.h5,g=this.h6,h=this.h7,blocks=this.blocks,j,s0,s1,maj,t1,t2,ch,ab,da,cd,bc;for(j=16;j<64;++j){t1=blocks[j-15];s0=(t1>>>7|t1<<25)^(t1>>>18|t1<<14)^t1>>>3;t1=blocks[j-2];s1=(t1>>>17|t1<<15)^(t1>>>19|t1<<13)^t1>>>10;blocks[j]=blocks[j-16]+s0+blocks[j-7]+s1<<0}bc=b&c;for(j=0;j<64;j+=4){if(this.first){if(this.is224){ab=300032;t1=blocks[0]-1413257819;h=t1-150054599<<0;d=t1+24177077<<0}else{ab=704751109;t1=blocks[0]-210244248;h=t1-1521486534<<0;d=t1+143694565<<0}this.first=false}else{s0=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10);s1=(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7);ab=a&b;maj=ab^a&c^bc;ch=e&f^~e&g;t1=h+s1+ch+K[j]+blocks[j];t2=s0+maj;h=d+t1<<0;d=t1+t2<<0}s0=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10);s1=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7);da=d&a;maj=da^d&b^ab;ch=h&e^~h&f;t1=g+s1+ch+K[j+1]+blocks[j+1];t2=s0+maj;g=c+t1<<0;c=t1+t2<<0;s0=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10);s1=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7);cd=c&d;maj=cd^c&a^da;ch=g&h^~g&e;t1=f+s1+ch+K[j+2]+blocks[j+2];t2=s0+maj;f=b+t1<<0;b=t1+t2<<0;s0=(b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10);s1=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7);bc=b&c;maj=bc^b&d^cd;ch=f&g^~f&h;t1=e+s1+ch+K[j+3]+blocks[j+3];t2=s0+maj;e=a+t1<<0;a=t1+t2<<0}this.h0=this.h0+a<<0;this.h1=this.h1+b<<0;this.h2=this.h2+c<<0;this.h3=this.h3+d<<0;this.h4=this.h4+e<<0;this.h5=this.h5+f<<0;this.h6=this.h6+g<<0;this.h7=this.h7+h<<0};Sha256.prototype.hex=function(){this.finalize();var h0=this.h0,h1=this.h1,h2=this.h2,h3=this.h3,h4=this.h4,h5=this.h5,h6=this.h6,h7=this.h7;var hex=HEX_CHARS[h0>>28&15]+HEX_CHARS[h0>>24&15]+HEX_CHARS[h0>>20&15]+HEX_CHARS[h0>>16&15]+HEX_CHARS[h0>>12&15]+HEX_CHARS[h0>>8&15]+HEX_CHARS[h0>>4&15]+HEX_CHARS[h0&15]+HEX_CHARS[h1>>28&15]+HEX_CHARS[h1>>24&15]+HEX_CHARS[h1>>20&15]+HEX_CHARS[h1>>16&15]+HEX_CHARS[h1>>12&15]+HEX_CHARS[h1>>8&15]+HEX_CHARS[h1>>4&15]+HEX_CHARS[h1&15]+HEX_CHARS[h2>>28&15]+HEX_CHARS[h2>>24&15]+HEX_CHARS[h2>>20&15]+HEX_CHARS[h2>>16&15]+HEX_CHARS[h2>>12&15]+HEX_CHARS[h2>>8&15]+HEX_CHARS[h2>>4&15]+HEX_CHARS[h2&15]+HEX_CHARS[h3>>28&15]+HEX_CHARS[h3>>24&15]+HEX_CHARS[h3>>20&15]+HEX_CHARS[h3>>16&15]+HEX_CHARS[h3>>12&15]+HEX_CHARS[h3>>8&15]+HEX_CHARS[h3>>4&15]+HEX_CHARS[h3&15]+HEX_CHARS[h4>>28&15]+HEX_CHARS[h4>>24&15]+HEX_CHARS[h4>>20&15]+HEX_CHARS[h4>>16&15]+HEX_CHARS[h4>>12&15]+HEX_CHARS[h4>>8&15]+HEX_CHARS[h4>>4&15]+HEX_CHARS[h4&15]+HEX_CHARS[h5>>28&15]+HEX_CHARS[h5>>24&15]+HEX_CHARS[h5>>20&15]+HEX_CHARS[h5>>16&15]+HEX_CHARS[h5>>12&15]+HEX_CHARS[h5>>8&15]+HEX_CHARS[h5>>4&15]+HEX_CHARS[h5&15]+HEX_CHARS[h6>>28&15]+HEX_CHARS[h6>>24&15]+HEX_CHARS[h6>>20&15]+HEX_CHARS[h6>>16&15]+HEX_CHARS[h6>>12&15]+HEX_CHARS[h6>>8&15]+HEX_CHARS[h6>>4&15]+HEX_CHARS[h6&15];if(!this.is224){hex+=HEX_CHARS[h7>>28&15]+HEX_CHARS[h7>>24&15]+HEX_CHARS[h7>>20&15]+HEX_CHARS[h7>>16&15]+HEX_CHARS[h7>>12&15]+HEX_CHARS[h7>>8&15]+HEX_CHARS[h7>>4&15]+HEX_CHARS[h7&15]}return hex};Sha256.prototype.toString=Sha256.prototype.hex;Sha256.prototype.digest=function(){this.finalize();var h0=this.h0,h1=this.h1,h2=this.h2,h3=this.h3,h4=this.h4,h5=this.h5,h6=this.h6,h7=this.h7;var arr=[h0>>24&255,h0>>16&255,h0>>8&255,h0&255,h1>>24&255,h1>>16&255,h1>>8&255,h1&255,h2>>24&255,h2>>16&255,h2>>8&255,h2&255,h3>>24&255,h3>>16&255,h3>>8&255,h3&255,h4>>24&255,h4>>16&255,h4>>8&255,h4&255,h5>>24&255,h5>>16&255,h5>>8&255,h5&255,h6>>24&255,h6>>16&255,h6>>8&255,h6&255];if(!this.is224){arr.push(h7>>24&255,h7>>16&255,h7>>8&255,h7&255)}return arr};Sha256.prototype.array=Sha256.prototype.digest;Sha256.prototype.arrayBuffer=function(){this.finalize();var buffer=new ArrayBuffer(this.is224?28:32);var dataView=new DataView(buffer);dataView.setUint32(0,this.h0);dataView.setUint32(4,this.h1);dataView.setUint32(8,this.h2);dataView.setUint32(12,this.h3);dataView.setUint32(16,this.h4);dataView.setUint32(20,this.h5);dataView.setUint32(24,this.h6);if(!this.is224){dataView.setUint32(28,this.h7)}return buffer};function HmacSha256(key,is224,sharedMemory){var i,type=typeof key;if(type==="string"){var bytes=[],length=key.length,index=0,code;for(i=0;i<length;++i){code=key.charCodeAt(i);if(code<128){bytes[index++]=code}else if(code<2048){bytes[index++]=192|code>>6;bytes[index++]=128|code&63}else if(code<55296||code>=57344){bytes[index++]=224|code>>12;bytes[index++]=128|code>>6&63;bytes[index++]=128|code&63}else{code=65536+((code&1023)<<10|key.charCodeAt(++i)&1023);bytes[index++]=240|code>>18;bytes[index++]=128|code>>12&63;bytes[index++]=128|code>>6&63;bytes[index++]=128|code&63}}key=bytes}else{if(type==="object"){if(key===null){throw new Error(ERROR)}else if(ARRAY_BUFFER&&key.constructor===ArrayBuffer){key=new Uint8Array(key)}else if(!Array.isArray(key)){if(!ARRAY_BUFFER||!ArrayBuffer.isView(key)){throw new Error(ERROR)}}}else{throw new Error(ERROR)}}if(key.length>64){key=new Sha256(is224,true).update(key).array()}var oKeyPad=[],iKeyPad=[];for(i=0;i<64;++i){var b=key[i]||0;oKeyPad[i]=92^b;iKeyPad[i]=54^b}Sha256.call(this,is224,sharedMemory);this.update(iKeyPad);this.oKeyPad=oKeyPad;this.inner=true;this.sharedMemory=sharedMemory}HmacSha256.prototype=new Sha256;HmacSha256.prototype.finalize=function(){Sha256.prototype.finalize.call(this);if(this.inner){this.inner=false;var innerHash=this.array();Sha256.call(this,this.is224,this.sharedMemory);this.update(this.oKeyPad);this.update(innerHash);Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports;exports.sha224=createMethod(true);exports.sha256.hmac=createHmacMethod();exports.sha224.hmac=createHmacMethod(true);if(COMMON_JS){module.exports=exports}else{root.sha256=exports.sha256;root.sha224=exports.sha224;if(AMD){define(function(){return exports})}}})()}).call(this)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:519}],500:[function(require,module,exports){"use strict";var inherits=require("inherits");var HashBase=require("hash-base");var Buffer=require("safe-buffer").Buffer;var ARRAY16=new Array(16);function MD5(){HashBase.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878}inherits(MD5,HashBase);MD5.prototype._update=function(){var M=ARRAY16;for(var i=0;i<16;++i)M[i]=this._block.readInt32LE(i*4);var a=this._a;var b=this._b;var c=this._c;var d=this._d;a=fnF(a,b,c,d,M[0],3614090360,7);d=fnF(d,a,b,c,M[1],3905402710,12);c=fnF(c,d,a,b,M[2],606105819,17);b=fnF(b,c,d,a,M[3],3250441966,22);a=fnF(a,b,c,d,M[4],4118548399,7);d=fnF(d,a,b,c,M[5],1200080426,12);c=fnF(c,d,a,b,M[6],2821735955,17);b=fnF(b,c,d,a,M[7],4249261313,22);a=fnF(a,b,c,d,M[8],1770035416,7);d=fnF(d,a,b,c,M[9],2336552879,12);c=fnF(c,d,a,b,M[10],4294925233,17);b=fnF(b,c,d,a,M[11],2304563134,22);a=fnF(a,b,c,d,M[12],1804603682,7);d=fnF(d,a,b,c,M[13],4254626195,12);c=fnF(c,d,a,b,M[14],2792965006,17);b=fnF(b,c,d,a,M[15],1236535329,22);a=fnG(a,b,c,d,M[1],4129170786,5);d=fnG(d,a,b,c,M[6],3225465664,9);c=fnG(c,d,a,b,M[11],643717713,14);b=fnG(b,c,d,a,M[0],3921069994,20);a=fnG(a,b,c,d,M[5],3593408605,5);d=fnG(d,a,b,c,M[10],38016083,9);c=fnG(c,d,a,b,M[15],3634488961,14);b=fnG(b,c,d,a,M[4],3889429448,20);a=fnG(a,b,c,d,M[9],568446438,5);d=fnG(d,a,b,c,M[14],3275163606,9);c=fnG(c,d,a,b,M[3],4107603335,14);b=fnG(b,c,d,a,M[8],1163531501,20);a=fnG(a,b,c,d,M[13],2850285829,5);d=fnG(d,a,b,c,M[2],4243563512,9);c=fnG(c,d,a,b,M[7],1735328473,14);b=fnG(b,c,d,a,M[12],2368359562,20);a=fnH(a,b,c,d,M[5],4294588738,4);d=fnH(d,a,b,c,M[8],2272392833,11);c=fnH(c,d,a,b,M[11],1839030562,16);b=fnH(b,c,d,a,M[14],4259657740,23);a=fnH(a,b,c,d,M[1],2763975236,4);d=fnH(d,a,b,c,M[4],1272893353,11);c=fnH(c,d,a,b,M[7],4139469664,16);b=fnH(b,c,d,a,M[10],3200236656,23);a=fnH(a,b,c,d,M[13],681279174,4);d=fnH(d,a,b,c,M[0],3936430074,11);c=fnH(c,d,a,b,M[3],3572445317,16);b=fnH(b,c,d,a,M[6],76029189,23);a=fnH(a,b,c,d,M[9],3654602809,4);d=fnH(d,a,b,c,M[12],3873151461,11);c=fnH(c,d,a,b,M[15],530742520,16);b=fnH(b,c,d,a,M[2],3299628645,23);a=fnI(a,b,c,d,M[0],4096336452,6);d=fnI(d,a,b,c,M[7],1126891415,10);c=fnI(c,d,a,b,M[14],2878612391,15);b=fnI(b,c,d,a,M[5],4237533241,21);a=fnI(a,b,c,d,M[12],1700485571,6);d=fnI(d,a,b,c,M[3],2399980690,10);c=fnI(c,d,a,b,M[10],4293915773,15);b=fnI(b,c,d,a,M[1],2240044497,21);a=fnI(a,b,c,d,M[8],1873313359,6);d=fnI(d,a,b,c,M[15],4264355552,10);c=fnI(c,d,a,b,M[6],2734768916,15);b=fnI(b,c,d,a,M[13],1309151649,21);a=fnI(a,b,c,d,M[4],4149444226,6);d=fnI(d,a,b,c,M[11],3174756917,10);c=fnI(c,d,a,b,M[2],718787259,15);b=fnI(b,c,d,a,M[9],3951481745,21);this._a=this._a+a|0;this._b=this._b+b|0;this._c=this._c+c|0;this._d=this._d+d|0};MD5.prototype._digest=function(){this._block[this._blockOffset++]=128;if(this._blockOffset>56){this._block.fill(0,this._blockOffset,64);this._update();this._blockOffset=0}this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var buffer=Buffer.allocUnsafe(16);buffer.writeInt32LE(this._a,0);buffer.writeInt32LE(this._b,4);buffer.writeInt32LE(this._c,8);buffer.writeInt32LE(this._d,12);return buffer};function rotl(x,n){return x<<n|x>>>32-n}function fnF(a,b,c,d,m,k,s){return rotl(a+(b&c|~b&d)+m+k|0,s)+b|0}function fnG(a,b,c,d,m,k,s){return rotl(a+(b&d|c&~d)+m+k|0,s)+b|0}function fnH(a,b,c,d,m,k,s){return rotl(a+(b^c^d)+m+k|0,s)+b|0}function fnI(a,b,c,d,m,k,s){return rotl(a+(c^(b|~d))+m+k|0,s)+b|0}module.exports=MD5},{"hash-base":462,inherits:492,"safe-buffer":787}],501:[function(require,module,exports){var bn=require("bn.js");var brorand=require("brorand");function MillerRabin(rand){this.rand=rand||new brorand.Rand}module.exports=MillerRabin;MillerRabin.create=function create(rand){return new MillerRabin(rand)};MillerRabin.prototype._randbelow=function _randbelow(n){var len=n.bitLength();var min_bytes=Math.ceil(len/8);do{var a=new bn(this.rand.generate(min_bytes))}while(a.cmp(n)>=0);return a};MillerRabin.prototype._randrange=function _randrange(start,stop){var size=stop.sub(start);return start.add(this._randbelow(size))};MillerRabin.prototype.test=function test(n,k,cb){var len=n.bitLength();var red=bn.mont(n);var rone=new bn(1).toRed(red);if(!k)k=Math.max(1,len/48|0);var n1=n.subn(1);for(var s=0;!n1.testn(s);s++){}var d=n.shrn(s);var rn1=n1.toRed(red);var prime=true;for(;k>0;k--){var a=this._randrange(new bn(2),n1);if(cb)cb(a);var x=a.toRed(red).redPow(d);if(x.cmp(rone)===0||x.cmp(rn1)===0)continue;for(var i=1;i<s;i++){x=x.redSqr();if(x.cmp(rone)===0)return false;if(x.cmp(rn1)===0)break}if(i===s)return false}return prime};MillerRabin.prototype.getDivisor=function getDivisor(n,k){var len=n.bitLength();var red=bn.mont(n);var rone=new bn(1).toRed(red);if(!k)k=Math.max(1,len/48|0);var n1=n.subn(1);for(var s=0;!n1.testn(s);s++){}var d=n.shrn(s);var rn1=n1.toRed(red);for(;k>0;k--){var a=this._randrange(new bn(2),n1);var g=n.gcd(a);if(g.cmpn(1)!==0)return g;var x=a.toRed(red).redPow(d);if(x.cmp(rone)===0||x.cmp(rn1)===0)continue;for(var i=1;i<s;i++){x=x.redSqr();if(x.cmp(rone)===0)return x.fromRed().subn(1).gcd(n);if(x.cmp(rn1)===0)break}if(i===s){x=x.redSqr();return x.fromRed().subn(1).gcd(n)}}return false}},{"bn.js":502,brorand:225}],502:[function(require,module,exports){arguments[4][180][0].apply(exports,arguments)},{buffer:226,dup:180}],503:[function(require,module,exports){module.exports=assert;function assert(val,msg){if(!val)throw new Error(msg||"Assertion failed")}assert.equal=function assertEqual(l,r,msg){if(l!=r)throw new Error(msg||"Assertion failed: "+l+" != "+r)}},{}],504:[function(require,module,exports){"use strict";var utils=exports;function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if(typeof msg!=="string"){for(var i=0;i<msg.length;i++)res[i]=msg[i]|0;return res}if(enc==="hex"){msg=msg.replace(/[^a-z0-9]+/gi,"");if(msg.length%2!==0)msg="0"+msg;for(var i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16))}else{for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i);var hi=c>>8;var lo=c&255;if(hi)res.push(hi,lo);else res.push(lo)}}return res}utils.toArray=toArray;function zero2(word){if(word.length===1)return"0"+word;else return word}utils.zero2=zero2;function toHex(msg){var res="";for(var i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res}utils.toHex=toHex;utils.encode=function encode(arr,enc){if(enc==="hex")return toHex(arr);else return arr}},{}],505:[function(require,module,exports){(function(global){(function(){"use strict";var getGlobal=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var globalObject=getGlobal();module.exports=exports=globalObject.fetch;if(globalObject.fetch){exports.default=globalObject.fetch.bind(globalObject)}exports.Headers=globalObject.Headers;exports.Request=globalObject.Request;exports.Response=globalObject.Response}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],506:[function(require,module,exports){"use strict";var getOwnPropertySymbols=Object.getOwnPropertySymbols;var hasOwnProperty=Object.prototype.hasOwnProperty;var propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(val===null||val===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(val)}function shouldUseNative(){try{if(!Object.assign){return false}var test1=new String("abc");test1[5]="de";if(Object.getOwnPropertyNames(test1)[0]==="5"){return false}var test2={};for(var i=0;i<10;i++){test2["_"+String.fromCharCode(i)]=i}var order2=Object.getOwnPropertyNames(test2).map(function(n){return test2[n]});if(order2.join("")!=="0123456789"){return false}var test3={};"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter});if(Object.keys(Object.assign({},test3)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(err){return false}}module.exports=shouldUseNative()?Object.assign:function(target,source){var from;var to=toObject(target);var symbols;for(var s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from){if(hasOwnProperty.call(from,key)){to[key]=from[key]}}if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++){if(propIsEnumerable.call(from,symbols[i])){to[symbols[i]]=from[symbols[i]]}}}}return to}},{}],507:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ungzip=exports.inflateRaw=exports.inflate=exports.gzip=exports.deflateRaw=exports.deflate=exports.default=exports.constants=exports.Inflate=exports.Deflate=void 0;const Z_FIXED$1=4;const Z_BINARY=0;const Z_TEXT=1;const Z_UNKNOWN$1=2;function zero$1(buf){let len=buf.length;while(--len>=0){buf[len]=0}}const STORED_BLOCK=0;const STATIC_TREES=1;const DYN_TREES=2;const MIN_MATCH$1=3;const MAX_MATCH$1=258;const LENGTH_CODES$1=29;const LITERALS$1=256;const L_CODES$1=LITERALS$1+1+LENGTH_CODES$1;const D_CODES$1=30;const BL_CODES$1=19;const HEAP_SIZE$1=2*L_CODES$1+1;const MAX_BITS$1=15;const Buf_size=16;const MAX_BL_BITS=7;const END_BLOCK=256;const REP_3_6=16;const REPZ_3_10=17;const REPZ_11_138=18;const extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]);const extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);const extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]);const bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);const DIST_CODE_LEN=512;const static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(static_tree,extra_bits,extra_base,elems,max_length){this.static_tree=static_tree;this.extra_bits=extra_bits;this.extra_base=extra_base;this.elems=elems;this.max_length=max_length;this.has_stree=static_tree&&static_tree.length}let static_l_desc;let static_d_desc;let static_bl_desc;function TreeDesc(dyn_tree,stat_desc){this.dyn_tree=dyn_tree;this.max_code=0;this.stat_desc=stat_desc}const d_code=dist=>{return dist<256?_dist_code[dist]:_dist_code[256+(dist>>>7)]};const put_short=(s,w)=>{s.pending_buf[s.pending++]=w&255;s.pending_buf[s.pending++]=w>>>8&255};const send_bits=(s,value,length)=>{if(s.bi_valid>Buf_size-length){s.bi_buf|=value<<s.bi_valid&65535;put_short(s,s.bi_buf);s.bi_buf=value>>Buf_size-s.bi_valid;s.bi_valid+=length-Buf_size}else{s.bi_buf|=value<<s.bi_valid&65535;s.bi_valid+=length}};const send_code=(s,c,tree)=>{send_bits(s,tree[c*2],tree[c*2+1])};const bi_reverse=(code,len)=>{let res=0;do{res|=code&1;code>>>=1;res<<=1}while(--len>0);return res>>>1};const bi_flush=s=>{if(s.bi_valid===16){put_short(s,s.bi_buf);s.bi_buf=0;s.bi_valid=0}else if(s.bi_valid>=8){s.pending_buf[s.pending++]=s.bi_buf&255;s.bi_buf>>=8;s.bi_valid-=8}};const gen_bitlen=(s,desc)=>{const tree=desc.dyn_tree;const max_code=desc.max_code;const stree=desc.stat_desc.static_tree;const has_stree=desc.stat_desc.has_stree;const extra=desc.stat_desc.extra_bits;const base=desc.stat_desc.extra_base;const max_length=desc.stat_desc.max_length;let h;let n,m;let bits;let xbits;let f;let overflow=0;for(bits=0;bits<=MAX_BITS$1;bits++){s.bl_count[bits]=0}tree[s.heap[s.heap_max]*2+1]=0;for(h=s.heap_max+1;h<HEAP_SIZE$1;h++){n=s.heap[h];bits=tree[tree[n*2+1]*2+1]+1;if(bits>max_length){bits=max_length;overflow++}tree[n*2+1]=bits;if(n>max_code){continue}s.bl_count[bits]++;xbits=0;if(n>=base){xbits=extra[n-base]}f=tree[n*2];s.opt_len+=f*(bits+xbits);if(has_stree){s.static_len+=f*(stree[n*2+1]+xbits)}}if(overflow===0){return}do{bits=max_length-1;while(s.bl_count[bits]===0){bits--}s.bl_count[bits]--;s.bl_count[bits+1]+=2;s.bl_count[max_length]--;overflow-=2}while(overflow>0);for(bits=max_length;bits!==0;bits--){n=s.bl_count[bits];while(n!==0){m=s.heap[--h];if(m>max_code){continue}if(tree[m*2+1]!==bits){s.opt_len+=(bits-tree[m*2+1])*tree[m*2];tree[m*2+1]=bits}n--}}};const gen_codes=(tree,max_code,bl_count)=>{const next_code=new Array(MAX_BITS$1+1);let code=0;let bits;let n;for(bits=1;bits<=MAX_BITS$1;bits++){code=code+bl_count[bits-1]<<1;next_code[bits]=code}for(n=0;n<=max_code;n++){let len=tree[n*2+1];if(len===0){continue}tree[n*2]=bi_reverse(next_code[len]++,len)}};const tr_static_init=()=>{let n;let bits;let length;let code;let dist;const bl_count=new Array(MAX_BITS$1+1);length=0;for(code=0;code<LENGTH_CODES$1-1;code++){base_length[code]=length;for(n=0;n<1<<extra_lbits[code];n++){_length_code[length++]=code}}_length_code[length-1]=code;dist=0;for(code=0;code<16;code++){base_dist[code]=dist;for(n=0;n<1<<extra_dbits[code];n++){_dist_code[dist++]=code}}dist>>=7;for(;code<D_CODES$1;code++){base_dist[code]=dist<<7;for(n=0;n<1<<extra_dbits[code]-7;n++){_dist_code[256+dist++]=code}}for(bits=0;bits<=MAX_BITS$1;bits++){bl_count[bits]=0}n=0;while(n<=143){static_ltree[n*2+1]=8;n++;bl_count[8]++}while(n<=255){static_ltree[n*2+1]=9;n++;bl_count[9]++}while(n<=279){static_ltree[n*2+1]=7;n++;bl_count[7]++}while(n<=287){static_ltree[n*2+1]=8;n++;bl_count[8]++}gen_codes(static_ltree,L_CODES$1+1,bl_count);for(n=0;n<D_CODES$1;n++){static_dtree[n*2+1]=5;static_dtree[n*2]=bi_reverse(n,5)}static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1);static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1);static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)};const init_block=s=>{let n;for(n=0;n<L_CODES$1;n++){s.dyn_ltree[n*2]=0}for(n=0;n<D_CODES$1;n++){s.dyn_dtree[n*2]=0}for(n=0;n<BL_CODES$1;n++){s.bl_tree[n*2]=0}s.dyn_ltree[END_BLOCK*2]=1;s.opt_len=s.static_len=0;s.sym_next=s.matches=0};const bi_windup=s=>{if(s.bi_valid>8){put_short(s,s.bi_buf)}else if(s.bi_valid>0){s.pending_buf[s.pending++]=s.bi_buf}s.bi_buf=0;s.bi_valid=0};const smaller=(tree,n,m,depth)=>{const _n2=n*2;const _m2=m*2;return tree[_n2]<tree[_m2]||tree[_n2]===tree[_m2]&&depth[n]<=depth[m]};const pqdownheap=(s,tree,k)=>{const v=s.heap[k];let j=k<<1;while(j<=s.heap_len){if(j<s.heap_len&&smaller(tree,s.heap[j+1],s.heap[j],s.depth)){j++}if(smaller(tree,v,s.heap[j],s.depth)){break}s.heap[k]=s.heap[j];k=j;j<<=1}s.heap[k]=v};const compress_block=(s,ltree,dtree)=>{let dist;let lc;let sx=0;let code;let extra;if(s.sym_next!==0){do{dist=s.pending_buf[s.sym_buf+sx++]&255;dist+=(s.pending_buf[s.sym_buf+sx++]&255)<<8;lc=s.pending_buf[s.sym_buf+sx++];if(dist===0){send_code(s,lc,ltree)}else{code=_length_code[lc];send_code(s,code+LITERALS$1+1,ltree);extra=extra_lbits[code];if(extra!==0){lc-=base_length[code];send_bits(s,lc,extra)}dist--;code=d_code(dist);send_code(s,code,dtree);extra=extra_dbits[code];if(extra!==0){dist-=base_dist[code];send_bits(s,dist,extra)}}}while(sx<s.sym_next)}send_code(s,END_BLOCK,ltree)};const build_tree=(s,desc)=>{const tree=desc.dyn_tree;const stree=desc.stat_desc.static_tree;const has_stree=desc.stat_desc.has_stree;const elems=desc.stat_desc.elems;let n,m;let max_code=-1;let node;s.heap_len=0;s.heap_max=HEAP_SIZE$1;for(n=0;n<elems;n++){if(tree[n*2]!==0){s.heap[++s.heap_len]=max_code=n;s.depth[n]=0}else{tree[n*2+1]=0}}while(s.heap_len<2){node=s.heap[++s.heap_len]=max_code<2?++max_code:0;tree[node*2]=1;s.depth[node]=0;s.opt_len--;if(has_stree){s.static_len-=stree[node*2+1]}}desc.max_code=max_code;for(n=s.heap_len>>1;n>=1;n--){pqdownheap(s,tree,n)}node=elems;do{n=s.heap[1];s.heap[1]=s.heap[s.heap_len--];pqdownheap(s,tree,1);m=s.heap[1];s.heap[--s.heap_max]=n;s.heap[--s.heap_max]=m;tree[node*2]=tree[n*2]+tree[m*2];s.depth[node]=(s.depth[n]>=s.depth[m]?s.depth[n]:s.depth[m])+1;tree[n*2+1]=tree[m*2+1]=node;s.heap[1]=node++;pqdownheap(s,tree,1)}while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1];gen_bitlen(s,desc);gen_codes(tree,max_code,s.bl_count)};const scan_tree=(s,tree,max_code)=>{let n;let prevlen=-1;let curlen;let nextlen=tree[0*2+1];let count=0;let max_count=7;let min_count=4;if(nextlen===0){max_count=138;min_count=3}tree[(max_code+1)*2+1]=65535;for(n=0;n<=max_code;n++){curlen=nextlen;nextlen=tree[(n+1)*2+1];if(++count<max_count&&curlen===nextlen){continue}else if(count<min_count){s.bl_tree[curlen*2]+=count}else if(curlen!==0){if(curlen!==prevlen){s.bl_tree[curlen*2]++}s.bl_tree[REP_3_6*2]++}else if(count<=10){s.bl_tree[REPZ_3_10*2]++}else{s.bl_tree[REPZ_11_138*2]++}count=0;prevlen=curlen;if(nextlen===0){max_count=138;min_count=3}else if(curlen===nextlen){max_count=6;min_count=3}else{max_count=7;min_count=4}}};const send_tree=(s,tree,max_code)=>{let n;let prevlen=-1;let curlen;let nextlen=tree[0*2+1];let count=0;let max_count=7;let min_count=4;if(nextlen===0){max_count=138;min_count=3}for(n=0;n<=max_code;n++){curlen=nextlen;nextlen=tree[(n+1)*2+1];if(++count<max_count&&curlen===nextlen){continue}else if(count<min_count){do{send_code(s,curlen,s.bl_tree)}while(--count!==0)}else if(curlen!==0){if(curlen!==prevlen){send_code(s,curlen,s.bl_tree);count--}send_code(s,REP_3_6,s.bl_tree);send_bits(s,count-3,2)}else if(count<=10){send_code(s,REPZ_3_10,s.bl_tree);send_bits(s,count-3,3)}else{send_code(s,REPZ_11_138,s.bl_tree);send_bits(s,count-11,7)}count=0;prevlen=curlen;if(nextlen===0){max_count=138;min_count=3}else if(curlen===nextlen){max_count=6;min_count=3}else{max_count=7;min_count=4}}};const build_bl_tree=s=>{let max_blindex;scan_tree(s,s.dyn_ltree,s.l_desc.max_code);scan_tree(s,s.dyn_dtree,s.d_desc.max_code);build_tree(s,s.bl_desc);for(max_blindex=BL_CODES$1-1;max_blindex>=3;max_blindex--){if(s.bl_tree[bl_order[max_blindex]*2+1]!==0){break}}s.opt_len+=3*(max_blindex+1)+5+5+4;return max_blindex};const send_all_trees=(s,lcodes,dcodes,blcodes)=>{let rank;send_bits(s,lcodes-257,5);send_bits(s,dcodes-1,5);send_bits(s,blcodes-4,4);for(rank=0;rank<blcodes;rank++){send_bits(s,s.bl_tree[bl_order[rank]*2+1],3)}send_tree(s,s.dyn_ltree,lcodes-1);send_tree(s,s.dyn_dtree,dcodes-1)};const detect_data_type=s=>{let block_mask=4093624447;let n;for(n=0;n<=31;n++,block_mask>>>=1){if(block_mask&1&&s.dyn_ltree[n*2]!==0){return Z_BINARY}}if(s.dyn_ltree[9*2]!==0||s.dyn_ltree[10*2]!==0||s.dyn_ltree[13*2]!==0){return Z_TEXT}for(n=32;n<LITERALS$1;n++){if(s.dyn_ltree[n*2]!==0){return Z_TEXT}}return Z_BINARY};let static_init_done=false;const _tr_init$1=s=>{if(!static_init_done){tr_static_init();static_init_done=true}s.l_desc=new TreeDesc(s.dyn_ltree,static_l_desc);s.d_desc=new TreeDesc(s.dyn_dtree,static_d_desc);s.bl_desc=new TreeDesc(s.bl_tree,static_bl_desc);s.bi_buf=0;s.bi_valid=0;init_block(s)};const _tr_stored_block$1=(s,buf,stored_len,last)=>{send_bits(s,(STORED_BLOCK<<1)+(last?1:0),3);bi_windup(s);put_short(s,stored_len);put_short(s,~stored_len);if(stored_len){s.pending_buf.set(s.window.subarray(buf,buf+stored_len),s.pending)}s.pending+=stored_len};const _tr_align$1=s=>{send_bits(s,STATIC_TREES<<1,3);send_code(s,END_BLOCK,static_ltree);bi_flush(s)};const _tr_flush_block$1=(s,buf,stored_len,last)=>{let opt_lenb,static_lenb;let max_blindex=0;if(s.level>0){if(s.strm.data_type===Z_UNKNOWN$1){s.strm.data_type=detect_data_type(s)}build_tree(s,s.l_desc);build_tree(s,s.d_desc);max_blindex=build_bl_tree(s);opt_lenb=s.opt_len+3+7>>>3;static_lenb=s.static_len+3+7>>>3;if(static_lenb<=opt_lenb){opt_lenb=static_lenb}}else{opt_lenb=static_lenb=stored_len+5}if(stored_len+4<=opt_lenb&&buf!==-1){_tr_stored_block$1(s,buf,stored_len,last)}else if(s.strategy===Z_FIXED$1||static_lenb===opt_lenb){send_bits(s,(STATIC_TREES<<1)+(last?1:0),3);compress_block(s,static_ltree,static_dtree)}else{send_bits(s,(DYN_TREES<<1)+(last?1:0),3);send_all_trees(s,s.l_desc.max_code+1,s.d_desc.max_code+1,max_blindex+1);compress_block(s,s.dyn_ltree,s.dyn_dtree)}init_block(s);if(last){bi_windup(s)}};const _tr_tally$1=(s,dist,lc)=>{s.pending_buf[s.sym_buf+s.sym_next++]=dist;s.pending_buf[s.sym_buf+s.sym_next++]=dist>>8;s.pending_buf[s.sym_buf+s.sym_next++]=lc;if(dist===0){s.dyn_ltree[lc*2]++}else{s.matches++;dist--;s.dyn_ltree[(_length_code[lc]+LITERALS$1+1)*2]++;s.dyn_dtree[d_code(dist)*2]++}return s.sym_next===s.sym_end};var _tr_init_1=_tr_init$1;var _tr_stored_block_1=_tr_stored_block$1;var _tr_flush_block_1=_tr_flush_block$1;var _tr_tally_1=_tr_tally$1;var _tr_align_1=_tr_align$1;var trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(adler,buf,len,pos)=>{let s1=adler&65535|0,s2=adler>>>16&65535|0,n=0;while(len!==0){n=len>2e3?2e3:len;len-=n;do{s1=s1+buf[pos++]|0;s2=s2+s1|0}while(--n);s1%=65521;s2%=65521}return s1|s2<<16|0};var adler32_1=adler32;const makeTable=()=>{let c,table=[];for(var n=0;n<256;n++){c=n;for(var k=0;k<8;k++){c=c&1?3988292384^c>>>1:c>>>1}table[n]=c}return table};const crcTable=new Uint32Array(makeTable());const crc32=(crc,buf,len,pos)=>{const t=crcTable;const end=pos+len;crc^=-1;for(let i=pos;i<end;i++){crc=crc>>>8^t[(crc^buf[i])&255]}return crc^-1};var crc32_1=crc32;var messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};var constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees;const{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2;const MAX_MEM_LEVEL=9;const MAX_WBITS$1=15;const DEF_MEM_LEVEL=8;const LENGTH_CODES=29;const LITERALS=256;const L_CODES=LITERALS+1+LENGTH_CODES;const D_CODES=30;const BL_CODES=19;const HEAP_SIZE=2*L_CODES+1;const MAX_BITS=15;const MIN_MATCH=3;const MAX_MATCH=258;const MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1;const PRESET_DICT=32;const INIT_STATE=42;const GZIP_STATE=57;const EXTRA_STATE=69;const NAME_STATE=73;const COMMENT_STATE=91;const HCRC_STATE=103;const BUSY_STATE=113;const FINISH_STATE=666;const BS_NEED_MORE=1;const BS_BLOCK_DONE=2;const BS_FINISH_STARTED=3;const BS_FINISH_DONE=4;const OS_CODE=3;const err=(strm,errorCode)=>{strm.msg=messages[errorCode];return errorCode};const rank=f=>{return f*2-(f>4?9:0)};const zero=buf=>{let len=buf.length;while(--len>=0){buf[len]=0}};const slide_hash=s=>{let n,m;let p;let wsize=s.w_size;n=s.hash_size;p=n;do{m=s.head[--p];s.head[p]=m>=wsize?m-wsize:0}while(--n);n=wsize;p=n;do{m=s.prev[--p];s.prev[p]=m>=wsize?m-wsize:0}while(--n)};let HASH_ZLIB=(s,prev,data)=>(prev<<s.hash_shift^data)&s.hash_mask;let HASH=HASH_ZLIB;const flush_pending=strm=>{const s=strm.state;let len=s.pending;if(len>strm.avail_out){len=strm.avail_out}if(len===0){return}strm.output.set(s.pending_buf.subarray(s.pending_out,s.pending_out+len),strm.next_out);strm.next_out+=len;s.pending_out+=len;strm.total_out+=len;strm.avail_out-=len;s.pending-=len;if(s.pending===0){s.pending_out=0}};const flush_block_only=(s,last)=>{_tr_flush_block(s,s.block_start>=0?s.block_start:-1,s.strstart-s.block_start,last);s.block_start=s.strstart;flush_pending(s.strm)};const put_byte=(s,b)=>{s.pending_buf[s.pending++]=b};const putShortMSB=(s,b)=>{s.pending_buf[s.pending++]=b>>>8&255;s.pending_buf[s.pending++]=b&255};const read_buf=(strm,buf,start,size)=>{let len=strm.avail_in;if(len>size){len=size}if(len===0){return 0}strm.avail_in-=len;buf.set(strm.input.subarray(strm.next_in,strm.next_in+len),start);if(strm.state.wrap===1){strm.adler=adler32_1(strm.adler,buf,len,start)}else if(strm.state.wrap===2){strm.adler=crc32_1(strm.adler,buf,len,start)}strm.next_in+=len;strm.total_in+=len;return len};const longest_match=(s,cur_match)=>{let chain_length=s.max_chain_length;let scan=s.strstart;let match;let len;let best_len=s.prev_length;let nice_match=s.nice_match;const limit=s.strstart>s.w_size-MIN_LOOKAHEAD?s.strstart-(s.w_size-MIN_LOOKAHEAD):0;const _win=s.window;const wmask=s.w_mask;const prev=s.prev;const strend=s.strstart+MAX_MATCH;let scan_end1=_win[scan+best_len-1];let scan_end=_win[scan+best_len];if(s.prev_length>=s.good_match){chain_length>>=2}if(nice_match>s.lookahead){nice_match=s.lookahead}do{match=cur_match;if(_win[match+best_len]!==scan_end||_win[match+best_len-1]!==scan_end1||_win[match]!==_win[scan]||_win[++match]!==_win[scan+1]){continue}scan+=2;match++;do{}while(_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&scan<strend);len=MAX_MATCH-(strend-scan);scan=strend-MAX_MATCH;if(len>best_len){s.match_start=cur_match;best_len=len;if(len>=nice_match){break}scan_end1=_win[scan+best_len-1];scan_end=_win[scan+best_len]}}while((cur_match=prev[cur_match&wmask])>limit&&--chain_length!==0);if(best_len<=s.lookahead){return best_len}return s.lookahead};const fill_window=s=>{const _w_size=s.w_size;let n,more,str;do{more=s.window_size-s.lookahead-s.strstart;if(s.strstart>=_w_size+(_w_size-MIN_LOOKAHEAD)){s.window.set(s.window.subarray(_w_size,_w_size+_w_size-more),0);s.match_start-=_w_size;s.strstart-=_w_size;s.block_start-=_w_size;if(s.insert>s.strstart){s.insert=s.strstart}slide_hash(s);more+=_w_size}if(s.strm.avail_in===0){break}n=read_buf(s.strm,s.window,s.strstart+s.lookahead,more);s.lookahead+=n;if(s.lookahead+s.insert>=MIN_MATCH){str=s.strstart-s.insert;s.ins_h=s.window[str];s.ins_h=HASH(s,s.ins_h,s.window[str+1]);while(s.insert){s.ins_h=HASH(s,s.ins_h,s.window[str+MIN_MATCH-1]);s.prev[str&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=str;str++;s.insert--;if(s.lookahead+s.insert<MIN_MATCH){break}}}}while(s.lookahead<MIN_LOOKAHEAD&&s.strm.avail_in!==0)};const deflate_stored=(s,flush)=>{let min_block=s.pending_buf_size-5>s.w_size?s.w_size:s.pending_buf_size-5;let len,left,have,last=0;let used=s.strm.avail_in;do{len=65535;have=s.bi_valid+42>>3;if(s.strm.avail_out<have){break}have=s.strm.avail_out-have;left=s.strstart-s.block_start;if(len>left+s.strm.avail_in){len=left+s.strm.avail_in}if(len>have){len=have}if(len<min_block&&(len===0&&flush!==Z_FINISH$3||flush===Z_NO_FLUSH$2||len!==left+s.strm.avail_in)){break}last=flush===Z_FINISH$3&&len===left+s.strm.avail_in?1:0;_tr_stored_block(s,0,0,last);s.pending_buf[s.pending-4]=len;s.pending_buf[s.pending-3]=len>>8;s.pending_buf[s.pending-2]=~len;s.pending_buf[s.pending-1]=~len>>8;flush_pending(s.strm);if(left){if(left>len){left=len}s.strm.output.set(s.window.subarray(s.block_start,s.block_start+left),s.strm.next_out);s.strm.next_out+=left;s.strm.avail_out-=left;s.strm.total_out+=left;s.block_start+=left;len-=left}if(len){read_buf(s.strm,s.strm.output,s.strm.next_out,len);s.strm.next_out+=len;s.strm.avail_out-=len;s.strm.total_out+=len}}while(last===0);used-=s.strm.avail_in;if(used){if(used>=s.w_size){s.matches=2;s.window.set(s.strm.input.subarray(s.strm.next_in-s.w_size,s.strm.next_in),0);s.strstart=s.w_size;s.insert=s.strstart}else{if(s.window_size-s.strstart<=used){s.strstart-=s.w_size;s.window.set(s.window.subarray(s.w_size,s.w_size+s.strstart),0);if(s.matches<2){s.matches++}if(s.insert>s.strstart){s.insert=s.strstart}}s.window.set(s.strm.input.subarray(s.strm.next_in-used,s.strm.next_in),s.strstart);s.strstart+=used;s.insert+=used>s.w_size-s.insert?s.w_size-s.insert:used}s.block_start=s.strstart}if(s.high_water<s.strstart){s.high_water=s.strstart}if(last){return BS_FINISH_DONE}if(flush!==Z_NO_FLUSH$2&&flush!==Z_FINISH$3&&s.strm.avail_in===0&&s.strstart===s.block_start){return BS_BLOCK_DONE}have=s.window_size-s.strstart;if(s.strm.avail_in>have&&s.block_start>=s.w_size){s.block_start-=s.w_size;s.strstart-=s.w_size;s.window.set(s.window.subarray(s.w_size,s.w_size+s.strstart),0);if(s.matches<2){s.matches++}have+=s.w_size;if(s.insert>s.strstart){s.insert=s.strstart}}if(have>s.strm.avail_in){have=s.strm.avail_in}if(have){read_buf(s.strm,s.window,s.strstart,have);s.strstart+=have;s.insert+=have>s.w_size-s.insert?s.w_size-s.insert:have}if(s.high_water<s.strstart){s.high_water=s.strstart}have=s.bi_valid+42>>3;have=s.pending_buf_size-have>65535?65535:s.pending_buf_size-have;min_block=have>s.w_size?s.w_size:have;left=s.strstart-s.block_start;if(left>=min_block||(left||flush===Z_FINISH$3)&&flush!==Z_NO_FLUSH$2&&s.strm.avail_in===0&&left<=have){len=left>have?have:left;last=flush===Z_FINISH$3&&s.strm.avail_in===0&&len===left?1:0;_tr_stored_block(s,s.block_start,len,last);s.block_start+=len;flush_pending(s.strm)}return last?BS_FINISH_STARTED:BS_NEED_MORE};const deflate_fast=(s,flush)=>{let hash_head;let bflush;for(;;){if(s.lookahead<MIN_LOOKAHEAD){fill_window(s);if(s.lookahead<MIN_LOOKAHEAD&&flush===Z_NO_FLUSH$2){return BS_NEED_MORE}if(s.lookahead===0){break}}hash_head=0;if(s.lookahead>=MIN_MATCH){s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+MIN_MATCH-1]);hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=s.strstart}if(hash_head!==0&&s.strstart-hash_head<=s.w_size-MIN_LOOKAHEAD){s.match_length=longest_match(s,hash_head)}if(s.match_length>=MIN_MATCH){bflush=_tr_tally(s,s.strstart-s.match_start,s.match_length-MIN_MATCH);s.lookahead-=s.match_length;if(s.match_length<=s.max_lazy_match&&s.lookahead>=MIN_MATCH){s.match_length--;do{s.strstart++;s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+MIN_MATCH-1]);hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=s.strstart}while(--s.match_length!==0);s.strstart++}else{s.strstart+=s.match_length;s.match_length=0;s.ins_h=s.window[s.strstart];s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+1])}}else{bflush=_tr_tally(s,0,s.window[s.strstart]);s.lookahead--;s.strstart++}if(bflush){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}}s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1;if(flush===Z_FINISH$3){flush_block_only(s,true);if(s.strm.avail_out===0){return BS_FINISH_STARTED}return BS_FINISH_DONE}if(s.sym_next){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}return BS_BLOCK_DONE};const deflate_slow=(s,flush)=>{let hash_head;let bflush;let max_insert;for(;;){if(s.lookahead<MIN_LOOKAHEAD){fill_window(s);if(s.lookahead<MIN_LOOKAHEAD&&flush===Z_NO_FLUSH$2){return BS_NEED_MORE}if(s.lookahead===0){break}}hash_head=0;if(s.lookahead>=MIN_MATCH){s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+MIN_MATCH-1]);hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=s.strstart}s.prev_length=s.match_length;s.prev_match=s.match_start;s.match_length=MIN_MATCH-1;if(hash_head!==0&&s.prev_length<s.max_lazy_match&&s.strstart-hash_head<=s.w_size-MIN_LOOKAHEAD){s.match_length=longest_match(s,hash_head);if(s.match_length<=5&&(s.strategy===Z_FILTERED||s.match_length===MIN_MATCH&&s.strstart-s.match_start>4096)){s.match_length=MIN_MATCH-1}}if(s.prev_length>=MIN_MATCH&&s.match_length<=s.prev_length){max_insert=s.strstart+s.lookahead-MIN_MATCH;bflush=_tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-MIN_MATCH);s.lookahead-=s.prev_length-1;s.prev_length-=2;do{if(++s.strstart<=max_insert){s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+MIN_MATCH-1]);hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=s.strstart}}while(--s.prev_length!==0);s.match_available=0;s.match_length=MIN_MATCH-1;s.strstart++;if(bflush){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}}else if(s.match_available){bflush=_tr_tally(s,0,s.window[s.strstart-1]);if(bflush){flush_block_only(s,false)}s.strstart++;s.lookahead--;if(s.strm.avail_out===0){return BS_NEED_MORE}}else{s.match_available=1;s.strstart++;s.lookahead--}}if(s.match_available){bflush=_tr_tally(s,0,s.window[s.strstart-1]);s.match_available=0}s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1;if(flush===Z_FINISH$3){flush_block_only(s,true);if(s.strm.avail_out===0){return BS_FINISH_STARTED}return BS_FINISH_DONE}if(s.sym_next){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}return BS_BLOCK_DONE};const deflate_rle=(s,flush)=>{let bflush;let prev;let scan,strend;const _win=s.window;for(;;){if(s.lookahead<=MAX_MATCH){fill_window(s);if(s.lookahead<=MAX_MATCH&&flush===Z_NO_FLUSH$2){return BS_NEED_MORE}if(s.lookahead===0){break}}s.match_length=0;if(s.lookahead>=MIN_MATCH&&s.strstart>0){scan=s.strstart-1;prev=_win[scan];if(prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]){strend=s.strstart+MAX_MATCH;do{}while(prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&scan<strend);s.match_length=MAX_MATCH-(strend-scan);if(s.match_length>s.lookahead){s.match_length=s.lookahead}}}if(s.match_length>=MIN_MATCH){bflush=_tr_tally(s,1,s.match_length-MIN_MATCH);s.lookahead-=s.match_length;s.strstart+=s.match_length;s.match_length=0}else{bflush=_tr_tally(s,0,s.window[s.strstart]);s.lookahead--;s.strstart++}if(bflush){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}}s.insert=0;if(flush===Z_FINISH$3){flush_block_only(s,true);if(s.strm.avail_out===0){return BS_FINISH_STARTED}return BS_FINISH_DONE}if(s.sym_next){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}return BS_BLOCK_DONE};const deflate_huff=(s,flush)=>{let bflush;for(;;){if(s.lookahead===0){fill_window(s);if(s.lookahead===0){if(flush===Z_NO_FLUSH$2){return BS_NEED_MORE}break}}s.match_length=0;bflush=_tr_tally(s,0,s.window[s.strstart]);s.lookahead--;s.strstart++;if(bflush){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}}s.insert=0;if(flush===Z_FINISH$3){flush_block_only(s,true);if(s.strm.avail_out===0){return BS_FINISH_STARTED}return BS_FINISH_DONE}if(s.sym_next){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE}}return BS_BLOCK_DONE};function Config(good_length,max_lazy,nice_length,max_chain,func){this.good_length=good_length;this.max_lazy=max_lazy;this.nice_length=nice_length;this.max_chain=max_chain;this.func=func}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];const lm_init=s=>{s.window_size=2*s.w_size;zero(s.head);s.max_lazy_match=configuration_table[s.level].max_lazy;s.good_match=configuration_table[s.level].good_length;s.nice_match=configuration_table[s.level].nice_length;s.max_chain_length=configuration_table[s.level].max_chain;s.strstart=0;s.block_start=0;s.lookahead=0;s.insert=0;s.match_length=s.prev_length=MIN_MATCH-1;s.match_available=0;s.ins_h=0};function DeflateState(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=Z_DEFLATED$2;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new Uint16Array(HEAP_SIZE*2);this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2);this.bl_tree=new Uint16Array((2*BL_CODES+1)*2);zero(this.dyn_ltree);zero(this.dyn_dtree);zero(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new Uint16Array(MAX_BITS+1);this.heap=new Uint16Array(2*L_CODES+1);zero(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new Uint16Array(2*L_CODES+1);zero(this.depth);this.sym_buf=0;this.lit_bufsize=0;this.sym_next=0;this.sym_end=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}const deflateStateCheck=strm=>{if(!strm){return 1}const s=strm.state;if(!s||s.strm!==strm||s.status!==INIT_STATE&&s.status!==GZIP_STATE&&s.status!==EXTRA_STATE&&s.status!==NAME_STATE&&s.status!==COMMENT_STATE&&s.status!==HCRC_STATE&&s.status!==BUSY_STATE&&s.status!==FINISH_STATE){return 1}return 0};const deflateResetKeep=strm=>{if(deflateStateCheck(strm)){return err(strm,Z_STREAM_ERROR$2)}strm.total_in=strm.total_out=0;strm.data_type=Z_UNKNOWN;const s=strm.state;s.pending=0;s.pending_out=0;if(s.wrap<0){s.wrap=-s.wrap}s.status=s.wrap===2?GZIP_STATE:s.wrap?INIT_STATE:BUSY_STATE;strm.adler=s.wrap===2?0:1;s.last_flush=-2;_tr_init(s);return Z_OK$3};const deflateReset=strm=>{const ret=deflateResetKeep(strm);if(ret===Z_OK$3){lm_init(strm.state)}return ret};const deflateSetHeader=(strm,head)=>{if(deflateStateCheck(strm)||strm.state.wrap!==2){return Z_STREAM_ERROR$2}strm.state.gzhead=head;return Z_OK$3};const deflateInit2=(strm,level,method,windowBits,memLevel,strategy)=>{if(!strm){return Z_STREAM_ERROR$2}let wrap=1;if(level===Z_DEFAULT_COMPRESSION$1){level=6}if(windowBits<0){wrap=0;windowBits=-windowBits}else if(windowBits>15){wrap=2;windowBits-=16}if(memLevel<1||memLevel>MAX_MEM_LEVEL||method!==Z_DEFLATED$2||windowBits<8||windowBits>15||level<0||level>9||strategy<0||strategy>Z_FIXED||windowBits===8&&wrap!==1){return err(strm,Z_STREAM_ERROR$2)}if(windowBits===8){windowBits=9}const s=new DeflateState;strm.state=s;s.strm=strm;s.status=INIT_STATE;s.wrap=wrap;s.gzhead=null;s.w_bits=windowBits;s.w_size=1<<s.w_bits;s.w_mask=s.w_size-1;s.hash_bits=memLevel+7;s.hash_size=1<<s.hash_bits;s.hash_mask=s.hash_size-1;s.hash_shift=~~((s.hash_bits+MIN_MATCH-1)/MIN_MATCH);s.window=new Uint8Array(s.w_size*2);s.head=new Uint16Array(s.hash_size);s.prev=new Uint16Array(s.w_size);s.lit_bufsize=1<<memLevel+6;s.pending_buf_size=s.lit_bufsize*4;s.pending_buf=new Uint8Array(s.pending_buf_size);s.sym_buf=s.lit_bufsize;s.sym_end=(s.lit_bufsize-1)*3;s.level=level;s.strategy=strategy;s.method=method;return deflateReset(strm)};const deflateInit=(strm,level)=>{return deflateInit2(strm,level,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1)};const deflate$2=(strm,flush)=>{if(deflateStateCheck(strm)||flush>Z_BLOCK$1||flush<0){return strm?err(strm,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2}const s=strm.state;if(!strm.output||strm.avail_in!==0&&!strm.input||s.status===FINISH_STATE&&flush!==Z_FINISH$3){return err(strm,strm.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2)}const old_flush=s.last_flush;s.last_flush=flush;if(s.pending!==0){flush_pending(strm);if(strm.avail_out===0){s.last_flush=-1;return Z_OK$3}}else if(strm.avail_in===0&&rank(flush)<=rank(old_flush)&&flush!==Z_FINISH$3){return err(strm,Z_BUF_ERROR$1)}if(s.status===FINISH_STATE&&strm.avail_in!==0){return err(strm,Z_BUF_ERROR$1)}if(s.status===INIT_STATE&&s.wrap===0){s.status=BUSY_STATE}if(s.status===INIT_STATE){let header=Z_DEFLATED$2+(s.w_bits-8<<4)<<8;let level_flags=-1;if(s.strategy>=Z_HUFFMAN_ONLY||s.level<2){level_flags=0}else if(s.level<6){level_flags=1}else if(s.level===6){level_flags=2}else{level_flags=3}header|=level_flags<<6;if(s.strstart!==0){header|=PRESET_DICT}header+=31-header%31;putShortMSB(s,header);if(s.strstart!==0){putShortMSB(s,strm.adler>>>16);putShortMSB(s,strm.adler&65535)}strm.adler=1;s.status=BUSY_STATE;flush_pending(strm);if(s.pending!==0){s.last_flush=-1;return Z_OK$3}}if(s.status===GZIP_STATE){strm.adler=0;put_byte(s,31);put_byte(s,139);put_byte(s,8);if(!s.gzhead){put_byte(s,0);put_byte(s,0);put_byte(s,0);put_byte(s,0);put_byte(s,0);put_byte(s,s.level===9?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0);put_byte(s,OS_CODE);s.status=BUSY_STATE;flush_pending(strm);if(s.pending!==0){s.last_flush=-1;return Z_OK$3}}else{put_byte(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(!s.gzhead.extra?0:4)+(!s.gzhead.name?0:8)+(!s.gzhead.comment?0:16));put_byte(s,s.gzhead.time&255);put_byte(s,s.gzhead.time>>8&255);put_byte(s,s.gzhead.time>>16&255);put_byte(s,s.gzhead.time>>24&255);put_byte(s,s.level===9?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0);put_byte(s,s.gzhead.os&255);if(s.gzhead.extra&&s.gzhead.extra.length){put_byte(s,s.gzhead.extra.length&255);put_byte(s,s.gzhead.extra.length>>8&255)}if(s.gzhead.hcrc){strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending,0)}s.gzindex=0;s.status=EXTRA_STATE}}if(s.status===EXTRA_STATE){if(s.gzhead.extra){let beg=s.pending;let left=(s.gzhead.extra.length&65535)-s.gzindex;while(s.pending+left>s.pending_buf_size){let copy=s.pending_buf_size-s.pending;s.pending_buf.set(s.gzhead.extra.subarray(s.gzindex,s.gzindex+copy),s.pending);s.pending=s.pending_buf_size;if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg)}s.gzindex+=copy;flush_pending(strm);if(s.pending!==0){s.last_flush=-1;return Z_OK$3}beg=0;left-=copy}let gzhead_extra=new Uint8Array(s.gzhead.extra);s.pending_buf.set(gzhead_extra.subarray(s.gzindex,s.gzindex+left),s.pending);s.pending+=left;if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg)}s.gzindex=0}s.status=NAME_STATE}if(s.status===NAME_STATE){if(s.gzhead.name){let beg=s.pending;let val;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg)}flush_pending(strm);if(s.pending!==0){s.last_flush=-1;return Z_OK$3}beg=0}if(s.gzindex<s.gzhead.name.length){val=s.gzhead.name.charCodeAt(s.gzindex++)&255}else{val=0}put_byte(s,val)}while(val!==0);if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg)}s.gzindex=0}s.status=COMMENT_STATE}if(s.status===COMMENT_STATE){if(s.gzhead.comment){let beg=s.pending;let val;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg)}flush_pending(strm);if(s.pending!==0){s.last_flush=-1;return Z_OK$3}beg=0}if(s.gzindex<s.gzhead.comment.length){val=s.gzhead.comment.charCodeAt(s.gzindex++)&255}else{val=0}put_byte(s,val)}while(val!==0);if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg)}}s.status=HCRC_STATE}if(s.status===HCRC_STATE){if(s.gzhead.hcrc){if(s.pending+2>s.pending_buf_size){flush_pending(strm);if(s.pending!==0){s.last_flush=-1;return Z_OK$3}}put_byte(s,strm.adler&255);put_byte(s,strm.adler>>8&255);strm.adler=0}s.status=BUSY_STATE;flush_pending(strm);if(s.pending!==0){s.last_flush=-1;return Z_OK$3}}if(strm.avail_in!==0||s.lookahead!==0||flush!==Z_NO_FLUSH$2&&s.status!==FINISH_STATE){let bstate=s.level===0?deflate_stored(s,flush):s.strategy===Z_HUFFMAN_ONLY?deflate_huff(s,flush):s.strategy===Z_RLE?deflate_rle(s,flush):configuration_table[s.level].func(s,flush);if(bstate===BS_FINISH_STARTED||bstate===BS_FINISH_DONE){s.status=FINISH_STATE}if(bstate===BS_NEED_MORE||bstate===BS_FINISH_STARTED){if(strm.avail_out===0){s.last_flush=-1}return Z_OK$3}if(bstate===BS_BLOCK_DONE){if(flush===Z_PARTIAL_FLUSH){_tr_align(s)}else if(flush!==Z_BLOCK$1){_tr_stored_block(s,0,0,false);if(flush===Z_FULL_FLUSH$1){zero(s.head);if(s.lookahead===0){s.strstart=0;s.block_start=0;s.insert=0}}}flush_pending(strm);if(strm.avail_out===0){s.last_flush=-1;return Z_OK$3}}}if(flush!==Z_FINISH$3){return Z_OK$3}if(s.wrap<=0){return Z_STREAM_END$3}if(s.wrap===2){put_byte(s,strm.adler&255);put_byte(s,strm.adler>>8&255);put_byte(s,strm.adler>>16&255);put_byte(s,strm.adler>>24&255);put_byte(s,strm.total_in&255);put_byte(s,strm.total_in>>8&255);put_byte(s,strm.total_in>>16&255);put_byte(s,strm.total_in>>24&255)}else{putShortMSB(s,strm.adler>>>16);putShortMSB(s,strm.adler&65535)}flush_pending(strm);if(s.wrap>0){s.wrap=-s.wrap}return s.pending!==0?Z_OK$3:Z_STREAM_END$3};const deflateEnd=strm=>{if(deflateStateCheck(strm)){return Z_STREAM_ERROR$2}const status=strm.state.status;strm.state=null;return status===BUSY_STATE?err(strm,Z_DATA_ERROR$2):Z_OK$3};const deflateSetDictionary=(strm,dictionary)=>{let dictLength=dictionary.length;if(deflateStateCheck(strm)){return Z_STREAM_ERROR$2}const s=strm.state;const wrap=s.wrap;if(wrap===2||wrap===1&&s.status!==INIT_STATE||s.lookahead){return Z_STREAM_ERROR$2}if(wrap===1){strm.adler=adler32_1(strm.adler,dictionary,dictLength,0)}s.wrap=0;if(dictLength>=s.w_size){if(wrap===0){zero(s.head);s.strstart=0;s.block_start=0;s.insert=0}let tmpDict=new Uint8Array(s.w_size);tmpDict.set(dictionary.subarray(dictLength-s.w_size,dictLength),0);dictionary=tmpDict;dictLength=s.w_size}const avail=strm.avail_in;const next=strm.next_in;const input=strm.input;strm.avail_in=dictLength;strm.next_in=0;strm.input=dictionary;fill_window(s);while(s.lookahead>=MIN_MATCH){let str=s.strstart;let n=s.lookahead-(MIN_MATCH-1);do{s.ins_h=HASH(s,s.ins_h,s.window[str+MIN_MATCH-1]);s.prev[str&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=str;str++}while(--n);s.strstart=str;s.lookahead=MIN_MATCH-1;fill_window(s)}s.strstart+=s.lookahead;s.block_start=s.strstart;s.insert=s.lookahead;s.lookahead=0;s.match_length=s.prev_length=MIN_MATCH-1;s.match_available=0;strm.next_in=next;strm.input=input;strm.avail_in=avail;s.wrap=wrap;return Z_OK$3};var deflateInit_1=deflateInit;var deflateInit2_1=deflateInit2;var deflateReset_1=deflateReset;var deflateResetKeep_1=deflateResetKeep;var deflateSetHeader_1=deflateSetHeader;var deflate_2$1=deflate$2;var deflateEnd_1=deflateEnd;var deflateSetDictionary_1=deflateSetDictionary;var deflateInfo="pako deflate (from Nodeca project)";var deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo:deflateInfo};const _has=(obj,key)=>{return Object.prototype.hasOwnProperty.call(obj,key)};var assign=function(obj){const sources=Array.prototype.slice.call(arguments,1);while(sources.length){const source=sources.shift();if(!source){continue}if(typeof source!=="object"){throw new TypeError(source+"must be non-object")}for(const p in source){if(_has(source,p)){obj[p]=source[p]}}}return obj};var flattenChunks=chunks=>{let len=0;for(let i=0,l=chunks.length;i<l;i++){len+=chunks[i].length}const result=new Uint8Array(len);for(let i=0,pos=0,l=chunks.length;i<l;i++){let chunk=chunks[i];result.set(chunk,pos);pos+=chunk.length}return result};var common={assign:assign,flattenChunks:flattenChunks};let STR_APPLY_UIA_OK=true;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(__){STR_APPLY_UIA_OK=false}const _utf8len=new Uint8Array(256);for(let q=0;q<256;q++){_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1}_utf8len[254]=_utf8len[254]=1;var string2buf=str=>{if(typeof TextEncoder==="function"&&TextEncoder.prototype.encode){return(new TextEncoder).encode(str)}let buf,c,c2,m_pos,i,str_len=str.length,buf_len=0;for(m_pos=0;m_pos<str_len;m_pos++){c=str.charCodeAt(m_pos);if((c&64512)===55296&&m_pos+1<str_len){c2=str.charCodeAt(m_pos+1);if((c2&64512)===56320){c=65536+(c-55296<<10)+(c2-56320);m_pos++}}buf_len+=c<128?1:c<2048?2:c<65536?3:4}buf=new Uint8Array(buf_len);for(i=0,m_pos=0;i<buf_len;m_pos++){c=str.charCodeAt(m_pos);if((c&64512)===55296&&m_pos+1<str_len){c2=str.charCodeAt(m_pos+1);if((c2&64512)===56320){c=65536+(c-55296<<10)+(c2-56320);m_pos++}}if(c<128){buf[i++]=c}else if(c<2048){buf[i++]=192|c>>>6;buf[i++]=128|c&63}else if(c<65536){buf[i++]=224|c>>>12;buf[i++]=128|c>>>6&63;buf[i++]=128|c&63}else{buf[i++]=240|c>>>18;buf[i++]=128|c>>>12&63;buf[i++]=128|c>>>6&63;buf[i++]=128|c&63}}return buf};const buf2binstring=(buf,len)=>{if(len<65534){if(buf.subarray&&STR_APPLY_UIA_OK){return String.fromCharCode.apply(null,buf.length===len?buf:buf.subarray(0,len))}}let result="";for(let i=0;i<len;i++){result+=String.fromCharCode(buf[i])}return result};var buf2string=(buf,max)=>{const len=max||buf.length;if(typeof TextDecoder==="function"&&TextDecoder.prototype.decode){return(new TextDecoder).decode(buf.subarray(0,max))}let i,out;const utf16buf=new Array(len*2);for(out=0,i=0;i<len;){let c=buf[i++];if(c<128){utf16buf[out++]=c;continue}let c_len=_utf8len[c];if(c_len>4){utf16buf[out++]=65533;i+=c_len-1;continue}c&=c_len===2?31:c_len===3?15:7;while(c_len>1&&i<len){c=c<<6|buf[i++]&63;c_len--}if(c_len>1){utf16buf[out++]=65533;continue}if(c<65536){utf16buf[out++]=c}else{c-=65536;utf16buf[out++]=55296|c>>10&1023;utf16buf[out++]=56320|c&1023}}return buf2binstring(utf16buf,out)};var utf8border=(buf,max)=>{max=max||buf.length;if(max>buf.length){max=buf.length}let pos=max-1;while(pos>=0&&(buf[pos]&192)===128){pos--}if(pos<0){return max}if(pos===0){return max}return pos+_utf8len[buf[pos]]>max?pos:max};var strings={string2buf:string2buf,buf2string:buf2string,utf8border:utf8border};function ZStream(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString;const{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(options){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},options||{});let opt=this.options;if(opt.raw&&opt.windowBits>0){opt.windowBits=-opt.windowBits}else if(opt.gzip&&opt.windowBits>0&&opt.windowBits<16){opt.windowBits+=16}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new zstream;this.strm.avail_out=0;let status=deflate_1$2.deflateInit2(this.strm,opt.level,opt.method,opt.windowBits,opt.memLevel,opt.strategy);if(status!==Z_OK$2){throw new Error(messages[status])}if(opt.header){deflate_1$2.deflateSetHeader(this.strm,opt.header)}if(opt.dictionary){let dict;if(typeof opt.dictionary==="string"){dict=strings.string2buf(opt.dictionary)}else if(toString$1.call(opt.dictionary)==="[object ArrayBuffer]"){dict=new Uint8Array(opt.dictionary)}else{dict=opt.dictionary}status=deflate_1$2.deflateSetDictionary(this.strm,dict);if(status!==Z_OK$2){throw new Error(messages[status])}this._dict_set=true}}Deflate$1.prototype.push=function(data,flush_mode){const strm=this.strm;const chunkSize=this.options.chunkSize;let status,_flush_mode;if(this.ended){return false}if(flush_mode===~~flush_mode)_flush_mode=flush_mode;else _flush_mode=flush_mode===true?Z_FINISH$2:Z_NO_FLUSH$1;if(typeof data==="string"){strm.input=strings.string2buf(data)}else if(toString$1.call(data)==="[object ArrayBuffer]"){strm.input=new Uint8Array(data)}else{strm.input=data}strm.next_in=0;strm.avail_in=strm.input.length;for(;;){if(strm.avail_out===0){strm.output=new Uint8Array(chunkSize);strm.next_out=0;strm.avail_out=chunkSize}if((_flush_mode===Z_SYNC_FLUSH||_flush_mode===Z_FULL_FLUSH)&&strm.avail_out<=6){this.onData(strm.output.subarray(0,strm.next_out));strm.avail_out=0;continue}status=deflate_1$2.deflate(strm,_flush_mode);if(status===Z_STREAM_END$2){if(strm.next_out>0){this.onData(strm.output.subarray(0,strm.next_out))}status=deflate_1$2.deflateEnd(this.strm);this.onEnd(status);this.ended=true;return status===Z_OK$2}if(strm.avail_out===0){this.onData(strm.output);continue}if(_flush_mode>0&&strm.next_out>0){this.onData(strm.output.subarray(0,strm.next_out));strm.avail_out=0;continue}if(strm.avail_in===0)break}return true};Deflate$1.prototype.onData=function(chunk){this.chunks.push(chunk)};Deflate$1.prototype.onEnd=function(status){if(status===Z_OK$2){this.result=common.flattenChunks(this.chunks)}this.chunks=[];this.err=status;this.msg=this.strm.msg};function deflate$1(input,options){const deflator=new Deflate$1(options);deflator.push(input,true);if(deflator.err){throw deflator.msg||messages[deflator.err]}return deflator.result}function deflateRaw$1(input,options){options=options||{};options.raw=true;return deflate$1(input,options)}function gzip$1(input,options){options=options||{};options.gzip=true;return deflate$1(input,options)}var Deflate_1$1=Deflate$1;var deflate_2=deflate$1;var deflateRaw_1$1=deflateRaw$1;var gzip_1$1=gzip$1;var constants$1=constants$2;var deflate_1$1={Deflate:Deflate_1$1,deflate:deflate_2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1,constants:constants$1};const BAD$1=16209;const TYPE$1=16191;var inffast=function inflate_fast(strm,start){let _in;let last;let _out;let beg;let end;let dmax;let wsize;let whave;let wnext;let s_window;let hold;let bits;let lcode;let dcode;let lmask;let dmask;let here;let op;let len;let dist;let from;let from_source;let input,output;const state=strm.state;_in=strm.next_in;input=strm.input;last=_in+(strm.avail_in-5);_out=strm.next_out;output=strm.output;beg=_out-(start-strm.avail_out);end=_out+(strm.avail_out-257);dmax=state.dmax;wsize=state.wsize;whave=state.whave;wnext=state.wnext;s_window=state.window;hold=state.hold;bits=state.bits;lcode=state.lencode;dcode=state.distcode;lmask=(1<<state.lenbits)-1;dmask=(1<<state.distbits)-1;top:do{if(bits<15){hold+=input[_in++]<<bits;bits+=8;hold+=input[_in++]<<bits;bits+=8}here=lcode[hold&lmask];dolen:for(;;){op=here>>>24;hold>>>=op;bits-=op;op=here>>>16&255;if(op===0){output[_out++]=here&65535}else if(op&16){len=here&65535;op&=15;if(op){if(bits<op){hold+=input[_in++]<<bits;bits+=8}len+=hold&(1<<op)-1;hold>>>=op;bits-=op}if(bits<15){hold+=input[_in++]<<bits;bits+=8;hold+=input[_in++]<<bits;bits+=8}here=dcode[hold&dmask];dodist:for(;;){op=here>>>24;hold>>>=op;bits-=op;op=here>>>16&255;if(op&16){dist=here&65535;op&=15;if(bits<op){hold+=input[_in++]<<bits;bits+=8;if(bits<op){hold+=input[_in++]<<bits;bits+=8}}dist+=hold&(1<<op)-1;if(dist>dmax){strm.msg="invalid distance too far back";state.mode=BAD$1;break top}hold>>>=op;bits-=op;op=_out-beg;if(dist>op){op=dist-op;if(op>whave){if(state.sane){strm.msg="invalid distance too far back";state.mode=BAD$1;break top}}from=0;from_source=s_window;if(wnext===0){from+=wsize-op;if(op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist;from_source=output}}else if(wnext<op){from+=wsize+wnext-op;op-=wnext;if(op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=0;if(wnext<len){op=wnext;len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist;from_source=output}}}else{from+=wnext-op;if(op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist;from_source=output}}while(len>2){output[_out++]=from_source[from++];output[_out++]=from_source[from++];output[_out++]=from_source[from++];len-=3}if(len){output[_out++]=from_source[from++];if(len>1){output[_out++]=from_source[from++]}}}else{from=_out-dist;do{output[_out++]=output[from++];output[_out++]=output[from++];output[_out++]=output[from++];len-=3}while(len>2);if(len){output[_out++]=output[from++];if(len>1){output[_out++]=output[from++]}}}}else if((op&64)===0){here=dcode[(here&65535)+(hold&(1<<op)-1)];continue dodist}else{strm.msg="invalid distance code";state.mode=BAD$1;break top}break}}else if((op&64)===0){here=lcode[(here&65535)+(hold&(1<<op)-1)];continue dolen}else if(op&32){state.mode=TYPE$1;break top}else{strm.msg="invalid literal/length code";state.mode=BAD$1;break top}break}}while(_in<last&&_out<end);len=bits>>3;_in-=len;bits-=len<<3;hold&=(1<<bits)-1;strm.next_in=_in;strm.next_out=_out;strm.avail_in=_in<last?5+(last-_in):5-(_in-last);strm.avail_out=_out<end?257+(end-_out):257-(_out-end);state.hold=hold;state.bits=bits;return};const MAXBITS=15;const ENOUGH_LENS$1=852;const ENOUGH_DISTS$1=592;const CODES$1=0;const LENS$1=1;const DISTS$1=2;const lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]);const lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]);const dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]);const dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);const inflate_table=(type,lens,lens_index,codes,table,table_index,work,opts)=>{const bits=opts.bits;let len=0;let sym=0;let min=0,max=0;let root=0;let curr=0;let drop=0;let left=0;let used=0;let huff=0;let incr;let fill;let low;let mask;let next;let base=null;let match;const count=new Uint16Array(MAXBITS+1);const offs=new Uint16Array(MAXBITS+1);let extra=null;let here_bits,here_op,here_val;for(len=0;len<=MAXBITS;len++){count[len]=0}for(sym=0;sym<codes;sym++){count[lens[lens_index+sym]]++}root=bits;for(max=MAXBITS;max>=1;max--){if(count[max]!==0){break}}if(root>max){root=max}if(max===0){table[table_index++]=1<<24|64<<16|0;table[table_index++]=1<<24|64<<16|0;opts.bits=1;return 0}for(min=1;min<max;min++){if(count[min]!==0){break}}if(root<min){root=min}left=1;for(len=1;len<=MAXBITS;len++){left<<=1;left-=count[len];if(left<0){return-1}}if(left>0&&(type===CODES$1||max!==1)){return-1}offs[1]=0;for(len=1;len<MAXBITS;len++){offs[len+1]=offs[len]+count[len]}for(sym=0;sym<codes;sym++){if(lens[lens_index+sym]!==0){work[offs[lens[lens_index+sym]]++]=sym}}if(type===CODES$1){base=extra=work;match=20}else if(type===LENS$1){base=lbase;extra=lext;match=257}else{base=dbase;extra=dext;match=0}huff=0;sym=0;len=min;next=table_index;curr=root;drop=0;low=-1;used=1<<root;mask=used-1;if(type===LENS$1&&used>ENOUGH_LENS$1||type===DISTS$1&&used>ENOUGH_DISTS$1){return 1}for(;;){here_bits=len-drop;if(work[sym]+1<match){here_op=0;here_val=work[sym]}else if(work[sym]>=match){here_op=extra[work[sym]-match];here_val=base[work[sym]-match]}else{here_op=32+64;here_val=0}incr=1<<len-drop;fill=1<<curr;min=fill;do{fill-=incr;table[next+(huff>>drop)+fill]=here_bits<<24|here_op<<16|here_val|0}while(fill!==0);incr=1<<len-1;while(huff&incr){incr>>=1}if(incr!==0){huff&=incr-1;huff+=incr}else{huff=0}sym++;if(--count[len]===0){if(len===max){break}len=lens[lens_index+work[sym]]}if(len>root&&(huff&mask)!==low){if(drop===0){drop=root}next+=min;curr=len-drop;left=1<<curr;while(curr+drop<max){left-=count[curr+drop];if(left<=0){break}curr++;left<<=1}used+=1<<curr;if(type===LENS$1&&used>ENOUGH_LENS$1||type===DISTS$1&&used>ENOUGH_DISTS$1){return 1}low=huff&mask;table[low]=root<<24|curr<<16|next-table_index|0}}if(huff!==0){table[next+huff]=len-drop<<24|64<<16|0}opts.bits=root;return 0};var inftrees=inflate_table;const CODES=0;const LENS=1;const DISTS=2;const{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2;const HEAD=16180;const FLAGS=16181;const TIME=16182;const OS=16183;const EXLEN=16184;const EXTRA=16185;const NAME=16186;const COMMENT=16187;const HCRC=16188;const DICTID=16189;const DICT=16190;const TYPE=16191;const TYPEDO=16192;const STORED=16193;const COPY_=16194;const COPY=16195;const TABLE=16196;const LENLENS=16197;const CODELENS=16198;const LEN_=16199;const LEN=16200;const LENEXT=16201;const DIST=16202;const DISTEXT=16203;const MATCH=16204;const LIT=16205;const CHECK=16206;const LENGTH=16207;const DONE=16208;const BAD=16209;const MEM=16210;const SYNC=16211;const ENOUGH_LENS=852;const ENOUGH_DISTS=592;const MAX_WBITS=15;const DEF_WBITS=MAX_WBITS;const zswap32=q=>{return(q>>>24&255)+(q>>>8&65280)+((q&65280)<<8)+((q&255)<<24)};function InflateState(){this.strm=null;this.mode=0;this.last=false;this.wrap=0;this.havedict=false;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new Uint16Array(320);this.work=new Uint16Array(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0}const inflateStateCheck=strm=>{if(!strm){return 1}const state=strm.state;if(!state||state.strm!==strm||state.mode<HEAD||state.mode>SYNC){return 1}return 0};const inflateResetKeep=strm=>{if(inflateStateCheck(strm)){return Z_STREAM_ERROR$1}const state=strm.state;strm.total_in=strm.total_out=state.total=0;strm.msg="";if(state.wrap){strm.adler=state.wrap&1}state.mode=HEAD;state.last=0;state.havedict=0;state.flags=-1;state.dmax=32768;state.head=null;state.hold=0;state.bits=0;state.lencode=state.lendyn=new Int32Array(ENOUGH_LENS);state.distcode=state.distdyn=new Int32Array(ENOUGH_DISTS);state.sane=1;state.back=-1;return Z_OK$1};const inflateReset=strm=>{if(inflateStateCheck(strm)){return Z_STREAM_ERROR$1}const state=strm.state;state.wsize=0;state.whave=0;state.wnext=0;return inflateResetKeep(strm)};const inflateReset2=(strm,windowBits)=>{let wrap;if(inflateStateCheck(strm)){return Z_STREAM_ERROR$1}const state=strm.state;if(windowBits<0){wrap=0;windowBits=-windowBits}else{wrap=(windowBits>>4)+5;if(windowBits<48){windowBits&=15}}if(windowBits&&(windowBits<8||windowBits>15)){return Z_STREAM_ERROR$1}if(state.window!==null&&state.wbits!==windowBits){state.window=null}state.wrap=wrap;state.wbits=windowBits;return inflateReset(strm)};const inflateInit2=(strm,windowBits)=>{if(!strm){return Z_STREAM_ERROR$1}const state=new InflateState;strm.state=state;state.strm=strm;state.window=null;state.mode=HEAD;const ret=inflateReset2(strm,windowBits);if(ret!==Z_OK$1){strm.state=null}return ret};const inflateInit=strm=>{return inflateInit2(strm,DEF_WBITS)};let virgin=true;let lenfix,distfix;const fixedtables=state=>{if(virgin){lenfix=new Int32Array(512);distfix=new Int32Array(32);let sym=0;while(sym<144){state.lens[sym++]=8}while(sym<256){state.lens[sym++]=9}while(sym<280){state.lens[sym++]=7}while(sym<288){state.lens[sym++]=8}inftrees(LENS,state.lens,0,288,lenfix,0,state.work,{bits:9});sym=0;while(sym<32){state.lens[sym++]=5}inftrees(DISTS,state.lens,0,32,distfix,0,state.work,{bits:5});virgin=false}state.lencode=lenfix;state.lenbits=9;state.distcode=distfix;state.distbits=5};const updatewindow=(strm,src,end,copy)=>{let dist;const state=strm.state;if(state.window===null){state.wsize=1<<state.wbits;state.wnext=0;state.whave=0;state.window=new Uint8Array(state.wsize)}if(copy>=state.wsize){state.window.set(src.subarray(end-state.wsize,end),0);state.wnext=0;state.whave=state.wsize}else{dist=state.wsize-state.wnext;if(dist>copy){dist=copy}state.window.set(src.subarray(end-copy,end-copy+dist),state.wnext);copy-=dist;if(copy){state.window.set(src.subarray(end-copy,end),0);state.wnext=copy;state.whave=state.wsize}else{state.wnext+=dist;if(state.wnext===state.wsize){state.wnext=0}if(state.whave<state.wsize){state.whave+=dist}}}return 0};const inflate$2=(strm,flush)=>{let state;let input,output;let next;let put;let have,left;let hold;let bits;let _in,_out;let copy;let from;let from_source;let here=0;let here_bits,here_op,here_val;let last_bits,last_op,last_val;let len;let ret;const hbuf=new Uint8Array(4);let opts;let n;const order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(strm)||!strm.output||!strm.input&&strm.avail_in!==0){return Z_STREAM_ERROR$1}state=strm.state;if(state.mode===TYPE){state.mode=TYPEDO}put=strm.next_out;output=strm.output;left=strm.avail_out;next=strm.next_in;input=strm.input;have=strm.avail_in;hold=state.hold;bits=state.bits;_in=have;_out=left;ret=Z_OK$1;inf_leave:for(;;){switch(state.mode){case HEAD:if(state.wrap===0){state.mode=TYPEDO;break}while(bits<16){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if(state.wrap&2&&hold===35615){if(state.wbits===0){state.wbits=15}state.check=0;hbuf[0]=hold&255;hbuf[1]=hold>>>8&255;state.check=crc32_1(state.check,hbuf,2,0);hold=0;bits=0;state.mode=FLAGS;break}if(state.head){state.head.done=false}if(!(state.wrap&1)||(((hold&255)<<8)+(hold>>8))%31){strm.msg="incorrect header check";state.mode=BAD;break}if((hold&15)!==Z_DEFLATED){strm.msg="unknown compression method";state.mode=BAD;break}hold>>>=4;bits-=4;len=(hold&15)+8;if(state.wbits===0){state.wbits=len}if(len>15||len>state.wbits){strm.msg="invalid window size";state.mode=BAD;break}state.dmax=1<<state.wbits;state.flags=0;strm.adler=state.check=1;state.mode=hold&512?DICTID:TYPE;hold=0;bits=0;break;case FLAGS:while(bits<16){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}state.flags=hold;if((state.flags&255)!==Z_DEFLATED){strm.msg="unknown compression method";state.mode=BAD;break}if(state.flags&57344){strm.msg="unknown header flags set";state.mode=BAD;break}if(state.head){state.head.text=hold>>8&1}if(state.flags&512&&state.wrap&4){hbuf[0]=hold&255;hbuf[1]=hold>>>8&255;state.check=crc32_1(state.check,hbuf,2,0)}hold=0;bits=0;state.mode=TIME;case TIME:while(bits<32){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if(state.head){state.head.time=hold}if(state.flags&512&&state.wrap&4){hbuf[0]=hold&255;hbuf[1]=hold>>>8&255;hbuf[2]=hold>>>16&255;hbuf[3]=hold>>>24&255;state.check=crc32_1(state.check,hbuf,4,0)}hold=0;bits=0;state.mode=OS;case OS:while(bits<16){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if(state.head){state.head.xflags=hold&255;state.head.os=hold>>8}if(state.flags&512&&state.wrap&4){hbuf[0]=hold&255;hbuf[1]=hold>>>8&255;state.check=crc32_1(state.check,hbuf,2,0)}hold=0;bits=0;state.mode=EXLEN;case EXLEN:if(state.flags&1024){while(bits<16){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}state.length=hold;if(state.head){state.head.extra_len=hold}if(state.flags&512&&state.wrap&4){hbuf[0]=hold&255;hbuf[1]=hold>>>8&255;state.check=crc32_1(state.check,hbuf,2,0)}hold=0;bits=0}else if(state.head){state.head.extra=null}state.mode=EXTRA;case EXTRA:if(state.flags&1024){copy=state.length;if(copy>have){copy=have}if(copy){if(state.head){len=state.head.extra_len-state.length;if(!state.head.extra){state.head.extra=new Uint8Array(state.head.extra_len)}state.head.extra.set(input.subarray(next,next+copy),len)}if(state.flags&512&&state.wrap&4){state.check=crc32_1(state.check,input,copy,next)}have-=copy;next+=copy;state.length-=copy}if(state.length){break inf_leave}}state.length=0;state.mode=NAME;case NAME:if(state.flags&2048){if(have===0){break inf_leave}copy=0;do{len=input[next+copy++];if(state.head&&len&&state.length<65536){state.head.name+=String.fromCharCode(len)}}while(len&&copy<have);if(state.flags&512&&state.wrap&4){state.check=crc32_1(state.check,input,copy,next)}have-=copy;next+=copy;if(len){break inf_leave}}else if(state.head){state.head.name=null}state.length=0;state.mode=COMMENT;case COMMENT:if(state.flags&4096){if(have===0){break inf_leave}copy=0;do{len=input[next+copy++];if(state.head&&len&&state.length<65536){state.head.comment+=String.fromCharCode(len)}}while(len&&copy<have);if(state.flags&512&&state.wrap&4){state.check=crc32_1(state.check,input,copy,next)}have-=copy;next+=copy;if(len){break inf_leave}}else if(state.head){state.head.comment=null}state.mode=HCRC;case HCRC:if(state.flags&512){while(bits<16){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if(state.wrap&4&&hold!==(state.check&65535)){strm.msg="header crc mismatch";state.mode=BAD;break}hold=0;bits=0}if(state.head){state.head.hcrc=state.flags>>9&1;state.head.done=true}strm.adler=state.check=0;state.mode=TYPE;break;case DICTID:while(bits<32){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}strm.adler=state.check=zswap32(hold);hold=0;bits=0;state.mode=DICT;case DICT:if(state.havedict===0){strm.next_out=put;strm.avail_out=left;strm.next_in=next;strm.avail_in=have;state.hold=hold;state.bits=bits;return Z_NEED_DICT$1}strm.adler=state.check=1;state.mode=TYPE;case TYPE:if(flush===Z_BLOCK||flush===Z_TREES){break inf_leave}case TYPEDO:if(state.last){hold>>>=bits&7;bits-=bits&7;state.mode=CHECK;break}while(bits<3){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}state.last=hold&1;hold>>>=1;bits-=1;switch(hold&3){case 0:state.mode=STORED;break;case 1:fixedtables(state);state.mode=LEN_;if(flush===Z_TREES){hold>>>=2;bits-=2;break inf_leave}break;case 2:state.mode=TABLE;break;case 3:strm.msg="invalid block type";state.mode=BAD}hold>>>=2;bits-=2;break;case STORED:hold>>>=bits&7;bits-=bits&7;while(bits<32){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if((hold&65535)!==(hold>>>16^65535)){strm.msg="invalid stored block lengths";state.mode=BAD;break}state.length=hold&65535;hold=0;bits=0;state.mode=COPY_;if(flush===Z_TREES){break inf_leave}case COPY_:state.mode=COPY;case COPY:copy=state.length;if(copy){if(copy>have){copy=have}if(copy>left){copy=left}if(copy===0){break inf_leave}output.set(input.subarray(next,next+copy),put);have-=copy;next+=copy;left-=copy;put+=copy;state.length-=copy;break}state.mode=TYPE;break;case TABLE:while(bits<14){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}state.nlen=(hold&31)+257;hold>>>=5;bits-=5;state.ndist=(hold&31)+1;hold>>>=5;bits-=5;state.ncode=(hold&15)+4;hold>>>=4;bits-=4;if(state.nlen>286||state.ndist>30){strm.msg="too many length or distance symbols";state.mode=BAD;break}state.have=0;state.mode=LENLENS;case LENLENS:while(state.have<state.ncode){while(bits<3){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}state.lens[order[state.have++]]=hold&7;hold>>>=3;bits-=3}while(state.have<19){state.lens[order[state.have++]]=0}state.lencode=state.lendyn;state.lenbits=7;opts={bits:state.lenbits};ret=inftrees(CODES,state.lens,0,19,state.lencode,0,state.work,opts);state.lenbits=opts.bits;if(ret){strm.msg="invalid code lengths set";state.mode=BAD;break}state.have=0;state.mode=CODELENS;case CODELENS:while(state.have<state.nlen+state.ndist){for(;;){here=state.lencode[hold&(1<<state.lenbits)-1];here_bits=here>>>24;here_op=here>>>16&255;here_val=here&65535;if(here_bits<=bits){break}if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if(here_val<16){hold>>>=here_bits;bits-=here_bits;state.lens[state.have++]=here_val}else{if(here_val===16){n=here_bits+2;while(bits<n){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}hold>>>=here_bits;bits-=here_bits;if(state.have===0){strm.msg="invalid bit length repeat";state.mode=BAD;break}len=state.lens[state.have-1];copy=3+(hold&3);hold>>>=2;bits-=2}else if(here_val===17){n=here_bits+3;while(bits<n){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}hold>>>=here_bits;bits-=here_bits;len=0;copy=3+(hold&7);hold>>>=3;bits-=3}else{n=here_bits+7;while(bits<n){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}hold>>>=here_bits;bits-=here_bits;len=0;copy=11+(hold&127);hold>>>=7;bits-=7}if(state.have+copy>state.nlen+state.ndist){strm.msg="invalid bit length repeat";state.mode=BAD;break}while(copy--){state.lens[state.have++]=len}}}if(state.mode===BAD){break}if(state.lens[256]===0){strm.msg="invalid code -- missing end-of-block";state.mode=BAD;break}state.lenbits=9;opts={bits:state.lenbits};ret=inftrees(LENS,state.lens,0,state.nlen,state.lencode,0,state.work,opts);state.lenbits=opts.bits;if(ret){strm.msg="invalid literal/lengths set";state.mode=BAD;break}state.distbits=6;state.distcode=state.distdyn;opts={bits:state.distbits};ret=inftrees(DISTS,state.lens,state.nlen,state.ndist,state.distcode,0,state.work,opts);state.distbits=opts.bits;if(ret){strm.msg="invalid distances set";state.mode=BAD;break}state.mode=LEN_;if(flush===Z_TREES){break inf_leave}case LEN_:state.mode=LEN;case LEN:if(have>=6&&left>=258){strm.next_out=put;strm.avail_out=left;strm.next_in=next;strm.avail_in=have;state.hold=hold;state.bits=bits;inffast(strm,_out);put=strm.next_out;output=strm.output;left=strm.avail_out;next=strm.next_in;input=strm.input;have=strm.avail_in;hold=state.hold;bits=state.bits;if(state.mode===TYPE){state.back=-1}break}state.back=0;for(;;){here=state.lencode[hold&(1<<state.lenbits)-1];here_bits=here>>>24;here_op=here>>>16&255;here_val=here&65535;if(here_bits<=bits){break}if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if(here_op&&(here_op&240)===0){last_bits=here_bits;last_op=here_op;last_val=here_val;for(;;){here=state.lencode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)];here_bits=here>>>24;here_op=here>>>16&255;here_val=here&65535;if(last_bits+here_bits<=bits){break}if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}hold>>>=last_bits;bits-=last_bits;state.back+=last_bits}hold>>>=here_bits;bits-=here_bits;state.back+=here_bits;state.length=here_val;if(here_op===0){state.mode=LIT;break}if(here_op&32){state.back=-1;state.mode=TYPE;break}if(here_op&64){strm.msg="invalid literal/length code";state.mode=BAD;break}state.extra=here_op&15;state.mode=LENEXT;case LENEXT:if(state.extra){n=state.extra;while(bits<n){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}state.length+=hold&(1<<state.extra)-1;hold>>>=state.extra;bits-=state.extra;state.back+=state.extra}state.was=state.length;state.mode=DIST;case DIST:for(;;){here=state.distcode[hold&(1<<state.distbits)-1];here_bits=here>>>24;here_op=here>>>16&255;here_val=here&65535;if(here_bits<=bits){break}if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if((here_op&240)===0){last_bits=here_bits;last_op=here_op;last_val=here_val;for(;;){here=state.distcode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)];here_bits=here>>>24;here_op=here>>>16&255;here_val=here&65535;if(last_bits+here_bits<=bits){break}if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}hold>>>=last_bits;bits-=last_bits;state.back+=last_bits}hold>>>=here_bits;bits-=here_bits;state.back+=here_bits;if(here_op&64){strm.msg="invalid distance code";state.mode=BAD;break}state.offset=here_val;state.extra=here_op&15;state.mode=DISTEXT;case DISTEXT:if(state.extra){n=state.extra;while(bits<n){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}state.offset+=hold&(1<<state.extra)-1;hold>>>=state.extra;bits-=state.extra;state.back+=state.extra}if(state.offset>state.dmax){strm.msg="invalid distance too far back";state.mode=BAD;break}state.mode=MATCH;case MATCH:if(left===0){break inf_leave}copy=_out-left;if(state.offset>copy){copy=state.offset-copy;if(copy>state.whave){if(state.sane){strm.msg="invalid distance too far back";state.mode=BAD;break}}if(copy>state.wnext){copy-=state.wnext;from=state.wsize-copy}else{from=state.wnext-copy}if(copy>state.length){copy=state.length}from_source=state.window}else{from_source=output;from=put-state.offset;copy=state.length}if(copy>left){copy=left}left-=copy;state.length-=copy;do{output[put++]=from_source[from++]}while(--copy);if(state.length===0){state.mode=LEN}break;case LIT:if(left===0){break inf_leave}output[put++]=state.length;left--;state.mode=LEN;break;case CHECK:if(state.wrap){while(bits<32){if(have===0){break inf_leave}have--;hold|=input[next++]<<bits;bits+=8}_out-=left;strm.total_out+=_out;state.total+=_out;if(state.wrap&4&&_out){strm.adler=state.check=state.flags?crc32_1(state.check,output,_out,put-_out):adler32_1(state.check,output,_out,put-_out)}_out=left;if(state.wrap&4&&(state.flags?hold:zswap32(hold))!==state.check){strm.msg="incorrect data check";state.mode=BAD;break}hold=0;bits=0}state.mode=LENGTH;case LENGTH:if(state.wrap&&state.flags){while(bits<32){if(have===0){break inf_leave}have--;hold+=input[next++]<<bits;bits+=8}if(state.wrap&4&&hold!==(state.total&4294967295)){strm.msg="incorrect length check";state.mode=BAD;break}hold=0;bits=0}state.mode=DONE;case DONE:ret=Z_STREAM_END$1;break inf_leave;case BAD:ret=Z_DATA_ERROR$1;break inf_leave;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}}strm.next_out=put;strm.avail_out=left;strm.next_in=next;strm.avail_in=have;state.hold=hold;state.bits=bits;if(state.wsize||_out!==strm.avail_out&&state.mode<BAD&&(state.mode<CHECK||flush!==Z_FINISH$1)){if(updatewindow(strm,strm.output,strm.next_out,_out-strm.avail_out));}_in-=strm.avail_in;_out-=strm.avail_out;strm.total_in+=_in;strm.total_out+=_out;state.total+=_out;if(state.wrap&4&&_out){strm.adler=state.check=state.flags?crc32_1(state.check,output,_out,strm.next_out-_out):adler32_1(state.check,output,_out,strm.next_out-_out)}strm.data_type=state.bits+(state.last?64:0)+(state.mode===TYPE?128:0)+(state.mode===LEN_||state.mode===COPY_?256:0);if((_in===0&&_out===0||flush===Z_FINISH$1)&&ret===Z_OK$1){ret=Z_BUF_ERROR}return ret};const inflateEnd=strm=>{if(inflateStateCheck(strm)){return Z_STREAM_ERROR$1}let state=strm.state;if(state.window){state.window=null}strm.state=null;return Z_OK$1};const inflateGetHeader=(strm,head)=>{if(inflateStateCheck(strm)){return Z_STREAM_ERROR$1}const state=strm.state;if((state.wrap&2)===0){return Z_STREAM_ERROR$1}state.head=head;head.done=false;return Z_OK$1};const inflateSetDictionary=(strm,dictionary)=>{const dictLength=dictionary.length;let state;let dictid;let ret;if(inflateStateCheck(strm)){return Z_STREAM_ERROR$1}state=strm.state;if(state.wrap!==0&&state.mode!==DICT){return Z_STREAM_ERROR$1}if(state.mode===DICT){dictid=1;dictid=adler32_1(dictid,dictionary,dictLength,0);if(dictid!==state.check){return Z_DATA_ERROR$1}}ret=updatewindow(strm,dictionary,dictLength,dictLength);if(ret){state.mode=MEM;return Z_MEM_ERROR$1}state.havedict=1;return Z_OK$1};var inflateReset_1=inflateReset;var inflateReset2_1=inflateReset2;var inflateResetKeep_1=inflateResetKeep;var inflateInit_1=inflateInit;var inflateInit2_1=inflateInit2;var inflate_2$1=inflate$2;var inflateEnd_1=inflateEnd;var inflateGetHeader_1=inflateGetHeader;var inflateSetDictionary_1=inflateSetDictionary;var inflateInfo="pako inflate (from Nodeca project)";var inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo:inflateInfo};function GZheader(){this.text=0;this.time=0;this.xflags=0;this.os=0;this.extra=null;this.extra_len=0;this.name="";this.comment="";this.hcrc=0;this.done=false}var gzheader=GZheader;const toString=Object.prototype.toString;const{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(options){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},options||{});const opt=this.options;if(opt.raw&&opt.windowBits>=0&&opt.windowBits<16){opt.windowBits=-opt.windowBits;if(opt.windowBits===0){opt.windowBits=-15}}if(opt.windowBits>=0&&opt.windowBits<16&&!(options&&options.windowBits)){opt.windowBits+=32}if(opt.windowBits>15&&opt.windowBits<48){if((opt.windowBits&15)===0){opt.windowBits|=15}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new zstream;this.strm.avail_out=0;let status=inflate_1$2.inflateInit2(this.strm,opt.windowBits);if(status!==Z_OK){throw new Error(messages[status])}this.header=new gzheader;inflate_1$2.inflateGetHeader(this.strm,this.header);if(opt.dictionary){if(typeof opt.dictionary==="string"){opt.dictionary=strings.string2buf(opt.dictionary)}else if(toString.call(opt.dictionary)==="[object ArrayBuffer]"){opt.dictionary=new Uint8Array(opt.dictionary)}if(opt.raw){status=inflate_1$2.inflateSetDictionary(this.strm,opt.dictionary);if(status!==Z_OK){throw new Error(messages[status])}}}}Inflate$1.prototype.push=function(data,flush_mode){const strm=this.strm;const chunkSize=this.options.chunkSize;const dictionary=this.options.dictionary;let status,_flush_mode,last_avail_out;if(this.ended)return false;if(flush_mode===~~flush_mode)_flush_mode=flush_mode;else _flush_mode=flush_mode===true?Z_FINISH:Z_NO_FLUSH;if(toString.call(data)==="[object ArrayBuffer]"){strm.input=new Uint8Array(data)}else{strm.input=data}strm.next_in=0;strm.avail_in=strm.input.length;for(;;){if(strm.avail_out===0){strm.output=new Uint8Array(chunkSize);strm.next_out=0;strm.avail_out=chunkSize}status=inflate_1$2.inflate(strm,_flush_mode);if(status===Z_NEED_DICT&&dictionary){status=inflate_1$2.inflateSetDictionary(strm,dictionary);if(status===Z_OK){status=inflate_1$2.inflate(strm,_flush_mode)}else if(status===Z_DATA_ERROR){status=Z_NEED_DICT}}while(strm.avail_in>0&&status===Z_STREAM_END&&strm.state.wrap>0&&data[strm.next_in]!==0){inflate_1$2.inflateReset(strm);status=inflate_1$2.inflate(strm,_flush_mode)}switch(status){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:this.onEnd(status);this.ended=true;return false}last_avail_out=strm.avail_out;if(strm.next_out){if(strm.avail_out===0||status===Z_STREAM_END){if(this.options.to==="string"){let next_out_utf8=strings.utf8border(strm.output,strm.next_out);let tail=strm.next_out-next_out_utf8;let utf8str=strings.buf2string(strm.output,next_out_utf8);strm.next_out=tail;strm.avail_out=chunkSize-tail;if(tail)strm.output.set(strm.output.subarray(next_out_utf8,next_out_utf8+tail),0);this.onData(utf8str)}else{this.onData(strm.output.length===strm.next_out?strm.output:strm.output.subarray(0,strm.next_out))}}}if(status===Z_OK&&last_avail_out===0)continue;if(status===Z_STREAM_END){status=inflate_1$2.inflateEnd(this.strm);this.onEnd(status);this.ended=true;return true}if(strm.avail_in===0)break}return true};Inflate$1.prototype.onData=function(chunk){this.chunks.push(chunk)};Inflate$1.prototype.onEnd=function(status){if(status===Z_OK){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=common.flattenChunks(this.chunks)}}this.chunks=[];this.err=status;this.msg=this.strm.msg};function inflate$1(input,options){const inflator=new Inflate$1(options);inflator.push(input);if(inflator.err)throw inflator.msg||messages[inflator.err];return inflator.result}function inflateRaw$1(input,options){options=options||{};options.raw=true;return inflate$1(input,options)}var Inflate_1$1=Inflate$1;var inflate_2=inflate$1;var inflateRaw_1$1=inflateRaw$1;var ungzip$1=inflate$1;var constants=constants$2;var inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants:constants};const{Deflate,deflate,deflateRaw,gzip}=deflate_1$1;const{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var Deflate_1=Deflate;exports.Deflate=Deflate_1;var deflate_1=deflate;exports.deflate=deflate_1;var deflateRaw_1=deflateRaw;exports.deflateRaw=deflateRaw_1;var gzip_1=gzip;exports.gzip=gzip_1;var Inflate_1=Inflate;exports.Inflate=Inflate_1;var inflate_1=inflate;exports.inflate=inflate_1;var inflateRaw_1=inflateRaw;exports.inflateRaw=inflateRaw_1;var ungzip_1=ungzip;exports.ungzip=ungzip_1;var constants_1=constants$2;exports.constants=constants_1;var pako={Deflate:Deflate_1,deflate:deflate_1,deflateRaw:deflateRaw_1,gzip:gzip_1,Inflate:Inflate_1,inflate:inflate_1,inflateRaw:inflateRaw_1,ungzip:ungzip_1,constants:constants_1};exports.default=pako},{}],508:[function(require,module,exports){module.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],509:[function(require,module,exports){"use strict";var asn1=require("asn1.js");exports.certificate=require("./certificate");var RSAPrivateKey=asn1.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});exports.RSAPrivateKey=RSAPrivateKey;var RSAPublicKey=asn1.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});exports.RSAPublicKey=RSAPublicKey;var PublicKey=asn1.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPublicKey").bitstr())});exports.PublicKey=PublicKey;var AlgorithmIdentifier=asn1.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())});var PrivateKeyInfo=asn1.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});exports.PrivateKey=PrivateKeyInfo;var EncryptedPrivateKeyInfo=asn1.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});exports.EncryptedPrivateKey=EncryptedPrivateKeyInfo;var DSAPrivateKey=asn1.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});exports.DSAPrivateKey=DSAPrivateKey;exports.DSAparam=asn1.define("DSAparam",function(){this.int()});var ECPrivateKey=asn1.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(ECParameters),this.key("publicKey").optional().explicit(1).bitstr())});exports.ECPrivateKey=ECPrivateKey;var ECParameters=asn1.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});exports.signature=asn1.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":510,"asn1.js":166}],510:[function(require,module,exports){"use strict";var asn=require("asn1.js");var Time=asn.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})});var AttributeTypeValue=asn.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())});var AlgorithmIdentifier=asn.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())});var SubjectPublicKeyInfo=asn.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPublicKey").bitstr())});var RelativeDistinguishedName=asn.define("RelativeDistinguishedName",function(){this.setof(AttributeTypeValue)});var RDNSequence=asn.define("RDNSequence",function(){this.seqof(RelativeDistinguishedName)});var Name=asn.define("Name",function(){this.choice({rdnSequence:this.use(RDNSequence)})});var Validity=asn.define("Validity",function(){this.seq().obj(this.key("notBefore").use(Time),this.key("notAfter").use(Time))});var Extension=asn.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(false),this.key("extnValue").octstr())});var TBSCertificate=asn.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(AlgorithmIdentifier),this.key("issuer").use(Name),this.key("validity").use(Validity),this.key("subject").use(Name),this.key("subjectPublicKeyInfo").use(SubjectPublicKeyInfo),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Extension).optional())});var X509Certificate=asn.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(TBSCertificate),this.key("signatureAlgorithm").use(AlgorithmIdentifier),this.key("signatureValue").bitstr())});module.exports=X509Certificate},{"asn1.js":166}],511:[function(require,module,exports){var findProc=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m;var startRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m;var fullRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m;var evp=require("evp_bytestokey");var ciphers=require("browserify-aes");var Buffer=require("safe-buffer").Buffer;module.exports=function(okey,password){var key=okey.toString();var match=key.match(findProc);var decrypted;if(!match){var match2=key.match(fullRegex);decrypted=Buffer.from(match2[2].replace(/[\r\n]/g,""),"base64")}else{var suite="aes"+match[1];var iv=Buffer.from(match[2],"hex");var cipherText=Buffer.from(match[3].replace(/[\r\n]/g,""),"base64");var cipherKey=evp(password,iv.slice(0,8),parseInt(match[1],10)).key;var out=[];var cipher=ciphers.createDecipheriv(suite,cipherKey,iv);out.push(cipher.update(cipherText));out.push(cipher.final());decrypted=Buffer.concat(out)}var tag=key.match(startRegex)[1];return{tag:tag,data:decrypted}}},{"browserify-aes":229,evp_bytestokey:315,"safe-buffer":787}],512:[function(require,module,exports){var asn1=require("./asn1");var aesid=require("./aesid.json");var fixProc=require("./fixProc");var ciphers=require("browserify-aes");var compat=require("pbkdf2");var Buffer=require("safe-buffer").Buffer;module.exports=parseKeys;function parseKeys(buffer){var password;if(typeof buffer==="object"&&!Buffer.isBuffer(buffer)){password=buffer.passphrase;buffer=buffer.key}if(typeof buffer==="string"){buffer=Buffer.from(buffer)}var stripped=fixProc(buffer,password);var type=stripped.tag;var data=stripped.data;var subtype,ndata;switch(type){case"CERTIFICATE":ndata=asn1.certificate.decode(data,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":if(!ndata){ndata=asn1.PublicKey.decode(data,"der")}subtype=ndata.algorithm.algorithm.join(".");switch(subtype){case"1.2.840.113549.1.1.1":return asn1.RSAPublicKey.decode(ndata.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":ndata.subjectPrivateKey=ndata.subjectPublicKey;return{type:"ec",data:ndata};case"1.2.840.10040.4.1":ndata.algorithm.params.pub_key=asn1.DSAparam.decode(ndata.subjectPublicKey.data,"der");return{type:"dsa",data:ndata.algorithm.params};default:throw new Error("unknown key id "+subtype)}case"ENCRYPTED PRIVATE KEY":data=asn1.EncryptedPrivateKey.decode(data,"der");data=decrypt(data,password);case"PRIVATE KEY":ndata=asn1.PrivateKey.decode(data,"der");subtype=ndata.algorithm.algorithm.join(".");switch(subtype){case"1.2.840.113549.1.1.1":return asn1.RSAPrivateKey.decode(ndata.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:ndata.algorithm.curve,privateKey:asn1.ECPrivateKey.decode(ndata.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":ndata.algorithm.params.priv_key=asn1.DSAparam.decode(ndata.subjectPrivateKey,"der");return{type:"dsa",params:ndata.algorithm.params};default:throw new Error("unknown key id "+subtype)}case"RSA PUBLIC KEY":return asn1.RSAPublicKey.decode(data,"der");case"RSA PRIVATE KEY":return asn1.RSAPrivateKey.decode(data,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:asn1.DSAPrivateKey.decode(data,"der")};case"EC PRIVATE KEY":data=asn1.ECPrivateKey.decode(data,"der");return{curve:data.parameters.value,privateKey:data.privateKey};default:throw new Error("unknown key type "+type)}}parseKeys.signature=asn1.signature;function decrypt(data,password){var salt=data.algorithm.decrypt.kde.kdeparams.salt;var iters=parseInt(data.algorithm.decrypt.kde.kdeparams.iters.toString(),10);var algo=aesid[data.algorithm.decrypt.cipher.algo.join(".")];var iv=data.algorithm.decrypt.cipher.iv;var cipherText=data.subjectPrivateKey;var keylen=parseInt(algo.split("-")[1],10)/8;var key=compat.pbkdf2Sync(password,salt,iters,keylen,"sha1");var cipher=ciphers.createDecipheriv(algo,key,iv);var out=[];out.push(cipher.update(cipherText));out.push(cipher.final());return Buffer.concat(out)}},{"./aesid.json":508,"./asn1":509,"./fixProc":511,"browserify-aes":229,pbkdf2:513,"safe-buffer":787}],513:[function(require,module,exports){exports.pbkdf2=require("./lib/async");exports.pbkdf2Sync=require("./lib/sync")},{"./lib/async":514,"./lib/sync":517}],514:[function(require,module,exports){(function(global){(function(){var Buffer=require("safe-buffer").Buffer;var checkParameters=require("./precondition");var defaultEncoding=require("./default-encoding");var sync=require("./sync");var toBuffer=require("./to-buffer");var ZERO_BUF;var subtle=global.crypto&&global.crypto.subtle;var toBrowser={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"};var checks=[];function checkNative(algo){if(global.process&&!global.process.browser){return Promise.resolve(false)}if(!subtle||!subtle.importKey||!subtle.deriveBits){return Promise.resolve(false)}if(checks[algo]!==undefined){return checks[algo]}ZERO_BUF=ZERO_BUF||Buffer.alloc(8);var prom=browserPbkdf2(ZERO_BUF,ZERO_BUF,10,128,algo).then(function(){return true}).catch(function(){return false});checks[algo]=prom;return prom}var nextTick;function getNextTick(){if(nextTick){return nextTick}if(global.process&&global.process.nextTick){nextTick=global.process.nextTick}else if(global.queueMicrotask){nextTick=global.queueMicrotask}else if(global.setImmediate){nextTick=global.setImmediate}else{nextTick=global.setTimeout}return nextTick}function browserPbkdf2(password,salt,iterations,length,algo){return subtle.importKey("raw",password,{name:"PBKDF2"},false,["deriveBits"]).then(function(key){return subtle.deriveBits({name:"PBKDF2",salt:salt,iterations:iterations,hash:{name:algo}},key,length<<3)}).then(function(res){return Buffer.from(res)})}function resolvePromise(promise,callback){promise.then(function(out){getNextTick()(function(){callback(null,out)})},function(e){getNextTick()(function(){callback(e)})})}module.exports=function(password,salt,iterations,keylen,digest,callback){if(typeof digest==="function"){callback=digest;digest=undefined}digest=digest||"sha1";var algo=toBrowser[digest.toLowerCase()];if(!algo||typeof global.Promise!=="function"){getNextTick()(function(){var out;try{out=sync(password,salt,iterations,keylen,digest)}catch(e){return callback(e)}callback(null,out)});return}checkParameters(iterations,keylen);password=toBuffer(password,defaultEncoding,"Password");salt=toBuffer(salt,defaultEncoding,"Salt");if(typeof callback!=="function")throw new Error("No callback provided to pbkdf2");resolvePromise(checkNative(algo).then(function(resp){if(resp)return browserPbkdf2(password,salt,iterations,keylen,algo);return sync(password,salt,iterations,keylen,digest)}),callback)}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./default-encoding":515,"./precondition":516,"./sync":517,"./to-buffer":518,"safe-buffer":787}],515:[function(require,module,exports){(function(process,global){(function(){var defaultEncoding;if(global.process&&global.process.browser){defaultEncoding="utf-8"}else if(global.process&&global.process.version){var pVersionMajor=parseInt(process.version.split(".")[0].slice(1),10);defaultEncoding=pVersionMajor>=6?"utf-8":"binary"}else{defaultEncoding="utf-8"}module.exports=defaultEncoding}).call(this)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:519}],516:[function(require,module,exports){var MAX_ALLOC=Math.pow(2,30)-1;module.exports=function(iterations,keylen){if(typeof iterations!=="number"){throw new TypeError("Iterations not a number")}if(iterations<0){throw new TypeError("Bad iterations")}if(typeof keylen!=="number"){throw new TypeError("Key length not a number")}if(keylen<0||keylen>MAX_ALLOC||keylen!==keylen){throw new TypeError("Bad key length")}}},{}],517:[function(require,module,exports){var md5=require("create-hash/md5");var RIPEMD160=require("ripemd160");var sha=require("sha.js");var Buffer=require("safe-buffer").Buffer;var checkParameters=require("./precondition");var defaultEncoding=require("./default-encoding");var toBuffer=require("./to-buffer");var ZEROS=Buffer.alloc(128);var sizes={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function Hmac(alg,key,saltLen){var hash=getDigest(alg);var blocksize=alg==="sha512"||alg==="sha384"?128:64;if(key.length>blocksize){key=hash(key)}else if(key.length<blocksize){key=Buffer.concat([key,ZEROS],blocksize)}var ipad=Buffer.allocUnsafe(blocksize+sizes[alg]);var opad=Buffer.allocUnsafe(blocksize+sizes[alg]);for(var i=0;i<blocksize;i++){ipad[i]=key[i]^54;opad[i]=key[i]^92}var ipad1=Buffer.allocUnsafe(blocksize+saltLen+4);ipad.copy(ipad1,0,0,blocksize);this.ipad1=ipad1;this.ipad2=ipad;this.opad=opad;this.alg=alg;this.blocksize=blocksize;this.hash=hash;this.size=sizes[alg]}Hmac.prototype.run=function(data,ipad){data.copy(ipad,this.blocksize);var h=this.hash(ipad);h.copy(this.opad,this.blocksize);return this.hash(this.opad)};function getDigest(alg){function shaFunc(data){return sha(alg).update(data).digest()}function rmd160Func(data){return(new RIPEMD160).update(data).digest()}if(alg==="rmd160"||alg==="ripemd160")return rmd160Func;if(alg==="md5")return md5;return shaFunc}function pbkdf2(password,salt,iterations,keylen,digest){checkParameters(iterations,keylen);password=toBuffer(password,defaultEncoding,"Password");salt=toBuffer(salt,defaultEncoding,"Salt");digest=digest||"sha1";var hmac=new Hmac(digest,password,salt.length);var DK=Buffer.allocUnsafe(keylen);var block1=Buffer.allocUnsafe(salt.length+4);salt.copy(block1,0,0,salt.length);var destPos=0;var hLen=sizes[digest];var l=Math.ceil(keylen/hLen);for(var i=1;i<=l;i++){block1.writeUInt32BE(i,salt.length);var T=hmac.run(block1,hmac.ipad1);var U=T;for(var j=1;j<iterations;j++){U=hmac.run(U,hmac.ipad2);for(var k=0;k<hLen;k++)T[k]^=U[k]}T.copy(DK,destPos);destPos+=hLen}return DK}module.exports=pbkdf2},{"./default-encoding":515,"./precondition":516,"./to-buffer":518,"create-hash/md5":279,ripemd160:561,"safe-buffer":787,"sha.js":790}],518:[function(require,module,exports){var Buffer=require("safe-buffer").Buffer;module.exports=function(thing,encoding,name){if(Buffer.isBuffer(thing)){return thing}else if(typeof thing==="string"){return Buffer.from(thing,encoding)}else if(ArrayBuffer.isView(thing)){return Buffer.from(thing.buffer)}else{throw new TypeError(name+" must be a string, a Buffer, a typed array or a DataView")}}},{"safe-buffer":787}],519:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],520:[function(require,module,exports){exports.publicEncrypt=require("./publicEncrypt");exports.privateDecrypt=require("./privateDecrypt");exports.privateEncrypt=function privateEncrypt(key,buf){return exports.publicEncrypt(key,buf,true)};exports.publicDecrypt=function publicDecrypt(key,buf){return exports.privateDecrypt(key,buf,true)}},{"./privateDecrypt":523,"./publicEncrypt":524}],521:[function(require,module,exports){var createHash=require("create-hash");var Buffer=require("safe-buffer").Buffer;module.exports=function(seed,len){var t=Buffer.alloc(0);var i=0;var c;while(t.length<len){c=i2ops(i++);t=Buffer.concat([t,createHash("sha1").update(seed).update(c).digest()])}return t.slice(0,len)};function i2ops(c){var out=Buffer.allocUnsafe(4);out.writeUInt32BE(c,0);return out}},{"create-hash":278,"safe-buffer":787}],522:[function(require,module,exports){arguments[4][180][0].apply(exports,arguments)},{buffer:226,dup:180}],523:[function(require,module,exports){var parseKeys=require("parse-asn1");var mgf=require("./mgf");var xor=require("./xor");var BN=require("bn.js");var crt=require("browserify-rsa");var createHash=require("create-hash");var withPublic=require("./withPublic");var Buffer=require("safe-buffer").Buffer;module.exports=function privateDecrypt(privateKey,enc,reverse){var padding;if(privateKey.padding){padding=privateKey.padding}else if(reverse){padding=1}else{padding=4}var key=parseKeys(privateKey);var k=key.modulus.byteLength();if(enc.length>k||new BN(enc).cmp(key.modulus)>=0){throw new Error("decryption error")}var msg;if(reverse){msg=withPublic(new BN(enc),key)}else{msg=crt(enc,key)}var zBuffer=Buffer.alloc(k-msg.length);msg=Buffer.concat([zBuffer,msg],k);if(padding===4){return oaep(key,msg)}else if(padding===1){return pkcs1(key,msg,reverse)}else if(padding===3){return msg}else{throw new Error("unknown padding")}};function oaep(key,msg){var k=key.modulus.byteLength();var iHash=createHash("sha1").update(Buffer.alloc(0)).digest();var hLen=iHash.length;if(msg[0]!==0){throw new Error("decryption error")}var maskedSeed=msg.slice(1,hLen+1);var maskedDb=msg.slice(hLen+1);var seed=xor(maskedSeed,mgf(maskedDb,hLen));var db=xor(maskedDb,mgf(seed,k-hLen-1));if(compare(iHash,db.slice(0,hLen))){throw new Error("decryption error")}var i=hLen;while(db[i]===0){i++}if(db[i++]!==1){throw new Error("decryption error")}return db.slice(i)}function pkcs1(key,msg,reverse){var p1=msg.slice(0,2);var i=2;var status=0;while(msg[i++]!==0){if(i>=msg.length){status++;break}}var ps=msg.slice(2,i-1);if(p1.toString("hex")!=="0002"&&!reverse||p1.toString("hex")!=="0001"&&reverse){status++}if(ps.length<8){status++}if(status){throw new Error("decryption error")}return msg.slice(i)}function compare(a,b){a=Buffer.from(a);b=Buffer.from(b);var dif=0;var len=a.length;if(a.length!==b.length){dif++;len=Math.min(a.length,b.length)}var i=-1;while(++i<len){dif+=a[i]^b[i]}return dif}},{"./mgf":521,"./withPublic":525,"./xor":526,"bn.js":522,"browserify-rsa":247,"create-hash":278,"parse-asn1":512,"safe-buffer":787}],524:[function(require,module,exports){var parseKeys=require("parse-asn1");var randomBytes=require("randombytes");var createHash=require("create-hash");var mgf=require("./mgf");var xor=require("./xor");var BN=require("bn.js");var withPublic=require("./withPublic");var crt=require("browserify-rsa");var Buffer=require("safe-buffer").Buffer;module.exports=function publicEncrypt(publicKey,msg,reverse){var padding;if(publicKey.padding){padding=publicKey.padding}else if(reverse){padding=1}else{padding=4}var key=parseKeys(publicKey);var paddedMsg;if(padding===4){paddedMsg=oaep(key,msg)}else if(padding===1){paddedMsg=pkcs1(key,msg,reverse)}else if(padding===3){paddedMsg=new BN(msg);if(paddedMsg.cmp(key.modulus)>=0){throw new Error("data too long for modulus")}}else{throw new Error("unknown padding")}if(reverse){return crt(paddedMsg,key)}else{return withPublic(paddedMsg,key)}};function oaep(key,msg){var k=key.modulus.byteLength();var mLen=msg.length;var iHash=createHash("sha1").update(Buffer.alloc(0)).digest();var hLen=iHash.length;var hLen2=2*hLen;if(mLen>k-hLen2-2){throw new Error("message too long")}var ps=Buffer.alloc(k-mLen-hLen2-2);var dblen=k-hLen-1;var seed=randomBytes(hLen);var maskedDb=xor(Buffer.concat([iHash,ps,Buffer.alloc(1,1),msg],dblen),mgf(seed,dblen));var maskedSeed=xor(seed,mgf(maskedDb,hLen));return new BN(Buffer.concat([Buffer.alloc(1),maskedSeed,maskedDb],k))}function pkcs1(key,msg,reverse){var mLen=msg.length;var k=key.modulus.byteLength();if(mLen>k-11){throw new Error("message too long")}var ps;if(reverse){ps=Buffer.alloc(k-mLen-3,255)}else{ps=nonZero(k-mLen-3)}return new BN(Buffer.concat([Buffer.from([0,reverse?1:2]),ps,Buffer.alloc(1),msg],k))}function nonZero(len){var out=Buffer.allocUnsafe(len);var i=0;var cache=randomBytes(len*2);var cur=0;var num;while(i<len){if(cur===cache.length){cache=randomBytes(len*2);cur=0}num=cache[cur++];if(num){out[i++]=num}}return out}},{"./mgf":521,"./withPublic":525,"./xor":526,"bn.js":522,"browserify-rsa":247,"create-hash":278,"parse-asn1":512,randombytes:527,"safe-buffer":787}],525:[function(require,module,exports){var BN=require("bn.js");var Buffer=require("safe-buffer").Buffer;function withPublic(paddedMsg,key){return Buffer.from(paddedMsg.toRed(BN.mont(key.modulus)).redPow(new BN(key.publicExponent)).fromRed().toArray())}module.exports=withPublic},{"bn.js":522,"safe-buffer":787}],526:[function(require,module,exports){module.exports=function xor(a,b){var len=a.length;var i=-1;while(++i<len){a[i]^=b[i]}return a}},{}],527:[function(require,module,exports){(function(process,global){(function(){"use strict";var MAX_BYTES=65536;var MAX_UINT32=4294967295;function oldBrowser(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}var Buffer=require("safe-buffer").Buffer;var crypto=global.crypto||global.msCrypto;if(crypto&&crypto.getRandomValues){module.exports=randomBytes}else{module.exports=oldBrowser}function randomBytes(size,cb){if(size>MAX_UINT32)throw new RangeError("requested too many random bytes");var bytes=Buffer.allocUnsafe(size);if(size>0){if(size>MAX_BYTES){for(var generated=0;generated<size;generated+=MAX_BYTES){crypto.getRandomValues(bytes.slice(generated,generated+MAX_BYTES))}}else{crypto.getRandomValues(bytes)}}if(typeof cb==="function"){return process.nextTick(function(){cb(null,bytes)})}return bytes}}).call(this)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:519,"safe-buffer":787}],528:[function(require,module,exports){(function(process,global){(function(){"use strict";function oldBrowser(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var safeBuffer=require("safe-buffer");var randombytes=require("randombytes");var Buffer=safeBuffer.Buffer;var kBufferMaxLength=safeBuffer.kMaxLength;var crypto=global.crypto||global.msCrypto;var kMaxUint32=Math.pow(2,32)-1;function assertOffset(offset,length){if(typeof offset!=="number"||offset!==offset){throw new TypeError("offset must be a number")}if(offset>kMaxUint32||offset<0){throw new TypeError("offset must be a uint32")}if(offset>kBufferMaxLength||offset>length){throw new RangeError("offset out of range")}}function assertSize(size,offset,length){if(typeof size!=="number"||size!==size){throw new TypeError("size must be a number")}if(size>kMaxUint32||size<0){throw new TypeError("size must be a uint32")}if(size+offset>length||size>kBufferMaxLength){throw new RangeError("buffer too small")}}if(crypto&&crypto.getRandomValues||!process.browser){exports.randomFill=randomFill;exports.randomFillSync=randomFillSync}else{exports.randomFill=oldBrowser;exports.randomFillSync=oldBrowser}function randomFill(buf,offset,size,cb){if(!Buffer.isBuffer(buf)&&!(buf instanceof global.Uint8Array)){throw new TypeError('"buf" argument must be a Buffer or Uint8Array')}if(typeof offset==="function"){cb=offset;offset=0;size=buf.length}else if(typeof size==="function"){cb=size;size=buf.length-offset}else if(typeof cb!=="function"){throw new TypeError('"cb" argument must be a function')}assertOffset(offset,buf.length);assertSize(size,offset,buf.length);return actualFill(buf,offset,size,cb)}function actualFill(buf,offset,size,cb){if(process.browser){var ourBuf=buf.buffer;var uint=new Uint8Array(ourBuf,offset,size);crypto.getRandomValues(uint);if(cb){process.nextTick(function(){cb(null,buf)});return}return buf}if(cb){randombytes(size,function(err,bytes){if(err){return cb(err)}bytes.copy(buf,offset);cb(null,buf)});return}var bytes=randombytes(size);bytes.copy(buf,offset);return buf}function randomFillSync(buf,offset,size){if(typeof offset==="undefined"){offset=0}if(!Buffer.isBuffer(buf)&&!(buf instanceof global.Uint8Array)){throw new TypeError('"buf" argument must be a Buffer or Uint8Array')}assertOffset(offset,buf.length);if(size===undefined)size=buf.length-offset;assertSize(size,offset,buf.length);return actualFill(buf,offset,size)}}).call(this)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:519,randombytes:527,"safe-buffer":787}],529:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:true});exports.ShdwDrive=void 0;const helpers_1=require("./utils/helpers");const methods_1=require("./methods");class ShdwDrive{constructor(connection,wallet){this.connection=connection;this.wallet=wallet;this.createStorageAccount=methods_1.createStorageAccount;this.addStorage=methods_1.addStorage;this.claimStake=methods_1.claimStake;this.deleteFile=methods_1.deleteFile;this.deleteStorageAccount=methods_1.deleteStorageAccount;this.editFile=methods_1.editFile;this.getStorageAccount=methods_1.getStorageAcc;this.getStorageAccounts=methods_1.getStorageAccs;this.listObjects=methods_1.listObjects;this.makeStorageImmutable=methods_1.makeStorageImmutable;this.reduceStorage=methods_1.reduceStorage;this.cancelDeleteFile=methods_1.cancelDeleteFile;this.cancelDeleteStorageAccount=methods_1.cancelDeleteStorageAccount;this.uploadFile=methods_1.uploadFile;this.uploadFiles=methods_1.uploadFiles;this.uploadMultipleFiles=methods_1.uploadMultipleFiles;this.redeemRent=methods_1.redeemRent;this.migrate=methods_1.migrate;this.wallet=wallet;this.connection=connection;const[program,provider]=(0,helpers_1.getAnchorEnvironmet)(wallet,connection);this.program=program}init(){return __awaiter(this,void 0,void 0,function*(){if(!this.wallet&&!this.wallet.publicKey){return}this.storageConfigPDA=(yield(0,helpers_1.getStorageConfigPDA)(this.program))[0];this.userInfo=(yield(0,helpers_1.getUserInfo)(this.program,this.wallet.publicKey))[0];return this})}}exports.ShdwDrive=ShdwDrive},{"./methods":540,"./utils/helpers":550}],530:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@project-serum/anchor"));const helpers_1=require("../utils/helpers");const common_1=require("../utils/common");const spl_token_1=require("@solana/spl-token");const node_fetch_1=__importDefault(require("node-fetch"));function addStorage(key,size,version){return __awaiter(this,void 0,void 0,function*(){let storageInputAsBytes=(0,helpers_1.humanSizeToBytes)(size);let selectedAccount;switch(version.toLocaleLowerCase()){case"v1":selectedAccount=yield this.program.account.storageAccount.fetch(key);break;case"v2":selectedAccount=yield this.program.account.storageAccountV2.fetch(key);break}if(storageInputAsBytes===false){return Promise.reject(new Error(`${size} is not a valid input for size. Please use a string like '1KB', '1MB', '1GB'.`))}let userInfoAccount=yield this.connection.getAccountInfo(this.userInfo);let userInfoData;let accountSeed;if(userInfoAccount!==null){userInfoData=yield this.program.account.userInfo.fetch(this.userInfo);accountSeed=new anchor.BN(userInfoData.accountCounter)}else{return Promise.reject(new Error("You have not created a storage account on Shadow Drive yet. Please see the 'create-storage-account' command to get started."))}const ownerAta=yield(0,helpers_1.findAssociatedTokenAddress)(selectedAccount.owner1,common_1.tokenMint);let stakeAccount=(yield(0,helpers_1.getStakeAccount)(this.program,key))[0];try{const emissionsAta=yield(0,helpers_1.findAssociatedTokenAddress)(common_1.emissions,common_1.tokenMint);let txn;switch(version.toLocaleLowerCase()){case"v1":switch(selectedAccount.immutable){case true:txn=yield this.program.methods.increaseImmutableStorage(new anchor.BN(storageInputAsBytes)).accounts({storageConfig:this.storageConfigPDA,storageAccount:key,owner:selectedAccount.owner1,ownerAta:ownerAta,uploader:common_1.uploader,emissionsWallet:emissionsAta,tokenMint:common_1.tokenMint,systemProgram:anchor.web3.SystemProgram.programId,tokenProgram:spl_token_1.TOKEN_PROGRAM_ID}).transaction();break;case false:txn=yield this.program.methods.increaseStorage(new anchor.BN(storageInputAsBytes)).accounts({storageConfig:this.storageConfigPDA,storageAccount:key,owner:selectedAccount.owner1,ownerAta:ownerAta,stakeAccount:stakeAccount,uploader:common_1.uploader,tokenMint:common_1.tokenMint,systemProgram:anchor.web3.SystemProgram.programId,tokenProgram:spl_token_1.TOKEN_PROGRAM_ID}).transaction();break}break;case"v2":switch(selectedAccount.immutable){case true:txn=yield this.program.methods.increaseImmutableStorage2(new anchor.BN(storageInputAsBytes)).accounts({storageConfig:this.storageConfigPDA,storageAccount:key,owner:selectedAccount.owner1,ownerAta:ownerAta,uploader:common_1.uploader,emissionsWallet:emissionsAta,tokenMint:common_1.tokenMint,systemProgram:anchor.web3.SystemProgram.programId,tokenProgram:spl_token_1.TOKEN_PROGRAM_ID}).transaction();break;case false:txn=yield this.program.methods.increaseStorage2(new anchor.BN(storageInputAsBytes)).accounts({storageConfig:this.storageConfigPDA,storageAccount:key,owner:selectedAccount.owner1,ownerAta:ownerAta,stakeAccount:stakeAccount,uploader:common_1.uploader,tokenMint:common_1.tokenMint,systemProgram:anchor.web3.SystemProgram.programId,tokenProgram:spl_token_1.TOKEN_PROGRAM_ID}).transaction();break}break}txn.recentBlockhash=(yield this.connection.getLatestBlockhash()).blockhash;txn.feePayer=this.wallet.publicKey;let signedTx;let serializedTxn;if(!common_1.isBrowser&&this.wallet.secretKey!=null&&this.wallet.secretKey!=undefined){yield txn.partialSign(this.wallet.payer);serializedTxn=txn.serialize({requireAllSignatures:false})}else{signedTx=yield this.wallet.signTransaction(txn);serializedTxn=signedTx.serialize({requireAllSignatures:false})}const addStorageResponse=yield(0,node_fetch_1.default)(`${common_1.SHDW_DRIVE_ENDPOINT}/add-storage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction:Buffer.from(serializedTxn.toJSON().data).toString("base64"),storage_account:key,amount_to_add:storageInputAsBytes})});if(!addStorageResponse.ok){return Promise.reject(new Error(`Server response status code: ${addStorageResponse.status} \n
		  Server response status message: ${(yield addStorageResponse.json()).error}`))}const responseJson=yield addStorageResponse.json();return Promise.resolve(responseJson)}catch(e){return Promise.reject(new Error(e))}})}exports.default=addStorage}).call(this)}).call(this,require("buffer").Buffer)},{"../utils/common":549,"../utils/helpers":550,"@project-serum/anchor":552,"@solana/spl-token":68,buffer:269,"node-fetch":505}],531:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@project-serum/anchor"));const helpers_1=require("../utils/helpers");const common_1=require("../utils/common");const cross_fetch_1=__importDefault(require("cross-fetch"));function cancelDeleteFile(key,url){return __awaiter(this,void 0,void 0,function*(){const selectedAccount=yield this.program.account.storageAccount.fetch(key);const fileData=yield(0,cross_fetch_1.default)(`${common_1.SHDW_DRIVE_ENDPOINT}/get-object-data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:url})});const fileDataResponse=yield fileData.json();const fileOwnerOnChain=new anchor.web3.PublicKey(fileDataResponse.file_data["owner-account-pubkey"]);if(!fileOwnerOnChain.equals(this.wallet.publicKey)){return Promise.reject(new Error("Permission denied: Not file owner"))}const fileAccount=new anchor.web3.PublicKey(fileDataResponse.file_data["file-account-pubkey"]);let stakeAccount=(yield(0,helpers_1.getStakeAccount)(this.program,key))[0];try{const txn=yield this.program.methods.unmarkDeleteFile().accounts({storageConfig:this.storageConfigPDA,storageAccount:key,file:fileAccount,stakeAccount:stakeAccount,owner:selectedAccount.owner1,tokenMint:common_1.tokenMint,systemProgram:anchor.web3.SystemProgram.programId}).transaction();txn.recentBlockhash=(yield this.connection.getLatestBlockhash()).blockhash;txn.feePayer=this.wallet.publicKey;let signedTx;if(!common_1.isBrowser&&this.wallet.secretKey!=null&&this.wallet.secretKey!=undefined){signedTx=yield txn.partialSign(this.wallet.payer)}else{signedTx=yield this.wallet.signTransaction(txn)}const res=yield(0,helpers_1.sendAndConfirm)(this.connection,signedTx.serialize(),{skipPreflight:false},"confirmed",12e4);return Promise.resolve(res)}catch(e){return Promise.reject(e)}})}exports.default=cancelDeleteFile},{"../utils/common":549,"../utils/helpers":550,"@project-serum/anchor":552,"cross-fetch":282}],532:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@project-serum/anchor"));const helpers_1=require("../utils/helpers");const common_1=require("../utils/common");function cancelDeleteStorageAccount(key,version){return __awaiter(this,void 0,void 0,function*(){let selectedAccount;switch(version.toLocaleLowerCase()){case"v1":selectedAccount=yield this.program.account.storageAccount.fetch(key);break;case"v2":selectedAccount=yield this.program.account.storageAccountV2.fetch(key);break}let stakeAccount=(yield(0,helpers_1.getStakeAccount)(this.program,key))[0];let txn;try{switch(version.toLocaleLowerCase()){case"v1":txn=yield this.program.methods.unmarkDeleteAccount().accounts({storageConfig:this.storageConfigPDA,storageAccount:key,stakeAccount:stakeAccount,owner:selectedAccount.owner1,tokenMint:common_1.tokenMint,systemProgram:anchor.web3.SystemProgram.programId}).transaction();break;case"v2":txn=yield this.program.methods.unmarkDeleteAccount2().accounts({storageConfig:this.storageConfigPDA,storageAccount:key,stakeAccount:stakeAccount,owner:selectedAccount.owner1,tokenMint:common_1.tokenMint,systemProgram:anchor.web3.SystemProgram.programId}).transaction();break}txn.recentBlockhash=(yield this.connection.getLatestBlockhash()).blockhash;txn.feePayer=this.wallet.publicKey;const signedTx=yield this.wallet.signTransaction(txn);const res=yield(0,helpers_1.sendAndConfirm)(this.connection,signedTx.serialize(),{skipPreflight:false},"confirmed",12e4);return Promise.resolve(res)}catch(e){return Promise.reject(new Error(e))}})}exports.default=cancelDeleteStorageAccount},{"../utils/common":549,"../utils/helpers":550,"@project-serum/anchor":552}],533:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@project-serum/anchor"));const helpers_1=require("../utils/helpers");const common_1=require("../utils/common");const spl_token_1=require("@solana/spl-token");function claimStake(key,version){return __awaiter(this,void 0,void 0,function*(){let selectedAccount;switch(version.toLocaleLowerCase()){case"v1":selectedAccount=yield this.program.account.storageAccount.fetch(key);break;case"v2":selectedAccount=yield this.program.account.storageAccountV2.fetch(key);break}const[unstakeAccount]=yield anchor.web3.PublicKey.findProgramAddress([Buffer.from("unstake-account"),key.toBytes()],this.program.programId);const[unstakeInfo]=yield anchor.web3.PublicKey.findProgramAddress([Buffer.from("unstake-info"),key.toBytes()],this.program.programId);const ownerAta=yield(0,helpers_1.findAssociatedTokenAddress)(selectedAccount.owner1,common_1.tokenMint);let txn;try{switch(version.toLocaleLowerCase()){case"v1":txn=yield this.program.methods.claimStake().accounts({storageConfig:this.storageConfigPDA,storageAccount:key,unstakeInfo:unstakeInfo,unstakeAccount:unstakeAccount,owner:selectedAccount.owner1,ownerAta:ownerAta,tokenMint:common_1.tokenMint,systemProgram:anchor.web3.SystemProgram.programId,tokenProgram:spl_token_1.TOKEN_PROGRAM_ID}).transaction();break;case"v2":txn=yield this.program.methods.claimStake2().accounts({storageConfig:this.storageConfigPDA,storageAccount:key,unstakeInfo:unstakeInfo,unstakeAccount:unstakeAccount,owner:selectedAccount.owner1,ownerAta:ownerAta,tokenMint:common_1.tokenMint,systemProgram:anchor.web3.SystemProgram.programId,tokenProgram:spl_token_1.TOKEN_PROGRAM_ID}).transaction();break}txn.recentBlockhash=(yield this.connection.getLatestBlockhash()).blockhash;txn.feePayer=this.wallet.publicKey;const signedTx=yield this.wallet.signTransaction(txn);const res=yield(0,helpers_1.sendAndConfirm)(this.connection,signedTx.serialize(),{skipPreflight:false},"confirmed",12e4);return Promise.resolve(res)}catch(e){return Promise.reject(new Error(e))}})}exports.default=claimStake}).call(this)}).call(this,require("buffer").Buffer)},{"../utils/common":549,"../utils/helpers":550,"@project-serum/anchor":552,"@solana/spl-token":68,buffer:269}],534:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@project-serum/anchor"));const helpers_1=require("../utils/helpers");const common_1=require("../utils/common");const spl_token_1=require("@solana/spl-token");const axios=require("axios").default;function createStorageAccount(name,size,version,owner2){return __awaiter(this,void 0,void 0,function*(){let storageInputAsBytes=(0,helpers_1.humanSizeToBytes)(size);if(storageInputAsBytes===false)return Promise.reject(new Error(`${size} is not a valid input for size. Please use a string like '1KB', '1MB', '1GB'.`));let[userInfo]=yield anchor.web3.PublicKey.findProgramAddress([Buffer.from("user-info"),this.wallet.publicKey.toBytes()],this.program.programId);let userInfoAccount=yield this.connection.getAccountInfo(this.userInfo);let accountSeed=new anchor.BN(0);if(userInfoAccount!==null){let userInfoData=yield this.program.account.userInfo.fetch(this.userInfo);accountSeed=new anchor.BN(userInfoData.accountCounter)}else{this.userInfo=userInfo}let storageRequested=new anchor.BN(storageInputAsBytes.toString());let storageAccount=(yield(0,helpers_1.getStorageAccount)(this.program,this.wallet.publicKey,accountSeed))[0];let stakeAccount=(yield(0,helpers_1.getStakeAccount)(this.program,storageAccount))[0];let ownerAta=yield(0,helpers_1.findAssociatedTokenAddress)(this.wallet.publicKey,common_1.tokenMint);let txn;switch(version.toLocaleLowerCase()){case"v1":txn=yield this.program.methods.initializeAccount(name,storageRequested,owner2?owner2:null).accounts({storageConfig:this.storageConfigPDA,userInfo:this.userInfo,storageAccount:storageAccount,stakeAccount:stakeAccount,tokenMint:common_1.tokenMint,owner1:this.wallet.publicKey,uploader:common_1.uploader,owner1TokenAccount:ownerAta,systemProgram:anchor.web3.SystemProgram.programId,tokenProgram:spl_token_1.TOKEN_PROGRAM_ID,rent:anchor.web3.SYSVAR_RENT_PUBKEY}).transaction();break;case"v2":txn=yield this.program.methods.initializeAccount2(name,storageRequested).accounts({storageConfig:this.storageConfigPDA,userInfo:this.userInfo,storageAccount:storageAccount,stakeAccount:stakeAccount,tokenMint:common_1.tokenMint,owner1:this.wallet.publicKey,uploader:common_1.uploader,owner1TokenAccount:ownerAta,systemProgram:anchor.web3.SystemProgram.programId,tokenProgram:spl_token_1.TOKEN_PROGRAM_ID,rent:anchor.web3.SYSVAR_RENT_PUBKEY}).transaction();break}try{const latestBlockhash=yield this.connection.getLatestBlockhash();txn.recentBlockhash=latestBlockhash.blockhash;txn.feePayer=this.wallet.publicKey;let signedTx;let serializedTxn;if(!common_1.isBrowser&&this.wallet.secretKey!=null&&this.wallet.secretKey!=undefined){yield txn.partialSign(this.wallet.payer);serializedTxn=txn.serialize({requireAllSignatures:false})}else{signedTx=yield this.wallet.signTransaction(txn);serializedTxn=signedTx.serialize({requireAllSignatures:false})}const createStorageResponse=yield axios.post(`${common_1.SHDW_DRIVE_ENDPOINT}/storage-account`,JSON.stringify({transaction:Buffer.from(serializedTxn.toJSON().data).toString("base64")}),{headers:{"Content-Type":"application/json"}});if(createStorageResponse.status!==200){return Promise.reject(new Error(`Server response status code: ${createStorageResponse.status} \n
				  Server response status message: ${createStorageResponse.data}`))}return Promise.resolve(createStorageResponse.data)}catch(e){console.log(`Error from fileserver ${e}`);return Promise.reject(new Error(e))}})}exports.default=createStorageAccount}).call(this)}).call(this,require("buffer").Buffer)},{"../utils/common":549,"../utils/helpers":550,"@project-serum/anchor":552,"@solana/spl-token":68,axios:186,buffer:269}],535:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@project-serum/anchor"));const common_1=require("../utils/common");const cross_fetch_1=__importDefault(require("cross-fetch"));const bytes_1=require("@project-serum/anchor/dist/cjs/utils/bytes");const tweetnacl_1=__importDefault(require("tweetnacl"));function deleteFile(key,url,version){return __awaiter(this,void 0,void 0,function*(){let selectedAccount;switch(version.toLocaleLowerCase()){case"v1":selectedAccount=yield this.program.account.storageAccount.fetch(key);break;case"v2":selectedAccount=yield this.program.account.storageAccountV2.fetch(key);break}const fileData=yield(0,cross_fetch_1.default)(`${common_1.SHDW_DRIVE_ENDPOINT}/get-object-data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:decodeURI(url)})});const fileDataResponse=yield fileData.json();const fileOwnerOnChain=new anchor.web3.PublicKey(fileDataResponse.file_data["owner-account-pubkey"]);if(!fileOwnerOnChain.equals(this.wallet.publicKey)){return Promise.reject(new Error("Permission denied: Not file owner"))}try{let deleteFileResponse;const msg=Buffer.from(`Shadow Drive Signed Message:\nStorageAccount: ${key}\nFile to delete: ${url}`);let msgSig;if(!this.wallet.signMessage){msgSig=tweetnacl_1.default.sign.detached(msg,this.wallet.payer.secretKey)}else{msgSig=yield this.wallet.signMessage(msg)}const encodedMsg=bytes_1.bs58.encode(msgSig);deleteFileResponse=yield(0,cross_fetch_1.default)(`${common_1.SHDW_DRIVE_ENDPOINT}/delete-file`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({signer:this.wallet.publicKey,message:encodedMsg,location:url})});if(!deleteFileResponse.ok){return Promise.reject(new Error(`Server response status code: ${deleteFileResponse.status} \n
					  Server response status message: ${(yield deleteFileResponse.json()).error}`))}const responseJson=yield deleteFileResponse.json();return Promise.resolve(responseJson)}catch(e){return Promise.reject(new Error(e))}})}exports.default=deleteFile}).call(this)}).call(this,require("buffer").Buffer)},{"../utils/common":549,"@project-serum/anchor":552,"@project-serum/anchor/dist/cjs/utils/bytes":556,buffer:269,"cross-fetch":282,tweetnacl:815}],536:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@project-serum/anchor"));const common_1=require("../utils/common");const helpers_1=require("../utils/helpers");function deleteStorageAccount(key,version){return __awaiter(this,void 0,void 0,function*(){let selectedAccount;switch(version.toLocaleLowerCase()){case"v1":selectedAccount=yield this.program.account.storageAccount.fetch(key);break;case"v2":selectedAccount=yield this.program.account.storageAccountV2.fetch(key);break}try{let txn;switch(version.toLocaleLowerCase()){case"v1":txn=yield this.program.methods.requestDeleteAccount().accounts({storageConfig:this.storageConfigPDA,storageAccount:key,owner:selectedAccount.owner1,tokenMint:common_1.tokenMint,systemProgram:anchor.web3.SystemProgram.programId}).transaction();case"v2":txn=yield this.program.methods.requestDeleteAccount2().accounts({storageConfig:this.storageConfigPDA,storageAccount:key,owner:selectedAccount.owner1,tokenMint:common_1.tokenMint,systemProgram:anchor.web3.SystemProgram.programId}).transaction();break}txn.recentBlockhash=(yield this.connection.getLatestBlockhash()).blockhash;txn.feePayer=this.wallet.publicKey;const signedTx=yield this.wallet.signTransaction(txn);const res=yield(0,helpers_1.sendAndConfirm)(this.connection,signedTx.serialize(),{skipPreflight:false},"confirmed",12e4);return Promise.resolve(res)}catch(e){return Promise.reject(e)}})}exports.default=deleteStorageAccount},{"../utils/common":549,"../utils/helpers":550,"@project-serum/anchor":552}],537:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@project-serum/anchor"));const common_1=require("../utils/common");const crypto_1=__importDefault(require("crypto"));const axios=require("axios").default;const form_data_1=__importDefault(require("form-data"));const bytes_1=require("@project-serum/anchor/dist/cjs/utils/bytes");const tweetnacl_1=__importDefault(require("tweetnacl"));function editFile(key,url,data,version){return __awaiter(this,void 0,void 0,function*(){let fileErrors=[];let form;let file;let selectedAccount;let fileSize;switch(version.toLocaleLowerCase()){case"v1":selectedAccount=yield this.program.account.storageAccount.fetch(key);break;case"v2":selectedAccount=yield this.program.account.storageAccountV2.fetch(key);break}if(!common_1.isBrowser){data=data;form=new form_data_1.default;form.append("file",{uri:data.uri,name:data.name,type:data.type});fileSize=data.size}else{data=data;form=new FormData;form.append("file",data,data.name);fileSize=Buffer.from(new Uint8Array(yield data.arrayBuffer())).byteLength}if(fileSize>1073741824*1){fileErrors.push({file:file,erorr:"Exceeds the 1GB limit."})}if(fileErrors.length)return Promise.reject(fileErrors);if(!this.userInfo){return Promise.reject("You have not created a storage account on Shadow Drive yet. Please see the 'create-storage-account' command to get started.")}const existingFileData=yield axios.post(`${common_1.SHDW_DRIVE_ENDPOINT}/get-object-data`,JSON.stringify({location:url}),{headers:{"Content-Type":"application/json"}});const fileDataResponse=yield existingFileData.data;const fileOwnerOnChain=new anchor.web3.PublicKey(fileDataResponse.file_data["owner-account-pubkey"]);if(!fileOwnerOnChain.equals(this.wallet.publicKey)){return Promise.reject(new Error("Permission denied: Not file owner"))}const hashSum=crypto_1.default.createHash("sha256");const fileBuffer=!common_1.isBrowser?data.file:Buffer.from(new Uint8Array(yield data.arrayBuffer()));hashSum.update(Buffer.isBuffer(fileBuffer)?fileBuffer:Buffer.from(fileBuffer));const sha256Hash=hashSum.digest("hex");try{const msg=Buffer.from(`Shadow Drive Signed Message:\n StorageAccount: ${key}\nFile to edit: ${data.name}\nNew file hash: ${sha256Hash}`);let msgSig;if(!this.wallet.signMessage){msgSig=tweetnacl_1.default.sign.detached(msg,this.wallet.payer.secretKey)}else{msgSig=yield this.wallet.signMessage(msg)}const encodedMsg=bytes_1.bs58.encode(msgSig);form.append("message",encodedMsg);form.append("signer",this.wallet.publicKey.toString());form.append("storage_account",key.toString());form.append("url",url);const uploadResponse=yield axios.post(`${common_1.SHDW_DRIVE_ENDPOINT}/edit`,form,{headers:{"Content-Type":"multipart/form-data"}});if(uploadResponse.status!==200){return Promise.reject(new Error(`Server response status code: ${uploadResponse.status} \n
				  Server response status message: ${uploadResponse.data}`))}return Promise.resolve(uploadResponse.data)}catch(e){return Promise.reject(new Error(e))}})}exports.default=editFile}).call(this)}).call(this,require("buffer").Buffer)},{"../utils/common":549,"@project-serum/anchor":552,"@project-serum/anchor/dist/cjs/utils/bytes":556,axios:186,buffer:269,crypto:283,"form-data":317,tweetnacl:815}],538:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});const common_1=require("../utils/common");const node_fetch_1=__importDefault(require("node-fetch"));function getStorageAcc(key){return __awaiter(this,void 0,void 0,function*(){try{const storageInfoResponse=yield(0,node_fetch_1.default)(`${common_1.SHDW_DRIVE_ENDPOINT}/storage-account-info`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({storage_account:key})});if(!storageInfoResponse.ok){return Promise.reject(new Error(`Server response status code: ${storageInfoResponse.status} \n Server response status message: ${(yield storageInfoResponse.json()).error}`))}return Promise.resolve(yield storageInfoResponse.json())}catch(e){return Promise.reject(new Error(e))}})}exports.default=getStorageAcc},{"../utils/common":549,"node-fetch":505}],539:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:true});function getStorageAccs(version){return __awaiter(this,void 0,void 0,function*(){let storageAccounts;try{switch(version.toLocaleLowerCase()){case"v1":storageAccounts=yield this.program.account.storageAccount.all([{memcmp:{bytes:this.wallet.publicKey,offset:39}}]);break;case"v2":storageAccounts=yield this.program.account.storageAccountV2.all([{memcmp:{bytes:this.wallet.publicKey,offset:22}}]);break}return Promise.resolve(storageAccounts)}catch(e){return Promise.reject(new Error(e))}})}exports.default=getStorageAccs},{}],540:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.migrate=exports.redeemRent=exports.uploadMultipleFiles=exports.uploadFiles=exports.uploadFile=exports.cancelDeleteStorageAccount=exports.cancelDeleteFile=exports.reduceStorage=exports.makeStorageImmutable=exports.listObjects=exports.getStorageAccs=exports.getStorageAcc=exports.editFile=exports.deleteStorageAccount=exports.deleteFile=exports.createStorageAccount=exports.claimStake=exports.addStorage=void 0;const add_storage_1=__importDefault(require("./add-storage"));exports.addStorage=add_storage_1.default;const claim_stake_1=__importDefault(require("./claim-stake"));exports.claimStake=claim_stake_1.default;const create_storage_account_1=__importDefault(require("./create-storage-account"));exports.createStorageAccount=create_storage_account_1.default;const delete_file_1=__importDefault(require("./delete-file"));exports.deleteFile=delete_file_1.default;const delete_storage_account_1=__importDefault(require("./delete-storage-account"));exports.deleteStorageAccount=delete_storage_account_1.default;const edit_file_1=__importDefault(require("./edit-file"));exports.editFile=edit_file_1.default;const get_storage_account_1=__importDefault(require("./get-storage-account"));exports.getStorageAcc=get_storage_account_1.default;const get_storage_accounts_1=__importDefault(require("./get-storage-accounts"));exports.getStorageAccs=get_storage_accounts_1.default;const list_objects_1=__importDefault(require("./list-objects"));exports.listObjects=list_objects_1.default;const make_storage_immutable_1=__importDefault(require("./make-storage-immutable"));exports.makeStorageImmutable=make_storage_immutable_1.default;const reduce_storage_1=__importDefault(require("./reduce-storage"));exports.reduceStorage=reduce_storage_1.default;const cancel_delete_file_1=__importDefault(require("./cancel-delete-file"));exports.cancelDeleteFile=cancel_delete_file_1.default;const cancel_storage_account_1=__importDefault(require("./cancel-storage-account"));exports.cancelDeleteStorageAccount=cancel_storage_account_1.default;const upload_file_1=__importDefault(require("./upload-file"));exports.uploadFile=upload_file_1.default;const upload_files_1=__importDefault(require("./upload-files"));exports.uploadFiles=upload_files_1.default;const upload_multiple_files_1=__importDefault(require("./upload-multiple-files"));exports.uploadMultipleFiles=upload_multiple_files_1.default;const redeem_rent_1=__importDefault(require("./redeem-rent"));exports.redeemRent=redeem_rent_1.default;const migrate_1=__importDefault(require("./migrate"));exports.migrate=migrate_1.default},{"./add-storage":530,"./cancel-delete-file":531,"./cancel-storage-account":532,"./claim-stake":533,"./create-storage-account":534,"./delete-file":535,"./delete-storage-account":536,"./edit-file":537,"./get-storage-account":538,"./get-storage-accounts":539,"./list-objects":541,"./make-storage-immutable":542,"./migrate":543,"./redeem-rent":544,"./reduce-storage":545,"./upload-file":546,"./upload-files":547,"./upload-multiple-files":548}],541:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});const cross_fetch_1=__importDefault(require("cross-fetch"));const common_1=require("../utils/common");function listObjects(storageAccount){return(0,cross_fetch_1.default)(`${common_1.SHDW_DRIVE_ENDPOINT}/list-objects`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({storageAccount:storageAccount.toBase58()})}).then(res=>res.json())}exports.default=listObjects},{"../utils/common":549,"cross-fetch":282}],542:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@project-serum/anchor"));const helpers_1=require("../utils/helpers");const common_1=require("../utils/common");const spl_token_1=require("@solana/spl-token");const node_fetch_1=__importDefault(require("node-fetch"));function makeStorageImmutable(key,version){return __awaiter(this,void 0,void 0,function*(){let selectedAccount;try{switch(version.toLocaleLowerCase()){case"v1":selectedAccount=yield this.program.account.storageAccount.fetch(key);break;case"v2":selectedAccount=yield this.program.account.storageAccountV2.fetch(key);break}const ownerAta=yield(0,helpers_1.findAssociatedTokenAddress)(selectedAccount.owner1,common_1.tokenMint);const emissionsAta=yield(0,helpers_1.findAssociatedTokenAddress)(common_1.emissions,common_1.tokenMint);let stakeAccount=(yield(0,helpers_1.getStakeAccount)(this.program,key))[0];let txn;switch(version.toLocaleLowerCase()){case"v1":txn=yield this.program.methods.makeAccountImmutable().accounts({storageConfig:this.storageConfigPDA,storageAccount:key,stakeAccount:stakeAccount,emissionsWallet:emissionsAta,owner:selectedAccount.owner1,uploader:common_1.uploader,ownerAta:ownerAta,tokenMint:common_1.tokenMint,systemProgram:anchor.web3.SystemProgram.programId,tokenProgram:spl_token_1.TOKEN_PROGRAM_ID,associatedTokenProgram:spl_token_1.ASSOCIATED_TOKEN_PROGRAM_ID,rent:anchor.web3.SYSVAR_RENT_PUBKEY}).transaction();case"v2":txn=yield this.program.methods.makeAccountImmutable2().accounts({storageConfig:this.storageConfigPDA,storageAccount:key,owner:selectedAccount.owner1,ownerAta:ownerAta,stakeAccount:stakeAccount,uploader:common_1.uploader,emissionsWallet:emissionsAta,tokenMint:common_1.tokenMint,systemProgram:anchor.web3.SystemProgram.programId,tokenProgram:spl_token_1.TOKEN_PROGRAM_ID,associatedTokenProgram:spl_token_1.ASSOCIATED_TOKEN_PROGRAM_ID,rent:anchor.web3.SYSVAR_RENT_PUBKEY}).transaction();break}txn.recentBlockhash=(yield this.connection.getLatestBlockhash()).blockhash;txn.feePayer=this.wallet.publicKey;let signedTx;let serializedTxn;if(!common_1.isBrowser&&this.wallet.secretKey!=null&&this.wallet.secretKey!=undefined){yield txn.partialSign(this.wallet.payer);serializedTxn=txn.serialize({requireAllSignatures:false})}else{signedTx=yield this.wallet.signTransaction(txn);serializedTxn=signedTx.serialize({requireAllSignatures:false})}const makeImmutableResponse=yield(0,node_fetch_1.default)(`${common_1.SHDW_DRIVE_ENDPOINT}/make-immutable`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction:Buffer.from(serializedTxn.toJSON().data).toString("base64")})});if(!makeImmutableResponse.ok){return Promise.reject(new Error(`Server response status code: ${makeImmutableResponse.status} \n
			Server response status message: ${(yield makeImmutableResponse.json()).error}`))}const responseJson=yield makeImmutableResponse.json();return Promise.resolve(responseJson)}catch(e){return Promise.reject(new Error(e))}})}exports.default=makeStorageImmutable}).call(this)}).call(this,require("buffer").Buffer)},{"../utils/common":549,"../utils/helpers":550,"@project-serum/anchor":552,"@solana/spl-token":68,buffer:269,"node-fetch":505}],543:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@project-serum/anchor"));const helpers_1=require("../utils/helpers");function migrate(key){return __awaiter(this,void 0,void 0,function*(){const selectedAccount=yield this.program.account.storageAccount.fetch(key);let[migration,migrationBump]=yield anchor.web3.PublicKey.findProgramAddress([Buffer.from("migration-helper"),key.toBytes()],this.program.programId);try{let tx=yield this.program.methods.migrateStep1().accounts({storageAccount:key,migration:migration,owner:selectedAccount.owner1.publicKey}).transaction();tx.recentBlockhash=(yield this.connection.getLatestBlockhash()).blockhash;tx.feePayer=this.wallet.publicKey;const signedTx=yield this.wallet.signTransaction(tx);yield(0,helpers_1.sendAndConfirm)(this.connection,signedTx.serialize(),{skipPreflight:false},"max",12e4)}catch(err){return Promise.reject(new Error(err))}let res;try{let tx2=yield this.program.methods.migrateStep2().accounts({storageAccount:key,migration:migration,owner:selectedAccount.owner1.publicKey}).transaction();tx2.recentBlockhash=(yield this.connection.getLatestBlockhash()).blockhash;tx2.feePayer=this.wallet.publicKey;let signedTx=yield this.wallet.signTransaction(tx2);res=yield(0,helpers_1.sendAndConfirm)(this.connection,signedTx.serialize(),{skipPreflight:true},"confirmed",12e4)}catch(err){return Promise.reject(new Error(err))}return Promise.resolve(res)})}exports.default=migrate}).call(this)}).call(this,require("buffer").Buffer)},{"../utils/helpers":550,"@project-serum/anchor":552,buffer:269}],544:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@project-serum/anchor"));const helpers_1=require("../utils/helpers");const common_1=require("../utils/common");function redeemRent(key,fileAccount){return __awaiter(this,void 0,void 0,function*(){let selectedAccount;selectedAccount=yield this.program.account.storageAccount.fetch(key);const[unstakeAccount]=yield anchor.web3.PublicKey.findProgramAddress([Buffer.from("unstake-account"),key.toBytes()],this.program.programId);const[unstakeInfo]=yield anchor.web3.PublicKey.findProgramAddress([Buffer.from("unstake-info"),key.toBytes()],this.program.programId);const ownerAta=yield(0,helpers_1.findAssociatedTokenAddress)(selectedAccount.owner1,common_1.tokenMint);try{const txn=yield this.program.methods.redeemRent().accounts({storageAccount:key,file:fileAccount,owner:selectedAccount.owner1}).transaction();txn.recentBlockhash=(yield this.connection.getLatestBlockhash()).blockhash;txn.feePayer=this.wallet.publicKey;let signedTx=yield this.wallet.signTransaction(txn);const res=yield(0,helpers_1.sendAndConfirm)(this.connection,signedTx.serialize(),{skipPreflight:false},"confirmed",12e4);return Promise.resolve(res)}catch(e){return Promise.reject(new Error(e))}})}exports.default=redeemRent}).call(this)}).call(this,require("buffer").Buffer)},{"../utils/common":549,"../utils/helpers":550,"@project-serum/anchor":552,buffer:269}],545:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@project-serum/anchor"));const helpers_1=require("../utils/helpers");const common_1=require("../utils/common");const spl_token_1=require("@solana/spl-token");const node_fetch_1=__importDefault(require("node-fetch"));function reduceStorage(key,size,version){return __awaiter(this,void 0,void 0,function*(){let storageInputAsBytes=(0,helpers_1.humanSizeToBytes)(size);let selectedAccount;switch(version.toLocaleLowerCase()){case"v1":selectedAccount=yield this.program.account.storageAccount.fetch(key);break;case"v2":selectedAccount=yield this.program.account.storageAccountV2.fetch(key);break}const[unstakeAccount]=yield anchor.web3.PublicKey.findProgramAddress([Buffer.from("unstake-account"),key.toBytes()],this.program.programId);const[unstakeInfo]=yield anchor.web3.PublicKey.findProgramAddress([Buffer.from("unstake-info"),key.toBytes()],this.program.programId);const ownerAta=yield(0,helpers_1.findAssociatedTokenAddress)(selectedAccount.owner1,common_1.tokenMint);let stakeAccount=(yield(0,helpers_1.getStakeAccount)(this.program,key))[0];const emissionsAta=yield(0,helpers_1.findAssociatedTokenAddress)(common_1.emissions,common_1.tokenMint);try{let txn;switch(version.toLocaleLowerCase()){case"v1":txn=yield this.program.methods.decreaseStorage(new anchor.BN(storageInputAsBytes.toString())).accounts({storageConfig:this.storageConfigPDA,storageAccount:key,unstakeInfo:unstakeInfo,unstakeAccount:unstakeAccount,owner:selectedAccount.owner1,ownerAta:ownerAta,uploader:common_1.uploader,stakeAccount:stakeAccount,emissionsWallet:emissionsAta,tokenMint:common_1.tokenMint,systemProgram:anchor.web3.SystemProgram.programId,tokenProgram:spl_token_1.TOKEN_PROGRAM_ID,rent:anchor.web3.SYSVAR_RENT_PUBKEY}).transaction();break;case"v2":txn=yield this.program.methods.decreaseStorage2(new anchor.BN(storageInputAsBytes.toString())).accounts({storageConfig:this.storageConfigPDA,storageAccount:key,unstakeInfo:unstakeInfo,unstakeAccount:unstakeAccount,owner:selectedAccount.owner1,ownerAta:ownerAta,uploader:common_1.uploader,stakeAccount:stakeAccount,emissionsWallet:emissionsAta,tokenMint:common_1.tokenMint,systemProgram:anchor.web3.SystemProgram.programId,tokenProgram:spl_token_1.TOKEN_PROGRAM_ID,rent:anchor.web3.SYSVAR_RENT_PUBKEY}).transaction();break}txn.recentBlockhash=(yield this.connection.getLatestBlockhash()).blockhash;txn.feePayer=this.wallet.publicKey;let signedTx;let serializedTxn;if(!common_1.isBrowser&&this.wallet.secretKey!=null&&this.wallet.secretKey!=undefined){yield txn.partialSign(this.wallet.payer);serializedTxn=txn.serialize({requireAllSignatures:false})}else{signedTx=yield this.wallet.signTransaction(txn);serializedTxn=signedTx.serialize({requireAllSignatures:false})}const reduceStorageResponse=yield(0,node_fetch_1.default)(`${common_1.SHDW_DRIVE_ENDPOINT}/reduce-storage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction:Buffer.from(serializedTxn.toJSON().data).toString("base64"),storage_account:key,amount_to_reduce:storageInputAsBytes})});const res=yield reduceStorageResponse.json();if(!reduceStorageResponse.ok){return Promise.reject(new Error(`Server response status code: ${reduceStorageResponse.status} \n
			Server response status message: ${res.error}`))}const responseJson=res;return Promise.resolve(responseJson)}catch(e){return Promise.reject(new Error(e))}})}exports.default=reduceStorage}).call(this)}).call(this,require("buffer").Buffer)},{"../utils/common":549,"../utils/helpers":550,"@project-serum/anchor":552,"@solana/spl-token":68,buffer:269,"node-fetch":505}],546:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});const common_1=require("../utils/common");const crypto_1=__importDefault(require("crypto"));const axios=require("axios").default;const form_data_1=__importDefault(require("form-data"));const bytes_1=require("@project-serum/anchor/dist/cjs/utils/bytes");const tweetnacl_1=__importDefault(require("tweetnacl"));function uploadFile(key,data){return __awaiter(this,void 0,void 0,function*(){let fileErrors=[];let fileSize;let form;if(!common_1.isBrowser){data=data;form=new form_data_1.default;form.append("file",{uri:data.uri,name:data.name,type:data.type});fileSize=data.size}else{data=data;form=new FormData;form.append("file",data,data.name);fileSize=Buffer.from(new Uint8Array(yield data.arrayBuffer())).byteLength}if(fileSize>1073741824*1){fileErrors.push({file:data.name,erorr:"Exceeds the 1GB limit."})}if(fileErrors.length){return Promise.reject(fileErrors)}if(!this.userInfo){return Promise.reject("You have not created a storage account on Shadow Drive yet. Please see the 'create-storage-account' command to get started.")}const fileNameHashSum=crypto_1.default.createHash("sha256");fileNameHashSum.update(data.name);const fileNameHash=fileNameHashSum.digest("hex");try{const msg=(new TextEncoder).encode(`Shadow Drive Signed Message:\nStorage Account: ${key}\nUpload files with hash: ${fileNameHash}`);let msgSig;if(!this.wallet.signMessage){msgSig=tweetnacl_1.default.sign.detached(msg,this.wallet.payer.secretKey)}else{msgSig=yield this.wallet.signMessage(msg)}const encodedMsg=bytes_1.bs58.encode(msgSig);form.append("fileNames",data.name);form.append("message",encodedMsg);form.append("storage_account",key.toString());form.append("signer",this.wallet.publicKey.toString())}catch(e){return Promise.reject(new Error(e))}try{const uploadResponse=yield axios.post(`${common_1.SHDW_DRIVE_ENDPOINT}/upload`,form,{headers:{"Content-Type":"multipart/form-data"}});if(uploadResponse.status!==200){return Promise.reject(new Error(`Server response status code: ${uploadResponse.status} \n
				  Server response status message: ${uploadResponse.data}`))}return Promise.resolve(uploadResponse.data)}catch(e){return Promise.reject(new Error(e))}})}exports.default=uploadFile}).call(this)}).call(this,require("buffer").Buffer)},{"../utils/common":549,"@project-serum/anchor/dist/cjs/utils/bytes":556,axios:186,buffer:269,crypto:283,"form-data":317,tweetnacl:815}],547:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});const common_1=require("../utils/common");const crypto_1=__importDefault(require("crypto"));const axios=require("axios").default;const form_data_1=__importDefault(require("form-data"));const bytes_1=require("@project-serum/anchor/dist/cjs/utils/bytes");const tweetnacl_1=__importDefault(require("tweetnacl"));function uploadFiles(key,data){return __awaiter(this,void 0,void 0,function*(){let fileErrors=[];let form;if(!common_1.isBrowser){data=data;form=new form_data_1.default;data.forEach(file=>{form.append("file",{uri:file.uri,name:file.name,type:file.type});if(file.size>1073741824*1){fileErrors.push({file:file.name,erorr:"Exceeds the 1GB limit."})}})}else{data=data;form=new FormData;for(let index=0;index<data.length;index++){const file=data[index];form.append("file",file,file.name);if(Buffer.from(new Uint8Array(yield file.arrayBuffer())).byteLength>1073741824*1){fileErrors.push({file:file.name,erorr:"Exceeds the 1GB limit."})}}}if(fileErrors.length)return Promise.reject(fileErrors);if(!this.userInfo){return Promise.reject("You have not created a storage account on Shadow Drive yet. Please see the 'create-storage-account' command to get started.")}const fileNameHashSum=crypto_1.default.createHash("sha256");const allFileNames=data.map(file=>file.name);fileNameHashSum.update(allFileNames.toString());const fileNameHash=fileNameHashSum.digest("hex");try{const msg=(new TextEncoder).encode(`Shadow Drive Signed Message:\nStorage Account: ${key}\nUpload files with hash: ${fileNameHash}`);let msgSig;if(!this.wallet.signMessage){msgSig=tweetnacl_1.default.sign.detached(msg,this.wallet.payer.secretKey)}else{msgSig=yield this.wallet.signMessage(msg)}const encodedMsg=bytes_1.bs58.encode(msgSig);form.append("fileNames",allFileNames.toString());form.append("message",encodedMsg);form.append("storage_account",key.toString());form.append("signer",this.wallet.publicKey.toString())}catch(e){return Promise.reject(new Error(e))}try{const uploadResponse=yield axios.post(`${common_1.SHDW_DRIVE_ENDPOINT}/upload`,form,{headers:{"Content-Type":"multipart/form-data"}});if(uploadResponse.status!==200){return Promise.reject(new Error(`Server response status code: ${uploadResponse.status} \n
				  Server response status message: ${uploadResponse.data}`))}return Promise.resolve(uploadResponse.data)}catch(e){return Promise.reject(new Error(e))}})}exports.default=uploadFiles}).call(this)}).call(this,require("buffer").Buffer)},{"../utils/common":549,"@project-serum/anchor/dist/cjs/utils/bytes":556,axios:186,buffer:269,crypto:283,"form-data":317,tweetnacl:815}],548:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __rest=this&&this.__rest||function(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]]}return t};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});const anchor=__importStar(require("@project-serum/anchor"));const common_1=require("../utils/common");const crypto_1=__importDefault(require("crypto"));const form_data_1=__importDefault(require("form-data"));const helpers_1=require("../utils/helpers");const axios=require("axios").default;const bytes_1=require("@project-serum/anchor/dist/cjs/utils/bytes");const tweetnacl_1=__importDefault(require("tweetnacl"));const rxjs_1=require("rxjs");function uploadMultipleFiles(key,data,concurrent=3,callback){return __awaiter(this,void 0,void 0,function*(){let fileData=[];const fileErrors=[];if(!common_1.isBrowser){data=data;data.forEach(shdwFile=>__awaiter(this,void 0,void 0,function*(){let form=new form_data_1.default;let file=shdwFile.file;form.append("file",{uri:shdwFile.uri,name:shdwFile.name,type:shdwFile.type});if(shdwFile.size>1073741824*1){fileErrors.push({file:file,erorr:"Exceeds the 1GB limit."})}const url=encodeURI(`https://shdw-drive.genesysgo.net/${key.toString()}/${shdwFile.name}`);fileData.push({name:shdwFile.name,buffer:file,file:file,form:form,size:shdwFile.size,url:url})}))}else{data=data;for(const shdwFile of data){let file=shdwFile;let form=new FormData;form.append("file",file,shdwFile.name);let fileBuffer=Buffer.from(new Uint8Array(yield file.arrayBuffer()));if(fileBuffer.byteLength>1073741824*1){fileErrors.push({file:file,erorr:"Exceeds the 1GB limit."})}const url=encodeURI(`https://shdw-drive.genesysgo.net/${key.toString()}/${shdwFile.name}`);let size=new anchor.BN(fileBuffer.byteLength);fileData.push({name:shdwFile.name,buffer:fileBuffer,file:file,form:form,size:size,url:url})}}if(fileErrors.length){return Promise.reject(fileErrors)}if(!this.userInfo){return Promise.reject("You have not created a storage account on Shadow Drive yet. Please see the 'create-storage-account' command to get started.")}let allObjectsRequest=yield axios.post(`${common_1.SHDW_DRIVE_ENDPOINT}/list-objects`,JSON.stringify({storageAccount:key.toString()}),{headers:{"Content-Type":"application/json"}});if(allObjectsRequest.status!==200){return Promise.reject(new Error(`Server response status code: ${allObjectsRequest.status} \n
        			Server response status message: ${allObjectsRequest.data.error}`))}let allObjects={keys:[]};let existingFiles=[];if(allObjectsRequest.status===200)allObjects=allObjectsRequest.data;fileData=fileData.filter(item=>{if(!allObjects.keys.includes(item.name)){return true}else{existingFiles.push({fileName:item.name,status:"Not uploaded: File already exists.",location:item.url});return false}});if(fileData.length){const allFileNames=fileData.map(file=>file.name);const hashSum=crypto_1.default.createHash("sha256");hashSum.update(allFileNames.toString());const fileNamesHashed=hashSum.digest("hex");let encodedMsg;try{const msg=(new TextEncoder).encode(`Shadow Drive Signed Message:\nStorage Account: ${key}\nUpload files with hash: ${fileNamesHashed}`);let msgSig;if(!this.wallet.signMessage){msgSig=tweetnacl_1.default.sign.detached(msg,this.wallet.payer.secretKey)}else{msgSig=yield this.wallet.signMessage(msg)}encodedMsg=bytes_1.bs58.encode(msgSig)}catch(e){console.log("Could not hash file names",e);return Promise.reject(new Error(e))}let chunks=[];let indivChunk=[];for(let chunkIdx=0;chunkIdx<fileData.length;chunkIdx++){let fileNames=indivChunk.map(c=>fileData[c].name);const namesLength=Buffer.byteLength(Buffer.from(fileNames.join()));const currentNameBufferLength=Buffer.byteLength(Buffer.from(fileData[chunkIdx].name));if(indivChunk.length===0){indivChunk.push(chunkIdx);let allChunksSum=(0,helpers_1.getChunkLength)(indivChunk,chunks);if(allChunksSum===fileData.length){chunks.push(indivChunk);continue}}else if(indivChunk.length<5&&namesLength<154&&currentNameBufferLength+namesLength<154){indivChunk.push(chunkIdx);if(chunkIdx==fileData.length-1){chunks.push(indivChunk);indivChunk=[]}}else{chunks.push(indivChunk);indivChunk=[chunkIdx];let allChunksSum=(0,helpers_1.getChunkLength)(indivChunk,chunks);if(allChunksSum===fileData.length){chunks.push(indivChunk);continue}}}const appendFileToItem=item=>{const{name,size,buffer}=item,props=__rest(item,["name","size","buffer"]);let data=buffer;const hashSum=crypto_1.default.createHash("sha256");hashSum.update(data);const sha256Hash=hashSum.digest("hex");return Object.assign({sha256Hash:sha256Hash,name:name,size:size,buffer:buffer},props)};return new Promise(resolve=>{(0,rxjs_1.from)(chunks).pipe((0,rxjs_1.map)(indivChunk=>{return indivChunk.map(index=>appendFileToItem(fileData[index]))}),(0,rxjs_1.mergeMap)(items=>__awaiter(this,void 0,void 0,function*(){let fd;if(!common_1.isBrowser){fd=new form_data_1.default;for(const item of items){const file=item;fd.append("file",{uri:file.uri,name:file.name,type:file.type})}}else{fd=new FormData;for(const item of items){const file=item;fd.append("file",file,item.name)}}fd.append("message",encodedMsg);fd.append("storage_account",key.toString());fd.append("signer",this.wallet.publicKey.toString());fd.append("fileNames",allFileNames.toString());const response=yield axios.post(`${common_1.SHDW_DRIVE_ENDPOINT}/upload`,fd,{headers:{"Content-Type":"multipart/form-data"}});if(response.status!==200){const error=response.data.error;return items.map(item=>({fileName:item.name,status:`Not uploaded: ${error}`,location:null}))}else{const responseJson=response.data;if(responseJson.upload_errors.length){return responseJson.upload_errors.map(error=>({fileName:error.file,status:`Not uploaded: ${error.error}`,location:null}))}if(typeof callback=="function"){callback(items.length)}return items.map(item=>({fileName:item.name,status:"Uploaded.",location:item.url}))}}),fileData.length>1?concurrent:1),(0,rxjs_1.toArray)(),(0,rxjs_1.map)(res=>res.flat())).subscribe(res=>{resolve([...res,...existingFiles])})})}else{return new Promise(resolve=>{if(typeof callback=="function"){callback(existingFiles.length)}resolve(existingFiles)})}})}exports.default=uploadMultipleFiles}).call(this)}).call(this,require("buffer").Buffer)},{"../utils/common":549,"../utils/helpers":550,"@project-serum/anchor":552,"@project-serum/anchor/dist/cjs/utils/bytes":556,axios:186,buffer:269,crypto:283,"form-data":317,rxjs:564,tweetnacl:815}],549:[function(require,module,exports){(function(process){(function(){"use strict";var _a;Object.defineProperty(exports,"__esModule",{value:true});exports.SHDW_DRIVE_ENDPOINT=exports.emissions=exports.uploader=exports.tokenMint=exports.programAddress=exports.isBrowser=void 0;const anchor_1=require("@project-serum/anchor");exports.isBrowser=typeof document!=="undefined"&&!((_a=window.process)===null||_a===void 0?void 0:_a.hasOwnProperty("type"))||process.env.SHDW_BROWSER;exports.programAddress=new anchor_1.web3.PublicKey("2e1wdyNhUvE76y6yUCvah2KaviavMJYKoRun8acMRBZZ");exports.tokenMint=new anchor_1.web3.PublicKey("SHDWyBxihqiCj6YekG2GUr7wqKLeLAMK1gHZck9pL6y");exports.uploader=new anchor_1.web3.PublicKey("972oJTFyjmVNsWM4GHEGPWUomAiJf2qrVotLtwnKmWem");exports.emissions=new anchor_1.web3.PublicKey("SHDWRWMZ6kmRG9CvKFSD7kVcnUqXMtd3SaMrLvWscbj");exports.SHDW_DRIVE_ENDPOINT="https://shadow-storage.genesysgo.net"}).call(this)}).call(this,require("_process"))},{"@project-serum/anchor":552,_process:519}],550:[function(require,module,exports){(function(Buffer){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};Object.defineProperty(exports,"__esModule",{value:true});exports.getChunkLength=exports.sortByProperty=exports.chunks=exports.sendAndConfirm=exports.awaitTransactionSignatureConfirmation=exports.sleep=exports.bytesToHuman=exports.humanSizeToBytes=exports.getStakeAccount=exports.getStorageAccount=exports.getUserInfo=exports.getStorageConfigPDA=exports.findAssociatedTokenAddress=exports.getAnchorEnvironmet=void 0;const anchor=__importStar(require("@project-serum/anchor"));const idl_1=require("./idl");const common_1=require("./common");const spl_token_1=require("@solana/spl-token");const DEFAULT_TIMEOUT=3*60*1e3;function getAnchorEnvironmet(wallet,connection){const provider=new anchor.AnchorProvider(connection,wallet,{});anchor.setProvider(provider);const program=new anchor.Program(idl_1.IDL,common_1.programAddress);return[program,provider]}exports.getAnchorEnvironmet=getAnchorEnvironmet;function findAssociatedTokenAddress(walletAddress,tokenMintAddress){return __awaiter(this,void 0,void 0,function*(){return(yield anchor.web3.PublicKey.findProgramAddress([walletAddress.toBuffer(),spl_token_1.TOKEN_PROGRAM_ID.toBuffer(),tokenMintAddress.toBuffer()],spl_token_1.ASSOCIATED_TOKEN_PROGRAM_ID))[0]})}exports.findAssociatedTokenAddress=findAssociatedTokenAddress;function getStorageConfigPDA(program){return __awaiter(this,void 0,void 0,function*(){return anchor.web3.PublicKey.findProgramAddress([Buffer.from("storage-config")],program.programId)})}exports.getStorageConfigPDA=getStorageConfigPDA;function getUserInfo(program,key){return __awaiter(this,void 0,void 0,function*(){return anchor.web3.PublicKey.findProgramAddress([Buffer.from("user-info"),key.toBytes()],program.programId)})}exports.getUserInfo=getUserInfo;function getStorageAccount(program,key,accountSeed){return __awaiter(this,void 0,void 0,function*(){return anchor.web3.PublicKey.findProgramAddress([Buffer.from("storage-account"),key.toBytes(),accountSeed.toTwos(2).toArrayLike(Buffer,"le",4)],program.programId)})}exports.getStorageAccount=getStorageAccount;function getStakeAccount(program,storageAccount){return __awaiter(this,void 0,void 0,function*(){return anchor.web3.PublicKey.findProgramAddress([Buffer.from("stake-account"),storageAccount.toBytes()],program.programId)})}exports.getStakeAccount=getStakeAccount;function humanSizeToBytes(input){const UNITS=["kb","mb","gb"];let chunk_size=0;let humanReadable=input.toLowerCase();let inputNumber=Number(humanReadable.slice(0,humanReadable.length-2));let inputDescriptor=humanReadable.slice(humanReadable.length-2,humanReadable.length);if(!UNITS.includes(inputDescriptor)||!inputNumber){return false}switch(inputDescriptor){case"kb":chunk_size=1024;break;case"mb":chunk_size=1048576;break;case"gb":chunk_size=1073741824;break;default:break}return Math.ceil(inputNumber*chunk_size)}exports.humanSizeToBytes=humanSizeToBytes;function bytesToHuman(bytes,si=false,dp=1){const thresh=si?1024:1024;if(Math.abs(bytes)<thresh){return bytes+" B"}const units=si?["KB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let u=-1;const r=Math.pow(10,dp);do{bytes/=thresh;++u}while(Math.round(Math.abs(bytes)*r)/r>=thresh&&u<units.length-1);return bytes.toFixed(dp)+" "+units[u]}exports.bytesToHuman=bytesToHuman;function sleep(ms){return new Promise(resolve=>setTimeout(resolve,ms))}exports.sleep=sleep;function getUnixTime(){return(new Date).valueOf()/1e3}const awaitTransactionSignatureConfirmation=(txid,timeout,connection,commitment="processed",queryStatus=false)=>__awaiter(void 0,void 0,void 0,function*(){let done=false;let status={slot:0,confirmations:0,err:null};let subId=0;status=yield new Promise((resolve,reject)=>__awaiter(void 0,void 0,void 0,function*(){let timer=setTimeout(()=>{if(done){return}done=true;console.log("Rejecting for timeout...");reject({timeout:true})},timeout);try{console.log("COMMIMENT",commitment);subId=connection.onSignature(txid,(result,context)=>{done=true;status={err:result.err,slot:context.slot,confirmations:0};if(result.err){console.log("Rejected via websocket",result.err);reject(status)}else{console.log("Resolved via websocket",result);resolve(status)}},commitment)}catch(e){done=true;console.error("WS error in setup",txid,e)}while(!done&&queryStatus){(()=>__awaiter(void 0,void 0,void 0,function*(){try{const signatureStatuses=yield connection.getSignatureStatuses([txid]);status=signatureStatuses&&signatureStatuses.value[0];if(!done){if(!status){console.log("REST null result for",txid,status);if(timer===null){timer=setTimeout(()=>{if(done){return}done=true;console.log("Rejecting for timeout...");reject({timeout:true})},timeout)}}else if(status.err){console.log("REST error for",txid,status);done=true;reject(status.err)}else if(!status.confirmations&&!status.confirmationStatus){console.log("REST no confirmations for",txid,status)}else{console.log("REST confirmation for",txid,status);if(timer!==null){clearTimeout(timer);timer=null}if(!status.confirmationStatus||status.confirmationStatus==commitment){done=true;resolve(status)}}}}catch(e){if(!done){console.log("REST connection error: txid",txid,e)}}}))();yield sleep(2e3)}}));done=true;console.log("Returning status ",status);return status});exports.awaitTransactionSignatureConfirmation=awaitTransactionSignatureConfirmation;function simulateTransaction(connection,transaction,commitment){return __awaiter(this,void 0,void 0,function*(){transaction.recentBlockhash=yield connection._recentBlockhash(connection._disableBlockhashCaching);const signData=transaction.serializeMessage();const wireTransaction=transaction._serialize(signData);const encodedTransaction=wireTransaction.toString("base64");const config={encoding:"base64",commitment:commitment};const args=[encodedTransaction,config];const res=yield connection._rpcRequest("simulateTransaction",args);if(res.error){throw new Error("failed to simulate transaction: "+res.error.message)}return res.result})}function sendAndConfirm(connection,txn,sendOptions,commitment,timeout=DEFAULT_TIMEOUT){var _a,_b;return __awaiter(this,void 0,void 0,function*(){try{let done=false;let slot=0;const txid=yield connection.sendRawTransaction(txn,sendOptions);const startTime=getUnixTime();try{const confirmation=yield(0,exports.awaitTransactionSignatureConfirmation)(txid,timeout,connection,commitment,true);if(!confirmation)throw new Error("Timed out awaiting confirmation on transaction");if(confirmation.err){const tx=yield connection.getTransaction(txid);console.error((_b=(_a=tx===null||tx===void 0?void 0:tx.meta)===null||_a===void 0?void 0:_a.logMessages)===null||_b===void 0?void 0:_b.join("\n"));console.error(confirmation.err);throw new Error("Transaction failed: Custom instruction error")}slot=(confirmation===null||confirmation===void 0?void 0:confirmation.slot)||0}catch(err){console.error("Timeout Error caught",err);if(err.timeout){throw new Error("Timed out awaiting confirmation on transaction")}let simulateResult=null;try{simulateResult=(yield simulateTransaction(connection,anchor.web3.Transaction.from(txn),"single")).value}catch(e){}if(simulateResult&&simulateResult.err){if(simulateResult.logs){console.error(simulateResult.logs.join("\n"))}}if(err.err){throw err.err}throw err}finally{done=true}console.log("Latency",txid,getUnixTime()-startTime);return{txid:txid}}catch(e){throw new Error(e)}})}exports.sendAndConfirm=sendAndConfirm;function chunks(array,size){return Array.apply(0,new Array(Math.ceil(array.length/size))).map((_,index)=>array.slice(index*size,(index+1)*size))}exports.chunks=chunks;function sortByProperty(property){return function(a,b){if(a[property].toNumber()>b[property].toNumber())return 1;else if(a[property].toNumber()<b[property].toNumber())return-1;return 0}}exports.sortByProperty=sortByProperty;function getChunkLength(array1,array2){let starting=array1.length;if(array2.length){return array2.reduce((total,next)=>total+=next.length,starting)}return starting}exports.getChunkLength=getChunkLength}).call(this)}).call(this,require("buffer").Buffer)},{"./common":549,"./idl":551,"@project-serum/anchor":552,"@solana/spl-token":68,buffer:269}],551:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IDL=void 0;exports.IDL={version:"1.1.1",name:"shadow_drive_user_staking",constants:[{name:"INITIAL_STORAGE_COST",type:"u64",value:"1_073_741_824"},{name:"MAX_IDENTIFIER_SIZE",type:{defined:"usize"},value:"64"},{name:"INITIAL_STORAGE_AVAILABLE",type:"u128",value:"109_951_162_777_600"},{name:"BYTES_PER_GIB",type:"u32",value:"1_073_741_824"},{name:"MAX_ACCOUNT_SIZE",type:"u64",value:"1_099_511_627_776"},{name:"MIN_ACCOUNT_SIZE",type:"u64",value:"1024"},{name:"MAX_FILENAME_SIZE",type:{defined:"usize"},value:"32"},{name:"SHA256_HASH_SIZE",type:{defined:"usize"},value:"256 / 8"},{name:"MAX_URL_SIZE",type:{defined:"usize"},value:"256"},{name:"DELETION_GRACE_PERIOD",type:"u8",value:"1"},{name:"UNSTAKE_TIME_PERIOD",type:"i64",value:"0 * 24 * 60 * 60"},{name:"UNSTAKE_EPOCH_PERIOD",type:"u64",value:"1"},{name:"INITIAL_CRANK_FEE_BPS",type:"u16",value:"100"}],instructions:[{name:"initializeConfig",accounts:[{name:"storageConfig",isMut:true,isSigner:false},{name:"admin1",isMut:true,isSigner:true},{name:"systemProgram",isMut:false,isSigner:false},{name:"rent",isMut:false,isSigner:false}],args:[{name:"uploader",type:"publicKey"},{name:"admin2",type:{option:"publicKey"}}]},{name:"updateConfig",accounts:[{name:"storageConfig",isMut:true,isSigner:false},{name:"admin",isMut:true,isSigner:true}],args:[{name:"newStorageCost",type:{option:"u64"}},{name:"newStorageAvailable",type:{option:"u128"}},{name:"newAdmin2",type:{option:"publicKey"}},{name:"newMaxAcctSize",type:{option:"u64"}},{name:"newMinAcctSize",type:{option:"u64"}}]},{name:"mutableFees",accounts:[{name:"storageConfig",isMut:true,isSigner:false},{name:"admin",isMut:true,isSigner:true}],args:[{name:"shadesPerGbPerEpoch",type:{option:"u64"}},{name:"crankBps",type:{option:"u32"}}]},{name:"initializeAccount",accounts:[{name:"storageConfig",isMut:true,isSigner:false},{name:"userInfo",isMut:true,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"tokenMint",isMut:false,isSigner:false},{name:"owner1",isMut:true,isSigner:true},{name:"uploader",isMut:false,isSigner:true},{name:"owner1TokenAccount",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false},{name:"rent",isMut:false,isSigner:false}],args:[{name:"identifier",type:"string"},{name:"storage",type:"u64"},{name:"owner2",type:{option:"publicKey"}}]},{name:"initializeAccount2",accounts:[{name:"storageConfig",isMut:true,isSigner:false},{name:"userInfo",isMut:true,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"tokenMint",isMut:false,isSigner:false},{name:"owner1",isMut:true,isSigner:true},{name:"uploader",isMut:false,isSigner:true},{name:"owner1TokenAccount",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false},{name:"rent",isMut:false,isSigner:false}],args:[{name:"identifier",type:"string"},{name:"storage",type:"u64"}]},{name:"updateAccount",accounts:[{name:"storageConfig",isMut:false,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[{name:"identifier",type:{option:"string"}},{name:"owner2",type:{option:"publicKey"}}]},{name:"updateAccount2",accounts:[{name:"storageConfig",isMut:false,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[{name:"identifier",type:{option:"string"}}]},{name:"requestDeleteAccount",accounts:[{name:"storageConfig",isMut:false,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[]},{name:"requestDeleteAccount2",accounts:[{name:"storageConfig",isMut:false,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[]},{name:"unmarkDeleteAccount",accounts:[{name:"storageConfig",isMut:false,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[]},{name:"unmarkDeleteAccount2",accounts:[{name:"storageConfig",isMut:false,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false}],args:[]},{name:"redeemRent",accounts:[{name:"storageAccount",isMut:false,isSigner:false},{name:"file",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true}],args:[]},{name:"deleteAccount",accounts:[{name:"storageConfig",isMut:true,isSigner:false},{name:"userInfo",isMut:true,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:false},{name:"shdwPayer",isMut:true,isSigner:false},{name:"uploader",isMut:false,isSigner:true},{name:"emissionsWallet",isMut:true,isSigner:false},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false}],args:[]},{name:"deleteAccount2",accounts:[{name:"storageConfig",isMut:true,isSigner:false},{name:"userInfo",isMut:true,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:false},{name:"shdwPayer",isMut:true,isSigner:false},{name:"uploader",isMut:false,isSigner:true},{name:"emissionsWallet",isMut:true,isSigner:false},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false}],args:[]},{name:"makeAccountImmutable",accounts:[{name:"storageConfig",isMut:true,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"emissionsWallet",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"uploader",isMut:false,isSigner:true},{name:"ownerAta",isMut:true,isSigner:false},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false},{name:"associatedTokenProgram",isMut:false,isSigner:false},{name:"rent",isMut:false,isSigner:false}],args:[]},{name:"makeAccountImmutable2",accounts:[{name:"storageConfig",isMut:true,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"emissionsWallet",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"ownerAta",isMut:true,isSigner:false},{name:"uploader",isMut:false,isSigner:true},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false},{name:"associatedTokenProgram",isMut:false,isSigner:false},{name:"rent",isMut:false,isSigner:false}],args:[]},{name:"badCsam",accounts:[{name:"storageConfig",isMut:true,isSigner:false},{name:"userInfo",isMut:true,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"uploader",isMut:true,isSigner:true},{name:"emissionsWallet",isMut:true,isSigner:false},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false}],args:[{name:"storageAvailable",type:"u64"}]},{name:"badCsam2",accounts:[{name:"storageConfig",isMut:true,isSigner:false},{name:"userInfo",isMut:true,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"uploader",isMut:true,isSigner:true},{name:"emissionsWallet",isMut:true,isSigner:false},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false}],args:[{name:"storageAvailable",type:"u64"}]},{name:"increaseStorage",accounts:[{name:"storageConfig",isMut:false,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"ownerAta",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"uploader",isMut:false,isSigner:true},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false}],args:[{name:"additionalStorage",type:"u64"}]},{name:"increaseStorage2",accounts:[{name:"storageConfig",isMut:false,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"ownerAta",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"uploader",isMut:false,isSigner:true},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false}],args:[{name:"additionalStorage",type:"u64"}]},{name:"increaseImmutableStorage",accounts:[{name:"storageConfig",isMut:false,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"emissionsWallet",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"ownerAta",isMut:true,isSigner:false},{name:"uploader",isMut:false,isSigner:true},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false}],args:[{name:"additionalStorage",type:"u64"}]},{name:"increaseImmutableStorage2",accounts:[{name:"storageConfig",isMut:false,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"emissionsWallet",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"ownerAta",isMut:true,isSigner:false},{name:"uploader",isMut:false,isSigner:true},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false}],args:[{name:"additionalStorage",type:"u64"}]},{name:"decreaseStorage",accounts:[{name:"storageConfig",isMut:true,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"unstakeInfo",isMut:true,isSigner:false},{name:"unstakeAccount",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"ownerAta",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"tokenMint",isMut:false,isSigner:false},{name:"uploader",isMut:false,isSigner:true},{name:"emissionsWallet",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false},{name:"rent",isMut:false,isSigner:false}],args:[{name:"removeStorage",type:"u64"}]},{name:"decreaseStorage2",accounts:[{name:"storageConfig",isMut:true,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"unstakeInfo",isMut:true,isSigner:false},{name:"unstakeAccount",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"ownerAta",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"tokenMint",isMut:false,isSigner:false},{name:"uploader",isMut:false,isSigner:true},{name:"emissionsWallet",isMut:true,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false},{name:"rent",isMut:false,isSigner:false}],args:[{name:"removeStorage",type:"u64"}]},{name:"claimStake",accounts:[{name:"storageConfig",isMut:true,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"unstakeInfo",isMut:true,isSigner:false},{name:"unstakeAccount",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"ownerAta",isMut:true,isSigner:false},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false}],args:[]},{name:"claimStake2",accounts:[{name:"storageConfig",isMut:true,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"unstakeInfo",isMut:true,isSigner:false},{name:"unstakeAccount",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"ownerAta",isMut:true,isSigner:false},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false}],args:[]},{name:"crank",accounts:[{name:"storageConfig",isMut:true,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"cranker",isMut:true,isSigner:true},{name:"crankerAta",isMut:true,isSigner:false},{name:"emissionsWallet",isMut:true,isSigner:false},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false}],args:[]},{name:"crank2",accounts:[{name:"storageConfig",isMut:true,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"cranker",isMut:true,isSigner:true},{name:"crankerAta",isMut:true,isSigner:false},{name:"emissionsWallet",isMut:true,isSigner:false},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false}],args:[]},{name:"refreshStake",accounts:[{name:"storageConfig",isMut:false,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"ownerAta",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false}],args:[]},{name:"refreshStake2",accounts:[{name:"storageConfig",isMut:false,isSigner:false},{name:"storageAccount",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"ownerAta",isMut:true,isSigner:false},{name:"stakeAccount",isMut:true,isSigner:false},{name:"tokenMint",isMut:false,isSigner:false},{name:"systemProgram",isMut:false,isSigner:false},{name:"tokenProgram",isMut:false,isSigner:false}],args:[]},{name:"migrateStep1",accounts:[{name:"storageAccount",isMut:true,isSigner:false},{name:"migration",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"systemProgram",isMut:false,isSigner:false}],args:[]},{name:"migrateStep2",accounts:[{name:"storageAccount",isMut:true,isSigner:false},{name:"migration",isMut:true,isSigner:false},{name:"owner",isMut:true,isSigner:true},{name:"systemProgram",isMut:false,isSigner:false}],args:[]}],accounts:[{name:"unstakeInfo",type:{kind:"struct",fields:[{name:"timeLastUnstaked",type:"i64"},{name:"epochLastUnstaked",type:"u64"},{name:"unstaker",type:"publicKey"}]}},{name:"storageAccount",type:{kind:"struct",fields:[{name:"isStatic",type:"bool"},{name:"initCounter",type:"u32"},{name:"delCounter",type:"u32"},{name:"immutable",type:"bool"},{name:"toBeDeleted",type:"bool"},{name:"deleteRequestEpoch",type:"u32"},{name:"storage",type:"u64"},{name:"storageAvailable",type:"u64"},{name:"owner1",type:"publicKey"},{name:"owner2",type:"publicKey"},{name:"shdwPayer",type:"publicKey"},{name:"accountCounterSeed",type:"u32"},{name:"totalCostOfCurrentStorage",type:"u64"},{name:"totalFeesPaid",type:"u64"},{name:"creationTime",type:"u32"},{name:"creationEpoch",type:"u32"},{name:"lastFeeEpoch",type:"u32"},{name:"identifier",type:"string"}]}},{name:"storageAccountV2",type:{kind:"struct",fields:[{name:"immutable",type:"bool"},{name:"toBeDeleted",type:"bool"},{name:"deleteRequestEpoch",type:"u32"},{name:"storage",type:"u64"},{name:"owner1",type:"publicKey"},{name:"accountCounterSeed",type:"u32"},{name:"creationTime",type:"u32"},{name:"creationEpoch",type:"u32"},{name:"lastFeeEpoch",type:"u32"},{name:"identifier",type:"string"}]}},{name:"userInfo",type:{kind:"struct",fields:[{name:"accountCounter",type:"u32"},{name:"delCounter",type:"u32"},{name:"agreedToTos",type:"bool"},{name:"lifetimeBadCsam",type:"bool"}]}},{name:"storageConfig",type:{kind:"struct",fields:[{name:"shadesPerGib",type:"u64"},{name:"storageAvailable",type:"u128"},{name:"tokenAccount",type:"publicKey"},{name:"admin2",type:"publicKey"},{name:"uploader",type:"publicKey"},{name:"mutableFeeStartEpoch",type:{option:"u32"}},{name:"shadesPerGibPerEpoch",type:"u64"},{name:"crankBps",type:"u16"},{name:"maxAccountSize",type:"u64"},{name:"minAccountSize",type:"u64"}]}},{name:"file",type:{kind:"struct",fields:[{name:"immutable",type:"bool"},{name:"toBeDeleted",type:"bool"},{name:"deleteRequestEpoch",type:"u32"},{name:"size",type:"u64"},{name:"sha256Hash",type:{array:["u8",32]}},{name:"initCounterSeed",type:"u32"},{name:"storageAccount",type:"publicKey"},{name:"name",type:"string"}]}},{name:"file",type:{kind:"struct",fields:[{name:"immutable",type:"bool"},{name:"toBeDeleted",type:"bool"},{name:"deleteRequestEpoch",type:"u32"},{name:"size",type:"u64"},{name:"sha256Hash",type:{array:["u8",32]}},{name:"initCounterSeed",type:"u32"},{name:"storageAccount",type:"publicKey"},{name:"name",type:"string"}]}}],types:[{name:"Mode",type:{kind:"enum",variants:[{name:"Increment"},{name:"Decrement"},{name:"Initialize"}]}}],errors:[{code:6e3,name:"NotEnoughStorage",msg:"Not enough storage available on this Storage Account"},{code:6001,name:"FileNameLengthExceedsLimit",msg:"The length of the file name exceeds the limit of 32 bytes"},{code:6002,name:"InvalidSha256Hash",msg:"Invalid sha256 hash"},{code:6003,name:"HasHadBadCsam",msg:"User at some point had a bad csam scan"},{code:6004,name:"StorageAccountMarkedImmutable",msg:"Storage account is marked as immutable"},{code:6005,name:"ClaimingStakeTooSoon",msg:"User has not waited enough time to claim stake"},{code:6006,name:"SolanaStorageAccountNotMutable",msg:"The storage account needs to be marked as mutable to update last fee collection epoch"},{code:6007,name:"RemovingTooMuchStorage",msg:"Attempting to decrease storage by more than is available"},{code:6008,name:"UnsignedIntegerCastFailed",msg:"u128 -> u64 cast failed"},{code:6009,name:"NonzeroRemainingFileAccounts",msg:"This storage account still has some file accounts associated with it that have not been deleted"},{code:6010,name:"AccountStillInGracePeriod",msg:"This account is still within deletion grace period"},{code:6011,name:"AccountNotMarkedToBeDeleted",msg:"This account is not marked to be deleted"},{code:6012,name:"FileStillInGracePeriod",msg:"This file is still within deletion grace period"},{code:6013,name:"FileNotMarkedToBeDeleted",msg:"This file is not marked to be deleted"},{code:6014,name:"FileMarkedImmutable",msg:"File has been marked as immutable and cannot be edited"},{code:6015,name:"NoStorageIncrease",msg:"User requested an increase of zero bytes"},{code:6016,name:"ExceededStorageLimit",msg:"Requested a storage account with storage over the limit"},{code:6017,name:"InsufficientFunds",msg:"User does not have enough funds to store requested number of bytes."},{code:6018,name:"NotEnoughStorageOnShadowDrive",msg:"There is not available storage on Shadow Drive. Good job!"},{code:6019,name:"AccountTooSmall",msg:"Requested a storage account with storage under the limit"},{code:6020,name:"DidNotAgreeToToS",msg:"User did not agree to terms of service"},{code:6021,name:"InvalidTokenTransferAmounts",msg:"Invalid token transfers. Stake account nonempty."},{code:6022,name:"FailedToCloseAccount",msg:"Failed to close spl token account"},{code:6023,name:"FailedToTransferToEmissionsWallet",msg:"Failed to transfer to emissions wallet"},{code:6024,name:"FailedToTransferToEmissionsWalletFromUser",msg:"Failed to transfer to emissions wallet from user"},{code:6025,name:"FailedToReturnUserFunds",msg:"Failed to return user funds"},{code:6026,name:"NeedSomeFees",msg:"Turning on fees and passing in None for storage cost per epoch"},{code:6027,name:"NeedSomeCrankBps",msg:"Turning on fees and passing in None for crank bps"},{code:6028,name:"AlreadyMarkedForDeletion",msg:"This account is already marked to be deleted"},{code:6029,name:"EmptyStakeAccount",msg:"User has an empty stake account and must refresh stake account before unmarking account for deletion"},{code:6030,name:"IdentifierExceededMaxLength",msg:"New identifier exceeds maximum length of 64 bytes"},{code:6031,name:"OnlyAdmin1CanChangeAdmins",msg:"Only admin1 can change admins"},{code:6032,name:"OnlyOneOwnerAllowedInV1_5",msg:"(As part of on-chain storage optimizations, only one owner is allowed in Shadow Drive v1.5)"}]}},{}],552:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{"@coral-xyz/borsh":25,"@solana/web3.js":99,assert:181,"base64-js":218,"bn.js":221,bs58:560,buffer:269,camelcase:274,dup:16,eventemitter3:313,"js-sha256":499,pako:507}],553:[function(require,module,exports){arguments[4][17][0].apply(exports,arguments)},{"base64-js":218,buffer:269,dup:17}],554:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{bs58:560,dup:18}],555:[function(require,module,exports){arguments[4][19][0].apply(exports,arguments)},{buffer:269,dup:19}],556:[function(require,module,exports){arguments[4][20][0].apply(exports,arguments)},{"./base64.js":553,"./bs58.js":554,"./hex.js":555,"./utf8.js":557,dup:20}],557:[function(require,module,exports){arguments[4][21][0].apply(exports,arguments)},{"../common":558,dup:21,util:819}],558:[function(require,module,exports){arguments[4][22][0].apply(exports,arguments)},{_process:519,dup:22}],559:[function(require,module,exports){arguments[4][23][0].apply(exports,arguments)},{dup:23,"safe-buffer":787}],560:[function(require,module,exports){arguments[4][24][0].apply(exports,arguments)},{"base-x":559,dup:24}],561:[function(require,module,exports){"use strict";var Buffer=require("buffer").Buffer;var inherits=require("inherits");var HashBase=require("hash-base");var ARRAY16=new Array(16);var zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];var hl=[0,1518500249,1859775393,2400959708,2840853838];var hr=[1352829926,1548603684,1836072691,2053994217,0];function RIPEMD160(){HashBase.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520}inherits(RIPEMD160,HashBase);RIPEMD160.prototype._update=function(){var words=ARRAY16;for(var j=0;j<16;++j)words[j]=this._block.readInt32LE(j*4);var al=this._a|0;var bl=this._b|0;var cl=this._c|0;var dl=this._d|0;var el=this._e|0;var ar=this._a|0;var br=this._b|0;var cr=this._c|0;var dr=this._d|0;var er=this._e|0;for(var i=0;i<80;i+=1){var tl;var tr;if(i<16){tl=fn1(al,bl,cl,dl,el,words[zl[i]],hl[0],sl[i]);tr=fn5(ar,br,cr,dr,er,words[zr[i]],hr[0],sr[i])}else if(i<32){tl=fn2(al,bl,cl,dl,el,words[zl[i]],hl[1],sl[i]);tr=fn4(ar,br,cr,dr,er,words[zr[i]],hr[1],sr[i])}else if(i<48){tl=fn3(al,bl,cl,dl,el,words[zl[i]],hl[2],sl[i]);tr=fn3(ar,br,cr,dr,er,words[zr[i]],hr[2],sr[i])}else if(i<64){tl=fn4(al,bl,cl,dl,el,words[zl[i]],hl[3],sl[i]);tr=fn2(ar,br,cr,dr,er,words[zr[i]],hr[3],sr[i])}else{tl=fn5(al,bl,cl,dl,el,words[zl[i]],hl[4],sl[i]);tr=fn1(ar,br,cr,dr,er,words[zr[i]],hr[4],sr[i])}al=el;el=dl;dl=rotl(cl,10);cl=bl;bl=tl;ar=er;er=dr;dr=rotl(cr,10);cr=br;br=tr}var t=this._b+cl+dr|0;this._b=this._c+dl+er|0;this._c=this._d+el+ar|0;this._d=this._e+al+br|0;this._e=this._a+bl+cr|0;this._a=t};RIPEMD160.prototype._digest=function(){this._block[this._blockOffset++]=128;if(this._blockOffset>56){this._block.fill(0,this._blockOffset,64);this._update();this._blockOffset=0}this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var buffer=Buffer.alloc?Buffer.alloc(20):new Buffer(20);buffer.writeInt32LE(this._a,0);buffer.writeInt32LE(this._b,4);buffer.writeInt32LE(this._c,8);buffer.writeInt32LE(this._d,12);buffer.writeInt32LE(this._e,16);return buffer};function rotl(x,n){return x<<n|x>>>32-n}function fn1(a,b,c,d,e,m,k,s){return rotl(a+(b^c^d)+m+k|0,s)+e|0}function fn2(a,b,c,d,e,m,k,s){return rotl(a+(b&c|~b&d)+m+k|0,s)+e|0}function fn3(a,b,c,d,e,m,k,s){return rotl(a+((b|~c)^d)+m+k|0,s)+e|0}function fn4(a,b,c,d,e,m,k,s){return rotl(a+(b&d|c&~d)+m+k|0,s)+e|0}function fn5(a,b,c,d,e,m,k,s){return rotl(a+(b^(c|~d))+m+k|0,s)+e|0}module.exports=RIPEMD160},{buffer:269,"hash-base":462,inherits:492}],562:[function(require,module,exports){(function(Buffer){(function(){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _eventemitter=require("eventemitter3");function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2["default"])(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return(0,_possibleConstructorReturn2["default"])(this,result)}}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}var __rest=void 0&&(void 0).__rest||function(s,e){var t={};for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p]}if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]]}return t};var CommonClient=function(_EventEmitter){(0,_inherits2["default"])(CommonClient,_EventEmitter);var _super=_createSuper(CommonClient);function CommonClient(webSocketFactory){var _this;var address=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"ws://localhost:8080";var _a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var generate_request_id=arguments.length>3?arguments[3]:undefined;(0,_classCallCheck2["default"])(this,CommonClient);var _a$autoconnect=_a.autoconnect,autoconnect=_a$autoconnect===void 0?true:_a$autoconnect,_a$reconnect=_a.reconnect,reconnect=_a$reconnect===void 0?true:_a$reconnect,_a$reconnect_interval=_a.reconnect_interval,reconnect_interval=_a$reconnect_interval===void 0?1e3:_a$reconnect_interval,_a$max_reconnects=_a.max_reconnects,max_reconnects=_a$max_reconnects===void 0?5:_a$max_reconnects,rest_options=__rest(_a,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);_this=_super.call(this);_this.webSocketFactory=webSocketFactory;_this.queue={};_this.rpc_id=0;_this.address=address;_this.autoconnect=autoconnect;_this.ready=false;_this.reconnect=reconnect;_this.reconnect_timer_id=undefined;_this.reconnect_interval=reconnect_interval;_this.max_reconnects=max_reconnects;_this.rest_options=rest_options;_this.current_reconnects=0;_this.generate_request_id=generate_request_id||function(){return++_this.rpc_id};if(_this.autoconnect)_this._connect(_this.address,Object.assign({autoconnect:_this.autoconnect,reconnect:_this.reconnect,reconnect_interval:_this.reconnect_interval,max_reconnects:_this.max_reconnects},_this.rest_options));return _this}(0,_createClass2["default"])(CommonClient,[{key:"connect",value:function connect(){if(this.socket)return;this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function call(method,params,timeout,ws_opts){var _this2=this;if(!ws_opts&&"object"===(0,_typeof2["default"])(timeout)){ws_opts=timeout;timeout=null}return new Promise(function(resolve,reject){if(!_this2.ready)return reject(new Error("socket not ready"));var rpc_id=_this2.generate_request_id(method,params);var message={jsonrpc:"2.0",method:method,params:params||null,id:rpc_id};_this2.socket.send(JSON.stringify(message),ws_opts,function(error){if(error)return reject(error);_this2.queue[rpc_id]={promise:[resolve,reject]};if(timeout){_this2.queue[rpc_id].timeout=setTimeout(function(){delete _this2.queue[rpc_id];reject(new Error("reply timeout"))},timeout)}})})}},{key:"login",value:function(){var _login=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(params){var resp;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.call("rpc.login",params);case 2:resp=_context.sent;if(resp){_context.next=5;break}throw new Error("authentication failed");case 5:return _context.abrupt("return",resp);case 6:case"end":return _context.stop()}}},_callee,this)}));function login(_x){return _login.apply(this,arguments)}return login}()},{key:"listMethods",value:function(){var _listMethods=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(){return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.call("__listMethods");case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}},_callee2,this)}));function listMethods(){return _listMethods.apply(this,arguments)}return listMethods}()},{key:"notify",value:function notify(method,params){var _this3=this;return new Promise(function(resolve,reject){if(!_this3.ready)return reject(new Error("socket not ready"));var message={jsonrpc:"2.0",method:method,params:params||null};_this3.socket.send(JSON.stringify(message),function(error){if(error)return reject(error);resolve()})})}},{key:"subscribe",value:function(){var _subscribe=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(event){var result;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(typeof event==="string")event=[event];_context3.next=3;return this.call("rpc.on",event);case 3:result=_context3.sent;if(!(typeof event==="string"&&result[event]!=="ok")){_context3.next=6;break}throw new Error("Failed subscribing to an event '"+event+"' with: "+result[event]);case 6:return _context3.abrupt("return",result);case 7:case"end":return _context3.stop()}}},_callee3,this)}));function subscribe(_x2){return _subscribe.apply(this,arguments)}return subscribe}()},{key:"unsubscribe",value:function(){var _unsubscribe=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(event){var result;return _regenerator["default"].wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(typeof event==="string")event=[event];_context4.next=3;return this.call("rpc.off",event);case 3:result=_context4.sent;if(!(typeof event==="string"&&result[event]!=="ok")){_context4.next=6;break}throw new Error("Failed unsubscribing from an event with: "+result);case 6:return _context4.abrupt("return",result);case 7:case"end":return _context4.stop()}}},_callee4,this)}));function unsubscribe(_x3){return _unsubscribe.apply(this,arguments)}return unsubscribe}()},{key:"close",value:function close(code,data){this.socket.close(code||1e3,data)}},{key:"_connect",value:function _connect(address,options){var _this4=this;clearTimeout(this.reconnect_timer_id);this.socket=this.webSocketFactory(address,options);this.socket.addEventListener("open",function(){_this4.ready=true;_this4.emit("open");_this4.current_reconnects=0});this.socket.addEventListener("message",function(_ref){var message=_ref.data;if(message instanceof ArrayBuffer)message=Buffer.from(message).toString();try{message=JSON.parse(message)}catch(error){return}if(message.notification&&_this4.listeners(message.notification).length){if(!Object.keys(message.params).length)return _this4.emit(message.notification);var args=[message.notification];if(message.params.constructor===Object)args.push(message.params);else for(var i=0;i<message.params.length;i++){args.push(message.params[i])}return Promise.resolve().then(function(){_this4.emit.apply(_this4,args)})}if(!_this4.queue[message.id]){if(message.method&&message.params){return Promise.resolve().then(function(){_this4.emit(message.method,message.params)})}return}if("error"in message==="result"in message)_this4.queue[message.id].promise[1](new Error('Server response malformed. Response must include either "result"'+' or "error", but not both.'));if(_this4.queue[message.id].timeout)clearTimeout(_this4.queue[message.id].timeout);if(message.error)_this4.queue[message.id].promise[1](message.error);else _this4.queue[message.id].promise[0](message.result);delete _this4.queue[message.id]});this.socket.addEventListener("error",function(error){return _this4.emit("error",error)});this.socket.addEventListener("close",function(_ref2){var code=_ref2.code,reason=_ref2.reason;if(_this4.ready)setTimeout(function(){return _this4.emit("close",code,reason)},0);_this4.ready=false;_this4.socket=undefined;if(code===1e3)return;_this4.current_reconnects++;if(_this4.reconnect&&(_this4.max_reconnects>_this4.current_reconnects||_this4.max_reconnects===0))_this4.reconnect_timer_id=setTimeout(function(){return _this4._connect(address,options)},_this4.reconnect_interval)})}}]);return CommonClient}(_eventemitter.EventEmitter);exports["default"]=CommonClient}).call(this)}).call(this,require("buffer").Buffer)},{"@babel/runtime/helpers/asyncToGenerator":3,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/getPrototypeOf":6,"@babel/runtime/helpers/inherits":7,"@babel/runtime/helpers/interopRequireDefault":8,"@babel/runtime/helpers/possibleConstructorReturn":9,"@babel/runtime/helpers/typeof":14,"@babel/runtime/regenerator":15,buffer:269,eventemitter3:313}],563:[function(require,module,exports){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=_default;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _eventemitter=require("eventemitter3");function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2["default"])(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return(0,_possibleConstructorReturn2["default"])(this,result)}}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}var WebSocketBrowserImpl=function(_EventEmitter){(0,_inherits2["default"])(WebSocketBrowserImpl,_EventEmitter);var _super=_createSuper(WebSocketBrowserImpl);function WebSocketBrowserImpl(address,options,protocols){var _this;(0,_classCallCheck2["default"])(this,WebSocketBrowserImpl);_this=_super.call(this);_this.socket=new window.WebSocket(address,protocols);_this.socket.onopen=function(){return _this.emit("open")};_this.socket.onmessage=function(event){return _this.emit("message",event.data)};_this.socket.onerror=function(error){return _this.emit("error",error)};_this.socket.onclose=function(event){_this.emit("close",event.code,event.reason)};return _this}(0,_createClass2["default"])(WebSocketBrowserImpl,[{key:"send",value:function send(data,optionsOrCallback,callback){var cb=callback||optionsOrCallback;try{this.socket.send(data);cb()}catch(error){cb(error)}}},{key:"close",value:function close(code,reason){this.socket.close(code,reason)}},{key:"addEventListener",value:function addEventListener(type,listener,options){this.socket.addEventListener(type,listener,options)}}]);return WebSocketBrowserImpl}(_eventemitter.EventEmitter);function _default(address,options){return new WebSocketBrowserImpl(address,options)}},{"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/getPrototypeOf":6,"@babel/runtime/helpers/inherits":7,"@babel/runtime/helpers/interopRequireDefault":8,"@babel/runtime/helpers/possibleConstructorReturn":9,eventemitter3:313}],564:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={Observable:true,ConnectableObservable:true,observable:true,animationFrames:true,Subject:true,BehaviorSubject:true,ReplaySubject:true,AsyncSubject:true,asap:true,asapScheduler:true,async:true,asyncScheduler:true,queue:true,queueScheduler:true,animationFrame:true,animationFrameScheduler:true,VirtualTimeScheduler:true,VirtualAction:true,Scheduler:true,Subscription:true,Subscriber:true,Notification:true,NotificationKind:true,pipe:true,noop:true,identity:true,isObservable:true,lastValueFrom:true,firstValueFrom:true,ArgumentOutOfRangeError:true,EmptyError:true,NotFoundError:true,ObjectUnsubscribedError:true,SequenceError:true,TimeoutError:true,timeout:true,UnsubscriptionError:true,bindCallback:true,bindNodeCallback:true,combineLatest:true,concat:true,connectable:true,defer:true,empty:true,EMPTY:true,forkJoin:true,from:true,fromEvent:true,fromEventPattern:true,generate:true,iif:true,interval:true,merge:true,never:true,NEVER:true,of:true,onErrorResumeNext:true,pairs:true,partition:true,race:true,range:true,throwError:true,timer:true,using:true,zip:true,scheduled:true,config:true,audit:true,auditTime:true,buffer:true,bufferCount:true,bufferTime:true,bufferToggle:true,bufferWhen:true,catchError:true,combineAll:true,combineLatestAll:true,combineLatestWith:true,concatAll:true,concatMap:true,concatMapTo:true,concatWith:true,connect:true,count:true,debounce:true,debounceTime:true,defaultIfEmpty:true,delay:true,delayWhen:true,dematerialize:true,distinct:true,distinctUntilChanged:true,distinctUntilKeyChanged:true,elementAt:true,endWith:true,every:true,exhaust:true,exhaustAll:true,exhaustMap:true,expand:true,filter:true,finalize:true,find:true,findIndex:true,first:true,groupBy:true,ignoreElements:true,isEmpty:true,last:true,map:true,mapTo:true,materialize:true,max:true,mergeAll:true,flatMap:true,mergeMap:true,mergeMapTo:true,mergeScan:true,mergeWith:true,min:true,multicast:true,observeOn:true,onErrorResumeNextWith:true,pairwise:true,pluck:true,publish:true,publishBehavior:true,publishLast:true,publishReplay:true,raceWith:true,reduce:true,repeat:true,repeatWhen:true,retry:true,retryWhen:true,refCount:true,sample:true,sampleTime:true,scan:true,sequenceEqual:true,share:true,shareReplay:true,single:true,skip:true,skipLast:true,skipUntil:true,skipWhile:true,startWith:true,subscribeOn:true,switchAll:true,switchMap:true,switchMapTo:true,switchScan:true,take:true,takeLast:true,takeUntil:true,takeWhile:true,tap:true,throttle:true,throttleTime:true,throwIfEmpty:true,timeInterval:true,timeoutWith:true,timestamp:true,toArray:true,window:true,windowCount:true,windowTime:true,windowToggle:true,windowWhen:true,withLatestFrom:true,zipAll:true,zipWith:true};Object.defineProperty(exports,"ArgumentOutOfRangeError",{enumerable:true,get:function(){return _ArgumentOutOfRangeError.ArgumentOutOfRangeError}});Object.defineProperty(exports,"AsyncSubject",{enumerable:true,get:function(){return _AsyncSubject.AsyncSubject}});Object.defineProperty(exports,"BehaviorSubject",{enumerable:true,get:function(){return _BehaviorSubject.BehaviorSubject}});Object.defineProperty(exports,"ConnectableObservable",{enumerable:true,get:function(){return _ConnectableObservable.ConnectableObservable}});Object.defineProperty(exports,"EMPTY",{enumerable:true,get:function(){return _empty.EMPTY}});Object.defineProperty(exports,"EmptyError",{enumerable:true,get:function(){return _EmptyError.EmptyError}});Object.defineProperty(exports,"NEVER",{enumerable:true,get:function(){return _never.NEVER}});Object.defineProperty(exports,"NotFoundError",{enumerable:true,get:function(){return _NotFoundError.NotFoundError}});Object.defineProperty(exports,"Notification",{enumerable:true,get:function(){return _Notification.Notification}});Object.defineProperty(exports,"NotificationKind",{enumerable:true,get:function(){return _Notification.NotificationKind}});Object.defineProperty(exports,"ObjectUnsubscribedError",{enumerable:true,get:function(){return _ObjectUnsubscribedError.ObjectUnsubscribedError}});Object.defineProperty(exports,"Observable",{enumerable:true,get:function(){return _Observable.Observable}});Object.defineProperty(exports,"ReplaySubject",{enumerable:true,get:function(){return _ReplaySubject.ReplaySubject}});Object.defineProperty(exports,"Scheduler",{enumerable:true,get:function(){return _Scheduler.Scheduler}});Object.defineProperty(exports,"SequenceError",{enumerable:true,get:function(){return _SequenceError.SequenceError}});Object.defineProperty(exports,"Subject",{enumerable:true,get:function(){return _Subject.Subject}});Object.defineProperty(exports,"Subscriber",{enumerable:true,get:function(){return _Subscriber.Subscriber}});Object.defineProperty(exports,"Subscription",{enumerable:true,get:function(){return _Subscription.Subscription}});Object.defineProperty(exports,"TimeoutError",{enumerable:true,get:function(){return _timeout.TimeoutError}});Object.defineProperty(exports,"UnsubscriptionError",{enumerable:true,get:function(){return _UnsubscriptionError.UnsubscriptionError}});Object.defineProperty(exports,"VirtualAction",{enumerable:true,get:function(){return _VirtualTimeScheduler.VirtualAction}});Object.defineProperty(exports,"VirtualTimeScheduler",{enumerable:true,get:function(){return _VirtualTimeScheduler.VirtualTimeScheduler}});Object.defineProperty(exports,"animationFrame",{enumerable:true,get:function(){return _animationFrame.animationFrame}});Object.defineProperty(exports,"animationFrameScheduler",{enumerable:true,get:function(){return _animationFrame.animationFrameScheduler}});Object.defineProperty(exports,"animationFrames",{enumerable:true,get:function(){return _animationFrames.animationFrames}});Object.defineProperty(exports,"asap",{enumerable:true,get:function(){return _asap.asap}});Object.defineProperty(exports,"asapScheduler",{enumerable:true,get:function(){return _asap.asapScheduler}});Object.defineProperty(exports,"async",{enumerable:true,get:function(){return _async.async}});Object.defineProperty(exports,"asyncScheduler",{enumerable:true,get:function(){return _async.asyncScheduler}});Object.defineProperty(exports,"audit",{enumerable:true,get:function(){return _audit.audit}});Object.defineProperty(exports,"auditTime",{enumerable:true,get:function(){return _auditTime.auditTime}});Object.defineProperty(exports,"bindCallback",{enumerable:true,get:function(){return _bindCallback.bindCallback}});Object.defineProperty(exports,"bindNodeCallback",{enumerable:true,get:function(){return _bindNodeCallback.bindNodeCallback}});Object.defineProperty(exports,"buffer",{enumerable:true,get:function(){return _buffer.buffer}});Object.defineProperty(exports,"bufferCount",{enumerable:true,get:function(){return _bufferCount.bufferCount}});Object.defineProperty(exports,"bufferTime",{enumerable:true,get:function(){return _bufferTime.bufferTime}});Object.defineProperty(exports,"bufferToggle",{enumerable:true,get:function(){return _bufferToggle.bufferToggle}});Object.defineProperty(exports,"bufferWhen",{enumerable:true,get:function(){return _bufferWhen.bufferWhen}});Object.defineProperty(exports,"catchError",{enumerable:true,get:function(){return _catchError.catchError}});Object.defineProperty(exports,"combineAll",{enumerable:true,get:function(){return _combineAll.combineAll}});Object.defineProperty(exports,"combineLatest",{enumerable:true,get:function(){return _combineLatest.combineLatest}});Object.defineProperty(exports,"combineLatestAll",{enumerable:true,get:function(){return _combineLatestAll.combineLatestAll}});Object.defineProperty(exports,"combineLatestWith",{enumerable:true,get:function(){return _combineLatestWith.combineLatestWith}});Object.defineProperty(exports,"concat",{enumerable:true,get:function(){return _concat.concat}});Object.defineProperty(exports,"concatAll",{enumerable:true,get:function(){return _concatAll.concatAll}});Object.defineProperty(exports,"concatMap",{enumerable:true,get:function(){return _concatMap.concatMap}});Object.defineProperty(exports,"concatMapTo",{enumerable:true,get:function(){return _concatMapTo.concatMapTo}});Object.defineProperty(exports,"concatWith",{enumerable:true,get:function(){return _concatWith.concatWith}});Object.defineProperty(exports,"config",{enumerable:true,get:function(){return _config.config}});Object.defineProperty(exports,"connect",{enumerable:true,get:function(){return _connect.connect}});Object.defineProperty(exports,"connectable",{enumerable:true,get:function(){return _connectable.connectable}});Object.defineProperty(exports,"count",{enumerable:true,get:function(){return _count.count}});Object.defineProperty(exports,"debounce",{enumerable:true,get:function(){return _debounce.debounce}});Object.defineProperty(exports,"debounceTime",{enumerable:true,get:function(){return _debounceTime.debounceTime}});Object.defineProperty(exports,"defaultIfEmpty",{enumerable:true,get:function(){return _defaultIfEmpty.defaultIfEmpty}});Object.defineProperty(exports,"defer",{enumerable:true,get:function(){return _defer.defer}});Object.defineProperty(exports,"delay",{enumerable:true,get:function(){return _delay.delay}});Object.defineProperty(exports,"delayWhen",{enumerable:true,get:function(){return _delayWhen.delayWhen}});Object.defineProperty(exports,"dematerialize",{enumerable:true,get:function(){return _dematerialize.dematerialize}});Object.defineProperty(exports,"distinct",{enumerable:true,get:function(){return _distinct.distinct}});Object.defineProperty(exports,"distinctUntilChanged",{enumerable:true,get:function(){return _distinctUntilChanged.distinctUntilChanged}});Object.defineProperty(exports,"distinctUntilKeyChanged",{enumerable:true,get:function(){return _distinctUntilKeyChanged.distinctUntilKeyChanged}});Object.defineProperty(exports,"elementAt",{enumerable:true,get:function(){return _elementAt.elementAt}});Object.defineProperty(exports,"empty",{enumerable:true,get:function(){return _empty.empty}});Object.defineProperty(exports,"endWith",{enumerable:true,get:function(){return _endWith.endWith}});Object.defineProperty(exports,"every",{enumerable:true,get:function(){return _every.every}});Object.defineProperty(exports,"exhaust",{enumerable:true,get:function(){return _exhaust.exhaust}});Object.defineProperty(exports,"exhaustAll",{enumerable:true,get:function(){return _exhaustAll.exhaustAll}});Object.defineProperty(exports,"exhaustMap",{enumerable:true,get:function(){return _exhaustMap.exhaustMap}});Object.defineProperty(exports,"expand",{enumerable:true,get:function(){return _expand.expand}});Object.defineProperty(exports,"filter",{enumerable:true,get:function(){return _filter.filter}});Object.defineProperty(exports,"finalize",{enumerable:true,get:function(){return _finalize.finalize}});Object.defineProperty(exports,"find",{enumerable:true,get:function(){return _find.find}});Object.defineProperty(exports,"findIndex",{enumerable:true,get:function(){return _findIndex.findIndex}});Object.defineProperty(exports,"first",{enumerable:true,get:function(){return _first.first}});Object.defineProperty(exports,"firstValueFrom",{enumerable:true,get:function(){return _firstValueFrom.firstValueFrom}});Object.defineProperty(exports,"flatMap",{enumerable:true,get:function(){return _flatMap.flatMap}});Object.defineProperty(exports,"forkJoin",{enumerable:true,get:function(){return _forkJoin.forkJoin}});Object.defineProperty(exports,"from",{enumerable:true,get:function(){return _from.from}});Object.defineProperty(exports,"fromEvent",{enumerable:true,get:function(){return _fromEvent.fromEvent}});Object.defineProperty(exports,"fromEventPattern",{enumerable:true,get:function(){return _fromEventPattern.fromEventPattern}});Object.defineProperty(exports,"generate",{enumerable:true,get:function(){return _generate.generate}});Object.defineProperty(exports,"groupBy",{enumerable:true,get:function(){return _groupBy.groupBy}});Object.defineProperty(exports,"identity",{enumerable:true,get:function(){return _identity.identity}});Object.defineProperty(exports,"ignoreElements",{enumerable:true,get:function(){return _ignoreElements.ignoreElements}});Object.defineProperty(exports,"iif",{enumerable:true,get:function(){return _iif.iif}});Object.defineProperty(exports,"interval",{enumerable:true,get:function(){return _interval.interval}});Object.defineProperty(exports,"isEmpty",{enumerable:true,get:function(){return _isEmpty.isEmpty}});Object.defineProperty(exports,"isObservable",{enumerable:true,get:function(){return _isObservable.isObservable}});Object.defineProperty(exports,"last",{enumerable:true,get:function(){return _last.last}});Object.defineProperty(exports,"lastValueFrom",{enumerable:true,get:function(){return _lastValueFrom.lastValueFrom}});Object.defineProperty(exports,"map",{enumerable:true,get:function(){return _map.map}});Object.defineProperty(exports,"mapTo",{enumerable:true,get:function(){return _mapTo.mapTo}});Object.defineProperty(exports,"materialize",{enumerable:true,get:function(){return _materialize.materialize}});Object.defineProperty(exports,"max",{enumerable:true,get:function(){return _max.max}});Object.defineProperty(exports,"merge",{enumerable:true,get:function(){return _merge.merge}});Object.defineProperty(exports,"mergeAll",{enumerable:true,get:function(){return _mergeAll.mergeAll}});Object.defineProperty(exports,"mergeMap",{enumerable:true,get:function(){return _mergeMap.mergeMap}});Object.defineProperty(exports,"mergeMapTo",{enumerable:true,get:function(){return _mergeMapTo.mergeMapTo}});Object.defineProperty(exports,"mergeScan",{enumerable:true,get:function(){return _mergeScan.mergeScan}});Object.defineProperty(exports,"mergeWith",{enumerable:true,get:function(){return _mergeWith.mergeWith}});Object.defineProperty(exports,"min",{enumerable:true,get:function(){return _min.min}});Object.defineProperty(exports,"multicast",{enumerable:true,get:function(){return _multicast.multicast}});Object.defineProperty(exports,"never",{enumerable:true,get:function(){return _never.never}});Object.defineProperty(exports,"noop",{enumerable:true,get:function(){return _noop.noop}});Object.defineProperty(exports,"observable",{enumerable:true,get:function(){return _observable.observable}});Object.defineProperty(exports,"observeOn",{enumerable:true,get:function(){return _observeOn.observeOn}});Object.defineProperty(exports,"of",{enumerable:true,get:function(){return _of.of}});Object.defineProperty(exports,"onErrorResumeNext",{enumerable:true,get:function(){return _onErrorResumeNext.onErrorResumeNext}});Object.defineProperty(exports,"onErrorResumeNextWith",{enumerable:true,get:function(){return _onErrorResumeNextWith.onErrorResumeNextWith}});Object.defineProperty(exports,"pairs",{enumerable:true,get:function(){return _pairs.pairs}});Object.defineProperty(exports,"pairwise",{enumerable:true,get:function(){return _pairwise.pairwise}});Object.defineProperty(exports,"partition",{enumerable:true,get:function(){return _partition.partition}});Object.defineProperty(exports,"pipe",{enumerable:true,get:function(){return _pipe.pipe}});Object.defineProperty(exports,"pluck",{enumerable:true,get:function(){return _pluck.pluck}});Object.defineProperty(exports,"publish",{enumerable:true,get:function(){return _publish.publish}});Object.defineProperty(exports,"publishBehavior",{enumerable:true,get:function(){return _publishBehavior.publishBehavior}});Object.defineProperty(exports,"publishLast",{enumerable:true,get:function(){return _publishLast.publishLast}});Object.defineProperty(exports,"publishReplay",{enumerable:true,get:function(){return _publishReplay.publishReplay}});Object.defineProperty(exports,"queue",{enumerable:true,get:function(){return _queue.queue}});Object.defineProperty(exports,"queueScheduler",{enumerable:true,get:function(){return _queue.queueScheduler}});Object.defineProperty(exports,"race",{enumerable:true,get:function(){return _race.race}});Object.defineProperty(exports,"raceWith",{enumerable:true,get:function(){return _raceWith.raceWith}});Object.defineProperty(exports,"range",{enumerable:true,get:function(){return _range.range}});Object.defineProperty(exports,"reduce",{enumerable:true,get:function(){return _reduce.reduce}});Object.defineProperty(exports,"refCount",{enumerable:true,get:function(){return _refCount.refCount}});Object.defineProperty(exports,"repeat",{enumerable:true,get:function(){return _repeat.repeat}});Object.defineProperty(exports,"repeatWhen",{enumerable:true,get:function(){return _repeatWhen.repeatWhen}});Object.defineProperty(exports,"retry",{enumerable:true,get:function(){return _retry.retry}});Object.defineProperty(exports,"retryWhen",{enumerable:true,get:function(){return _retryWhen.retryWhen}});Object.defineProperty(exports,"sample",{enumerable:true,get:function(){return _sample.sample}});Object.defineProperty(exports,"sampleTime",{enumerable:true,get:function(){return _sampleTime.sampleTime}});Object.defineProperty(exports,"scan",{enumerable:true,get:function(){return _scan.scan}});Object.defineProperty(exports,"scheduled",{enumerable:true,get:function(){return _scheduled.scheduled}});Object.defineProperty(exports,"sequenceEqual",{enumerable:true,get:function(){return _sequenceEqual.sequenceEqual}});Object.defineProperty(exports,"share",{enumerable:true,get:function(){return _share.share}});Object.defineProperty(exports,"shareReplay",{enumerable:true,get:function(){return _shareReplay.shareReplay}});Object.defineProperty(exports,"single",{enumerable:true,get:function(){return _single.single}});Object.defineProperty(exports,"skip",{enumerable:true,get:function(){return _skip.skip}});Object.defineProperty(exports,"skipLast",{enumerable:true,get:function(){return _skipLast.skipLast}});Object.defineProperty(exports,"skipUntil",{enumerable:true,get:function(){return _skipUntil.skipUntil}});Object.defineProperty(exports,"skipWhile",{enumerable:true,get:function(){return _skipWhile.skipWhile}});Object.defineProperty(exports,"startWith",{enumerable:true,get:function(){return _startWith.startWith}});Object.defineProperty(exports,"subscribeOn",{enumerable:true,get:function(){return _subscribeOn.subscribeOn}});Object.defineProperty(exports,"switchAll",{enumerable:true,get:function(){return _switchAll.switchAll}});Object.defineProperty(exports,"switchMap",{enumerable:true,get:function(){return _switchMap.switchMap}});Object.defineProperty(exports,"switchMapTo",{enumerable:true,get:function(){return _switchMapTo.switchMapTo}});Object.defineProperty(exports,"switchScan",{enumerable:true,get:function(){return _switchScan.switchScan}});Object.defineProperty(exports,"take",{enumerable:true,get:function(){return _take.take}});Object.defineProperty(exports,"takeLast",{enumerable:true,get:function(){return _takeLast.takeLast}});Object.defineProperty(exports,"takeUntil",{enumerable:true,get:function(){return _takeUntil.takeUntil}});Object.defineProperty(exports,"takeWhile",{enumerable:true,get:function(){return _takeWhile.takeWhile}});Object.defineProperty(exports,"tap",{enumerable:true,get:function(){return _tap.tap}});Object.defineProperty(exports,"throttle",{enumerable:true,get:function(){return _throttle.throttle}});Object.defineProperty(exports,"throttleTime",{enumerable:true,get:function(){return _throttleTime.throttleTime}});Object.defineProperty(exports,"throwError",{enumerable:true,get:function(){return _throwError.throwError}});Object.defineProperty(exports,"throwIfEmpty",{enumerable:true,get:function(){return _throwIfEmpty.throwIfEmpty}});Object.defineProperty(exports,"timeInterval",{enumerable:true,get:function(){return _timeInterval.timeInterval}});Object.defineProperty(exports,"timeout",{enumerable:true,get:function(){return _timeout.timeout}});Object.defineProperty(exports,"timeoutWith",{enumerable:true,get:function(){return _timeoutWith.timeoutWith}});Object.defineProperty(exports,"timer",{enumerable:true,get:function(){return _timer.timer}});Object.defineProperty(exports,"timestamp",{enumerable:true,get:function(){return _timestamp.timestamp}});Object.defineProperty(exports,"toArray",{enumerable:true,get:function(){return _toArray.toArray}});Object.defineProperty(exports,"using",{enumerable:true,get:function(){return _using.using}});Object.defineProperty(exports,"window",{enumerable:true,get:function(){return _window.window}});Object.defineProperty(exports,"windowCount",{enumerable:true,get:function(){return _windowCount.windowCount}});Object.defineProperty(exports,"windowTime",{enumerable:true,get:function(){return _windowTime.windowTime}});Object.defineProperty(exports,"windowToggle",{enumerable:true,get:function(){return _windowToggle.windowToggle}});Object.defineProperty(exports,"windowWhen",{enumerable:true,get:function(){return _windowWhen.windowWhen}});Object.defineProperty(exports,"withLatestFrom",{enumerable:true,get:function(){return _withLatestFrom.withLatestFrom}});Object.defineProperty(exports,"zip",{enumerable:true,get:function(){return _zip.zip}});Object.defineProperty(exports,"zipAll",{enumerable:true,get:function(){return _zipAll.zipAll}});Object.defineProperty(exports,"zipWith",{enumerable:true,get:function(){return _zipWith.zipWith}});var _Observable=require("./internal/Observable");var _ConnectableObservable=require("./internal/observable/ConnectableObservable");var _observable=require("./internal/symbol/observable");var _animationFrames=require("./internal/observable/dom/animationFrames");var _Subject=require("./internal/Subject");var _BehaviorSubject=require("./internal/BehaviorSubject");var _ReplaySubject=require("./internal/ReplaySubject");var _AsyncSubject=require("./internal/AsyncSubject");var _asap=require("./internal/scheduler/asap");var _async=require("./internal/scheduler/async");var _queue=require("./internal/scheduler/queue");var _animationFrame=require("./internal/scheduler/animationFrame");var _VirtualTimeScheduler=require("./internal/scheduler/VirtualTimeScheduler");var _Scheduler=require("./internal/Scheduler");var _Subscription=require("./internal/Subscription");var _Subscriber=require("./internal/Subscriber");var _Notification=require("./internal/Notification");var _pipe=require("./internal/util/pipe");var _noop=require("./internal/util/noop");var _identity=require("./internal/util/identity");var _isObservable=require("./internal/util/isObservable");var _lastValueFrom=require("./internal/lastValueFrom");var _firstValueFrom=require("./internal/firstValueFrom");var _ArgumentOutOfRangeError=require("./internal/util/ArgumentOutOfRangeError");var _EmptyError=require("./internal/util/EmptyError");var _NotFoundError=require("./internal/util/NotFoundError");var _ObjectUnsubscribedError=require("./internal/util/ObjectUnsubscribedError");var _SequenceError=require("./internal/util/SequenceError");var _timeout=require("./internal/operators/timeout");var _UnsubscriptionError=require("./internal/util/UnsubscriptionError");var _bindCallback=require("./internal/observable/bindCallback");var _bindNodeCallback=require("./internal/observable/bindNodeCallback");var _combineLatest=require("./internal/observable/combineLatest");var _concat=require("./internal/observable/concat");var _connectable=require("./internal/observable/connectable");var _defer=require("./internal/observable/defer");var _empty=require("./internal/observable/empty");var _forkJoin=require("./internal/observable/forkJoin");var _from=require("./internal/observable/from");var _fromEvent=require("./internal/observable/fromEvent");var _fromEventPattern=require("./internal/observable/fromEventPattern");var _generate=require("./internal/observable/generate");var _iif=require("./internal/observable/iif");var _interval=require("./internal/observable/interval");var _merge=require("./internal/observable/merge");var _never=require("./internal/observable/never");var _of=require("./internal/observable/of");var _onErrorResumeNext=require("./internal/observable/onErrorResumeNext");var _pairs=require("./internal/observable/pairs");var _partition=require("./internal/observable/partition");var _race=require("./internal/observable/race");var _range=require("./internal/observable/range");var _throwError=require("./internal/observable/throwError");var _timer=require("./internal/observable/timer");var _using=require("./internal/observable/using");var _zip=require("./internal/observable/zip");var _scheduled=require("./internal/scheduled/scheduled");var _types=require("./internal/types");Object.keys(_types).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;if(key in exports&&exports[key]===_types[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function(){return _types[key]}})});var _config=require("./internal/config");var _audit=require("./internal/operators/audit");var _auditTime=require("./internal/operators/auditTime");var _buffer=require("./internal/operators/buffer");var _bufferCount=require("./internal/operators/bufferCount");var _bufferTime=require("./internal/operators/bufferTime");var _bufferToggle=require("./internal/operators/bufferToggle");var _bufferWhen=require("./internal/operators/bufferWhen");var _catchError=require("./internal/operators/catchError");var _combineAll=require("./internal/operators/combineAll");var _combineLatestAll=require("./internal/operators/combineLatestAll");var _combineLatestWith=require("./internal/operators/combineLatestWith");var _concatAll=require("./internal/operators/concatAll");var _concatMap=require("./internal/operators/concatMap");var _concatMapTo=require("./internal/operators/concatMapTo");var _concatWith=require("./internal/operators/concatWith");var _connect=require("./internal/operators/connect");var _count=require("./internal/operators/count");var _debounce=require("./internal/operators/debounce");var _debounceTime=require("./internal/operators/debounceTime");var _defaultIfEmpty=require("./internal/operators/defaultIfEmpty");var _delay=require("./internal/operators/delay");var _delayWhen=require("./internal/operators/delayWhen");var _dematerialize=require("./internal/operators/dematerialize");var _distinct=require("./internal/operators/distinct");var _distinctUntilChanged=require("./internal/operators/distinctUntilChanged");var _distinctUntilKeyChanged=require("./internal/operators/distinctUntilKeyChanged");var _elementAt=require("./internal/operators/elementAt");var _endWith=require("./internal/operators/endWith");var _every=require("./internal/operators/every");var _exhaust=require("./internal/operators/exhaust");var _exhaustAll=require("./internal/operators/exhaustAll");var _exhaustMap=require("./internal/operators/exhaustMap");var _expand=require("./internal/operators/expand");var _filter=require("./internal/operators/filter");var _finalize=require("./internal/operators/finalize");var _find=require("./internal/operators/find");var _findIndex=require("./internal/operators/findIndex");var _first=require("./internal/operators/first");var _groupBy=require("./internal/operators/groupBy");var _ignoreElements=require("./internal/operators/ignoreElements");var _isEmpty=require("./internal/operators/isEmpty");var _last=require("./internal/operators/last");var _map=require("./internal/operators/map");var _mapTo=require("./internal/operators/mapTo");var _materialize=require("./internal/operators/materialize");var _max=require("./internal/operators/max");var _mergeAll=require("./internal/operators/mergeAll");var _flatMap=require("./internal/operators/flatMap");var _mergeMap=require("./internal/operators/mergeMap");var _mergeMapTo=require("./internal/operators/mergeMapTo");var _mergeScan=require("./internal/operators/mergeScan");var _mergeWith=require("./internal/operators/mergeWith");var _min=require("./internal/operators/min");var _multicast=require("./internal/operators/multicast");var _observeOn=require("./internal/operators/observeOn");var _onErrorResumeNextWith=require("./internal/operators/onErrorResumeNextWith");var _pairwise=require("./internal/operators/pairwise");var _pluck=require("./internal/operators/pluck");var _publish=require("./internal/operators/publish");var _publishBehavior=require("./internal/operators/publishBehavior");var _publishLast=require("./internal/operators/publishLast");var _publishReplay=require("./internal/operators/publishReplay");var _raceWith=require("./internal/operators/raceWith");var _reduce=require("./internal/operators/reduce");var _repeat=require("./internal/operators/repeat");var _repeatWhen=require("./internal/operators/repeatWhen");var _retry=require("./internal/operators/retry");var _retryWhen=require("./internal/operators/retryWhen");var _refCount=require("./internal/operators/refCount");var _sample=require("./internal/operators/sample");var _sampleTime=require("./internal/operators/sampleTime");var _scan=require("./internal/operators/scan");var _sequenceEqual=require("./internal/operators/sequenceEqual");var _share=require("./internal/operators/share");var _shareReplay=require("./internal/operators/shareReplay");var _single=require("./internal/operators/single");var _skip=require("./internal/operators/skip");var _skipLast=require("./internal/operators/skipLast");var _skipUntil=require("./internal/operators/skipUntil");var _skipWhile=require("./internal/operators/skipWhile");var _startWith=require("./internal/operators/startWith");var _subscribeOn=require("./internal/operators/subscribeOn");var _switchAll=require("./internal/operators/switchAll");var _switchMap=require("./internal/operators/switchMap");var _switchMapTo=require("./internal/operators/switchMapTo");var _switchScan=require("./internal/operators/switchScan");var _take=require("./internal/operators/take");var _takeLast=require("./internal/operators/takeLast");var _takeUntil=require("./internal/operators/takeUntil");var _takeWhile=require("./internal/operators/takeWhile");var _tap=require("./internal/operators/tap");var _throttle=require("./internal/operators/throttle");var _throttleTime=require("./internal/operators/throttleTime");var _throwIfEmpty=require("./internal/operators/throwIfEmpty");var _timeInterval=require("./internal/operators/timeInterval");var _timeoutWith=require("./internal/operators/timeoutWith");var _timestamp=require("./internal/operators/timestamp");var _toArray=require("./internal/operators/toArray");var _window=require("./internal/operators/window");var _windowCount=require("./internal/operators/windowCount");var _windowTime=require("./internal/operators/windowTime");var _windowToggle=require("./internal/operators/windowToggle");var _windowWhen=require("./internal/operators/windowWhen");var _withLatestFrom=require("./internal/operators/withLatestFrom");var _zipAll=require("./internal/operators/zipAll");var _zipWith=require("./internal/operators/zipWith")},{"./internal/AsyncSubject":565,"./internal/BehaviorSubject":566,"./internal/Notification":567,"./internal/Observable":569,"./internal/ReplaySubject":570,"./internal/Scheduler":571,"./internal/Subject":572,"./internal/Subscriber":573,"./internal/Subscription":574,"./internal/config":575,"./internal/firstValueFrom":576,"./internal/lastValueFrom":577,"./internal/observable/ConnectableObservable":578,"./internal/observable/bindCallback":579,"./internal/observable/bindNodeCallback":581,"./internal/observable/combineLatest":582,"./internal/observable/concat":583,"./internal/observable/connectable":584,"./internal/observable/defer":585,"./internal/observable/dom/animationFrames":586,"./internal/observable/empty":587,"./internal/observable/forkJoin":588,"./internal/observable/from":589,"./internal/observable/fromEvent":590,"./internal/observable/fromEventPattern":591,"./internal/observable/generate":593,"./internal/observable/iif":594,"./internal/observable/interval":596,"./internal/observable/merge":597,"./internal/observable/never":598,"./internal/observable/of":599,"./internal/observable/onErrorResumeNext":600,"./internal/observable/pairs":601,"./internal/observable/partition":602,"./internal/observable/race":603,"./internal/observable/range":604,"./internal/observable/throwError":605,"./internal/observable/timer":606,"./internal/observable/using":607,"./internal/observable/zip":608,"./internal/operators/audit":610,"./internal/operators/auditTime":611,"./internal/operators/buffer":612,"./internal/operators/bufferCount":613,"./internal/operators/bufferTime":614,"./internal/operators/bufferToggle":615,"./internal/operators/bufferWhen":616,"./internal/operators/catchError":617,"./internal/operators/combineAll":618,"./internal/operators/combineLatestAll":620,"./internal/operators/combineLatestWith":621,"./internal/operators/concatAll":623,"./internal/operators/concatMap":624,"./internal/operators/concatMapTo":625,"./internal/operators/concatWith":626,"./internal/operators/connect":627,"./internal/operators/count":628,"./internal/operators/debounce":629,"./internal/operators/debounceTime":630,"./internal/operators/defaultIfEmpty":631,"./internal/operators/delay":632,"./internal/operators/delayWhen":633,"./internal/operators/dematerialize":634,"./internal/operators/distinct":635,"./internal/operators/distinctUntilChanged":636,"./internal/operators/distinctUntilKeyChanged":637,"./internal/operators/elementAt":638,"./internal/operators/endWith":639,"./internal/operators/every":640,"./internal/operators/exhaust":641,"./internal/operators/exhaustAll":642,"./internal/operators/exhaustMap":643,"./internal/operators/expand":644,"./internal/operators/filter":645,"./internal/operators/finalize":646,"./internal/operators/find":647,"./internal/operators/findIndex":648,"./internal/operators/first":649,"./internal/operators/flatMap":650,"./internal/operators/groupBy":651,"./internal/operators/ignoreElements":652,"./internal/operators/isEmpty":653,"./internal/operators/last":655,"./internal/operators/map":656,"./internal/operators/mapTo":657,"./internal/operators/materialize":658,"./internal/operators/max":659,"./internal/operators/mergeAll":661,"./internal/operators/mergeMap":663,"./internal/operators/mergeMapTo":664,"./internal/operators/mergeScan":665,"./internal/operators/mergeWith":666,"./internal/operators/min":667,"./internal/operators/multicast":668,"./internal/operators/observeOn":669,"./internal/operators/onErrorResumeNextWith":670,"./internal/operators/pairwise":671,"./internal/operators/pluck":672,"./internal/operators/publish":673,"./internal/operators/publishBehavior":674,"./internal/operators/publishLast":675,"./internal/operators/publishReplay":676,"./internal/operators/raceWith":677,"./internal/operators/reduce":678,"./internal/operators/refCount":679,"./internal/operators/repeat":680,"./internal/operators/repeatWhen":681,"./internal/operators/retry":682,"./internal/operators/retryWhen":683,"./internal/operators/sample":684,"./internal/operators/sampleTime":685,"./internal/operators/scan":686,"./internal/operators/sequenceEqual":688,"./internal/operators/share":689,"./internal/operators/shareReplay":690,"./internal/operators/single":691,"./internal/operators/skip":692,"./internal/operators/skipLast":693,"./internal/operators/skipUntil":694,"./internal/operators/skipWhile":695,"./internal/operators/startWith":696,"./internal/operators/subscribeOn":697,"./internal/operators/switchAll":698,"./internal/operators/switchMap":699,"./internal/operators/switchMapTo":700,"./internal/operators/switchScan":701,"./internal/operators/take":702,"./internal/operators/takeLast":703,"./internal/operators/takeUntil":704,"./internal/operators/takeWhile":705,"./internal/operators/tap":706,"./internal/operators/throttle":707,"./internal/operators/throttleTime":708,"./internal/operators/throwIfEmpty":709,"./internal/operators/timeInterval":710,"./internal/operators/timeout":711,"./internal/operators/timeoutWith":712,"./internal/operators/timestamp":713,"./internal/operators/toArray":714,"./internal/operators/window":715,"./internal/operators/windowCount":716,"./internal/operators/windowTime":717,"./internal/operators/windowToggle":718,"./internal/operators/windowWhen":719,"./internal/operators/withLatestFrom":720,"./internal/operators/zipAll":722,"./internal/operators/zipWith":723,"./internal/scheduled/scheduled":730,"./internal/scheduler/VirtualTimeScheduler":740,"./internal/scheduler/animationFrame":741,"./internal/scheduler/asap":743,"./internal/scheduler/async":744,"./internal/scheduler/queue":749,"./internal/symbol/observable":752,"./internal/types":753,"./internal/util/ArgumentOutOfRangeError":754,"./internal/util/EmptyError":755,"./internal/util/NotFoundError":757,"./internal/util/ObjectUnsubscribedError":758,"./internal/util/SequenceError":759,"./internal/util/UnsubscriptionError":760,"./internal/util/identity":769,"./internal/util/isObservable":776,"./internal/util/noop":782,"./internal/util/pipe":784}],565:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AsyncSubject=void 0;var _tslib=require("tslib");var _Subject=require("./Subject");var AsyncSubject=function(_super){(0,_tslib.__extends)(AsyncSubject,_super);function AsyncSubject(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._value=null;_this._hasValue=false;_this._isComplete=false;return _this}AsyncSubject.prototype._checkFinalizedStatuses=function(subscriber){var _a=this,hasError=_a.hasError,_hasValue=_a._hasValue,_value=_a._value,thrownError=_a.thrownError,isStopped=_a.isStopped,_isComplete=_a._isComplete;if(hasError){subscriber.error(thrownError)}else if(isStopped||_isComplete){_hasValue&&subscriber.next(_value);subscriber.complete()}};AsyncSubject.prototype.next=function(value){if(!this.isStopped){this._value=value;this._hasValue=true}};AsyncSubject.prototype.complete=function(){var _a=this,_hasValue=_a._hasValue,_value=_a._value,_isComplete=_a._isComplete;if(!_isComplete){this._isComplete=true;_hasValue&&_super.prototype.next.call(this,_value);_super.prototype.complete.call(this)}};return AsyncSubject}(_Subject.Subject);exports.AsyncSubject=AsyncSubject},{"./Subject":572,tslib:814}],566:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BehaviorSubject=void 0;var _tslib=require("tslib");var _Subject=require("./Subject");var BehaviorSubject=function(_super){(0,_tslib.__extends)(BehaviorSubject,_super);function BehaviorSubject(_value){var _this=_super.call(this)||this;_this._value=_value;return _this}Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:false,configurable:true});BehaviorSubject.prototype._subscribe=function(subscriber){var subscription=_super.prototype._subscribe.call(this,subscriber);!subscription.closed&&subscriber.next(this._value);return subscription};BehaviorSubject.prototype.getValue=function(){var _a=this,hasError=_a.hasError,thrownError=_a.thrownError,_value=_a._value;if(hasError){throw thrownError}this._throwIfClosed();return _value};BehaviorSubject.prototype.next=function(value){_super.prototype.next.call(this,this._value=value)};return BehaviorSubject}(_Subject.Subject);exports.BehaviorSubject=BehaviorSubject},{"./Subject":572,tslib:814}],567:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NotificationKind=exports.Notification=void 0;exports.observeNotification=observeNotification;var _empty=require("./observable/empty");var _of=require("./observable/of");var _throwError=require("./observable/throwError");var _isFunction=require("./util/isFunction");var NotificationKind;exports.NotificationKind=NotificationKind;(function(NotificationKind){NotificationKind["NEXT"]="N";NotificationKind["ERROR"]="E";NotificationKind["COMPLETE"]="C"})(NotificationKind||(exports.NotificationKind=NotificationKind={}));var Notification=function(){function Notification(kind,value,error){this.kind=kind;this.value=value;this.error=error;this.hasValue=kind==="N"}Notification.prototype.observe=function(observer){return observeNotification(this,observer)};Notification.prototype.do=function(nextHandler,errorHandler,completeHandler){var _a=this,kind=_a.kind,value=_a.value,error=_a.error;return kind==="N"?nextHandler===null||nextHandler===void 0?void 0:nextHandler(value):kind==="E"?errorHandler===null||errorHandler===void 0?void 0:errorHandler(error):completeHandler===null||completeHandler===void 0?void 0:completeHandler()};Notification.prototype.accept=function(nextOrObserver,error,complete){var _a;return(0,_isFunction.isFunction)((_a=nextOrObserver)===null||_a===void 0?void 0:_a.next)?this.observe(nextOrObserver):this.do(nextOrObserver,error,complete)};Notification.prototype.toObservable=function(){var _a=this,kind=_a.kind,value=_a.value,error=_a.error;var result=kind==="N"?(0,_of.of)(value):kind==="E"?(0,_throwError.throwError)(function(){return error}):kind==="C"?_empty.EMPTY:0;if(!result){throw new TypeError("Unexpected notification kind "+kind)}return result};Notification.createNext=function(value){return new Notification("N",value)};Notification.createError=function(err){return new Notification("E",undefined,err)};Notification.createComplete=function(){return Notification.completeNotification};Notification.completeNotification=new Notification("C");return Notification}();exports.Notification=Notification;function observeNotification(notification,observer){var _a,_b,_c;var _d=notification,kind=_d.kind,value=_d.value,error=_d.error;if(typeof kind!=="string"){throw new TypeError('Invalid notification, missing "kind"')}kind==="N"?(_a=observer.next)===null||_a===void 0?void 0:_a.call(observer,value):kind==="E"?(_b=observer.error)===null||_b===void 0?void 0:_b.call(observer,error):(_c=observer.complete)===null||_c===void 0?void 0:_c.call(observer)}},{"./observable/empty":587,"./observable/of":599,"./observable/throwError":605,"./util/isFunction":773}],568:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.COMPLETE_NOTIFICATION=void 0;exports.createNotification=createNotification;exports.errorNotification=errorNotification;exports.nextNotification=nextNotification;var COMPLETE_NOTIFICATION=function(){return createNotification("C",undefined,undefined)}();exports.COMPLETE_NOTIFICATION=COMPLETE_NOTIFICATION;function errorNotification(error){return createNotification("E",undefined,error)}function nextNotification(value){return createNotification("N",value,undefined)}function createNotification(kind,value,error){return{kind:kind,value:value,error:error}}},{}],569:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Observable=void 0;var _Subscriber=require("./Subscriber");var _Subscription=require("./Subscription");var _observable=require("./symbol/observable");var _pipe=require("./util/pipe");var _config=require("./config");var _isFunction=require("./util/isFunction");var _errorContext=require("./util/errorContext");var Observable=function(){function Observable(subscribe){if(subscribe){this._subscribe=subscribe}}Observable.prototype.lift=function(operator){var observable=new Observable;observable.source=this;observable.operator=operator;return observable};Observable.prototype.subscribe=function(observerOrNext,error,complete){var _this=this;var subscriber=isSubscriber(observerOrNext)?observerOrNext:new _Subscriber.SafeSubscriber(observerOrNext,error,complete);(0,_errorContext.errorContext)(function(){var _a=_this,operator=_a.operator,source=_a.source;subscriber.add(operator?operator.call(subscriber,source):source?_this._subscribe(subscriber):_this._trySubscribe(subscriber))});return subscriber};Observable.prototype._trySubscribe=function(sink){try{return this._subscribe(sink)}catch(err){sink.error(err)}};Observable.prototype.forEach=function(next,promiseCtor){var _this=this;promiseCtor=getPromiseCtor(promiseCtor);return new promiseCtor(function(resolve,reject){var subscriber=new _Subscriber.SafeSubscriber({next:function(value){try{next(value)}catch(err){reject(err);subscriber.unsubscribe()}},error:reject,complete:resolve});_this.subscribe(subscriber)})};Observable.prototype._subscribe=function(subscriber){var _a;return(_a=this.source)===null||_a===void 0?void 0:_a.subscribe(subscriber)};Observable.prototype[_observable.observable]=function(){return this};Observable.prototype.pipe=function(){var operations=[];for(var _i=0;_i<arguments.length;_i++){operations[_i]=arguments[_i]}return(0,_pipe.pipeFromArray)(operations)(this)};Observable.prototype.toPromise=function(promiseCtor){var _this=this;promiseCtor=getPromiseCtor(promiseCtor);return new promiseCtor(function(resolve,reject){var value;_this.subscribe(function(x){return value=x},function(err){return reject(err)},function(){return resolve(value)})})};Observable.create=function(subscribe){return new Observable(subscribe)};return Observable}();exports.Observable=Observable;function getPromiseCtor(promiseCtor){var _a;return(_a=promiseCtor!==null&&promiseCtor!==void 0?promiseCtor:_config.config.Promise)!==null&&_a!==void 0?_a:Promise}function isObserver(value){return value&&(0,_isFunction.isFunction)(value.next)&&(0,_isFunction.isFunction)(value.error)&&(0,_isFunction.isFunction)(value.complete)}function isSubscriber(value){return value&&value instanceof _Subscriber.Subscriber||isObserver(value)&&(0,_Subscription.isSubscription)(value)}},{"./Subscriber":573,"./Subscription":574,"./config":575,"./symbol/observable":752,"./util/errorContext":767,"./util/isFunction":773,"./util/pipe":784}],570:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReplaySubject=void 0;var _tslib=require("tslib");var _Subject=require("./Subject");var _dateTimestampProvider=require("./scheduler/dateTimestampProvider");var ReplaySubject=function(_super){(0,_tslib.__extends)(ReplaySubject,_super);function ReplaySubject(_bufferSize,_windowTime,_timestampProvider){if(_bufferSize===void 0){_bufferSize=Infinity}if(_windowTime===void 0){_windowTime=Infinity}if(_timestampProvider===void 0){_timestampProvider=_dateTimestampProvider.dateTimestampProvider}var _this=_super.call(this)||this;_this._bufferSize=_bufferSize;_this._windowTime=_windowTime;_this._timestampProvider=_timestampProvider;_this._buffer=[];_this._infiniteTimeWindow=true;_this._infiniteTimeWindow=_windowTime===Infinity;_this._bufferSize=Math.max(1,_bufferSize);_this._windowTime=Math.max(1,_windowTime);return _this}ReplaySubject.prototype.next=function(value){var _a=this,isStopped=_a.isStopped,_buffer=_a._buffer,_infiniteTimeWindow=_a._infiniteTimeWindow,_timestampProvider=_a._timestampProvider,_windowTime=_a._windowTime;if(!isStopped){_buffer.push(value);!_infiniteTimeWindow&&_buffer.push(_timestampProvider.now()+_windowTime)}this._trimBuffer();_super.prototype.next.call(this,value)};ReplaySubject.prototype._subscribe=function(subscriber){this._throwIfClosed();this._trimBuffer();var subscription=this._innerSubscribe(subscriber);var _a=this,_infiniteTimeWindow=_a._infiniteTimeWindow,_buffer=_a._buffer;var copy=_buffer.slice();for(var i=0;i<copy.length&&!subscriber.closed;i+=_infiniteTimeWindow?1:2){subscriber.next(copy[i])}this._checkFinalizedStatuses(subscriber);return subscription};ReplaySubject.prototype._trimBuffer=function(){var _a=this,_bufferSize=_a._bufferSize,_timestampProvider=_a._timestampProvider,_buffer=_a._buffer,_infiniteTimeWindow=_a._infiniteTimeWindow;var adjustedBufferSize=(_infiniteTimeWindow?1:2)*_bufferSize;_bufferSize<Infinity&&adjustedBufferSize<_buffer.length&&_buffer.splice(0,_buffer.length-adjustedBufferSize);if(!_infiniteTimeWindow){var now=_timestampProvider.now();var last=0;for(var i=1;i<_buffer.length&&_buffer[i]<=now;i+=2){last=i}last&&_buffer.splice(0,last+1)}};return ReplaySubject}(_Subject.Subject);exports.ReplaySubject=ReplaySubject},{"./Subject":572,"./scheduler/dateTimestampProvider":745,tslib:814}],571:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Scheduler=void 0;var _dateTimestampProvider=require("./scheduler/dateTimestampProvider");var Scheduler=function(){function Scheduler(schedulerActionCtor,now){if(now===void 0){now=Scheduler.now}this.schedulerActionCtor=schedulerActionCtor;this.now=now}Scheduler.prototype.schedule=function(work,delay,state){if(delay===void 0){delay=0}return new this.schedulerActionCtor(this,work).schedule(state,delay)};Scheduler.now=_dateTimestampProvider.dateTimestampProvider.now;return Scheduler}();exports.Scheduler=Scheduler},{"./scheduler/dateTimestampProvider":745}],572:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Subject=exports.AnonymousSubject=void 0;var _tslib=require("tslib");var _Observable=require("./Observable");var _Subscription=require("./Subscription");var _ObjectUnsubscribedError=require("./util/ObjectUnsubscribedError");var _arrRemove=require("./util/arrRemove");var _errorContext=require("./util/errorContext");var Subject=function(_super){(0,_tslib.__extends)(Subject,_super);function Subject(){var _this=_super.call(this)||this;_this.closed=false;_this.currentObservers=null;_this.observers=[];_this.isStopped=false;_this.hasError=false;_this.thrownError=null;return _this}Subject.prototype.lift=function(operator){var subject=new AnonymousSubject(this,this);subject.operator=operator;return subject};Subject.prototype._throwIfClosed=function(){if(this.closed){throw new _ObjectUnsubscribedError.ObjectUnsubscribedError}};Subject.prototype.next=function(value){var _this=this;(0,_errorContext.errorContext)(function(){var e_1,_a;_this._throwIfClosed();if(!_this.isStopped){if(!_this.currentObservers){_this.currentObservers=Array.from(_this.observers)}try{for(var _b=(0,_tslib.__values)(_this.currentObservers),_c=_b.next();!_c.done;_c=_b.next()){var observer=_c.value;observer.next(value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_1)throw e_1.error}}}})};Subject.prototype.error=function(err){var _this=this;(0,_errorContext.errorContext)(function(){_this._throwIfClosed();if(!_this.isStopped){_this.hasError=_this.isStopped=true;_this.thrownError=err;var observers=_this.observers;while(observers.length){observers.shift().error(err)}}})};Subject.prototype.complete=function(){var _this=this;(0,_errorContext.errorContext)(function(){_this._throwIfClosed();if(!_this.isStopped){_this.isStopped=true;var observers=_this.observers;while(observers.length){observers.shift().complete()}}})};Subject.prototype.unsubscribe=function(){this.isStopped=this.closed=true;this.observers=this.currentObservers=null};Object.defineProperty(Subject.prototype,"observed",{get:function(){var _a;return((_a=this.observers)===null||_a===void 0?void 0:_a.length)>0},enumerable:false,configurable:true});Subject.prototype._trySubscribe=function(subscriber){this._throwIfClosed();return _super.prototype._trySubscribe.call(this,subscriber)};Subject.prototype._subscribe=function(subscriber){this._throwIfClosed();this._checkFinalizedStatuses(subscriber);return this._innerSubscribe(subscriber)};Subject.prototype._innerSubscribe=function(subscriber){var _this=this;var _a=this,hasError=_a.hasError,isStopped=_a.isStopped,observers=_a.observers;if(hasError||isStopped){return _Subscription.EMPTY_SUBSCRIPTION}this.currentObservers=null;observers.push(subscriber);return new _Subscription.Subscription(function(){_this.currentObservers=null;(0,_arrRemove.arrRemove)(observers,subscriber)})};Subject.prototype._checkFinalizedStatuses=function(subscriber){var _a=this,hasError=_a.hasError,thrownError=_a.thrownError,isStopped=_a.isStopped;if(hasError){subscriber.error(thrownError)}else if(isStopped){subscriber.complete()}};Subject.prototype.asObservable=function(){var observable=new _Observable.Observable;observable.source=this;return observable};Subject.create=function(destination,source){return new AnonymousSubject(destination,source)};return Subject}(_Observable.Observable);exports.Subject=Subject;var AnonymousSubject=function(_super){(0,_tslib.__extends)(AnonymousSubject,_super);function AnonymousSubject(destination,source){var _this=_super.call(this)||this;_this.destination=destination;_this.source=source;return _this}AnonymousSubject.prototype.next=function(value){var _a,_b;(_b=(_a=this.destination)===null||_a===void 0?void 0:_a.next)===null||_b===void 0?void 0:_b.call(_a,value)};AnonymousSubject.prototype.error=function(err){var _a,_b;(_b=(_a=this.destination)===null||_a===void 0?void 0:_a.error)===null||_b===void 0?void 0:_b.call(_a,err)};AnonymousSubject.prototype.complete=function(){var _a,_b;(_b=(_a=this.destination)===null||_a===void 0?void 0:_a.complete)===null||_b===void 0?void 0:_b.call(_a)};AnonymousSubject.prototype._subscribe=function(subscriber){var _a,_b;return(_b=(_a=this.source)===null||_a===void 0?void 0:_a.subscribe(subscriber))!==null&&_b!==void 0?_b:_Subscription.EMPTY_SUBSCRIPTION};return AnonymousSubject}(Subject);exports.AnonymousSubject=AnonymousSubject},{"./Observable":569,"./Subscription":574,"./util/ObjectUnsubscribedError":758,"./util/arrRemove":764,"./util/errorContext":767,tslib:814}],573:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Subscriber=exports.SafeSubscriber=exports.EMPTY_OBSERVER=void 0;var _tslib=require("tslib");var _isFunction=require("./util/isFunction");var _Subscription=require("./Subscription");var _config=require("./config");var _reportUnhandledError=require("./util/reportUnhandledError");var _noop=require("./util/noop");var _NotificationFactories=require("./NotificationFactories");var _timeoutProvider=require("./scheduler/timeoutProvider");var _errorContext=require("./util/errorContext");var Subscriber=function(_super){(0,_tslib.__extends)(Subscriber,_super);function Subscriber(destination){var _this=_super.call(this)||this;_this.isStopped=false;if(destination){_this.destination=destination;if((0,_Subscription.isSubscription)(destination)){destination.add(_this)}}else{_this.destination=EMPTY_OBSERVER}return _this}Subscriber.create=function(next,error,complete){return new SafeSubscriber(next,error,complete)};Subscriber.prototype.next=function(value){if(this.isStopped){handleStoppedNotification((0,_NotificationFactories.nextNotification)(value),this)}else{this._next(value)}};Subscriber.prototype.error=function(err){if(this.isStopped){handleStoppedNotification((0,_NotificationFactories.errorNotification)(err),this)}else{this.isStopped=true;this._error(err)}};Subscriber.prototype.complete=function(){if(this.isStopped){handleStoppedNotification(_NotificationFactories.COMPLETE_NOTIFICATION,this)}else{this.isStopped=true;this._complete()}};Subscriber.prototype.unsubscribe=function(){if(!this.closed){this.isStopped=true;_super.prototype.unsubscribe.call(this);this.destination=null}};Subscriber.prototype._next=function(value){this.destination.next(value)};Subscriber.prototype._error=function(err){try{this.destination.error(err)}finally{this.unsubscribe()}};Subscriber.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}};return Subscriber}(_Subscription.Subscription);exports.Subscriber=Subscriber;var _bind=Function.prototype.bind;function bind(fn,thisArg){return _bind.call(fn,thisArg)}var ConsumerObserver=function(){function ConsumerObserver(partialObserver){this.partialObserver=partialObserver}ConsumerObserver.prototype.next=function(value){var partialObserver=this.partialObserver;if(partialObserver.next){try{partialObserver.next(value)}catch(error){handleUnhandledError(error)}}};ConsumerObserver.prototype.error=function(err){var partialObserver=this.partialObserver;if(partialObserver.error){try{partialObserver.error(err)}catch(error){handleUnhandledError(error)}}else{handleUnhandledError(err)}};ConsumerObserver.prototype.complete=function(){var partialObserver=this.partialObserver;if(partialObserver.complete){try{partialObserver.complete()}catch(error){handleUnhandledError(error)}}};return ConsumerObserver}();var SafeSubscriber=function(_super){(0,_tslib.__extends)(SafeSubscriber,_super);function SafeSubscriber(observerOrNext,error,complete){var _this=_super.call(this)||this;var partialObserver;if((0,_isFunction.isFunction)(observerOrNext)||!observerOrNext){partialObserver={next:observerOrNext!==null&&observerOrNext!==void 0?observerOrNext:undefined,error:error!==null&&error!==void 0?error:undefined,complete:complete!==null&&complete!==void 0?complete:undefined}}else{var context_1;if(_this&&_config.config.useDeprecatedNextContext){context_1=Object.create(observerOrNext);context_1.unsubscribe=function(){return _this.unsubscribe()};partialObserver={next:observerOrNext.next&&bind(observerOrNext.next,context_1),error:observerOrNext.error&&bind(observerOrNext.error,context_1),complete:observerOrNext.complete&&bind(observerOrNext.complete,context_1)}}else{partialObserver=observerOrNext}}_this.destination=new ConsumerObserver(partialObserver);return _this}return SafeSubscriber}(Subscriber);exports.SafeSubscriber=SafeSubscriber;function handleUnhandledError(error){if(_config.config.useDeprecatedSynchronousErrorHandling){(0,_errorContext.captureError)(error)}else{(0,_reportUnhandledError.reportUnhandledError)(error)}}function defaultErrorHandler(err){throw err}function handleStoppedNotification(notification,subscriber){var onStoppedNotification=_config.config.onStoppedNotification;onStoppedNotification&&_timeoutProvider.timeoutProvider.setTimeout(function(){return onStoppedNotification(notification,subscriber)})}var EMPTY_OBSERVER={closed:true,next:_noop.noop,error:defaultErrorHandler,complete:_noop.noop};exports.EMPTY_OBSERVER=EMPTY_OBSERVER},{"./NotificationFactories":568,"./Subscription":574,"./config":575,"./scheduler/timeoutProvider":750,"./util/errorContext":767,"./util/isFunction":773,"./util/noop":782,"./util/reportUnhandledError":785,tslib:814}],574:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Subscription=exports.EMPTY_SUBSCRIPTION=void 0;exports.isSubscription=isSubscription;var _tslib=require("tslib");var _isFunction=require("./util/isFunction");var _UnsubscriptionError=require("./util/UnsubscriptionError");var _arrRemove=require("./util/arrRemove");var Subscription=function(){function Subscription(initialTeardown){this.initialTeardown=initialTeardown;this.closed=false;this._parentage=null;this._finalizers=null}Subscription.prototype.unsubscribe=function(){var e_1,_a,e_2,_b;var errors;if(!this.closed){this.closed=true;var _parentage=this._parentage;if(_parentage){this._parentage=null;if(Array.isArray(_parentage)){try{for(var _parentage_1=(0,_tslib.__values)(_parentage),_parentage_1_1=_parentage_1.next();!_parentage_1_1.done;_parentage_1_1=_parentage_1.next()){var parent_1=_parentage_1_1.value;parent_1.remove(this)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(_parentage_1_1&&!_parentage_1_1.done&&(_a=_parentage_1.return))_a.call(_parentage_1)}finally{if(e_1)throw e_1.error}}}else{_parentage.remove(this)}}var initialFinalizer=this.initialTeardown;if((0,_isFunction.isFunction)(initialFinalizer)){try{initialFinalizer()}catch(e){errors=e instanceof _UnsubscriptionError.UnsubscriptionError?e.errors:[e]}}var _finalizers=this._finalizers;if(_finalizers){this._finalizers=null;try{for(var _finalizers_1=(0,_tslib.__values)(_finalizers),_finalizers_1_1=_finalizers_1.next();!_finalizers_1_1.done;_finalizers_1_1=_finalizers_1.next()){var finalizer=_finalizers_1_1.value;try{execFinalizer(finalizer)}catch(err){errors=errors!==null&&errors!==void 0?errors:[];if(err instanceof _UnsubscriptionError.UnsubscriptionError){errors=(0,_tslib.__spreadArray)((0,_tslib.__spreadArray)([],(0,_tslib.__read)(errors)),(0,_tslib.__read)(err.errors))}else{errors.push(err)}}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{if(_finalizers_1_1&&!_finalizers_1_1.done&&(_b=_finalizers_1.return))_b.call(_finalizers_1)}finally{if(e_2)throw e_2.error}}}if(errors){throw new _UnsubscriptionError.UnsubscriptionError(errors)}}};Subscription.prototype.add=function(teardown){var _a;if(teardown&&teardown!==this){if(this.closed){execFinalizer(teardown)}else{if(teardown instanceof Subscription){if(teardown.closed||teardown._hasParent(this)){return}teardown._addParent(this)}(this._finalizers=(_a=this._finalizers)!==null&&_a!==void 0?_a:[]).push(teardown)}}};Subscription.prototype._hasParent=function(parent){var _parentage=this._parentage;return _parentage===parent||Array.isArray(_parentage)&&_parentage.includes(parent)};Subscription.prototype._addParent=function(parent){var _parentage=this._parentage;this._parentage=Array.isArray(_parentage)?(_parentage.push(parent),_parentage):_parentage?[_parentage,parent]:parent};Subscription.prototype._removeParent=function(parent){var _parentage=this._parentage;if(_parentage===parent){this._parentage=null}else if(Array.isArray(_parentage)){(0,_arrRemove.arrRemove)(_parentage,parent)}};Subscription.prototype.remove=function(teardown){var _finalizers=this._finalizers;_finalizers&&(0,_arrRemove.arrRemove)(_finalizers,teardown);if(teardown instanceof Subscription){teardown._removeParent(this)}};Subscription.EMPTY=function(){var empty=new Subscription;empty.closed=true;return empty}();return Subscription}();exports.Subscription=Subscription;var EMPTY_SUBSCRIPTION=Subscription.EMPTY;exports.EMPTY_SUBSCRIPTION=EMPTY_SUBSCRIPTION;function isSubscription(value){return value instanceof Subscription||value&&"closed"in value&&(0,_isFunction.isFunction)(value.remove)&&(0,_isFunction.isFunction)(value.add)&&(0,_isFunction.isFunction)(value.unsubscribe)}function execFinalizer(finalizer){if((0,_isFunction.isFunction)(finalizer)){finalizer()}else{finalizer.unsubscribe()}}},{"./util/UnsubscriptionError":760,"./util/arrRemove":764,"./util/isFunction":773,tslib:814}],575:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.config=void 0;var config={onUnhandledError:null,onStoppedNotification:null,Promise:undefined,useDeprecatedSynchronousErrorHandling:false,useDeprecatedNextContext:false};exports.config=config},{}],576:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.firstValueFrom=firstValueFrom;var _EmptyError=require("./util/EmptyError");var _Subscriber=require("./Subscriber");function firstValueFrom(source,config){var hasConfig=typeof config==="object";return new Promise(function(resolve,reject){var subscriber=new _Subscriber.SafeSubscriber({next:function(value){resolve(value);subscriber.unsubscribe()},error:reject,complete:function(){if(hasConfig){resolve(config.defaultValue)}else{reject(new _EmptyError.EmptyError)}}});source.subscribe(subscriber)})}},{"./Subscriber":573,"./util/EmptyError":755}],577:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.lastValueFrom=lastValueFrom;var _EmptyError=require("./util/EmptyError");function lastValueFrom(source,config){var hasConfig=typeof config==="object";return new Promise(function(resolve,reject){var _hasValue=false;var _value;source.subscribe({next:function(value){_value=value;_hasValue=true},error:reject,complete:function(){if(_hasValue){resolve(_value)}else if(hasConfig){resolve(config.defaultValue)}else{reject(new _EmptyError.EmptyError)}}})})}},{"./util/EmptyError":755}],578:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConnectableObservable=void 0;var _tslib=require("tslib");var _Observable=require("../Observable");var _Subscription=require("../Subscription");var _refCount=require("../operators/refCount");var _OperatorSubscriber=require("../operators/OperatorSubscriber");var _lift=require("../util/lift");var ConnectableObservable=function(_super){(0,_tslib.__extends)(ConnectableObservable,_super);function ConnectableObservable(source,subjectFactory){var _this=_super.call(this)||this;_this.source=source;_this.subjectFactory=subjectFactory;_this._subject=null;_this._refCount=0;_this._connection=null;if((0,_lift.hasLift)(source)){_this.lift=source.lift}return _this}ConnectableObservable.prototype._subscribe=function(subscriber){return this.getSubject().subscribe(subscriber)};ConnectableObservable.prototype.getSubject=function(){var subject=this._subject;if(!subject||subject.isStopped){this._subject=this.subjectFactory()}return this._subject};ConnectableObservable.prototype._teardown=function(){this._refCount=0;var _connection=this._connection;this._subject=this._connection=null;_connection===null||_connection===void 0?void 0:_connection.unsubscribe()};ConnectableObservable.prototype.connect=function(){var _this=this;var connection=this._connection;if(!connection){connection=this._connection=new _Subscription.Subscription;var subject_1=this.getSubject();connection.add(this.source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subject_1,undefined,function(){_this._teardown();subject_1.complete()},function(err){_this._teardown();subject_1.error(err)},function(){return _this._teardown()})));if(connection.closed){this._connection=null;connection=_Subscription.Subscription.EMPTY}}return connection};ConnectableObservable.prototype.refCount=function(){return(0,_refCount.refCount)()(this)};return ConnectableObservable}(_Observable.Observable);exports.ConnectableObservable=ConnectableObservable},{"../Observable":569,"../Subscription":574,"../operators/OperatorSubscriber":609,"../operators/refCount":679,"../util/lift":780,tslib:814}],579:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bindCallback=bindCallback;var _bindCallbackInternals=require("./bindCallbackInternals");function bindCallback(callbackFunc,resultSelector,scheduler){return(0,_bindCallbackInternals.bindCallbackInternals)(false,callbackFunc,resultSelector,scheduler)}},{"./bindCallbackInternals":580}],580:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bindCallbackInternals=bindCallbackInternals;var _tslib=require("tslib");var _isScheduler=require("../util/isScheduler");var _Observable=require("../Observable");var _subscribeOn=require("../operators/subscribeOn");var _mapOneOrManyArgs=require("../util/mapOneOrManyArgs");var _observeOn=require("../operators/observeOn");var _AsyncSubject=require("../AsyncSubject");function bindCallbackInternals(isNodeStyle,callbackFunc,resultSelector,scheduler){if(resultSelector){if((0,_isScheduler.isScheduler)(resultSelector)){scheduler=resultSelector}else{return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return bindCallbackInternals(isNodeStyle,callbackFunc,scheduler).apply(this,args).pipe((0,_mapOneOrManyArgs.mapOneOrManyArgs)(resultSelector))}}}if(scheduler){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return bindCallbackInternals(isNodeStyle,callbackFunc).apply(this,args).pipe((0,_subscribeOn.subscribeOn)(scheduler),(0,_observeOn.observeOn)(scheduler))}}return function(){var _this=this;var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var subject=new _AsyncSubject.AsyncSubject;var uninitialized=true;return new _Observable.Observable(function(subscriber){var subs=subject.subscribe(subscriber);if(uninitialized){uninitialized=false;var isAsync_1=false;var isComplete_1=false;callbackFunc.apply(_this,(0,_tslib.__spreadArray)((0,_tslib.__spreadArray)([],(0,_tslib.__read)(args)),[function(){var results=[];for(var _i=0;_i<arguments.length;_i++){results[_i]=arguments[_i]}if(isNodeStyle){var err=results.shift();if(err!=null){subject.error(err);return}}subject.next(1<results.length?results:results[0]);isComplete_1=true;if(isAsync_1){subject.complete()}}]));if(isComplete_1){subject.complete()}isAsync_1=true}return subs})}}},{"../AsyncSubject":565,"../Observable":569,"../operators/observeOn":669,"../operators/subscribeOn":697,"../util/isScheduler":779,"../util/mapOneOrManyArgs":781,tslib:814}],581:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bindNodeCallback=bindNodeCallback;var _bindCallbackInternals=require("./bindCallbackInternals");function bindNodeCallback(callbackFunc,resultSelector,scheduler){return(0,_bindCallbackInternals.bindCallbackInternals)(true,callbackFunc,resultSelector,scheduler)}},{"./bindCallbackInternals":580}],582:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.combineLatest=combineLatest;exports.combineLatestInit=combineLatestInit;var _Observable=require("../Observable");var _argsArgArrayOrObject=require("../util/argsArgArrayOrObject");var _from=require("./from");var _identity=require("../util/identity");var _mapOneOrManyArgs=require("../util/mapOneOrManyArgs");var _args=require("../util/args");var _createObject=require("../util/createObject");var _OperatorSubscriber=require("../operators/OperatorSubscriber");var _executeSchedule=require("../util/executeSchedule");function combineLatest(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var scheduler=(0,_args.popScheduler)(args);var resultSelector=(0,_args.popResultSelector)(args);var _a=(0,_argsArgArrayOrObject.argsArgArrayOrObject)(args),observables=_a.args,keys=_a.keys;if(observables.length===0){return(0,_from.from)([],scheduler)}var result=new _Observable.Observable(combineLatestInit(observables,scheduler,keys?function(values){return(0,_createObject.createObject)(keys,values)}:_identity.identity));return resultSelector?result.pipe((0,_mapOneOrManyArgs.mapOneOrManyArgs)(resultSelector)):result}function combineLatestInit(observables,scheduler,valueTransform){if(valueTransform===void 0){valueTransform=_identity.identity}return function(subscriber){maybeSchedule(scheduler,function(){var length=observables.length;var values=new Array(length);var active=length;var remainingFirstValues=length;var _loop_1=function(i){maybeSchedule(scheduler,function(){var source=(0,_from.from)(observables[i],scheduler);var hasFirstValue=false;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){values[i]=value;if(!hasFirstValue){hasFirstValue=true;remainingFirstValues--}if(!remainingFirstValues){subscriber.next(valueTransform(values.slice()))}},function(){if(!--active){subscriber.complete()}}))},subscriber)};for(var i=0;i<length;i++){_loop_1(i)}},subscriber)}}function maybeSchedule(scheduler,execute,subscription){if(scheduler){(0,_executeSchedule.executeSchedule)(subscription,scheduler,execute)}else{execute()}}},{"../Observable":569,"../operators/OperatorSubscriber":609,"../util/args":761,"../util/argsArgArrayOrObject":762,"../util/createObject":766,"../util/executeSchedule":768,"../util/identity":769,"../util/mapOneOrManyArgs":781,"./from":589}],583:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.concat=concat;var _concatAll=require("../operators/concatAll");var _args=require("../util/args");var _from=require("./from");function concat(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return(0,_concatAll.concatAll)()((0,_from.from)(args,(0,_args.popScheduler)(args)))}},{"../operators/concatAll":623,"../util/args":761,"./from":589}],584:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.connectable=connectable;var _Subject=require("../Subject");var _Observable=require("../Observable");var _defer=require("./defer");var DEFAULT_CONFIG={connector:function(){return new _Subject.Subject},resetOnDisconnect:true};function connectable(source,config){if(config===void 0){config=DEFAULT_CONFIG}var connection=null;var connector=config.connector,_a=config.resetOnDisconnect,resetOnDisconnect=_a===void 0?true:_a;var subject=connector();var result=new _Observable.Observable(function(subscriber){return subject.subscribe(subscriber)});result.connect=function(){if(!connection||connection.closed){connection=(0,_defer.defer)(function(){return source}).subscribe(subject);if(resetOnDisconnect){connection.add(function(){return subject=connector()})}}return connection};return result}},{"../Observable":569,"../Subject":572,"./defer":585}],585:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defer=defer;var _Observable=require("../Observable");var _innerFrom=require("./innerFrom");function defer(observableFactory){return new _Observable.Observable(function(subscriber){(0,_innerFrom.innerFrom)(observableFactory()).subscribe(subscriber)})}},{"../Observable":569,"./innerFrom":595}],586:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.animationFrames=animationFrames;var _Observable=require("../../Observable");var _performanceTimestampProvider=require("../../scheduler/performanceTimestampProvider");var _animationFrameProvider=require("../../scheduler/animationFrameProvider");function animationFrames(timestampProvider){return timestampProvider?animationFramesFactory(timestampProvider):DEFAULT_ANIMATION_FRAMES}function animationFramesFactory(timestampProvider){return new _Observable.Observable(function(subscriber){var provider=timestampProvider||_performanceTimestampProvider.performanceTimestampProvider;var start=provider.now();var id=0;var run=function(){if(!subscriber.closed){id=_animationFrameProvider.animationFrameProvider.requestAnimationFrame(function(timestamp){id=0;var now=provider.now();subscriber.next({timestamp:timestampProvider?now:timestamp,elapsed:now-start});run()})}};run();return function(){if(id){_animationFrameProvider.animationFrameProvider.cancelAnimationFrame(id)}}})}var DEFAULT_ANIMATION_FRAMES=animationFramesFactory()},{"../../Observable":569,"../../scheduler/animationFrameProvider":742,"../../scheduler/performanceTimestampProvider":748}],587:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EMPTY=void 0;exports.empty=empty;var _Observable=require("../Observable");var EMPTY=new _Observable.Observable(function(subscriber){return subscriber.complete()});exports.EMPTY=EMPTY;function empty(scheduler){return scheduler?emptyScheduled(scheduler):EMPTY}function emptyScheduled(scheduler){return new _Observable.Observable(function(subscriber){return scheduler.schedule(function(){return subscriber.complete()})})}},{"../Observable":569}],588:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.forkJoin=forkJoin;var _Observable=require("../Observable");var _argsArgArrayOrObject=require("../util/argsArgArrayOrObject");var _innerFrom=require("./innerFrom");var _args=require("../util/args");var _OperatorSubscriber=require("../operators/OperatorSubscriber");var _mapOneOrManyArgs=require("../util/mapOneOrManyArgs");var _createObject=require("../util/createObject");function forkJoin(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var resultSelector=(0,_args.popResultSelector)(args);var _a=(0,_argsArgArrayOrObject.argsArgArrayOrObject)(args),sources=_a.args,keys=_a.keys;var result=new _Observable.Observable(function(subscriber){var length=sources.length;if(!length){subscriber.complete();return}var values=new Array(length);var remainingCompletions=length;var remainingEmissions=length;var _loop_1=function(sourceIndex){var hasValue=false;(0,_innerFrom.innerFrom)(sources[sourceIndex]).subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){if(!hasValue){hasValue=true;remainingEmissions--}values[sourceIndex]=value},function(){return remainingCompletions--},undefined,function(){if(!remainingCompletions||!hasValue){if(!remainingEmissions){subscriber.next(keys?(0,_createObject.createObject)(keys,values):values)}subscriber.complete()}}))};for(var sourceIndex=0;sourceIndex<length;sourceIndex++){_loop_1(sourceIndex)}});return resultSelector?result.pipe((0,_mapOneOrManyArgs.mapOneOrManyArgs)(resultSelector)):result}},{"../Observable":569,"../operators/OperatorSubscriber":609,"../util/args":761,"../util/argsArgArrayOrObject":762,"../util/createObject":766,"../util/mapOneOrManyArgs":781,"./innerFrom":595}],589:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.from=from;var _scheduled=require("../scheduled/scheduled");var _innerFrom=require("./innerFrom");function from(input,scheduler){return scheduler?(0,_scheduled.scheduled)(input,scheduler):(0,_innerFrom.innerFrom)(input)}},{"../scheduled/scheduled":730,"./innerFrom":595}],590:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fromEvent=fromEvent;var _tslib=require("tslib");var _innerFrom=require("../observable/innerFrom");var _Observable=require("../Observable");var _mergeMap=require("../operators/mergeMap");var _isArrayLike=require("../util/isArrayLike");var _isFunction=require("../util/isFunction");var _mapOneOrManyArgs=require("../util/mapOneOrManyArgs");var nodeEventEmitterMethods=["addListener","removeListener"];var eventTargetMethods=["addEventListener","removeEventListener"];var jqueryMethods=["on","off"];function fromEvent(target,eventName,options,resultSelector){if((0,_isFunction.isFunction)(options)){resultSelector=options;options=undefined}if(resultSelector){return fromEvent(target,eventName,options).pipe((0,_mapOneOrManyArgs.mapOneOrManyArgs)(resultSelector))}var _a=(0,_tslib.__read)(isEventTarget(target)?eventTargetMethods.map(function(methodName){return function(handler){return target[methodName](eventName,handler,options)}}):isNodeStyleEventEmitter(target)?nodeEventEmitterMethods.map(toCommonHandlerRegistry(target,eventName)):isJQueryStyleEventEmitter(target)?jqueryMethods.map(toCommonHandlerRegistry(target,eventName)):[],2),add=_a[0],remove=_a[1];if(!add){if((0,_isArrayLike.isArrayLike)(target)){return(0,_mergeMap.mergeMap)(function(subTarget){return fromEvent(subTarget,eventName,options)})((0,_innerFrom.innerFrom)(target))}}if(!add){throw new TypeError("Invalid event target")}return new _Observable.Observable(function(subscriber){var handler=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return subscriber.next(1<args.length?args:args[0])};add(handler);return function(){return remove(handler)}})}function toCommonHandlerRegistry(target,eventName){return function(methodName){return function(handler){return target[methodName](eventName,handler)}}}function isNodeStyleEventEmitter(target){return(0,_isFunction.isFunction)(target.addListener)&&(0,_isFunction.isFunction)(target.removeListener)}function isJQueryStyleEventEmitter(target){return(0,_isFunction.isFunction)(target.on)&&(0,_isFunction.isFunction)(target.off)}function isEventTarget(target){return(0,_isFunction.isFunction)(target.addEventListener)&&(0,_isFunction.isFunction)(target.removeEventListener)}},{"../Observable":569,"../observable/innerFrom":595,"../operators/mergeMap":663,"../util/isArrayLike":770,"../util/isFunction":773,"../util/mapOneOrManyArgs":781,tslib:814}],591:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fromEventPattern=fromEventPattern;var _Observable=require("../Observable");var _isFunction=require("../util/isFunction");var _mapOneOrManyArgs=require("../util/mapOneOrManyArgs");function fromEventPattern(addHandler,removeHandler,resultSelector){if(resultSelector){return fromEventPattern(addHandler,removeHandler).pipe((0,_mapOneOrManyArgs.mapOneOrManyArgs)(resultSelector))}return new _Observable.Observable(function(subscriber){var handler=function(){var e=[];for(var _i=0;_i<arguments.length;_i++){e[_i]=arguments[_i]}return subscriber.next(e.length===1?e[0]:e)};var retValue=addHandler(handler);return(0,_isFunction.isFunction)(removeHandler)?function(){return removeHandler(handler,retValue)}:undefined})}},{"../Observable":569,"../util/isFunction":773,"../util/mapOneOrManyArgs":781}],592:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fromSubscribable=fromSubscribable;var _Observable=require("../Observable");function fromSubscribable(subscribable){return new _Observable.Observable(function(subscriber){return subscribable.subscribe(subscriber)})}},{"../Observable":569}],593:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.generate=generate;var _tslib=require("tslib");var _identity=require("../util/identity");var _isScheduler=require("../util/isScheduler");var _defer=require("./defer");var _scheduleIterable=require("../scheduled/scheduleIterable");function generate(initialStateOrOptions,condition,iterate,resultSelectorOrScheduler,scheduler){var _a,_b;var resultSelector;var initialState;if(arguments.length===1){_a=initialStateOrOptions,initialState=_a.initialState,condition=_a.condition,iterate=_a.iterate,_b=_a.resultSelector,resultSelector=_b===void 0?_identity.identity:_b,scheduler=_a.scheduler}else{initialState=initialStateOrOptions;if(!resultSelectorOrScheduler||(0,_isScheduler.isScheduler)(resultSelectorOrScheduler)){resultSelector=_identity.identity;scheduler=resultSelectorOrScheduler}else{resultSelector=resultSelectorOrScheduler}}function gen(){var state;return(0,_tslib.__generator)(this,function(_a){switch(_a.label){case 0:state=initialState;_a.label=1;case 1:if(!(!condition||condition(state)))return[3,4];return[4,resultSelector(state)];case 2:_a.sent();_a.label=3;case 3:state=iterate(state);return[3,1];case 4:return[2]}})}return(0,_defer.defer)(scheduler?function(){return(0,_scheduleIterable.scheduleIterable)(gen(),scheduler)}:gen)}},{"../scheduled/scheduleIterable":726,"../util/identity":769,"../util/isScheduler":779,"./defer":585,tslib:814}],594:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.iif=iif;var _defer=require("./defer");function iif(condition,trueResult,falseResult){return(0,_defer.defer)(function(){return condition()?trueResult:falseResult})}},{"./defer":585}],595:[function(require,module,exports){(function(process){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fromArrayLike=fromArrayLike;exports.fromAsyncIterable=fromAsyncIterable;exports.fromInteropObservable=fromInteropObservable;exports.fromIterable=fromIterable;exports.fromPromise=fromPromise;exports.fromReadableStreamLike=fromReadableStreamLike;exports.innerFrom=innerFrom;var _tslib=require("tslib");var _isArrayLike=require("../util/isArrayLike");var _isPromise=require("../util/isPromise");var _Observable=require("../Observable");var _isInteropObservable=require("../util/isInteropObservable");var _isAsyncIterable=require("../util/isAsyncIterable");var _throwUnobservableError=require("../util/throwUnobservableError");var _isIterable=require("../util/isIterable");var _isReadableStreamLike=require("../util/isReadableStreamLike");var _isFunction=require("../util/isFunction");var _reportUnhandledError=require("../util/reportUnhandledError");var _observable=require("../symbol/observable");function innerFrom(input){if(input instanceof _Observable.Observable){return input}if(input!=null){if((0,_isInteropObservable.isInteropObservable)(input)){return fromInteropObservable(input)}if((0,_isArrayLike.isArrayLike)(input)){return fromArrayLike(input)}if((0,_isPromise.isPromise)(input)){return fromPromise(input)}if((0,_isAsyncIterable.isAsyncIterable)(input)){return fromAsyncIterable(input)}if((0,_isIterable.isIterable)(input)){return fromIterable(input)}if((0,_isReadableStreamLike.isReadableStreamLike)(input)){return fromReadableStreamLike(input)}}throw(0,_throwUnobservableError.createInvalidObservableTypeError)(input)}function fromInteropObservable(obj){return new _Observable.Observable(function(subscriber){var obs=obj[_observable.observable]();if((0,_isFunction.isFunction)(obs.subscribe)){return obs.subscribe(subscriber)}throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fromArrayLike(array){return new _Observable.Observable(function(subscriber){for(var i=0;i<array.length&&!subscriber.closed;i++){subscriber.next(array[i])}subscriber.complete()})}function fromPromise(promise){return new _Observable.Observable(function(subscriber){promise.then(function(value){if(!subscriber.closed){subscriber.next(value);subscriber.complete()}},function(err){return subscriber.error(err)}).then(null,_reportUnhandledError.reportUnhandledError)})}function fromIterable(iterable){return new _Observable.Observable(function(subscriber){var e_1,_a;try{for(var iterable_1=(0,_tslib.__values)(iterable),iterable_1_1=iterable_1.next();!iterable_1_1.done;iterable_1_1=iterable_1.next()){var value=iterable_1_1.value;subscriber.next(value);if(subscriber.closed){return}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(iterable_1_1&&!iterable_1_1.done&&(_a=iterable_1.return))_a.call(iterable_1)}finally{if(e_1)throw e_1.error}}subscriber.complete()})}function fromAsyncIterable(asyncIterable){return new _Observable.Observable(function(subscriber){process(asyncIterable,subscriber).catch(function(err){return subscriber.error(err)})})}function fromReadableStreamLike(readableStream){return fromAsyncIterable((0,_isReadableStreamLike.readableStreamLikeToAsyncGenerator)(readableStream))}function process(asyncIterable,subscriber){var asyncIterable_1,asyncIterable_1_1;var e_2,_a;return(0,_tslib.__awaiter)(this,void 0,void 0,function(){var value,e_2_1;return(0,_tslib.__generator)(this,function(_b){switch(_b.label){case 0:_b.trys.push([0,5,6,11]);asyncIterable_1=(0,_tslib.__asyncValues)(asyncIterable);_b.label=1;case 1:return[4,asyncIterable_1.next()];case 2:if(!(asyncIterable_1_1=_b.sent(),!asyncIterable_1_1.done))return[3,4];value=asyncIterable_1_1.value;subscriber.next(value);if(subscriber.closed){return[2]}_b.label=3;case 3:return[3,1];case 4:return[3,11];case 5:e_2_1=_b.sent();e_2={error:e_2_1};return[3,11];case 6:_b.trys.push([6,,9,10]);if(!(asyncIterable_1_1&&!asyncIterable_1_1.done&&(_a=asyncIterable_1.return)))return[3,8];return[4,_a.call(asyncIterable_1)];case 7:_b.sent();_b.label=8;case 8:return[3,10];case 9:if(e_2)throw e_2.error;return[7];case 10:return[7];case 11:subscriber.complete();return[2]}})})}}).call(this)}).call(this,require("_process"))},{"../Observable":569,"../symbol/observable":752,"../util/isArrayLike":770,"../util/isAsyncIterable":771,"../util/isFunction":773,"../util/isInteropObservable":774,"../util/isIterable":775,"../util/isPromise":777,"../util/isReadableStreamLike":778,"../util/reportUnhandledError":785,"../util/throwUnobservableError":786,_process:519,tslib:814}],596:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.interval=interval;var _async=require("../scheduler/async");var _timer=require("./timer");function interval(period,scheduler){if(period===void 0){period=0}if(scheduler===void 0){scheduler=_async.asyncScheduler}if(period<0){period=0}return(0,_timer.timer)(period,period,scheduler)}},{"../scheduler/async":744,"./timer":606}],597:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.merge=merge;var _mergeAll=require("../operators/mergeAll");var _innerFrom=require("./innerFrom");var _empty=require("./empty");var _args=require("../util/args");var _from=require("./from");function merge(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var scheduler=(0,_args.popScheduler)(args);var concurrent=(0,_args.popNumber)(args,Infinity);var sources=args;return!sources.length?_empty.EMPTY:sources.length===1?(0,_innerFrom.innerFrom)(sources[0]):(0,_mergeAll.mergeAll)(concurrent)((0,_from.from)(sources,scheduler))}},{"../operators/mergeAll":661,"../util/args":761,"./empty":587,"./from":589,"./innerFrom":595}],598:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NEVER=void 0;exports.never=never;var _Observable=require("../Observable");var _noop=require("../util/noop");var NEVER=new _Observable.Observable(_noop.noop);exports.NEVER=NEVER;function never(){return NEVER}},{"../Observable":569,"../util/noop":782}],599:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.of=of;var _args=require("../util/args");var _from=require("./from");function of(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var scheduler=(0,_args.popScheduler)(args);return(0,_from.from)(args,scheduler)}},{"../util/args":761,"./from":589}],600:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.onErrorResumeNext=onErrorResumeNext;var _Observable=require("../Observable");var _argsOrArgArray=require("../util/argsOrArgArray");var _OperatorSubscriber=require("../operators/OperatorSubscriber");var _noop=require("../util/noop");var _innerFrom=require("./innerFrom");function onErrorResumeNext(){var sources=[];for(var _i=0;_i<arguments.length;_i++){sources[_i]=arguments[_i]}var nextSources=(0,_argsOrArgArray.argsOrArgArray)(sources);return new _Observable.Observable(function(subscriber){var sourceIndex=0;var subscribeNext=function(){if(sourceIndex<nextSources.length){var nextSource=void 0;try{nextSource=(0,_innerFrom.innerFrom)(nextSources[sourceIndex++])}catch(err){subscribeNext();return}var innerSubscriber=new _OperatorSubscriber.OperatorSubscriber(subscriber,undefined,_noop.noop,_noop.noop);nextSource.subscribe(innerSubscriber);innerSubscriber.add(subscribeNext)}else{subscriber.complete()}};subscribeNext()})}},{"../Observable":569,"../operators/OperatorSubscriber":609,"../util/argsOrArgArray":763,"../util/noop":782,"./innerFrom":595}],601:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pairs=pairs;var _from=require("./from");function pairs(obj,scheduler){return(0,_from.from)(Object.entries(obj),scheduler)}},{"./from":589}],602:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.partition=partition;var _not=require("../util/not");var _filter=require("../operators/filter");var _innerFrom=require("./innerFrom");function partition(source,predicate,thisArg){return[(0,_filter.filter)(predicate,thisArg)((0,_innerFrom.innerFrom)(source)),(0,_filter.filter)((0,_not.not)(predicate,thisArg))((0,_innerFrom.innerFrom)(source))]}},{"../operators/filter":645,"../util/not":783,"./innerFrom":595}],603:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.race=race;exports.raceInit=raceInit;var _Observable=require("../Observable");var _innerFrom=require("./innerFrom");var _argsOrArgArray=require("../util/argsOrArgArray");var _OperatorSubscriber=require("../operators/OperatorSubscriber");function race(){var sources=[];for(var _i=0;_i<arguments.length;_i++){sources[_i]=arguments[_i]}sources=(0,_argsOrArgArray.argsOrArgArray)(sources);return sources.length===1?(0,_innerFrom.innerFrom)(sources[0]):new _Observable.Observable(raceInit(sources))}function raceInit(sources){return function(subscriber){var subscriptions=[];var _loop_1=function(i){subscriptions.push((0,_innerFrom.innerFrom)(sources[i]).subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){if(subscriptions){for(var s=0;s<subscriptions.length;s++){s!==i&&subscriptions[s].unsubscribe()}subscriptions=null}subscriber.next(value)})))};for(var i=0;subscriptions&&!subscriber.closed&&i<sources.length;i++){_loop_1(i)}}}},{"../Observable":569,"../operators/OperatorSubscriber":609,"../util/argsOrArgArray":763,"./innerFrom":595}],604:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.range=range;var _Observable=require("../Observable");var _empty=require("./empty");function range(start,count,scheduler){if(count==null){count=start;start=0}if(count<=0){return _empty.EMPTY}var end=count+start;return new _Observable.Observable(scheduler?function(subscriber){var n=start;return scheduler.schedule(function(){if(n<end){subscriber.next(n++);this.schedule()}else{subscriber.complete()}})}:function(subscriber){var n=start;while(n<end&&!subscriber.closed){subscriber.next(n++)}subscriber.complete()})}},{"../Observable":569,"./empty":587}],605:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.throwError=throwError;var _Observable=require("../Observable");var _isFunction=require("../util/isFunction");function throwError(errorOrErrorFactory,scheduler){var errorFactory=(0,_isFunction.isFunction)(errorOrErrorFactory)?errorOrErrorFactory:function(){return errorOrErrorFactory};var init=function(subscriber){return subscriber.error(errorFactory())};return new _Observable.Observable(scheduler?function(subscriber){return scheduler.schedule(init,0,subscriber)}:init)}},{"../Observable":569,"../util/isFunction":773}],606:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.timer=timer;var _Observable=require("../Observable");var _async=require("../scheduler/async");var _isScheduler=require("../util/isScheduler");var _isDate=require("../util/isDate");function timer(dueTime,intervalOrScheduler,scheduler){if(dueTime===void 0){dueTime=0}if(scheduler===void 0){scheduler=_async.async}var intervalDuration=-1;if(intervalOrScheduler!=null){if((0,_isScheduler.isScheduler)(intervalOrScheduler)){scheduler=intervalOrScheduler}else{intervalDuration=intervalOrScheduler}}return new _Observable.Observable(function(subscriber){var due=(0,_isDate.isValidDate)(dueTime)?+dueTime-scheduler.now():dueTime;if(due<0){due=0}var n=0;return scheduler.schedule(function(){if(!subscriber.closed){subscriber.next(n++);if(0<=intervalDuration){this.schedule(undefined,intervalDuration)}else{subscriber.complete()}}},due)})}},{"../Observable":569,"../scheduler/async":744,"../util/isDate":772,"../util/isScheduler":779}],607:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.using=using;var _Observable=require("../Observable");var _innerFrom=require("./innerFrom");var _empty=require("./empty");function using(resourceFactory,observableFactory){return new _Observable.Observable(function(subscriber){var resource=resourceFactory();var result=observableFactory(resource);var source=result?(0,_innerFrom.innerFrom)(result):_empty.EMPTY;source.subscribe(subscriber);return function(){if(resource){resource.unsubscribe()}}})}},{"../Observable":569,"./empty":587,"./innerFrom":595}],608:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.zip=zip;var _tslib=require("tslib");var _Observable=require("../Observable");var _innerFrom=require("./innerFrom");var _argsOrArgArray=require("../util/argsOrArgArray");var _empty=require("./empty");var _OperatorSubscriber=require("../operators/OperatorSubscriber");var _args=require("../util/args");function zip(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var resultSelector=(0,_args.popResultSelector)(args);var sources=(0,_argsOrArgArray.argsOrArgArray)(args);return sources.length?new _Observable.Observable(function(subscriber){var buffers=sources.map(function(){return[]});var completed=sources.map(function(){return false});subscriber.add(function(){buffers=completed=null});var _loop_1=function(sourceIndex){(0,_innerFrom.innerFrom)(sources[sourceIndex]).subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){buffers[sourceIndex].push(value);if(buffers.every(function(buffer){return buffer.length})){var result=buffers.map(function(buffer){return buffer.shift()});subscriber.next(resultSelector?resultSelector.apply(void 0,(0,_tslib.__spreadArray)([],(0,_tslib.__read)(result))):result);if(buffers.some(function(buffer,i){return!buffer.length&&completed[i]})){subscriber.complete()}}},function(){completed[sourceIndex]=true;!buffers[sourceIndex].length&&subscriber.complete()}))};for(var sourceIndex=0;!subscriber.closed&&sourceIndex<sources.length;sourceIndex++){_loop_1(sourceIndex)}return function(){buffers=completed=null}}):_empty.EMPTY}},{"../Observable":569,"../operators/OperatorSubscriber":609,"../util/args":761,"../util/argsOrArgArray":763,"./empty":587,"./innerFrom":595,tslib:814}],609:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OperatorSubscriber=void 0;exports.createOperatorSubscriber=createOperatorSubscriber;var _tslib=require("tslib");var _Subscriber=require("../Subscriber");function createOperatorSubscriber(destination,onNext,onComplete,onError,onFinalize){return new OperatorSubscriber(destination,onNext,onComplete,onError,onFinalize)}var OperatorSubscriber=function(_super){(0,_tslib.__extends)(OperatorSubscriber,_super);function OperatorSubscriber(destination,onNext,onComplete,onError,onFinalize,shouldUnsubscribe){var _this=_super.call(this,destination)||this;_this.onFinalize=onFinalize;_this.shouldUnsubscribe=shouldUnsubscribe;_this._next=onNext?function(value){try{onNext(value)}catch(err){destination.error(err)}}:_super.prototype._next;_this._error=onError?function(err){try{onError(err)}catch(err){destination.error(err)}finally{this.unsubscribe()}}:_super.prototype._error;_this._complete=onComplete?function(){try{onComplete()}catch(err){destination.error(err)}finally{this.unsubscribe()}}:_super.prototype._complete;return _this}OperatorSubscriber.prototype.unsubscribe=function(){var _a;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var closed_1=this.closed;_super.prototype.unsubscribe.call(this);!closed_1&&((_a=this.onFinalize)===null||_a===void 0?void 0:_a.call(this))}};return OperatorSubscriber}(_Subscriber.Subscriber);exports.OperatorSubscriber=OperatorSubscriber},{"../Subscriber":573,tslib:814}],610:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.audit=audit;var _lift=require("../util/lift");var _innerFrom=require("../observable/innerFrom");var _OperatorSubscriber=require("./OperatorSubscriber");function audit(durationSelector){return(0,_lift.operate)(function(source,subscriber){var hasValue=false;var lastValue=null;var durationSubscriber=null;var isComplete=false;var endDuration=function(){durationSubscriber===null||durationSubscriber===void 0?void 0:durationSubscriber.unsubscribe();durationSubscriber=null;if(hasValue){hasValue=false;var value=lastValue;lastValue=null;subscriber.next(value)}isComplete&&subscriber.complete()};var cleanupDuration=function(){durationSubscriber=null;isComplete&&subscriber.complete()};source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){hasValue=true;lastValue=value;if(!durationSubscriber){(0,_innerFrom.innerFrom)(durationSelector(value)).subscribe(durationSubscriber=(0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,endDuration,cleanupDuration))}},function(){isComplete=true;(!hasValue||!durationSubscriber||durationSubscriber.closed)&&subscriber.complete()}))})}},{"../observable/innerFrom":595,"../util/lift":780,"./OperatorSubscriber":609}],611:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.auditTime=auditTime;var _async=require("../scheduler/async");var _audit=require("./audit");var _timer=require("../observable/timer");function auditTime(duration,scheduler){if(scheduler===void 0){scheduler=_async.asyncScheduler}return(0,_audit.audit)(function(){return(0,_timer.timer)(duration,scheduler)})}},{"../observable/timer":606,"../scheduler/async":744,"./audit":610}],612:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buffer=buffer;var _lift=require("../util/lift");var _noop=require("../util/noop");var _OperatorSubscriber=require("./OperatorSubscriber");var _innerFrom=require("../observable/innerFrom");function buffer(closingNotifier){return(0,_lift.operate)(function(source,subscriber){var currentBuffer=[];source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){return currentBuffer.push(value)},function(){subscriber.next(currentBuffer);subscriber.complete()}));(0,_innerFrom.innerFrom)(closingNotifier).subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(){var b=currentBuffer;currentBuffer=[];subscriber.next(b)},_noop.noop));return function(){currentBuffer=null}})}},{"../observable/innerFrom":595,"../util/lift":780,"../util/noop":782,"./OperatorSubscriber":609}],613:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bufferCount=bufferCount;var _tslib=require("tslib");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");var _arrRemove=require("../util/arrRemove");function bufferCount(bufferSize,startBufferEvery){if(startBufferEvery===void 0){startBufferEvery=null}startBufferEvery=startBufferEvery!==null&&startBufferEvery!==void 0?startBufferEvery:bufferSize;return(0,_lift.operate)(function(source,subscriber){var buffers=[];var count=0;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){var e_1,_a,e_2,_b;var toEmit=null;if(count++%startBufferEvery===0){buffers.push([])}try{for(var buffers_1=(0,_tslib.__values)(buffers),buffers_1_1=buffers_1.next();!buffers_1_1.done;buffers_1_1=buffers_1.next()){var buffer=buffers_1_1.value;buffer.push(value);if(bufferSize<=buffer.length){toEmit=toEmit!==null&&toEmit!==void 0?toEmit:[];toEmit.push(buffer)}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(buffers_1_1&&!buffers_1_1.done&&(_a=buffers_1.return))_a.call(buffers_1)}finally{if(e_1)throw e_1.error}}if(toEmit){try{for(var toEmit_1=(0,_tslib.__values)(toEmit),toEmit_1_1=toEmit_1.next();!toEmit_1_1.done;toEmit_1_1=toEmit_1.next()){var buffer=toEmit_1_1.value;(0,_arrRemove.arrRemove)(buffers,buffer);subscriber.next(buffer)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{if(toEmit_1_1&&!toEmit_1_1.done&&(_b=toEmit_1.return))_b.call(toEmit_1)}finally{if(e_2)throw e_2.error}}}},function(){var e_3,_a;try{for(var buffers_2=(0,_tslib.__values)(buffers),buffers_2_1=buffers_2.next();!buffers_2_1.done;buffers_2_1=buffers_2.next()){var buffer=buffers_2_1.value;subscriber.next(buffer)}}catch(e_3_1){e_3={error:e_3_1}}finally{try{if(buffers_2_1&&!buffers_2_1.done&&(_a=buffers_2.return))_a.call(buffers_2)}finally{if(e_3)throw e_3.error}}subscriber.complete()},undefined,function(){buffers=null}))})}},{"../util/arrRemove":764,"../util/lift":780,"./OperatorSubscriber":609,tslib:814}],614:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bufferTime=bufferTime;var _tslib=require("tslib");var _Subscription=require("../Subscription");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");var _arrRemove=require("../util/arrRemove");var _async=require("../scheduler/async");var _args=require("../util/args");var _executeSchedule=require("../util/executeSchedule");function bufferTime(bufferTimeSpan){var _a,_b;var otherArgs=[];for(var _i=1;_i<arguments.length;_i++){otherArgs[_i-1]=arguments[_i]}var scheduler=(_a=(0,_args.popScheduler)(otherArgs))!==null&&_a!==void 0?_a:_async.asyncScheduler;var bufferCreationInterval=(_b=otherArgs[0])!==null&&_b!==void 0?_b:null;var maxBufferSize=otherArgs[1]||Infinity;return(0,_lift.operate)(function(source,subscriber){var bufferRecords=[];var restartOnEmit=false;var emit=function(record){var buffer=record.buffer,subs=record.subs;subs.unsubscribe();(0,_arrRemove.arrRemove)(bufferRecords,record);subscriber.next(buffer);restartOnEmit&&startBuffer()};var startBuffer=function(){if(bufferRecords){var subs=new _Subscription.Subscription;subscriber.add(subs);var buffer=[];var record_1={buffer:buffer,subs:subs};bufferRecords.push(record_1);(0,_executeSchedule.executeSchedule)(subs,scheduler,function(){return emit(record_1)},bufferTimeSpan)}};if(bufferCreationInterval!==null&&bufferCreationInterval>=0){(0,_executeSchedule.executeSchedule)(subscriber,scheduler,startBuffer,bufferCreationInterval,true)}else{restartOnEmit=true}startBuffer();var bufferTimeSubscriber=(0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){var e_1,_a;var recordsCopy=bufferRecords.slice();try{for(var recordsCopy_1=(0,_tslib.__values)(recordsCopy),recordsCopy_1_1=recordsCopy_1.next();!recordsCopy_1_1.done;recordsCopy_1_1=recordsCopy_1.next()){var record=recordsCopy_1_1.value;var buffer=record.buffer;buffer.push(value);maxBufferSize<=buffer.length&&emit(record)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(recordsCopy_1_1&&!recordsCopy_1_1.done&&(_a=recordsCopy_1.return))_a.call(recordsCopy_1)}finally{if(e_1)throw e_1.error}}},function(){while(bufferRecords===null||bufferRecords===void 0?void 0:bufferRecords.length){subscriber.next(bufferRecords.shift().buffer)}bufferTimeSubscriber===null||bufferTimeSubscriber===void 0?void 0:bufferTimeSubscriber.unsubscribe();subscriber.complete();subscriber.unsubscribe()},undefined,function(){return bufferRecords=null});source.subscribe(bufferTimeSubscriber)})}},{"../Subscription":574,"../scheduler/async":744,"../util/args":761,"../util/arrRemove":764,"../util/executeSchedule":768,"../util/lift":780,"./OperatorSubscriber":609,tslib:814}],615:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bufferToggle=bufferToggle;var _tslib=require("tslib");var _Subscription=require("../Subscription");var _lift=require("../util/lift");var _innerFrom=require("../observable/innerFrom");var _OperatorSubscriber=require("./OperatorSubscriber");var _noop=require("../util/noop");var _arrRemove=require("../util/arrRemove");function bufferToggle(openings,closingSelector){return(0,_lift.operate)(function(source,subscriber){var buffers=[];(0,_innerFrom.innerFrom)(openings).subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(openValue){var buffer=[];buffers.push(buffer);var closingSubscription=new _Subscription.Subscription;var emitBuffer=function(){(0,_arrRemove.arrRemove)(buffers,buffer);subscriber.next(buffer);closingSubscription.unsubscribe()};closingSubscription.add((0,_innerFrom.innerFrom)(closingSelector(openValue)).subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,emitBuffer,_noop.noop)))},_noop.noop));source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){var e_1,_a;try{for(var buffers_1=(0,_tslib.__values)(buffers),buffers_1_1=buffers_1.next();!buffers_1_1.done;buffers_1_1=buffers_1.next()){var buffer=buffers_1_1.value;buffer.push(value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(buffers_1_1&&!buffers_1_1.done&&(_a=buffers_1.return))_a.call(buffers_1)}finally{if(e_1)throw e_1.error}}},function(){while(buffers.length>0){subscriber.next(buffers.shift())}subscriber.complete()}))})}},{"../Subscription":574,"../observable/innerFrom":595,"../util/arrRemove":764,"../util/lift":780,"../util/noop":782,"./OperatorSubscriber":609,tslib:814}],616:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bufferWhen=bufferWhen;var _lift=require("../util/lift");var _noop=require("../util/noop");var _OperatorSubscriber=require("./OperatorSubscriber");var _innerFrom=require("../observable/innerFrom");function bufferWhen(closingSelector){return(0,_lift.operate)(function(source,subscriber){var buffer=null;var closingSubscriber=null;var openBuffer=function(){closingSubscriber===null||closingSubscriber===void 0?void 0:closingSubscriber.unsubscribe();var b=buffer;buffer=[];b&&subscriber.next(b);(0,_innerFrom.innerFrom)(closingSelector()).subscribe(closingSubscriber=(0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,openBuffer,_noop.noop))};openBuffer();source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){return buffer===null||buffer===void 0?void 0:buffer.push(value)},function(){buffer&&subscriber.next(buffer);subscriber.complete()},undefined,function(){return buffer=closingSubscriber=null}))})}},{"../observable/innerFrom":595,"../util/lift":780,"../util/noop":782,"./OperatorSubscriber":609}],617:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.catchError=catchError;var _innerFrom=require("../observable/innerFrom");var _OperatorSubscriber=require("./OperatorSubscriber");var _lift=require("../util/lift");function catchError(selector){return(0,_lift.operate)(function(source,subscriber){var innerSub=null;var syncUnsub=false;var handledResult;innerSub=source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,undefined,undefined,function(err){handledResult=(0,_innerFrom.innerFrom)(selector(err,catchError(selector)(source)));if(innerSub){innerSub.unsubscribe();innerSub=null;handledResult.subscribe(subscriber)}else{syncUnsub=true}}));if(syncUnsub){innerSub.unsubscribe();innerSub=null;handledResult.subscribe(subscriber)}})}},{"../observable/innerFrom":595,"../util/lift":780,"./OperatorSubscriber":609}],618:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.combineAll=void 0;var _combineLatestAll=require("./combineLatestAll");var combineAll=_combineLatestAll.combineLatestAll;exports.combineAll=combineAll},{"./combineLatestAll":620}],619:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.combineLatest=combineLatest;var _tslib=require("tslib");var _combineLatest=require("../observable/combineLatest");var _lift=require("../util/lift");var _argsOrArgArray=require("../util/argsOrArgArray");var _mapOneOrManyArgs=require("../util/mapOneOrManyArgs");var _pipe=require("../util/pipe");var _args=require("../util/args");function combineLatest(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var resultSelector=(0,_args.popResultSelector)(args);return resultSelector?(0,_pipe.pipe)(combineLatest.apply(void 0,(0,_tslib.__spreadArray)([],(0,_tslib.__read)(args))),(0,_mapOneOrManyArgs.mapOneOrManyArgs)(resultSelector)):(0,_lift.operate)(function(source,subscriber){(0,_combineLatest.combineLatestInit)((0,_tslib.__spreadArray)([source],(0,_tslib.__read)((0,_argsOrArgArray.argsOrArgArray)(args))))(subscriber)})}},{"../observable/combineLatest":582,"../util/args":761,"../util/argsOrArgArray":763,"../util/lift":780,"../util/mapOneOrManyArgs":781,"../util/pipe":784,tslib:814}],620:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.combineLatestAll=combineLatestAll;var _combineLatest=require("../observable/combineLatest");var _joinAllInternals=require("./joinAllInternals");function combineLatestAll(project){return(0,_joinAllInternals.joinAllInternals)(_combineLatest.combineLatest,project)}},{"../observable/combineLatest":582,"./joinAllInternals":654}],621:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.combineLatestWith=combineLatestWith;var _tslib=require("tslib");var _combineLatest=require("./combineLatest");function combineLatestWith(){var otherSources=[];for(var _i=0;_i<arguments.length;_i++){otherSources[_i]=arguments[_i]}return _combineLatest.combineLatest.apply(void 0,(0,_tslib.__spreadArray)([],(0,_tslib.__read)(otherSources)))}},{"./combineLatest":619,tslib:814}],622:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.concat=concat;var _tslib=require("tslib");var _lift=require("../util/lift");var _concatAll=require("./concatAll");var _args=require("../util/args");var _from=require("../observable/from");function concat(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var scheduler=(0,_args.popScheduler)(args);return(0,_lift.operate)(function(source,subscriber){(0,_concatAll.concatAll)()((0,_from.from)((0,_tslib.__spreadArray)([source],(0,_tslib.__read)(args)),scheduler)).subscribe(subscriber)})}},{"../observable/from":589,"../util/args":761,"../util/lift":780,"./concatAll":623,tslib:814}],623:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.concatAll=concatAll;var _mergeAll=require("./mergeAll");function concatAll(){return(0,_mergeAll.mergeAll)(1)}},{"./mergeAll":661}],624:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.concatMap=concatMap;var _mergeMap=require("./mergeMap");var _isFunction=require("../util/isFunction");function concatMap(project,resultSelector){return(0,_isFunction.isFunction)(resultSelector)?(0,_mergeMap.mergeMap)(project,resultSelector,1):(0,_mergeMap.mergeMap)(project,1)}},{"../util/isFunction":773,"./mergeMap":663}],625:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.concatMapTo=concatMapTo;var _concatMap=require("./concatMap");var _isFunction=require("../util/isFunction");function concatMapTo(innerObservable,resultSelector){return(0,_isFunction.isFunction)(resultSelector)?(0,_concatMap.concatMap)(function(){return innerObservable},resultSelector):(0,_concatMap.concatMap)(function(){return innerObservable})}},{"../util/isFunction":773,"./concatMap":624}],626:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.concatWith=concatWith;var _tslib=require("tslib");var _concat=require("./concat");function concatWith(){var otherSources=[];for(var _i=0;_i<arguments.length;_i++){otherSources[_i]=arguments[_i]}return _concat.concat.apply(void 0,(0,_tslib.__spreadArray)([],(0,_tslib.__read)(otherSources)))}},{"./concat":622,tslib:814}],627:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.connect=connect;var _Subject=require("../Subject");var _innerFrom=require("../observable/innerFrom");var _lift=require("../util/lift");var _fromSubscribable=require("../observable/fromSubscribable");var DEFAULT_CONFIG={connector:function(){return new _Subject.Subject}};function connect(selector,config){if(config===void 0){config=DEFAULT_CONFIG}var connector=config.connector;return(0,_lift.operate)(function(source,subscriber){var subject=connector();(0,_innerFrom.innerFrom)(selector((0,_fromSubscribable.fromSubscribable)(subject))).subscribe(subscriber);subscriber.add(source.subscribe(subject))})}},{"../Subject":572,"../observable/fromSubscribable":592,"../observable/innerFrom":595,"../util/lift":780}],628:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.count=count;var _reduce=require("./reduce");function count(predicate){return(0,_reduce.reduce)(function(total,value,i){return!predicate||predicate(value,i)?total+1:total},0)}},{"./reduce":678}],629:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.debounce=debounce;var _lift=require("../util/lift");var _noop=require("../util/noop");var _OperatorSubscriber=require("./OperatorSubscriber");var _innerFrom=require("../observable/innerFrom");function debounce(durationSelector){return(0,_lift.operate)(function(source,subscriber){var hasValue=false;var lastValue=null;var durationSubscriber=null;var emit=function(){durationSubscriber===null||durationSubscriber===void 0?void 0:durationSubscriber.unsubscribe();durationSubscriber=null;if(hasValue){hasValue=false;var value=lastValue;lastValue=null;subscriber.next(value)}};source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){durationSubscriber===null||durationSubscriber===void 0?void 0:durationSubscriber.unsubscribe();hasValue=true;lastValue=value;durationSubscriber=(0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,emit,_noop.noop);(0,_innerFrom.innerFrom)(durationSelector(value)).subscribe(durationSubscriber)},function(){emit();subscriber.complete()},undefined,function(){lastValue=durationSubscriber=null}))})}},{"../observable/innerFrom":595,"../util/lift":780,"../util/noop":782,"./OperatorSubscriber":609}],630:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.debounceTime=debounceTime;var _async=require("../scheduler/async");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function debounceTime(dueTime,scheduler){if(scheduler===void 0){scheduler=_async.asyncScheduler}return(0,_lift.operate)(function(source,subscriber){var activeTask=null;var lastValue=null;var lastTime=null;var emit=function(){if(activeTask){activeTask.unsubscribe();activeTask=null;var value=lastValue;lastValue=null;subscriber.next(value)}};function emitWhenIdle(){var targetTime=lastTime+dueTime;var now=scheduler.now();if(now<targetTime){activeTask=this.schedule(undefined,targetTime-now);subscriber.add(activeTask);return}emit()}source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){lastValue=value;lastTime=scheduler.now();if(!activeTask){activeTask=scheduler.schedule(emitWhenIdle,dueTime);subscriber.add(activeTask)}},function(){emit();subscriber.complete()},undefined,function(){lastValue=activeTask=null}))})}},{"../scheduler/async":744,"../util/lift":780,"./OperatorSubscriber":609}],631:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultIfEmpty=defaultIfEmpty;var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function defaultIfEmpty(defaultValue){return(0,_lift.operate)(function(source,subscriber){var hasValue=false;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){hasValue=true;subscriber.next(value)},function(){if(!hasValue){subscriber.next(defaultValue)}subscriber.complete()}))})}},{"../util/lift":780,"./OperatorSubscriber":609}],632:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.delay=delay;var _async=require("../scheduler/async");var _delayWhen=require("./delayWhen");var _timer=require("../observable/timer");function delay(due,scheduler){if(scheduler===void 0){scheduler=_async.asyncScheduler}var duration=(0,_timer.timer)(due,scheduler);return(0,_delayWhen.delayWhen)(function(){return duration})}},{"../observable/timer":606,"../scheduler/async":744,"./delayWhen":633}],633:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.delayWhen=delayWhen;var _concat=require("../observable/concat");var _take=require("./take");var _ignoreElements=require("./ignoreElements");var _mapTo=require("./mapTo");var _mergeMap=require("./mergeMap");var _innerFrom=require("../observable/innerFrom");function delayWhen(delayDurationSelector,subscriptionDelay){if(subscriptionDelay){return function(source){return(0,_concat.concat)(subscriptionDelay.pipe((0,_take.take)(1),(0,_ignoreElements.ignoreElements)()),source.pipe(delayWhen(delayDurationSelector)))}}return(0,_mergeMap.mergeMap)(function(value,index){return(0,_innerFrom.innerFrom)(delayDurationSelector(value,index)).pipe((0,_take.take)(1),(0,_mapTo.mapTo)(value))})}},{"../observable/concat":583,"../observable/innerFrom":595,"./ignoreElements":652,"./mapTo":657,"./mergeMap":663,"./take":702}],634:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dematerialize=dematerialize;var _Notification=require("../Notification");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function dematerialize(){return(0,_lift.operate)(function(source,subscriber){source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(notification){return(0,_Notification.observeNotification)(notification,subscriber)}))})}},{"../Notification":567,"../util/lift":780,"./OperatorSubscriber":609}],635:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.distinct=distinct;var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");var _noop=require("../util/noop");var _innerFrom=require("../observable/innerFrom");function distinct(keySelector,flushes){return(0,_lift.operate)(function(source,subscriber){var distinctKeys=new Set;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){var key=keySelector?keySelector(value):value;if(!distinctKeys.has(key)){distinctKeys.add(key);subscriber.next(value)}}));flushes&&(0,_innerFrom.innerFrom)(flushes).subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(){return distinctKeys.clear()},_noop.noop))})}},{"../observable/innerFrom":595,"../util/lift":780,"../util/noop":782,"./OperatorSubscriber":609}],636:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.distinctUntilChanged=distinctUntilChanged;var _identity=require("../util/identity");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function distinctUntilChanged(comparator,keySelector){if(keySelector===void 0){keySelector=_identity.identity}comparator=comparator!==null&&comparator!==void 0?comparator:defaultCompare;return(0,_lift.operate)(function(source,subscriber){var previousKey;var first=true;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){var currentKey=keySelector(value);if(first||!comparator(previousKey,currentKey)){first=false;previousKey=currentKey;subscriber.next(value)}}))})}function defaultCompare(a,b){return a===b}},{"../util/identity":769,"../util/lift":780,"./OperatorSubscriber":609}],637:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.distinctUntilKeyChanged=distinctUntilKeyChanged;var _distinctUntilChanged=require("./distinctUntilChanged");function distinctUntilKeyChanged(key,compare){return(0,_distinctUntilChanged.distinctUntilChanged)(function(x,y){return compare?compare(x[key],y[key]):x[key]===y[key]})}},{"./distinctUntilChanged":636}],638:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.elementAt=elementAt;var _ArgumentOutOfRangeError=require("../util/ArgumentOutOfRangeError");var _filter=require("./filter");var _throwIfEmpty=require("./throwIfEmpty");var _defaultIfEmpty=require("./defaultIfEmpty");var _take=require("./take");function elementAt(index,defaultValue){if(index<0){throw new _ArgumentOutOfRangeError.ArgumentOutOfRangeError}var hasDefaultValue=arguments.length>=2;return function(source){return source.pipe((0,_filter.filter)(function(v,i){return i===index}),(0,_take.take)(1),hasDefaultValue?(0,_defaultIfEmpty.defaultIfEmpty)(defaultValue):(0,_throwIfEmpty.throwIfEmpty)(function(){return new _ArgumentOutOfRangeError.ArgumentOutOfRangeError}))}}},{"../util/ArgumentOutOfRangeError":754,"./defaultIfEmpty":631,"./filter":645,"./take":702,"./throwIfEmpty":709}],639:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.endWith=endWith;var _tslib=require("tslib");var _concat=require("../observable/concat");var _of=require("../observable/of");function endWith(){var values=[];for(var _i=0;_i<arguments.length;_i++){values[_i]=arguments[_i]}return function(source){return(0,_concat.concat)(source,_of.of.apply(void 0,(0,_tslib.__spreadArray)([],(0,_tslib.__read)(values))))}}},{"../observable/concat":583,"../observable/of":599,tslib:814}],640:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.every=every;var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function every(predicate,thisArg){return(0,_lift.operate)(function(source,subscriber){var index=0;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){if(!predicate.call(thisArg,value,index++,source)){subscriber.next(false);subscriber.complete()}},function(){subscriber.next(true);subscriber.complete()}))})}},{"../util/lift":780,"./OperatorSubscriber":609}],641:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.exhaust=void 0;var _exhaustAll=require("./exhaustAll");var exhaust=_exhaustAll.exhaustAll;exports.exhaust=exhaust},{"./exhaustAll":642}],642:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.exhaustAll=exhaustAll;var _exhaustMap=require("./exhaustMap");var _identity=require("../util/identity");function exhaustAll(){return(0,_exhaustMap.exhaustMap)(_identity.identity)}},{"../util/identity":769,"./exhaustMap":643}],643:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.exhaustMap=exhaustMap;var _map=require("./map");var _innerFrom=require("../observable/innerFrom");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function exhaustMap(project,resultSelector){if(resultSelector){return function(source){return source.pipe(exhaustMap(function(a,i){return(0,_innerFrom.innerFrom)(project(a,i)).pipe((0,_map.map)(function(b,ii){return resultSelector(a,b,i,ii)}))}))}}return(0,_lift.operate)(function(source,subscriber){var index=0;var innerSub=null;var isComplete=false;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(outerValue){if(!innerSub){innerSub=(0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,undefined,function(){innerSub=null;isComplete&&subscriber.complete()});(0,_innerFrom.innerFrom)(project(outerValue,index++)).subscribe(innerSub)}},function(){isComplete=true;!innerSub&&subscriber.complete()}))})}},{"../observable/innerFrom":595,"../util/lift":780,"./OperatorSubscriber":609,"./map":656}],644:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.expand=expand;var _lift=require("../util/lift");var _mergeInternals=require("./mergeInternals");function expand(project,concurrent,scheduler){if(concurrent===void 0){concurrent=Infinity}concurrent=(concurrent||0)<1?Infinity:concurrent;return(0,_lift.operate)(function(source,subscriber){return(0,_mergeInternals.mergeInternals)(source,subscriber,project,concurrent,undefined,true,scheduler)})}},{"../util/lift":780,"./mergeInternals":662}],645:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filter=filter;var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function filter(predicate,thisArg){return(0,_lift.operate)(function(source,subscriber){var index=0;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){return predicate.call(thisArg,value,index++)&&subscriber.next(value)}))})}},{"../util/lift":780,"./OperatorSubscriber":609}],646:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.finalize=finalize;var _lift=require("../util/lift");function finalize(callback){return(0,_lift.operate)(function(source,subscriber){try{source.subscribe(subscriber)}finally{subscriber.add(callback)}})}},{"../util/lift":780}],647:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFind=createFind;exports.find=find;var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function find(predicate,thisArg){return(0,_lift.operate)(createFind(predicate,thisArg,"value"))}function createFind(predicate,thisArg,emit){var findIndex=emit==="index";return function(source,subscriber){var index=0;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){var i=index++;if(predicate.call(thisArg,value,i,source)){subscriber.next(findIndex?i:value);subscriber.complete()}},function(){subscriber.next(findIndex?-1:undefined);subscriber.complete()}))}}},{"../util/lift":780,"./OperatorSubscriber":609}],648:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findIndex=findIndex;var _lift=require("../util/lift");var _find=require("./find");function findIndex(predicate,thisArg){return(0,_lift.operate)((0,_find.createFind)(predicate,thisArg,"index"))}},{"../util/lift":780,"./find":647}],649:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.first=first;var _EmptyError=require("../util/EmptyError");var _filter=require("./filter");var _take=require("./take");var _defaultIfEmpty=require("./defaultIfEmpty");var _throwIfEmpty=require("./throwIfEmpty");var _identity=require("../util/identity");function first(predicate,defaultValue){var hasDefaultValue=arguments.length>=2;return function(source){return source.pipe(predicate?(0,_filter.filter)(function(v,i){return predicate(v,i,source)}):_identity.identity,(0,_take.take)(1),hasDefaultValue?(0,_defaultIfEmpty.defaultIfEmpty)(defaultValue):(0,_throwIfEmpty.throwIfEmpty)(function(){return new _EmptyError.EmptyError}))}}},{"../util/EmptyError":755,"../util/identity":769,"./defaultIfEmpty":631,"./filter":645,"./take":702,"./throwIfEmpty":709}],650:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.flatMap=void 0;var _mergeMap=require("./mergeMap");var flatMap=_mergeMap.mergeMap;exports.flatMap=flatMap},{"./mergeMap":663}],651:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.groupBy=groupBy;var _Observable=require("../Observable");var _innerFrom=require("../observable/innerFrom");var _Subject=require("../Subject");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function groupBy(keySelector,elementOrOptions,duration,connector){return(0,_lift.operate)(function(source,subscriber){var element;if(!elementOrOptions||typeof elementOrOptions==="function"){element=elementOrOptions}else{duration=elementOrOptions.duration,element=elementOrOptions.element,connector=elementOrOptions.connector}var groups=new Map;var notify=function(cb){groups.forEach(cb);cb(subscriber)};var handleError=function(err){return notify(function(consumer){return consumer.error(err)})};var activeGroups=0;var teardownAttempted=false;var groupBySourceSubscriber=new _OperatorSubscriber.OperatorSubscriber(subscriber,function(value){try{var key_1=keySelector(value);var group_1=groups.get(key_1);if(!group_1){groups.set(key_1,group_1=connector?connector():new _Subject.Subject);var grouped=createGroupedObservable(key_1,group_1);subscriber.next(grouped);if(duration){var durationSubscriber_1=(0,_OperatorSubscriber.createOperatorSubscriber)(group_1,function(){group_1.complete();durationSubscriber_1===null||durationSubscriber_1===void 0?void 0:durationSubscriber_1.unsubscribe()},undefined,undefined,function(){return groups.delete(key_1)});groupBySourceSubscriber.add((0,_innerFrom.innerFrom)(duration(grouped)).subscribe(durationSubscriber_1))}}group_1.next(element?element(value):value)}catch(err){handleError(err)}},function(){return notify(function(consumer){return consumer.complete()})},handleError,function(){return groups.clear()},function(){teardownAttempted=true;return activeGroups===0});source.subscribe(groupBySourceSubscriber);function createGroupedObservable(key,groupSubject){var result=new _Observable.Observable(function(groupSubscriber){activeGroups++;var innerSub=groupSubject.subscribe(groupSubscriber);return function(){innerSub.unsubscribe();--activeGroups===0&&teardownAttempted&&groupBySourceSubscriber.unsubscribe()}});result.key=key;return result}})}},{"../Observable":569,"../Subject":572,"../observable/innerFrom":595,"../util/lift":780,"./OperatorSubscriber":609}],652:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ignoreElements=ignoreElements;var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");var _noop=require("../util/noop");function ignoreElements(){return(0,_lift.operate)(function(source,subscriber){source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,_noop.noop))})}},{"../util/lift":780,"../util/noop":782,"./OperatorSubscriber":609}],653:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isEmpty=isEmpty;var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function isEmpty(){return(0,_lift.operate)(function(source,subscriber){source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(){subscriber.next(false);subscriber.complete()},function(){subscriber.next(true);subscriber.complete()}))})}},{"../util/lift":780,"./OperatorSubscriber":609}],654:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.joinAllInternals=joinAllInternals;var _identity=require("../util/identity");var _mapOneOrManyArgs=require("../util/mapOneOrManyArgs");var _pipe=require("../util/pipe");var _mergeMap=require("./mergeMap");var _toArray=require("./toArray");function joinAllInternals(joinFn,project){return(0,_pipe.pipe)((0,_toArray.toArray)(),(0,_mergeMap.mergeMap)(function(sources){return joinFn(sources)}),project?(0,_mapOneOrManyArgs.mapOneOrManyArgs)(project):_identity.identity)}},{"../util/identity":769,"../util/mapOneOrManyArgs":781,"../util/pipe":784,"./mergeMap":663,"./toArray":714}],655:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.last=last;var _EmptyError=require("../util/EmptyError");var _filter=require("./filter");var _takeLast=require("./takeLast");var _throwIfEmpty=require("./throwIfEmpty");var _defaultIfEmpty=require("./defaultIfEmpty");var _identity=require("../util/identity");function last(predicate,defaultValue){var hasDefaultValue=arguments.length>=2;return function(source){return source.pipe(predicate?(0,_filter.filter)(function(v,i){return predicate(v,i,source)}):_identity.identity,(0,_takeLast.takeLast)(1),hasDefaultValue?(0,_defaultIfEmpty.defaultIfEmpty)(defaultValue):(0,_throwIfEmpty.throwIfEmpty)(function(){return new _EmptyError.EmptyError}))}}},{"../util/EmptyError":755,"../util/identity":769,"./defaultIfEmpty":631,"./filter":645,"./takeLast":703,"./throwIfEmpty":709}],656:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.map=map;var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function map(project,thisArg){return(0,_lift.operate)(function(source,subscriber){var index=0;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){subscriber.next(project.call(thisArg,value,index++))}))})}},{"../util/lift":780,"./OperatorSubscriber":609}],657:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapTo=mapTo;var _map=require("./map");function mapTo(value){return(0,_map.map)(function(){return value})}},{"./map":656}],658:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.materialize=materialize;var _Notification=require("../Notification");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function materialize(){return(0,_lift.operate)(function(source,subscriber){source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){subscriber.next(_Notification.Notification.createNext(value))},function(){subscriber.next(_Notification.Notification.createComplete());subscriber.complete()},function(err){subscriber.next(_Notification.Notification.createError(err));subscriber.complete()}))})}},{"../Notification":567,"../util/lift":780,"./OperatorSubscriber":609}],659:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.max=max;var _reduce=require("./reduce");var _isFunction=require("../util/isFunction");function max(comparer){return(0,_reduce.reduce)((0,_isFunction.isFunction)(comparer)?function(x,y){return comparer(x,y)>0?x:y}:function(x,y){return x>y?x:y})}},{"../util/isFunction":773,"./reduce":678}],660:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.merge=merge;var _tslib=require("tslib");var _lift=require("../util/lift");var _argsOrArgArray=require("../util/argsOrArgArray");var _mergeAll=require("./mergeAll");var _args=require("../util/args");var _from=require("../observable/from");function merge(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var scheduler=(0,_args.popScheduler)(args);var concurrent=(0,_args.popNumber)(args,Infinity);args=(0,_argsOrArgArray.argsOrArgArray)(args);return(0,_lift.operate)(function(source,subscriber){(0,_mergeAll.mergeAll)(concurrent)((0,_from.from)((0,_tslib.__spreadArray)([source],(0,_tslib.__read)(args)),scheduler)).subscribe(subscriber)})}},{"../observable/from":589,"../util/args":761,"../util/argsOrArgArray":763,"../util/lift":780,"./mergeAll":661,tslib:814}],661:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mergeAll=mergeAll;var _mergeMap=require("./mergeMap");var _identity=require("../util/identity");function mergeAll(concurrent){if(concurrent===void 0){concurrent=Infinity}return(0,_mergeMap.mergeMap)(_identity.identity,concurrent)}},{"../util/identity":769,"./mergeMap":663}],662:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mergeInternals=mergeInternals;var _innerFrom=require("../observable/innerFrom");var _executeSchedule=require("../util/executeSchedule");var _OperatorSubscriber=require("./OperatorSubscriber");function mergeInternals(source,subscriber,project,concurrent,onBeforeNext,expand,innerSubScheduler,additionalFinalizer){var buffer=[];var active=0;var index=0;var isComplete=false;var checkComplete=function(){if(isComplete&&!buffer.length&&!active){subscriber.complete()}};var outerNext=function(value){return active<concurrent?doInnerSub(value):buffer.push(value)};var doInnerSub=function(value){expand&&subscriber.next(value);active++;var innerComplete=false;(0,_innerFrom.innerFrom)(project(value,index++)).subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(innerValue){onBeforeNext===null||onBeforeNext===void 0?void 0:onBeforeNext(innerValue);if(expand){outerNext(innerValue)}else{subscriber.next(innerValue)}},function(){innerComplete=true},undefined,function(){if(innerComplete){try{active--;var _loop_1=function(){var bufferedValue=buffer.shift();if(innerSubScheduler){(0,_executeSchedule.executeSchedule)(subscriber,innerSubScheduler,function(){return doInnerSub(bufferedValue)})}else{doInnerSub(bufferedValue)}};while(buffer.length&&active<concurrent){_loop_1()}checkComplete()}catch(err){subscriber.error(err)}}}))};source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,outerNext,function(){isComplete=true;checkComplete()}));return function(){additionalFinalizer===null||additionalFinalizer===void 0?void 0:additionalFinalizer()}}},{"../observable/innerFrom":595,"../util/executeSchedule":768,"./OperatorSubscriber":609}],663:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mergeMap=mergeMap;var _map=require("./map");var _innerFrom=require("../observable/innerFrom");var _lift=require("../util/lift");var _mergeInternals=require("./mergeInternals");var _isFunction=require("../util/isFunction");function mergeMap(project,resultSelector,concurrent){if(concurrent===void 0){concurrent=Infinity}if((0,_isFunction.isFunction)(resultSelector)){return mergeMap(function(a,i){return(0,_map.map)(function(b,ii){return resultSelector(a,b,i,ii)})((0,_innerFrom.innerFrom)(project(a,i)))},concurrent)}else if(typeof resultSelector==="number"){concurrent=resultSelector}return(0,_lift.operate)(function(source,subscriber){return(0,_mergeInternals.mergeInternals)(source,subscriber,project,concurrent)})}},{"../observable/innerFrom":595,"../util/isFunction":773,"../util/lift":780,"./map":656,"./mergeInternals":662}],664:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mergeMapTo=mergeMapTo;var _mergeMap=require("./mergeMap");var _isFunction=require("../util/isFunction");function mergeMapTo(innerObservable,resultSelector,concurrent){if(concurrent===void 0){concurrent=Infinity}if((0,_isFunction.isFunction)(resultSelector)){return(0,_mergeMap.mergeMap)(function(){return innerObservable},resultSelector,concurrent)}if(typeof resultSelector==="number"){concurrent=resultSelector}return(0,_mergeMap.mergeMap)(function(){return innerObservable},concurrent)}},{"../util/isFunction":773,"./mergeMap":663}],665:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mergeScan=mergeScan;var _lift=require("../util/lift");var _mergeInternals=require("./mergeInternals");function mergeScan(accumulator,seed,concurrent){if(concurrent===void 0){concurrent=Infinity}return(0,_lift.operate)(function(source,subscriber){var state=seed;return(0,_mergeInternals.mergeInternals)(source,subscriber,function(value,index){return accumulator(state,value,index)},concurrent,function(value){state=value},false,undefined,function(){return state=null})})}},{"../util/lift":780,"./mergeInternals":662}],666:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mergeWith=mergeWith;var _tslib=require("tslib");var _merge=require("./merge");function mergeWith(){var otherSources=[];for(var _i=0;_i<arguments.length;_i++){otherSources[_i]=arguments[_i]}return _merge.merge.apply(void 0,(0,_tslib.__spreadArray)([],(0,_tslib.__read)(otherSources)))}},{"./merge":660,tslib:814}],667:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.min=min;var _reduce=require("./reduce");var _isFunction=require("../util/isFunction");function min(comparer){return(0,_reduce.reduce)((0,_isFunction.isFunction)(comparer)?function(x,y){return comparer(x,y)<0?x:y}:function(x,y){return x<y?x:y})}},{"../util/isFunction":773,"./reduce":678}],668:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.multicast=multicast;var _ConnectableObservable=require("../observable/ConnectableObservable");var _isFunction=require("../util/isFunction");var _connect=require("./connect");function multicast(subjectOrSubjectFactory,selector){var subjectFactory=(0,_isFunction.isFunction)(subjectOrSubjectFactory)?subjectOrSubjectFactory:function(){return subjectOrSubjectFactory};if((0,_isFunction.isFunction)(selector)){return(0,_connect.connect)(selector,{connector:subjectFactory})}return function(source){return new _ConnectableObservable.ConnectableObservable(source,subjectFactory)}}},{"../observable/ConnectableObservable":578,"../util/isFunction":773,"./connect":627}],669:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.observeOn=observeOn;var _executeSchedule=require("../util/executeSchedule");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function observeOn(scheduler,delay){if(delay===void 0){delay=0}return(0,_lift.operate)(function(source,subscriber){source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){return(0,_executeSchedule.executeSchedule)(subscriber,scheduler,function(){return subscriber.next(value)},delay)},function(){return(0,_executeSchedule.executeSchedule)(subscriber,scheduler,function(){return subscriber.complete()},delay)},function(err){return(0,_executeSchedule.executeSchedule)(subscriber,scheduler,function(){return subscriber.error(err)},delay)}))})}},{"../util/executeSchedule":768,"../util/lift":780,"./OperatorSubscriber":609}],670:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.onErrorResumeNext=void 0;exports.onErrorResumeNextWith=onErrorResumeNextWith;var _tslib=require("tslib");var _argsOrArgArray=require("../util/argsOrArgArray");var _onErrorResumeNext=require("../observable/onErrorResumeNext");function onErrorResumeNextWith(){var sources=[];for(var _i=0;_i<arguments.length;_i++){sources[_i]=arguments[_i]}var nextSources=(0,_argsOrArgArray.argsOrArgArray)(sources);return function(source){return _onErrorResumeNext.onErrorResumeNext.apply(void 0,(0,_tslib.__spreadArray)([source],(0,_tslib.__read)(nextSources)))}}var onErrorResumeNext=onErrorResumeNextWith;exports.onErrorResumeNext=onErrorResumeNext},{"../observable/onErrorResumeNext":600,"../util/argsOrArgArray":763,tslib:814}],671:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pairwise=pairwise;var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function pairwise(){return(0,_lift.operate)(function(source,subscriber){var prev;var hasPrev=false;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){var p=prev;prev=value;hasPrev&&subscriber.next([p,value]);hasPrev=true}))})}},{"../util/lift":780,"./OperatorSubscriber":609}],672:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pluck=pluck;var _map=require("./map");function pluck(){var properties=[];for(var _i=0;_i<arguments.length;_i++){properties[_i]=arguments[_i]}var length=properties.length;if(length===0){throw new Error("list of properties cannot be empty.")}return(0,_map.map)(function(x){var currentProp=x;for(var i=0;i<length;i++){var p=currentProp===null||currentProp===void 0?void 0:currentProp[properties[i]];if(typeof p!=="undefined"){currentProp=p}else{return undefined}}return currentProp})}},{"./map":656}],673:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.publish=publish;var _Subject=require("../Subject");var _multicast=require("./multicast");var _connect=require("./connect");function publish(selector){return selector?function(source){return(0,_connect.connect)(selector)(source)}:function(source){return(0,_multicast.multicast)(new _Subject.Subject)(source)}}},{"../Subject":572,"./connect":627,"./multicast":668}],674:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.publishBehavior=publishBehavior;var _BehaviorSubject=require("../BehaviorSubject");var _ConnectableObservable=require("../observable/ConnectableObservable");function publishBehavior(initialValue){return function(source){var subject=new _BehaviorSubject.BehaviorSubject(initialValue);return new _ConnectableObservable.ConnectableObservable(source,function(){return subject})}}},{"../BehaviorSubject":566,"../observable/ConnectableObservable":578}],675:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.publishLast=publishLast;var _AsyncSubject=require("../AsyncSubject");var _ConnectableObservable=require("../observable/ConnectableObservable");function publishLast(){return function(source){var subject=new _AsyncSubject.AsyncSubject;return new _ConnectableObservable.ConnectableObservable(source,function(){return subject})}}},{"../AsyncSubject":565,"../observable/ConnectableObservable":578}],676:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.publishReplay=publishReplay;var _ReplaySubject=require("../ReplaySubject");var _multicast=require("./multicast");var _isFunction=require("../util/isFunction");function publishReplay(bufferSize,windowTime,selectorOrScheduler,timestampProvider){if(selectorOrScheduler&&!(0,_isFunction.isFunction)(selectorOrScheduler)){timestampProvider=selectorOrScheduler}var selector=(0,_isFunction.isFunction)(selectorOrScheduler)?selectorOrScheduler:undefined;return function(source){return(0,_multicast.multicast)(new _ReplaySubject.ReplaySubject(bufferSize,windowTime,timestampProvider),selector)(source)}}},{"../ReplaySubject":570,"../util/isFunction":773,"./multicast":668}],677:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.raceWith=raceWith;var _tslib=require("tslib");var _race=require("../observable/race");var _lift=require("../util/lift");var _identity=require("../util/identity");function raceWith(){var otherSources=[];for(var _i=0;_i<arguments.length;_i++){otherSources[_i]=arguments[_i]}return!otherSources.length?_identity.identity:(0,_lift.operate)(function(source,subscriber){(0,_race.raceInit)((0,_tslib.__spreadArray)([source],(0,_tslib.__read)(otherSources)))(subscriber)})}},{"../observable/race":603,"../util/identity":769,"../util/lift":780,tslib:814}],678:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.reduce=reduce;var _scanInternals=require("./scanInternals");var _lift=require("../util/lift");function reduce(accumulator,seed){return(0,_lift.operate)((0,_scanInternals.scanInternals)(accumulator,seed,arguments.length>=2,false,true))}},{"../util/lift":780,"./scanInternals":687}],679:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.refCount=refCount;var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function refCount(){return(0,_lift.operate)(function(source,subscriber){var connection=null;source._refCount++;var refCounter=(0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,undefined,undefined,undefined,function(){if(!source||source._refCount<=0||0<--source._refCount){connection=null;return}var sharedConnection=source._connection;var conn=connection;connection=null;if(sharedConnection&&(!conn||sharedConnection===conn)){sharedConnection.unsubscribe()}subscriber.unsubscribe()});source.subscribe(refCounter);if(!refCounter.closed){connection=source.connect()}})}},{"../util/lift":780,"./OperatorSubscriber":609}],680:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.repeat=repeat;var _empty=require("../observable/empty");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");var _innerFrom=require("../observable/innerFrom");var _timer=require("../observable/timer");function repeat(countOrConfig){var _a;var count=Infinity;var delay;if(countOrConfig!=null){if(typeof countOrConfig==="object"){_a=countOrConfig.count,count=_a===void 0?Infinity:_a,delay=countOrConfig.delay}else{count=countOrConfig}}return count<=0?function(){return _empty.EMPTY}:(0,_lift.operate)(function(source,subscriber){var soFar=0;var sourceSub;var resubscribe=function(){sourceSub===null||sourceSub===void 0?void 0:sourceSub.unsubscribe();sourceSub=null;if(delay!=null){var notifier=typeof delay==="number"?(0,_timer.timer)(delay):(0,_innerFrom.innerFrom)(delay(soFar));var notifierSubscriber_1=(0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(){notifierSubscriber_1.unsubscribe();subscribeToSource()});notifier.subscribe(notifierSubscriber_1)}else{subscribeToSource()}};var subscribeToSource=function(){var syncUnsub=false;sourceSub=source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,undefined,function(){if(++soFar<count){if(sourceSub){resubscribe()}else{syncUnsub=true}}else{subscriber.complete()}}));if(syncUnsub){resubscribe()}};subscribeToSource()})}},{"../observable/empty":587,"../observable/innerFrom":595,"../observable/timer":606,"../util/lift":780,"./OperatorSubscriber":609}],681:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.repeatWhen=repeatWhen;var _innerFrom=require("../observable/innerFrom");var _Subject=require("../Subject");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function repeatWhen(notifier){return(0,_lift.operate)(function(source,subscriber){var innerSub;var syncResub=false;var completions$;var isNotifierComplete=false;var isMainComplete=false;var checkComplete=function(){return isMainComplete&&isNotifierComplete&&(subscriber.complete(),true)};var getCompletionSubject=function(){if(!completions$){completions$=new _Subject.Subject;(0,_innerFrom.innerFrom)(notifier(completions$)).subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(){if(innerSub){subscribeForRepeatWhen()}else{syncResub=true}},function(){isNotifierComplete=true;checkComplete()}))}return completions$};var subscribeForRepeatWhen=function(){isMainComplete=false;innerSub=source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,undefined,function(){isMainComplete=true;!checkComplete()&&getCompletionSubject().next()}));if(syncResub){innerSub.unsubscribe();innerSub=null;syncResub=false;subscribeForRepeatWhen()}};subscribeForRepeatWhen()})}},{"../Subject":572,"../observable/innerFrom":595,"../util/lift":780,"./OperatorSubscriber":609}],682:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.retry=retry;var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");var _identity=require("../util/identity");var _timer=require("../observable/timer");var _innerFrom=require("../observable/innerFrom");function retry(configOrCount){if(configOrCount===void 0){configOrCount=Infinity}var config;if(configOrCount&&typeof configOrCount==="object"){config=configOrCount}else{config={count:configOrCount}}var _a=config.count,count=_a===void 0?Infinity:_a,delay=config.delay,_b=config.resetOnSuccess,resetOnSuccess=_b===void 0?false:_b;return count<=0?_identity.identity:(0,_lift.operate)(function(source,subscriber){var soFar=0;var innerSub;var subscribeForRetry=function(){var syncUnsub=false;innerSub=source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){if(resetOnSuccess){soFar=0}subscriber.next(value)},undefined,function(err){if(soFar++<count){var resub_1=function(){if(innerSub){innerSub.unsubscribe();innerSub=null;subscribeForRetry()}else{syncUnsub=true}};if(delay!=null){var notifier=typeof delay==="number"?(0,_timer.timer)(delay):(0,_innerFrom.innerFrom)(delay(err,soFar));var notifierSubscriber_1=(0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(){notifierSubscriber_1.unsubscribe();resub_1()},function(){subscriber.complete()});notifier.subscribe(notifierSubscriber_1)}else{resub_1()}}else{subscriber.error(err)}}));if(syncUnsub){innerSub.unsubscribe();innerSub=null;subscribeForRetry()}};subscribeForRetry()})}},{"../observable/innerFrom":595,"../observable/timer":606,"../util/identity":769,"../util/lift":780,"./OperatorSubscriber":609}],683:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.retryWhen=retryWhen;var _innerFrom=require("../observable/innerFrom");var _Subject=require("../Subject");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function retryWhen(notifier){return(0,_lift.operate)(function(source,subscriber){var innerSub;var syncResub=false;var errors$;var subscribeForRetryWhen=function(){innerSub=source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,undefined,undefined,function(err){if(!errors$){errors$=new _Subject.Subject;(0,_innerFrom.innerFrom)(notifier(errors$)).subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(){return innerSub?subscribeForRetryWhen():syncResub=true}))}if(errors$){errors$.next(err)}}));if(syncResub){innerSub.unsubscribe();innerSub=null;syncResub=false;subscribeForRetryWhen()}};subscribeForRetryWhen()})}},{"../Subject":572,"../observable/innerFrom":595,"../util/lift":780,"./OperatorSubscriber":609}],684:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sample=sample;var _innerFrom=require("../observable/innerFrom");var _lift=require("../util/lift");var _noop=require("../util/noop");var _OperatorSubscriber=require("./OperatorSubscriber");function sample(notifier){return(0,_lift.operate)(function(source,subscriber){var hasValue=false;var lastValue=null;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){hasValue=true;lastValue=value}));(0,_innerFrom.innerFrom)(notifier).subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(){if(hasValue){hasValue=false;var value=lastValue;lastValue=null;subscriber.next(value)}},_noop.noop))})}},{"../observable/innerFrom":595,"../util/lift":780,"../util/noop":782,"./OperatorSubscriber":609}],685:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sampleTime=sampleTime;var _async=require("../scheduler/async");var _sample=require("./sample");var _interval=require("../observable/interval");function sampleTime(period,scheduler){if(scheduler===void 0){scheduler=_async.asyncScheduler}return(0,_sample.sample)((0,_interval.interval)(period,scheduler))}},{"../observable/interval":596,"../scheduler/async":744,"./sample":684}],686:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.scan=scan;var _lift=require("../util/lift");var _scanInternals=require("./scanInternals");function scan(accumulator,seed){return(0,_lift.operate)((0,_scanInternals.scanInternals)(accumulator,seed,arguments.length>=2,true))}},{"../util/lift":780,"./scanInternals":687}],687:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.scanInternals=scanInternals;var _OperatorSubscriber=require("./OperatorSubscriber");function scanInternals(accumulator,seed,hasSeed,emitOnNext,emitBeforeComplete){return function(source,subscriber){var hasState=hasSeed;var state=seed;var index=0;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){var i=index++;state=hasState?accumulator(state,value,i):(hasState=true,value);emitOnNext&&subscriber.next(state)},emitBeforeComplete&&function(){hasState&&subscriber.next(state);subscriber.complete()}))}}},{"./OperatorSubscriber":609}],688:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sequenceEqual=sequenceEqual;var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");var _innerFrom=require("../observable/innerFrom");function sequenceEqual(compareTo,comparator){if(comparator===void 0){comparator=function(a,b){return a===b}}return(0,_lift.operate)(function(source,subscriber){var aState=createState();var bState=createState();var emit=function(isEqual){subscriber.next(isEqual);subscriber.complete()};var createSubscriber=function(selfState,otherState){var sequenceEqualSubscriber=(0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(a){var buffer=otherState.buffer,complete=otherState.complete;if(buffer.length===0){complete?emit(false):selfState.buffer.push(a)}else{!comparator(a,buffer.shift())&&emit(false)}},function(){selfState.complete=true;var complete=otherState.complete,buffer=otherState.buffer;complete&&emit(buffer.length===0);sequenceEqualSubscriber===null||sequenceEqualSubscriber===void 0?void 0:sequenceEqualSubscriber.unsubscribe()});return sequenceEqualSubscriber};source.subscribe(createSubscriber(aState,bState));(0,_innerFrom.innerFrom)(compareTo).subscribe(createSubscriber(bState,aState))})}function createState(){return{buffer:[],complete:false}}},{"../observable/innerFrom":595,"../util/lift":780,"./OperatorSubscriber":609}],689:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.share=share;var _tslib=require("tslib");var _innerFrom=require("../observable/innerFrom");var _Subject=require("../Subject");var _Subscriber=require("../Subscriber");var _lift=require("../util/lift");function share(options){if(options===void 0){options={}}var _a=options.connector,connector=_a===void 0?function(){return new _Subject.Subject}:_a,_b=options.resetOnError,resetOnError=_b===void 0?true:_b,_c=options.resetOnComplete,resetOnComplete=_c===void 0?true:_c,_d=options.resetOnRefCountZero,resetOnRefCountZero=_d===void 0?true:_d;return function(wrapperSource){var connection;var resetConnection;var subject;var refCount=0;var hasCompleted=false;var hasErrored=false;var cancelReset=function(){resetConnection===null||resetConnection===void 0?void 0:resetConnection.unsubscribe();resetConnection=undefined};var reset=function(){cancelReset();connection=subject=undefined;hasCompleted=hasErrored=false};var resetAndUnsubscribe=function(){var conn=connection;reset();conn===null||conn===void 0?void 0:conn.unsubscribe()};return(0,_lift.operate)(function(source,subscriber){refCount++;if(!hasErrored&&!hasCompleted){cancelReset()}var dest=subject=subject!==null&&subject!==void 0?subject:connector();subscriber.add(function(){refCount--;if(refCount===0&&!hasErrored&&!hasCompleted){resetConnection=handleReset(resetAndUnsubscribe,resetOnRefCountZero)}});dest.subscribe(subscriber);if(!connection&&refCount>0){connection=new _Subscriber.SafeSubscriber({next:function(value){return dest.next(value)},error:function(err){hasErrored=true;cancelReset();resetConnection=handleReset(reset,resetOnError,err);dest.error(err)},complete:function(){hasCompleted=true;cancelReset();resetConnection=handleReset(reset,resetOnComplete);dest.complete()}});(0,_innerFrom.innerFrom)(source).subscribe(connection)}})(wrapperSource)}}function handleReset(reset,on){var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i]}if(on===true){reset();return}if(on===false){return}var onSubscriber=new _Subscriber.SafeSubscriber({next:function(){onSubscriber.unsubscribe();reset()}});return(0,_innerFrom.innerFrom)(on.apply(void 0,(0,_tslib.__spreadArray)([],(0,_tslib.__read)(args)))).subscribe(onSubscriber)}},{"../Subject":572,"../Subscriber":573,"../observable/innerFrom":595,"../util/lift":780,tslib:814}],690:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shareReplay=shareReplay;var _ReplaySubject=require("../ReplaySubject");var _share=require("./share");function shareReplay(configOrBufferSize,windowTime,scheduler){var _a,_b,_c;var bufferSize;var refCount=false;if(configOrBufferSize&&typeof configOrBufferSize==="object"){_a=configOrBufferSize.bufferSize,bufferSize=_a===void 0?Infinity:_a,_b=configOrBufferSize.windowTime,windowTime=_b===void 0?Infinity:_b,_c=configOrBufferSize.refCount,refCount=_c===void 0?false:_c,scheduler=configOrBufferSize.scheduler}else{bufferSize=configOrBufferSize!==null&&configOrBufferSize!==void 0?configOrBufferSize:Infinity}return(0,_share.share)({connector:function(){return new _ReplaySubject.ReplaySubject(bufferSize,windowTime,scheduler)},resetOnError:true,resetOnComplete:false,resetOnRefCountZero:refCount})}},{"../ReplaySubject":570,"./share":689}],691:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.single=single;var _EmptyError=require("../util/EmptyError");var _SequenceError=require("../util/SequenceError");var _NotFoundError=require("../util/NotFoundError");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function single(predicate){return(0,_lift.operate)(function(source,subscriber){var hasValue=false;var singleValue;var seenValue=false;var index=0;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){seenValue=true;if(!predicate||predicate(value,index++,source)){hasValue&&subscriber.error(new _SequenceError.SequenceError("Too many matching values"));hasValue=true;singleValue=value}},function(){if(hasValue){subscriber.next(singleValue);subscriber.complete()}else{subscriber.error(seenValue?new _NotFoundError.NotFoundError("No matching values"):new _EmptyError.EmptyError)}}))})}},{"../util/EmptyError":755,"../util/NotFoundError":757,"../util/SequenceError":759,"../util/lift":780,"./OperatorSubscriber":609}],692:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.skip=skip;var _filter=require("./filter");function skip(count){return(0,_filter.filter)(function(_,index){return count<=index})}},{"./filter":645}],693:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.skipLast=skipLast;var _identity=require("../util/identity");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function skipLast(skipCount){return skipCount<=0?_identity.identity:(0,_lift.operate)(function(source,subscriber){var ring=new Array(skipCount);var seen=0;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){var valueIndex=seen++;if(valueIndex<skipCount){ring[valueIndex]=value}else{var index=valueIndex%skipCount;var oldValue=ring[index];ring[index]=value;subscriber.next(oldValue)}}));return function(){ring=null}})}},{"../util/identity":769,"../util/lift":780,"./OperatorSubscriber":609}],694:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.skipUntil=skipUntil;var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");var _innerFrom=require("../observable/innerFrom");var _noop=require("../util/noop");function skipUntil(notifier){return(0,_lift.operate)(function(source,subscriber){var taking=false;var skipSubscriber=(0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(){skipSubscriber===null||skipSubscriber===void 0?void 0:skipSubscriber.unsubscribe();taking=true},_noop.noop);(0,_innerFrom.innerFrom)(notifier).subscribe(skipSubscriber);source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){return taking&&subscriber.next(value)}))})}},{"../observable/innerFrom":595,"../util/lift":780,"../util/noop":782,"./OperatorSubscriber":609}],695:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.skipWhile=skipWhile;var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function skipWhile(predicate){return(0,_lift.operate)(function(source,subscriber){var taking=false;var index=0;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){return(taking||(taking=!predicate(value,index++)))&&subscriber.next(value)}))})}},{"../util/lift":780,"./OperatorSubscriber":609}],696:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.startWith=startWith;var _concat=require("../observable/concat");var _args=require("../util/args");var _lift=require("../util/lift");function startWith(){var values=[];for(var _i=0;_i<arguments.length;_i++){values[_i]=arguments[_i]}var scheduler=(0,_args.popScheduler)(values);return(0,_lift.operate)(function(source,subscriber){(scheduler?(0,_concat.concat)(values,source,scheduler):(0,_concat.concat)(values,source)).subscribe(subscriber)})}},{"../observable/concat":583,"../util/args":761,"../util/lift":780}],697:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.subscribeOn=subscribeOn;var _lift=require("../util/lift");function subscribeOn(scheduler,delay){if(delay===void 0){delay=0}return(0,_lift.operate)(function(source,subscriber){subscriber.add(scheduler.schedule(function(){return source.subscribe(subscriber)},delay))})}},{"../util/lift":780}],698:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.switchAll=switchAll;var _switchMap=require("./switchMap");var _identity=require("../util/identity");function switchAll(){return(0,_switchMap.switchMap)(_identity.identity)}},{"../util/identity":769,"./switchMap":699}],699:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.switchMap=switchMap;var _innerFrom=require("../observable/innerFrom");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function switchMap(project,resultSelector){return(0,_lift.operate)(function(source,subscriber){var innerSubscriber=null;var index=0;var isComplete=false;var checkComplete=function(){return isComplete&&!innerSubscriber&&subscriber.complete()};source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){innerSubscriber===null||innerSubscriber===void 0?void 0:innerSubscriber.unsubscribe();var innerIndex=0;var outerIndex=index++;(0,_innerFrom.innerFrom)(project(value,outerIndex)).subscribe(innerSubscriber=(0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(innerValue){return subscriber.next(resultSelector?resultSelector(value,innerValue,outerIndex,innerIndex++):innerValue)},function(){innerSubscriber=null;checkComplete()}))},function(){isComplete=true;checkComplete()}))})}},{"../observable/innerFrom":595,"../util/lift":780,"./OperatorSubscriber":609}],700:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.switchMapTo=switchMapTo;var _switchMap=require("./switchMap");var _isFunction=require("../util/isFunction");function switchMapTo(innerObservable,resultSelector){return(0,_isFunction.isFunction)(resultSelector)?(0,_switchMap.switchMap)(function(){return innerObservable},resultSelector):(0,_switchMap.switchMap)(function(){return innerObservable})}},{"../util/isFunction":773,"./switchMap":699}],701:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.switchScan=switchScan;var _switchMap=require("./switchMap");var _lift=require("../util/lift");function switchScan(accumulator,seed){return(0,_lift.operate)(function(source,subscriber){var state=seed;(0,_switchMap.switchMap)(function(value,index){return accumulator(state,value,index)},function(_,innerValue){return state=innerValue,innerValue})(source).subscribe(subscriber);return function(){state=null}})}},{"../util/lift":780,"./switchMap":699}],702:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.take=take;var _empty=require("../observable/empty");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function take(count){return count<=0?function(){return _empty.EMPTY}:(0,_lift.operate)(function(source,subscriber){var seen=0;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){if(++seen<=count){subscriber.next(value);if(count<=seen){subscriber.complete()}}}))})}},{"../observable/empty":587,"../util/lift":780,"./OperatorSubscriber":609}],703:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.takeLast=takeLast;var _tslib=require("tslib");var _empty=require("../observable/empty");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function takeLast(count){return count<=0?function(){return _empty.EMPTY}:(0,_lift.operate)(function(source,subscriber){var buffer=[];source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){buffer.push(value);count<buffer.length&&buffer.shift()},function(){var e_1,_a;try{for(var buffer_1=(0,_tslib.__values)(buffer),buffer_1_1=buffer_1.next();!buffer_1_1.done;buffer_1_1=buffer_1.next()){var value=buffer_1_1.value;subscriber.next(value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(buffer_1_1&&!buffer_1_1.done&&(_a=buffer_1.return))_a.call(buffer_1)}finally{if(e_1)throw e_1.error}}subscriber.complete()},undefined,function(){buffer=null}))})}},{"../observable/empty":587,"../util/lift":780,"./OperatorSubscriber":609,tslib:814}],704:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.takeUntil=takeUntil;var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");var _innerFrom=require("../observable/innerFrom");var _noop=require("../util/noop");function takeUntil(notifier){return(0,_lift.operate)(function(source,subscriber){(0,_innerFrom.innerFrom)(notifier).subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(){return subscriber.complete()},_noop.noop));!subscriber.closed&&source.subscribe(subscriber)})}},{"../observable/innerFrom":595,"../util/lift":780,"../util/noop":782,"./OperatorSubscriber":609}],705:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.takeWhile=takeWhile;var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function takeWhile(predicate,inclusive){if(inclusive===void 0){inclusive=false}return(0,_lift.operate)(function(source,subscriber){var index=0;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){var result=predicate(value,index++);(result||inclusive)&&subscriber.next(value);!result&&subscriber.complete()}))})}},{"../util/lift":780,"./OperatorSubscriber":609}],706:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tap=tap;var _isFunction=require("../util/isFunction");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");var _identity=require("../util/identity");function tap(observerOrNext,error,complete){var tapObserver=(0,_isFunction.isFunction)(observerOrNext)||error||complete?{next:observerOrNext,error:error,complete:complete}:observerOrNext;return tapObserver?(0,_lift.operate)(function(source,subscriber){var _a;(_a=tapObserver.subscribe)===null||_a===void 0?void 0:_a.call(tapObserver);var isUnsub=true;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){var _a;(_a=tapObserver.next)===null||_a===void 0?void 0:_a.call(tapObserver,value);subscriber.next(value)},function(){var _a;isUnsub=false;(_a=tapObserver.complete)===null||_a===void 0?void 0:_a.call(tapObserver);subscriber.complete()},function(err){var _a;isUnsub=false;(_a=tapObserver.error)===null||_a===void 0?void 0:_a.call(tapObserver,err);subscriber.error(err)},function(){var _a,_b;if(isUnsub){(_a=tapObserver.unsubscribe)===null||_a===void 0?void 0:_a.call(tapObserver)}(_b=tapObserver.finalize)===null||_b===void 0?void 0:_b.call(tapObserver)}))}):_identity.identity}},{"../util/identity":769,"../util/isFunction":773,"../util/lift":780,"./OperatorSubscriber":609}],707:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultThrottleConfig=void 0;exports.throttle=throttle;var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");var _innerFrom=require("../observable/innerFrom");var defaultThrottleConfig={leading:true,trailing:false};exports.defaultThrottleConfig=defaultThrottleConfig;function throttle(durationSelector,config){if(config===void 0){config=defaultThrottleConfig}return(0,_lift.operate)(function(source,subscriber){var leading=config.leading,trailing=config.trailing;var hasValue=false;var sendValue=null;var throttled=null;var isComplete=false;var endThrottling=function(){throttled===null||throttled===void 0?void 0:throttled.unsubscribe();throttled=null;if(trailing){send();isComplete&&subscriber.complete()}};var cleanupThrottling=function(){throttled=null;isComplete&&subscriber.complete()};var startThrottle=function(value){return throttled=(0,_innerFrom.innerFrom)(durationSelector(value)).subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,endThrottling,cleanupThrottling))};var send=function(){if(hasValue){hasValue=false;var value=sendValue;sendValue=null;subscriber.next(value);!isComplete&&startThrottle(value)}};source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){hasValue=true;sendValue=value;!(throttled&&!throttled.closed)&&(leading?send():startThrottle(value))},function(){isComplete=true;!(trailing&&hasValue&&throttled&&!throttled.closed)&&subscriber.complete()}))})}},{"../observable/innerFrom":595,"../util/lift":780,"./OperatorSubscriber":609}],708:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.throttleTime=throttleTime;var _async=require("../scheduler/async");var _throttle=require("./throttle");var _timer=require("../observable/timer");function throttleTime(duration,scheduler,config){if(scheduler===void 0){scheduler=_async.asyncScheduler}if(config===void 0){config=_throttle.defaultThrottleConfig}var duration$=(0,_timer.timer)(duration,scheduler);return(0,_throttle.throttle)(function(){return duration$},config)}},{"../observable/timer":606,"../scheduler/async":744,"./throttle":707}],709:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.throwIfEmpty=throwIfEmpty;var _EmptyError=require("../util/EmptyError");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function throwIfEmpty(errorFactory){if(errorFactory===void 0){errorFactory=defaultErrorFactory}return(0,_lift.operate)(function(source,subscriber){var hasValue=false;source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){hasValue=true;subscriber.next(value)},function(){return hasValue?subscriber.complete():subscriber.error(errorFactory())}))})}function defaultErrorFactory(){return new _EmptyError.EmptyError}},{"../util/EmptyError":755,"../util/lift":780,"./OperatorSubscriber":609}],710:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeInterval=void 0;exports.timeInterval=timeInterval;var _async=require("../scheduler/async");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function timeInterval(scheduler){if(scheduler===void 0){scheduler=_async.asyncScheduler}return(0,_lift.operate)(function(source,subscriber){var last=scheduler.now();source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){var now=scheduler.now();var interval=now-last;last=now;subscriber.next(new TimeInterval(value,interval))}))})}var TimeInterval=function(){function TimeInterval(value,interval){this.value=value;this.interval=interval}return TimeInterval}();exports.TimeInterval=TimeInterval},{"../scheduler/async":744,"../util/lift":780,"./OperatorSubscriber":609}],711:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeoutError=void 0;exports.timeout=timeout;var _async=require("../scheduler/async");var _isDate=require("../util/isDate");var _lift=require("../util/lift");var _innerFrom=require("../observable/innerFrom");var _createErrorClass=require("../util/createErrorClass");var _OperatorSubscriber=require("./OperatorSubscriber");var _executeSchedule=require("../util/executeSchedule");var TimeoutError=(0,_createErrorClass.createErrorClass)(function(_super){return function TimeoutErrorImpl(info){if(info===void 0){info=null}_super(this);this.message="Timeout has occurred";this.name="TimeoutError";this.info=info}});exports.TimeoutError=TimeoutError;function timeout(config,schedulerArg){var _a=(0,_isDate.isValidDate)(config)?{first:config}:typeof config==="number"?{each:config}:config,first=_a.first,each=_a.each,_b=_a.with,_with=_b===void 0?timeoutErrorFactory:_b,_c=_a.scheduler,scheduler=_c===void 0?schedulerArg!==null&&schedulerArg!==void 0?schedulerArg:_async.asyncScheduler:_c,_d=_a.meta,meta=_d===void 0?null:_d;if(first==null&&each==null){throw new TypeError("No timeout provided.")}return(0,_lift.operate)(function(source,subscriber){var originalSourceSubscription;var timerSubscription;var lastValue=null;var seen=0;var startTimer=function(delay){timerSubscription=(0,_executeSchedule.executeSchedule)(subscriber,scheduler,function(){try{originalSourceSubscription.unsubscribe();(0,_innerFrom.innerFrom)(_with({meta:meta,lastValue:lastValue,seen:seen})).subscribe(subscriber)}catch(err){subscriber.error(err)}},delay)};originalSourceSubscription=source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){timerSubscription===null||timerSubscription===void 0?void 0:timerSubscription.unsubscribe();seen++;subscriber.next(lastValue=value);each>0&&startTimer(each)},undefined,undefined,function(){if(!(timerSubscription===null||timerSubscription===void 0?void 0:timerSubscription.closed)){timerSubscription===null||timerSubscription===void 0?void 0:timerSubscription.unsubscribe()}lastValue=null}));!seen&&startTimer(first!=null?typeof first==="number"?first:+first-scheduler.now():each)})}function timeoutErrorFactory(info){throw new TimeoutError(info)}},{"../observable/innerFrom":595,"../scheduler/async":744,"../util/createErrorClass":765,"../util/executeSchedule":768,"../util/isDate":772,"../util/lift":780,"./OperatorSubscriber":609}],712:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.timeoutWith=timeoutWith;var _async=require("../scheduler/async");var _isDate=require("../util/isDate");var _timeout=require("./timeout");function timeoutWith(due,withObservable,scheduler){var first;var each;var _with;scheduler=scheduler!==null&&scheduler!==void 0?scheduler:_async.async;if((0,_isDate.isValidDate)(due)){first=due}else if(typeof due==="number"){each=due}if(withObservable){_with=function(){return withObservable}}else{throw new TypeError("No observable provided to switch to")}if(first==null&&each==null){throw new TypeError("No timeout provided.")}return(0,_timeout.timeout)({first:first,each:each,scheduler:scheduler,with:_with})}},{"../scheduler/async":744,"../util/isDate":772,"./timeout":711}],713:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.timestamp=timestamp;var _dateTimestampProvider=require("../scheduler/dateTimestampProvider");var _map=require("./map");function timestamp(timestampProvider){if(timestampProvider===void 0){timestampProvider=_dateTimestampProvider.dateTimestampProvider}return(0,_map.map)(function(value){return{value:value,timestamp:timestampProvider.now()}})}},{"../scheduler/dateTimestampProvider":745,"./map":656}],714:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toArray=toArray;var _reduce=require("./reduce");var _lift=require("../util/lift");var arrReducer=function(arr,value){return arr.push(value),arr};function toArray(){return(0,_lift.operate)(function(source,subscriber){(0,_reduce.reduce)(arrReducer,[])(source).subscribe(subscriber)})}},{"../util/lift":780,"./reduce":678}],715:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.window=window;var _Subject=require("../Subject");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");var _noop=require("../util/noop");var _innerFrom=require("../observable/innerFrom");function window(windowBoundaries){return(0,_lift.operate)(function(source,subscriber){var windowSubject=new _Subject.Subject;subscriber.next(windowSubject.asObservable());var errorHandler=function(err){windowSubject.error(err);subscriber.error(err)};source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){return windowSubject===null||windowSubject===void 0?void 0:windowSubject.next(value)},function(){windowSubject.complete();subscriber.complete()},errorHandler));(0,_innerFrom.innerFrom)(windowBoundaries).subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(){windowSubject.complete();subscriber.next(windowSubject=new _Subject.Subject)},_noop.noop,errorHandler));return function(){windowSubject===null||windowSubject===void 0?void 0:windowSubject.unsubscribe();windowSubject=null}})}},{"../Subject":572,"../observable/innerFrom":595,"../util/lift":780,"../util/noop":782,"./OperatorSubscriber":609}],716:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.windowCount=windowCount;var _tslib=require("tslib");var _Subject=require("../Subject");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");function windowCount(windowSize,startWindowEvery){if(startWindowEvery===void 0){startWindowEvery=0}var startEvery=startWindowEvery>0?startWindowEvery:windowSize;return(0,_lift.operate)(function(source,subscriber){var windows=[new _Subject.Subject];var starts=[];var count=0;subscriber.next(windows[0].asObservable());source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){var e_1,_a;try{for(var windows_1=(0,_tslib.__values)(windows),windows_1_1=windows_1.next();!windows_1_1.done;windows_1_1=windows_1.next()){var window_1=windows_1_1.value;window_1.next(value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(windows_1_1&&!windows_1_1.done&&(_a=windows_1.return))_a.call(windows_1)}finally{if(e_1)throw e_1.error}}var c=count-windowSize+1;if(c>=0&&c%startEvery===0){windows.shift().complete()}if(++count%startEvery===0){var window_2=new _Subject.Subject;windows.push(window_2);subscriber.next(window_2.asObservable())}},function(){while(windows.length>0){windows.shift().complete()}subscriber.complete()},function(err){while(windows.length>0){windows.shift().error(err)}subscriber.error(err)},function(){starts=null;windows=null}))})}},{"../Subject":572,"../util/lift":780,"./OperatorSubscriber":609,tslib:814}],717:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.windowTime=windowTime;var _Subject=require("../Subject");var _async=require("../scheduler/async");var _Subscription=require("../Subscription");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");var _arrRemove=require("../util/arrRemove");var _args=require("../util/args");var _executeSchedule=require("../util/executeSchedule");function windowTime(windowTimeSpan){var _a,_b;var otherArgs=[];for(var _i=1;_i<arguments.length;_i++){otherArgs[_i-1]=arguments[_i]}var scheduler=(_a=(0,_args.popScheduler)(otherArgs))!==null&&_a!==void 0?_a:_async.asyncScheduler;var windowCreationInterval=(_b=otherArgs[0])!==null&&_b!==void 0?_b:null;var maxWindowSize=otherArgs[1]||Infinity;return(0,_lift.operate)(function(source,subscriber){var windowRecords=[];var restartOnClose=false;var closeWindow=function(record){var window=record.window,subs=record.subs;window.complete();subs.unsubscribe();(0,_arrRemove.arrRemove)(windowRecords,record);restartOnClose&&startWindow()};var startWindow=function(){if(windowRecords){var subs=new _Subscription.Subscription;subscriber.add(subs);var window_1=new _Subject.Subject;var record_1={window:window_1,subs:subs,seen:0};windowRecords.push(record_1);subscriber.next(window_1.asObservable());(0,_executeSchedule.executeSchedule)(subs,scheduler,function(){return closeWindow(record_1)},windowTimeSpan)}};if(windowCreationInterval!==null&&windowCreationInterval>=0){(0,_executeSchedule.executeSchedule)(subscriber,scheduler,startWindow,windowCreationInterval,true)}else{restartOnClose=true}startWindow();var loop=function(cb){return windowRecords.slice().forEach(cb)};var terminate=function(cb){loop(function(_a){var window=_a.window;return cb(window)});cb(subscriber);subscriber.unsubscribe()};source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){loop(function(record){record.window.next(value);maxWindowSize<=++record.seen&&closeWindow(record)})},function(){return terminate(function(consumer){return consumer.complete()})},function(err){return terminate(function(consumer){return consumer.error(err)})}));return function(){windowRecords=null}})}},{"../Subject":572,"../Subscription":574,"../scheduler/async":744,"../util/args":761,"../util/arrRemove":764,"../util/executeSchedule":768,"../util/lift":780,"./OperatorSubscriber":609}],718:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.windowToggle=windowToggle;var _tslib=require("tslib");var _Subject=require("../Subject");var _Subscription=require("../Subscription");var _lift=require("../util/lift");var _innerFrom=require("../observable/innerFrom");var _OperatorSubscriber=require("./OperatorSubscriber");var _noop=require("../util/noop");var _arrRemove=require("../util/arrRemove");function windowToggle(openings,closingSelector){return(0,_lift.operate)(function(source,subscriber){var windows=[];var handleError=function(err){while(0<windows.length){windows.shift().error(err)}subscriber.error(err)};(0,_innerFrom.innerFrom)(openings).subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(openValue){var window=new _Subject.Subject;windows.push(window);var closingSubscription=new _Subscription.Subscription;var closeWindow=function(){(0,_arrRemove.arrRemove)(windows,window);window.complete();closingSubscription.unsubscribe()};var closingNotifier;try{closingNotifier=(0,_innerFrom.innerFrom)(closingSelector(openValue))}catch(err){handleError(err);return}subscriber.next(window.asObservable());closingSubscription.add(closingNotifier.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,closeWindow,_noop.noop,handleError)))},_noop.noop));source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){var e_1,_a;var windowsCopy=windows.slice();try{for(var windowsCopy_1=(0,_tslib.__values)(windowsCopy),windowsCopy_1_1=windowsCopy_1.next();!windowsCopy_1_1.done;windowsCopy_1_1=windowsCopy_1.next()){var window_1=windowsCopy_1_1.value;window_1.next(value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(windowsCopy_1_1&&!windowsCopy_1_1.done&&(_a=windowsCopy_1.return))_a.call(windowsCopy_1)}finally{if(e_1)throw e_1.error}}},function(){while(0<windows.length){windows.shift().complete()}subscriber.complete()},handleError,function(){while(0<windows.length){windows.shift().unsubscribe()}}))})}},{"../Subject":572,"../Subscription":574,"../observable/innerFrom":595,"../util/arrRemove":764,"../util/lift":780,"../util/noop":782,"./OperatorSubscriber":609,tslib:814}],719:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.windowWhen=windowWhen;var _Subject=require("../Subject");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");var _innerFrom=require("../observable/innerFrom");function windowWhen(closingSelector){return(0,_lift.operate)(function(source,subscriber){var window;var closingSubscriber;var handleError=function(err){window.error(err);subscriber.error(err)};var openWindow=function(){closingSubscriber===null||closingSubscriber===void 0?void 0:closingSubscriber.unsubscribe();window===null||window===void 0?void 0:window.complete();window=new _Subject.Subject;subscriber.next(window.asObservable());var closingNotifier;try{closingNotifier=(0,_innerFrom.innerFrom)(closingSelector())}catch(err){handleError(err);return}closingNotifier.subscribe(closingSubscriber=(0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,openWindow,openWindow,handleError))};openWindow();source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){return window.next(value)},function(){window.complete();subscriber.complete()},handleError,function(){closingSubscriber===null||closingSubscriber===void 0?void 0:closingSubscriber.unsubscribe();window=null}))})}},{"../Subject":572,"../observable/innerFrom":595,"../util/lift":780,"./OperatorSubscriber":609}],720:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.withLatestFrom=withLatestFrom;var _tslib=require("tslib");var _lift=require("../util/lift");var _OperatorSubscriber=require("./OperatorSubscriber");var _innerFrom=require("../observable/innerFrom");var _identity=require("../util/identity");var _noop=require("../util/noop");var _args=require("../util/args");function withLatestFrom(){var inputs=[];for(var _i=0;_i<arguments.length;_i++){inputs[_i]=arguments[_i]}var project=(0,_args.popResultSelector)(inputs);return(0,_lift.operate)(function(source,subscriber){var len=inputs.length;var otherValues=new Array(len);var hasValue=inputs.map(function(){return false});var ready=false;var _loop_1=function(i){(0,_innerFrom.innerFrom)(inputs[i]).subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){otherValues[i]=value;if(!ready&&!hasValue[i]){hasValue[i]=true;(ready=hasValue.every(_identity.identity))&&(hasValue=null)}},_noop.noop))};for(var i=0;i<len;i++){_loop_1(i)}source.subscribe((0,_OperatorSubscriber.createOperatorSubscriber)(subscriber,function(value){if(ready){var values=(0,_tslib.__spreadArray)([value],(0,_tslib.__read)(otherValues));subscriber.next(project?project.apply(void 0,(0,_tslib.__spreadArray)([],(0,_tslib.__read)(values))):values)}}))})}},{"../observable/innerFrom":595,"../util/args":761,"../util/identity":769,"../util/lift":780,"../util/noop":782,"./OperatorSubscriber":609,tslib:814}],721:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.zip=zip;var _tslib=require("tslib");var _zip=require("../observable/zip");var _lift=require("../util/lift");function zip(){var sources=[];for(var _i=0;_i<arguments.length;_i++){sources[_i]=arguments[_i]}return(0,_lift.operate)(function(source,subscriber){_zip.zip.apply(void 0,(0,_tslib.__spreadArray)([source],(0,_tslib.__read)(sources))).subscribe(subscriber)})}},{"../observable/zip":608,"../util/lift":780,tslib:814}],722:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.zipAll=zipAll;var _zip=require("../observable/zip");var _joinAllInternals=require("./joinAllInternals");function zipAll(project){return(0,_joinAllInternals.joinAllInternals)(_zip.zip,project)}},{"../observable/zip":608,"./joinAllInternals":654}],723:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.zipWith=zipWith;var _tslib=require("tslib");var _zip=require("./zip");function zipWith(){var otherInputs=[];for(var _i=0;_i<arguments.length;_i++){otherInputs[_i]=arguments[_i]}return _zip.zip.apply(void 0,(0,_tslib.__spreadArray)([],(0,_tslib.__read)(otherInputs)))}},{"./zip":721,tslib:814}],724:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.scheduleArray=scheduleArray;var _Observable=require("../Observable");function scheduleArray(input,scheduler){return new _Observable.Observable(function(subscriber){var i=0;return scheduler.schedule(function(){if(i===input.length){subscriber.complete()}else{subscriber.next(input[i++]);if(!subscriber.closed){this.schedule()}}})})}},{"../Observable":569}],725:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.scheduleAsyncIterable=scheduleAsyncIterable;var _Observable=require("../Observable");var _executeSchedule=require("../util/executeSchedule");function scheduleAsyncIterable(input,scheduler){if(!input){throw new Error("Iterable cannot be null")}return new _Observable.Observable(function(subscriber){(0,_executeSchedule.executeSchedule)(subscriber,scheduler,function(){var iterator=input[Symbol.asyncIterator]();(0,_executeSchedule.executeSchedule)(subscriber,scheduler,function(){iterator.next().then(function(result){if(result.done){subscriber.complete()}else{subscriber.next(result.value)}})},0,true)})})}},{"../Observable":569,"../util/executeSchedule":768}],726:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.scheduleIterable=scheduleIterable;var _Observable=require("../Observable");var _iterator=require("../symbol/iterator");var _isFunction=require("../util/isFunction");var _executeSchedule=require("../util/executeSchedule");function scheduleIterable(input,scheduler){return new _Observable.Observable(function(subscriber){var iterator;(0,_executeSchedule.executeSchedule)(subscriber,scheduler,function(){iterator=input[_iterator.iterator]();(0,_executeSchedule.executeSchedule)(subscriber,scheduler,function(){var _a;var value;var done;try{_a=iterator.next(),value=_a.value,done=_a.done}catch(err){subscriber.error(err);return}if(done){subscriber.complete()}else{subscriber.next(value)}},0,true)});return function(){return(0,_isFunction.isFunction)(iterator===null||iterator===void 0?void 0:iterator.return)&&iterator.return()}})}},{"../Observable":569,"../symbol/iterator":751,"../util/executeSchedule":768,"../util/isFunction":773}],727:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.scheduleObservable=scheduleObservable;var _innerFrom=require("../observable/innerFrom");var _observeOn=require("../operators/observeOn");var _subscribeOn=require("../operators/subscribeOn");function scheduleObservable(input,scheduler){return(0,_innerFrom.innerFrom)(input).pipe((0,_subscribeOn.subscribeOn)(scheduler),(0,_observeOn.observeOn)(scheduler))}},{"../observable/innerFrom":595,"../operators/observeOn":669,"../operators/subscribeOn":697}],728:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.schedulePromise=schedulePromise;var _innerFrom=require("../observable/innerFrom");var _observeOn=require("../operators/observeOn");var _subscribeOn=require("../operators/subscribeOn");function schedulePromise(input,scheduler){return(0,_innerFrom.innerFrom)(input).pipe((0,_subscribeOn.subscribeOn)(scheduler),(0,_observeOn.observeOn)(scheduler))}},{"../observable/innerFrom":595,"../operators/observeOn":669,"../operators/subscribeOn":697}],729:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.scheduleReadableStreamLike=scheduleReadableStreamLike;var _scheduleAsyncIterable=require("./scheduleAsyncIterable");var _isReadableStreamLike=require("../util/isReadableStreamLike");function scheduleReadableStreamLike(input,scheduler){return(0,_scheduleAsyncIterable.scheduleAsyncIterable)((0,_isReadableStreamLike.readableStreamLikeToAsyncGenerator)(input),scheduler)}},{"../util/isReadableStreamLike":778,"./scheduleAsyncIterable":725}],730:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.scheduled=scheduled;var _scheduleObservable=require("./scheduleObservable");var _schedulePromise=require("./schedulePromise");var _scheduleArray=require("./scheduleArray");var _scheduleIterable=require("./scheduleIterable");var _scheduleAsyncIterable=require("./scheduleAsyncIterable");var _isInteropObservable=require("../util/isInteropObservable");var _isPromise=require("../util/isPromise");var _isArrayLike=require("../util/isArrayLike");var _isIterable=require("../util/isIterable");var _isAsyncIterable=require("../util/isAsyncIterable");var _throwUnobservableError=require("../util/throwUnobservableError");var _isReadableStreamLike=require("../util/isReadableStreamLike");var _scheduleReadableStreamLike=require("./scheduleReadableStreamLike");function scheduled(input,scheduler){if(input!=null){if((0,_isInteropObservable.isInteropObservable)(input)){return(0,_scheduleObservable.scheduleObservable)(input,scheduler)}if((0,_isArrayLike.isArrayLike)(input)){return(0,_scheduleArray.scheduleArray)(input,scheduler)}if((0,_isPromise.isPromise)(input)){return(0,_schedulePromise.schedulePromise)(input,scheduler)}if((0,_isAsyncIterable.isAsyncIterable)(input)){return(0,_scheduleAsyncIterable.scheduleAsyncIterable)(input,scheduler)}if((0,_isIterable.isIterable)(input)){return(0,_scheduleIterable.scheduleIterable)(input,scheduler)}if((0,_isReadableStreamLike.isReadableStreamLike)(input)){return(0,_scheduleReadableStreamLike.scheduleReadableStreamLike)(input,scheduler)}}throw(0,_throwUnobservableError.createInvalidObservableTypeError)(input)}},{"../util/isArrayLike":770,"../util/isAsyncIterable":771,"../util/isInteropObservable":774,"../util/isIterable":775,"../util/isPromise":777,"../util/isReadableStreamLike":778,"../util/throwUnobservableError":786,"./scheduleArray":724,"./scheduleAsyncIterable":725,"./scheduleIterable":726,"./scheduleObservable":727,"./schedulePromise":728,"./scheduleReadableStreamLike":729}],731:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Action=void 0;var _tslib=require("tslib");var _Subscription=require("../Subscription");var Action=function(_super){(0,_tslib.__extends)(Action,_super);function Action(scheduler,work){return _super.call(this)||this}Action.prototype.schedule=function(state,delay){if(delay===void 0){delay=0}return this};return Action}(_Subscription.Subscription);exports.Action=Action},{"../Subscription":574,tslib:814}],732:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AnimationFrameAction=void 0;var _tslib=require("tslib");var _AsyncAction=require("./AsyncAction");var _animationFrameProvider=require("./animationFrameProvider");var AnimationFrameAction=function(_super){(0,_tslib.__extends)(AnimationFrameAction,_super);function AnimationFrameAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;_this.scheduler=scheduler;_this.work=work;return _this}AnimationFrameAction.prototype.requestAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0}if(delay!==null&&delay>0){return _super.prototype.requestAsyncId.call(this,scheduler,id,delay)}scheduler.actions.push(this);return scheduler._scheduled||(scheduler._scheduled=_animationFrameProvider.animationFrameProvider.requestAnimationFrame(function(){return scheduler.flush(undefined)}))};AnimationFrameAction.prototype.recycleAsyncId=function(scheduler,id,delay){var _a;if(delay===void 0){delay=0}if(delay!=null?delay>0:this.delay>0){return _super.prototype.recycleAsyncId.call(this,scheduler,id,delay)}var actions=scheduler.actions;if(id!=null&&((_a=actions[actions.length-1])===null||_a===void 0?void 0:_a.id)!==id){_animationFrameProvider.animationFrameProvider.cancelAnimationFrame(id);scheduler._scheduled=undefined}return undefined};return AnimationFrameAction}(_AsyncAction.AsyncAction);exports.AnimationFrameAction=AnimationFrameAction},{"./AsyncAction":736,"./animationFrameProvider":742,tslib:814}],733:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AnimationFrameScheduler=void 0;var _tslib=require("tslib");var _AsyncScheduler=require("./AsyncScheduler");var AnimationFrameScheduler=function(_super){(0,_tslib.__extends)(AnimationFrameScheduler,_super);function AnimationFrameScheduler(){return _super!==null&&_super.apply(this,arguments)||this}AnimationFrameScheduler.prototype.flush=function(action){this._active=true;var flushId=this._scheduled;this._scheduled=undefined;var actions=this.actions;var error;action=action||actions.shift();do{if(error=action.execute(action.state,action.delay)){break}}while((action=actions[0])&&action.id===flushId&&actions.shift());this._active=false;if(error){while((action=actions[0])&&action.id===flushId&&actions.shift()){action.unsubscribe()}throw error}};return AnimationFrameScheduler}(_AsyncScheduler.AsyncScheduler);exports.AnimationFrameScheduler=AnimationFrameScheduler},{"./AsyncScheduler":737,tslib:814}],734:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AsapAction=void 0;var _tslib=require("tslib");var _AsyncAction=require("./AsyncAction");var _immediateProvider=require("./immediateProvider");var AsapAction=function(_super){(0,_tslib.__extends)(AsapAction,_super);function AsapAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;_this.scheduler=scheduler;_this.work=work;return _this}AsapAction.prototype.requestAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0}if(delay!==null&&delay>0){return _super.prototype.requestAsyncId.call(this,scheduler,id,delay)}scheduler.actions.push(this);return scheduler._scheduled||(scheduler._scheduled=_immediateProvider.immediateProvider.setImmediate(scheduler.flush.bind(scheduler,undefined)))};AsapAction.prototype.recycleAsyncId=function(scheduler,id,delay){var _a;if(delay===void 0){delay=0}if(delay!=null?delay>0:this.delay>0){return _super.prototype.recycleAsyncId.call(this,scheduler,id,delay)}var actions=scheduler.actions;if(id!=null&&((_a=actions[actions.length-1])===null||_a===void 0?void 0:_a.id)!==id){_immediateProvider.immediateProvider.clearImmediate(id);scheduler._scheduled=undefined}return undefined};return AsapAction}(_AsyncAction.AsyncAction);exports.AsapAction=AsapAction},{"./AsyncAction":736,"./immediateProvider":746,tslib:814}],735:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AsapScheduler=void 0;var _tslib=require("tslib");var _AsyncScheduler=require("./AsyncScheduler");var AsapScheduler=function(_super){(0,_tslib.__extends)(AsapScheduler,_super);function AsapScheduler(){return _super!==null&&_super.apply(this,arguments)||this}AsapScheduler.prototype.flush=function(action){this._active=true;var flushId=this._scheduled;this._scheduled=undefined;var actions=this.actions;var error;action=action||actions.shift();do{if(error=action.execute(action.state,action.delay)){break}}while((action=actions[0])&&action.id===flushId&&actions.shift());this._active=false;if(error){while((action=actions[0])&&action.id===flushId&&actions.shift()){action.unsubscribe()}throw error}};return AsapScheduler}(_AsyncScheduler.AsyncScheduler);exports.AsapScheduler=AsapScheduler},{"./AsyncScheduler":737,tslib:814}],736:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AsyncAction=void 0;var _tslib=require("tslib");var _Action=require("./Action");var _intervalProvider=require("./intervalProvider");var _arrRemove=require("../util/arrRemove");var AsyncAction=function(_super){(0,_tslib.__extends)(AsyncAction,_super);function AsyncAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;_this.scheduler=scheduler;_this.work=work;_this.pending=false;return _this}AsyncAction.prototype.schedule=function(state,delay){var _a;if(delay===void 0){delay=0}if(this.closed){return this}this.state=state;var id=this.id;var scheduler=this.scheduler;if(id!=null){this.id=this.recycleAsyncId(scheduler,id,delay)}this.pending=true;this.delay=delay;this.id=(_a=this.id)!==null&&_a!==void 0?_a:this.requestAsyncId(scheduler,this.id,delay);return this};AsyncAction.prototype.requestAsyncId=function(scheduler,_id,delay){if(delay===void 0){delay=0}return _intervalProvider.intervalProvider.setInterval(scheduler.flush.bind(scheduler,this),delay)};AsyncAction.prototype.recycleAsyncId=function(_scheduler,id,delay){if(delay===void 0){delay=0}if(delay!=null&&this.delay===delay&&this.pending===false){return id}if(id!=null){_intervalProvider.intervalProvider.clearInterval(id)}return undefined};AsyncAction.prototype.execute=function(state,delay){if(this.closed){return new Error("executing a cancelled action")}this.pending=false;var error=this._execute(state,delay);if(error){return error}else if(this.pending===false&&this.id!=null){this.id=this.recycleAsyncId(this.scheduler,this.id,null)}};AsyncAction.prototype._execute=function(state,_delay){var errored=false;var errorValue;try{this.work(state)}catch(e){errored=true;errorValue=e?e:new Error("Scheduled action threw falsy error")}if(errored){this.unsubscribe();return errorValue}};AsyncAction.prototype.unsubscribe=function(){if(!this.closed){var _a=this,id=_a.id,scheduler=_a.scheduler;var actions=scheduler.actions;this.work=this.state=this.scheduler=null;this.pending=false;(0,_arrRemove.arrRemove)(actions,this);if(id!=null){this.id=this.recycleAsyncId(scheduler,id,null)}this.delay=null;_super.prototype.unsubscribe.call(this)}};return AsyncAction}(_Action.Action);exports.AsyncAction=AsyncAction},{"../util/arrRemove":764,"./Action":731,"./intervalProvider":747,tslib:814}],737:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AsyncScheduler=void 0;var _tslib=require("tslib");var _Scheduler=require("../Scheduler");var AsyncScheduler=function(_super){(0,_tslib.__extends)(AsyncScheduler,_super);function AsyncScheduler(SchedulerAction,now){if(now===void 0){now=_Scheduler.Scheduler.now}var _this=_super.call(this,SchedulerAction,now)||this;_this.actions=[];_this._active=false;return _this}AsyncScheduler.prototype.flush=function(action){var actions=this.actions;if(this._active){actions.push(action);return}var error;this._active=true;do{if(error=action.execute(action.state,action.delay)){break}}while(action=actions.shift());this._active=false;if(error){while(action=actions.shift()){action.unsubscribe()}throw error}};return AsyncScheduler}(_Scheduler.Scheduler);exports.AsyncScheduler=AsyncScheduler},{"../Scheduler":571,tslib:814}],738:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueueAction=void 0;var _tslib=require("tslib");var _AsyncAction=require("./AsyncAction");var QueueAction=function(_super){(0,_tslib.__extends)(QueueAction,_super);function QueueAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;_this.scheduler=scheduler;_this.work=work;return _this}QueueAction.prototype.schedule=function(state,delay){if(delay===void 0){delay=0}if(delay>0){return _super.prototype.schedule.call(this,state,delay)}this.delay=delay;this.state=state;this.scheduler.flush(this);return this};QueueAction.prototype.execute=function(state,delay){return delay>0||this.closed?_super.prototype.execute.call(this,state,delay):this._execute(state,delay)};QueueAction.prototype.requestAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0}if(delay!=null&&delay>0||delay==null&&this.delay>0){return _super.prototype.requestAsyncId.call(this,scheduler,id,delay)}scheduler.flush(this);return 0};return QueueAction}(_AsyncAction.AsyncAction);exports.QueueAction=QueueAction},{"./AsyncAction":736,tslib:814}],739:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueueScheduler=void 0;var _tslib=require("tslib");var _AsyncScheduler=require("./AsyncScheduler");var QueueScheduler=function(_super){(0,_tslib.__extends)(QueueScheduler,_super);function QueueScheduler(){return _super!==null&&_super.apply(this,arguments)||this}return QueueScheduler}(_AsyncScheduler.AsyncScheduler);exports.QueueScheduler=QueueScheduler},{"./AsyncScheduler":737,tslib:814}],740:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VirtualTimeScheduler=exports.VirtualAction=void 0;var _tslib=require("tslib");var _AsyncAction=require("./AsyncAction");var _Subscription=require("../Subscription");var _AsyncScheduler=require("./AsyncScheduler");var VirtualTimeScheduler=function(_super){(0,_tslib.__extends)(VirtualTimeScheduler,_super);function VirtualTimeScheduler(schedulerActionCtor,maxFrames){if(schedulerActionCtor===void 0){schedulerActionCtor=VirtualAction}if(maxFrames===void 0){maxFrames=Infinity}var _this=_super.call(this,schedulerActionCtor,function(){return _this.frame})||this;_this.maxFrames=maxFrames;_this.frame=0;_this.index=-1;return _this}VirtualTimeScheduler.prototype.flush=function(){var _a=this,actions=_a.actions,maxFrames=_a.maxFrames;var error;var action;while((action=actions[0])&&action.delay<=maxFrames){actions.shift();this.frame=action.delay;if(error=action.execute(action.state,action.delay)){break}}if(error){while(action=actions.shift()){action.unsubscribe()}throw error}};VirtualTimeScheduler.frameTimeFactor=10;return VirtualTimeScheduler}(_AsyncScheduler.AsyncScheduler);exports.VirtualTimeScheduler=VirtualTimeScheduler;var VirtualAction=function(_super){(0,_tslib.__extends)(VirtualAction,_super);function VirtualAction(scheduler,work,index){if(index===void 0){index=scheduler.index+=1}var _this=_super.call(this,scheduler,work)||this;_this.scheduler=scheduler;_this.work=work;_this.index=index;_this.active=true;_this.index=scheduler.index=index;return _this}VirtualAction.prototype.schedule=function(state,delay){if(delay===void 0){delay=0}if(Number.isFinite(delay)){if(!this.id){return _super.prototype.schedule.call(this,state,delay)}this.active=false;var action=new VirtualAction(this.scheduler,this.work);this.add(action);return action.schedule(state,delay)}else{return _Subscription.Subscription.EMPTY}};VirtualAction.prototype.requestAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0}this.delay=scheduler.frame+delay;var actions=scheduler.actions;actions.push(this);actions.sort(VirtualAction.sortActions);return 1};VirtualAction.prototype.recycleAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0}return undefined};VirtualAction.prototype._execute=function(state,delay){if(this.active===true){return _super.prototype._execute.call(this,state,delay)}};VirtualAction.sortActions=function(a,b){if(a.delay===b.delay){if(a.index===b.index){return 0}else if(a.index>b.index){return 1}else{return-1}}else if(a.delay>b.delay){return 1}else{return-1}};return VirtualAction}(_AsyncAction.AsyncAction);exports.VirtualAction=VirtualAction},{"../Subscription":574,"./AsyncAction":736,"./AsyncScheduler":737,tslib:814}],741:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.animationFrameScheduler=exports.animationFrame=void 0;var _AnimationFrameAction=require("./AnimationFrameAction");var _AnimationFrameScheduler=require("./AnimationFrameScheduler");var animationFrameScheduler=new _AnimationFrameScheduler.AnimationFrameScheduler(_AnimationFrameAction.AnimationFrameAction);exports.animationFrameScheduler=animationFrameScheduler;var animationFrame=animationFrameScheduler;exports.animationFrame=animationFrame},{"./AnimationFrameAction":732,"./AnimationFrameScheduler":733}],742:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.animationFrameProvider=void 0;var _tslib=require("tslib");var _Subscription=require("../Subscription");var animationFrameProvider={schedule:function(callback){var request=requestAnimationFrame;var cancel=cancelAnimationFrame;var delegate=animationFrameProvider.delegate;if(delegate){request=delegate.requestAnimationFrame;cancel=delegate.cancelAnimationFrame}var handle=request(function(timestamp){cancel=undefined;callback(timestamp)});return new _Subscription.Subscription(function(){return cancel===null||cancel===void 0?void 0:cancel(handle)})},requestAnimationFrame:function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var delegate=animationFrameProvider.delegate;return((delegate===null||delegate===void 0?void 0:delegate.requestAnimationFrame)||requestAnimationFrame).apply(void 0,(0,_tslib.__spreadArray)([],(0,_tslib.__read)(args)))},cancelAnimationFrame:function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var delegate=animationFrameProvider.delegate;return((delegate===null||delegate===void 0?void 0:delegate.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,(0,_tslib.__spreadArray)([],(0,_tslib.__read)(args)))},delegate:undefined};exports.animationFrameProvider=animationFrameProvider},{"../Subscription":574,tslib:814}],743:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.asapScheduler=exports.asap=void 0;var _AsapAction=require("./AsapAction");var _AsapScheduler=require("./AsapScheduler");var asapScheduler=new _AsapScheduler.AsapScheduler(_AsapAction.AsapAction);exports.asapScheduler=asapScheduler;var asap=asapScheduler;exports.asap=asap},{"./AsapAction":734,"./AsapScheduler":735}],744:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.asyncScheduler=exports.async=void 0;var _AsyncAction=require("./AsyncAction");var _AsyncScheduler=require("./AsyncScheduler");var asyncScheduler=new _AsyncScheduler.AsyncScheduler(_AsyncAction.AsyncAction);exports.asyncScheduler=asyncScheduler;var async=asyncScheduler;exports.async=async},{"./AsyncAction":736,"./AsyncScheduler":737}],745:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dateTimestampProvider=void 0;var dateTimestampProvider={now:function(){return(dateTimestampProvider.delegate||Date).now()},delegate:undefined};exports.dateTimestampProvider=dateTimestampProvider},{}],746:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.immediateProvider=void 0;var _tslib=require("tslib");var _Immediate=require("../util/Immediate");var setImmediate=_Immediate.Immediate.setImmediate,clearImmediate=_Immediate.Immediate.clearImmediate;var immediateProvider={setImmediate:function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var delegate=immediateProvider.delegate;return((delegate===null||delegate===void 0?void 0:delegate.setImmediate)||setImmediate).apply(void 0,(0,_tslib.__spreadArray)([],(0,_tslib.__read)(args)))},clearImmediate:function(handle){var delegate=immediateProvider.delegate;return((delegate===null||delegate===void 0?void 0:delegate.clearImmediate)||clearImmediate)(handle)},delegate:undefined};exports.immediateProvider=immediateProvider},{"../util/Immediate":756,tslib:814}],747:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.intervalProvider=void 0;var _tslib=require("tslib");var intervalProvider={setInterval:function(handler,timeout){var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i]}var delegate=intervalProvider.delegate;if(delegate===null||delegate===void 0?void 0:delegate.setInterval){return delegate.setInterval.apply(delegate,(0,_tslib.__spreadArray)([handler,timeout],(0,_tslib.__read)(args)))}return setInterval.apply(void 0,(0,_tslib.__spreadArray)([handler,timeout],(0,_tslib.__read)(args)))},clearInterval:function(handle){var delegate=intervalProvider.delegate;return((delegate===null||delegate===void 0?void 0:delegate.clearInterval)||clearInterval)(handle)},delegate:undefined};exports.intervalProvider=intervalProvider},{tslib:814}],748:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.performanceTimestampProvider=void 0;var performanceTimestampProvider={now:function(){return(performanceTimestampProvider.delegate||performance).now()},delegate:undefined};exports.performanceTimestampProvider=performanceTimestampProvider},{}],749:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.queueScheduler=exports.queue=void 0;var _QueueAction=require("./QueueAction");var _QueueScheduler=require("./QueueScheduler");var queueScheduler=new _QueueScheduler.QueueScheduler(_QueueAction.QueueAction);exports.queueScheduler=queueScheduler;var queue=queueScheduler;exports.queue=queue},{"./QueueAction":738,"./QueueScheduler":739}],750:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.timeoutProvider=void 0;var _tslib=require("tslib");var timeoutProvider={setTimeout:function(handler,timeout){var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i]}var delegate=timeoutProvider.delegate;if(delegate===null||delegate===void 0?void 0:delegate.setTimeout){return delegate.setTimeout.apply(delegate,(0,_tslib.__spreadArray)([handler,timeout],(0,_tslib.__read)(args)))}return setTimeout.apply(void 0,(0,_tslib.__spreadArray)([handler,timeout],(0,_tslib.__read)(args)))},clearTimeout:function(handle){var delegate=timeoutProvider.delegate;return((delegate===null||delegate===void 0?void 0:delegate.clearTimeout)||clearTimeout)(handle)},delegate:undefined};exports.timeoutProvider=timeoutProvider},{tslib:814}],751:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSymbolIterator=getSymbolIterator;exports.iterator=void 0;function getSymbolIterator(){if(typeof Symbol!=="function"||!Symbol.iterator){return"@@iterator"}return Symbol.iterator}var iterator=getSymbolIterator();exports.iterator=iterator},{}],752:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.observable=void 0;var observable=function(){return typeof Symbol==="function"&&Symbol.observable||"@@observable"}();exports.observable=observable},{}],753:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true})},{}],754:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ArgumentOutOfRangeError=void 0;var _createErrorClass=require("./createErrorClass");var ArgumentOutOfRangeError=(0,_createErrorClass.createErrorClass)(function(_super){return function ArgumentOutOfRangeErrorImpl(){_super(this);this.name="ArgumentOutOfRangeError";this.message="argument out of range"}});exports.ArgumentOutOfRangeError=ArgumentOutOfRangeError},{"./createErrorClass":765}],755:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmptyError=void 0;var _createErrorClass=require("./createErrorClass");var EmptyError=(0,_createErrorClass.createErrorClass)(function(_super){return function EmptyErrorImpl(){_super(this);this.name="EmptyError";this.message="no elements in sequence"}});exports.EmptyError=EmptyError},{"./createErrorClass":765}],756:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TestTools=exports.Immediate=void 0;var nextHandle=1;var resolved;var activeHandles={};function findAndClearHandle(handle){if(handle in activeHandles){delete activeHandles[handle];return true}return false}var Immediate={setImmediate:function(cb){var handle=nextHandle++;activeHandles[handle]=true;if(!resolved){resolved=Promise.resolve()}resolved.then(function(){return findAndClearHandle(handle)&&cb()});return handle},clearImmediate:function(handle){findAndClearHandle(handle)}};exports.Immediate=Immediate;var TestTools={pending:function(){return Object.keys(activeHandles).length}};exports.TestTools=TestTools},{}],757:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NotFoundError=void 0;var _createErrorClass=require("./createErrorClass");var NotFoundError=(0,_createErrorClass.createErrorClass)(function(_super){return function NotFoundErrorImpl(message){_super(this);this.name="NotFoundError";this.message=message}});exports.NotFoundError=NotFoundError},{"./createErrorClass":765}],758:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ObjectUnsubscribedError=void 0;var _createErrorClass=require("./createErrorClass");var ObjectUnsubscribedError=(0,_createErrorClass.createErrorClass)(function(_super){return function ObjectUnsubscribedErrorImpl(){_super(this);this.name="ObjectUnsubscribedError";this.message="object unsubscribed"}});exports.ObjectUnsubscribedError=ObjectUnsubscribedError},{"./createErrorClass":765}],759:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SequenceError=void 0;var _createErrorClass=require("./createErrorClass");var SequenceError=(0,_createErrorClass.createErrorClass)(function(_super){return function SequenceErrorImpl(message){_super(this);this.name="SequenceError";this.message=message}});exports.SequenceError=SequenceError},{"./createErrorClass":765}],760:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UnsubscriptionError=void 0;var _createErrorClass=require("./createErrorClass");var UnsubscriptionError=(0,_createErrorClass.createErrorClass)(function(_super){return function UnsubscriptionErrorImpl(errors){_super(this);this.message=errors?errors.length+" errors occurred during unsubscription:\n"+errors.map(function(err,i){return i+1+") "+err.toString()}).join("\n  "):"";this.name="UnsubscriptionError";this.errors=errors}});exports.UnsubscriptionError=UnsubscriptionError},{"./createErrorClass":765}],761:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.popNumber=popNumber;exports.popResultSelector=popResultSelector;exports.popScheduler=popScheduler;var _isFunction=require("./isFunction");var _isScheduler=require("./isScheduler");function last(arr){return arr[arr.length-1]}function popResultSelector(args){return(0,_isFunction.isFunction)(last(args))?args.pop():undefined}function popScheduler(args){return(0,_isScheduler.isScheduler)(last(args))?args.pop():undefined}function popNumber(args,defaultValue){return typeof last(args)==="number"?args.pop():defaultValue}},{"./isFunction":773,"./isScheduler":779}],762:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.argsArgArrayOrObject=argsArgArrayOrObject;var isArray=Array.isArray;var getPrototypeOf=Object.getPrototypeOf,objectProto=Object.prototype,getKeys=Object.keys;function argsArgArrayOrObject(args){if(args.length===1){var first_1=args[0];if(isArray(first_1)){return{args:first_1,keys:null}}if(isPOJO(first_1)){var keys=getKeys(first_1);return{args:keys.map(function(key){return first_1[key]}),keys:keys}}}return{args:args,keys:null}}function isPOJO(obj){return obj&&typeof obj==="object"&&getPrototypeOf(obj)===objectProto}},{}],763:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.argsOrArgArray=argsOrArgArray;var isArray=Array.isArray;function argsOrArgArray(args){return args.length===1&&isArray(args[0])?args[0]:args}},{}],764:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.arrRemove=arrRemove;function arrRemove(arr,item){if(arr){var index=arr.indexOf(item);0<=index&&arr.splice(index,1)}}},{}],765:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createErrorClass=createErrorClass;function createErrorClass(createImpl){var _super=function(instance){Error.call(instance);instance.stack=(new Error).stack};var ctorFunc=createImpl(_super);ctorFunc.prototype=Object.create(Error.prototype);ctorFunc.prototype.constructor=ctorFunc;return ctorFunc}},{}],766:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createObject=createObject;function createObject(keys,values){return keys.reduce(function(result,key,i){return result[key]=values[i],result},{})}},{}],767:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.captureError=captureError;exports.errorContext=errorContext;var _config=require("../config");var context=null;function errorContext(cb){if(_config.config.useDeprecatedSynchronousErrorHandling){var isRoot=!context;if(isRoot){context={errorThrown:false,error:null}}cb();if(isRoot){var _a=context,errorThrown=_a.errorThrown,error=_a.error;context=null;if(errorThrown){throw error}}}else{cb()}}function captureError(err){if(_config.config.useDeprecatedSynchronousErrorHandling&&context){context.errorThrown=true;context.error=err}}},{"../config":575}],768:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.executeSchedule=executeSchedule;function executeSchedule(parentSubscription,scheduler,work,delay,repeat){if(delay===void 0){delay=0}if(repeat===void 0){repeat=false}var scheduleSubscription=scheduler.schedule(function(){work();if(repeat){parentSubscription.add(this.schedule(null,delay))}else{this.unsubscribe()}},delay);parentSubscription.add(scheduleSubscription);if(!repeat){return scheduleSubscription}}},{}],769:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.identity=identity;function identity(x){return x}},{}],770:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isArrayLike=void 0;var isArrayLike=function(x){return x&&typeof x.length==="number"&&typeof x!=="function"};exports.isArrayLike=isArrayLike},{}],771:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isAsyncIterable=isAsyncIterable;var _isFunction=require("./isFunction");function isAsyncIterable(obj){return Symbol.asyncIterator&&(0,_isFunction.isFunction)(obj===null||obj===void 0?void 0:obj[Symbol.asyncIterator])}},{"./isFunction":773}],772:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isValidDate=isValidDate;function isValidDate(value){return value instanceof Date&&!isNaN(value)}},{}],773:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isFunction=isFunction;function isFunction(value){return typeof value==="function"}},{}],774:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isInteropObservable=isInteropObservable;var _observable=require("../symbol/observable");var _isFunction=require("./isFunction");function isInteropObservable(input){return(0,_isFunction.isFunction)(input[_observable.observable])}},{"../symbol/observable":752,"./isFunction":773}],775:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isIterable=isIterable;var _iterator=require("../symbol/iterator");var _isFunction=require("./isFunction");function isIterable(input){return(0,_isFunction.isFunction)(input===null||input===void 0?void 0:input[_iterator.iterator])}},{"../symbol/iterator":751,"./isFunction":773}],776:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isObservable=isObservable;var _Observable=require("../Observable");var _isFunction=require("./isFunction");function isObservable(obj){return!!obj&&(obj instanceof _Observable.Observable||(0,_isFunction.isFunction)(obj.lift)&&(0,_isFunction.isFunction)(obj.subscribe))}},{"../Observable":569,"./isFunction":773}],777:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isPromise=isPromise;var _isFunction=require("./isFunction");function isPromise(value){return(0,_isFunction.isFunction)(value===null||value===void 0?void 0:value.then)}},{"./isFunction":773}],778:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isReadableStreamLike=isReadableStreamLike;exports.readableStreamLikeToAsyncGenerator=readableStreamLikeToAsyncGenerator;var _tslib=require("tslib");var _isFunction=require("./isFunction");function readableStreamLikeToAsyncGenerator(readableStream){return(0,_tslib.__asyncGenerator)(this,arguments,function readableStreamLikeToAsyncGenerator_1(){var reader,_a,value,done;return(0,_tslib.__generator)(this,function(_b){switch(_b.label){case 0:reader=readableStream.getReader();_b.label=1;case 1:_b.trys.push([1,,9,10]);_b.label=2;case 2:if(!true)return[3,8];return[4,(0,_tslib.__await)(reader.read())];case 3:_a=_b.sent(),value=_a.value,done=_a.done;if(!done)return[3,5];return[4,(0,_tslib.__await)(void 0)];case 4:return[2,_b.sent()];case 5:return[4,(0,_tslib.__await)(value)];case 6:return[4,_b.sent()];case 7:_b.sent();return[3,2];case 8:return[3,10];case 9:reader.releaseLock();return[7];case 10:return[2]}})})}function isReadableStreamLike(obj){return(0,_isFunction.isFunction)(obj===null||obj===void 0?void 0:obj.getReader)}},{"./isFunction":773,tslib:814}],779:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isScheduler=isScheduler;var _isFunction=require("./isFunction");function isScheduler(value){return value&&(0,_isFunction.isFunction)(value.schedule)}},{"./isFunction":773}],780:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hasLift=hasLift;exports.operate=operate;var _isFunction=require("./isFunction");function hasLift(source){return(0,_isFunction.isFunction)(source===null||source===void 0?void 0:source.lift)}function operate(init){return function(source){if(hasLift(source)){return source.lift(function(liftedSource){try{return init(liftedSource,this)}catch(err){this.error(err)}})}throw new TypeError("Unable to lift unknown Observable type")}}},{"./isFunction":773}],781:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapOneOrManyArgs=mapOneOrManyArgs;var _tslib=require("tslib");var _map=require("../operators/map");var isArray=Array.isArray;function callOrApply(fn,args){return isArray(args)?fn.apply(void 0,(0,_tslib.__spreadArray)([],(0,_tslib.__read)(args))):fn(args)}function mapOneOrManyArgs(fn){return(0,_map.map)(function(args){return callOrApply(fn,args)})}},{"../operators/map":656,tslib:814}],782:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.noop=noop;function noop(){}},{}],783:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.not=not;function not(pred,thisArg){return function(value,index){return!pred.call(thisArg,value,index)}}},{}],784:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pipe=pipe;exports.pipeFromArray=pipeFromArray;var _identity=require("./identity");function pipe(){var fns=[];for(var _i=0;_i<arguments.length;_i++){fns[_i]=arguments[_i]}return pipeFromArray(fns)}function pipeFromArray(fns){if(fns.length===0){return _identity.identity}if(fns.length===1){return fns[0]}return function piped(input){return fns.reduce(function(prev,fn){return fn(prev)},input)}}},{"./identity":769}],785:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.reportUnhandledError=reportUnhandledError;var _config=require("../config");var _timeoutProvider=require("../scheduler/timeoutProvider");function reportUnhandledError(err){_timeoutProvider.timeoutProvider.setTimeout(function(){var onUnhandledError=_config.config.onUnhandledError;if(onUnhandledError){onUnhandledError(err)}else{throw err}})}},{"../config":575,"../scheduler/timeoutProvider":750}],786:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createInvalidObservableTypeError=createInvalidObservableTypeError;function createInvalidObservableTypeError(input){return new TypeError("You provided "+(input!==null&&typeof input==="object"?"an invalid object":"'"+input+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}},{}],787:[function(require,module,exports){var buffer=require("buffer");var Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src){dst[key]=src[key]}}if(Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow){module.exports=buffer}else{copyProps(buffer,exports);exports.Buffer=SafeBuffer}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}SafeBuffer.prototype=Object.create(Buffer.prototype);copyProps(Buffer,SafeBuffer);SafeBuffer.from=function(arg,encodingOrOffset,length){if(typeof arg==="number"){throw new TypeError("Argument must not be a number")}return Buffer(arg,encodingOrOffset,length)};SafeBuffer.alloc=function(size,fill,encoding){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}var buf=Buffer(size);if(fill!==undefined){if(typeof encoding==="string"){buf.fill(fill,encoding)}else{buf.fill(fill)}}else{buf.fill(0)}return buf};SafeBuffer.allocUnsafe=function(size){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}return Buffer(size)};SafeBuffer.allocUnsafeSlow=function(size){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}return buffer.SlowBuffer(size)}},{buffer:269}],788:[function(require,module,exports){(function(process){(function(){"use strict";var buffer=require("buffer");var Buffer=buffer.Buffer;var safer={};var key;for(key in buffer){if(!buffer.hasOwnProperty(key))continue;if(key==="SlowBuffer"||key==="Buffer")continue;safer[key]=buffer[key]}var Safer=safer.Buffer={};for(key in Buffer){if(!Buffer.hasOwnProperty(key))continue;if(key==="allocUnsafe"||key==="allocUnsafeSlow")continue;Safer[key]=Buffer[key]}safer.Buffer.prototype=Buffer.prototype;if(!Safer.from||Safer.from===Uint8Array.from){Safer.from=function(value,encodingOrOffset,length){if(typeof value==="number"){throw new TypeError('The "value" argument must not be of type number. Received type '+typeof value)}if(value&&typeof value.length==="undefined"){throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof value)}return Buffer(value,encodingOrOffset,length)}}if(!Safer.alloc){Safer.alloc=function(size,fill,encoding){if(typeof size!=="number"){throw new TypeError('The "size" argument must be of type number. Received type '+typeof size)}if(size<0||size>=2*(1<<30)){throw new RangeError('The value "'+size+'" is invalid for option "size"')}var buf=Buffer(size);if(!fill||fill.length===0){buf.fill(0)}else if(typeof encoding==="string"){buf.fill(fill,encoding)}else{buf.fill(fill)}return buf}}if(!safer.kStringMaxLength){try{safer.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}}if(!safer.constants){safer.constants={MAX_LENGTH:safer.kMaxLength};if(safer.kStringMaxLength){safer.constants.MAX_STRING_LENGTH=safer.kStringMaxLength}}module.exports=safer}).call(this)}).call(this,require("_process"))},{_process:519,buffer:269}],789:[function(require,module,exports){var Buffer=require("safe-buffer").Buffer;function Hash(blockSize,finalSize){this._block=Buffer.alloc(blockSize);this._finalSize=finalSize;this._blockSize=blockSize;this._len=0}Hash.prototype.update=function(data,enc){if(typeof data==="string"){enc=enc||"utf8";data=Buffer.from(data,enc)}var block=this._block;var blockSize=this._blockSize;var length=data.length;var accum=this._len;for(var offset=0;offset<length;){var assigned=accum%blockSize;var remainder=Math.min(length-offset,blockSize-assigned);for(var i=0;i<remainder;i++){block[assigned+i]=data[offset+i]}accum+=remainder;offset+=remainder;if(accum%blockSize===0){this._update(block)}}this._len+=length;return this};Hash.prototype.digest=function(enc){var rem=this._len%this._blockSize;this._block[rem]=128;this._block.fill(0,rem+1);if(rem>=this._finalSize){this._update(this._block);this._block.fill(0)}var bits=this._len*8;if(bits<=4294967295){this._block.writeUInt32BE(bits,this._blockSize-4)}else{var lowBits=(bits&4294967295)>>>0;var highBits=(bits-lowBits)/4294967296;this._block.writeUInt32BE(highBits,this._blockSize-8);this._block.writeUInt32BE(lowBits,this._blockSize-4)}this._update(this._block);var hash=this._hash();return enc?hash.toString(enc):hash};Hash.prototype._update=function(){throw new Error("_update must be implemented by subclass")};module.exports=Hash},{"safe-buffer":787}],790:[function(require,module,exports){var exports=module.exports=function SHA(algorithm){algorithm=algorithm.toLowerCase();var Algorithm=exports[algorithm];if(!Algorithm)throw new Error(algorithm+" is not supported (we accept pull requests)");return new Algorithm};exports.sha=require("./sha");exports.sha1=require("./sha1");exports.sha224=require("./sha224");exports.sha256=require("./sha256");exports.sha384=require("./sha384");exports.sha512=require("./sha512")},{"./sha":791,"./sha1":792,"./sha224":793,"./sha256":794,"./sha384":795,"./sha512":796}],791:[function(require,module,exports){var inherits=require("inherits");var Hash=require("./hash");var Buffer=require("safe-buffer").Buffer;var K=[1518500249,1859775393,2400959708|0,3395469782|0];var W=new Array(80);function Sha(){this.init();this._w=W;Hash.call(this,64,56)}inherits(Sha,Hash);Sha.prototype.init=function(){this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520;return this};function rotl5(num){return num<<5|num>>>27}function rotl30(num){return num<<30|num>>>2}function ft(s,b,c,d){if(s===0)return b&c|~b&d;if(s===2)return b&c|b&d|c&d;return b^c^d}Sha.prototype._update=function(M){var W=this._w;var a=this._a|0;var b=this._b|0;var c=this._c|0;var d=this._d|0;var e=this._e|0;for(var i=0;i<16;++i)W[i]=M.readInt32BE(i*4);for(;i<80;++i)W[i]=W[i-3]^W[i-8]^W[i-14]^W[i-16];for(var j=0;j<80;++j){var s=~~(j/20);var t=rotl5(a)+ft(s,b,c,d)+e+W[j]+K[s]|0;e=d;d=c;c=rotl30(b);b=a;a=t}this._a=a+this._a|0;this._b=b+this._b|0;this._c=c+this._c|0;this._d=d+this._d|0;this._e=e+this._e|0};Sha.prototype._hash=function(){var H=Buffer.allocUnsafe(20);H.writeInt32BE(this._a|0,0);H.writeInt32BE(this._b|0,4);H.writeInt32BE(this._c|0,8);H.writeInt32BE(this._d|0,12);H.writeInt32BE(this._e|0,16);return H};module.exports=Sha},{"./hash":789,inherits:492,"safe-buffer":787}],792:[function(require,module,exports){var inherits=require("inherits");var Hash=require("./hash");var Buffer=require("safe-buffer").Buffer;var K=[1518500249,1859775393,2400959708|0,3395469782|0];var W=new Array(80);function Sha1(){this.init();this._w=W;Hash.call(this,64,56)}inherits(Sha1,Hash);Sha1.prototype.init=function(){this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520;return this};function rotl1(num){return num<<1|num>>>31}function rotl5(num){return num<<5|num>>>27}function rotl30(num){return num<<30|num>>>2}function ft(s,b,c,d){if(s===0)return b&c|~b&d;if(s===2)return b&c|b&d|c&d;return b^c^d}Sha1.prototype._update=function(M){var W=this._w;var a=this._a|0;var b=this._b|0;var c=this._c|0;var d=this._d|0;var e=this._e|0;for(var i=0;i<16;++i)W[i]=M.readInt32BE(i*4);for(;i<80;++i)W[i]=rotl1(W[i-3]^W[i-8]^W[i-14]^W[i-16]);for(var j=0;j<80;++j){var s=~~(j/20);var t=rotl5(a)+ft(s,b,c,d)+e+W[j]+K[s]|0;e=d;d=c;c=rotl30(b);b=a;a=t}this._a=a+this._a|0;this._b=b+this._b|0;this._c=c+this._c|0;this._d=d+this._d|0;this._e=e+this._e|0};Sha1.prototype._hash=function(){var H=Buffer.allocUnsafe(20);H.writeInt32BE(this._a|0,0);H.writeInt32BE(this._b|0,4);H.writeInt32BE(this._c|0,8);H.writeInt32BE(this._d|0,12);H.writeInt32BE(this._e|0,16);return H};module.exports=Sha1},{"./hash":789,inherits:492,"safe-buffer":787}],793:[function(require,module,exports){var inherits=require("inherits");var Sha256=require("./sha256");var Hash=require("./hash");var Buffer=require("safe-buffer").Buffer;var W=new Array(64);function Sha224(){this.init();this._w=W;Hash.call(this,64,56)}inherits(Sha224,Sha256);Sha224.prototype.init=function(){this._a=3238371032;this._b=914150663;this._c=812702999;this._d=4144912697;this._e=4290775857;this._f=1750603025;this._g=1694076839;this._h=3204075428;return this};Sha224.prototype._hash=function(){var H=Buffer.allocUnsafe(28);H.writeInt32BE(this._a,0);H.writeInt32BE(this._b,4);H.writeInt32BE(this._c,8);H.writeInt32BE(this._d,12);H.writeInt32BE(this._e,16);H.writeInt32BE(this._f,20);H.writeInt32BE(this._g,24);return H};module.exports=Sha224},{"./hash":789,"./sha256":794,inherits:492,"safe-buffer":787}],794:[function(require,module,exports){var inherits=require("inherits");var Hash=require("./hash");var Buffer=require("safe-buffer").Buffer;var K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var W=new Array(64);function Sha256(){this.init();this._w=W;Hash.call(this,64,56)}inherits(Sha256,Hash);Sha256.prototype.init=function(){this._a=1779033703;this._b=3144134277;this._c=1013904242;this._d=2773480762;this._e=1359893119;this._f=2600822924;this._g=528734635;this._h=1541459225;return this};function ch(x,y,z){return z^x&(y^z)}function maj(x,y,z){return x&y|z&(x|y)}function sigma0(x){return(x>>>2|x<<30)^(x>>>13|x<<19)^(x>>>22|x<<10)}function sigma1(x){return(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7)}function gamma0(x){return(x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3}function gamma1(x){return(x>>>17|x<<15)^(x>>>19|x<<13)^x>>>10}Sha256.prototype._update=function(M){var W=this._w;var a=this._a|0;var b=this._b|0;var c=this._c|0;var d=this._d|0;var e=this._e|0;var f=this._f|0;var g=this._g|0;var h=this._h|0;for(var i=0;i<16;++i)W[i]=M.readInt32BE(i*4);for(;i<64;++i)W[i]=gamma1(W[i-2])+W[i-7]+gamma0(W[i-15])+W[i-16]|0;for(var j=0;j<64;++j){var T1=h+sigma1(e)+ch(e,f,g)+K[j]+W[j]|0;var T2=sigma0(a)+maj(a,b,c)|0;h=g;g=f;f=e;e=d+T1|0;d=c;c=b;b=a;a=T1+T2|0}this._a=a+this._a|0;this._b=b+this._b|0;this._c=c+this._c|0;this._d=d+this._d|0;this._e=e+this._e|0;this._f=f+this._f|0;this._g=g+this._g|0;this._h=h+this._h|0};Sha256.prototype._hash=function(){var H=Buffer.allocUnsafe(32);H.writeInt32BE(this._a,0);H.writeInt32BE(this._b,4);H.writeInt32BE(this._c,8);H.writeInt32BE(this._d,12);H.writeInt32BE(this._e,16);H.writeInt32BE(this._f,20);H.writeInt32BE(this._g,24);H.writeInt32BE(this._h,28);return H};module.exports=Sha256},{"./hash":789,inherits:492,"safe-buffer":787}],795:[function(require,module,exports){var inherits=require("inherits");var SHA512=require("./sha512");var Hash=require("./hash");var Buffer=require("safe-buffer").Buffer;var W=new Array(160);function Sha384(){this.init();this._w=W;Hash.call(this,128,112)}inherits(Sha384,SHA512);Sha384.prototype.init=function(){this._ah=3418070365;this._bh=1654270250;this._ch=2438529370;this._dh=355462360;this._eh=1731405415;this._fh=2394180231;this._gh=3675008525;this._hh=1203062813;this._al=3238371032;this._bl=914150663;this._cl=812702999;this._dl=4144912697;this._el=4290775857;this._fl=1750603025;this._gl=1694076839;this._hl=3204075428;return this};Sha384.prototype._hash=function(){var H=Buffer.allocUnsafe(48);function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset);H.writeInt32BE(l,offset+4)}writeInt64BE(this._ah,this._al,0);writeInt64BE(this._bh,this._bl,8);writeInt64BE(this._ch,this._cl,16);writeInt64BE(this._dh,this._dl,24);writeInt64BE(this._eh,this._el,32);writeInt64BE(this._fh,this._fl,40);return H};module.exports=Sha384},{"./hash":789,"./sha512":796,inherits:492,"safe-buffer":787}],796:[function(require,module,exports){var inherits=require("inherits");var Hash=require("./hash");var Buffer=require("safe-buffer").Buffer;var K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];var W=new Array(160);function Sha512(){this.init();this._w=W;Hash.call(this,128,112)}inherits(Sha512,Hash);Sha512.prototype.init=function(){this._ah=1779033703;this._bh=3144134277;this._ch=1013904242;this._dh=2773480762;this._eh=1359893119;this._fh=2600822924;this._gh=528734635;this._hh=1541459225;this._al=4089235720;this._bl=2227873595;this._cl=4271175723;this._dl=1595750129;this._el=2917565137;this._fl=725511199;this._gl=4215389547;this._hl=327033209;return this};function Ch(x,y,z){return z^x&(y^z)}function maj(x,y,z){return x&y|z&(x|y)}function sigma0(x,xl){return(x>>>28|xl<<4)^(xl>>>2|x<<30)^(xl>>>7|x<<25)}function sigma1(x,xl){return(x>>>14|xl<<18)^(x>>>18|xl<<14)^(xl>>>9|x<<23)}function Gamma0(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^x>>>7}function Gamma0l(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^(x>>>7|xl<<25)}function Gamma1(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^x>>>6}function Gamma1l(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^(x>>>6|xl<<26)}function getCarry(a,b){return a>>>0<b>>>0?1:0}Sha512.prototype._update=function(M){var W=this._w;var ah=this._ah|0;var bh=this._bh|0;var ch=this._ch|0;var dh=this._dh|0;var eh=this._eh|0;var fh=this._fh|0;var gh=this._gh|0;var hh=this._hh|0;var al=this._al|0;var bl=this._bl|0;var cl=this._cl|0;var dl=this._dl|0;var el=this._el|0;var fl=this._fl|0;var gl=this._gl|0;var hl=this._hl|0;for(var i=0;i<32;i+=2){W[i]=M.readInt32BE(i*4);W[i+1]=M.readInt32BE(i*4+4)}for(;i<160;i+=2){var xh=W[i-15*2];var xl=W[i-15*2+1];var gamma0=Gamma0(xh,xl);var gamma0l=Gamma0l(xl,xh);xh=W[i-2*2];xl=W[i-2*2+1];var gamma1=Gamma1(xh,xl);var gamma1l=Gamma1l(xl,xh);var Wi7h=W[i-7*2];var Wi7l=W[i-7*2+1];var Wi16h=W[i-16*2];var Wi16l=W[i-16*2+1];var Wil=gamma0l+Wi7l|0;var Wih=gamma0+Wi7h+getCarry(Wil,gamma0l)|0;Wil=Wil+gamma1l|0;Wih=Wih+gamma1+getCarry(Wil,gamma1l)|0;Wil=Wil+Wi16l|0;Wih=Wih+Wi16h+getCarry(Wil,Wi16l)|0;W[i]=Wih;W[i+1]=Wil}for(var j=0;j<160;j+=2){Wih=W[j];Wil=W[j+1];var majh=maj(ah,bh,ch);var majl=maj(al,bl,cl);var sigma0h=sigma0(ah,al);var sigma0l=sigma0(al,ah);var sigma1h=sigma1(eh,el);var sigma1l=sigma1(el,eh);var Kih=K[j];var Kil=K[j+1];var chh=Ch(eh,fh,gh);var chl=Ch(el,fl,gl);var t1l=hl+sigma1l|0;var t1h=hh+sigma1h+getCarry(t1l,hl)|0;t1l=t1l+chl|0;t1h=t1h+chh+getCarry(t1l,chl)|0;t1l=t1l+Kil|0;t1h=t1h+Kih+getCarry(t1l,Kil)|0;t1l=t1l+Wil|0;t1h=t1h+Wih+getCarry(t1l,Wil)|0;var t2l=sigma0l+majl|0;var t2h=sigma0h+majh+getCarry(t2l,sigma0l)|0;hh=gh;hl=gl;gh=fh;gl=fl;fh=eh;fl=el;el=dl+t1l|0;eh=dh+t1h+getCarry(el,dl)|0;dh=ch;dl=cl;ch=bh;cl=bl;bh=ah;bl=al;al=t1l+t2l|0;ah=t1h+t2h+getCarry(al,t1l)|0}this._al=this._al+al|0;this._bl=this._bl+bl|0;this._cl=this._cl+cl|0;this._dl=this._dl+dl|0;this._el=this._el+el|0;this._fl=this._fl+fl|0;this._gl=this._gl+gl|0;this._hl=this._hl+hl|0;this._ah=this._ah+ah+getCarry(this._al,al)|0;this._bh=this._bh+bh+getCarry(this._bl,bl)|0;this._ch=this._ch+ch+getCarry(this._cl,cl)|0;this._dh=this._dh+dh+getCarry(this._dl,dl)|0;this._eh=this._eh+eh+getCarry(this._el,el)|0;this._fh=this._fh+fh+getCarry(this._fl,fl)|0;this._gh=this._gh+gh+getCarry(this._gl,gl)|0;this._hh=this._hh+hh+getCarry(this._hl,hl)|0};Sha512.prototype._hash=function(){var H=Buffer.allocUnsafe(64);function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset);H.writeInt32BE(l,offset+4)}writeInt64BE(this._ah,this._al,0);writeInt64BE(this._bh,this._bl,8);writeInt64BE(this._ch,this._cl,16);writeInt64BE(this._dh,this._dl,24);writeInt64BE(this._eh,this._el,32);writeInt64BE(this._fh,this._fl,40);writeInt64BE(this._gh,this._gl,48);writeInt64BE(this._hh,this._hl,56);return H};module.exports=Sha512},{"./hash":789,inherits:492,"safe-buffer":787}],797:[function(require,module,exports){module.exports=Stream;var EE=require("events").EventEmitter;var inherits=require("inherits");inherits(Stream,EE);Stream.Readable=require("readable-stream/lib/_stream_readable.js");Stream.Writable=require("readable-stream/lib/_stream_writable.js");Stream.Duplex=require("readable-stream/lib/_stream_duplex.js");Stream.Transform=require("readable-stream/lib/_stream_transform.js");Stream.PassThrough=require("readable-stream/lib/_stream_passthrough.js");Stream.finished=require("readable-stream/lib/internal/streams/end-of-stream.js");Stream.pipeline=require("readable-stream/lib/internal/streams/pipeline.js");Stream.Stream=Stream;function Stream(){EE.call(this)}Stream.prototype.pipe=function(dest,options){var source=this;function ondata(chunk){if(dest.writable){if(false===dest.write(chunk)&&source.pause){source.pause()}}}source.on("data",ondata);function ondrain(){if(source.readable&&source.resume){source.resume()}}dest.on("drain",ondrain);if(!dest._isStdio&&(!options||options.end!==false)){source.on("end",onend);source.on("close",onclose)}var didOnEnd=false;function onend(){if(didOnEnd)return;didOnEnd=true;dest.end()}function onclose(){if(didOnEnd)return;didOnEnd=true;if(typeof dest.destroy==="function")dest.destroy()}function onerror(er){cleanup();if(EE.listenerCount(this,"error")===0){throw er}}source.on("error",onerror);dest.on("error",onerror);function cleanup(){source.removeListener("data",ondata);dest.removeListener("drain",ondrain);source.removeListener("end",onend);source.removeListener("close",onclose);source.removeListener("error",onerror);dest.removeListener("error",onerror);source.removeListener("end",cleanup);source.removeListener("close",cleanup);dest.removeListener("close",cleanup)}source.on("end",cleanup);source.on("close",cleanup);dest.on("close",cleanup);dest.emit("pipe",source);return dest}},{events:314,inherits:492,"readable-stream/lib/_stream_duplex.js":799,"readable-stream/lib/_stream_passthrough.js":800,"readable-stream/lib/_stream_readable.js":801,"readable-stream/lib/_stream_transform.js":802,"readable-stream/lib/_stream_writable.js":803,"readable-stream/lib/internal/streams/end-of-stream.js":807,"readable-stream/lib/internal/streams/pipeline.js":809}],798:[function(require,module,exports){arguments[4][254][0].apply(exports,arguments)},{dup:254}],799:[function(require,module,exports){arguments[4][255][0].apply(exports,arguments)},{"./_stream_readable":801,"./_stream_writable":803,_process:519,dup:255,inherits:492}],800:[function(require,module,exports){arguments[4][256][0].apply(exports,arguments)},{"./_stream_transform":802,dup:256,inherits:492}],801:[function(require,module,exports){arguments[4][257][0].apply(exports,arguments)},{"../errors":798,"./_stream_duplex":799,"./internal/streams/async_iterator":804,"./internal/streams/buffer_list":805,"./internal/streams/destroy":806,"./internal/streams/from":808,"./internal/streams/state":810,"./internal/streams/stream":811,_process:519,buffer:269,dup:257,events:314,inherits:492,"string_decoder/":812,util:226}],802:[function(require,module,exports){arguments[4][258][0].apply(exports,arguments)},{"../errors":798,"./_stream_duplex":799,dup:258,inherits:492}],803:[function(require,module,exports){arguments[4][259][0].apply(exports,arguments)},{"../errors":798,"./_stream_duplex":799,"./internal/streams/destroy":806,"./internal/streams/state":810,"./internal/streams/stream":811,_process:519,buffer:269,dup:259,inherits:492,"util-deprecate":816}],804:[function(require,module,exports){arguments[4][260][0].apply(exports,arguments)},{"./end-of-stream":807,_process:519,dup:260}],805:[function(require,module,exports){arguments[4][261][0].apply(exports,arguments)},{buffer:269,dup:261,util:226}],806:[function(require,module,exports){arguments[4][262][0].apply(exports,arguments)},{_process:519,dup:262}],807:[function(require,module,exports){arguments[4][263][0].apply(exports,arguments)},{"../../../errors":798,dup:263}],808:[function(require,module,exports){arguments[4][264][0].apply(exports,arguments)},{dup:264}],809:[function(require,module,exports){arguments[4][265][0].apply(exports,arguments)},{"../../../errors":798,"./end-of-stream":807,dup:265}],810:[function(require,module,exports){arguments[4][266][0].apply(exports,arguments)},{"../../../errors":798,dup:266}],811:[function(require,module,exports){arguments[4][267][0].apply(exports,arguments)},{dup:267,events:314}],812:[function(require,module,exports){"use strict";var Buffer=require("safe-buffer").Buffer;var isEncoding=Buffer.isEncoding||function(encoding){encoding=""+encoding;switch(encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function _normalizeEncoding(enc){if(!enc)return"utf8";var retried;while(true){switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase();retried=true}}}function normalizeEncoding(enc){var nenc=_normalizeEncoding(enc);if(typeof nenc!=="string"&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw new Error("Unknown encoding: "+enc);return nenc||enc}exports.StringDecoder=StringDecoder;function StringDecoder(encoding){this.encoding=normalizeEncoding(encoding);var nb;switch(this.encoding){case"utf16le":this.text=utf16Text;this.end=utf16End;nb=4;break;case"utf8":this.fillLast=utf8FillLast;nb=4;break;case"base64":this.text=base64Text;this.end=base64End;nb=3;break;default:this.write=simpleWrite;this.end=simpleEnd;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=Buffer.allocUnsafe(nb)}StringDecoder.prototype.write=function(buf){if(buf.length===0)return"";var r;var i;if(this.lastNeed){r=this.fillLast(buf);if(r===undefined)return"";i=this.lastNeed;this.lastNeed=0}else{i=0}if(i<buf.length)return r?r+this.text(buf,i):this.text(buf,i);return r||""};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length){buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length);this.lastNeed-=buf.length};function utf8CheckByte(byte){if(byte<=127)return 0;else if(byte>>5===6)return 2;else if(byte>>4===14)return 3;else if(byte>>3===30)return 4;return byte>>6===2?-1:-2}function utf8CheckIncomplete(self,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0)self.lastNeed=nb-1;return nb}if(--j<i||nb===-2)return 0;nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0)self.lastNeed=nb-2;return nb}if(--j<i||nb===-2)return 0;nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0){if(nb===2)nb=0;else self.lastNeed=nb-3}return nb}return 0}function utf8CheckExtraBytes(self,buf,p){if((buf[0]&192)!==128){self.lastNeed=0;return"�"}if(self.lastNeed>1&&buf.length>1){if((buf[1]&192)!==128){self.lastNeed=1;return"�"}if(self.lastNeed>2&&buf.length>2){if((buf[2]&192)!==128){self.lastNeed=2;return"�"}}}}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed;var r=utf8CheckExtraBytes(this,buf,p);if(r!==undefined)return r;if(this.lastNeed<=buf.length){buf.copy(this.lastChar,p,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}buf.copy(this.lastChar,p,0,buf.length);this.lastNeed-=buf.length}function utf8Text(buf,i){var total=utf8CheckIncomplete(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);buf.copy(this.lastChar,0,end);return buf.toString("utf8",i,end)}function utf8End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed)return r+"�";return r}function utf16Text(buf,i){if((buf.length-i)%2===0){var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(c>=55296&&c<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=buf[buf.length-2];this.lastChar[1]=buf[buf.length-1];return r.slice(0,-1)}}return r}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=buf[buf.length-1];return buf.toString("utf16le",i,buf.length-1)}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;if(n===0)return buf.toString("base64",i);this.lastNeed=3-n;this.lastTotal=3;if(n===1){this.lastChar[0]=buf[buf.length-1]}else{this.lastChar[0]=buf[buf.length-2];this.lastChar[1]=buf[buf.length-1]}return buf.toString("base64",i,buf.length-n)}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed)return r+this.lastChar.toString("base64",0,3-this.lastNeed);return r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}},{"safe-buffer":787}],813:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TextDecoder=TextDecoder;exports.TextEncoder=TextEncoder;function inRange(a,min,max){return min<=a&&a<=max}function ToDictionary(o){if(o===undefined)return{};if(o===Object(o))return o;throw TypeError("Could not convert argument to dictionary")}function stringToCodePoints(string){var s=String(string);var n=s.length;var i=0;var u=[];while(i<n){var c=s.charCodeAt(i);if(c<55296||c>57343){u.push(c)}else if(56320<=c&&c<=57343){u.push(65533)}else if(55296<=c&&c<=56319){if(i===n-1){u.push(65533)}else{var d=string.charCodeAt(i+1);if(56320<=d&&d<=57343){var a=c&1023;var b=d&1023;u.push(65536+(a<<10)+b);i+=1}else{u.push(65533)}}}i+=1}return u}function codePointsToString(code_points){var s="";for(var i=0;i<code_points.length;++i){var cp=code_points[i];if(cp<=65535){s+=String.fromCharCode(cp)}else{cp-=65536;s+=String.fromCharCode((cp>>10)+55296,(cp&1023)+56320)}}return s}var end_of_stream=-1;function Stream(tokens){this.tokens=[].slice.call(tokens)}Stream.prototype={endOfStream:function(){return!this.tokens.length},read:function(){if(!this.tokens.length)return end_of_stream;return this.tokens.shift()},prepend:function(token){if(Array.isArray(token)){var tokens=token;while(tokens.length)this.tokens.unshift(tokens.pop())}else{this.tokens.unshift(token)}},push:function(token){if(Array.isArray(token)){var tokens=token;while(tokens.length)this.tokens.push(tokens.shift())}else{this.tokens.push(token)}}};var finished=-1;function decoderError(fatal,opt_code_point){if(fatal)throw TypeError("Decoder error");return opt_code_point||65533}function Decoder(){}Decoder.prototype={handler:function(stream,bite){}};function Encoder(){}Encoder.prototype={handler:function(stream,code_point){}};var DEFAULT_ENCODING="utf-8";function TextDecoder(encoding,options){if(!(this instanceof TextDecoder)){return new TextDecoder(encoding,options)}encoding=encoding!==undefined?String(encoding).toLowerCase():DEFAULT_ENCODING;if(encoding!==DEFAULT_ENCODING){throw new Error("Encoding not supported. Only utf-8 is supported")}options=ToDictionary(options);this._streaming=false;this._BOMseen=false;this._decoder=null;this._fatal=Boolean(options["fatal"]);this._ignoreBOM=Boolean(options["ignoreBOM"]);Object.defineProperty(this,"encoding",{value:"utf-8"});Object.defineProperty(this,"fatal",{value:this._fatal});Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}TextDecoder.prototype={decode:function decode(input,options){var bytes;if(typeof input==="object"&&input instanceof ArrayBuffer){bytes=new Uint8Array(input)}else if(typeof input==="object"&&"buffer"in input&&input.buffer instanceof ArrayBuffer){bytes=new Uint8Array(input.buffer,input.byteOffset,input.byteLength)}else{bytes=new Uint8Array(0)}options=ToDictionary(options);if(!this._streaming){this._decoder=new UTF8Decoder({fatal:this._fatal});this._BOMseen=false}this._streaming=Boolean(options["stream"]);var input_stream=new Stream(bytes);var code_points=[];var result;while(!input_stream.endOfStream()){result=this._decoder.handler(input_stream,input_stream.read());if(result===finished)break;if(result===null)continue;if(Array.isArray(result))code_points.push.apply(code_points,result);else code_points.push(result)}if(!this._streaming){do{result=this._decoder.handler(input_stream,input_stream.read());if(result===finished)break;if(result===null)continue;if(Array.isArray(result))code_points.push.apply(code_points,result);else code_points.push(result)}while(!input_stream.endOfStream());this._decoder=null}if(code_points.length){if(["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen){if(code_points[0]===65279){this._BOMseen=true;code_points.shift()}else{this._BOMseen=true}}}return codePointsToString(code_points)}};function TextEncoder(encoding,options){if(!(this instanceof TextEncoder))return new TextEncoder(encoding,options);encoding=encoding!==undefined?String(encoding).toLowerCase():DEFAULT_ENCODING;if(encoding!==DEFAULT_ENCODING){throw new Error("Encoding not supported. Only utf-8 is supported")}options=ToDictionary(options);this._streaming=false;this._encoder=null;this._options={fatal:Boolean(options["fatal"])};Object.defineProperty(this,"encoding",{value:"utf-8"})}TextEncoder.prototype={encode:function encode(opt_string,options){opt_string=opt_string?String(opt_string):"";options=ToDictionary(options);if(!this._streaming)this._encoder=new UTF8Encoder(this._options);this._streaming=Boolean(options["stream"]);var bytes=[];var input_stream=new Stream(stringToCodePoints(opt_string));var result;while(!input_stream.endOfStream()){result=this._encoder.handler(input_stream,input_stream.read());if(result===finished)break;if(Array.isArray(result))bytes.push.apply(bytes,result);else bytes.push(result)}if(!this._streaming){while(true){result=this._encoder.handler(input_stream,input_stream.read());if(result===finished)break;if(Array.isArray(result))bytes.push.apply(bytes,result);else bytes.push(result)}this._encoder=null}return new Uint8Array(bytes)}};function UTF8Decoder(options){var fatal=options.fatal;var utf8_code_point=0,utf8_bytes_seen=0,utf8_bytes_needed=0,utf8_lower_boundary=128,utf8_upper_boundary=191;this.handler=function(stream,bite){if(bite===end_of_stream&&utf8_bytes_needed!==0){utf8_bytes_needed=0;return decoderError(fatal)}if(bite===end_of_stream)return finished;if(utf8_bytes_needed===0){if(inRange(bite,0,127)){return bite}if(inRange(bite,194,223)){utf8_bytes_needed=1;utf8_code_point=bite-192}else if(inRange(bite,224,239)){if(bite===224)utf8_lower_boundary=160;if(bite===237)utf8_upper_boundary=159;utf8_bytes_needed=2;utf8_code_point=bite-224}else if(inRange(bite,240,244)){if(bite===240)utf8_lower_boundary=144;if(bite===244)utf8_upper_boundary=143;utf8_bytes_needed=3;utf8_code_point=bite-240}else{return decoderError(fatal)}utf8_code_point=utf8_code_point<<6*utf8_bytes_needed;return null}if(!inRange(bite,utf8_lower_boundary,utf8_upper_boundary)){utf8_code_point=utf8_bytes_needed=utf8_bytes_seen=0;utf8_lower_boundary=128;utf8_upper_boundary=191;stream.prepend(bite);return decoderError(fatal)}utf8_lower_boundary=128;utf8_upper_boundary=191;utf8_bytes_seen+=1;utf8_code_point+=bite-128<<6*(utf8_bytes_needed-utf8_bytes_seen);if(utf8_bytes_seen!==utf8_bytes_needed)return null;var code_point=utf8_code_point;utf8_code_point=utf8_bytes_needed=utf8_bytes_seen=0;return code_point}}function UTF8Encoder(options){var fatal=options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream)return finished;if(inRange(code_point,0,127))return code_point;var count,offset;if(inRange(code_point,128,2047)){count=1;offset=192}else if(inRange(code_point,2048,65535)){count=2;offset=224}else if(inRange(code_point,65536,1114111)){count=3;offset=240}var bytes=[(code_point>>6*count)+offset];while(count>0){var temp=code_point>>6*(count-1);bytes.push(128|temp&63);count-=1}return bytes}}},{}],814:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.__assign=void 0;exports.__asyncDelegator=__asyncDelegator;exports.__asyncGenerator=__asyncGenerator;exports.__asyncValues=__asyncValues;exports.__await=__await;exports.__awaiter=__awaiter;exports.__classPrivateFieldGet=__classPrivateFieldGet;exports.__classPrivateFieldIn=__classPrivateFieldIn;exports.__classPrivateFieldSet=__classPrivateFieldSet;exports.__createBinding=void 0;exports.__decorate=__decorate;exports.__esDecorate=__esDecorate;exports.__exportStar=__exportStar;exports.__extends=__extends;exports.__generator=__generator;exports.__importDefault=__importDefault;exports.__importStar=__importStar;exports.__makeTemplateObject=__makeTemplateObject;exports.__metadata=__metadata;exports.__param=__param;exports.__propKey=__propKey;exports.__read=__read;exports.__rest=__rest;exports.__runInitializers=__runInitializers;exports.__setFunctionName=__setFunctionName;exports.__spread=__spread;exports.__spreadArray=__spreadArray;exports.__spreadArrays=__spreadArrays;exports.__values=__values;var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};function __extends(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){exports.__assign=__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};exports.__assign=__assign;function __rest(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]]}return t}function __decorate(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __esDecorate(ctor,descriptorIn,decorators,contextIn,initializers,extraInitializers){function accept(f){if(f!==void 0&&typeof f!=="function")throw new TypeError("Function expected");return f}var kind=contextIn.kind,key=kind==="getter"?"get":kind==="setter"?"set":"value";var target=!descriptorIn&&ctor?contextIn["static"]?ctor:ctor.prototype:null;var descriptor=descriptorIn||(target?Object.getOwnPropertyDescriptor(target,contextIn.name):{});var _,done=false;for(var i=decorators.length-1;i>=0;i--){var context={};for(var p in contextIn)context[p]=p==="access"?{}:contextIn[p];for(var p in contextIn.access)context.access[p]=contextIn.access[p];context.addInitializer=function(f){if(done)throw new TypeError("Cannot add initializers after decoration has completed");extraInitializers.push(accept(f||null))};var result=(0,decorators[i])(kind==="accessor"?{get:descriptor.get,set:descriptor.set}:descriptor[key],context);if(kind==="accessor"){if(result===void 0)continue;if(result===null||typeof result!=="object")throw new TypeError("Object expected");if(_=accept(result.get))descriptor.get=_;if(_=accept(result.set))descriptor.set=_;if(_=accept(result.init))initializers.push(_)}else if(_=accept(result)){if(kind==="field")initializers.push(_);else descriptor[key]=_}}if(target)Object.defineProperty(target,contextIn.name,descriptor);done=true}function __runInitializers(thisArg,initializers,value){var useValue=arguments.length>2;for(var i=0;i<initializers.length;i++){value=useValue?initializers[i].call(thisArg,value):initializers[i].call(thisArg)}return useValue?value:void 0}function __propKey(x){return typeof x==="symbol"?x:"".concat(x)}function __setFunctionName(f,name,prefix){if(typeof name==="symbol")name=name.description?"[".concat(name.description,"]"):"";return Object.defineProperty(f,"name",{configurable:true,value:prefix?"".concat(prefix," ",name):name})}function __metadata(metadataKey,metadataValue){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(g&&(g=0,op[0]&&(_=0)),_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}}var __createBinding=Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]};exports.__createBinding=__createBinding;function __exportStar(m,o){for(var p in m)if(p!=="default"&&!Object.prototype.hasOwnProperty.call(o,p))__createBinding(o,m,p)}function __values(o){var s=typeof Symbol==="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length==="number")return{next:function(){if(o&&i>=o.length)o=void 0;return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-- >0)&&!(r=i.next()).done)ar.push(r.value)}catch(error){e={error:error}}finally{try{if(r&&!r.done&&(m=i["return"]))m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __spreadArray(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i]}}return to.concat(ar||Array.prototype.slice.call(from))}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=generator.apply(thisArg,_arguments||[]),i,q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){if(g[n])i[n]=function(v){return new Promise(function(a,b){q.push([n,v,a,b])>1||resume(n,v)})}}function resume(n,v){try{step(g[n](v))}catch(e){settle(q[0][3],e)}}function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){if(f(v),q.shift(),q.length)resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",function(e){throw e}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:false}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m=o[Symbol.asyncIterator],i;return m?m.call(o):(o=typeof __values==="function"?__values(o):o[Symbol.iterator](),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise(function(resolve,reject){v=o[n](v),settle(resolve,reject,v.done,v.value)})}}function settle(resolve,reject,d,v){Promise.resolve(v).then(function(v){resolve({value:v,done:d})},reject)}}function __makeTemplateObject(cooked,raw){if(Object.defineProperty){Object.defineProperty(cooked,"raw",{value:raw})}else{cooked.raw=raw}return cooked}var __setModuleDefault=Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v};function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,state,kind,f){if(kind==="a"&&!f)throw new TypeError("Private accessor was defined without a getter");if(typeof state==="function"?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return kind==="m"?f:kind==="a"?f.call(receiver):f?f.value:state.get(receiver)}function __classPrivateFieldSet(receiver,state,value,kind,f){if(kind==="m")throw new TypeError("Private method is not writable");if(kind==="a"&&!f)throw new TypeError("Private accessor was defined without a setter");if(typeof state==="function"?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return kind==="a"?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value}function __classPrivateFieldIn(state,receiver){if(receiver===null||typeof receiver!=="object"&&typeof receiver!=="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof state==="function"?receiver===state:state.has(receiver)}},{}],815:[function(require,module,exports){(function(nacl){"use strict";var gf=function(init){var i,r=new Float64Array(16);if(init)for(i=0;i<init.length;i++)r[i]=init[i];return r};var randombytes=function(){throw new Error("no PRNG")};var _0=new Uint8Array(16);var _9=new Uint8Array(32);_9[0]=9;var gf0=gf(),gf1=gf([1]),_121665=gf([56129,1]),D=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),D2=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),X=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Y=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),I=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ts64(x,i,h,l){x[i]=h>>24&255;x[i+1]=h>>16&255;x[i+2]=h>>8&255;x[i+3]=h&255;x[i+4]=l>>24&255;x[i+5]=l>>16&255;x[i+6]=l>>8&255;x[i+7]=l&255}function vn(x,xi,y,yi,n){var i,d=0;for(i=0;i<n;i++)d|=x[xi+i]^y[yi+i];return(1&d-1>>>8)-1}function crypto_verify_16(x,xi,y,yi){return vn(x,xi,y,yi,16)}function crypto_verify_32(x,xi,y,yi){return vn(x,xi,y,yi,32)}function core_salsa20(o,p,k,c){var j0=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,j1=k[0]&255|(k[1]&255)<<8|(k[2]&255)<<16|(k[3]&255)<<24,j2=k[4]&255|(k[5]&255)<<8|(k[6]&255)<<16|(k[7]&255)<<24,j3=k[8]&255|(k[9]&255)<<8|(k[10]&255)<<16|(k[11]&255)<<24,j4=k[12]&255|(k[13]&255)<<8|(k[14]&255)<<16|(k[15]&255)<<24,j5=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,j6=p[0]&255|(p[1]&255)<<8|(p[2]&255)<<16|(p[3]&255)<<24,j7=p[4]&255|(p[5]&255)<<8|(p[6]&255)<<16|(p[7]&255)<<24,j8=p[8]&255|(p[9]&255)<<8|(p[10]&255)<<16|(p[11]&255)<<24,j9=p[12]&255|(p[13]&255)<<8|(p[14]&255)<<16|(p[15]&255)<<24,j10=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,j11=k[16]&255|(k[17]&255)<<8|(k[18]&255)<<16|(k[19]&255)<<24,j12=k[20]&255|(k[21]&255)<<8|(k[22]&255)<<16|(k[23]&255)<<24,j13=k[24]&255|(k[25]&255)<<8|(k[26]&255)<<16|(k[27]&255)<<24,j14=k[28]&255|(k[29]&255)<<8|(k[30]&255)<<16|(k[31]&255)<<24,j15=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,u;for(var i=0;i<20;i+=2){u=x0+x12|0;x4^=u<<7|u>>>32-7;u=x4+x0|0;x8^=u<<9|u>>>32-9;u=x8+x4|0;x12^=u<<13|u>>>32-13;u=x12+x8|0;x0^=u<<18|u>>>32-18;u=x5+x1|0;x9^=u<<7|u>>>32-7;u=x9+x5|0;x13^=u<<9|u>>>32-9;u=x13+x9|0;x1^=u<<13|u>>>32-13;u=x1+x13|0;x5^=u<<18|u>>>32-18;u=x10+x6|0;x14^=u<<7|u>>>32-7;u=x14+x10|0;x2^=u<<9|u>>>32-9;u=x2+x14|0;x6^=u<<13|u>>>32-13;u=x6+x2|0;x10^=u<<18|u>>>32-18;u=x15+x11|0;x3^=u<<7|u>>>32-7;u=x3+x15|0;x7^=u<<9|u>>>32-9;u=x7+x3|0;x11^=u<<13|u>>>32-13;u=x11+x7|0;x15^=u<<18|u>>>32-18;u=x0+x3|0;x1^=u<<7|u>>>32-7;u=x1+x0|0;x2^=u<<9|u>>>32-9;u=x2+x1|0;x3^=u<<13|u>>>32-13;u=x3+x2|0;x0^=u<<18|u>>>32-18;u=x5+x4|0;x6^=u<<7|u>>>32-7;u=x6+x5|0;x7^=u<<9|u>>>32-9;u=x7+x6|0;x4^=u<<13|u>>>32-13;u=x4+x7|0;x5^=u<<18|u>>>32-18;u=x10+x9|0;x11^=u<<7|u>>>32-7;u=x11+x10|0;x8^=u<<9|u>>>32-9;u=x8+x11|0;x9^=u<<13|u>>>32-13;u=x9+x8|0;x10^=u<<18|u>>>32-18;u=x15+x14|0;x12^=u<<7|u>>>32-7;u=x12+x15|0;x13^=u<<9|u>>>32-9;u=x13+x12|0;x14^=u<<13|u>>>32-13;u=x14+x13|0;x15^=u<<18|u>>>32-18}x0=x0+j0|0;x1=x1+j1|0;x2=x2+j2|0;x3=x3+j3|0;x4=x4+j4|0;x5=x5+j5|0;x6=x6+j6|0;x7=x7+j7|0;x8=x8+j8|0;x9=x9+j9|0;x10=x10+j10|0;x11=x11+j11|0;x12=x12+j12|0;x13=x13+j13|0;x14=x14+j14|0;x15=x15+j15|0;o[0]=x0>>>0&255;o[1]=x0>>>8&255;o[2]=x0>>>16&255;o[3]=x0>>>24&255;o[4]=x1>>>0&255;o[5]=x1>>>8&255;o[6]=x1>>>16&255;o[7]=x1>>>24&255;o[8]=x2>>>0&255;o[9]=x2>>>8&255;o[10]=x2>>>16&255;o[11]=x2>>>24&255;o[12]=x3>>>0&255;o[13]=x3>>>8&255;o[14]=x3>>>16&255;o[15]=x3>>>24&255;o[16]=x4>>>0&255;o[17]=x4>>>8&255;o[18]=x4>>>16&255;o[19]=x4>>>24&255;o[20]=x5>>>0&255;o[21]=x5>>>8&255;o[22]=x5>>>16&255;o[23]=x5>>>24&255;o[24]=x6>>>0&255;o[25]=x6>>>8&255;o[26]=x6>>>16&255;o[27]=x6>>>24&255;o[28]=x7>>>0&255;o[29]=x7>>>8&255;o[30]=x7>>>16&255;o[31]=x7>>>24&255;o[32]=x8>>>0&255;o[33]=x8>>>8&255;o[34]=x8>>>16&255;o[35]=x8>>>24&255;o[36]=x9>>>0&255;o[37]=x9>>>8&255;o[38]=x9>>>16&255;o[39]=x9>>>24&255;o[40]=x10>>>0&255;o[41]=x10>>>8&255;o[42]=x10>>>16&255;o[43]=x10>>>24&255;o[44]=x11>>>0&255;o[45]=x11>>>8&255;o[46]=x11>>>16&255;o[47]=x11>>>24&255;o[48]=x12>>>0&255;o[49]=x12>>>8&255;o[50]=x12>>>16&255;o[51]=x12>>>24&255;o[52]=x13>>>0&255;o[53]=x13>>>8&255;o[54]=x13>>>16&255;o[55]=x13>>>24&255;o[56]=x14>>>0&255;o[57]=x14>>>8&255;o[58]=x14>>>16&255;o[59]=x14>>>24&255;o[60]=x15>>>0&255;o[61]=x15>>>8&255;o[62]=x15>>>16&255;o[63]=x15>>>24&255}function core_hsalsa20(o,p,k,c){var j0=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,j1=k[0]&255|(k[1]&255)<<8|(k[2]&255)<<16|(k[3]&255)<<24,j2=k[4]&255|(k[5]&255)<<8|(k[6]&255)<<16|(k[7]&255)<<24,j3=k[8]&255|(k[9]&255)<<8|(k[10]&255)<<16|(k[11]&255)<<24,j4=k[12]&255|(k[13]&255)<<8|(k[14]&255)<<16|(k[15]&255)<<24,j5=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,j6=p[0]&255|(p[1]&255)<<8|(p[2]&255)<<16|(p[3]&255)<<24,j7=p[4]&255|(p[5]&255)<<8|(p[6]&255)<<16|(p[7]&255)<<24,j8=p[8]&255|(p[9]&255)<<8|(p[10]&255)<<16|(p[11]&255)<<24,j9=p[12]&255|(p[13]&255)<<8|(p[14]&255)<<16|(p[15]&255)<<24,j10=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,j11=k[16]&255|(k[17]&255)<<8|(k[18]&255)<<16|(k[19]&255)<<24,j12=k[20]&255|(k[21]&255)<<8|(k[22]&255)<<16|(k[23]&255)<<24,j13=k[24]&255|(k[25]&255)<<8|(k[26]&255)<<16|(k[27]&255)<<24,j14=k[28]&255|(k[29]&255)<<8|(k[30]&255)<<16|(k[31]&255)<<24,j15=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,u;for(var i=0;i<20;i+=2){u=x0+x12|0;x4^=u<<7|u>>>32-7;u=x4+x0|0;x8^=u<<9|u>>>32-9;u=x8+x4|0;x12^=u<<13|u>>>32-13;u=x12+x8|0;x0^=u<<18|u>>>32-18;u=x5+x1|0;x9^=u<<7|u>>>32-7;u=x9+x5|0;x13^=u<<9|u>>>32-9;u=x13+x9|0;x1^=u<<13|u>>>32-13;u=x1+x13|0;x5^=u<<18|u>>>32-18;u=x10+x6|0;x14^=u<<7|u>>>32-7;u=x14+x10|0;x2^=u<<9|u>>>32-9;u=x2+x14|0;x6^=u<<13|u>>>32-13;u=x6+x2|0;x10^=u<<18|u>>>32-18;u=x15+x11|0;x3^=u<<7|u>>>32-7;u=x3+x15|0;x7^=u<<9|u>>>32-9;u=x7+x3|0;x11^=u<<13|u>>>32-13;u=x11+x7|0;x15^=u<<18|u>>>32-18;u=x0+x3|0;x1^=u<<7|u>>>32-7;u=x1+x0|0;x2^=u<<9|u>>>32-9;u=x2+x1|0;x3^=u<<13|u>>>32-13;u=x3+x2|0;x0^=u<<18|u>>>32-18;u=x5+x4|0;x6^=u<<7|u>>>32-7;u=x6+x5|0;x7^=u<<9|u>>>32-9;u=x7+x6|0;x4^=u<<13|u>>>32-13;u=x4+x7|0;x5^=u<<18|u>>>32-18;u=x10+x9|0;x11^=u<<7|u>>>32-7;u=x11+x10|0;x8^=u<<9|u>>>32-9;u=x8+x11|0;x9^=u<<13|u>>>32-13;u=x9+x8|0;x10^=u<<18|u>>>32-18;u=x15+x14|0;x12^=u<<7|u>>>32-7;u=x12+x15|0;x13^=u<<9|u>>>32-9;u=x13+x12|0;x14^=u<<13|u>>>32-13;u=x14+x13|0;x15^=u<<18|u>>>32-18}o[0]=x0>>>0&255;o[1]=x0>>>8&255;o[2]=x0>>>16&255;o[3]=x0>>>24&255;o[4]=x5>>>0&255;o[5]=x5>>>8&255;o[6]=x5>>>16&255;o[7]=x5>>>24&255;o[8]=x10>>>0&255;o[9]=x10>>>8&255;o[10]=x10>>>16&255;o[11]=x10>>>24&255;o[12]=x15>>>0&255;o[13]=x15>>>8&255;o[14]=x15>>>16&255;o[15]=x15>>>24&255;o[16]=x6>>>0&255;o[17]=x6>>>8&255;o[18]=x6>>>16&255;o[19]=x6>>>24&255;o[20]=x7>>>0&255;o[21]=x7>>>8&255;o[22]=x7>>>16&255;o[23]=x7>>>24&255;o[24]=x8>>>0&255;o[25]=x8>>>8&255;o[26]=x8>>>16&255;o[27]=x8>>>24&255;o[28]=x9>>>0&255;o[29]=x9>>>8&255;o[30]=x9>>>16&255;o[31]=x9>>>24&255}function crypto_core_salsa20(out,inp,k,c){core_salsa20(out,inp,k,c)}function crypto_core_hsalsa20(out,inp,k,c){core_hsalsa20(out,inp,k,c)}var sigma=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k){var z=new Uint8Array(16),x=new Uint8Array(64);var u,i;for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];while(b>=64){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<64;i++)c[cpos+i]=m[mpos+i]^x[i];u=1;for(i=8;i<16;i++){u=u+(z[i]&255)|0;z[i]=u&255;u>>>=8}b-=64;cpos+=64;mpos+=64}if(b>0){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<b;i++)c[cpos+i]=m[mpos+i]^x[i]}return 0}function crypto_stream_salsa20(c,cpos,b,n,k){var z=new Uint8Array(16),x=new Uint8Array(64);var u,i;for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];while(b>=64){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<64;i++)c[cpos+i]=x[i];u=1;for(i=8;i<16;i++){u=u+(z[i]&255)|0;z[i]=u&255;u>>>=8}b-=64;cpos+=64}if(b>0){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<b;i++)c[cpos+i]=x[i]}return 0}function crypto_stream(c,cpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);var sn=new Uint8Array(8);for(var i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20(c,cpos,d,sn,s)}function crypto_stream_xor(c,cpos,m,mpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);var sn=new Uint8Array(8);for(var i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s)}var poly1305=function(key){this.buffer=new Uint8Array(16);this.r=new Uint16Array(10);this.h=new Uint16Array(10);this.pad=new Uint16Array(8);this.leftover=0;this.fin=0;var t0,t1,t2,t3,t4,t5,t6,t7;t0=key[0]&255|(key[1]&255)<<8;this.r[0]=t0&8191;t1=key[2]&255|(key[3]&255)<<8;this.r[1]=(t0>>>13|t1<<3)&8191;t2=key[4]&255|(key[5]&255)<<8;this.r[2]=(t1>>>10|t2<<6)&7939;t3=key[6]&255|(key[7]&255)<<8;this.r[3]=(t2>>>7|t3<<9)&8191;t4=key[8]&255|(key[9]&255)<<8;this.r[4]=(t3>>>4|t4<<12)&255;this.r[5]=t4>>>1&8190;t5=key[10]&255|(key[11]&255)<<8;this.r[6]=(t4>>>14|t5<<2)&8191;t6=key[12]&255|(key[13]&255)<<8;this.r[7]=(t5>>>11|t6<<5)&8065;t7=key[14]&255|(key[15]&255)<<8;this.r[8]=(t6>>>8|t7<<8)&8191;this.r[9]=t7>>>5&127;this.pad[0]=key[16]&255|(key[17]&255)<<8;this.pad[1]=key[18]&255|(key[19]&255)<<8;this.pad[2]=key[20]&255|(key[21]&255)<<8;this.pad[3]=key[22]&255|(key[23]&255)<<8;this.pad[4]=key[24]&255|(key[25]&255)<<8;this.pad[5]=key[26]&255|(key[27]&255)<<8;this.pad[6]=key[28]&255|(key[29]&255)<<8;this.pad[7]=key[30]&255|(key[31]&255)<<8};poly1305.prototype.blocks=function(m,mpos,bytes){var hibit=this.fin?0:1<<11;var t0,t1,t2,t3,t4,t5,t6,t7,c;var d0,d1,d2,d3,d4,d5,d6,d7,d8,d9;var h0=this.h[0],h1=this.h[1],h2=this.h[2],h3=this.h[3],h4=this.h[4],h5=this.h[5],h6=this.h[6],h7=this.h[7],h8=this.h[8],h9=this.h[9];var r0=this.r[0],r1=this.r[1],r2=this.r[2],r3=this.r[3],r4=this.r[4],r5=this.r[5],r6=this.r[6],r7=this.r[7],r8=this.r[8],r9=this.r[9];while(bytes>=16){t0=m[mpos+0]&255|(m[mpos+1]&255)<<8;h0+=t0&8191;t1=m[mpos+2]&255|(m[mpos+3]&255)<<8;h1+=(t0>>>13|t1<<3)&8191;t2=m[mpos+4]&255|(m[mpos+5]&255)<<8;h2+=(t1>>>10|t2<<6)&8191;t3=m[mpos+6]&255|(m[mpos+7]&255)<<8;h3+=(t2>>>7|t3<<9)&8191;t4=m[mpos+8]&255|(m[mpos+9]&255)<<8;h4+=(t3>>>4|t4<<12)&8191;h5+=t4>>>1&8191;t5=m[mpos+10]&255|(m[mpos+11]&255)<<8;h6+=(t4>>>14|t5<<2)&8191;t6=m[mpos+12]&255|(m[mpos+13]&255)<<8;h7+=(t5>>>11|t6<<5)&8191;t7=m[mpos+14]&255|(m[mpos+15]&255)<<8;h8+=(t6>>>8|t7<<8)&8191;h9+=t7>>>5|hibit;c=0;d0=c;d0+=h0*r0;d0+=h1*(5*r9);d0+=h2*(5*r8);d0+=h3*(5*r7);d0+=h4*(5*r6);c=d0>>>13;d0&=8191;d0+=h5*(5*r5);d0+=h6*(5*r4);d0+=h7*(5*r3);d0+=h8*(5*r2);d0+=h9*(5*r1);c+=d0>>>13;d0&=8191;d1=c;d1+=h0*r1;d1+=h1*r0;d1+=h2*(5*r9);d1+=h3*(5*r8);d1+=h4*(5*r7);c=d1>>>13;d1&=8191;d1+=h5*(5*r6);d1+=h6*(5*r5);d1+=h7*(5*r4);d1+=h8*(5*r3);d1+=h9*(5*r2);c+=d1>>>13;d1&=8191;d2=c;d2+=h0*r2;d2+=h1*r1;d2+=h2*r0;d2+=h3*(5*r9);d2+=h4*(5*r8);c=d2>>>13;d2&=8191;d2+=h5*(5*r7);d2+=h6*(5*r6);d2+=h7*(5*r5);d2+=h8*(5*r4);d2+=h9*(5*r3);c+=d2>>>13;d2&=8191;d3=c;d3+=h0*r3;d3+=h1*r2;d3+=h2*r1;d3+=h3*r0;d3+=h4*(5*r9);c=d3>>>13;d3&=8191;d3+=h5*(5*r8);d3+=h6*(5*r7);d3+=h7*(5*r6);d3+=h8*(5*r5);d3+=h9*(5*r4);c+=d3>>>13;d3&=8191;d4=c;d4+=h0*r4;d4+=h1*r3;d4+=h2*r2;d4+=h3*r1;d4+=h4*r0;c=d4>>>13;d4&=8191;d4+=h5*(5*r9);d4+=h6*(5*r8);d4+=h7*(5*r7);d4+=h8*(5*r6);d4+=h9*(5*r5);c+=d4>>>13;d4&=8191;d5=c;d5+=h0*r5;d5+=h1*r4;d5+=h2*r3;d5+=h3*r2;d5+=h4*r1;c=d5>>>13;d5&=8191;d5+=h5*r0;d5+=h6*(5*r9);d5+=h7*(5*r8);d5+=h8*(5*r7);d5+=h9*(5*r6);c+=d5>>>13;d5&=8191;d6=c;d6+=h0*r6;d6+=h1*r5;d6+=h2*r4;d6+=h3*r3;d6+=h4*r2;c=d6>>>13;d6&=8191;d6+=h5*r1;d6+=h6*r0;d6+=h7*(5*r9);d6+=h8*(5*r8);d6+=h9*(5*r7);c+=d6>>>13;d6&=8191;d7=c;d7+=h0*r7;d7+=h1*r6;d7+=h2*r5;d7+=h3*r4;d7+=h4*r3;c=d7>>>13;d7&=8191;d7+=h5*r2;d7+=h6*r1;d7+=h7*r0;d7+=h8*(5*r9);d7+=h9*(5*r8);c+=d7>>>13;d7&=8191;d8=c;d8+=h0*r8;d8+=h1*r7;d8+=h2*r6;d8+=h3*r5;d8+=h4*r4;c=d8>>>13;d8&=8191;d8+=h5*r3;d8+=h6*r2;d8+=h7*r1;d8+=h8*r0;d8+=h9*(5*r9);c+=d8>>>13;d8&=8191;d9=c;d9+=h0*r9;d9+=h1*r8;d9+=h2*r7;d9+=h3*r6;d9+=h4*r5;c=d9>>>13;d9&=8191;d9+=h5*r4;d9+=h6*r3;d9+=h7*r2;d9+=h8*r1;d9+=h9*r0;c+=d9>>>13;d9&=8191;c=(c<<2)+c|0;c=c+d0|0;d0=c&8191;c=c>>>13;d1+=c;h0=d0;h1=d1;h2=d2;h3=d3;h4=d4;h5=d5;h6=d6;h7=d7;h8=d8;h9=d9;mpos+=16;bytes-=16}this.h[0]=h0;this.h[1]=h1;this.h[2]=h2;this.h[3]=h3;this.h[4]=h4;this.h[5]=h5;this.h[6]=h6;this.h[7]=h7;this.h[8]=h8;this.h[9]=h9};poly1305.prototype.finish=function(mac,macpos){var g=new Uint16Array(10);var c,mask,f,i;if(this.leftover){i=this.leftover;this.buffer[i++]=1;for(;i<16;i++)this.buffer[i]=0;this.fin=1;this.blocks(this.buffer,0,16)}c=this.h[1]>>>13;this.h[1]&=8191;for(i=2;i<10;i++){this.h[i]+=c;c=this.h[i]>>>13;this.h[i]&=8191}this.h[0]+=c*5;c=this.h[0]>>>13;this.h[0]&=8191;this.h[1]+=c;c=this.h[1]>>>13;this.h[1]&=8191;this.h[2]+=c;g[0]=this.h[0]+5;c=g[0]>>>13;g[0]&=8191;for(i=1;i<10;i++){g[i]=this.h[i]+c;c=g[i]>>>13;g[i]&=8191}g[9]-=1<<13;mask=(c^1)-1;for(i=0;i<10;i++)g[i]&=mask;mask=~mask;for(i=0;i<10;i++)this.h[i]=this.h[i]&mask|g[i];this.h[0]=(this.h[0]|this.h[1]<<13)&65535;this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535;this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535;this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535;this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535;this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535;this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535;this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535;f=this.h[0]+this.pad[0];this.h[0]=f&65535;for(i=1;i<8;i++){f=(this.h[i]+this.pad[i]|0)+(f>>>16)|0;this.h[i]=f&65535}mac[macpos+0]=this.h[0]>>>0&255;mac[macpos+1]=this.h[0]>>>8&255;mac[macpos+2]=this.h[1]>>>0&255;mac[macpos+3]=this.h[1]>>>8&255;mac[macpos+4]=this.h[2]>>>0&255;mac[macpos+5]=this.h[2]>>>8&255;mac[macpos+6]=this.h[3]>>>0&255;mac[macpos+7]=this.h[3]>>>8&255;mac[macpos+8]=this.h[4]>>>0&255;mac[macpos+9]=this.h[4]>>>8&255;mac[macpos+10]=this.h[5]>>>0&255;mac[macpos+11]=this.h[5]>>>8&255;mac[macpos+12]=this.h[6]>>>0&255;mac[macpos+13]=this.h[6]>>>8&255;mac[macpos+14]=this.h[7]>>>0&255;mac[macpos+15]=this.h[7]>>>8&255};poly1305.prototype.update=function(m,mpos,bytes){var i,want;if(this.leftover){want=16-this.leftover;if(want>bytes)want=bytes;for(i=0;i<want;i++)this.buffer[this.leftover+i]=m[mpos+i];bytes-=want;mpos+=want;this.leftover+=want;if(this.leftover<16)return;this.blocks(this.buffer,0,16);this.leftover=0}if(bytes>=16){want=bytes-bytes%16;this.blocks(m,mpos,want);mpos+=want;bytes-=want}if(bytes){for(i=0;i<bytes;i++)this.buffer[this.leftover+i]=m[mpos+i];this.leftover+=bytes}};function crypto_onetimeauth(out,outpos,m,mpos,n,k){var s=new poly1305(k);s.update(m,mpos,n);s.finish(out,outpos);return 0}function crypto_onetimeauth_verify(h,hpos,m,mpos,n,k){var x=new Uint8Array(16);crypto_onetimeauth(x,0,m,mpos,n,k);return crypto_verify_16(h,hpos,x,0)}function crypto_secretbox(c,m,d,n,k){var i;if(d<32)return-1;crypto_stream_xor(c,0,m,0,d,n,k);crypto_onetimeauth(c,16,c,32,d-32,c);for(i=0;i<16;i++)c[i]=0;return 0}function crypto_secretbox_open(m,c,d,n,k){var i;var x=new Uint8Array(32);if(d<32)return-1;crypto_stream(x,0,32,n,k);if(crypto_onetimeauth_verify(c,16,c,32,d-32,x)!==0)return-1;crypto_stream_xor(m,0,c,0,d,n,k);for(i=0;i<32;i++)m[i]=0;return 0}function set25519(r,a){var i;for(i=0;i<16;i++)r[i]=a[i]|0}function car25519(o){var i,v,c=1;for(i=0;i<16;i++){v=o[i]+c+65535;c=Math.floor(v/65536);o[i]=v-c*65536}o[0]+=c-1+37*(c-1)}function sel25519(p,q,b){var t,c=~(b-1);for(var i=0;i<16;i++){t=c&(p[i]^q[i]);p[i]^=t;q[i]^=t}}function pack25519(o,n){var i,j,b;var m=gf(),t=gf();for(i=0;i<16;i++)t[i]=n[i];car25519(t);car25519(t);car25519(t);for(j=0;j<2;j++){m[0]=t[0]-65517;for(i=1;i<15;i++){m[i]=t[i]-65535-(m[i-1]>>16&1);m[i-1]&=65535}m[15]=t[15]-32767-(m[14]>>16&1);b=m[15]>>16&1;m[14]&=65535;sel25519(t,m,1-b)}for(i=0;i<16;i++){o[2*i]=t[i]&255;o[2*i+1]=t[i]>>8}}function neq25519(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);pack25519(c,a);pack25519(d,b);return crypto_verify_32(c,0,d,0)}function par25519(a){var d=new Uint8Array(32);pack25519(d,a);return d[0]&1}function unpack25519(o,n){var i;for(i=0;i<16;i++)o[i]=n[2*i]+(n[2*i+1]<<8);o[15]&=32767}function A(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]+b[i]}function Z(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]-b[i]}function M(o,a,b){var v,c,t0=0,t1=0,t2=0,t3=0,t4=0,t5=0,t6=0,t7=0,t8=0,t9=0,t10=0,t11=0,t12=0,t13=0,t14=0,t15=0,t16=0,t17=0,t18=0,t19=0,t20=0,t21=0,t22=0,t23=0,t24=0,t25=0,t26=0,t27=0,t28=0,t29=0,t30=0,b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];v=a[0];t0+=v*b0;t1+=v*b1;t2+=v*b2;t3+=v*b3;t4+=v*b4;t5+=v*b5;t6+=v*b6;t7+=v*b7;t8+=v*b8;t9+=v*b9;t10+=v*b10;t11+=v*b11;t12+=v*b12;t13+=v*b13;t14+=v*b14;t15+=v*b15;v=a[1];t1+=v*b0;t2+=v*b1;t3+=v*b2;t4+=v*b3;t5+=v*b4;t6+=v*b5;t7+=v*b6;t8+=v*b7;t9+=v*b8;t10+=v*b9;t11+=v*b10;t12+=v*b11;t13+=v*b12;t14+=v*b13;t15+=v*b14;t16+=v*b15;v=a[2];t2+=v*b0;t3+=v*b1;t4+=v*b2;t5+=v*b3;t6+=v*b4;t7+=v*b5;t8+=v*b6;t9+=v*b7;t10+=v*b8;t11+=v*b9;t12+=v*b10;t13+=v*b11;t14+=v*b12;t15+=v*b13;t16+=v*b14;t17+=v*b15;v=a[3];t3+=v*b0;t4+=v*b1;t5+=v*b2;t6+=v*b3;t7+=v*b4;t8+=v*b5;t9+=v*b6;t10+=v*b7;t11+=v*b8;t12+=v*b9;t13+=v*b10;t14+=v*b11;t15+=v*b12;t16+=v*b13;t17+=v*b14;t18+=v*b15;v=a[4];t4+=v*b0;t5+=v*b1;t6+=v*b2;t7+=v*b3;t8+=v*b4;t9+=v*b5;t10+=v*b6;t11+=v*b7;t12+=v*b8;t13+=v*b9;t14+=v*b10;t15+=v*b11;t16+=v*b12;t17+=v*b13;t18+=v*b14;t19+=v*b15;v=a[5];t5+=v*b0;t6+=v*b1;t7+=v*b2;t8+=v*b3;t9+=v*b4;t10+=v*b5;t11+=v*b6;t12+=v*b7;t13+=v*b8;t14+=v*b9;t15+=v*b10;t16+=v*b11;t17+=v*b12;t18+=v*b13;t19+=v*b14;t20+=v*b15;v=a[6];t6+=v*b0;t7+=v*b1;t8+=v*b2;t9+=v*b3;t10+=v*b4;t11+=v*b5;t12+=v*b6;t13+=v*b7;t14+=v*b8;t15+=v*b9;t16+=v*b10;t17+=v*b11;t18+=v*b12;t19+=v*b13;t20+=v*b14;t21+=v*b15;v=a[7];t7+=v*b0;t8+=v*b1;t9+=v*b2;t10+=v*b3;t11+=v*b4;t12+=v*b5;t13+=v*b6;t14+=v*b7;t15+=v*b8;t16+=v*b9;t17+=v*b10;t18+=v*b11;t19+=v*b12;t20+=v*b13;t21+=v*b14;t22+=v*b15;v=a[8];t8+=v*b0;t9+=v*b1;t10+=v*b2;t11+=v*b3;t12+=v*b4;t13+=v*b5;t14+=v*b6;t15+=v*b7;t16+=v*b8;t17+=v*b9;t18+=v*b10;t19+=v*b11;t20+=v*b12;t21+=v*b13;t22+=v*b14;t23+=v*b15;v=a[9];t9+=v*b0;t10+=v*b1;t11+=v*b2;t12+=v*b3;t13+=v*b4;t14+=v*b5;t15+=v*b6;t16+=v*b7;t17+=v*b8;t18+=v*b9;t19+=v*b10;t20+=v*b11;t21+=v*b12;t22+=v*b13;t23+=v*b14;t24+=v*b15;v=a[10];t10+=v*b0;t11+=v*b1;t12+=v*b2;t13+=v*b3;t14+=v*b4;t15+=v*b5;t16+=v*b6;t17+=v*b7;t18+=v*b8;t19+=v*b9;t20+=v*b10;t21+=v*b11;t22+=v*b12;t23+=v*b13;t24+=v*b14;t25+=v*b15;v=a[11];t11+=v*b0;t12+=v*b1;t13+=v*b2;t14+=v*b3;t15+=v*b4;t16+=v*b5;t17+=v*b6;t18+=v*b7;t19+=v*b8;t20+=v*b9;t21+=v*b10;t22+=v*b11;t23+=v*b12;t24+=v*b13;t25+=v*b14;t26+=v*b15;v=a[12];t12+=v*b0;t13+=v*b1;t14+=v*b2;t15+=v*b3;t16+=v*b4;t17+=v*b5;t18+=v*b6;t19+=v*b7;t20+=v*b8;t21+=v*b9;t22+=v*b10;t23+=v*b11;t24+=v*b12;t25+=v*b13;t26+=v*b14;t27+=v*b15;v=a[13];t13+=v*b0;t14+=v*b1;t15+=v*b2;t16+=v*b3;t17+=v*b4;t18+=v*b5;t19+=v*b6;t20+=v*b7;t21+=v*b8;t22+=v*b9;t23+=v*b10;t24+=v*b11;t25+=v*b12;t26+=v*b13;t27+=v*b14;t28+=v*b15;v=a[14];t14+=v*b0;t15+=v*b1;t16+=v*b2;t17+=v*b3;t18+=v*b4;t19+=v*b5;t20+=v*b6;t21+=v*b7;t22+=v*b8;t23+=v*b9;t24+=v*b10;t25+=v*b11;t26+=v*b12;t27+=v*b13;t28+=v*b14;t29+=v*b15;v=a[15];t15+=v*b0;t16+=v*b1;t17+=v*b2;t18+=v*b3;t19+=v*b4;t20+=v*b5;t21+=v*b6;t22+=v*b7;t23+=v*b8;t24+=v*b9;t25+=v*b10;t26+=v*b11;t27+=v*b12;t28+=v*b13;t29+=v*b14;t30+=v*b15;t0+=38*t16;t1+=38*t17;t2+=38*t18;t3+=38*t19;t4+=38*t20;t5+=38*t21;t6+=38*t22;t7+=38*t23;t8+=38*t24;t9+=38*t25;t10+=38*t26;t11+=38*t27;t12+=38*t28;t13+=38*t29;t14+=38*t30;c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);o[0]=t0;o[1]=t1;o[2]=t2;o[3]=t3;o[4]=t4;o[5]=t5;o[6]=t6;o[7]=t7;o[8]=t8;o[9]=t9;o[10]=t10;o[11]=t11;o[12]=t12;o[13]=t13;o[14]=t14;o[15]=t15}function S(o,a){M(o,a,a)}function inv25519(o,i){var c=gf();var a;for(a=0;a<16;a++)c[a]=i[a];for(a=253;a>=0;a--){S(c,c);if(a!==2&&a!==4)M(c,c,i)}for(a=0;a<16;a++)o[a]=c[a]}function pow2523(o,i){var c=gf();var a;for(a=0;a<16;a++)c[a]=i[a];for(a=250;a>=0;a--){S(c,c);if(a!==1)M(c,c,i)}for(a=0;a<16;a++)o[a]=c[a]}function crypto_scalarmult(q,n,p){var z=new Uint8Array(32);var x=new Float64Array(80),r,i;var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf();for(i=0;i<31;i++)z[i]=n[i];z[31]=n[31]&127|64;z[0]&=248;unpack25519(x,p);for(i=0;i<16;i++){b[i]=x[i];d[i]=a[i]=c[i]=0}a[0]=d[0]=1;for(i=254;i>=0;--i){r=z[i>>>3]>>>(i&7)&1;sel25519(a,b,r);sel25519(c,d,r);A(e,a,c);Z(a,a,c);A(c,b,d);Z(b,b,d);S(d,e);S(f,a);M(a,c,a);M(c,b,e);A(e,a,c);Z(a,a,c);S(b,a);Z(c,d,f);M(a,c,_121665);A(a,a,d);M(c,c,a);M(a,d,f);M(d,b,x);S(b,e);sel25519(a,b,r);sel25519(c,d,r)}for(i=0;i<16;i++){x[i+16]=a[i];x[i+32]=c[i];x[i+48]=b[i];x[i+64]=d[i]}var x32=x.subarray(32);var x16=x.subarray(16);inv25519(x32,x32);M(x16,x16,x32);pack25519(q,x16);return 0}function crypto_scalarmult_base(q,n){return crypto_scalarmult(q,n,_9)}function crypto_box_keypair(y,x){randombytes(x,32);return crypto_scalarmult_base(y,x)}function crypto_box_beforenm(k,y,x){var s=new Uint8Array(32);crypto_scalarmult(s,x,y);return crypto_core_hsalsa20(k,_0,s,sigma)}var crypto_box_afternm=crypto_secretbox;var crypto_box_open_afternm=crypto_secretbox_open;function crypto_box(c,m,d,n,y,x){var k=new Uint8Array(32);crypto_box_beforenm(k,y,x);return crypto_box_afternm(c,m,d,n,k)}function crypto_box_open(m,c,d,n,y,x){var k=new Uint8Array(32);crypto_box_beforenm(k,y,x);return crypto_box_open_afternm(m,c,d,n,k)}var K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function crypto_hashblocks_hl(hh,hl,m,n){var wh=new Int32Array(16),wl=new Int32Array(16),bh0,bh1,bh2,bh3,bh4,bh5,bh6,bh7,bl0,bl1,bl2,bl3,bl4,bl5,bl6,bl7,th,tl,i,j,h,l,a,b,c,d;var ah0=hh[0],ah1=hh[1],ah2=hh[2],ah3=hh[3],ah4=hh[4],ah5=hh[5],ah6=hh[6],ah7=hh[7],al0=hl[0],al1=hl[1],al2=hl[2],al3=hl[3],al4=hl[4],al5=hl[5],al6=hl[6],al7=hl[7];var pos=0;while(n>=128){for(i=0;i<16;i++){j=8*i+pos;wh[i]=m[j+0]<<24|m[j+1]<<16|m[j+2]<<8|m[j+3];wl[i]=m[j+4]<<24|m[j+5]<<16|m[j+6]<<8|m[j+7]}for(i=0;i<80;i++){bh0=ah0;bh1=ah1;bh2=ah2;bh3=ah3;bh4=ah4;bh5=ah5;bh6=ah6;bh7=ah7;bl0=al0;bl1=al1;bl2=al2;bl3=al3;bl4=al4;bl5=al5;bl6=al6;bl7=al7;h=ah7;l=al7;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=(ah4>>>14|al4<<32-14)^(ah4>>>18|al4<<32-18)^(al4>>>41-32|ah4<<32-(41-32));l=(al4>>>14|ah4<<32-14)^(al4>>>18|ah4<<32-18)^(ah4>>>41-32|al4<<32-(41-32));a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;h=ah4&ah5^~ah4&ah6;l=al4&al5^~al4&al6;a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;h=K[i*2];l=K[i*2+1];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;h=wh[i%16];l=wl[i%16];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;th=c&65535|d<<16;tl=a&65535|b<<16;h=th;l=tl;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=(ah0>>>28|al0<<32-28)^(al0>>>34-32|ah0<<32-(34-32))^(al0>>>39-32|ah0<<32-(39-32));l=(al0>>>28|ah0<<32-28)^(ah0>>>34-32|al0<<32-(34-32))^(ah0>>>39-32|al0<<32-(39-32));a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;h=ah0&ah1^ah0&ah2^ah1&ah2;l=al0&al1^al0&al2^al1&al2;a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;bh7=c&65535|d<<16;bl7=a&65535|b<<16;h=bh3;l=bl3;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=th;l=tl;a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;bh3=c&65535|d<<16;bl3=a&65535|b<<16;ah1=bh0;ah2=bh1;ah3=bh2;ah4=bh3;ah5=bh4;ah6=bh5;ah7=bh6;ah0=bh7;al1=bl0;al2=bl1;al3=bl2;al4=bl3;al5=bl4;al6=bl5;al7=bl6;al0=bl7;if(i%16===15){for(j=0;j<16;j++){h=wh[j];l=wl[j];a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=wh[(j+9)%16];l=wl[(j+9)%16];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;th=wh[(j+1)%16];tl=wl[(j+1)%16];h=(th>>>1|tl<<32-1)^(th>>>8|tl<<32-8)^th>>>7;l=(tl>>>1|th<<32-1)^(tl>>>8|th<<32-8)^(tl>>>7|th<<32-7);a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;th=wh[(j+14)%16];tl=wl[(j+14)%16];h=(th>>>19|tl<<32-19)^(tl>>>61-32|th<<32-(61-32))^th>>>6;l=(tl>>>19|th<<32-19)^(th>>>61-32|tl<<32-(61-32))^(tl>>>6|th<<32-6);a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;wh[j]=c&65535|d<<16;wl[j]=a&65535|b<<16}}}h=ah0;l=al0;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[0];l=hl[0];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[0]=ah0=c&65535|d<<16;hl[0]=al0=a&65535|b<<16;h=ah1;l=al1;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[1];l=hl[1];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[1]=ah1=c&65535|d<<16;hl[1]=al1=a&65535|b<<16;h=ah2;l=al2;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[2];l=hl[2];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[2]=ah2=c&65535|d<<16;hl[2]=al2=a&65535|b<<16;h=ah3;l=al3;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[3];l=hl[3];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[3]=ah3=c&65535|d<<16;hl[3]=al3=a&65535|b<<16;h=ah4;l=al4;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[4];l=hl[4];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[4]=ah4=c&65535|d<<16;hl[4]=al4=a&65535|b<<16;h=ah5;l=al5;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[5];l=hl[5];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[5]=ah5=c&65535|d<<16;hl[5]=al5=a&65535|b<<16;h=ah6;l=al6;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[6];l=hl[6];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[6]=ah6=c&65535|d<<16;hl[6]=al6=a&65535|b<<16;h=ah7;l=al7;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[7];l=hl[7];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[7]=ah7=c&65535|d<<16;hl[7]=al7=a&65535|b<<16;pos+=128;n-=128}return n}function crypto_hash(out,m,n){var hh=new Int32Array(8),hl=new Int32Array(8),x=new Uint8Array(256),i,b=n;hh[0]=1779033703;hh[1]=3144134277;hh[2]=1013904242;hh[3]=2773480762;hh[4]=1359893119;hh[5]=2600822924;hh[6]=528734635;hh[7]=1541459225;hl[0]=4089235720;hl[1]=2227873595;hl[2]=4271175723;hl[3]=1595750129;hl[4]=2917565137;hl[5]=725511199;hl[6]=4215389547;hl[7]=327033209;crypto_hashblocks_hl(hh,hl,m,n);n%=128;for(i=0;i<n;i++)x[i]=m[b-n+i];x[n]=128;n=256-128*(n<112?1:0);x[n-9]=0;ts64(x,n-8,b/536870912|0,b<<3);crypto_hashblocks_hl(hh,hl,x,n);for(i=0;i<8;i++)ts64(out,8*i,hh[i],hl[i]);return 0}function add(p,q){var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf(),g=gf(),h=gf(),t=gf();Z(a,p[1],p[0]);Z(t,q[1],q[0]);M(a,a,t);A(b,p[0],p[1]);A(t,q[0],q[1]);M(b,b,t);M(c,p[3],q[3]);M(c,c,D2);M(d,p[2],q[2]);A(d,d,d);Z(e,b,a);Z(f,d,c);A(g,d,c);A(h,b,a);M(p[0],e,f);M(p[1],h,g);M(p[2],g,f);M(p[3],e,h)}function cswap(p,q,b){var i;for(i=0;i<4;i++){sel25519(p[i],q[i],b)}}function pack(r,p){var tx=gf(),ty=gf(),zi=gf();inv25519(zi,p[2]);M(tx,p[0],zi);M(ty,p[1],zi);pack25519(r,ty);r[31]^=par25519(tx)<<7}function scalarmult(p,q,s){var b,i;set25519(p[0],gf0);set25519(p[1],gf1);set25519(p[2],gf1);set25519(p[3],gf0);for(i=255;i>=0;--i){b=s[i/8|0]>>(i&7)&1;cswap(p,q,b);add(q,p);add(p,p);cswap(p,q,b)}}function scalarbase(p,s){var q=[gf(),gf(),gf(),gf()];set25519(q[0],X);set25519(q[1],Y);set25519(q[2],gf1);M(q[3],X,Y);scalarmult(p,q,s)}function crypto_sign_keypair(pk,sk,seeded){var d=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()];var i;if(!seeded)randombytes(sk,32);crypto_hash(d,sk,32);d[0]&=248;d[31]&=127;d[31]|=64;scalarbase(p,d);pack(pk,p);for(i=0;i<32;i++)sk[i+32]=pk[i];return 0}var L=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(r,x){var carry,i,j,k;for(i=63;i>=32;--i){carry=0;for(j=i-32,k=i-12;j<k;++j){x[j]+=carry-16*x[i]*L[j-(i-32)];carry=Math.floor((x[j]+128)/256);x[j]-=carry*256}x[j]+=carry;x[i]=0}carry=0;for(j=0;j<32;j++){x[j]+=carry-(x[31]>>4)*L[j];carry=x[j]>>8;x[j]&=255}for(j=0;j<32;j++)x[j]-=carry*L[j];for(i=0;i<32;i++){x[i+1]+=x[i]>>8;r[i]=x[i]&255}}function reduce(r){var x=new Float64Array(64),i;for(i=0;i<64;i++)x[i]=r[i];for(i=0;i<64;i++)r[i]=0;modL(r,x)}function crypto_sign(sm,m,n,sk){var d=new Uint8Array(64),h=new Uint8Array(64),r=new Uint8Array(64);var i,j,x=new Float64Array(64);var p=[gf(),gf(),gf(),gf()];crypto_hash(d,sk,32);d[0]&=248;d[31]&=127;d[31]|=64;var smlen=n+64;for(i=0;i<n;i++)sm[64+i]=m[i];for(i=0;i<32;i++)sm[32+i]=d[32+i];crypto_hash(r,sm.subarray(32),n+32);reduce(r);scalarbase(p,r);pack(sm,p);for(i=32;i<64;i++)sm[i]=sk[i];crypto_hash(h,sm,n+64);reduce(h);for(i=0;i<64;i++)x[i]=0;for(i=0;i<32;i++)x[i]=r[i];for(i=0;i<32;i++){for(j=0;j<32;j++){x[i+j]+=h[i]*d[j]}}modL(sm.subarray(32),x);return smlen}function unpackneg(r,p){var t=gf(),chk=gf(),num=gf(),den=gf(),den2=gf(),den4=gf(),den6=gf();set25519(r[2],gf1);unpack25519(r[1],p);S(num,r[1]);M(den,num,D);Z(num,num,r[2]);A(den,r[2],den);S(den2,den);S(den4,den2);M(den6,den4,den2);M(t,den6,num);M(t,t,den);pow2523(t,t);M(t,t,num);M(t,t,den);M(t,t,den);M(r[0],t,den);S(chk,r[0]);M(chk,chk,den);if(neq25519(chk,num))M(r[0],r[0],I);S(chk,r[0]);M(chk,chk,den);if(neq25519(chk,num))return-1;if(par25519(r[0])===p[31]>>7)Z(r[0],gf0,r[0]);M(r[3],r[0],r[1]);return 0}function crypto_sign_open(m,sm,n,pk){var i;var t=new Uint8Array(32),h=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()],q=[gf(),gf(),gf(),gf()];if(n<64)return-1;if(unpackneg(q,pk))return-1;for(i=0;i<n;i++)m[i]=sm[i];for(i=0;i<32;i++)m[i+32]=pk[i];crypto_hash(h,m,n);reduce(h);scalarmult(p,q,h);scalarbase(q,sm.subarray(32));add(p,q);pack(t,p);n-=64;if(crypto_verify_32(sm,0,t,0)){for(i=0;i<n;i++)m[i]=0;return-1}for(i=0;i<n;i++)m[i]=sm[i+64];return n}var crypto_secretbox_KEYBYTES=32,crypto_secretbox_NONCEBYTES=24,crypto_secretbox_ZEROBYTES=32,crypto_secretbox_BOXZEROBYTES=16,crypto_scalarmult_BYTES=32,crypto_scalarmult_SCALARBYTES=32,crypto_box_PUBLICKEYBYTES=32,crypto_box_SECRETKEYBYTES=32,crypto_box_BEFORENMBYTES=32,crypto_box_NONCEBYTES=crypto_secretbox_NONCEBYTES,crypto_box_ZEROBYTES=crypto_secretbox_ZEROBYTES,crypto_box_BOXZEROBYTES=crypto_secretbox_BOXZEROBYTES,crypto_sign_BYTES=64,crypto_sign_PUBLICKEYBYTES=32,crypto_sign_SECRETKEYBYTES=64,crypto_sign_SEEDBYTES=32,crypto_hash_BYTES=64;nacl.lowlevel={crypto_core_hsalsa20:crypto_core_hsalsa20,crypto_stream_xor:crypto_stream_xor,crypto_stream:crypto_stream,crypto_stream_salsa20_xor:crypto_stream_salsa20_xor,crypto_stream_salsa20:crypto_stream_salsa20,crypto_onetimeauth:crypto_onetimeauth,crypto_onetimeauth_verify:crypto_onetimeauth_verify,crypto_verify_16:crypto_verify_16,crypto_verify_32:crypto_verify_32,crypto_secretbox:crypto_secretbox,crypto_secretbox_open:crypto_secretbox_open,crypto_scalarmult:crypto_scalarmult,crypto_scalarmult_base:crypto_scalarmult_base,crypto_box_beforenm:crypto_box_beforenm,crypto_box_afternm:crypto_box_afternm,crypto_box:crypto_box,crypto_box_open:crypto_box_open,crypto_box_keypair:crypto_box_keypair,crypto_hash:crypto_hash,crypto_sign:crypto_sign,crypto_sign_keypair:crypto_sign_keypair,crypto_sign_open:crypto_sign_open,crypto_secretbox_KEYBYTES:crypto_secretbox_KEYBYTES,crypto_secretbox_NONCEBYTES:crypto_secretbox_NONCEBYTES,crypto_secretbox_ZEROBYTES:crypto_secretbox_ZEROBYTES,crypto_secretbox_BOXZEROBYTES:crypto_secretbox_BOXZEROBYTES,crypto_scalarmult_BYTES:crypto_scalarmult_BYTES,crypto_scalarmult_SCALARBYTES:crypto_scalarmult_SCALARBYTES,crypto_box_PUBLICKEYBYTES:crypto_box_PUBLICKEYBYTES,crypto_box_SECRETKEYBYTES:crypto_box_SECRETKEYBYTES,crypto_box_BEFORENMBYTES:crypto_box_BEFORENMBYTES,crypto_box_NONCEBYTES:crypto_box_NONCEBYTES,crypto_box_ZEROBYTES:crypto_box_ZEROBYTES,crypto_box_BOXZEROBYTES:crypto_box_BOXZEROBYTES,crypto_sign_BYTES:crypto_sign_BYTES,crypto_sign_PUBLICKEYBYTES:crypto_sign_PUBLICKEYBYTES,crypto_sign_SECRETKEYBYTES:crypto_sign_SECRETKEYBYTES,crypto_sign_SEEDBYTES:crypto_sign_SEEDBYTES,crypto_hash_BYTES:crypto_hash_BYTES,gf:gf,D:D,L:L,pack25519:pack25519,unpack25519:unpack25519,M:M,A:A,S:S,Z:Z,pow2523:pow2523,add:add,set25519:set25519,modL:modL,scalarmult:scalarmult,scalarbase:scalarbase};function checkLengths(k,n){if(k.length!==crypto_secretbox_KEYBYTES)throw new Error("bad key size");if(n.length!==crypto_secretbox_NONCEBYTES)throw new Error("bad nonce size")}function checkBoxLengths(pk,sk){if(pk.length!==crypto_box_PUBLICKEYBYTES)throw new Error("bad public key size");if(sk.length!==crypto_box_SECRETKEYBYTES)throw new Error("bad secret key size")}function checkArrayTypes(){for(var i=0;i<arguments.length;i++){if(!(arguments[i]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}}function cleanup(arr){for(var i=0;i<arr.length;i++)arr[i]=0}nacl.randomBytes=function(n){var b=new Uint8Array(n);randombytes(b,n);return b};nacl.secretbox=function(msg,nonce,key){checkArrayTypes(msg,nonce,key);checkLengths(key,nonce);var m=new Uint8Array(crypto_secretbox_ZEROBYTES+msg.length);var c=new Uint8Array(m.length);for(var i=0;i<msg.length;i++)m[i+crypto_secretbox_ZEROBYTES]=msg[i];crypto_secretbox(c,m,m.length,nonce,key);return c.subarray(crypto_secretbox_BOXZEROBYTES)};nacl.secretbox.open=function(box,nonce,key){checkArrayTypes(box,nonce,key);checkLengths(key,nonce);var c=new Uint8Array(crypto_secretbox_BOXZEROBYTES+box.length);var m=new Uint8Array(c.length);for(var i=0;i<box.length;i++)c[i+crypto_secretbox_BOXZEROBYTES]=box[i];if(c.length<32)return null;if(crypto_secretbox_open(m,c,c.length,nonce,key)!==0)return null;return m.subarray(crypto_secretbox_ZEROBYTES)};nacl.secretbox.keyLength=crypto_secretbox_KEYBYTES;nacl.secretbox.nonceLength=crypto_secretbox_NONCEBYTES;nacl.secretbox.overheadLength=crypto_secretbox_BOXZEROBYTES;nacl.scalarMult=function(n,p){checkArrayTypes(n,p);if(n.length!==crypto_scalarmult_SCALARBYTES)throw new Error("bad n size");if(p.length!==crypto_scalarmult_BYTES)throw new Error("bad p size");var q=new Uint8Array(crypto_scalarmult_BYTES);crypto_scalarmult(q,n,p);return q};nacl.scalarMult.base=function(n){checkArrayTypes(n);if(n.length!==crypto_scalarmult_SCALARBYTES)throw new Error("bad n size");var q=new Uint8Array(crypto_scalarmult_BYTES);crypto_scalarmult_base(q,n);return q};nacl.scalarMult.scalarLength=crypto_scalarmult_SCALARBYTES;nacl.scalarMult.groupElementLength=crypto_scalarmult_BYTES;nacl.box=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox(msg,nonce,k)};nacl.box.before=function(publicKey,secretKey){checkArrayTypes(publicKey,secretKey);checkBoxLengths(publicKey,secretKey);var k=new Uint8Array(crypto_box_BEFORENMBYTES);crypto_box_beforenm(k,publicKey,secretKey);return k};nacl.box.after=nacl.secretbox;nacl.box.open=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox.open(msg,nonce,k)};nacl.box.open.after=nacl.secretbox.open;nacl.box.keyPair=function(){var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_box_SECRETKEYBYTES);crypto_box_keypair(pk,sk);return{publicKey:pk,secretKey:sk}};nacl.box.keyPair.fromSecretKey=function(secretKey){checkArrayTypes(secretKey);if(secretKey.length!==crypto_box_SECRETKEYBYTES)throw new Error("bad secret key size");var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);crypto_scalarmult_base(pk,secretKey);return{publicKey:pk,secretKey:new Uint8Array(secretKey)}};nacl.box.publicKeyLength=crypto_box_PUBLICKEYBYTES;nacl.box.secretKeyLength=crypto_box_SECRETKEYBYTES;nacl.box.sharedKeyLength=crypto_box_BEFORENMBYTES;nacl.box.nonceLength=crypto_box_NONCEBYTES;nacl.box.overheadLength=nacl.secretbox.overheadLength;nacl.sign=function(msg,secretKey){checkArrayTypes(msg,secretKey);if(secretKey.length!==crypto_sign_SECRETKEYBYTES)throw new Error("bad secret key size");var signedMsg=new Uint8Array(crypto_sign_BYTES+msg.length);crypto_sign(signedMsg,msg,msg.length,secretKey);return signedMsg};nacl.sign.open=function(signedMsg,publicKey){checkArrayTypes(signedMsg,publicKey);if(publicKey.length!==crypto_sign_PUBLICKEYBYTES)throw new Error("bad public key size");var tmp=new Uint8Array(signedMsg.length);var mlen=crypto_sign_open(tmp,signedMsg,signedMsg.length,publicKey);if(mlen<0)return null;var m=new Uint8Array(mlen);for(var i=0;i<m.length;i++)m[i]=tmp[i];return m};nacl.sign.detached=function(msg,secretKey){var signedMsg=nacl.sign(msg,secretKey);var sig=new Uint8Array(crypto_sign_BYTES);for(var i=0;i<sig.length;i++)sig[i]=signedMsg[i];return sig};nacl.sign.detached.verify=function(msg,sig,publicKey){checkArrayTypes(msg,sig,publicKey);if(sig.length!==crypto_sign_BYTES)throw new Error("bad signature size");if(publicKey.length!==crypto_sign_PUBLICKEYBYTES)throw new Error("bad public key size");var sm=new Uint8Array(crypto_sign_BYTES+msg.length);var m=new Uint8Array(crypto_sign_BYTES+msg.length);var i;for(i=0;i<crypto_sign_BYTES;i++)sm[i]=sig[i];for(i=0;i<msg.length;i++)sm[i+crypto_sign_BYTES]=msg[i];return crypto_sign_open(m,sm,sm.length,publicKey)>=0};nacl.sign.keyPair=function(){var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);crypto_sign_keypair(pk,sk);return{publicKey:pk,secretKey:sk}};nacl.sign.keyPair.fromSecretKey=function(secretKey){checkArrayTypes(secretKey);if(secretKey.length!==crypto_sign_SECRETKEYBYTES)throw new Error("bad secret key size");var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);for(var i=0;i<pk.length;i++)pk[i]=secretKey[32+i];return{publicKey:pk,secretKey:new Uint8Array(secretKey)}};nacl.sign.keyPair.fromSeed=function(seed){checkArrayTypes(seed);if(seed.length!==crypto_sign_SEEDBYTES)throw new Error("bad seed size");var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);for(var i=0;i<32;i++)sk[i]=seed[i];crypto_sign_keypair(pk,sk,true);return{publicKey:pk,secretKey:sk}};nacl.sign.publicKeyLength=crypto_sign_PUBLICKEYBYTES;nacl.sign.secretKeyLength=crypto_sign_SECRETKEYBYTES;nacl.sign.seedLength=crypto_sign_SEEDBYTES;nacl.sign.signatureLength=crypto_sign_BYTES;nacl.hash=function(msg){checkArrayTypes(msg);var h=new Uint8Array(crypto_hash_BYTES);crypto_hash(h,msg,msg.length);return h};nacl.hash.hashLength=crypto_hash_BYTES;nacl.verify=function(x,y){checkArrayTypes(x,y);if(x.length===0||y.length===0)return false;if(x.length!==y.length)return false;return vn(x,0,y,0,x.length)===0?true:false};nacl.setPRNG=function(fn){randombytes=fn};(function(){var crypto=typeof self!=="undefined"?self.crypto||self.msCrypto:null;if(crypto&&crypto.getRandomValues){var QUOTA=65536;nacl.setPRNG(function(x,n){var i,v=new Uint8Array(n);for(i=0;i<n;i+=QUOTA){crypto.getRandomValues(v.subarray(i,i+Math.min(n-i,QUOTA)))}for(i=0;i<n;i++)x[i]=v[i];cleanup(v)})}else if(typeof require!=="undefined"){crypto=require("crypto");if(crypto&&crypto.randomBytes){nacl.setPRNG(function(x,n){var i,v=crypto.randomBytes(n);for(i=0;i<n;i++)x[i]=v[i];cleanup(v)})}}})()})(typeof module!=="undefined"&&module.exports?module.exports:self.nacl=self.nacl||{})},{crypto:226}],816:[function(require,module,exports){(function(global){(function(){module.exports=deprecate;function deprecate(fn,msg){if(config("noDeprecation")){return fn}var warned=false;function deprecated(){if(!warned){if(config("throwDeprecation")){throw new Error(msg)}else if(config("traceDeprecation")){console.trace(msg)}else{console.warn(msg)}warned=true}return fn.apply(this,arguments)}return deprecated}function config(name){try{if(!global.localStorage)return false}catch(_){return false}var val=global.localStorage[name];if(null==val)return false;return String(val).toLowerCase()==="true"}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],817:[function(require,module,exports){arguments[4][183][0].apply(exports,arguments)},{dup:183}],818:[function(require,module,exports){"use strict";var isArgumentsObject=require("is-arguments");var isGeneratorFunction=require("is-generator-function");var whichTypedArray=require("which-typed-array");var isTypedArray=require("is-typed-array");function uncurryThis(f){return f.call.bind(f)}var BigIntSupported=typeof BigInt!=="undefined";var SymbolSupported=typeof Symbol!=="undefined";var ObjectToString=uncurryThis(Object.prototype.toString);var numberValue=uncurryThis(Number.prototype.valueOf);var stringValue=uncurryThis(String.prototype.valueOf);var booleanValue=uncurryThis(Boolean.prototype.valueOf);if(BigIntSupported){var bigIntValue=uncurryThis(BigInt.prototype.valueOf)}if(SymbolSupported){var symbolValue=uncurryThis(Symbol.prototype.valueOf)}function checkBoxedPrimitive(value,prototypeValueOf){if(typeof value!=="object"){return false}try{prototypeValueOf(value);return true}catch(e){return false}}exports.isArgumentsObject=isArgumentsObject;exports.isGeneratorFunction=isGeneratorFunction;exports.isTypedArray=isTypedArray;function isPromise(input){return typeof Promise!=="undefined"&&input instanceof Promise||input!==null&&typeof input==="object"&&typeof input.then==="function"&&typeof input.catch==="function"}exports.isPromise=isPromise;function isArrayBufferView(value){if(typeof ArrayBuffer!=="undefined"&&ArrayBuffer.isView){return ArrayBuffer.isView(value)}return isTypedArray(value)||isDataView(value)}exports.isArrayBufferView=isArrayBufferView;function isUint8Array(value){return whichTypedArray(value)==="Uint8Array"}exports.isUint8Array=isUint8Array;function isUint8ClampedArray(value){return whichTypedArray(value)==="Uint8ClampedArray"}exports.isUint8ClampedArray=isUint8ClampedArray;function isUint16Array(value){return whichTypedArray(value)==="Uint16Array"}exports.isUint16Array=isUint16Array;function isUint32Array(value){return whichTypedArray(value)==="Uint32Array"}exports.isUint32Array=isUint32Array;function isInt8Array(value){return whichTypedArray(value)==="Int8Array"}exports.isInt8Array=isInt8Array;function isInt16Array(value){return whichTypedArray(value)==="Int16Array"}exports.isInt16Array=isInt16Array;function isInt32Array(value){return whichTypedArray(value)==="Int32Array"}exports.isInt32Array=isInt32Array;function isFloat32Array(value){return whichTypedArray(value)==="Float32Array"}exports.isFloat32Array=isFloat32Array;function isFloat64Array(value){return whichTypedArray(value)==="Float64Array"}exports.isFloat64Array=isFloat64Array;function isBigInt64Array(value){return whichTypedArray(value)==="BigInt64Array"}exports.isBigInt64Array=isBigInt64Array;function isBigUint64Array(value){return whichTypedArray(value)==="BigUint64Array"}exports.isBigUint64Array=isBigUint64Array;function isMapToString(value){return ObjectToString(value)==="[object Map]"}isMapToString.working=typeof Map!=="undefined"&&isMapToString(new Map);function isMap(value){if(typeof Map==="undefined"){return false}return isMapToString.working?isMapToString(value):value instanceof Map}exports.isMap=isMap;function isSetToString(value){return ObjectToString(value)==="[object Set]"}isSetToString.working=typeof Set!=="undefined"&&isSetToString(new Set);function isSet(value){if(typeof Set==="undefined"){return false}return isSetToString.working?isSetToString(value):value instanceof Set}exports.isSet=isSet;function isWeakMapToString(value){return ObjectToString(value)==="[object WeakMap]"}isWeakMapToString.working=typeof WeakMap!=="undefined"&&isWeakMapToString(new WeakMap);function isWeakMap(value){if(typeof WeakMap==="undefined"){return false}return isWeakMapToString.working?isWeakMapToString(value):value instanceof WeakMap}exports.isWeakMap=isWeakMap;function isWeakSetToString(value){return ObjectToString(value)==="[object WeakSet]"}isWeakSetToString.working=typeof WeakSet!=="undefined"&&isWeakSetToString(new WeakSet);function isWeakSet(value){return isWeakSetToString(value)}exports.isWeakSet=isWeakSet;function isArrayBufferToString(value){return ObjectToString(value)==="[object ArrayBuffer]"}isArrayBufferToString.working=typeof ArrayBuffer!=="undefined"&&isArrayBufferToString(new ArrayBuffer);function isArrayBuffer(value){if(typeof ArrayBuffer==="undefined"){return false}return isArrayBufferToString.working?isArrayBufferToString(value):value instanceof ArrayBuffer}exports.isArrayBuffer=isArrayBuffer;function isDataViewToString(value){return ObjectToString(value)==="[object DataView]"}isDataViewToString.working=typeof ArrayBuffer!=="undefined"&&typeof DataView!=="undefined"&&isDataViewToString(new DataView(new ArrayBuffer(1),0,1));function isDataView(value){if(typeof DataView==="undefined"){return false}return isDataViewToString.working?isDataViewToString(value):value instanceof DataView}exports.isDataView=isDataView;var SharedArrayBufferCopy=typeof SharedArrayBuffer!=="undefined"?SharedArrayBuffer:undefined;function isSharedArrayBufferToString(value){return ObjectToString(value)==="[object SharedArrayBuffer]"}function isSharedArrayBuffer(value){if(typeof SharedArrayBufferCopy==="undefined"){return false}if(typeof isSharedArrayBufferToString.working==="undefined"){isSharedArrayBufferToString.working=isSharedArrayBufferToString(new SharedArrayBufferCopy)}return isSharedArrayBufferToString.working?isSharedArrayBufferToString(value):value instanceof SharedArrayBufferCopy}exports.isSharedArrayBuffer=isSharedArrayBuffer;function isAsyncFunction(value){return ObjectToString(value)==="[object AsyncFunction]"}exports.isAsyncFunction=isAsyncFunction;function isMapIterator(value){return ObjectToString(value)==="[object Map Iterator]"}exports.isMapIterator=isMapIterator;function isSetIterator(value){return ObjectToString(value)==="[object Set Iterator]"}exports.isSetIterator=isSetIterator;function isGeneratorObject(value){return ObjectToString(value)==="[object Generator]"}exports.isGeneratorObject=isGeneratorObject;function isWebAssemblyCompiledModule(value){return ObjectToString(value)==="[object WebAssembly.Module]"}exports.isWebAssemblyCompiledModule=isWebAssemblyCompiledModule;function isNumberObject(value){return checkBoxedPrimitive(value,numberValue)}exports.isNumberObject=isNumberObject;function isStringObject(value){return checkBoxedPrimitive(value,stringValue)}exports.isStringObject=isStringObject;function isBooleanObject(value){return checkBoxedPrimitive(value,booleanValue)}exports.isBooleanObject=isBooleanObject;function isBigIntObject(value){return BigIntSupported&&checkBoxedPrimitive(value,bigIntValue)}exports.isBigIntObject=isBigIntObject;function isSymbolObject(value){return SymbolSupported&&checkBoxedPrimitive(value,symbolValue)}exports.isSymbolObject=isSymbolObject;function isBoxedPrimitive(value){return isNumberObject(value)||isStringObject(value)||isBooleanObject(value)||isBigIntObject(value)||isSymbolObject(value)}exports.isBoxedPrimitive=isBoxedPrimitive;function isAnyArrayBuffer(value){return typeof Uint8Array!=="undefined"&&(isArrayBuffer(value)||isSharedArrayBuffer(value))}exports.isAnyArrayBuffer=isAnyArrayBuffer;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(method){Object.defineProperty(exports,method,{enumerable:false,value:function(){throw new Error(method+" is not supported in userland")}})})},{"is-arguments":493,"is-generator-function":495,"is-typed-array":496,"which-typed-array":835}],819:[function(require,module,exports){(function(process){(function(){var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function getOwnPropertyDescriptors(obj){var keys=Object.keys(obj);var descriptors={};for(var i=0;i<keys.length;i++){descriptors[keys[i]]=Object.getOwnPropertyDescriptor(obj,keys[i])}return descriptors};var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(typeof process!=="undefined"&&process.noDeprecation===true){return fn}if(typeof process==="undefined"){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnvRegex=/^$/;if(process.env.NODE_DEBUG){var debugEnv=process.env.NODE_DEBUG;debugEnv=debugEnv.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase();debugEnvRegex=new RegExp("^"+debugEnv+"$","i")}exports.debuglog=function(set){set=set.toUpperCase();if(!debugs[set]){if(debugEnvRegex.test(set)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").slice(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.slice(1,-1);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}exports.types=require("./support/types");function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;exports.types.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;exports.types.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;exports.types.isNativeError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=require("./support/isBuffer");function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=require("inherits");exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var kCustomPromisifiedSymbol=typeof Symbol!=="undefined"?Symbol("util.promisify.custom"):undefined;exports.promisify=function promisify(original){if(typeof original!=="function")throw new TypeError('The "original" argument must be of type Function');if(kCustomPromisifiedSymbol&&original[kCustomPromisifiedSymbol]){var fn=original[kCustomPromisifiedSymbol];if(typeof fn!=="function"){throw new TypeError('The "util.promisify.custom" argument must be of type Function')}Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:false,writable:false,configurable:true});return fn}function fn(){var promiseResolve,promiseReject;var promise=new Promise(function(resolve,reject){promiseResolve=resolve;promiseReject=reject});var args=[];for(var i=0;i<arguments.length;i++){args.push(arguments[i])}args.push(function(err,value){if(err){promiseReject(err)}else{promiseResolve(value)}});try{original.apply(this,args)}catch(err){promiseReject(err)}return promise}Object.setPrototypeOf(fn,Object.getPrototypeOf(original));if(kCustomPromisifiedSymbol)Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:false,writable:false,configurable:true});return Object.defineProperties(fn,getOwnPropertyDescriptors(original))};exports.promisify.custom=kCustomPromisifiedSymbol;function callbackifyOnRejected(reason,cb){if(!reason){var newReason=new Error("Promise was rejected with a falsy value");newReason.reason=reason;reason=newReason}return cb(reason)}function callbackify(original){if(typeof original!=="function"){throw new TypeError('The "original" argument must be of type Function')}function callbackified(){var args=[];for(var i=0;i<arguments.length;i++){args.push(arguments[i])}var maybeCb=args.pop();if(typeof maybeCb!=="function"){throw new TypeError("The last argument must be of type Function")}var self=this;var cb=function(){return maybeCb.apply(self,arguments)};original.apply(this,args).then(function(ret){process.nextTick(cb.bind(null,null,ret))},function(rej){process.nextTick(callbackifyOnRejected.bind(null,rej,cb))})}Object.setPrototypeOf(callbackified,Object.getPrototypeOf(original));Object.defineProperties(callbackified,getOwnPropertyDescriptors(original));return callbackified}exports.callbackify=callbackify}).call(this)}).call(this,require("_process"))},{"./support/isBuffer":817,"./support/types":818,_process:519,inherits:492}],820:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"v1",{enumerable:true,get:function(){return _v.default}});Object.defineProperty(exports,"v3",{enumerable:true,get:function(){return _v2.default}});Object.defineProperty(exports,"v4",{enumerable:true,get:function(){return _v3.default}});Object.defineProperty(exports,"v5",{enumerable:true,get:function(){return _v4.default}});Object.defineProperty(exports,"NIL",{enumerable:true,get:function(){return _nil.default}});Object.defineProperty(exports,"version",{enumerable:true,get:function(){return _version.default}});Object.defineProperty(exports,"validate",{enumerable:true,get:function(){return _validate.default}});Object.defineProperty(exports,"stringify",{enumerable:true,get:function(){return _stringify.default}});Object.defineProperty(exports,"parse",{enumerable:true,get:function(){return _parse.default}});var _v=_interopRequireDefault(require("./v1.js"));var _v2=_interopRequireDefault(require("./v3.js"));var _v3=_interopRequireDefault(require("./v4.js"));var _v4=_interopRequireDefault(require("./v5.js"));var _nil=_interopRequireDefault(require("./nil.js"));var _version=_interopRequireDefault(require("./version.js"));var _validate=_interopRequireDefault(require("./validate.js"));var _stringify=_interopRequireDefault(require("./stringify.js"));var _parse=_interopRequireDefault(require("./parse.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./nil.js":822,"./parse.js":823,"./stringify.js":827,"./v1.js":828,"./v3.js":829,"./v4.js":831,"./v5.js":832,"./validate.js":833,"./version.js":834}],821:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;function md5(bytes){if(typeof bytes==="string"){const msg=unescape(encodeURIComponent(bytes));bytes=new Uint8Array(msg.length);for(let i=0;i<msg.length;++i){bytes[i]=msg.charCodeAt(i)}}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes),bytes.length*8))}function md5ToHexEncodedArray(input){const output=[];const length32=input.length*32;const hexTab="0123456789abcdef";for(let i=0;i<length32;i+=8){const x=input[i>>5]>>>i%32&255;const hex=parseInt(hexTab.charAt(x>>>4&15)+hexTab.charAt(x&15),16);output.push(hex)}return output}function getOutputLength(inputLength8){return(inputLength8+64>>>9<<4)+14+1}function wordsToMd5(x,len){x[len>>5]|=128<<len%32;x[getOutputLength(len)-1]=len;let a=1732584193;let b=-271733879;let c=-1732584194;let d=271733878;for(let i=0;i<x.length;i+=16){const olda=a;const oldb=b;const oldc=c;const oldd=d;a=md5ff(a,b,c,d,x[i],7,-680876936);d=md5ff(d,a,b,c,x[i+1],12,-389564586);c=md5ff(c,d,a,b,x[i+2],17,606105819);b=md5ff(b,c,d,a,x[i+3],22,-1044525330);a=md5ff(a,b,c,d,x[i+4],7,-176418897);d=md5ff(d,a,b,c,x[i+5],12,1200080426);c=md5ff(c,d,a,b,x[i+6],17,-1473231341);b=md5ff(b,c,d,a,x[i+7],22,-45705983);a=md5ff(a,b,c,d,x[i+8],7,1770035416);d=md5ff(d,a,b,c,x[i+9],12,-1958414417);c=md5ff(c,d,a,b,x[i+10],17,-42063);b=md5ff(b,c,d,a,x[i+11],22,-1990404162);a=md5ff(a,b,c,d,x[i+12],7,1804603682);d=md5ff(d,a,b,c,x[i+13],12,-40341101);c=md5ff(c,d,a,b,x[i+14],17,-1502002290);b=md5ff(b,c,d,a,x[i+15],22,1236535329);a=md5gg(a,b,c,d,x[i+1],5,-165796510);d=md5gg(d,a,b,c,x[i+6],9,-1069501632);c=md5gg(c,d,a,b,x[i+11],14,643717713);b=md5gg(b,c,d,a,x[i],20,-373897302);a=md5gg(a,b,c,d,x[i+5],5,-701558691);d=md5gg(d,a,b,c,x[i+10],9,38016083);c=md5gg(c,d,a,b,x[i+15],14,-660478335);b=md5gg(b,c,d,a,x[i+4],20,-405537848);a=md5gg(a,b,c,d,x[i+9],5,568446438);d=md5gg(d,a,b,c,x[i+14],9,-1019803690);c=md5gg(c,d,a,b,x[i+3],14,-187363961);b=md5gg(b,c,d,a,x[i+8],20,1163531501);a=md5gg(a,b,c,d,x[i+13],5,-1444681467);d=md5gg(d,a,b,c,x[i+2],9,-51403784);c=md5gg(c,d,a,b,x[i+7],14,1735328473);b=md5gg(b,c,d,a,x[i+12],20,-1926607734);a=md5hh(a,b,c,d,x[i+5],4,-378558);d=md5hh(d,a,b,c,x[i+8],11,-2022574463);c=md5hh(c,d,a,b,x[i+11],16,1839030562);b=md5hh(b,c,d,a,x[i+14],23,-35309556);a=md5hh(a,b,c,d,x[i+1],4,-1530992060);d=md5hh(d,a,b,c,x[i+4],11,1272893353);c=md5hh(c,d,a,b,x[i+7],16,-155497632);b=md5hh(b,c,d,a,x[i+10],23,-1094730640);a=md5hh(a,b,c,d,x[i+13],4,681279174);d=md5hh(d,a,b,c,x[i],11,-358537222);c=md5hh(c,d,a,b,x[i+3],16,-722521979);b=md5hh(b,c,d,a,x[i+6],23,76029189);a=md5hh(a,b,c,d,x[i+9],4,-640364487);d=md5hh(d,a,b,c,x[i+12],11,-421815835);c=md5hh(c,d,a,b,x[i+15],16,530742520);b=md5hh(b,c,d,a,x[i+2],23,-995338651);a=md5ii(a,b,c,d,x[i],6,-198630844);d=md5ii(d,a,b,c,x[i+7],10,1126891415);c=md5ii(c,d,a,b,x[i+14],15,-1416354905);b=md5ii(b,c,d,a,x[i+5],21,-57434055);a=md5ii(a,b,c,d,x[i+12],6,1700485571);d=md5ii(d,a,b,c,x[i+3],10,-1894986606);c=md5ii(c,d,a,b,x[i+10],15,-1051523);b=md5ii(b,c,d,a,x[i+1],21,-2054922799);a=md5ii(a,b,c,d,x[i+8],6,1873313359);d=md5ii(d,a,b,c,x[i+15],10,-30611744);c=md5ii(c,d,a,b,x[i+6],15,-1560198380);b=md5ii(b,c,d,a,x[i+13],21,1309151649);a=md5ii(a,b,c,d,x[i+4],6,-145523070);d=md5ii(d,a,b,c,x[i+11],10,-1120210379);c=md5ii(c,d,a,b,x[i+2],15,718787259);b=md5ii(b,c,d,a,x[i+9],21,-343485551);a=safeAdd(a,olda);b=safeAdd(b,oldb);c=safeAdd(c,oldc);d=safeAdd(d,oldd)}return[a,b,c,d]}function bytesToWords(input){if(input.length===0){return[]}const length8=input.length*8;const output=new Uint32Array(getOutputLength(length8));for(let i=0;i<length8;i+=8){output[i>>5]|=(input[i/8]&255)<<i%32}return output}function safeAdd(x,y){const lsw=(x&65535)+(y&65535);const msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}function bitRotateLeft(num,cnt){return num<<cnt|num>>>32-cnt}function md5cmn(q,a,b,x,s,t){return safeAdd(bitRotateLeft(safeAdd(safeAdd(a,q),safeAdd(x,t)),s),b)}function md5ff(a,b,c,d,x,s,t){return md5cmn(b&c|~b&d,a,b,x,s,t)}function md5gg(a,b,c,d,x,s,t){return md5cmn(b&d|c&~d,a,b,x,s,t)}function md5hh(a,b,c,d,x,s,t){return md5cmn(b^c^d,a,b,x,s,t)}function md5ii(a,b,c,d,x,s,t){return md5cmn(c^(b|~d),a,b,x,s,t)}var _default=md5;exports.default=_default},{}],822:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _default="00000000-0000-0000-0000-000000000000";exports.default=_default},{}],823:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _validate=_interopRequireDefault(require("./validate.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function parse(uuid){if(!(0,_validate.default)(uuid)){throw TypeError("Invalid UUID")}let v;const arr=new Uint8Array(16);arr[0]=(v=parseInt(uuid.slice(0,8),16))>>>24;arr[1]=v>>>16&255;arr[2]=v>>>8&255;arr[3]=v&255;arr[4]=(v=parseInt(uuid.slice(9,13),16))>>>8;arr[5]=v&255;arr[6]=(v=parseInt(uuid.slice(14,18),16))>>>8;arr[7]=v&255;arr[8]=(v=parseInt(uuid.slice(19,23),16))>>>8;arr[9]=v&255;arr[10]=(v=parseInt(uuid.slice(24,36),16))/1099511627776&255;arr[11]=v/4294967296&255;arr[12]=v>>>24&255;arr[13]=v>>>16&255;arr[14]=v>>>8&255;arr[15]=v&255;return arr}var _default=parse;exports.default=_default},{"./validate.js":833}],824:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;exports.default=_default},{}],825:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=rng;let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues){getRandomValues=typeof crypto!=="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!=="undefined"&&typeof msCrypto.getRandomValues==="function"&&msCrypto.getRandomValues.bind(msCrypto);if(!getRandomValues){throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}}return getRandomValues(rnds8)}},{}],826:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;function f(s,x,y,z){switch(s){case 0:return x&y^~x&z;case 1:return x^y^z;case 2:return x&y^x&z^y&z;case 3:return x^y^z}}function ROTL(x,n){return x<<n|x>>>32-n}function sha1(bytes){const K=[1518500249,1859775393,2400959708,3395469782];const H=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof bytes==="string"){const msg=unescape(encodeURIComponent(bytes));bytes=[];for(let i=0;i<msg.length;++i){bytes.push(msg.charCodeAt(i))}}else if(!Array.isArray(bytes)){bytes=Array.prototype.slice.call(bytes)}bytes.push(128);const l=bytes.length/4+2;const N=Math.ceil(l/16);const M=new Array(N);for(let i=0;i<N;++i){const arr=new Uint32Array(16);for(let j=0;j<16;++j){arr[j]=bytes[i*64+j*4]<<24|bytes[i*64+j*4+1]<<16|bytes[i*64+j*4+2]<<8|bytes[i*64+j*4+3]}M[i]=arr}M[N-1][14]=(bytes.length-1)*8/Math.pow(2,32);M[N-1][14]=Math.floor(M[N-1][14]);M[N-1][15]=(bytes.length-1)*8&4294967295;for(let i=0;i<N;++i){const W=new Uint32Array(80);for(let t=0;t<16;++t){W[t]=M[i][t]}for(let t=16;t<80;++t){W[t]=ROTL(W[t-3]^W[t-8]^W[t-14]^W[t-16],1)}let a=H[0];let b=H[1];let c=H[2];let d=H[3];let e=H[4];for(let t=0;t<80;++t){const s=Math.floor(t/20);const T=ROTL(a,5)+f(s,b,c,d)+e+K[s]+W[t]>>>0;e=d;d=c;c=ROTL(b,30)>>>0;b=a;a=T}H[0]=H[0]+a>>>0;H[1]=H[1]+b>>>0;H[2]=H[2]+c>>>0;H[3]=H[3]+d>>>0;H[4]=H[4]+e>>>0}return[H[0]>>24&255,H[0]>>16&255,H[0]>>8&255,H[0]&255,H[1]>>24&255,H[1]>>16&255,H[1]>>8&255,H[1]&255,H[2]>>24&255,H[2]>>16&255,H[2]>>8&255,H[2]&255,H[3]>>24&255,H[3]>>16&255,H[3]>>8&255,H[3]&255,H[4]>>24&255,H[4]>>16&255,H[4]>>8&255,H[4]&255]}var _default=sha1;exports.default=_default},{}],827:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _validate=_interopRequireDefault(require("./validate.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const byteToHex=[];for(let i=0;i<256;++i){byteToHex.push((i+256).toString(16).substr(1))}function stringify(arr,offset=0){const uuid=(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();if(!(0,_validate.default)(uuid)){throw TypeError("Stringified UUID is invalid")}return uuid}var _default=stringify;exports.default=_default},{"./validate.js":833}],828:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _rng=_interopRequireDefault(require("./rng.js"));var _stringify=_interopRequireDefault(require("./stringify.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}let _nodeId;let _clockseq;let _lastMSecs=0;let _lastNSecs=0;function v1(options,buf,offset){let i=buf&&offset||0;const b=buf||new Array(16);options=options||{};let node=options.node||_nodeId;let clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;if(node==null||clockseq==null){const seedBytes=options.random||(options.rng||_rng.default)();if(node==null){node=_nodeId=[seedBytes[0]|1,seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]}if(clockseq==null){clockseq=_clockseq=(seedBytes[6]<<8|seedBytes[7])&16383}}let msecs=options.msecs!==undefined?options.msecs:Date.now();let nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;const dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&16383}if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0}if(nsecs>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=122192928e5;const tl=((msecs&268435455)*1e4+nsecs)%4294967296;b[i++]=tl>>>24&255;b[i++]=tl>>>16&255;b[i++]=tl>>>8&255;b[i++]=tl&255;const tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255;b[i++]=tmh&255;b[i++]=tmh>>>24&15|16;b[i++]=tmh>>>16&255;b[i++]=clockseq>>>8|128;b[i++]=clockseq&255;for(let n=0;n<6;++n){b[i+n]=node[n]}return buf||(0,_stringify.default)(b)}var _default=v1;exports.default=_default},{"./rng.js":825,"./stringify.js":827}],829:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _v=_interopRequireDefault(require("./v35.js"));var _md=_interopRequireDefault(require("./md5.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const v3=(0,_v.default)("v3",48,_md.default);var _default=v3;exports.default=_default},{"./md5.js":821,"./v35.js":830}],830:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=_default;exports.URL=exports.DNS=void 0;var _stringify=_interopRequireDefault(require("./stringify.js"));var _parse=_interopRequireDefault(require("./parse.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function stringToBytes(str){str=unescape(encodeURIComponent(str));const bytes=[];for(let i=0;i<str.length;++i){bytes.push(str.charCodeAt(i))}return bytes}const DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";exports.DNS=DNS;const URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";exports.URL=URL;function _default(name,version,hashfunc){function generateUUID(value,namespace,buf,offset){if(typeof value==="string"){value=stringToBytes(value)}if(typeof namespace==="string"){namespace=(0,_parse.default)(namespace)}if(namespace.length!==16){throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)")}let bytes=new Uint8Array(16+value.length);bytes.set(namespace);bytes.set(value,namespace.length);bytes=hashfunc(bytes);bytes[6]=bytes[6]&15|version;bytes[8]=bytes[8]&63|128;if(buf){offset=offset||0;for(let i=0;i<16;++i){buf[offset+i]=bytes[i]}return buf}return(0,_stringify.default)(bytes)}try{generateUUID.name=name}catch(err){}generateUUID.DNS=DNS;generateUUID.URL=URL;return generateUUID}},{"./parse.js":823,"./stringify.js":827}],831:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _rng=_interopRequireDefault(require("./rng.js"));var _stringify=_interopRequireDefault(require("./stringify.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function v4(options,buf,offset){options=options||{};const rnds=options.random||(options.rng||_rng.default)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){offset=offset||0;for(let i=0;i<16;++i){buf[offset+i]=rnds[i]}return buf}return(0,_stringify.default)(rnds)}var _default=v4;exports.default=_default},{"./rng.js":825,"./stringify.js":827}],832:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _v=_interopRequireDefault(require("./v35.js"));var _sha=_interopRequireDefault(require("./sha1.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const v5=(0,_v.default)("v5",80,_sha.default);var _default=v5;exports.default=_default},{"./sha1.js":826,"./v35.js":830}],833:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _regex=_interopRequireDefault(require("./regex.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function validate(uuid){return typeof uuid==="string"&&_regex.default.test(uuid)}var _default=validate;exports.default=_default},{"./regex.js":824}],834:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _validate=_interopRequireDefault(require("./validate.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function version(uuid){if(!(0,_validate.default)(uuid)){throw TypeError("Invalid UUID")}return parseInt(uuid.substr(14,1),16)}var _default=version;exports.default=_default},{"./validate.js":833}],835:[function(require,module,exports){(function(global){(function(){"use strict";var forEach=require("for-each");var availableTypedArrays=require("available-typed-arrays");var callBound=require("call-bind/callBound");var gOPD=require("gopd");var $toString=callBound("Object.prototype.toString");var hasToStringTag=require("has-tostringtag/shams")();var g=typeof globalThis==="undefined"?global:globalThis;var typedArrays=availableTypedArrays();var $slice=callBound("String.prototype.slice");var toStrTags={};var getPrototypeOf=Object.getPrototypeOf;if(hasToStringTag&&gOPD&&getPrototypeOf){forEach(typedArrays,function(typedArray){if(typeof g[typedArray]==="function"){var arr=new g[typedArray];if(Symbol.toStringTag in arr){var proto=getPrototypeOf(arr);var descriptor=gOPD(proto,Symbol.toStringTag);if(!descriptor){var superProto=getPrototypeOf(proto);descriptor=gOPD(superProto,Symbol.toStringTag)}toStrTags[typedArray]=descriptor.get}}})}var tryTypedArrays=function tryAllTypedArrays(value){var foundName=false;forEach(toStrTags,function(getter,typedArray){if(!foundName){try{var name=getter.call(value);if(name===typedArray){foundName=name}}catch(e){}}});return foundName};var isTypedArray=require("is-typed-array");module.exports=function whichTypedArray(value){if(!isTypedArray(value)){return false}if(!hasToStringTag||!(Symbol.toStringTag in value)){return $slice($toString(value),8,-1)}return tryTypedArrays(value)}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"available-typed-arrays":185,"call-bind/callBound":272,"for-each":316,gopd:321,"has-tostringtag/shams":460,"is-typed-array":496}]},{},[1])(1)});